import{s as Y,e as $,a as S,t as H,b as w,d as x,h as C,f as N,g as p,i as _,k as O,l as m,n as q,p as Ee,r as ge,o as Te,c as R,A as ye,u as pe,v as _e,z as be,K as Se,$ as Ce}from"../chunks/scheduler.C3TCnZHI.js";import{S as J,i as Q,c as L,a as B,m as W,t as V,b as P,d as A,g as ve,e as $e,f as De}from"../chunks/index.Lhnxl_wK.js";import{I as we,X as ke,e as ae}from"../chunks/Icon.5AMkhErR.js";import{g as re,b as ie,p as Ge}from"../chunks/entry.NnAEmM0l.js";import{p as Oe}from"../chunks/stores.1KnNEgyc.js";import{t as D,ak as ee,al as Ve,a2 as Pe,am as ce,an as Me,A as Z,ao as ue,ap as He,aq as Ne,m as fe}from"../chunks/business_initializer.L6DfDkrJ.js";import{V as z}from"../chunks/verification_helper._69_CXJb.js";import{I as xe}from"../chunks/InfoTooltipButton.R56BB3G4.js";import{D as Ue}from"../chunks/developer_helper.foFroNFN.js";import{$ as Ie}from"../chunks/runtime.oGXtuNGk.js";function je(o){let e,l,t,n,c,r=D("loginWithPhone")+"",h,u,b,E=D("enterPhoneNumber")+"",a,g,f,s,d,i,T=D("weSendYouCode")+"",U,M,G,X=D("login")+"",k,I,j,K;return l=new xe({props:{message:D("loginWithPhoneExplain")}}),s=new we({props:{src:ke,size:"24px"}}),{c(){e=$("div"),L(l.$$.fragment),t=S(),n=$("div"),c=$("h3"),h=H(r),u=S(),b=$("h3"),a=H(E),g=S(),f=$("button"),L(s.$$.fragment),d=S(),i=$("h3"),U=H(T),M=S(),G=$("button"),k=H(X),this.h()},l(v){e=w(v,"DIV",{class:!0});var y=x(e);B(l.$$.fragment,y),t=C(y),n=w(y,"DIV",{class:!0});var F=x(n);c=w(F,"H3",{class:!0});var te=x(c);h=N(te,r),te.forEach(p),u=C(F),b=w(F,"H3",{class:!0});var le=x(b);a=N(le,E),le.forEach(p),F.forEach(p),g=C(y),f=w(y,"BUTTON",{class:!0});var ne=x(f);B(s.$$.fragment,ne),ne.forEach(p),y.forEach(p),d=C(v),i=w(v,"H3",{class:!0});var se=x(i);U=N(se,T),se.forEach(p),M=C(v),G=w(v,"BUTTON",{class:!0});var oe=x(G);k=N(oe,X),oe.forEach(p),this.h()},h(){_(c,"class","font-bold text-lg"),_(b,"class","text-me"),_(n,"class","center"),_(f,"class","btn btn-ghost"),_(e,"class","flex justify-between items-center mb-[1rem]"),_(i,"class","text-xs"),_(G,"class","btn xs:btn-lg btn-outline w-full")},m(v,y){O(v,e,y),W(l,e,null),m(e,t),m(e,n),m(n,c),m(c,h),m(n,u),m(n,b),m(b,a),m(e,g),m(e,f),W(s,f,null),O(v,d,y),O(v,i,y),m(i,U),O(v,M,y),O(v,G,y),m(G,k),I=!0,j||(K=[q(f,"click",o[1]),q(G,"click",Fe)],j=!0)},p:Ee,i(v){I||(V(l.$$.fragment,v),V(s.$$.fragment,v),I=!0)},o(v){P(l.$$.fragment,v),P(s.$$.fragment,v),I=!1},d(v){v&&(p(e),p(d),p(i),p(M),p(G)),A(l),A(s),j=!1,ge(K)}}}const Fe=()=>{};function Le(o,e,l){let{dialog:t}=e;const n=()=>t.close();return o.$$set=c=>{"dialog"in c&&l(0,t=c.dialog)},[t,n]}class Be extends J{constructor(e){super(),Q(this,e,Le,je,Y,{dialog:0})}}function We(o){ee({status:"success",text:D("theCodeSentSuccessfully")}),z.GI().verificationID=o}async function Ae(o,e,l,t){await Ue.GI().logErrorToDb({userId:o,errorType:Ve.login,exceptions:[e],errorCode:e.message,extras:{codeSendTime:l?Pe(l):"",beforeSendTime:t}})}function ze({phone:o}){o!==""&&(ee({status:"info",text:D("theCodeIsSending")}),z.GI().lastVerificationUnix=Math.ceil(Date.now()/1e3),z.GI().submitedPhone=o,z.GI().phoneVerificationWithFirebase&&z.GI().sendSmsForFirebaseVerification(o,e=>We(e),Ae))}function qe(o){let e,l,t,n,c,r=D("loginWithPhone")+"",h,u,b,E=D("beforeStartWeNeewToConfirmPhone")+"",a,g,f,s,d,i,T=D("verify",o[1])+"",U,M,G,X;return l=new xe({props:{message:D("loginWithPhoneExplain")}}),s=new we({props:{src:ke,size:"24px"}}),{c(){e=$("div"),L(l.$$.fragment),t=S(),n=$("div"),c=$("h3"),h=H(r),u=S(),b=$("h3"),a=H(E),g=S(),f=$("button"),L(s.$$.fragment),d=S(),i=$("button"),U=H(T),this.h()},l(k){e=w(k,"DIV",{class:!0});var I=x(e);B(l.$$.fragment,I),t=C(I),n=w(I,"DIV",{class:!0});var j=x(n);c=w(j,"H3",{class:!0});var K=x(c);h=N(K,r),K.forEach(p),u=C(j),b=w(j,"H3",{class:!0});var v=x(b);a=N(v,E),v.forEach(p),j.forEach(p),g=C(I),f=w(I,"BUTTON",{class:!0});var y=x(f);B(s.$$.fragment,y),y.forEach(p),I.forEach(p),d=C(k),i=w(k,"BUTTON",{class:!0});var F=x(i);U=N(F,T),F.forEach(p),this.h()},h(){_(c,"class","font-bold text-lg"),_(b,"class","text-me"),_(n,"class","center"),_(f,"class","btn btn-ghost"),_(e,"class","flex justify-between items-center mb-[1rem]"),_(i,"class","btn xs:btn-lg btn-outline w-full")},m(k,I){O(k,e,I),W(l,e,null),m(e,t),m(e,n),m(n,c),m(c,h),m(n,u),m(n,b),m(b,a),m(e,g),m(e,f),W(s,f,null),O(k,d,I),O(k,i,I),m(i,U),M=!0,G||(X=[q(f,"click",o[3]),q(i,"click",o[2])],G=!0)},p(k,[I]){(!M||I&2)&&T!==(T=D("verify",k[1])+"")&&Te(U,T)},i(k){M||(V(l.$$.fragment,k),V(s.$$.fragment,k),M=!0)},o(k){P(l.$$.fragment,k),P(s.$$.fragment,k),M=!1},d(k){k&&(p(e),p(d),p(i)),A(l),A(s),G=!1,ge(X)}}}function Xe(o,e,l){let t;R(o,Ie,u=>l(1,t=u));const n=ye();let{dialog:c}=e;function r(){ze({phone:"+972-525656377"}),n("navigateOtp")}const h=()=>c.close();return o.$$set=u=>{"dialog"in u&&l(0,c=u.dialog)},[c,t,r,h]}class Ke extends J{constructor(e){super(),Q(this,e,Xe,qe,Y,{dialog:0})}}function Re(o){let e,l;return e=new Be({props:{dialog:o[0]}}),{c(){L(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,n){W(e,t,n),l=!0},p(t,n){const c={};n&1&&(c.dialog=t[0]),e.$set(c)},i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ye(o){let e,l;return e=new Ke({props:{dialog:o[0]}}),e.$on("navigateOtp",o[2]),{c(){L(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,n){W(e,t,n),l=!0},p(t,n){const c={};n&1&&(c.dialog=t[0]),e.$set(c)},i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Je(o){let e,l,t,n,c,r,h="<button>close</button>",u,b,E;const a=[Ye,Re],g=[];function f(s,d){return s[1]?1:0}return t=f(o),n=g[t]=a[t](o),{c(){e=$("dialog"),l=$("div"),n.c(),c=S(),r=$("form"),r.innerHTML=h,this.h()},l(s){e=w(s,"DIALOG",{class:!0});var d=x(e);l=w(d,"DIV",{class:!0});var i=x(l);n.l(i),i.forEach(p),c=C(d),r=w(d,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),pe(r)!=="svelte-povsts"&&(r.innerHTML=h),d.forEach(p),this.h()},h(){_(l,"class","modal-box bg-base-200 pb-10"),_(r,"method","dialog"),_(r,"class","modal-backdrop"),_(e,"class","modal modal-bottom sm:modal-middle")},m(s,d){O(s,e,d),m(e,l),g[t].m(l,null),m(e,c),m(e,r),o[3](e),u=!0,b||(E=q(e,"close",o[4]),b=!0)},p(s,[d]){let i=t;t=f(s),t===i?g[t].p(s,d):(ve(),P(g[i],1,1,()=>{g[i]=null}),$e(),n=g[t],n?n.p(s,d):(n=g[t]=a[t](s),n.c()),V(n,1),n.m(l,null))},i(s){u||(V(n),u=!0)},o(s){P(n),u=!1},d(s){s&&p(e),g[t].d(),o[3](null),b=!1,E()}}}function Qe(o,e,l){let{dialog:t}=e,n=!1;const c=u=>{l(1,n=!0)};function r(u){_e[u?"unshift":"push"](()=>{t=u,l(0,t)})}const h=()=>{l(1,n=!1),history.back()};return o.$$set=u=>{"dialog"in u&&l(0,t=u.dialog)},[t,n,c,r,h]}class Ze extends J{constructor(e){super(),Q(this,e,Qe,Je,Y,{dialog:0})}}function de(o,e,l){const t=o.slice();return t[8]=e[l],t[10]=l,t}function he(o){let e,l,t;function n(r){o[3](r)}let c={};return o[0]!==void 0&&(c.dialog=o[0]),e=new Ze({props:c}),_e.push(()=>De(e,"dialog",n)),{c(){L(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,h){W(e,r,h),t=!0},p(r,h){const u={};!l&&h&1&&(l=!0,u.dialog=r[0],Ce(()=>l=!1)),e.$set(u)},i(r){t||(V(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){A(e,r)}}}function me(o){let e,l,t,n,c=ce[o[8]]+"",r,h,u,b;function E(){return o[4](o[8])}return{c(){e=$("button"),l=$("img"),n=H(`
        Signin with `),r=H(c),h=S(),this.h()},l(a){e=w(a,"BUTTON",{class:!0});var g=x(e);l=w(g,"IMG",{class:!0,src:!0,alt:!0}),n=N(g,`
        Signin with `),r=N(g,c),h=C(g),g.forEach(p),this.h()},h(){_(l,"class","w-10 h-10"),be(l.src,t=Me[o[8]])||_(l,"src",t),_(l,"alt",ce[o[8]]),_(e,"class","btn xs:btn-lg btn-outline w-full "+(o[8]===Z.Facebook?"opacity-50":""))},m(a,g){O(a,e,g),m(e,l),m(e,n),m(e,r),m(e,h),u||(b=q(e,"click",E),u=!0)},p(a,g){o=a},d(a){a&&p(e),u=!1,b()}}}function et(o){let e,l,t,n,c,r,h,u="Login Or Signup",b,E,a=o[1].state.showModal&&he(o),g=ae(ue),f=[];for(let s=0;s<g.length;s+=1)f[s]=me(de(o,g,s));return{c(){a&&a.c(),e=S(),l=$("main"),t=$("img"),c=S(),r=$("div"),h=$("h1"),h.textContent=u,b=S();for(let s=0;s<f.length;s+=1)f[s].c();this.h()},l(s){a&&a.l(s),e=C(s),l=w(s,"MAIN",{class:!0});var d=x(l);t=w(d,"IMG",{class:!0,src:!0,alt:!0}),c=C(d),r=w(d,"DIV",{class:!0});var i=x(r);h=w(i,"H1",{class:!0,"data-svelte-h":!0}),pe(h)!=="svelte-1psr3v7"&&(h.textContent=u),b=C(i);for(let T=0;T<f.length;T+=1)f[T].l(i);i.forEach(p),d.forEach(p),this.h()},h(){_(t,"class","flex-[1] object-cover !max-w-[50%] hidden lg:flex"),be(t.src,n="https://images.pexels.com/photos/841130/pexels-photo-841130.jpeg?cs=srgb&dl=action-athlete-barbell-841130.jpg&fm=jpg")||_(t,"src",n),_(t,"alt","simpletor"),_(h,"class","text-3xl text-center mt-4"),_(r,"class","flex-[1] flex flex-col justify-center items-center xs:gap-8 gap-5 sm:mx-[70px] mx-3 my-[100px]"),_(l,"class","flex w-full min-h-full")},m(s,d){a&&a.m(s,d),O(s,e,d),O(s,l,d),m(l,t),m(l,c),m(l,r),m(r,h),m(r,b);for(let i=0;i<f.length;i+=1)f[i]&&f[i].m(r,null);E=!0},p(s,[d]){if(s[1].state.showModal?a?(a.p(s,d),d&2&&V(a,1)):(a=he(s),a.c(),V(a,1),a.m(e.parentNode,e)):a&&(ve(),P(a,1,1,()=>{a=null}),$e()),d&4){g=ae(ue);let i;for(i=0;i<g.length;i+=1){const T=de(s,g,i);f[i]?f[i].p(T,d):(f[i]=me(T),f[i].c(),f[i].m(r,null))}for(;i<f.length;i+=1)f[i].d(1);f.length=g.length}},i(s){E||(V(a),E=!0)},o(s){P(a),E=!1},d(s){s&&(p(e),p(l)),a&&a.d(s),Se(f,s)}}}function tt(o,e,l){let t,n,c;R(o,He,a=>l(5,t=a)),R(o,Ie,a=>l(6,n=a)),R(o,Oe,a=>l(1,c=a));let r;async function h(a){if(Z.Facebook===a){ee({text:D("soon",n),status:"info"});return}if(Z.Phone===a){u();return}if(await z.GI().handleLogin({provider:a,loginType:Ne.login}),await fe.GI().setupUser({newUserId:fe.GI().userId}),!t){re(`${ie}/account-setup`);return}re(`${ie}/business`)}function u(){Ge("",{showModal:!0}),setTimeout(()=>r.showModal(),200)}function b(a){r=a,l(0,r)}return[r,c,h,b,a=>h(a)]}class dt extends J{constructor(e){super(),Q(this,e,tt,et,Y,{})}}export{dt as component};
