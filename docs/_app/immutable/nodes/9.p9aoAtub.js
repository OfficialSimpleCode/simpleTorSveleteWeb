import{s as S,e as m,a as x,c as _,b as U,g as y,l as F,f as w,m as u,o as V,i as D,h as f,n as R,B as j,t as P,d as k,r as N}from"../chunks/scheduler.9PBM3dH7.js";import{e as A}from"../chunks/each.-oqiv04n.js";import{S as O,i as T}from"../chunks/index.U7o6dbZo.js";import{g as E,b as M}from"../chunks/entry.X47-twXo.js";import{V as $,A as b,a as q,b as G,c as B,g as L,L as H,U as I,u as z}from"../chunks/User.FBc7JFlI.js";class J{static _singleton=new this;constructor(){}static GI(){return this._singleton}signInUserId="";currentAuthProvider=null;verificationID="";submitedPhone="";lastVerificationUnix=0;currentCredential=null;phoneVerificationWithFirebase=!0;canUseAuthVars=!1;verificationRepo=new $;updateFinishLogIn(e){}async logoutIfSignUpNotCompleted(){}get userLoggedIn(){return this.verificationRepo.isLoggedIn}async getUserClaims(){return await this.verificationRepo.userClaims}async saveUserName(e){return await this.verificationRepo.updateUserName({name:e})}setupLoggin(){this.verificationID="",this.currentAuthProvider=null,this.currentCredential=null,this.submitedPhone="",this.phoneVerificationWithFirebase=!0}startUserAthListener(){this.verificationRepo.onAuthUserStateChanged(()=>{this.canUseAuthVars=!0})}get userId(){return this.verificationRepo.userId}get userData(){return this.verificationRepo.userData}get existsLoginProviders(){return this.verificationRepo.existsProviders}get lastLoginDate(){return this.verificationRepo.lastLoginDate}async unlinkProvider(e){const t=q[e]||"";return await this.verificationRepo.unlinkProvider({providerId:t})}async logout(){return await this.verificationRepo.logout()}async handleLogin({provider:e,loginType:t}){switch(e){case b.Apple:return await this._signInWithApple(t);case b.Google:return await this._signInWithGoogle(t);case b.Facebook:return await this._signInWithFacebook(t);case b.Phone:return!1}}async _signInWithGoogle(e){return await this.verificationRepo.signInWithGoogle(e)}async _signInWithApple(e){return await this.verificationRepo.signInWithApple(e)}async _signInWithFacebook(e){return await this.verificationRepo.signInWithFacebook(e)}async _loginWithOtp({loginType:e,otp:t,autocredential:r}){return await this.verificationRepo.signInWithOtp({loginType:e,verificationId:this.verificationID,otp:t,autocredential:r})}async deleteUser(){return await this.verificationRepo.deleteUser()}async reloadUser(){await this.verificationRepo.reloadUser()}}function W(o,e,t){const r=o.slice();return r[2]=e[t],r[4]=t,r}function C(o){let e,t,r,h,l=G[o[2]]+"",c,p,d,g;function a(){return o[1](o[2])}return{c(){e=m("button"),t=m("img"),h=P(`
                Signin with `),c=P(l),p=x(),this.h()},l(i){e=_(i,"BUTTON",{class:!0});var n=U(e);t=_(n,"IMG",{class:!0,src:!0,alt:!0}),h=k(n,`
                Signin with `),c=k(n,l),p=y(n),n.forEach(w),this.h()},h(){u(t,"class","w-10 h-10"),V(t.src,r=B[o[2]])||u(t,"src",r),u(t,"alt",G[o[2]]),u(e,"class","btn sm:btn-lg btn-outline w-full")},m(i,n){D(i,e,n),f(e,t),f(e,h),f(e,c),f(e,p),d||(g=N(e,"click",a),d=!0)},p(i,n){o=i},d(i){i&&w(e),d=!1,g()}}}function K(o){let e,t,r,h,l,c,p="Login Or Signup",d,g=A(L),a=[];for(let i=0;i<g.length;i+=1)a[i]=C(W(o,g,i));return{c(){e=m("main"),t=m("img"),h=x(),l=m("div"),c=m("h1"),c.textContent=p,d=x();for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=_(i,"MAIN",{class:!0});var n=U(e);t=_(n,"IMG",{class:!0,src:!0,alt:!0}),h=y(n),l=_(n,"DIV",{class:!0});var s=U(l);c=_(s,"H1",{class:!0,"data-svelte-h":!0}),F(c)!=="svelte-1x8fwlv"&&(c.textContent=p),d=y(s);for(let v=0;v<a.length;v+=1)a[v].l(s);s.forEach(w),n.forEach(w),this.h()},h(){u(t,"class","flex-[1] object-cover !max-w-[50%] hidden lg:flex"),V(t.src,r="https://images.pexels.com/photos/841130/pexels-photo-841130.jpeg?cs=srgb&dl=action-athlete-barbell-841130.jpg&fm=jpg")||u(t,"src",r),u(t,"alt","simpletor"),u(c,"class","text-4xl"),u(l,"class","flex-[1] flex flex-col justify-center items-center gap-8 svelte-gchouu"),u(e,"class","flex w-full h-full")},m(i,n){D(i,e,n),f(e,t),f(e,h),f(e,l),f(l,c),f(l,d);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(l,null)},p(i,[n]){if(n&1){g=A(L);let s;for(s=0;s<g.length;s+=1){const v=W(i,g,s);a[s]?a[s].p(v,n):(a[s]=C(v),a[s].c(),a[s].m(l,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=g.length}},i:R,o:R,d(i){i&&w(e),j(a,i)}}}function Q(o){async function e(r){await J.GI().handleLogin({provider:r,loginType:H.login}),console.log(I.GI().userId),await I.GI().setupUser({newUserId:I.GI().userId}),console.log(I.GI().user);const h=I.GI().user;z.set(h),E(`${M}/business`)}return[e,r=>e(r)]}class ie extends O{constructor(e){super(),T(this,e,Q,K,S,{})}}export{ie as component};
