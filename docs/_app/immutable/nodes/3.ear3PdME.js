import{s as fe,e as g,a as G,t as D,b as _,d as I,h as N,u as de,g as m,f as ee,i as o,z as pe,k as ae,l as r,n as he,o as ge,c as _e}from"../chunks/scheduler.0bgu9SYv.js";import{S as ve,i as $e,c as j,a as B,m as O,t as z,b as K,d as L}from"../chunks/index.F52-NEUU.js";import{b as be,g as ye}from"../chunks/entry.KP1pYL5D.js";import{C as Ie}from"../chunks/CustomPhoneField.AJWlcRxI.js";import{U as xe,C as ie,I as oe,n as ue,e as me}from"../chunks/user_helper.jtvbzJ9o.js";import{G as ke}from"../chunks/GenderPicker.Xes9zFxm.js";import{m as Z,t as ce,n as Fe}from"../chunks/business_initializer.oDa-Pz29.js";import{V as te}from"../chunks/verification_helper.WFQr-XeO.js";import{$ as Ve}from"../chunks/runtime.1PAEHe6d.js";async function we(i,t,e,f){return await xe.GI().createUser({gender:i,userName:t,phone:e,email:f,isVerifiedEmail:!1,isVerifiedPhone:!1,userId:Z.GI().userId,authProvider:te.GI().currentAuthProvider}).then(async d=>(console.log("phoneDataResp",d),d==null?null:(Z.GI().userDoc=void 0,await Z.GI().setupUser({newUserId:te.GI().userId})?d:null)))}function Ee(i){let t;return{c(){t=D("Finish Setup")},l(e){t=ee(e,"Finish Setup")},m(e,f){ae(e,t,f)},d(e){e&&m(t)}}}function Ce(i){let t;return{c(){t=g("div"),this.h()},l(e){t=_(e,"DIV",{class:!0}),I(t).forEach(m),this.h()},h(){o(t,"class","loading loading-spinner")},m(e,f){ae(e,t,f)},d(e){e&&m(t)}}}function Ge(i){let t,e,f,d,a,u,F='<h1 class="text-4xl">Account Setup</h1> <h5 class="opacity-60">Fast and Easy</h5>',P,x,n,c,V,p,U,v,A,s,J,k,b,Q,w,W,E,S=ce("policy",i[3])+"",q,T,X,le;c=new ie({props:{type:oe.text,lableTranslateKey:"Full Name",placeholder:"full name",value:i[1],pattern:"",validationFunc:ue,isRequired:!0}}),c.$on("valueChange",i[7]),p=new ie({props:{type:oe.email,lableTranslateKey:"Email (optional)",placeholder:"example@gmail.com",value:i[2],pattern:"",validationFunc:me,isRequired:!0}}),p.$on("valueChange",i[5]),v=new Ie({}),v.$on("phoneChange",i[6]),s=new ke({});function se(l,h){return l[0]?Ce:Ee}let H=se(i),y=H(i);return{c(){t=g("main"),e=g("img"),d=G(),a=g("div"),u=g("div"),u.innerHTML=F,P=G(),x=g("div"),n=g("form"),j(c.$$.fragment),V=G(),j(p.$$.fragment),U=G(),j(v.$$.fragment),A=G(),j(s.$$.fragment),J=G(),k=g("div"),b=g("button"),y.c(),Q=G(),w=g("p"),W=D('By clikcing "Finish Setup" you agree to our '),E=g("a"),q=D(S),this.h()},l(l){t=_(l,"MAIN",{class:!0});var h=I(t);e=_(h,"IMG",{class:!0,src:!0,alt:!0}),d=N(h),a=_(h,"DIV",{class:!0});var C=I(a);u=_(C,"DIV",{class:!0,"data-svelte-h":!0}),de(u)!=="svelte-flo1h1"&&(u.innerHTML=F),P=N(C),x=_(C,"DIV",{class:!0});var M=I(x);n=_(M,"FORM",{class:!0});var $=I(n);B(c.$$.fragment,$),V=N($),B(p.$$.fragment,$),U=N($),B(v.$$.fragment,$),A=N($),B(s.$$.fragment,$),J=N($),k=_($,"DIV",{class:!0});var R=I(k);b=_(R,"BUTTON",{type:!0,class:!0});var ne=I(b);y.l(ne),ne.forEach(m),Q=N(R),w=_(R,"P",{class:!0});var Y=I(w);W=ee(Y,'By clikcing "Finish Setup" you agree to our '),E=_(Y,"A",{href:!0,class:!0});var re=I(E);q=ee(re,S),re.forEach(m),Y.forEach(m),R.forEach(m),$.forEach(m),M.forEach(m),C.forEach(m),h.forEach(m),this.h()},h(){o(e,"class","flex-[1] w-min h-full object-cover hidden lg:flex !max-w-[55%]"),pe(e.src,f="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fmedia.timeout.com%2Fimages%2F105689091%2Fimage.jpg&f=1&nofb=1&ipt=f4b5132df6bedb3677bcdbc6907999e648fa1cc14693e8a5494a845d2cf3ec8a&ipo=images")||o(e,"src",f),o(e,"alt","account-setup"),o(u,"class","text-center mt-4"),o(b,"type","submit"),o(b,"class","btn btn-primary"),o(E,"href","https://google.com"),o(E,"class","link link-hover text-primary"),o(w,"class","text-sm text-center mt-2"),o(k,"class","form-control mt-6"),o(n,"class","card-body"),n.noValidate=!0,o(x,"class","card shrink-0 w-full max-w-sm shadow-2xl bg-base-200"),o(a,"class","flex-[1] w-full h-full flex flex-col justify-center items-center gap-10 bg-base-100 mx-2"),o(t,"class","w-full min-h-full flex items-center")},m(l,h){ae(l,t,h),r(t,e),r(t,d),r(t,a),r(a,u),r(a,P),r(a,x),r(x,n),O(c,n,null),r(n,V),O(p,n,null),r(n,U),O(v,n,null),r(n,A),O(s,n,null),r(n,J),r(n,k),r(k,b),y.m(b,null),r(k,Q),r(k,w),r(w,W),r(w,E),r(E,q),T=!0,X||(le=he(b,"click",i[4]),X=!0)},p(l,[h]){const C={};h&2&&(C.value=l[1]),c.$set(C);const M={};h&4&&(M.value=l[2]),p.$set(M),H!==(H=se(l))&&(y.d(1),y=H(l),y&&(y.c(),y.m(b,null))),(!T||h&8)&&S!==(S=ce("policy",l[3])+"")&&ge(q,S)},i(l){T||(z(c.$$.fragment,l),z(p.$$.fragment,l),z(v.$$.fragment,l),z(s.$$.fragment,l),T=!0)},o(l){K(c.$$.fragment,l),K(p.$$.fragment,l),K(v.$$.fragment,l),K(s.$$.fragment,l),T=!1},d(l){l&&m(t),L(c),L(p),L(v),L(s),y.d(),X=!1,le()}}}function Ne(i,t,e){let f;_e(i,Ve,s=>e(3,f=s));let d=!1;const a=te.GI().userData;let u=(a==null?void 0:a.displayName)??"",F=(a==null?void 0:a.email)??"",P=(a==null?void 0:a.phoneNumber)??"",x=Fe.anonymous,n=!1,c=me(F)==null,V=ue(u)==null;(a==null?void 0:a.emailVerified)==!0,console.log(a);async function p(){if(!V||!n||!c){console.log(V,n,c);return}e(0,d=!0);try{await we(x,u,P,F)!=null&&ye(`${be}/business`)}finally{e(0,d=!1)}}function U(s){V=s.detail.isValid,e(2,F=s.detail.value)}function v(s){n=s.detail.isValid,P=s.detail.value??""}function A(s){console.log(s.detail.isValid),c=s.detail.isValid,e(1,u=s.detail.value)}return[d,u,F,f,p,U,v,A]}class je extends ve{constructor(t){super(),$e(this,t,Ne,Ge,fe,{})}}export{je as component};
