var O=Object.defineProperty;var T=(n,e,t)=>e in n?O(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var u=(n,e,t)=>(T(n,typeof e!="symbol"?e+"":e,t),t);import{s as V,e as _,a as y,c as I,b as R,g as P,l as E,f as b,m as h,o as j,i as N,h as d,n as A,B as M,t as G,d as L,r as $}from"../chunks/scheduler.9PBM3dH7.js";import{e as W}from"../chunks/each.6w4Ej4nR.js";import{S as q,i as B}from"../chunks/index.jfvRZKAw.js";import{g as z,b as J}from"../chunks/entry.Iy4EXc1W.js";import{V as K,A as x,a as Q,b as C,c as X,g as D,L as Y,U as w,u as Z}from"../chunks/User.KeJifhpf.js";const U=class U{constructor(){u(this,"signInUserId","");u(this,"currentAuthProvider",null);u(this,"verificationID","");u(this,"submitedPhone","");u(this,"lastVerificationUnix",0);u(this,"currentCredential",null);u(this,"phoneVerificationWithFirebase",!0);u(this,"canUseAuthVars",!1);u(this,"verificationRepo",new K)}static GI(){return this._singleton}updateFinishLogIn(e){}async logoutIfSignUpNotCompleted(){}get userLoggedIn(){return this.verificationRepo.isLoggedIn}async getUserClaims(){return await this.verificationRepo.userClaims}async saveUserName(e){return await this.verificationRepo.updateUserName({name:e})}setupLoggin(){this.verificationID="",this.currentAuthProvider=null,this.currentCredential=null,this.submitedPhone="",this.phoneVerificationWithFirebase=!0}startUserAthListener(){this.verificationRepo.onAuthUserStateChanged(()=>{this.canUseAuthVars=!0})}get userId(){return this.verificationRepo.userId}get userData(){return this.verificationRepo.userData}get existsLoginProviders(){return this.verificationRepo.existsProviders}get lastLoginDate(){return this.verificationRepo.lastLoginDate}async unlinkProvider(e){const t=Q[e]||"";return await this.verificationRepo.unlinkProvider({providerId:t})}async logout(){return await this.verificationRepo.logout()}async handleLogin({provider:e,loginType:t}){switch(e){case x.Apple:return await this._signInWithApple(t);case x.Google:return await this._signInWithGoogle(t);case x.Facebook:return await this._signInWithFacebook(t);case x.Phone:return!1}}async _signInWithGoogle(e){return await this.verificationRepo.signInWithGoogle(e)}async _signInWithApple(e){return await this.verificationRepo.signInWithApple(e)}async _signInWithFacebook(e){return await this.verificationRepo.signInWithFacebook(e)}async _loginWithOtp({loginType:e,otp:t,autocredential:o}){return await this.verificationRepo.signInWithOtp({loginType:e,verificationId:this.verificationID,otp:t,autocredential:o})}async deleteUser(){return await this.verificationRepo.deleteUser()}async reloadUser(){await this.verificationRepo.reloadUser()}};u(U,"_singleton",new U);let k=U;function S(n,e,t){const o=n.slice();return o[2]=e[t],o[4]=t,o}function F(n){let e,t,o,g,l=C[n[2]]+"",c,v,p,f;function a(){return n[1](n[2])}return{c(){e=_("button"),t=_("img"),g=G(`
                Signin with `),c=G(l),v=y(),this.h()},l(i){e=I(i,"BUTTON",{class:!0});var r=R(e);t=I(r,"IMG",{class:!0,src:!0,alt:!0}),g=L(r,`
                Signin with `),c=L(r,l),v=P(r),r.forEach(b),this.h()},h(){h(t,"class","w-10 h-10"),j(t.src,o=X[n[2]])||h(t,"src",o),h(t,"alt",C[n[2]]),h(e,"class","btn sm:btn-lg btn-outline w-full")},m(i,r){N(i,e,r),d(e,t),d(e,g),d(e,c),d(e,v),p||(f=$(e,"click",a),p=!0)},p(i,r){n=i},d(i){i&&b(e),p=!1,f()}}}function H(n){let e,t,o,g,l,c,v="Login Or Signup",p,f=W(D),a=[];for(let i=0;i<f.length;i+=1)a[i]=F(S(n,f,i));return{c(){e=_("main"),t=_("img"),g=y(),l=_("div"),c=_("h1"),c.textContent=v,p=y();for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=I(i,"MAIN",{class:!0});var r=R(e);t=I(r,"IMG",{class:!0,src:!0,alt:!0}),g=P(r),l=I(r,"DIV",{class:!0});var s=R(l);c=I(s,"H1",{class:!0,"data-svelte-h":!0}),E(c)!=="svelte-1x8fwlv"&&(c.textContent=v),p=P(s);for(let m=0;m<a.length;m+=1)a[m].l(s);s.forEach(b),r.forEach(b),this.h()},h(){h(t,"class","flex-[1] object-cover !max-w-[50%] hidden lg:flex"),j(t.src,o="https://images.pexels.com/photos/841130/pexels-photo-841130.jpeg?cs=srgb&dl=action-athlete-barbell-841130.jpg&fm=jpg")||h(t,"src",o),h(t,"alt","simpletor"),h(c,"class","text-4xl"),h(l,"class","flex-[1] flex flex-col justify-center items-center gap-8 svelte-gchouu"),h(e,"class","flex w-full h-full")},m(i,r){N(i,e,r),d(e,t),d(e,g),d(e,l),d(l,c),d(l,p);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(l,null)},p(i,[r]){if(r&1){f=W(D);let s;for(s=0;s<f.length;s+=1){const m=S(i,f,s);a[s]?a[s].p(m,r):(a[s]=F(m),a[s].c(),a[s].m(l,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=f.length}},i:A,o:A,d(i){i&&b(e),M(a,i)}}}function ee(n){async function e(o){await k.GI().handleLogin({provider:o,loginType:Y.login}),console.log(w.GI().userId),await w.GI().setupUser({newUserId:w.GI().userId}),console.log(w.GI().user);const g=w.GI().user;Z.set(g),z(`${J}/business`)}return[e,o=>e(o)]}class oe extends q{constructor(e){super(),B(this,e,ee,H,V,{})}}export{oe as component};
