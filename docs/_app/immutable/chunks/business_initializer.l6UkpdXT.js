import{r as mi,b as b0,c as dt,d as k0,u as wn,e as C0,f as fs,o as A0,s as E0,g as Sa,i as Na,a as Ei,h as I0,w as T0,j as fe,k as ve,l as P0,m as _0,n as B0,p as vn,q as Er,t as O0,T as ot,v as Ma,x as F0,y as S0,_ as ms,C as ps,z as N0,S as xr,A as xe,E as Ii,B as M0,D as Ra,F as R0,L as La,G as Ti,H as pe,I as L0,J as gr,K as U0,M as W0,N as H0,O as V0}from"./index.esm2017.wWOXa-jD.js";import{b as Pi,d as q0,e as W,g as z0}from"./_commonjsHelpers.Y1uXSML9.js";import{G as $0}from"./google.u_99fliv.js";const Ua={apiKey:"AIzaSyCSIQHCC23Z7ul639fD8JLMHu4yN77_0VA",authDomain:"managementsystemapp-c1fda.firebaseapp.com",databaseURL:"https://managementsystemapp-c1fda-default-rtdb.europe-west1.firebasedatabase.app",projectId:"managementsystemapp-c1fda",storageBucket:"managementsystemapp-c1fda.appspot.com",messagingSenderId:"670820779934",appId:"1:670820779934:web:fdcf77a952b59c3090788f",measurementId:"G-WP8J044JN9"},pi={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function xi(n,e,t,r=!1){const i=String(e),s=(o,u)=>`\x1B[${u[0]}m${o}\x1B[${u[1]}m`,a=(o,u)=>u!=null&&typeof u=="string"?s(o,pi[u]):u!=null&&Array.isArray(u)?u.reduce((l,d)=>a(l,d),o):u!=null&&u[o.trim()]!=null?a(o,u[o.trim()]):u!=null&&u["*"]!=null?a(o,u["*"]):o,c=null;return i.replace(/{{(.+?)}}/g,(o,u)=>{const l=t[u]!=null?String(t[u]):r?"":o;return n.stylePrettyLogs?a(l,n?.prettyLogStyles?.[u]??c)+s("",pi.reset):l})}function ke(n,e=2,t=0){return n!=null&&isNaN(n)?"":(n=n!=null?n+t:n,e===2?n==null?"--":n<10?"0"+n:n.toString():n==null?"---":n<10?"00"+n:n<100?"0"+n:n.toString())}function G0(n){return{href:n.href,protocol:n.protocol,username:n.username,password:n.password,host:n.host,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search,searchParams:[...n.searchParams].map(([e,t])=>({key:e,value:t})),hash:n.hash,origin:n.origin}}function Wa(n){const e=new Set;return JSON.stringify(n,(t,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return r})}function Ce(n,e){const t={seen:[],stylize:Ha};return e!=null&&$a(t,e),It(t.showHidden)&&(t.showHidden=!1),It(t.depth)&&(t.depth=2),It(t.colors)&&(t.colors=!0),It(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=J0),Hr(t,n,t.depth)}Ce.colors=pi;Ce.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Y0(n){return typeof n=="boolean"}function It(n){return n===void 0}function Ha(n){return n}function J0(n,e){const t=Ce.styles[e];return t!=null&&Ce?.colors?.[t]?.[0]!=null&&Ce?.colors?.[t]?.[1]!=null?"\x1B["+Ce.colors[t][0]+"m"+n+"\x1B["+Ce.colors[t][1]+"m":n}function Ir(n){return typeof n=="function"}function Va(n){return typeof n=="string"}function K0(n){return typeof n=="number"}function qa(n){return n===null}function za(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function yn(n){return on(n)&&_i(n)==="[object RegExp]"}function on(n){return typeof n=="object"&&n!==null}function Dn(n){return on(n)&&(_i(n)==="[object Error]"||n instanceof Error)}function xs(n){return on(n)&&_i(n)==="[object Date]"}function _i(n){return Object.prototype.toString.call(n)}function Q0(n){const e={};return n.forEach(t=>{e[t]=!0}),e}function X0(n,e,t,r,i){const s=[];for(let a=0,c=e.length;a<c;++a)za(e,String(a))?s.push(gi(n,e,t,r,String(a),!0)):s.push("");return i.forEach(a=>{a.match(/^\d+$/)||s.push(gi(n,e,t,r,a,!0))}),s}function bn(n){return"["+Error.prototype.toString.call(n)+"]"}function Hr(n,e,t=0){if(n.customInspect&&e!=null&&Ir(e)&&e?.inspect!==Ce&&!(e?.constructor&&e?.constructor.prototype===e)){if(typeof e.inspect!="function"&&e.toString!=null)return e.toString();let l=e?.inspect(t,n);return Va(l)||(l=Hr(n,l,t)),l}const r=nt(n,e);if(r)return r;let i=Object.keys(e);const s=Q0(i);try{n.showHidden&&Object.getOwnPropertyNames&&(i=Object.getOwnPropertyNames(e))}catch{}if(Dn(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return bn(e);if(i.length===0)if(Ir(n.stylize)){if(Ir(e)){const l=e.name?": "+e.name:"";return n.stylize("[Function"+l+"]","special")}if(yn(e))return n.stylize(RegExp.prototype.toString.call(e),"regexp");if(xs(e))return n.stylize(Date.prototype.toISOString.call(e),"date");if(Dn(e))return bn(e)}else return e;let a="",c=!1,o=[`{
`,`
}`];if(Array.isArray(e)&&(c=!0,o=[`[
`,`
]`]),Ir(e)&&(a=" [Function"+(e.name?": "+e.name:"")+"]"),yn(e)&&(a=" "+RegExp.prototype.toString.call(e)),xs(e)&&(a=" "+Date.prototype.toUTCString.call(e)),Dn(e)&&(a=" "+bn(e)),i.length===0&&(!c||e.length==0))return o[0]+a+o[1];if(t<0)return yn(e)?n.stylize(RegExp.prototype.toString.call(e),"regexp"):n.stylize("[Object]","special");n.seen.push(e);let u;return c?u=X0(n,e,t,s,i):u=i.map(l=>gi(n,e,t,s,l,c)),n.seen.pop(),Z0(u,a,o)}function gi(n,e,t,r,i,s){let a,c,o={value:void 0};try{o.value=e[i]}catch{}try{Object.getOwnPropertyDescriptor&&(o=Object.getOwnPropertyDescriptor(e,i)||o)}catch{}if(o.get?o.set?c=n.stylize("[Getter/Setter]","special"):c=n.stylize("[Getter]","special"):o.set&&(c=n.stylize("[Setter]","special")),za(r,i)||(a="["+i+"]"),c||(n.seen.indexOf(o.value)<0?(qa(t)?c=Hr(n,o.value,void 0):c=Hr(n,o.value,t-1),c.indexOf(`
`)>-1&&(s?c=c.split(`
`).map(u=>"  "+u).join(`
`).substr(2):c=`
`+c.split(`
`).map(u=>"   "+u).join(`
`))):c=n.stylize("[Circular]","special")),It(a)){if(s&&i.match(/^\d+$/))return c;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=n.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,"\\'").replace(/(^"|"$)/g,"'"),a=n.stylize(a,"string"))}return a+": "+c}function nt(n,e){if(It(e))return n.stylize("undefined","undefined");if(Va(e)){const t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\\'")+"'";return n.stylize(t,"string")}if(K0(e))return n.stylize(""+e,"number");if(Y0(e))return n.stylize(""+e,"boolean");if(qa(e))return n.stylize("null","null")}function Z0(n,e,t){return t[0]+(e===""?"":e+`
`)+"  "+n.join(`,
  `)+" "+t[1]}function $a(n,e){if(!e||!on(e))return n;const t={...n},r={...e},i=Object.keys(e);let s=i.length;for(;s--;)t[i[s]]=r[i[s]];return n}function j0(n,...e){const t={seen:[],stylize:Ha};n!=null&&$a(t,n);const r=e[0];let i=0,s="",a="";if(typeof r=="string"){if(e.length===1)return r;let c,o=0;for(let u=0;u<r.length-1;u++)if(r.charCodeAt(u)===37){const l=r.charCodeAt(++u);if(i+1!==e.length){switch(l){case 115:{const d=e[++i];typeof d=="number"||typeof d=="bigint"?c=nt(t,d):typeof d!="object"||d===null?c=String(d):c=Ce(d,{...n,compact:3,colors:!1,depth:0});break}case 106:c=Wa(e[++i]);break;case 100:{const d=e[++i];typeof d=="bigint"?c=nt(t,d):typeof d=="symbol"?c="NaN":c=nt(t,d);break}case 79:c=Ce(e[++i],n);break;case 111:c=Ce(e[++i],{...n,showHidden:!0,showProxy:!0,depth:4});break;case 105:{const d=e[++i];typeof d=="bigint"?c=nt(t,d):typeof d=="symbol"?c="NaN":c=nt(t,parseInt(c));break}case 102:{const d=e[++i];typeof d=="symbol"?c="NaN":c=nt(t,parseInt(d));break}case 99:i+=1,c="";break;case 37:s+=r.slice(o,u),o=u+1;continue;default:continue}o!==u-1&&(s+=r.slice(o,u-1)),s+=c,o=u+1}else l===37&&(s+=r.slice(o,u),o=u+1)}o!==0&&(i++,a=" ",o<r.length&&(s+=r.slice(o)))}for(;i<e.length;){const c=e[i];s+=a,s+=typeof c!="string"?Ce(c,n):c,a=" ",i++}return s}const ec={getCallerStackFrame:Ga,getErrorTrace:Ya,getMeta:nc,transportJSON:ac,transportFormatted:sc,isBuffer:oc,isError:Ka,prettyFormatLogObj:ic,prettyFormatErrorObj:Qa},tc={runtime:[typeof window,typeof document].includes("undefined")?"Generic":"Browser",browser:globalThis?.navigator?.userAgent},rc=/(?:(?:file|https?|global code|[^@]+)@)?(?:file:)?((?:\/[^:/]+){2,})(?::(\d+))?(?::(\d+))?/;function nc(n,e,t,r,i,s){return Object.assign({},tc,{name:i,parentNames:s,date:new Date,logLevelId:n,logLevelName:e,path:r?void 0:Ga(t)})}function Ga(n,e=Error()){return Ja(e?.stack?.split(`
`)?.filter(t=>!t.includes("Error: "))?.[n])}function Ya(n){return n?.stack?.split(`
`)?.filter(e=>!e.includes("Error: "))?.reduce((e,t)=>(e.push(Ja(t)),e),[])}function Ja(n){const e=globalThis?.location?.origin,t={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(n!=null){const r=n.match(rc);if(r){t.filePath=r[1].replace(/\?.*$/,""),t.fullFilePath=`${e}${t.filePath}`;const i=t.filePath.split("/");t.fileName=i[i.length-1],t.fileLine=r[2],t.fileColumn=r[3],t.filePathWithLine=`${t.filePath}:${t.fileLine}`,t.fileNameWithLine=`${t.fileName}:${t.fileLine}`}}return t}function Ka(n){return n instanceof Error}function ic(n,e){return n.reduce((t,r)=>(Ka(r)?t.errors.push(Qa(r,e)):t.args.push(r),t),{args:[],errors:[]})}function Qa(n,e){const t=Ya(n).map(i=>xi(e,e.prettyErrorStackTemplate,{...i},!0)),r={errorName:` ${n.name} `,errorMessage:Object.getOwnPropertyNames(n).reduce((i,s)=>(s!=="stack"&&i.push(n[s]),i),[]).join(", "),errorStack:t.join(`
`)};return xi(e,e.prettyErrorTemplate,r)}function sc(n,e,t,r){const i=(t.length>0&&e.length>0?`
`:"")+t.join(`
`);r.prettyInspectOptions.colors=r.stylePrettyLogs,console.log(n+j0(r.prettyInspectOptions,...e)+i)}function ac(n){console.log(Wa(n))}function oc(n){return!1}class cc{constructor(e,t,r=4){this.logObj=t,this.stackDepthLevel=r,this.runtime=ec,this.settings={type:e?.type??"pretty",name:e?.name,parentNames:e?.parentNames,minLevel:e?.minLevel??0,argumentsArrayName:e?.argumentsArrayName,hideLogPositionForProduction:e?.hideLogPositionForProduction??!1,prettyLogTemplate:e?.prettyLogTemplate??"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	{{filePathWithLine}}{{nameWithDelimiterPrefix}}	",prettyErrorTemplate:e?.prettyErrorTemplate??`
{{errorName}} {{errorMessage}}
error stack:
{{errorStack}}`,prettyErrorStackTemplate:e?.prettyErrorStackTemplate??`  • {{fileName}}	{{method}}
	{{filePathWithLine}}`,prettyErrorParentNamesSeparator:e?.prettyErrorParentNamesSeparator??":",prettyErrorLoggerNameDelimiter:e?.prettyErrorLoggerNameDelimiter??"	",stylePrettyLogs:e?.stylePrettyLogs??!0,prettyLogTimeZone:e?.prettyLogTimeZone??"UTC",prettyLogStyles:e?.prettyLogStyles??{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:e?.prettyInspectOptions??{colors:!0,compact:!1,depth:1/0},metaProperty:e?.metaProperty??"_meta",maskPlaceholder:e?.maskPlaceholder??"[***]",maskValuesOfKeys:e?.maskValuesOfKeys??["password"],maskValuesOfKeysCaseInsensitive:e?.maskValuesOfKeysCaseInsensitive??!1,maskValuesRegEx:e?.maskValuesRegEx,prefix:[...e?.prefix??[]],attachedTransports:[...e?.attachedTransports??[]],overwrite:{mask:e?.overwrite?.mask,toLogObj:e?.overwrite?.toLogObj,addMeta:e?.overwrite?.addMeta,addPlaceholders:e?.overwrite?.addPlaceholders,formatMeta:e?.overwrite?.formatMeta,formatLogObj:e?.overwrite?.formatLogObj,transportFormatted:e?.overwrite?.transportFormatted,transportJSON:e?.overwrite?.transportJSON}}}log(e,t,...r){if(e<this.settings.minLevel)return;const i=[...this.settings.prefix,...r],s=this.settings.overwrite?.mask!=null?this.settings.overwrite?.mask(i):this.settings.maskValuesOfKeys!=null&&this.settings.maskValuesOfKeys.length>0?this._mask(i):i,a=this.logObj!=null?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,c=this.settings.overwrite?.toLogObj!=null?this.settings.overwrite?.toLogObj(s,a):this._toLogObj(s,a),o=this.settings.overwrite?.addMeta!=null?this.settings.overwrite?.addMeta(c,e,t):this._addMetaToLogObj(c,e,t);let u,l;return this.settings.overwrite?.formatMeta!=null&&(u=this.settings.overwrite?.formatMeta(o?.[this.settings.metaProperty])),this.settings.overwrite?.formatLogObj!=null&&(l=this.settings.overwrite?.formatLogObj(s,this.settings)),this.settings.type==="pretty"&&(u=u??this._prettyFormatLogObjMeta(o?.[this.settings.metaProperty]),l=l??this.runtime.prettyFormatLogObj(s,this.settings)),u!=null&&l!=null?this.settings.overwrite?.transportFormatted!=null?this.settings.overwrite?.transportFormatted(u,l.args,l.errors,this.settings):this.runtime.transportFormatted(u,l.args,l.errors,this.settings):this.settings.overwrite?.transportJSON!=null?this.settings.overwrite?.transportJSON(o):this.settings.type!=="hidden"&&this.runtime.transportJSON(o),this.settings.attachedTransports!=null&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach(d=>{d(o)}),o}attachTransport(e){this.settings.attachedTransports.push(e)}getSubLogger(e,t){const r={...this.settings,...e,parentNames:this.settings?.parentNames!=null&&this.settings?.name!=null?[...this.settings.parentNames,this.settings.name]:this.settings?.name!=null?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...e?.prefix??[]]};return new this.constructor(r,t??this.logObj,this.stackDepthLevel)}_mask(e){const t=this.settings.maskValuesOfKeysCaseInsensitive!==!0?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map(r=>r.toLowerCase());return e?.map(r=>this._recursiveCloneAndMaskValuesOfKeys(r,t))}_recursiveCloneAndMaskValuesOfKeys(e,t,r=[]){if(r.includes(e))return{...e};if(typeof e=="object"&&e!==null&&r.push(e),this.runtime.isError(e)||this.runtime.isBuffer(e))return e;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Array.isArray(e))return e.map(i=>this._recursiveCloneAndMaskValuesOfKeys(i,t,r));if(e instanceof Date)return new Date(e.getTime());if(e instanceof URL)return G0(e);if(e!==null&&typeof e=="object"){const i=this.runtime.isError(e)?this._cloneError(e):Object.create(Object.getPrototypeOf(e));return Object.getOwnPropertyNames(e).reduce((s,a)=>(s[a]=t.includes(this.settings?.maskValuesOfKeysCaseInsensitive!==!0?a:a.toLowerCase())?this.settings.maskPlaceholder:this._recursiveCloneAndMaskValuesOfKeys(e[a],t,r),s),i)}else{if(typeof e=="string"){let i=e;for(const s of this.settings?.maskValuesRegEx||[])i=i.replace(s,this.settings?.maskPlaceholder||"");return i}return e}}_recursiveCloneAndExecuteFunctions(e,t=[]){return this.isObjectOrArray(e)&&t.includes(e)?this.shallowCopy(e):(this.isObjectOrArray(e)&&t.push(e),Array.isArray(e)?e.map(r=>this._recursiveCloneAndExecuteFunctions(r,t)):e instanceof Date?new Date(e.getTime()):this.isObject(e)?Object.getOwnPropertyNames(e).reduce((r,i)=>{const s=Object.getOwnPropertyDescriptor(e,i);if(s){Object.defineProperty(r,i,s);const a=e[i];r[i]=typeof a=="function"?a():this._recursiveCloneAndExecuteFunctions(a,t)}return r},Object.create(Object.getPrototypeOf(e))):e)}isObjectOrArray(e){return typeof e=="object"&&e!==null}isObject(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}shallowCopy(e){return Array.isArray(e)?[...e]:{...e}}_toLogObj(e,t={}){return e=e?.map(r=>this.runtime.isError(r)?this._toErrorObject(r):r),this.settings.argumentsArrayName==null?e.length===1&&!Array.isArray(e[0])&&this.runtime.isBuffer(e[0])!==!0&&!(e[0]instanceof Date)?t=typeof e[0]=="object"&&e[0]!=null?{...e[0],...t}:{0:e[0],...t}:t={...t,...e}:t={...t,[this.settings.argumentsArrayName]:e},t}_cloneError(e){const t=new e.constructor;return Object.getOwnPropertyNames(e).forEach(r=>{t[r]=e[r]}),t}_toErrorObject(e){return{nativeError:e,name:e.name??"Error",message:e.message,stack:this.runtime.getErrorTrace(e)}}_addMetaToLogObj(e,t,r){return{...e,[this.settings.metaProperty]:this.runtime.getMeta(t,r,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(e){if(e==null)return"";let t=this.settings.prettyLogTemplate;const r={};t.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?t=t.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):this.settings.prettyLogTimeZone==="UTC"?(r.yyyy=e?.date?.getUTCFullYear()??"----",r.mm=ke(e?.date?.getUTCMonth(),2,1),r.dd=ke(e?.date?.getUTCDate(),2),r.hh=ke(e?.date?.getUTCHours(),2),r.MM=ke(e?.date?.getUTCMinutes(),2),r.ss=ke(e?.date?.getUTCSeconds(),2),r.ms=ke(e?.date?.getUTCMilliseconds(),3)):(r.yyyy=e?.date?.getFullYear()??"----",r.mm=ke(e?.date?.getMonth(),2,1),r.dd=ke(e?.date?.getDate(),2),r.hh=ke(e?.date?.getHours(),2),r.MM=ke(e?.date?.getMinutes(),2),r.ss=ke(e?.date?.getSeconds(),2),r.ms=ke(e?.date?.getMilliseconds(),3));const i=this.settings.prettyLogTimeZone==="UTC"?e?.date:new Date(e?.date?.getTime()-e?.date?.getTimezoneOffset()*6e4);r.rawIsoStr=i?.toISOString(),r.dateIsoStr=i?.toISOString().replace("T"," ").replace("Z",""),r.logLevelName=e?.logLevelName,r.fileNameWithLine=e?.path?.fileNameWithLine??"",r.filePathWithLine=e?.path?.filePathWithLine??"",r.fullFilePath=e?.path?.fullFilePath??"";let s=this.settings.parentNames?.join(this.settings.prettyErrorParentNamesSeparator);return s=s!=null&&e?.name!=null?s+this.settings.prettyErrorParentNamesSeparator:void 0,r.name=e?.name!=null||s!=null?(s??"")+e?.name:"",r.nameWithDelimiterPrefix=r.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+r.name:"",r.nameWithDelimiterSuffix=r.name.length>0?r.name+this.settings.prettyErrorLoggerNameDelimiter:"",this.settings.overwrite?.addPlaceholders!=null&&this.settings.overwrite?.addPlaceholders(e,r),xi(this.settings,t,r)}}class uc extends cc{constructor(e,t){const r=typeof window<"u"&&typeof document<"u",i=r?window.chrome!==void 0&&window.CSS!==void 0&&window.CSS.supports("color","green"):!1,s=r?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1;e=e||{},e.stylePrettyLogs=e.stylePrettyLogs&&r&&!i?!1:e.stylePrettyLogs,super(e,t,s?4:5)}log(e,t,...r){return super.log(e,t,...r)}silly(...e){return super.log(0,"SILLY",...e)}trace(...e){return super.log(1,"TRACE",...e)}debug(...e){return super.log(2,"DEBUG",...e)}info(...e){return super.log(3,"INFO",...e)}warn(...e){return super.log(4,"WARN",...e)}error(...e){return super.log(5,"ERROR",...e)}fatal(...e){return super.log(6,"FATAL",...e)}getSubLogger(e,t){return super.getSubLogger(e,t)}}const se=new uc({minLevel:4});var lc=(n=>(n.login="login",n.enter="enter",n))(lc||{});const hm={login:"login",enter:"enter"},dm=["+972-504040624","+972-525656377"],hc="production",re=`enviroments/${hc}`,Vr="Users",dc="BookingsObjects",fm="Errors",mm="Helpers",Br="PublicData",ir="Workers",gs="Bookings",it="Businesses",pm="Reports",Or="publicData",Xa="recurrenceBookings",ws="LikesCollection",vs="BusinessData",fc="Counters",mc="sasimple",pc="phone",ys="^&8@^",Ds="^&9@^";var pt=(n=>(n[n.basic=0]="basic",n[n.advanced=1]="advanced",n[n.trial=2]="trial",n[n.landingPage=3]="landingPage",n[n.golden=4]="golden",n))(pt||{}),L=(n=>(n[n.sendSms=0]="sendSms",n[n.updateDisplayName=1]="updateDisplayName",n[n.logout=2]="logout",n[n.serverError=3]="serverError",n[n.storageError=4]="storageError",n[n.listener=5]="listener",n[n.notLogedIn=6]="notLogedIn",n[n.illegalFields=7]="illegalFields",n[n.passedLimit=8]="passedLimit",n[n.notFoundItem=9]="notFoundItem",n[n.takenBooking=10]="takenBooking",n[n.overlapWithOntherItem=11]="overlapWithOntherItem",n[n.takenMultiBooking=12]="takenMultiBooking",n[n.alreadyWorker=13]="alreadyWorker",n[n.userNotFound=14]="userNotFound",n[n.verification=15]="verification",n[n.network=16]="network",n[n.emptyField=17]="emptyField",n[n.alreadyExistItem=18]="alreadyExistItem",n[n.uploadImages=19]="uploadImages",n[n.notSelectedImages=20]="notSelectedImages",n[n.wrongOptCode=21]="wrongOptCode",n[n.expiredOpt=22]="expiredOpt",n[n.unknown=23]="unknown",n[n.timeout=24]="timeout",n[n.purchaseError=25]="purchaseError",n[n.anonymouslySignIn=26]="anonymouslySignIn",n[n.lowSubType=27]="lowSubType",n[n.coincidingEvent=28]="coincidingEvent",n[n.coincidingHoliday=29]="coincidingHoliday",n[n.realTimeServerError=30]="realTimeServerError",n[n.blockedUser=31]="blockedUser",n[n.noPermission=32]="noPermission",n[n.paymentProblem=33]="paymentProblem",n[n.currentlyOrderingForTime=34]="currentlyOrderingForTime",n[n.notFoundBusiness=35]="notFoundBusiness",n[n.savePaymentDataError=36]="savePaymentDataError",n[n.redeemDepositError=37]="redeemDepositError",n[n.saveDepositDataError=38]="saveDepositDataError",n[n.endOfWork=39]="endOfWork",n[n.invoiceCreation=40]="invoiceCreation",n[n.cantBookRecurrenceOnDates=41]="cantBookRecurrenceOnDates",n[n.cantBookRecurrenceOnEndlessDates=42]="cantBookRecurrenceOnEndlessDates",n[n.eventHasNoAccurances=43]="eventHasNoAccurances",n[n.workerDeleteTheBookingMeanwhile=44]="workerDeleteTheBookingMeanwhile",n[n.workerUpdatedTheBookingMeanwhile=45]="workerUpdatedTheBookingMeanwhile",n[n.workerDeleteEventMeanwhile=46]="workerDeleteEventMeanwhile",n[n.workerUpdatedTheBookingWhilePayment=47]="workerUpdatedTheBookingWhilePayment",n[n.blockCard=48]="blockCard",n[n.stolenCard=49]="stolenCard",n[n.callCreditCompany=50]="callCreditCompany",n[n.transactionNotConfirmed=51]="transactionNotConfirmed",n[n.fakeCard=52]="fakeCard",n[n.wrongCVV=53]="wrongCVV",n[n.worngCAVVUCAF=54]="worngCAVVUCAF",n[n.worngAvs=55]="worngAvs",n[n.networkDisconnect=56]="networkDisconnect",n[n.partlyConfirm=57]="partlyConfirm",n[n.lackOfPointsStarsMilesOtherBenefit=58]="lackOfPointsStarsMilesOtherBenefit",n[n.unauthorizedCardAtTheTerminal=59]="unauthorizedCardAtTheTerminal",n[n.invalidBalanceCode=60]="invalidBalanceCode",n[n.cardNotAssociatedWithTheNetwork=61]="cardNotAssociatedWithTheNetwork",n[n.cardIsNotValid=62]="cardIsNotValid",n[n.currencyTypeIsNotAllowed=63]="currencyTypeIsNotAllowed",n[n.thereIsNoAuthorizationForACreditTypeInTheTransaction=64]="thereIsNoAuthorizationForACreditTypeInTheTransaction",n[n.invalidId=65]="invalidId",n[n.noTreatment=66]="noTreatment",n[n.terminalNotAuthorizedToWorkWithThisMethodTheTerminalIsNotAuthorized=67]="terminalNotAuthorizedToWorkWithThisMethodTheTerminalIsNotAuthorized",n[n.authenticationErrorTerminalReference=68]="authenticationErrorTerminalReference",n[n.exceedingTheNumberOfPayments=69]="exceedingTheNumberOfPayments",n[n.communicationError=70]="communicationError",n[n.canceledTransaction=71]="canceledTransaction",n[n.invalidToken=72]="invalidToken",n[n.terminalNotAuthorizedToUseTheToken=73]="terminalNotAuthorizedToUseTheToken",n[n.deferredCharge=74]="deferredCharge",n[n.approvalWithoutCharge=75]="approvalWithoutCharge",n[n.receivingTransactionDetails=76]="receivingTransactionDetails",n[n.theCardDetailsWereNotReadInFull=77]="theCardDetailsWereNotReadInFull",n[n.theAmountOfTheItemsDoesNotMatch=78]="theAmountOfTheItemsDoesNotMatch",n[n.YouMustEnterAFirstOrLastName=79]="YouMustEnterAFirstOrLastName",n[n.transactionDescriptionMustBeEntered=80]="transactionDescriptionMustBeEntered",n[n.youCanCreditTheEntireTransactionOrASmallAmount=81]="youCanCreditTheEntireTransactionOrASmallAmount",n[n.bigDiffrentBetweenLoginAndDelete=82]="bigDiffrentBetweenLoginAndDelete",n[n.providerNotAllowed=83]="providerNotAllowed",n[n.userDisable=84]="userDisable",n[n.providerAlreadyLinked=85]="providerAlreadyLinked",n[n.credentialAlreadyInUse=86]="credentialAlreadyInUse",n[n.accountAlreadyExists=87]="accountAlreadyExists",n[n.invalidCredential=88]="invalidCredential",n[n.userMissmatch=89]="userMissmatch",n[n.noSuchProvider=90]="noSuchProvider",n[n.duplicateBusinesssName=91]="duplicateBusinesssName",n[n.alreadyExistPhone=92]="alreadyExistPhone",n[n.userExitManually=93]="userExitManually",n[n.tooManyAttempts=94]="tooManyAttempts",n[n.expiredCode=95]="expiredCode",n[n.cantUpdateEmailTooShortTimeBetween=96]="cantUpdateEmailTooShortTimeBetween",n[n.cantUpdatePhonelTooShortTimeBetween=97]="cantUpdatePhonelTooShortTimeBetween",n[n.invalidPhoneNumber=98]="invalidPhoneNumber",n))(L||{});class K{static _singleton=new K;constructor(){}static GI(){return this._singleton}errorCode=100;error=L.unknown;details="";addError({code:e,error:t,details:r}){this.error=t||this.error,this.errorCode=e||this.errorCode,this.details=r||this.details}}class wr{code="";name="";symbol="";constructor({code:e="",name:t="",symbol:r=""}={}){this.code=e,this.name=t,this.symbol=r}static fromJson(e){return new wr({code:e.code||"",name:e.name||"",symbol:e.symbol||""})}toJson(){return{code:this.code,name:this.name,symbol:this.symbol}}isEqual(e){return e.code===this.code}toString(){return JSON.stringify(this.toJson(),null,2)}}const Bi=new wr({code:"USD",name:"US Dollar",symbol:"$"}),Fr=5;class ct{static currentBusinesssId="";static hasPaddingFromTop=!1;static paddingFromTop=0;static attemptsLeftForCardPassword=Fr;static productionVersion=!0;static developers={}}class dr{static _singleton=new dr;constructor(){}static GI(){return dr._singleton}getLisksChildPath(e){const t=`${it}/${ct.currentBusinesssId}/${ir}`,r=`${e}/${ws}`;return`${t}/${r}`}getImageStorageName(e,t){const r=e.toUpperCase(),i=t.split(r);return`${r}${i[1].split(".jpg")[0]}`}getLikesChildPath(e,t,r){const i=`${it}/${t}/${ir}`,s=`${e}/${ws}`;return`${i}/${s}/${r}`}getBusinessDataPath(e){return`${it}/${e}/${vs}`}getWorkerCountersPath(e,t){return`${it}/${e}/${ir}/${t}/${fc}`}getMessageCounterPath(e){return`${it}/${e}/${vs}/messagesCounter`}userBookingsPathByBooking(e){return`${Vr}/${e.customerId}/${Br}/${Or}/${gs}`}userBookingsPathByUser(e){return`${Vr}/${e}/${Br}/${Or}/${gs}`}workerBookingsPath(e){return`${it}/${e.buisnessId}/${ir}/${e.workerId}/${Br}/${Or}/${dc}`}}var xc="firebase",gc="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(xc,gc,"app");class wc{_db;constructor(){this._db=b0()}async getChild({childPath:e}){try{const t=dt(this._db,`${re}/${e}`);return await k0(t)}catch(t){throw t}}async updateChild({childPath:e,data:t}){try{const r=dt(this._db,`${re}/${e}`);return await wn(r,t),!0}catch{return!1}}async removeChild({childPath:e}){try{const t=dt(this._db,`${re}/${e}`);return await C0(t),!0}catch{return!1}}async incrementNumberChild({childPath:e,valueId:t,delta:r,command:i}){try{i==="decrement"&&(r=-r);const s={[t]:fs(r)},a=dt(this._db,`${re}/${e}`);return await wn(a,s),!0}catch{return!1}}async incrementMultipleNumberChild({childPath:e,data:t}){try{const r={};for(const[s,a]of Object.entries(t))r[s]=fs(a);const i=dt(this._db,`${re}/${e}`);return await wn(i,r),!0}catch{return!1}}listenToChild({childPath:e,callback:t}){const r=dt(this._db,`${re}/${e}`);return A0(r,t)}async setChild({childPath:e,data:t}){try{const r=dt(this._db,`${re}/${e}`);return await E0(r,t),!0}catch{return!1}}}class vc extends wc{_firestore;constructor(){Sa().length===0?Na(Ua):Ei(),super(),this._firestore=I0()}get getBatch(){return T0(this._firestore)}async getDocSRV({path:e,docId:t,insideEnviroments:r=!0}){try{const i=fe(this._firestore,r?`${re}/${e}`:e),s=ve(i,t);return await P0(s)}catch(i){if(i instanceof Error)throw se.error(i.message),K.GI().addError({error:L.serverError,details:i.message}),i}}async getAllDocsInsideCollection(e){try{const t=fe(this._firestore,`${re}/${e}`);return(await _0(t)).docs.map(i=>i.data())}catch(t){if(t instanceof Error)throw K.GI().addError({error:L.serverError,details:t.toString()}),t;return[]}}async commmitBatch(e){try{return await e.commit(),!0}catch(t){throw se.error("Error while commit batch -->",t),t instanceof Error&&K.GI().addError({error:L.serverError,details:t.toString()}),new Error(`Server Error: ${t}`)}}async runTransaction(e){try{return await B0(this._firestore,async r=>await e(r))}catch(t){throw console.error("Error while run transaction -->",t),t instanceof Error&&K.GI().addError({error:L.serverError,details:t.toString()}),new Error(`Server Error: ${t}`)}}async transactionGet(e,t,r){try{const i=fe(this._firestore,`${re}/${t}`),s=ve(i,r);return await e.get(s)}catch(i){throw console.error("Error while getting document in transaction -->",i),i instanceof Error&&K.GI().addError({error:L.serverError,details:i.toString()}),new Error(`Server Error: ${i}`)}}async transactionUpdateAsMap({transaction:e,path:t,docId:r,fieldName:i,value:s}){try{const a=fe(this._firestore,`${re}/${t}`),c=ve(a,r),o={[i]:s||vn()};e.update(c,o)}catch(a){throw se.error("Error while updating document in transaction -->",a),a instanceof Error&&K.GI().addError({error:L.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}async setAsMap({batch:e,path:t,docId:r,data:i,insideEnviroments:s=!0}){try{const a=fe(this._firestore,s?`${re}/${t}`:t),c=ve(a,r);e.set(c,i,{merge:!0})}catch(a){throw a instanceof Error&&K.GI().addError({error:L.serverError,details:a.toString()}),a}}async transactionUpdateMultipleFieldsAsMap({transaction:e,path:t,docId:r,data:i,insideEnvironments:s=!0}){try{const a=fe(this._firestore,s?`${re}/${t}`:t),c=ve(a,r),o=this.organizeData(i);e.update(c,o)}catch(a){throw console.error("Error while updating multiple fields in transaction -->",a),a instanceof Error&&K.GI().addError({error:L.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}async transactionCreateDoc({transaction:e,path:t,docId:r,value:i}){try{const s=fe(this._firestore,`${re}/${t}`),a=ve(s,r);e.set(a,i)}catch(s){throw se.error("Error while creating document in transaction -->",s),s instanceof Error&&K.GI().addError({error:L.serverError,details:s.toString()}),new Error(`Server Error: ${s}`)}}async transactionSetAsMap({transaction:e,path:t,docId:r,data:i}){try{const s=fe(this._firestore,`${re}/${t}`),a=ve(s,r),c=this.organizeData(i);e.set(a,c,{merge:!0})}catch(s){throw se.error("Error while setting document as map in transaction -->",s),s instanceof Error&&K.GI().addError({error:L.serverError,details:s.toString()}),new Error(`Server Error: ${s}`)}}async deleteDoc({batch:e,path:t,docId:r}){try{const i=fe(this._firestore,`${re}/${t}`),s=ve(i,r);e.delete(s)}catch(i){throw i instanceof Error&&K.GI().addError({error:L.serverError,details:i.toString()}),i}}async setDoc({batch:e,path:t,docId:r,valueToSet:i,insideEnviroments:s=!0}){try{const a=fe(this._firestore,s?`${re}/${t}`:t),c=ve(a,r);e.set(c,i)}catch(a){throw a instanceof Error&&K.GI().addError({error:L.serverError,details:a.toString()}),a}}async createDoc({batch:e,path:t,docId:r,valueAsJson:i,insideEnviroments:s=!0,mergeIfExist:a=!1}){try{const c=a?{merge:!0}:null,o=fe(this._firestore,s?`${re}/${t}`:t),u=ve(o,r);e.set(u,i,{merge:a})}catch(c){throw c instanceof Error&&K.GI().addError({error:L.serverError,details:c.toString()}),c}}async updateFieldInsideDocAsMap({batch:e,path:t,docId:r,value:i,fieldName:s,command:a,insideEnviroments:c=!0}){try{const o=fe(this._firestore,c?`${re}/${t}`:t),u=ve(o,r);a===null?e.update(u,{[s]:i??vn()}):e.update(u,{[s]:a===1?Er(1):Er(-1)})}catch(o){throw o instanceof Error&&K.GI().addError({error:L.serverError,details:o.toString()}),o}}async updateMultipleFieldsInsideDocAsMap({batch:e,path:t,docId:r,data:i,insideEnviroments:s=!0}){try{const a=fe(this._firestore,s?`${re}/${t}`:t),c=ve(a,r);e.update(c,this.organizeData(i))}catch(a){throw se.error("Error while updating the batch -->",a),a instanceof Error&&K.GI().addError({error:L.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}docListener({path:e,docId:t,onChanged:r}){try{const i=fe(this._firestore,`${re}/${e}`),s=ve(i,t);return O0(s,r)}catch(i){throw i instanceof Error&&K.GI().addError({error:L.serverError,details:i.message}),i}}organizeData(e){var t={};return Object.entries(e).forEach(([r,i])=>{let s=i;s===null&&(s=vn()),s===1&&(s=Er(1)),s===0&&(s=Er(-1)),t[r]=s}),t}get currentTimestamp(){return ot.now()}}class Za extends vc{constructor(){super()}async getDocRepo({path:e,docId:t,insideEnviroments:r=!0}){return await super.getDocSRV({path:e,docId:t,insideEnviroments:r})}async createDocRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:i=!0,mergeIfExist:s=!1}){const a=this.getBatch;return super.createDoc({batch:a,path:e,docId:t,valueAsJson:r,insideEnviroments:i,mergeIfExist:s}),await this.commmitBatch(a)}async updateFieldInsideDocAsMapRepo({path:e,docId:t,fieldName:r,value:i,insideEnviroments:s=!0,command:a=null}){const c=this.getBatch;return this.updateFieldInsideDocAsMap({batch:c,path:e,docId:t,fieldName:r,value:i,command:a,insideEnviroments:s}),await this.commmitBatch(c)}async updateMultipleFieldsInsideDocAsMapRepo({path:e,docId:t,data:r,insideEnviroments:i=!0}){const s=this.getBatch;return super.updateMultipleFieldsInsideDocAsMap({batch:s,path:e,docId:t,data:r,insideEnviroments:i}),await this.commmitBatch(s)}async deleteDocRepo({path:e,docId:t}){const r=this.getBatch;return super.deleteDoc({batch:r,path:e,docId:t}),await this.commmitBatch(r)}async setDocRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:i=!0}){const s=this.getBatch;return super.setDoc({batch:s,path:e,docId:t,valueToSet:r,insideEnviroments:i}),await this.commmitBatch(s)}async setAsMapWithMergeRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:i=!0}){const s=this.getBatch;return super.setAsMap({batch:s,path:e,docId:t,data:r,insideEnviroments:i}),await this.commmitBatch(s)}docListenerRepo({path:e,docId:t,onChanged:r}){return super.docListener({path:e,docId:t,onChanged:r})}}function yc(n){const e=n.toString(),t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),i=parseInt(e.substr(4,2),16);return(t*299+r*587+i*114)/1e3>155}function bs(n,e){if(n===null)return e===null;if(e===null||n.size!==e.size)return!1;if(n===e)return!0;for(const t of n)if(!e.has(t))return!1;return!0}async function xm(){return!0}var wi=(n=>(n[n.light=0]="light",n[n.dark=1]="dark",n))(wi||{});class Ve{background=0;primary=0;surface=0;inverseSurface=0;tertiary=0;id="";fontName="";themeName="";constructor({background:e=0,primary:t=0,surface:r=0,inverseSurface:i=0,tertiary:s=0,id:a,fontName:c="",themeName:o=""}){this.background=e,this.primary=t,this.surface=r,this.inverseSurface=i,this.tertiary=s,this.id=a,this.fontName=c,this.themeName=o}static fromJson(e,t){return new Ve({background:e.background||0,primary:e.primary||0,id:t,themeName:e.themeName||"",surface:e.surface||0,tertiary:e.tertiary||0,inverseSurface:e.inverseSurface||0,fontName:e.fontName||""})}static fromBusinessTheme(e){return new Ve({themeName:e.themeName,background:e.background,primary:e.primary,tertiary:e.tertiary,id:e.id,surface:e.surface,inverseSurface:e.inverseSurface,fontName:e.fontName})}isEqual(e,t=!0){const r=e.toJson();t&&(r.id=e.id);const i=this.toJson();return t&&(i.id=this.id),JSON.stringify(r)===JSON.stringify(i)}get brightness(){return yc(this.background)?1:0}toJson(){const e={};return this.fontName!==""&&(e.fontName=this.fontName),this.surface!==0&&(e.surface=this.surface),this.inverseSurface!==0&&(e.inverseSurface=this.inverseSurface),e.tertiary=this.tertiary,e.themeName=this.themeName,this.background!==0&&(e.background=this.background),this.primary!==0&&(e.primary=this.primary),e}}var Ue=(n=>(n[n.Grid=0]="Grid",n[n.Carousel=1]="Carousel",n[n.EndlessCarousel=2]="EndlessCarousel",n))(Ue||{});const ks={0:"grid",1:"carousel",2:"endlessCarousel"},Cs={grid:0,carousel:1,endlessCarousel:2},ja={dark:new Ve({fontName:"Varela Round",themeName:"Original",id:"dark",inverseSurface:4279637532,background:4280229673,surface:4280690225,tertiary:4279834916,primary:4294940672}),darkIos:new Ve({fontName:"Varela Round",themeName:"Dark",id:"darkIos",inverseSurface:4281084974,background:4279637528,surface:4280361252,tertiary:4278190080,primary:4278225100}),light:new Ve({fontName:"Varela Round",themeName:"Pink",id:"light",inverseSurface:4294831859,background:4294375158,surface:4294967295,tertiary:4294243315,primary:4294936498}),lightIos:new Ve({fontName:"Varela Round",themeName:"Light",id:"lightIos",inverseSurface:4292664541,background:4294111991,surface:4294967295,tertiary:4293322471,primary:4278221567})};class qr{static _singleton=new qr;constructor(){}static GI(){return qr._singleton}defaultTheme="darkIos";currentKeyTheme=null;themeCauseMainBuilt=!1;currentThemes={...ja};currentBusinessTheme=null;async changeTheme(e,{needOverlayHandling:t=!0,ovveride:r=!1,needWaitOverlay:i=!1}={}){const s=this.currentThemes[e];if(s==null||this.currentBusinessTheme==null||!s.isEqual(this.currentBusinessTheme)||r){switch(this.currentThemes[e]?.brightness){case wi.light:he.GI().businessIcon="darkShopIcon";break;case wi.dark:he.GI().businessIcon="lightShopIcon";break;default:he.GI().businessIcon="lightShopIcon";break}return this.themeCauseMainBuilt=!0,this.currentKeyTheme=e,this.currentThemes.hasOwnProperty(e)&&(this.currentBusinessTheme=this.currentThemes[e]),!0}return!1}}class Pe{id="";token="";constructor(e){e&&(this.id=e.I||"",this.token=e.T||"")}static fromShopIconUrl(e){const t=new Pe;try{const r=e.split("SHOPICON");t.id=r[1].split("?alt")[0];const i=e.split("&token=");return t.token=i[1],t}catch{return new Pe}}static fromJson(e){const t=new Pe;return t.id=e.I||"",t.token=e.T||"",t}static fromJsonStr(e){const t=JSON.parse(e),r=new Pe;return r.id=t.I||"",r.token=t.T||"",r}get isEmpty(){return this.token===""||this.id===""}get isNotEmpty(){return this.token!==""&&this.id!==""}isEqual(e){return e.id==this.id&&e.token==this.token}getShopIconPath(e){return this.token===""||this.id===""?"":`https://firebasestorage.googleapis.com/v0/b/managementsystemapp-c1fda.appspot.com/o/enviroments%2F${re.replace("enviroments/","")}%2F${e}%2Fimages%2Flogos%2FSHOPICON${this.id}?alt=media&token=${this.token}`}toJsonStr(){const e={I:this.id,T:this.token};return JSON.stringify(e)}toJson(){return{I:this.id,T:this.token}}}class Tt{amount=0;currency=Bi;constructor({amount:e,currency:t}){const r=parseFloat(e)||0;this.amount=parseFloat(r.toFixed(2)),this.currency=t}static fromJson(e){const t=new Tt({amount:"0.0",currency:wr.fromJson(e.currency)});return e.amount!=null&&(t.amount=typeof e.amount=="number"?e.amount:parseFloat(e.amount)),t}add(e){e.currency.code===this.currency.code&&(this.amount+=e.amount)}isEqual(e){return this.amount===e.amount&&this.currency.code===e.currency.code}toString(){return new Intl.NumberFormat("en-US",{style:"currency",currency:this.currency.code}).format(this.amount)}toJson(){return{amount:this.amount,currency:this.currency.toJson()}}}class Mt{description="";price;imageUrl="";id="";name="";createdAt=new Date;constructor({name:e="",description:t="",id:r="",price:i,imageUrl:s=""}={}){this.name=e||"",this.description=t||"",this.id=r||"",this.price=i,this.imageUrl=s||""}static fromProduct(e){const t=new Mt({id:e.id,description:e.description,price:e.price,imageUrl:e.imageUrl,name:e.name});return t.createdAt=e.createdAt,t}static fromJson(e,t){const r=new Mt({id:t,description:e.description,price:Tt.fromJson(e.price),imageUrl:e.imageUrl,name:e.name});return r.createdAt=e.createdAt,r}toJson(){return{description:this.description,price:this.price?this.price.toJson():null,imageUrl:this.imageUrl,name:this.name,createdAt:this.createdAt}}toString(){return JSON.stringify(this.toJson())}}class Rt{title="";content="";lastModified="";index="";id="";popOnEnter=!1;constructor(e,t,r,i,s,a=!1){this.title=e,this.content=t,this.id=r,this.lastModified=i,this.index=s,this.popOnEnter=a}static fromJson(e,t){return new Rt(e.title??"",e.content??"",e.id??"",e.lastModified??"",t,e.popOnEnter??!1)}static fromUpdate(e){return new Rt(e.title,e.content,e.id,e.lastModified,e.index,e.popOnEnter)}toJson(){const e={};return e.title=this.title,e.id=this.id,e.content=this.content,this.lastModified!==""&&(e.lastModified=this.lastModified),this.popOnEnter&&(e.popOnEnter=this.popOnEnter),e}isValid(){return this.title!==""&&this.content!==""}toString(){return JSON.stringify(this,null,2)}}class qe{storyView=Ue.Grid;productView=Ue.Grid;changingImages=[];products=new Map;updates=new Map;storyTitle="";shopIconUrl="";productsTitle="";bottomIcons=!1;changingImagesSwapSeconds=6;pickedThemeKey="darkIos";lastTimeToUpdateTerm=new Date(0);businessThemes=new Map;term="";mustConfirmTerm=!1;popTermOnFirstEneter=!1;isPrivateTheme=!1;constructor({storyView:e=Ue.Grid,productView:t=Ue.Grid,changingImagesSwapSeconds:r=6,shopIconUrl:i="",pickedThemeKey:s="darkIos"}={}){this.changingImagesSwapSeconds=r,this.shopIconUrl=i,this.pickedThemeKey=s}static fromJson(e){const t=new qe;return Object.entries(e.products).forEach(([r,i])=>{t.products.set(r,Mt.fromJson(i,r))}),e.changingImages&&(t.changingImages=e.changingImages.map(r=>r)),e.updates&&Object.entries(e.updates).forEach(([r,i])=>{t.updates.set(r,Rt.fromJson(i,r))}),e.storyView&&(t.storyView=Cs[e.storyView]||Ue.EndlessCarousel),e.productView&&(t.productView=Cs[e.productView]||Ue.Grid),e.businessThemes&&Object.entries(e.businessThemes).forEach(([r,i])=>{t.businessThemes.set(r,Ve.fromJson(i,r))}),e.lastTimeToUpdateTerm&&(t.lastTimeToUpdateTerm=new Date(e.lastTimeToUpdateTerm)||new Date(0)),t.pickedThemeKey=e.pickedThemeKey||"darkIoss",t.term=e.term||"",t.bottomIcons=e.bottomIcons||!1,t.changingImagesSwapSeconds=e.changingImagesSwapSeconds||6,t.productsTitle=e.productsTitle||"",t.storyTitle=e.storyTitle||"",t.shopIconUrl=e.shopIcon||"",t.mustConfirmTerm=e.mustConfirmTerm||!1,t.popTermOnFirstEneter=e.popTermOnFirstEneter||!1,t.isPrivateTheme=e.isPrivateTheme||!1,t}get shopIconData(){return Pe.fromShopIconUrl(this.shopIconUrl)}static fromBusinessDesign(e){const t=new qe;return e.products.forEach((r,i)=>{t.products.set(i,Mt.fromProduct(r))}),t.changingImages=[...e.changingImages],e.updates.forEach((r,i)=>{t.updates.set(i,Rt.fromUpdate(r))}),t.storyView=e.storyView,e.businessThemes.forEach((r,i)=>{t.businessThemes.set(i,Ve.fromBusinessTheme(r))}),t.shopIconUrl=e.shopIconUrl,t.pickedThemeKey=e.pickedThemeKey,t.lastTimeToUpdateTerm=e.lastTimeToUpdateTerm,t.changingImagesSwapSeconds=e.changingImagesSwapSeconds,t.term=e.term,t.bottomIcons=e.bottomIcons,t.productsTitle=e.productsTitle,t.productView=e.productView,t.storyTitle=e.storyTitle,t.mustConfirmTerm=e.mustConfirmTerm,t.popTermOnFirstEneter=e.popTermOnFirstEneter,t.isPrivateTheme=e.isPrivateTheme,t}toJson(){const e={};return this.storyView!==Ue.EndlessCarousel&&(e.storyView=ks[this.storyView]),this.productView!==Ue.Grid&&(e.productView=ks[this.storyView]),e.changingImages=this.changingImages,e.products={},this.products.forEach((t,r)=>{e.products[r]=t.toJson()}),e.updates={},this.updates.forEach((t,r)=>{e.updates[r]=t.toJson()}),this.mustConfirmTerm&&(e.mustConfirmTerm=this.mustConfirmTerm),this.popTermOnFirstEneter&&(e.popTermOnFirstEneter=this.popTermOnFirstEneter),this.term!==""&&(e.term=this.term),this.lastTimeToUpdateTerm!==new Date(0)&&(e.lastTimeToUpdateTerm=this.lastTimeToUpdateTerm.toISOString()),e.bottomIcons=this.bottomIcons,e.changingImagesSwapSeconds=this.changingImagesSwapSeconds,e.storyTitle=this.storyTitle,e.productsTitle=this.productsTitle,e.businessThemes={},this.businessThemes.forEach((t,r)=>{ja.hasOwnProperty(r)||(e.businessThemes[r]=t.toJson())}),e.pickedThemeKey=this.pickedThemeKey,e.shopIcon=this.shopIconUrl,e.isPrivateTheme=this.isPrivateTheme,e}}class zr{businessId="";shopIcon=new Pe;businessName="";constructor({businessId:e="",businessName:t="",shopIcon:r=new Pe}={}){this.businessId=e,this.shopIcon=r,this.businessName=t}static empty(){return new zr}static fromJsonStr(e){const t=JSON.parse(e),r=zr.empty();return r.businessId=t.businessId,r.businessName=t.businessName,t.shopIcon&&(r.shopIcon=Pe.fromJsonStr(t.shopIcon)),r}toJsonStr(){const e={businessId:this.businessId,shopIcon:this.shopIcon.toJsonStr(),businessName:this.businessName};return JSON.stringify(e)}}var Pt=(n=>(n[n.Barber=0]="Barber",n[n.Polish=1]="Polish",n[n.Beautician=2]="Beautician",n[n.ManicurePedicure=3]="ManicurePedicure",n[n.Eyelashes=4]="Eyelashes",n[n.Eyebrows=5]="Eyebrows",n[n.Braids=6]="Braids",n[n.MakeUpArtist=7]="MakeUpArtist",n[n.TattooArtist=8]="TattooArtist",n[n.HairRemoval=9]="HairRemoval",n[n.Masseur=10]="Masseur",n[n.Physiotherapy=11]="Physiotherapy",n[n.Cobblers=12]="Cobblers",n[n.Clown=13]="Clown",n[n.SocialWorker=14]="SocialWorker",n[n.Magician=15]="Magician",n[n.Doctor=16]="Doctor",n[n.Veterinarian=17]="Veterinarian",n[n.CommunicationTherapist=18]="CommunicationTherapist",n[n.DogGroomer=19]="DogGroomer",n[n.DJ=20]="DJ",n[n.Psychologist=21]="Psychologist",n[n.Tutor=22]="Tutor",n[n.WeddingDresses=23]="WeddingDresses",n[n.DanceTeacher=24]="DanceTeacher",n[n.Babysitter=25]="Babysitter",n[n.Reflexologist=26]="Reflexologist",n[n.Dietitian=27]="Dietitian",n[n.CarWash=28]="CarWash",n[n.Photographer=29]="Photographer",n[n.SwimmingTeacher=30]="SwimmingTeacher",n[n.Counselor=31]="Counselor",n[n.Mentor=32]="Mentor",n[n.TennisCoach=33]="TennisCoach",n[n.PrivateChef=34]="PrivateChef",n[n.PersonalTrainer=35]="PersonalTrainer",n[n.Lawyer=36]="Lawyer",n[n.Sales=37]="Sales",n[n.RealEstate=38]="RealEstate",n[n.DrivingTeacher=39]="DrivingTeacher",n[n.InvestmentAdvice=40]="InvestmentAdvice",n[n.Library=41]="Library",n[n.Tailor=42]="Tailor",n[n.Restaurant=43]="Restaurant",n[n.NailConstruction=44]="NailConstruction",n[n.Dentist=45]="Dentist",n[n.BeautysSalon=46]="BeautysSalon",n[n.Washer=47]="Washer",n[n.CleaningSofas=48]="CleaningSofas",n[n.Other=49]="Other",n))(Pt||{});const Dc={0:"barber",1:"polish",48:"cleaningSofas",2:"beautician",3:"manicurePedicure",4:"eyelashes",5:"eyebrows",25:"babysitter",6:"braids",7:"makeUpArtist",8:"tattooArtist",9:"hairRemoval",10:"masseur",12:"cobblers",13:"clown",14:"socialWorker",15:"magician",16:"doctor",20:"dj",17:"veterinarian",18:"communicationTherapist",19:"dogGroomer",21:"psychologist",11:"physiotherapy",22:"Tutor",23:"weddingDresses",24:"danceTeacher",26:"reflexologist",27:"dietitian",28:"carWash",29:"photographer",30:"swimmingTeacher",31:"counselor",32:"mentor",33:"tennisCoach",34:"privateChef",35:"personalTrainer",36:"lawyer",37:"sales",38:"realEstate",39:"drivingTeacher",40:"investmentAdvice",41:"library",49:"other",42:"tailor",43:"restaurant",44:"nailConstruction",45:"dentist",46:"beautysSalon",47:"washer"},eo={barber:0,cleaningSofas:48,polish:1,beautician:2,manicurePedicure:3,eyelashes:4,eyebrows:5,babysitter:25,braids:6,makeUpArtist:7,tattooArtist:8,hairRemoval:9,masseur:10,cobblers:12,clown:13,socialWorker:14,magician:15,doctor:16,veterinarian:17,communicationTherapist:18,dogGroomer:19,psychologist:21,physiotherapy:11,Tutor:22,weddingDresses:23,danceTeacher:24,reflexologist:26,dietitian:27,carWash:28,photographer:29,swimmingTeacher:30,counselor:31,mentor:32,dj:20,tennisCoach:33,privateChef:34,personalTrainer:35,lawyer:36,sales:37,realEstate:38,drivingTeacher:39,investmentAdvice:40,library:41,other:49,restaurant:43,tailor:42,nailConstruction:44,dentist:45,beautysSalon:46,washer:47},bc={noPayNoPayment:0,noPayNoPaymentWithReceipts:1,pay100For30WithReceipts:2,pay70For700Actiions:3},kc=15,Cc=20,Ac={simpletor_golden_business_month_1:1e3,simpletor_advanced_business_month_1:200,simpletor_basic_business_month_1:0,simpletor_landing_business_month_1:0},Ec={simpletor_golden_business_month_1:100,simpletor_advanced_business_month_1:20,simpletor_basic_business_month_1:10,simpletor_landing_business_month_1:10};class $r{messagesCounter=0;paymentRequestCounter=0;listener;constructor(e=0,t=0){this.messagesCounter=e,this.paymentRequestCounter=t}static forNewBusiness(){return new $r(Cc,kc)}static fromProductId(e){return new $r(Ac[e]||0,Ec[e]||0)}setBusinessData(e){this.messagesCounter=parseInt(e.val().messagesCounter.toString())||0,this.paymentRequestCounter=parseInt(e.val().paymentRequestCounter.toString())||0}toJson(){const e={};return e.messagesCounter=this.messagesCounter,e.paymentRequestCounter=this.paymentRequestCounter,e}}class Lt{businesseType=Pt.Other;currency=Bi;notifyOnNewCustomer=!0;searchable=!0;billingIssue=new Map;isLandingPageMode=!1;allWorkersIds=new Map;workersIds=new Map;hypPath;expiredDate=new Date;shopPhone="";ownersName="";companyNumber="";ownersPhone="";masofNumber="";previewDoc="";instagramAccount="";revenueCatId="";pendingWorkersProductsId="";adress="";workersProductsId="";pendingProductId="";dynamicLink="";shopName="";productId="";businessId="";createdAt=new Date;blockedUsersTemp=new Map;lastTimeConnected=new Date;businessData=new $r;design=new qe;constructor({shopName:e="",businessId:t,productId:r="",adress:i="",dynamicLink:s="",revenueCatId:a="",ownersName:c="",instagramAccount:o="",shopPhone:u="",design:l}){this.shopName=e,this.businessId=t,this.productId=r,this.adress=i,this.dynamicLink=s,this.revenueCatId=a,this.ownersName=c,this.instagramAccount=o,this.shopPhone=u,this.design=l}static empty(){return new Lt({design:new qe,businessId:""})}get businessPayLoadData(){return new zr({businessId:this.businessId,businessName:this.shopName,shopIcon:this.design.shopIconData})}static fromJson(e,t){const r=new Lt({businessId:t,design:new qe});return r.setData(e,t),r}setData(e,t){if(this.businessId=t,e.currency&&(this.currency=wr.fromJson(e.currency)),e.design)this.design=qe.fromJson(e.design);else{const i=e.theme;this.design.pickedThemeKey=i,Object.entries(e.products).forEach(([s,a])=>{this.design.products.set(s,Mt.fromJson(a,s))}),e.changingImages&&(this.design.changingImages=e.changingImages.map(s=>s)),e.updates&&e.updates.forEach((s,a)=>{this.design.updates.set(a.toString(),Rt.fromJson(s,a.toString()))}),this.design.bottomIcons=e.bottomIcons??!1,this.design.storyTitle=e.storyTitle??"",this.design.changingImagesSwapSeconds=e.changingImagesSwapSeconds??6,this.design.shopIconUrl=e.shopIcon??""}this.previewDoc=e.previewDoc??"",this.workersProductsId=e.workersProductsId??"",this.pendingWorkersProductsId=e.pendingWorkersProductsId??"",this.shopName=e.shopName??"",this.isLandingPageMode=e.isLandingPageMode??!1,this.searchable=e.searchable??!0,e.expiredDate!=null&&(this.expiredDate=new Date(e.expiredDate)),this.notifyOnNewCustomer=e.notifyOnNewCustomer??!0,this.companyNumber=e.companyNumber??"",e.hypPath!=null&&(this.hypPath=bc[e.hypPath]),this.allWorkersIds=new Map,e.allWorkersIds!=null&&Object.entries(e.allWorkersIds).forEach(([i,s])=>{this.allWorkersIds.set(i,s)});const r=this.businessId.split("--")[0];this.allWorkersIds.hasOwnProperty("+"+r)||this.allWorkersIds.set("+"+r,""),this.workersIds=new Map,e.workersIds!=null&&Object.entries(e.workersIds).forEach(([i,s])=>{this.workersIds.set(i,s)}),this.workersIds.hasOwnProperty(r)||this.workersIds.set(r,""),this.dynamicLink=e.dynamicLink??"",this.masofNumber=e.masofNumber??"",this.ownersName=e.ownersName??"",this.revenueCatId=e.revenueCatId??"",this.productId=e.productId??"",this.pendingProductId=e.pendingProductId??"",this.businesseType=eo[e.businesseType]??Pt.Other,this.instagramAccount=e.instagramAccount??"",this.adress=e.adress??"",this.shopPhone=e.shopPhone??"";try{e.billingIssue!=null&&Object.entries(e.billingIssue).forEach(([i,s])=>{this.billingIssue.set(i,s.toDate())})}catch{}e.createdAt instanceof ot?this.createdAt=e.createdAt.toDate():typeof e.createdAt=="string"&&(this.createdAt=new Date(e.createdAt)||new Date),e.lastTimeConnected!=null&&(this.lastTimeConnected=new Date(e.lastTimeConnected)||new Date)}toJson(){const e={};return e.notifyOnNewCustomer=this.notifyOnNewCustomer,e.currency=this.currency.toJson(),e.searchable=this.searchable,e.workersProductsId=this.workersProductsId,e.pendingWorkersProductsId=this.pendingWorkersProductsId,e.previewDoc=this.previewDoc,e.masofNumber=this.masofNumber,e.revenueCatId=this.revenueCatId,e.pendingProductId=this.pendingProductId,e.productId=this.productId,e.shopName=this.shopName,this.hypPath&&(e.hypPath=this.hypPath),this.billingIssue.size>0&&(e.billingIssue={},this.billingIssue.forEach((t,r)=>{e.billingIssue[r]=ot.fromDate(t)})),this.dynamicLink!==""&&(e.dynamicLink=this.dynamicLink),e.companyNumber=this.companyNumber,e.expiredDate=this.expiredDate,e.businesseType=this.businesseType,e.ownersName=this.ownersName,e.instagramAccount=this.instagramAccount,e.adress=this.adress,e.shopPhone=this.shopPhone,e.workersIds=this.workersIds,e.createdAt=this.createdAt,e.lastTimeConnected=this.lastTimeConnected,this.isLandingPageMode&&(e.isLandingPageMode=this.isLandingPageMode),e.design=this.design.toJson(),e}toString(){return JSON.stringify(this.toJson())}}class S{static microsecondsPerMillisecond=1e3;static millisecondsPerSecond=1e3;static secondsPerMinute=60;static minutesPerHour=60;static hoursPerDay=24;static microsecondsPerSecond=S.microsecondsPerMillisecond*S.millisecondsPerSecond;static microsecondsPerMinute=S.microsecondsPerSecond*S.secondsPerMinute;static microsecondsPerHour=S.microsecondsPerMinute*S.minutesPerHour;static microsecondsPerDay=S.microsecondsPerHour*S.hoursPerDay;static millisecondsPerMinute=S.millisecondsPerSecond*S.secondsPerMinute;static millisecondsPerHour=S.millisecondsPerMinute*S.minutesPerHour;static millisecondsPerDay=S.millisecondsPerHour*S.hoursPerDay;static secondsPerHour=S.secondsPerMinute*S.minutesPerHour;static secondsPerDay=S.secondsPerHour*S.hoursPerDay;static minutesPerDay=S.minutesPerHour*S.hoursPerDay;static zero=new S({seconds:0});_duration;days=0;hours=0;minutes=0;seconds=0;milliseconds=0;microseconds=0;constructor({days:e=0,hours:t=0,minutes:r=0,seconds:i=0,milliseconds:s=0,microseconds:a=0}){this._duration=a+S.microsecondsPerMillisecond*s+S.microsecondsPerSecond*i+S.microsecondsPerMinute*r+S.microsecondsPerHour*t+S.microsecondsPerDay*e}static _microseconds(e){return new S({microseconds:e})}add(e){return S._microseconds(this._duration+e._duration)}subtract(e){return S._microseconds(this._duration-e._duration)}multiply(e){return S._microseconds(Math.round(this._duration*e))}divide(e){if(e===0)throw new Error("IntegerDivisionByZeroException");return S._microseconds(Math.floor(this._duration/e))}lessThan(e){return this._duration<e._duration}greaterThan(e){return this._duration>e._duration}lessThanOrEqual(e){return this._duration<=e._duration}greaterThanOrEqual(e){return this._duration>=e._duration}get inDays(){return Math.floor(this._duration/S.microsecondsPerDay)}get inHours(){return Math.floor(this._duration/S.microsecondsPerHour)}get inMinutes(){return Math.floor(this._duration/S.microsecondsPerMinute)}get inSeconds(){return Math.floor(this._duration/S.microsecondsPerSecond)}get inMilliseconds(){return Math.floor(this._duration)}get inMicroseconds(){return this._duration}equals(e){return e instanceof S&&this._duration===e.inMicroseconds}compareTo(e){return this._duration-e._duration}}var Te=(n=>(n.waiting="waiting",n.approved="approved",n))(Te||{});const to={waiting:"waiting",approved:"approved"},ro={waiting:"waiting",approved:"approved"};var Oe=(n=>(n.app="app",n.web="web",n.byWorker="byWorker",n))(Oe||{});const no={app:"app",web:"web",byWorker:"byWorker"},io={app:"app",web:"web",byWorker:"byWorker"};var me=(n=>(n.regular="regular",n.confirmArrival="confirmArrival",n))(me||{});const kn={regular:"regular",confirmArrival:"confirmArrival"},gt={regular:"regular",confirmArrival:"confirmArrival"};var Z=(n=>(n[n.message=0]="message",n[n.push=1]="push",n[n.none=2]="none",n[n.whatsapp=3]="whatsapp",n))(Z||{});const Ic={0:"message",1:"push",2:"none",3:"whatsapp"},so={message:0,push:1,whatsapp:3,none:2},As=new S({hours:3});var z=(n=>(n[n.male=0]="male",n[n.female=1]="female",n[n.anonymous=2]="anonymous",n))(z||{});const Es={"אתה בטוח":"את בטוחה","אתה יכול":"את יכולה","דרג ":"דרגי ","אתה ":"את ","בטוח ":"בטוחה ","בטוח?":"בטוחה?",הפעל:"הפעלי",צא:"צאי"," צור":" צרי","בחר ":"בחרי ",תחויב:"תחויבי",אשר:"אשרי",לקוח:"לקוחה","סמן ":"סמני ","הכנס ":"הכניסי ",הזמן:"הזמיני",נווט:"נווטי","הוסף ":"הוסיפי ","הזמן ":"הזמיני ",רשום:"רשומה",מסתכן:"מסתכנת","הזמיני שהזנת":"הזמן שהזנת",שתרצה:"שתרצי",שלם:"שלמי",לשלמי:"לשלם","תרצה ":"תרצי ",עדכן:"עדכני","שלם הכל":"שלמי הכל",הפקד:"הפקדי",בטל:"בטלי","לחץ ":"לחצי ",השאר:"השאירי","שים לב":"שימי לב","הזן ":"הזיני ",בוא:"בואי","הקלד ":"הקלדי ","שבהן את עובד":"שבהן את עובדת","כאן תוכל להוסיף":"כאן תוכלי להוסיף","במסך זה תוכל":"במסך זה תוכלי","עדיין מתלבט":"עדיין מתלבטת",ותוכל:"ותוכלי",סיים:"סיימי",המשך:"המשיכי","ברוך הבא":"ברוכה הבאה","נסה ":"נסי ",הוצאית:"הוצאת","תהיה ":"תהיי ",התקשר:"התקשרי",תוסר:"תוסרי","תוכל ":"תוכלי ","את משתמש":"את משתמשת",לקוחהות:"לקוחות",צרית:"צורת","מחק את":"מחקי את",מאבד:"מאבדת",אמת:"אמתי",מותאמת:"מתואמת",לאמתי:"לאמת",דלג:"דלגי",לבטלי:"לבטל",כאשרי:"כאשר",סרב:"סרבי",לסרבי:"לסרב",לנווטי:"לנווט",תקבל:"תקבלי",אשריאי:"אשראי"},Ut={0:"male",1:"female",2:"anonymous"},Ke={male:0,female:1,anonymous:2};var ce=(n=>(n[n.SMS=0]="SMS",n[n.SMSOrPush=1]="SMSOrPush",n[n.WhatsAppOrPush=2]="WhatsAppOrPush",n[n.WhatsApp=3]="WhatsApp",n[n.SMSOnly=4]="SMSOnly",n[n.WhatAppOnly=5]="WhatAppOnly",n[n.Push=6]="Push",n[n.PushOrWhatsApp=7]="PushOrWhatsApp",n[n.PushOrSMS=8]="PushOrSMS",n[n.OnlyPush=9]="OnlyPush",n))(ce||{});const Tc={0:"SMS",4:"SMSOnly",5:"WhatAppOnly",1:"SMSOrPush",2:"WhatsAppOrPush",3:"WhatsApp",9:"OnlyPush",7:"PushOrWhatsApp",8:"PushOrSMS",6:"Push"},cn={SMS:0,SMSOrPush:1,WhatAppOnly:5,SMSOnly:4,WhatsAppOrPush:2,WhatsApp:3,OnlyPush:9,PushOrWhatsApp:7,PushOrSMS:8,Push:6},Pc=/^[a-zA-Z0-9-_.~%]{1,900}$/;var Sr=(n=>(n[n.shortestTreatment=0]="shortestTreatment",n[n.longestTreatment=1]="longestTreatment",n[n.custom=2]="custom",n[n.first=3]="first",n[n.last=4]="last",n[n.edges=5]="edges",n))(Sr||{});const _c={3:"first",4:"last",5:"edges",0:"shortestTreatment",1:"longestTreatment",2:"custom"},Bc={first:3,last:4,edges:5,shortestTreatment:0,longestTreatment:1,custom:2},Oc={0:"muslim",1:"christian",2:"jewish"},Fc={muslim:0,christian:1,jewish:2};var Nr=(n=>(n[n.onHold=0]="onHold",n[n.needCancel=1]="needCancel",n[n.waitingList=2]="waitingList",n[n.withDebts=3]="withDebts",n[n.withOutRecipts=4]="withOutRecipts",n[n.withOnlinePayment=5]="withOnlinePayment",n[n.withoutConfirmArrival=6]="withoutConfirmArrival",n))(Nr||{});function ao(n,e,t,r){const i=t<n&&!(r>n),s=!(t<e)&&r>e;return i?"BEFORE":s?"AFTER":"STRIKE"}function De(n,e){return new Date(n.getTime()+e.inMilliseconds)}function Tr(n,e){return new Date(n.getTime()-e.inMilliseconds)}class oo{start;end;constructor({start:e,end:t}){this.start=e,this.end=t}}function ue(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function ne(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function co(n,e){const t=ue(n);return isNaN(e)?ne(n,NaN):(e&&t.setDate(t.getDate()+e),t)}const uo=6048e5,Sc=864e5,Nc=6e4,Mc=36e5,Rc=1e3;let Lc={};function Gt(){return Lc}function ut(n,e){const t=Gt(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=ue(n),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Wt(n){return ut(n,{weekStartsOn:1})}function lo(n){const e=ue(n),t=e.getFullYear(),r=ne(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=Wt(r),s=ne(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const a=Wt(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Is(n){const e=ue(n);return e.setHours(0,0,0,0),e}function Gr(n){const e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function Uc(n,e){const t=Is(n),r=Is(e),i=t.getTime()-Gr(t),s=r.getTime()-Gr(r);return Math.round((i-s)/Sc)}function Wc(n){const e=lo(n),t=ne(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Wt(t)}function Hc(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Vc(n){if(!Hc(n)&&typeof n!="number")return!1;const e=ue(n);return!isNaN(Number(e))}function qc(n){const e=ue(n),t=ne(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const zc={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$c=(n,e,t)=>{let r;const i=zc[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Cn(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Gc={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Yc={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Jc={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Kc={date:Cn({formats:Gc,defaultWidth:"full"}),time:Cn({formats:Yc,defaultWidth:"full"}),dateTime:Cn({formats:Jc,defaultWidth:"full"})},Qc={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Xc=(n,e,t,r)=>Qc[n];function rr(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,c=t?.width?String(t.width):a;i=n.formattingValues[c]||n.formattingValues[a]}else{const a=n.defaultWidth,c=t?.width?String(t.width):n.defaultWidth;i=n.values[c]||n.values[a]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const Zc={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},jc={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eu={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tu={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ru={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},iu=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},su={ordinalNumber:iu,era:rr({values:Zc,defaultWidth:"wide"}),quarter:rr({values:jc,defaultWidth:"wide",argumentCallback:n=>n-1}),month:rr({values:eu,defaultWidth:"wide"}),day:rr({values:tu,defaultWidth:"wide"}),dayPeriod:rr({values:ru,defaultWidth:"wide",formattingValues:nu,defaultFormattingWidth:"wide"})};function nr(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],c=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],o=Array.isArray(c)?ou(c,d=>d.test(a)):au(c,d=>d.test(a));let u;u=n.valueCallback?n.valueCallback(o):o,u=t.valueCallback?t.valueCallback(u):u;const l=e.slice(a.length);return{value:u,rest:l}}}function au(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function ou(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function cu(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;const c=e.slice(i.length);return{value:a,rest:c}}}const uu=/^(\d+)(th|st|nd|rd)?/i,lu=/\d+/i,hu={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},du={any:[/^b/i,/^(a|c)/i]},fu={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mu={any:[/1/i,/2/i,/3/i,/4/i]},pu={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xu={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gu={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wu={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vu={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yu={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Du={ordinalNumber:cu({matchPattern:uu,parsePattern:lu,valueCallback:n=>parseInt(n,10)}),era:nr({matchPatterns:hu,defaultMatchWidth:"wide",parsePatterns:du,defaultParseWidth:"any"}),quarter:nr({matchPatterns:fu,defaultMatchWidth:"wide",parsePatterns:mu,defaultParseWidth:"any",valueCallback:n=>n+1}),month:nr({matchPatterns:pu,defaultMatchWidth:"wide",parsePatterns:xu,defaultParseWidth:"any"}),day:nr({matchPatterns:gu,defaultMatchWidth:"wide",parsePatterns:wu,defaultParseWidth:"any"}),dayPeriod:nr({matchPatterns:vu,defaultMatchWidth:"any",parsePatterns:yu,defaultParseWidth:"any"})},ho={code:"en-US",formatDistance:$c,formatLong:Kc,formatRelative:Xc,localize:su,match:Du,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bu(n){const e=ue(n);return Uc(e,qc(e))+1}function fo(n){const e=ue(n),t=Wt(e).getTime()-Wc(e).getTime();return Math.round(t/uo)+1}function Oi(n,e){const t=ue(n),r=t.getFullYear(),i=Gt(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=ne(n,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const c=ut(a,e),o=ne(n,0);o.setFullYear(r,0,s),o.setHours(0,0,0,0);const u=ut(o,e);return t.getTime()>=c.getTime()?r+1:t.getTime()>=u.getTime()?r:r-1}function ku(n,e){const t=Gt(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=Oi(n,e),s=ne(n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),ut(s,e)}function mo(n,e){const t=ue(n),r=ut(t,e).getTime()-ku(t,e).getTime();return Math.round(r/uo)+1}function Y(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const tt={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Y(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Y(t+1,2)},d(n,e){return Y(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Y(n.getHours()%12||12,e.length)},H(n,e){return Y(n.getHours(),e.length)},m(n,e){return Y(n.getMinutes(),e.length)},s(n,e){return Y(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.floor(r*Math.pow(10,t-3));return Y(i,e.length)}},Et={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Cu={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return tt.y(n,e)},Y:function(n,e,t,r){const i=Oi(n,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return Y(a,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):Y(s,e.length)},R:function(n,e){const t=lo(n);return Y(t,e.length)},u:function(n,e){const t=n.getFullYear();return Y(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Y(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Y(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return tt.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Y(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=mo(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Y(i,e.length)},I:function(n,e,t){const r=fo(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Y(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):tt.d(n,e)},D:function(n,e,t){const r=bu(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Y(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Y(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Y(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Y(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Et.noon:r===0?i=Et.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Et.evening:r>=12?i=Et.afternoon:r>=4?i=Et.morning:i=Et.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return tt.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):tt.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Y(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Y(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):tt.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):tt.s(n,e)},S:function(n,e){return tt.S(n,e)},X:function(n,e,t,r){const s=(r._originalDate||n).getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Ps(s);case"XXXX":case"XX":return mt(s);case"XXXXX":case"XXX":default:return mt(s,":")}},x:function(n,e,t,r){const s=(r._originalDate||n).getTimezoneOffset();switch(e){case"x":return Ps(s);case"xxxx":case"xx":return mt(s);case"xxxxx":case"xxx":default:return mt(s,":")}},O:function(n,e,t,r){const s=(r._originalDate||n).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ts(s,":");case"OOOO":default:return"GMT"+mt(s,":")}},z:function(n,e,t,r){const s=(r._originalDate||n).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ts(s,":");case"zzzz":default:return"GMT"+mt(s,":")}},t:function(n,e,t,r){const i=r._originalDate||n,s=Math.floor(i.getTime()/1e3);return Y(s,e.length)},T:function(n,e,t,r){const s=(r._originalDate||n).getTime();return Y(s,e.length)}};function Ts(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+Y(s,2)}function Ps(n,e){return n%60===0?(n>0?"-":"+")+Y(Math.abs(n)/60,2):mt(n,e)}function mt(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Y(Math.floor(r/60),2),s=Y(r%60,2);return t+i+e+s}const _s=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},po=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Au=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return _s(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",_s(r,e)).replace("{{time}}",po(i,e))},vi={p:po,P:Au},Eu=/^D+$/,Iu=/^Y+$/,Tu=["D","DD","YY","YYYY"];function xo(n){return Eu.test(n)}function go(n){return Iu.test(n)}function Yr(n,e,t){const r=Pu(n,e,t);if(console.warn(r),Tu.includes(n))throw new RangeError(r)}function Pu(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _u=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Bu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ou=/^'([^]*?)'?$/,Fu=/''/g,Su=/[a-zA-Z]/;function wt(n,e,t){const r=Gt(),i=t?.locale??r.locale??ho,s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=ue(n);if(!Vc(c))throw new RangeError("Invalid time value");const o={firstWeekContainsDate:s,weekStartsOn:a,locale:i,_originalDate:c};return e.match(Bu).map(function(l){const d=l[0];if(d==="p"||d==="P"){const h=vi[d];return h(l,i.formatLong)}return l}).join("").match(_u).map(function(l){if(l==="''")return"'";const d=l[0];if(d==="'")return Nu(l);const h=Cu[d];if(h)return!t?.useAdditionalWeekYearTokens&&go(l)&&Yr(l,e,String(n)),!t?.useAdditionalDayOfYearTokens&&xo(l)&&Yr(l,e,String(n)),h(c,l,i.localize,o);if(d.match(Su))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return l}).join("")}function Nu(n){const e=n.match(Ou);return e?e[1].replace(Fu,"'"):n}function Mu(){return Object.assign({},Gt())}function Ru(n){let t=ue(n).getDay();return t===0&&(t=7),t}function Lu(n,e){const t=e instanceof Date?ne(e,0):new e(0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}const Uu=10;class wo{subPriority=0;validate(e,t){return!0}}class Wu extends wo{constructor(e,t,r,i,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class Hu extends wo{priority=Uu;subPriority=-1;set(e,t){return t.timestampIsSet?e:ne(e,Lu(e,Date))}}class ${run(e,t,r,i){const s=this.parse(e,t,r,i);return s?{setter:new Wu(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}class Vu extends ${priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const ae={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Fe={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function oe(n,e){return n&&{value:e(n.value),rest:n.rest}}function te(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Se(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(i*Mc+s*Nc+a*Rc),rest:e.slice(t[0].length)}}function vo(n){return te(ae.anyDigitsSigned,n)}function ie(n,e){switch(n){case 1:return te(ae.singleDigit,e);case 2:return te(ae.twoDigits,e);case 3:return te(ae.threeDigits,e);case 4:return te(ae.fourDigits,e);default:return te(new RegExp("^\\d{1,"+n+"}"),e)}}function Jr(n,e){switch(n){case 1:return te(ae.singleDigitSigned,e);case 2:return te(ae.twoDigitsSigned,e);case 3:return te(ae.threeDigitsSigned,e);case 4:return te(ae.fourDigitsSigned,e);default:return te(new RegExp("^-?\\d{1,"+n+"}"),e)}}function Fi(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function yo(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const s=r+50,a=Math.floor(s/100)*100,c=n>=s%100;i=n+a-(c?100:0)}return t?i:1-i}function Do(n){return n%400===0||n%4===0&&n%100!==0}class qu extends ${priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const i=s=>({year:s,isTwoDigitYear:t==="yy"});switch(t){case"y":return oe(ie(4,e),i);case"yo":return oe(r.ordinalNumber(e,{unit:"year"}),i);default:return oe(ie(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const i=e.getFullYear();if(r.isTwoDigitYear){const a=yo(r.year,i);return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}const s=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}class zu extends ${priority=130;parse(e,t,r){const i=s=>({year:s,isTwoDigitYear:t==="YY"});switch(t){case"Y":return oe(ie(4,e),i);case"Yo":return oe(r.ordinalNumber(e,{unit:"year"}),i);default:return oe(ie(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,i){const s=Oi(e,i);if(r.isTwoDigitYear){const c=yo(r.year,s);return e.setFullYear(c,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),ut(e,i)}const a=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(a,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),ut(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class $u extends ${priority=130;parse(e,t){return Jr(t==="R"?4:t.length,e)}set(e,t,r){const i=ne(e,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),Wt(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Gu extends ${priority=130;parse(e,t){return Jr(t==="u"?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Yu extends ${priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return ie(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Ju extends ${priority=120;parse(e,t,r){switch(t){case"q":case"qq":return ie(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Ku extends ${incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const i=s=>s-1;switch(t){case"M":return oe(te(ae.month,e),i);case"MM":return oe(ie(2,e),i);case"Mo":return oe(r.ordinalNumber(e,{unit:"month"}),i);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Qu extends ${priority=110;parse(e,t,r){const i=s=>s-1;switch(t){case"L":return oe(te(ae.month,e),i);case"LL":return oe(ie(2,e),i);case"Lo":return oe(r.ordinalNumber(e,{unit:"month"}),i);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Xu(n,e,t){const r=ue(n),i=mo(r,t)-e;return r.setDate(r.getDate()-i*7),r}class Zu extends ${priority=100;parse(e,t,r){switch(t){case"w":return te(ae.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return ie(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,i){return ut(Xu(e,r,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function ju(n,e){const t=ue(n),r=fo(t)-e;return t.setDate(t.getDate()-r*7),t}class el extends ${priority=100;parse(e,t,r){switch(t){case"I":return te(ae.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return ie(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return Wt(ju(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const tl=[31,28,31,30,31,30,31,31,30,31,30,31],rl=[31,29,31,30,31,30,31,31,30,31,30,31];class nl extends ${priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return te(ae.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return ie(t.length,e)}}validate(e,t){const r=e.getFullYear(),i=Do(r),s=e.getMonth();return i?t>=1&&t<=rl[s]:t>=1&&t<=tl[s]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class il extends ${priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return te(ae.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return ie(t.length,e)}}validate(e,t){const r=e.getFullYear();return Do(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Si(n,e,t){const r=Gt(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=ue(n),a=s.getDay(),o=(e%7+7)%7,u=7-i,l=e<0||e>6?e-(a+u)%7:(o+u)%7-(a+u)%7;return co(s,l)}class sl extends ${priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=Si(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class al extends ${priority=90;parse(e,t,r,i){const s=a=>{const c=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+c};switch(t){case"e":case"ee":return oe(ie(t.length,e),s);case"eo":return oe(r.ordinalNumber(e,{unit:"day"}),s);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=Si(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class ol extends ${priority=90;parse(e,t,r,i){const s=a=>{const c=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+c};switch(t){case"c":case"cc":return oe(ie(t.length,e),s);case"co":return oe(r.ordinalNumber(e,{unit:"day"}),s);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=Si(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function cl(n,e){const t=ue(n),r=Ru(t),i=e-r;return co(t,i)}class ul extends ${priority=90;parse(e,t,r){const i=s=>s===0?7:s;switch(t){case"i":case"ii":return ie(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return oe(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return oe(r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return oe(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return oe(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return e=cl(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class ll extends ${priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(Fi(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class hl extends ${priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(Fi(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class dl extends ${priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(Fi(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class fl extends ${priority=70;parse(e,t,r){switch(t){case"h":return te(ae.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const i=e.getHours()>=12;return i&&r<12?e.setHours(r+12,0,0,0):!i&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class ml extends ${priority=70;parse(e,t,r){switch(t){case"H":return te(ae.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class pl extends ${priority=70;parse(e,t,r){switch(t){case"K":return te(ae.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class xl extends ${priority=70;parse(e,t,r){switch(t){case"k":return te(ae.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const i=r<=24?r%24:r;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class gl extends ${priority=60;parse(e,t,r){switch(t){case"m":return te(ae.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return ie(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class wl extends ${priority=50;parse(e,t,r){switch(t){case"s":return te(ae.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return ie(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class vl extends ${priority=30;parse(e,t){const r=i=>Math.floor(i*Math.pow(10,-t.length+3));return oe(ie(t.length,e),r)}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class yl extends ${priority=10;parse(e,t){switch(t){case"X":return Se(Fe.basicOptionalMinutes,e);case"XX":return Se(Fe.basic,e);case"XXXX":return Se(Fe.basicOptionalSeconds,e);case"XXXXX":return Se(Fe.extendedOptionalSeconds,e);case"XXX":default:return Se(Fe.extended,e)}}set(e,t,r){return t.timestampIsSet?e:ne(e,e.getTime()-Gr(e)-r)}incompatibleTokens=["t","T","x"]}class Dl extends ${priority=10;parse(e,t){switch(t){case"x":return Se(Fe.basicOptionalMinutes,e);case"xx":return Se(Fe.basic,e);case"xxxx":return Se(Fe.basicOptionalSeconds,e);case"xxxxx":return Se(Fe.extendedOptionalSeconds,e);case"xxx":default:return Se(Fe.extended,e)}}set(e,t,r){return t.timestampIsSet?e:ne(e,e.getTime()-Gr(e)-r)}incompatibleTokens=["t","T","X"]}class bl extends ${priority=40;parse(e){return vo(e)}set(e,t,r){return[ne(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class kl extends ${priority=20;parse(e){return vo(e)}set(e,t,r){return[ne(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const Cl={G:new Vu,y:new qu,Y:new zu,R:new $u,u:new Gu,Q:new Yu,q:new Ju,M:new Ku,L:new Qu,w:new Zu,I:new el,d:new nl,D:new il,E:new sl,e:new al,c:new ol,i:new ul,a:new ll,b:new hl,B:new dl,h:new fl,H:new ml,K:new pl,k:new xl,m:new gl,s:new wl,S:new vl,X:new yl,x:new Dl,t:new bl,T:new kl},Al=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,El=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Il=/^'([^]*?)'?$/,Tl=/''/g,Pl=/\S/,_l=/[a-zA-Z]/;function Bl(n,e,t,r){const i=Mu(),s=r?.locale??i.locale??ho,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(e==="")return n===""?ue(t):ne(t,NaN);const o={firstWeekContainsDate:a,weekStartsOn:c,locale:s},u=[new Hu],l=e.match(El).map(x=>{const f=x[0];if(f in vi){const y=vi[f];return y(x,s.formatLong)}return x}).join("").match(Al),d=[];for(let x of l){!r?.useAdditionalWeekYearTokens&&go(x)&&Yr(x,e,n),!r?.useAdditionalDayOfYearTokens&&xo(x)&&Yr(x,e,n);const f=x[0],y=Cl[f];if(y){const{incompatibleTokens:m}=y;if(Array.isArray(m)){const v=d.find(b=>m.includes(b.token)||b.token===f);if(v)throw new RangeError(`The format string mustn't contain \`${v.fullToken}\` and \`${x}\` at the same time`)}else if(y.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${x}\` and any other token at the same time`);d.push({token:f,fullToken:x});const p=y.run(n,x,s.match,o);if(!p)return ne(t,NaN);u.push(p.setter),n=p.rest}else{if(f.match(_l))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");if(x==="''"?x="'":f==="'"&&(x=Ol(x)),n.indexOf(x)===0)n=n.slice(x.length);else return ne(t,NaN)}}if(n.length>0&&Pl.test(n))return ne(t,NaN);const h=u.map(x=>x.priority).sort((x,f)=>f-x).filter((x,f,y)=>y.indexOf(x)===f).map(x=>u.filter(f=>f.priority===x).sort((f,y)=>y.subPriority-f.subPriority)).map(x=>x[0]);let g=ue(t);if(isNaN(g.getTime()))return ne(t,NaN);const w={};for(const x of h){if(!x.validate(g,o))return ne(t,NaN);const f=x.set(g,w,o);Array.isArray(f)?(g=f[0],Object.assign(w,f[1])):g=f}return ne(t,g)}function Ol(n){return n.match(Il)[1].replace(Tl,"'")}function Pr(n){const e=new Date(n);return e.setFullYear(1970),e.setMonth(0),e.setDate(1),e}function bo(n){n.sort((i,s)=>i.start.getTime()-s.start.getTime());const e=[];let t=0;for(let i=0;i<n.length;i=t){const s=n[i];for(e.push(s),t=i+1;t<n.length;t++){const a=n[t],c=ao(Pr(s.start),Pr(s.end),Pr(a.start),Pr(a.end));if(c==="AFTER")if(s.end.toUTCString()===a.start.toUTCString())s.end=a.end;else break;c==="STRIKE"&&(a.start.getTime()<s.start.getTime()&&(s.start=a.start),a.end.getTime()>s.end.getTime()&&(s.end=a.end))}}const r=[];return e.forEach(i=>{r.push(wt(i.start,"HH:mm")),r.push(wt(i.end,"HH:mm"))}),r}function Fl(n){const e=[];for(let t=0;t<n.length;t+=2){const r=new Date(n[t]),i=new Date(n[t+1]);e.push(new oo({start:r,end:i}))}return e}function Bs(n,e){for(let t=0;t<e.length;t+=2){const r=new Date(e[t]),i=new Date(e[t+1]);n.push(new oo({start:r,end:i}))}}class Sl extends Za{constructor(){super()}}function ko(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nl=ko,Co=new Ii("auth","Firebase",ko());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new U0("@firebase/auth");function Ml(n,...e){Kr.logLevel<=La.WARN&&Kr.warn(`Auth (${xr}): ${n}`,...e)}function Mr(n,...e){Kr.logLevel<=La.ERROR&&Kr.error(`Auth (${xr}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(n,...e){throw Mi(n,...e)}function Ne(n,...e){return Mi(n,...e)}function Ao(n,e,t){const r=Object.assign(Object.assign({},Nl()),{[e]:t});return new Ii("auth","Firebase",r).create(e,{appName:n.name})}function Ni(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Le(n,"argument-error"),Ao(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mi(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Co.create(n,...e)}function M(n,e,...t){if(!n)throw Mi(e,...t)}function ze(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Mr(e),new Error(e)}function Qe(n,e){n||ze(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Rl(){return Os()==="http:"||Os()==="https:"}function Os(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Rl()||N0()||"connection"in navigator)?navigator.onLine:!0}function Ul(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qe(t>e,"Short delay should be less than long delay!"),this.isMobile=F0()||S0()}get(){return Ll()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(n,e){Qe(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new vr(3e4,6e4);function Ze(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Be(n,e,t,r,i={}){return Io(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=gr(Object.assign({key:n.config.apiKey},a)).slice(1),o=await n._getAdditionalHeaders();return o["Content-Type"]="application/json",n.languageCode&&(o["X-Firebase-Locale"]=n.languageCode),Eo.fetch()(To(n,n.config.apiHost,t,c),Object.assign({method:e,headers:o,referrerPolicy:"no-referrer"},s))})}async function Io(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Wl),e);try{const i=new Vl(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw sr(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[o,u]=c.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw sr(n,"credential-already-in-use",a);if(o==="EMAIL_EXISTS")throw sr(n,"email-already-in-use",a);if(o==="USER_DISABLED")throw sr(n,"user-disabled",a);const l=r[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ao(n,l,u);Le(n,l)}}catch(i){if(i instanceof Ti)throw i;Le(n,"network-request-failed",{message:String(i)})}}async function un(n,e,t,r,i={}){const s=await Be(n,e,t,r,i);return"mfaPendingCredential"in s&&Le(n,"multi-factor-auth-required",{_serverResponse:s}),s}function To(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Ri(n.config,i):`${n.config.apiScheme}://${i}`}class Vl{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ne(this.auth,"network-request-failed")),Hl.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sr(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ne(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(n,e){return Be(n,"POST","/v1/accounts:delete",e)}async function zl(n,e){return Be(n,"POST","/v1/accounts:update",e)}async function $l(n,e){return Be(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gl(n,e=!1){const t=xe(n),r=await t.getIdToken(e),i=Li(r);M(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:or(An(i.auth_time)),issuedAtTime:or(An(i.iat)),expirationTime:or(An(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function An(n){return Number(n)*1e3}function Li(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Mr("JWT malformed, contained fewer than 3 sections"),null;try{const i=W0(t);return i?JSON.parse(i):(Mr("Failed to decode base64 JWT payload"),null)}catch(i){return Mr("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Yl(n){const e=Li(n);return M(e,"internal-error"),M(typeof e.exp<"u","internal-error"),M(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ht(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ti&&Jl(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Jl({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=or(this.lastLoginAt),this.creationTime=or(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fr(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Ht(n,$l(t,{idToken:r}));M(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Zl(s.providerUserInfo):[],c=Xl(n.providerData,a),o=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!c?.length,l=o?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Po(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(n,d)}async function Ql(n){const e=xe(n);await fr(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Xl(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Zl(n){return n.map(e=>{var{providerId:t}=e,r=Pi(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(n,e){const t=await Io(n,{},async()=>{const r=gr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=To(n,i,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Eo.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function eh(n,e){return Be(n,"POST","/v2/accounts:revokeToken",Ze(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){M(e.idToken,"internal-error"),M(typeof e.idToken<"u","internal-error"),M(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yl(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return M(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await jl(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new mr;return r&&(M(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(M(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(M(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mr,this.toJSON())}_performRefresh(){return ze("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(n,e){M(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vt{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Pi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Po(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ht(this,this.stsTokenManager.getToken(this.auth,e));return M(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Gl(this,e)}reload(){return Ql(this)}_assign(e){this!==e&&(M(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){M(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await fr(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ht(this,ql(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,o,u,l;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(a=t.photoURL)!==null&&a!==void 0?a:void 0,x=(c=t.tenantId)!==null&&c!==void 0?c:void 0,f=(o=t._redirectEventId)!==null&&o!==void 0?o:void 0,y=(u=t.createdAt)!==null&&u!==void 0?u:void 0,m=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:p,emailVerified:v,isAnonymous:b,providerData:k,stsTokenManager:C}=t;M(p&&C,e,"internal-error");const E=mr.fromJSON(this.name,C);M(typeof p=="string",e,"internal-error"),rt(d,e.name),rt(h,e.name),M(typeof v=="boolean",e,"internal-error"),M(typeof b=="boolean",e,"internal-error"),rt(g,e.name),rt(w,e.name),rt(x,e.name),rt(f,e.name),rt(y,e.name),rt(m,e.name);const F=new vt({uid:p,auth:e,email:h,emailVerified:v,displayName:d,isAnonymous:b,photoURL:w,phoneNumber:g,tenantId:x,stsTokenManager:E,createdAt:y,lastLoginAt:m});return k&&Array.isArray(k)&&(F.providerData=k.map(D=>Object.assign({},D))),f&&(F._redirectEventId=f),F}static async _fromIdTokenResponse(e,t,r=!1){const i=new mr;i.updateFromServerResponse(t);const s=new vt({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await fr(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Map;function $e(n){Qe(n instanceof Function,"Expected a class definition");let e=Fs.get(n);return e?(Qe(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Fs.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_o.type="NONE";const Ss=_o;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(n,e,t){return`firebase:${n}:${e}:${t}`}class _t{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Rr(this.userKey,i.apiKey,s),this.fullPersistenceKey=Rr("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new _t($e(Ss),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||$e(Ss);const a=Rr(r,e.config.apiKey,e.name);let c=null;for(const u of t)try{const l=await u._get(a);if(l){const d=vt._fromJSON(e,l);u!==s&&(c=d),s=u;break}}catch{}const o=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!o.length?new _t(s,e,r):(s=o[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new _t(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fo(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bo(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(No(e))return"Blackberry";if(Mo(e))return"Webos";if(Ui(e))return"Safari";if((e.includes("chrome/")||Oo(e))&&!e.includes("edge/"))return"Chrome";if(So(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Bo(n=pe()){return/firefox\//i.test(n)}function Ui(n=pe()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Oo(n=pe()){return/crios\//i.test(n)}function Fo(n=pe()){return/iemobile/i.test(n)}function So(n=pe()){return/android/i.test(n)}function No(n=pe()){return/blackberry/i.test(n)}function Mo(n=pe()){return/webos/i.test(n)}function ln(n=pe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function th(n=pe()){var e;return ln(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rh(){return H0()&&document.documentMode===10}function Ro(n=pe()){return ln(n)||So(n)||Mo(n)||No(n)||/windows phone/i.test(n)||Fo(n)}function nh(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(n,e=[]){let t;switch(n){case"Browser":t=Ns(pe());break;case"Worker":t=`${Ns(pe())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,c)=>{try{const o=e(s);a(o)}catch(o){c(o)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(n,e={}){return Be(n,"GET","/v2/passwordPolicy",Ze(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=6;class oh{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:ah,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=(t=o.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),o.isValid&&(o.isValid=(r=o.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),o.isValid&&(o.isValid=(i=o.containsLowercaseLetter)!==null&&i!==void 0?i:!0),o.isValid&&(o.isValid=(s=o.containsUppercaseLetter)!==null&&s!==void 0?s:!0),o.isValid&&(o.isValid=(a=o.containsNumericCharacter)!==null&&a!==void 0?a:!0),o.isValid&&(o.isValid=(c=o.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),o}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ms(this),this.idTokenSubscription=new Ms(this),this.beforeStateQueue=new ih(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Co,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$e(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await _t.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===c)&&o?.user&&(i=o.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return M(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await fr(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ul()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?xe(e):null;return t&&M(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&M(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence($e(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sh(this),t=new oh(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ii("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await eh(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$e(e)||this._popupRedirectResolver;M(t,this,"argument-error"),this.redirectPersistenceManager=await _t.create(this,[$e(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(M(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const o=e.addObserver(t,r,i);return()=>{a=!0,o()}}else{const o=e.addObserver(t);return()=>{a=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return M(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Ml(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Yt(n){return xe(n)}class Ms{constructor(e){this.auth=e,this.observer=null,this.addObserver=M0(t=>this.observer=t)}get next(){return M(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}function lh(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ne("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",uh().appendChild(r)})}function hh(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(n,e){const t=Ra(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(L0(s,e??{}))return i;Le(i,"already-initialized")}return t.initialize({options:e})}function fh(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map($e);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function mh(n,e,t){const r=Yt(n);M(r._canInitEmulator,r,"emulator-config-failed"),M(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=Uo(e),{host:a,port:c}=ph(e),o=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${o}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||xh()}function Uo(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ph(n){const e=Uo(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Rs(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Rs(a)}}}function Rs(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xh(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ze("not implemented")}_getIdTokenResponse(e){return ze("not implemented")}_linkToIdToken(e,t){return ze("not implemented")}_getReauthenticationResolver(e){return ze("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bt(n,e){return un(n,"POST","/v1/accounts:signInWithIdp",Ze(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="http://localhost";class Xe extends Wi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Le("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Pi(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Xe(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Bt(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Bt(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bt(e,t)}buildRequest(){const e={requestUri:gh,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gr(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(n,e){return Be(n,"POST","/v1/accounts:sendVerificationCode",Ze(n,e))}async function vh(n,e){return un(n,"POST","/v1/accounts:signInWithPhoneNumber",Ze(n,e))}async function yh(n,e){const t=await un(n,"POST","/v1/accounts:signInWithPhoneNumber",Ze(n,e));if(t.temporaryProof)throw sr(n,"account-exists-with-different-credential",t);return t}const Dh={USER_NOT_FOUND:"user-not-found"};async function bh(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return un(n,"POST","/v1/accounts:signInWithPhoneNumber",Ze(n,t),Dh)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends Wi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ot({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ot({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return vh(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return yh(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return bh(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new Ot({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt extends yr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cr extends Jt{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return M("providerId"in t&&"signInMethod"in t,"argument-error"),Xe._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return M(e.idToken||e.accessToken,"argument-error"),Xe._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return cr.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return cr.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:c}=e;if(!r&&!i&&!t&&!s||!c)return null;try{return new cr(c)._credential({idToken:t,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We extends Jt{constructor(){super("facebook.com")}static credential(e){return Xe._fromParams({providerId:We.PROVIDER_ID,signInMethod:We.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return We.credentialFromTaggedObject(e)}static credentialFromError(e){return We.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return We.credential(e.oauthAccessToken)}catch{return null}}}We.FACEBOOK_SIGN_IN_METHOD="facebook.com";We.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He extends Jt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xe._fromParams({providerId:He.PROVIDER_ID,signInMethod:He.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return He.credentialFromTaggedObject(e)}static credentialFromError(e){return He.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return He.credential(t,r)}catch{return null}}}He.GOOGLE_SIGN_IN_METHOD="google.com";He.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st extends Jt{constructor(){super("github.com")}static credential(e){return Xe._fromParams({providerId:st.PROVIDER_ID,signInMethod:st.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return st.credentialFromTaggedObject(e)}static credentialFromError(e){return st.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return st.credential(e.oauthAccessToken)}catch{return null}}}st.GITHUB_SIGN_IN_METHOD="github.com";st.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at extends Jt{constructor(){super("twitter.com")}static credential(e,t){return Xe._fromParams({providerId:at.PROVIDER_ID,signInMethod:at.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return at.credentialFromTaggedObject(e)}static credentialFromError(e){return at.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return at.credential(t,r)}catch{return null}}}at.TWITTER_SIGN_IN_METHOD="twitter.com";at.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await vt._fromIdTokenResponse(e,r,i),a=Ls(r);return new Vt({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Ls(r);return new Vt({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Ls(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Ti{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Qr.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Qr(e,t,r,i)}}function Wo(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qr._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kh(n,e){const t=xe(n);await Vo(!0,t,e);const{providerUserInfo:r}=await zl(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=Ho(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Hi(n,e,t=!1){const r=await Ht(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Vt._forOperation(n,"link",r)}async function Vo(n,e,t){await fr(e);const r=Ho(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";M(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=await Ht(n,Wo(r,i,e,n),t);M(s.idToken,r,"internal-error");const a=Li(s.idToken);M(a,r,"internal-error");const{sub:c}=a;return M(n.uid===c,r,"user-mismatch"),Vt._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Le(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(n,e,t=!1){const r="signIn",i=await Wo(n,r,e),s=await Vt._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function Ch(n,e){return zo(Yt(n),e)}async function Ah(n,e){const t=xe(n);return await Vo(!1,t,e.providerId),Hi(t,e)}async function Eh(n,e){return qo(xe(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ih(n,e){return Be(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=xe(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Ht(r,Ih(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:o})=>o==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Ph(n,e,t,r){return xe(n).onIdTokenChanged(e,t,r)}function _h(n,e,t){return xe(n).beforeAuthStateChanged(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(n,e){return Be(n,"POST","/v2/accounts/mfaEnrollment:start",Ze(n,e))}const Xr="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xr,"1"),this.storage.removeItem(Xr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(){const n=pe();return Ui(n)||ln(n)}const Fh=1e3,Sh=10;class Go extends $o{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Oh()&&nh(),this.fallbackToPolling=Ro(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,o)=>{this.notifyListeners(a,o)});return}const r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);rh()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Sh):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Fh)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Go.type="LOCAL";const Nh=Go;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends $o{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Yo.type="SESSION";const Jo=Yo;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new hn(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async u=>u(t.origin,s)),o=await Mh(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hn.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,o)=>{const u=Vi("",20);i.port1.start();const l=setTimeout(()=>{o(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(h.data.response);break;default:clearTimeout(l),clearTimeout(s),o(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(){return window}function Lh(n){Me().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(){return typeof Me().WorkerGlobalScope<"u"&&typeof Me().importScripts=="function"}async function Uh(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Wh(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Hh(){return Ko()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="firebaseLocalStorageDb",Vh=1,Zr="firebaseLocalStorage",Xo="fbase_key";class Dr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function dn(n,e){return n.transaction([Zr],e?"readwrite":"readonly").objectStore(Zr)}function qh(){const n=indexedDB.deleteDatabase(Qo);return new Dr(n).toPromise()}function Di(){const n=indexedDB.open(Qo,Vh);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Zr,{keyPath:Xo})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Zr)?e(r):(r.close(),await qh(),e(await Di()))})})}async function Us(n,e,t){const r=dn(n,!0).put({[Xo]:e,value:t});return new Dr(r).toPromise()}async function zh(n,e){const t=dn(n,!1).get(e),r=await new Dr(t).toPromise();return r===void 0?null:r.value}function Ws(n,e){const t=dn(n,!0).delete(e);return new Dr(t).toPromise()}const $h=800,Gh=3;class Zo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Di(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Gh)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ko()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hn._getInstance(Hh()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Uh(),!this.activeServiceWorker)return;this.sender=new Rh(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Wh()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Di();return await Us(e,Xr,"1"),await Ws(e,Xr),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Us(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>zh(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ws(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=dn(i,!1).getAll();return new Dr(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$h)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zo.type="LOCAL";const Yh=Zo;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(n,e){return Be(n,"POST","/v2/accounts/mfaSignIn:start",Ze(n,e))}new vr(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="recaptcha";async function Qh(n,e,t){var r;const i=await t.verify();try{M(typeof i=="string",n,"argument-error"),M(t.type===Kh,n,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return M(a.type==="enroll",n,"internal-error"),(await Bh(n,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{M(a.type==="signin",n,"internal-error");const c=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return M(c,n,"missing-multi-factor-info"),(await Jh(n,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await wh(n,{phoneNumber:s.phoneNumber,recaptchaToken:i});return a}}finally{t._reset()}}async function Xh(n,e){await Hi(xe(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.providerId=yt.PROVIDER_ID,this.auth=Yt(e)}verifyPhoneNumber(e,t){return Qh(this.auth,e,xe(t))}static credential(e,t){return Ot._fromVerification(e,t)}static credentialFromResult(e){const t=e;return yt.credentialFromTaggedObject(t)}static credentialFromError(e){return yt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Ot._fromTokenResponse(t,r):null}}yt.PROVIDER_ID="phone";yt.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(n,e){return e?$e(e):(M(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Wi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Zh(n){return zo(n.auth,new qi(n),n.bypassAuthState)}function jh(n){const{auth:e,user:t}=n;return M(t,e,"internal-error"),qo(t,new qi(n),n.bypassAuthState)}async function ed(n){const{auth:e,user:t}=n;return M(t,e,"internal-error"),Hi(t,new qi(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const o={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(o))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zh;case"linkViaPopup":case"linkViaRedirect":return ed;case"reauthViaPopup":case"reauthViaRedirect":return jh;default:Le(this.auth,"internal-error")}}resolve(e){Qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new vr(2e3,1e4);async function En(n,e,t){const r=Yt(n);Ni(n,e,yr);const i=fn(r,t);return new Ge(r,"signInViaPopup",e,i).executeNotNull()}async function In(n,e,t){const r=xe(n);Ni(r.auth,e,yr);const i=fn(r.auth,t);return new Ge(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Tn(n,e,t){const r=xe(n);Ni(r.auth,e,yr);const i=fn(r.auth,t);return new Ge(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ge extends jo{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ge.currentPopupAction&&Ge.currentPopupAction.cancel(),Ge.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return M(e,this.auth,"internal-error"),e}async onExecution(){Qe(this.filter.length===1,"Popup operations only handle one event");const e=Vi();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ne(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ge.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,td.get())};e()}}Ge.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd="pendingRedirect",Lr=new Map;class nd extends jo{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Lr.get(this.auth._key());if(!e){try{const r=await id(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Lr.set(this.auth._key(),e)}return this.bypassAuthState||Lr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function id(n,e){const t=od(e),r=ad(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function sd(n,e){Lr.set(n._key(),e)}function ad(n){return $e(n._redirectPersistence)}function od(n){return Rr(rd,n.config.apiKey,n.name)}async function cd(n,e,t=!1){const r=Yt(n),i=fn(r,e),a=await new nd(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud=10*60*1e3;class ld{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hd(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!e0(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ne(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ud&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hs(e))}saveEventToCache(e){this.cachedEventUids.add(Hs(e)),this.lastProcessedEventTime=Date.now()}}function Hs(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function e0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function hd(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return e0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dd(n,e={}){return Be(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,md=/^https?/;async function pd(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dd(n);for(const t of e)try{if(xd(t))return}catch{}Le(n,"unauthorized-domain")}function xd(n){const e=yi(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!md.test(t))return!1;if(fd.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new vr(3e4,6e4);function Vs(){const n=Me().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function wd(n){return new Promise((e,t)=>{var r,i,s;function a(){Vs(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vs(),t(Ne(n,"network-request-failed"))},timeout:gd.get()})}if(!((i=(r=Me().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Me().gapi)===null||s===void 0)&&s.load)a();else{const c=hh("iframefcb");return Me()[c]=()=>{gapi.load?a():t(Ne(n,"network-request-failed"))},lh(`https://apis.google.com/js/api.js?onload=${c}`).catch(o=>t(o))}}).catch(e=>{throw Ur=null,e})}let Ur=null;function vd(n){return Ur=Ur||wd(n),Ur}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new vr(5e3,15e3),Dd="__/auth/iframe",bd="emulator/auth/iframe",kd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ad(n){const e=n.config;M(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ri(e,bd):`https://${n.config.authDomain}/${Dd}`,r={apiKey:e.apiKey,appName:n.name,v:xr},i=Cd.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${gr(r).slice(1)}`}async function Ed(n){const e=await vd(n),t=Me().gapi;return M(t,n,"internal-error"),e.open({where:document.body,url:Ad(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kd,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Ne(n,"network-request-failed"),c=Me().setTimeout(()=>{s(a)},yd.get());function o(){Me().clearTimeout(c),i(r)}r.ping(o).then(o,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Td=500,Pd=600,_d="_blank",Bd="http://localhost";class qs{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Od(n,e,t,r=Td,i=Pd){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const o=Object.assign(Object.assign({},Id),{width:r.toString(),height:i.toString(),top:s,left:a}),u=pe().toLowerCase();t&&(c=Oo(u)?_d:t),Bo(u)&&(e=e||Bd,o.scrollbars="yes");const l=Object.entries(o).reduce((h,[g,w])=>`${h}${g}=${w},`,"");if(th(u)&&c!=="_self")return Fd(e||"",c),new qs(null);const d=window.open(e||"",c,l);M(d,n,"popup-blocked");try{d.focus()}catch{}return new qs(d)}function Fd(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="__/auth/handler",Nd="emulator/auth/handler",Md=encodeURIComponent("fac");async function zs(n,e,t,r,i,s){M(n.config.authDomain,n,"auth-domain-config-required"),M(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:xr,eventId:i};if(e instanceof yr){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",V0(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(s||{}))a[l]=d}if(e instanceof Jt){const l=e.getScopes().filter(d=>d!=="");l.length>0&&(a.scopes=l.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const l of Object.keys(c))c[l]===void 0&&delete c[l];const o=await n._getAppCheckToken(),u=o?`#${Md}=${encodeURIComponent(o)}`:"";return`${Rd(n)}?${gr(c).slice(1)}${u}`}function Rd({config:n}){return n.emulator?Ri(n,Nd):`https://${n.authDomain}/${Sd}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="webStorageSupport";class Ld{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jo,this._completeRedirectFn=cd,this._overrideRedirectResult=sd}async _openPopup(e,t,r,i){var s;Qe((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await zs(e,t,r,yi(),i);return Od(e,a,Vi())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await zs(e,t,r,yi(),i);return Lh(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Qe(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Ed(e),r=new ld(e);return t.register("authEvent",i=>(M(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pn,{type:Pn},i=>{var s;const a=(s=i?.[0])===null||s===void 0?void 0:s[Pn];a!==void 0&&t(!!a),Le(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pd(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ro()||Ui()||ln()}}const Ud=Ld;var $s="@firebase/auth",Gs="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){M(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Vd(n){ms(new ps("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;M(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const o={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lo(n)},u=new ch(r,i,s,o);return fh(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ms(new ps("auth-internal",e=>{const t=Yt(e.getProvider("auth").getImmediate());return(r=>new Wd(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi($s,Gs,Hd(n)),mi($s,Gs,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=5*60,zd=Ma("authIdTokenMaxAge")||qd;let Ys=null;const $d=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>zd)return;const i=t?.token;Ys!==i&&(Ys=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Gd(n=Ei()){const e=Ra(n,"auth");if(e.isInitialized())return e.getImmediate();const t=dh(n,{popupRedirectResolver:Ud,persistence:[Yh,Nh,Jo]}),r=Ma("authTokenSyncURL");if(r){const s=$d(r);_h(t,s,()=>s(t.currentUser)),Ph(t,a=>s(a))}const i=R0("auth");return i&&mh(t,`http://${i}`),t}Vd("Browser");const _r={"operation-not-allowed":L.providerNotAllowed,"user-disabled":L.userDisable,"provider-already-linked":L.providerAlreadyLinked,"credential-already-in-use":L.credentialAlreadyInUse,"invalid-verification-code":L.wrongOptCode,"invalid-verification-id":L.verification,"invalid-credential":L.invalidCredential,"user-mismatch":L.userMissmatch,"user-not-found":L.userNotFound,"no-such-provider":L.noSuchProvider,canceled:L.userExitManually,"too-many-requests":L.tooManyAttempts,"too-many-attempts":L.tooManyAttempts,"expired-code":L.expiredCode,"account-exists-with-different-credential":L.credentialAlreadyInUse,"invalid-phone-number":L.invalidPhoneNumber};var Yd=(n=>(n[n.login=0]="login",n[n.link=1]="link",n[n.reauthenticate=2]="reauthenticate",n[n.phoneUpdate=3]="phoneUpdate",n))(Yd||{});class Jd{_auth;constructor(){Sa().length===0?Na(Ua):Ei(),this._auth=Gd()}async signInWithFacebookSRV(e){try{return await this.signInWithFacebookWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),se.error(`it was an error the error is --> ${t}`),se.error(t.name),K.GI().details=t.name,K.GI().error=_r[t.name]??L.unknown),!1}}async signInWithFacebookWebSRV(e){const t=new We;switch(t.addScope("email"),t.setCustomParameters({display:"popup"}),e){case 0:await En(this._auth,t);break;case 1:await Tn(this._auth.currentUser,t);break;case 2:await In(this._auth.currentUser,t);break}}async signInWithGoogleSRV(e){try{return await this.signInWithGoogleWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),se.error(`it was an error the error is --> ${t}`),se.error(t.name),K.GI().details=t.name,K.GI().error=_r[t.name]??L.unknown),!1}}async signInWithGoogleWebSRV(e){const t=new He;switch(t.addScope("email"),t.addScope("profile"),t.setCustomParameters({login_hint:"user@example.com"}),e){case 0:await En(this._auth,t);break;case 1:await Tn(this._auth.currentUser,t);break;case 2:await In(this._auth.currentUser,t);break}}async signInWithAppleSRV(e){try{return await this.signInWithAppleWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),se.error(`it was an error the error is --> ${t}`),se.error(t.name),K.GI().details=t.name,K.GI().error=_r[t.name]??L.unknown),!1}}async signInWithAppleWebSRV(e){const t=new cr("apple.com");switch(t.addScope("email"),t.addScope("name"),e){case 0:await En(this._auth,t);break;case 1:await Tn(this._auth.currentUser,t);break;case 2:await In(this._auth.currentUser,t);break}}async signInWithOtpSRV({loginType:e,verificationId:t,otp:r,autocredential:i}){const s=i??yt.credential(t,r);try{switch(e){case 0:await Ch(this._auth,s);break;case 1:await Ah(this._auth.currentUser,s);break;case 2:await Eh(this._auth.currentUser,s);break;case 3:await Xh(this._auth.currentUser,s);break}return!0}catch(a){return console.error(`Error: ${a}`),a instanceof Error&&(console.error(`Error: ${a}`),se.error(`it was an error the error is --> ${a}`),se.error(a.name),K.GI().details=a.name,K.GI().error=_r[a.name]??L.unknown),!1}}get isLoggedInSRV(){return this._auth.currentUser!=null}async updateUserNameSRV(e){try{await Th(this._auth.currentUser,{displayName:e}),await this._auth.currentUser.reload()}catch(t){throw t}}userConnectedOnlyLocallySRV(){return this.isLoggedInSRV&&this._auth.currentUser.displayName===null}get lastLoginDateSRV(){return this._auth.currentUser?.metadata.lastSignInTime}get userIdSRV(){if(this._auth.currentUser!==null){const e=this._auth.currentUser.displayName;return e!==null&&e.includes("&&")&&e.includes("+")?this.userPhoneSRV:this._auth.currentUser.uid}return""}get userDataSRV(){return this._auth.currentUser}async userClaimsSRV(){return this._auth.currentUser===null?null:(await this._auth.currentUser.getIdToken(!0),(await this._auth.currentUser.getIdTokenResult()).claims)}get userPhoneSRV(){if(this._auth.currentUser!==null){const t=this._auth.currentUser.displayName.split("&&")[1];return this._auth.currentUser.phoneNumber.replace(t,`${t}-`)}return""}get existsProvidersSRV(){if(this._auth.currentUser===null)return new Set;const e=new Set;return this._auth.currentUser.providerData.forEach(t=>{e.add(t.providerId)}),e}async deleteUserSRV(){if(this._auth.currentUser===null)return!1;try{return await this._auth.currentUser.delete(),!0}catch{return!1}}async unlinkProviderSRV({providerId:e}){try{return kh(this._auth.currentUser,e),!0}catch{return!1}}async reloadUserSRV(){this._auth.currentUser!==null&&await this._auth.currentUser.reload()}async logoutSRV(){try{return await this._auth.signOut(),!this.isLoggedInSRV}catch{return!1}}}class Kd extends Jd{constructor(){super()}async signInWithGoogle(e){return await this.signInWithGoogleSRV(e)}async signInWithApple(e){return await this.signInWithAppleSRV(e)}async signInWithFacebook(e){return await this.signInWithFacebookSRV(e)}async signInWithOtp({loginType:e,verificationId:t,otp:r,autocredential:i}){return await this.signInWithOtpSRV({loginType:e,verificationId:t,otp:r,autocredential:i})}async logout(){return await this.logoutSRV()}async unlinkProvider({providerId:e}){return await this.unlinkProviderSRV({providerId:e})}async deleteUser(){return await this.deleteUserSRV()}async reloadUser(){await this.reloadUserSRV()}userConnectedOnlyLocally(){return this.userConnectedOnlyLocallySRV()}async updateUserName({name:e}){try{return await this.updateUserNameSRV(e),!0}catch(t){return console.error(`Error occurred while saving user name --> ${t}`),!1}}get isLoggedIn(){return this.isLoggedInSRV}get existsProviders(){return this.existsProvidersSRV}get userData(){return this.userDataSRV}get userId(){return this.userIdSRV}get lastLoginDate(){return this.lastLoginDateSRV}async userClaims(){return await this.userClaimsSRV}}const Qd=Kd,Xd="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU2LjY5MyA1Ni42OTMiIGhlaWdodD0iNTYuNjkzcHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA1Ni42OTMgNTYuNjkzIiB3aWR0aD0iNTYuNjkzcHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik00MS43NzcsMzAuNTE3Yy0wLjA2Mi02LjIzMiw1LjA4Mi05LjIyMSw1LjMxMi05LjM3MmMtMi44OTEtNC4yMjctNy4zOTUtNC44MDctOC45OTgtNC44NzMgICBjLTMuODMtMC4zODktNy40NzcsMi4yNTYtOS40MiwyLjI1NmMtMS45MzksMC00Ljk0MS0yLjE5OS04LjExNy0yLjE0M2MtNC4xNzgsMC4wNjItOC4wMjksMi40My0xMC4xNzksNi4xNyAgIGMtNC4zMzksNy41MjctMS4xMSwxOC42ODIsMy4xMTgsMjQuNzkxYzIuMDY3LDIuOTg2LDQuNTMyLDYuMzQ2LDcuNzY2LDYuMjIzYzMuMTE3LTAuMTIzLDQuMjkzLTIuMDE2LDguMDYxLTIuMDE2ICAgczQuODI2LDIuMDE2LDguMTIzLDEuOTUzYzMuMzUyLTAuMDYxLDUuNDc3LTMuMDQzLDcuNTI3LTYuMDQxYzIuMzczLTMuNDY5LDMuMzUtNi44MjgsMy40MDgtNi45OTggICBDNDguMzA1LDQwLjQzMyw0MS44NDQsMzcuOTU4LDQxLjc3NywzMC41MTd6Ii8+PHBhdGggZD0iTTM1LjU4MiwxMi4yMjljMS43MTUtMi4wODIsMi44NzctNC45NzUsMi41NjEtNy44NTVjLTIuNDc1LDAuMS01LjQ3MSwxLjY0NS03LjI0OCwzLjcyNSAgIGMtMS41OTIsMS44NDYtMi45ODQsNC43ODUtMi42MTEsNy42MTNDMzEuMDQ1LDE1LjkyNiwzMy44NjEsMTQuMzA3LDM1LjU4MiwxMi4yMjl6Ii8+PC9nPjwvc3ZnPg==",Zd="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20id='Layer_1'%20style='enable-background:new%200%200%201000%201000;'%20version='1.1'%20viewBox='0%200%201000%201000'%20xml:space='preserve'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%233B579D;}%20.st1{fill:%23FFFFFF;}%20%3c/style%3e%3ctitle/%3e%3cg%3e%3cpath%20class='st0'%20d='M500,1000L500,1000C223.9,1000,0,776.1,0,500v0C0,223.9,223.9,0,500,0h0c276.1,0,500,223.9,500,500v0%20C1000,776.1,776.1,1000,500,1000z'/%3e%3cpath%20class='st1'%20d='M630,1000V612.7h130l19.5-150.9H630v-96.4c0-43.7,12.1-73.5,74.8-73.5l79.9,0V157%20c-13.8-1.8-61.3-5.9-116.5-5.9c-115.2,0-194.1,70.3-194.1,199.5v111.3H343.8v150.9h130.3V1000H630z'%20id='f'/%3e%3c/g%3e%3c/svg%3e";var t0=(n=>(n[n.Apple=0]="Apple",n[n.Google=1]="Google",n[n.Facebook=2]="Facebook",n[n.Phone=3]="Phone",n))(t0||{});const gm={0:"Apple",1:"Google",2:"Facebook",3:"Phone"},wm=[1,2,0,3],Js={Apple:0,Google:1,Facebook:2,Phone:3},vm={0:Xd,1:$0,2:Zd,3:"Phone"},ym={0:"apple.com",1:"google.com",2:"facebook.com",3:"phone"};class ur{businessName="";iconUrl="";businessId="";type=Pt.Other;adress="";ownerName="";shopPhone="";constructor({businessId:e,shopPhone:t,type:r,adress:i,ownerName:s,iconUrl:a,businessName:c}){this.businessId=e,this.shopPhone=t,this.type=r,this.adress=i,this.ownerName=s,this.iconUrl=a,this.businessName=c}static empty(){return new ur({businessId:"",shopPhone:"",type:Pt.Other,adress:"",ownerName:"",iconUrl:"",businessName:""})}static fromJson(e,t){const r=e.businessName||"",i=e.iconUrl||"",s=eo[e.T]||Pt.Other,a=e.ON||"",c=e.SP||"",o=e.A||"";return new ur({businessId:t,shopPhone:c,type:s,adress:o,ownerName:a,iconUrl:i,businessName:r})}get toBusinessModel(){const e=new Lt({businessId:this.businessId,design:new qe({shopIconUrl:this.iconUrl})});return e.ownersName=this.ownerName,e.shopPhone=this.shopPhone,e.shopName=this.businessName,e.adress=this.adress,e.businesseType=this.type,e}static fromBusinessInfo(e){return new ur({businessId:e.businessId,shopPhone:e.shopPhone,type:e.type,adress:e.adress,ownerName:e.ownerName,iconUrl:e.iconUrl,businessName:e.businessName})}toJson(){const e={};return e.businessName=this.businessName,e.iconUrl=this.iconUrl,e.ON=this.ownerName,e.SP=this.shopPhone,e.A=this.adress,e.T=Dc[this.type],e}isTheSame(e){return e.iconUrl===this.iconUrl&&e.ownerName===this.ownerName&&e.shopPhone===this.shopPhone&&e.adress===this.adress&&e.type===this.type&&e.businessName===this.businessName}toString(){return JSON.stringify(this.toJson())}}function jd(n){return Bl(wt(n,"dd-MM-yyyy"),"dd-MM-yyyy",new Date)}function Ks(n,e){let t=n.getFullYear()-e.getFullYear(),r=n.getMonth()-e.getMonth();return r<0&&(t-=1,r+=12),Math.abs(t*12+r)}function ef(n,e){return n===null&&e===null?null:n===null?e:e===null?n:e>n?e:n}var Wr=(n=>(n[n.deposit=0]="deposit",n[n.payment=1]="payment",n))(Wr||{});const bi={0:"deposit",1:"payment"},ki={deposit:0,payment:1};class qt{type=1;amount=0;createdAt=new Date(0);id="";hypId="";constructor({type:e=1,amount:t=0,id:r="",hypId:i="",createdAt:s=new Date(0)}){this.type=e,this.amount=parseFloat(t.toFixed(2)),this.id=r,this.hypId=i,this.createdAt=s}static fromJson(e,t){const r=new qt({});return e.amount!=null&&(r.amount=e.amount),r.hypId=e.hypId||"",r.id=t,r.type=ki[e.type]||1,r.createdAt=e.createdAt?new Date(e.createdAt):new Date(0),r}static fromTransaction(e){const t=new qt({});return t.type=e.type,t.amount=e.amount,t.id=e.id,t.hypId=e.hypId,t.createdAt=e.createdAt,t}toJson(){const e={};return e.amount=this.amount,e.hypId=this.hypId,e.type=bi[this.type],e.createdAt=this.createdAt.toISOString(),e}toString(){return JSON.stringify(this.toJson(),null,2)}}class Ft{workMinutes=0;breakMinutes=0;title="";constructor({workMinutes:e=0,breakMinutes:t=0,title:r=""}){this.workMinutes=e,this.breakMinutes=t,this.title=r}get wholeMinutes(){return this.workMinutes+this.breakMinutes}static fromTreatmentTime(e){return new Ft({breakMinutes:e.breakMinutes,workMinutes:e.workMinutes,title:e.title})}static fromJson(e){return new Ft({breakMinutes:e.break||0,workMinutes:e.duration||0,title:e.title||""})}toJson(){const e={};return e.break=this.breakMinutes,e.duration=this.workMinutes,e.title=this.title,e}toString(){return JSON.stringify(this,null,2)}}class _e{totalMinutes=0;index="";id="";note="";price;amountInAdvance=0;paymentType;isMulti=!1;showPrice=!0;showTime=!0;count=1;name="";colorIndex=-2;maxParticipants=1;maxTicketsForUser=1;tempMaxParticipants;hide=!1;showParticipants=!0;times=new Map;priceChangingNote;constructor({times:e=new Map,id:t="",price:r,count:i=1,name:s="",isMulti:a=!1,maxTicketsForUser:c=1,index:o="",amountInAdvance:u=0,colorIndex:l=-2,hide:d=!1,paymentType:h,note:g="",maxParticipants:w=1,showPrice:x=!0,showParticipants:f=!0,showTime:y=!0}={}){this.times=e,this.id=t,this.price=r,this.count=i,this.name=s,this.isMulti=a,this.maxTicketsForUser=c,this.index=o,this.amountInAdvance=u,this.colorIndex=l,this.hide=d,this.paymentType=h,this.note=g,this.maxParticipants=w,this.showPrice=x,this.showParticipants=f,this.showTime=y,this.totalMinutes=this.totalTotalMinutes}isEqual(e){return!0}get totalTotalMinutes(){let e=0;return this.times.forEach((t,r)=>{e+=t.wholeMinutes}),e}get totalWorkMinutes(){let e=0;return this.times.forEach((t,r)=>{e+=t.workMinutes}),e}get totalMinutesForBooking(){return this.totalMinutes*this.count}get amountInAdvanceForBooking(){return this.amountInAdvance*this.count}get totalPriceForBooking(){return this.price.amount*this.count}get nameForBooking(){return this.count===1?this.name:`${this.name} X${this.count}`}static fromTreatment(e){const t=new _e({times:new Map,showTime:e.showTime,paymentType:e.paymentType,id:e.id,hide:e.hide,showPrice:e.showPrice,price:e.price,index:e.index,maxTicketsForUser:e.maxTicketsForUser,colorIndex:e.colorIndex,name:e.name,isMulti:e.isMulti,note:e.note,count:e.count,maxParticipants:e.maxParticipants,amountInAdvance:e.amountInAdvance});return t.priceChangingNote=e.priceChangingNote,t.tempMaxParticipants=e.tempMaxParticipants,t.totalMinutes=e.totalMinutes,e.times.forEach((r,i)=>{t.times.set(i,Ft.fromTreatmentTime(r))}),t}static fromTreatmentsMap(e){let t=0;const r=new _e({price:new Tt({amount:"0",currency:Bi})});return e.forEach((i,s)=>{for(let a=0;a<i.count;a++)i.times.forEach((c,o)=>{r.times.set(t.toString(),c),t++}),i.price&&(r.price.amount+=i.price.amount,r.price.currency=i.price.currency),r.name===""?r.name=i.name:r.name+=` + ${i.name}`,r.showTime=r.showTime&&i.showTime,r.showPrice=r.showPrice&&i.showPrice,r.paymentType=i.paymentType,r.amountInAdvance+=i.amountInAdvance,r.totalMinutes+=i.totalMinutes}),r}get participants(){return this.tempMaxParticipants!==void 0?this.tempMaxParticipants:this.maxParticipants}priceToString(){return this.price.toString()}minutesToString(){return ar(new S({minutes:this.totalMinutes}))}static fromJson(e,t){const r=new _e({times:new Map,id:e.id||"",colorIndex:e.colorIndex||-2,maxTicketsForUser:e.maxTicketsForUser||1,index:t,hide:e.hide||!1,name:e.name||"",isMulti:e.isMulti||!1,note:e.note||"",count:e.count||1,price:e.price?Tt.fromJson(e.price):void 0,amountInAdvance:e.amountInAdvance!==void 0?typeof e.amountInAdvance=="number"?e.amountInAdvance:parseFloat(e.amountInAdvance):0,maxParticipants:e.maxParticipants||1,paymentType:ki[e.paymentType],showPrice:e.showPrice||!1,showTime:e.showTime||!1,showParticipants:e.showParticipants||!0});if(r.priceChangingNote=e.priceChangingNote,r.tempMaxParticipants=e.tempMaxParticipants,e.times)for(const i in e.times)r.times.set(i,Ft.fromJson(e.times[i]));return r}toJson(){const e={};return e.times={},this.times.forEach((t,r)=>{e.times[r]=t.toJson()}),e.name=this.name,this.note!==""&&(e.note=this.note),this.id!==""&&(e.id=this.id),this.hide&&(e.hide=this.hide),this.maxTicketsForUser>1&&(e.maxTicketsForUser=this.maxTicketsForUser),this.colorIndex!==-2&&(e.colorIndex=this.colorIndex),this.priceChangingNote!==void 0&&(e.priceChangingNote=this.priceChangingNote),e.price=this.price?this.price.toJson():void 0,this.amountInAdvance!==0&&(e.amountInAdvance=this.amountInAdvance),this.paymentType!=null&&bi[this.paymentType]!=null&&(e.paymentType=bi[this.paymentType]),this.isMulti&&(e.isMulti=this.isMulti),this.tempMaxParticipants!==void 0&&(e.tempMaxParticipants=this.tempMaxParticipants),this.count!==1&&(e.count=this.count),this.maxParticipants!==1&&(e.maxParticipants=this.maxParticipants),this.showParticipants||(e.showParticipants=this.showParticipants),e.showPrice=this.showPrice,e.showTime=this.showTime,e}static fromOldJson(e,t,r,i){const s=new _e({});if(e.times)for(const a in e.times)e.times.hasOwnProperty(a)&&s.times.set(a,Ft.fromJson(e.times[a]));return s.id="",s.colorIndex=i,s.index=t,s.name=s.parseNameFromDbField(r),e.price&&(s.price=Tt.fromJson(e.price)),e.amountInAdvance!==void 0&&(s.amountInAdvance=typeof e.amountInAdvance=="number"?e.amountInAdvance:parseFloat(e.amountInAdvance)),s.paymentType=ki[e.paymentType],s.showPrice=e.showPrice||!1,s.showTime=e.showTime||!1,s.totalMinutes=s.totalTotalMinutes,s}parseNameFromDbField(e){return e.replace(ys,"/").replace(Ds,"*")}parseNameToDbField(e){return e.replace("/",ys).replace("*",Ds)}toString(){return JSON.stringify(this,null,2)}}class zt{createdAt=new Date(0);id="";amount=0;description="";showUser=!1;constructor({createdAt:e,amount:t,id:r,showUser:i,description:s=""}){this.createdAt=e,this.amount=t,this.id=r,this.showUser=i,this.description=s}static fromJson(e,t){return new zt({createdAt:e.createdAt?new Date(e.createdAt):new Date(0),amount:e.amount!=null?typeof e.amount=="number"?e.amount:parseFloat(e.amount):0,id:t,showUser:e.showUser??!1,description:e.description??""})}static fromDebt(e){return new zt({createdAt:e.createdAt,amount:e.amount,id:e.id,showUser:e.showUser,description:e.description})}isEqual(e){return e.id===this.id&&e.description===this.description&&e.showUser===this.showUser&&e.createdAt.toString()===this.createdAt.toString()&&this.amount===e.amount}toJson(){const e={};return e.createdAt=this.createdAt.toISOString(),e.amount=this.amount,this.showUser&&(e.showUser=this.showUser),this.description!==""&&(e.description=this.description),e}}class xt extends Set{constructor(e,t){super(e),t&&this.sort(t)}sort(e){this.clear(),Array.from(this).sort(e).forEach(t=>this.add(t))}get last(){if(this.size===0)return;const e=Array.from(this);return e[e.length-1]}get isEmpty(){return this.size===0}elementAt(e){if(!(e<0||e>=this.size))return Array.from(this)[e]}intersection(e){const t=new xt;return this.forEach(r=>{e.has(r)&&t.add(r)}),t}}const tf={0:"years",1:"months",2:"weeks",3:"days"},rf={years:0,months:1,weeks:2,days:3},nf={0:"YEARLY",1:"MONTHLY",2:"WEEKLY",3:"DAILY"};var r0=(n=>(n[n.endless=0]="endless",n[n.date=1]="date",n[n.repeats=2]="repeats",n))(r0||{});const _n=["SU","MO","TU","WE","TH","FR","SA"],Bn={0:new S({days:365}),1:new S({days:30}),2:new S({days:7}),3:new S({days:1})};class lt{start;endDate;repeats=10;interval=1;freqRecurrence=3;weekDays=new xt;endOption=2;exceptionDates=new Set;customEndDate;constructor({start:e,endOption:t=2,endDate:r,repeats:i=10,interval:s=1,weekDays:a=new xt,customEndDate:c,freqRecurrence:o=3,exceptionDates:u=new Set}){this.start=e,this.weekDays=a,this.endOption=t,this.endDate=r,this.repeats=i,this.interval=s,this.customEndDate=c,this.freqRecurrence=o,this.exceptionDates=u}static fromJson(e,t){const r=new lt({});return r.start=t,r.endDate=e.ED?new Date(e.ED):void 0,r.repeats=e.R||10,r.interval=e.I||1,r.weekDays=new xt(e.WD||[]),r.exceptionDates=new Set(Object.keys(e.EDA||{}).map(mn)),r.freqRecurrence=rf[e.FR]||3,r}toJson({saveStartDate:e=!1,saveEnd:t=!0,saveException:r=!0}){const i={};return t&&this.endDate&&this.endOption===1&&(i.ED=Je(this.endDate)),t&&this.endOption===2&&(i.R=this.repeats),this.interval!==1&&(i.I=this.interval),this.weekDays.size>0&&this.freqRecurrence===2&&(i.WD=[...this.weekDays]),r&&this.exceptionDates.size>0&&(i.EDA={},this.exceptionDates.forEach(s=>{i.EDA[Je(s)]=""})),e&&this.start&&(i.SD=this.start.toISOString()),i.FR=tf[this.freqRecurrence],i}static fromRecurrenceEvent(e){return new lt({start:e.start,endDate:e.endDate,repeats:e.repeats,interval:e.interval,freqRecurrence:e.freqRecurrence,weekDays:new xt(e.weekDays),endOption:e.endOption,exceptionDates:new Set(e.exceptionDates)})}isEqual(e){return!this.start||!e.start||this.start.getTime()!==e.start.getTime()||(this.endDate?.getTime()||0)!==(e.endDate?.getTime()||0)?!1:this.repeats===e.repeats&&this.interval===e.interval&&this.freqRecurrence===e.freqRecurrence&&bs(e.weekDays,this.weekDays)&&bs(e.exceptionDates,this.exceptionDates)&&this.endOption===e.endOption}get syncfuString(){let e=`FREQ=${nf[this.freqRecurrence]};`;if(this.freqRecurrence===1&&this.start&&(e+=`BYMONTHDAY=${this.start.getDate()};`),this.freqRecurrence===0&&this.start&&(e+=`BYMONTHDAY=${this.start.getDate()};BYMONTH=${this.start.getMonth()+1};`),e+=`INTERVAL=${this.interval};`,this.freqRecurrence===2&&this.weekDays.size>0&&(e+="BYDAY=",this.weekDays.forEach(t=>{t<_n.length&&(e+=_n[t]+",")}),e=e.slice(0,-1)+";"),this.customEndDate&&(this.endOption===0||this.endOfTheEvent&&this.endOfTheEvent>new Date)){const t=new Date(this.customEndDate.getFullYear(),this.customEndDate.getMonth(),this.customEndDate.getDate(),this.start?.getHours()??0,this.start?.getMinutes()??0);e+=`UNTIL=${wt(t,"yyyyMMdd'T'HHmmss'Z'")}`}else switch(this.endOption){case 0:break;case 1:if(this.endDate){const t=new Date(this.endDate.getFullYear(),this.endDate.getMonth(),this.endDate.getDate(),this.start?.getHours()??0,this.start?.getMinutes()??0);e+=`UNTIL=${wt(t,"yyyyMMdd'T'HHmmss'Z'")}`}break;case 2:e+=`COUNT=${this.repeats}`;break}return e}get accurances(){if(!this.start||this.endOption===0)return null;if(this.endOption===2)return this.repeats-this.exceptionDates.size;if(this.endOption===1&&this.endDate){let e=0;if(this.exceptionDates.forEach(t=>{t<=this.endDate&&e++}),this.freqRecurrence===2){let t=0;const r=ft(this.start);this.weekDays.forEach(u=>{this.isAccureInDate({date:De(r,new S({days:u})),considerException:!1})&&t++});const i=Math.abs(De(r,new S({days:6})).getTime()-ft(this.endDate).getTime()),s=Math.floor(i/this.rangeBetweenInterval.inMilliseconds),a=ft(this.endDate);let c=0;return ye(a).getTime()!==ye(r).getTime()&&this.weekDays.forEach(u=>{this.isAccureInDate({date:De(a,new S({days:u})),considerException:!1})&&c++}),s*this.weekDays.size+c+t-e}else if(this.freqRecurrence===1){const t=Ks(this.start,this.endDate);return Math.floor(t/this.interval)-e}else{const t=this.start.getTime()-this.endDate.getTime();return Math.floor(Math.abs(t)/this.rangeBetweenInterval.inDays)-e}}return null}get rangeBetweenInterval(){return new S({minutes:Bn[this.freqRecurrence].inMinutes*this.interval})}get endOfTheEvent(){const e=this.rangeBetweenInterval;if(this.endOption===1&&this.endDate!==null)return this.endDate??null;if(this.endOption===2)if(this.freqRecurrence===2){let t=0;const r=this.start.getDay()===7?0:this.start.getDay();this.weekDays.forEach(u=>{u>=r&&t++});const i=this.repeats-t,s=Math.ceil(i/this.weekDays.size),a=i%this.weekDays.size,c=new Date(this.start.getTime()+new S({minutes:e.inMinutes*s}).milliseconds),o=ft(c);this.weekDays=new xt(this.weekDays,(u,l)=>u-l);try{return new Date(o.getTime()+new S({days:a-1<0?this.weekDays.last:this.weekDays.elementAt(a-1)}).inMilliseconds)}catch{return null}}else return this.freqRecurrence===1?Xs(this.start,(this.repeats-1)*this.interval):new Date(this.start.getTime()+new S({minutes:e.inMinutes*(this.repeats-1)}).inMilliseconds);return null}get explainText(){if(this.start===null)return"";let e="";const t=new S({minutes:Bn[this.freqRecurrence].inMinutes*this.interval});switch(this.freqRecurrence){case 0:e+=q("yearTamplate").replaceAll("DURATION",ar(t)).replaceAll("DATE",wt(this.start,"dd/MM"));break;case 1:e+=q("monthTemplate").replaceAll("DURATION",ar(t)).replaceAll("DATE",this.start.getDate().toString());break;case 2:let i="";this.weekDays.forEach(s=>{i+=q(_n[s])+", "}),i=i.substring(0,i.length-2),e+=q("weekTemplate").replaceAll("DURATION",ar(t)).replaceAll("DAYS",i).replaceAll("AMOUNT",q(Object.keys(this.weekDays).length===1?"onDay":"onDays"));break;case 3:e+=q("dayTemplate").replaceAll("DURATION",ar(t));break}const r=this.endOfTheEvent;return r!==null&&(e+=` ${q("until")} ${Je(r)}`),e}isAccureInDate({date:e,considerException:t=!0}){if(this.start===null||ye(this.start)>e)return!1;const r=this.endOfTheEvent;if(r!==null&&r<ye(e)||t&&this.exceptionDates.has(ye(e)))return!1;const i=new S({minutes:Bn[this.freqRecurrence].inMinutes*this.interval}),s=new S({milliseconds:e.getTime()-ye(this.start).getTime()}),a=this.start.getDay()===7?0:this.start.getDay(),c=e.getDay()===7?0:e.getDay();if(this.freqRecurrence===2){const o=7-a,u=i.inDays-a,l=(s.inDays+i.inDays)%i.inDays;return(l<o||l>=u)&&this.weekDays.has(c)}if(this.freqRecurrence===1){const o=Ks(this.start,e);return this.start.getDate()===e.getDate()&&o%this.interval===0}return s.inDays%i.inDays===0}addRangeBetween(e){const t=new Date(e.getUTCDate());return this.freqRecurrence===1?Xs(t,this.interval):De(t,new S({minutes:this.rangeBetweenInterval.inMinutes}))}overlapingDatesWith(e){if(this.start===null||e.start===null)return new Set([new Date(0)]);if(this.endOfTheEvent===null&&e.endOfTheEvent===null)return new Set([new Date(0)]);const t=new Set,r=this._getOptimalEventToPassOver(this,e),i=r[0],s=r[1];let a=i.start;for(;ye(a)<=ye(i.endOfTheEvent);){if(i.freqRecurrence===2){const c=ft(a);i.weekDays.forEach(o=>{const u=De(c,new S({days:o}));s.isAccureInDate({date:u})&&i.isAccureInDate({date:u})&&t.add(ye(u))})}else s.isAccureInDate({date:a})&&i.isAccureInDate({date:a})&&t.add(ye(a));a=this.addRangeBetween(a)}return t}get isRelevant(){return this.endOfTheEvent===null||this.endOfTheEvent>new Date}nearestFutureAccurenceDate(e,{needToBeAfterStart:t=!0}={}){if(this.endOfTheEvent!==null&&e>this.endOfTheEvent)return null;if(this.start===null||e<this.start&&t&&this.isAccureInDate({date:this.start}))return this.start??null;const r=new S({milliseconds:e.getTime()-this.start.getTime()}).inDays;if(this.freqRecurrence===2){const c=Math.floor(r/this.rangeBetweenInterval.inDays);let o=De(this.start,new S({days:c*this.rangeBetweenInterval.inDays})),u=ft(o);for(const l of this.weekDays){const d=new Date(u.getTime()+new S({days:l}).inMilliseconds);if(d>=e&&(this.endOfTheEvent===null||o<=this.endOfTheEvent))return d}o=De(o,this.rangeBetweenInterval),u=ft(o);for(const l of this.weekDays){const d=De(u,new S({days:l}));if(d>=e&&(this.endOfTheEvent===null||o<=this.endOfTheEvent))return d}return null}const i=Math.ceil(r/this.rangeBetweenInterval.inDays);let s=De(this.start,new S({days:i*this.rangeBetweenInterval.inDays}));s<e&&(s=this.addRangeBetween(s));const a=this.endOfTheEvent;for(;!this.isAccureInDate({date:s})&&(a===null||s<a);)s=this.addRangeBetween(s);return a===null||s<=a?s:null}_getOptimalEventToPassOver(e,t){return e.endOfTheEvent===null&&t.endOfTheEvent!==null?[t,e]:e.endOfTheEvent!==null&&t.endOfTheEvent===null?[e,t]:(t.jumps??99999)<(e.jumps??99999)?[t,e]:[e,t]}get jumps(){if(this.start===null||this.endOfTheEvent===null)return null;const t=new S({milliseconds:this.start.getTime()-this.endOfTheEvent.getTime()}).inMinutes/this.rangeBetweenInterval.inMinutes;return Math.ceil(t*Math.max(this.weekDays.size,1))}toString(){return JSON.stringify(this,null,2)}}class sf{date=new Date(0);workerId="";workerName="";workerPhone="";buisnessId="";businessName="";recurrenceEvent;recurrenceRef;recurrenceFatherDate;recurrenceEventRefInfo;recurrenceNotificationsLastDate;recurrenceChildDate;constructor({workerId:e="",workerName:t="",businessName:r="",buisnessId:i="",workerPhone:s=""}={}){this.workerId=e,this.workerName=t,this.businessName=r,this.buisnessId=i,this.workerPhone=s}}class $t{invoiceId="";docId="";monthStr="";issuedBy="";amount=0;constructor({monthStr:e,invoiceId:t,docId:r,amount:i,issuedBy:s}){this.monthStr=e,this.invoiceId=t,this.docId=r,this.amount=i,this.issuedBy=s}toJson(){const e={};return e.monthStr=this.monthStr,e.docId=this.docId,e.issuedBy=this.issuedBy,e.amount=this.amount,e}static fromJson(e,t,r){const i=new $t({});return i.invoiceId=t,i.docId=e.docId??"",i.monthStr=e.monthStr??"",i.issuedBy=e.issuedBy??r,e.amount!=null&&(i.amount=typeof e.amount=="number"?e.amount:parseFloat(e.amount)),i}static fromBookingInvoiceData(e){const t=new $t({});return t.invoiceId=e.invoiceId,t.docId=e.docId,t.monthStr=e.monthStr,t.issuedBy=e.issuedBy,t.amount=e.amount,t}toString(){return JSON.stringify(this.toJson(),null,2)}}const af="simpletor.officialsimplecode.com",of="?PaymentId=PAYMENT_ID";class zi{id="";workerId="";createdAt=new Date(0);signNewMultiBookingUsers=!0;constructor({id:e,workerId:t}){this.id=e,this.workerId=t}get link(){return`https://${af}/${of}`.replace("PAYMENT_ID",this.id)}static fromJson(e){const t=new zi({});return t.id=e.id??"",e.createdAt!=null&&(t.createdAt=new Date(e.createdAt)||new Date(0)),t.workerId=e.workerId??"",t.signNewMultiBookingUsers=e.signNewMultiBookingUsers??!0,t}toJson(){const e={};return this.createdAt.getTime()!==new Date(0).getTime()&&(e.createdAt=this.createdAt.toISOString()),this.signNewMultiBookingUsers||(e.signNewMultiBookingUsers=this.signNewMultiBookingUsers),e.id=this.id,e.workerId=this.workerId,e}toString(){return JSON.stringify(this.toJson(),null,2)}}class Ye extends sf{customerName="";customerPhone="";customerId="";orderingOptions=Oe.app;isVerifiedPhone=!1;isUserExist=!0;notificationType=Z.none;workerNotificationOption=ce.PushOrSMS;workerRemindersTypes=new Map;workerDeleted=!1;clientMail="";showAdressAlert=!1;showPhoneAlert=!1;signOnDeviceCalendar=!1;isMultiRef=!1;cancelDate;lastTimeNotifyOnDebt;adress="";wasWaiting=!1;bookingDate=new Date(0);note="";needCancel=!1;treatments=new Map;userGender=z.anonymous;workerGender=z.anonymous;status=Te.approved;confirmedArrival=!1;bookingId="";userFcms=new Set;clientNote="";shopIcon=new Pe;remindersTypes=new Map;createdAt=new Date;finishInvoices=!1;invoices=new Map;transactions=new Map;recurrenceTimeId;recurreneFatherDate;debts=new Map;addToClientAt=!1;paymentRequest;userDeleted=!1;fatherMultiBooking;fatherRecurrenceBooking;constructor({workerId:e,workerName:t,businessName:r,buisnessId:i,workerPhone:s}){super({workerId:e,workerName:t,businessName:r,buisnessId:i,workerPhone:s})}static empty(){return new Ye({})}static fromBooking(e){const t=new Ye({});return t.customerName=e.customerName,t.customerPhone=e.customerPhone,t.customerId=e.customerId,t.workerPhone=e.workerPhone,t.workerGender=e.workerGender,t.userGender=e.userGender,t.businessName=e.businessName,t.buisnessId=e.buisnessId,t.bookingId=e.bookingId,t.workerGender=e.workerGender,t.shopIcon=e.shopIcon,t.recurrenceTimeId=e.recurrenceTimeId,t.note=e.note,t.workerRemindersTypes={...e.workerRemindersTypes},t.signOnDeviceCalendar=e.signOnDeviceCalendar,t.userDeleted=e.userDeleted,t.workerNotificationOption=e.workerNotificationOption,t.paymentRequest=e.paymentRequest,t.remindersTypes={...e.remindersTypes},t.isVerifiedPhone=e.isVerifiedPhone,t.workerDeleted=e.workerDeleted,t.finishInvoices=e.finishInvoices,t.adress=e.adress,t.addToClientAt=e.addToClientAt,t.showAdressAlert=e.showAdressAlert,t.showPhoneAlert=e.showPhoneAlert,t.orderingOptions=e.orderingOptions,t.isUserExist=e.isUserExist,t.isMultiRef=e.isMultiRef,t.needCancel=e.needCancel,t.userGender=e.userGender,t.bookingDate=e.bookingDate,t.recurrenceNotificationsLastDate=e.recurrenceNotificationsLastDate,t.cancelDate=e.cancelDate,t.customerId=e.customerId,t.workerPhone=e.workerPhone,t.lastTimeNotifyOnDebt=e.lastTimeNotifyOnDebt,e.debts.forEach((r,i)=>{t.debts.set(i,zt.fromDebt(r))}),t.treatments=new Map,e.treatments.forEach((r,i)=>{const s=_e.fromTreatment(r);s.index=i,t.treatments.set(i,r)}),t.invoices=new Map,e.invoices.forEach((r,i)=>{t.invoices.set(i,$t.fromBookingInvoiceData(r))}),t.clientNote=e.clientNote,t.status=e.status,t.confirmedArrival=e.confirmedArrival,t.createdAt=e.createdAt,t.clientMail=e.clientMail,t.workerName=e.workerName,t.buisnessId=e.buisnessId,t.notificationType=e.notificationType,t.userFcms=new Set(e.userFcms),t.recurreneFatherDate=e.recurreneFatherDate,t.recurrenceRef=e.recurrenceRef,t.transactions=new Map,e.transactions.forEach((r,i)=>{t.transactions.set(i,qt.fromTransaction(r))}),t}static fromJson(e,t){try{const r=new Ye({});if(r.workerGender=Ke[e.workerGender]||z.anonymous,r.customerName=e.customerName||"",r.note=e.note||"",r.bookingId=t,r.signOnDeviceCalendar=e.signOnDeviceCalendar||!1,r.userDeleted=e.userDeleted||!1,r.workerDeleted=e.workerDeleted||!1,r.customerId=e.customerId||e.customerPhone||"",r.workerPhone=e.workerPhone||"",r.customerPhone=e.customerPhone||"",r.recurrenceTimeId=e.recurrenceTimeId,r.workerId=e.workerId||e.workerPhone||"",r.adress=e.adress||"",e.shopIcon!=null&&(r.shopIcon=Pe.fromJson(e.shopIcon)),r.isVerifiedPhone=e.isVerifiedPhone||!1,r.customerId==r.customerPhone&&r.customerId.length==14&&(r.isVerifiedPhone=!0),r.isMultiRef=e.isMultiRef||!1,r.needCancel=e.needCancel||!1,e.lastTimeNotifyOnDebt!=null&&(r.lastTimeNotifyOnDebt=new Date(e.lastTimeNotifyOnDebt)),r.finishInvoices=e.finishInvoices||!1,e.remindersTypes!=null?Object.entries(e.remindersTypes).forEach(([i,s])=>{gt[i]!=null&&r.remindersTypes.set(gt[i],s)}):r.remindersTypes=new Map([me.regular,e.minutesBeforeNotify||60]),e.workerRemindersTypes!=null&&Object.entries(e.workerRemindersTypes).forEach(([i,s])=>{gt[i]!=null&&r.workerRemindersTypes.set(gt[i],s)}),r.clientMail=e.clientMail||"",e.recurrenceNotificationsLastDate!=null&&(r.recurrenceNotificationsLastDate=new Date(e.recurrenceNotificationsLastDate)),r.clientNote=e.clientNote||"",r.recurreneFatherDate=e.recurreneFatherDate,r.recurrenceRef=e.recurrenceRef,e.orderingOptions!=null&&(r.orderingOptions=io[e.orderingOptions]||Oe.app),e.debts!=null&&Object.entries(e.debts).forEach(([i,s])=>{r.debts.set(i,zt.fromJson(s,i))}),e.cancelDate!=null&&(r.cancelDate=new Date(e.cancelDate)),r.wasWaiting=e.wasWaiting||!1,r.isUserExist=e.isUserExist||!0,e.invoices!=null&&Object.entries(e.invoices).forEach(([i,s])=>{r.invoices.set(i,$t.fromJson(s,i,r.workerId))}),e.userGender!=null&&(r.userGender=Ke[e.userGender]||z.anonymous),r.status=ro[e.status.toString()]||Te.approved,r.confirmedArrival=e.confirmedArrival||!1,e.bookingDate!=null&&(r.bookingDate=new Date(e.bookingDate)||new Date(0)),e.treatments!=null){r.treatments=new Map;let i=0;Object.entries(e.treatments).forEach(([s,a])=>{const c=e.treatments[i.toString()];r.treatments.set(i.toString(),_e.fromJson(c,i.toString())),i+=1})}else if(e.treatment!=null){const i=_e.fromJson(e.treatment,"0");r.treatments.set("0",i)}return r.showAdressAlert=e.showAdressAlert||!1,r.showPhoneAlert=e.showPhoneAlert||!1,r.workerName=e.workerName||"",r.businessName=e.businessName||"",r.buisnessId=e.buisnessId||"",e.notificationType!=null?r.notificationType=so[e.notificationType]||Z.push:e.withMessage?r.notificationType=Z.message:r.notificationType=Z.push,e.workerNotificationOption!=null&&(r.workerNotificationOption=cn[e.workerNotificationOption]||ce.PushOrSMS),e.userFcms!=null?e.userFcms.forEach(i=>{r.userFcms.add(i)}):e.deviceFCM!=null&&e.deviceFCM!=""&&(r.userFcms=new Set([e.deviceFCM])),e.createdAt!=null&&(r.createdAt=new Date(e.createdAt)||new Date(0)),e.RE!=null&&(r.recurrenceEvent=lt.fromJson(e.RE,r.bookingDate)),e.RERI!=null&&(r.recurrenceEventRefInfo=lt.fromJson(e.RERI)),r.transactions=new Map,e.transactions!=null&&Object.entries(e.transactions).forEach(([i,s])=>{r.transactions.set(i,qt.fromJson(s,i))}),e.paymentRequest!=null&&(r.paymentRequest=zi.fromJson(e.paymentRequest)),r}catch(r){return se.error(`Error loading booking doc ${t}: ${r}`),new Ye({})}}get treatmentLength(){return Array.from(this.treatments.values()).reduce((e,t)=>t.count+e,0)}get canSendMessage(){return this.isVerifiedPhone||this.orderingOptions===Oe.byWorker}get treatmentsToStringNotDetailed(){return this.treatmentLength===1?this.treatments.values().next().value.name:this.treatments.size===1?`${this.treatments.values().next().value.name}x${this.treatmentLength}`:`${this.treatments.values().next().value.name}+${this.treatmentLength-1}`}get isPassed(){if(this.recurrenceEvent!=null){if(this.recurrenceChildDate!=null)return De(this.recurrenceChildDate,new S({minutes:this.totalMinutes+2}))<new Date;const e=this.recurrenceEvent.endOfTheEvent;return e!==null&&e<jd(new Date)}else return De(this.bookingDate,new S({minutes:this.totalMinutes+2}))<new Date}get totalMinutes(){let e=0;return this.treatments.forEach((t,r)=>{e+=t.totalMinutesForBooking}),e}toJson(){const e={};return e.workerGender=Ut[this.workerGender],e.customerName=this.customerName,e.note=this.note,e.customerId=this.customerId,this.wasWaiting&&(e.wasWaiting=this.wasWaiting),this.workerDeleted&&(e.workerDeleted=this.workerDeleted),this.cancelDate!=null&&(e.cancelDate=this.cancelDate.toString()),e.remindersTypes={},this.clientNote!=""&&(e.clientNote=this.clientNote),this.finishInvoices&&(e.finishInvoices=this.finishInvoices),this.debts.size>0&&(e.debts={},this.debts.forEach((t,r)=>{e.debts[r]=t.toJson()})),this.lastTimeNotifyOnDebt!=null&&(e.lastTimeNotifyOnDebt=this.lastTimeNotifyOnDebt.toString()),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.userDeleted&&(e.userDeleted=this.userDeleted),e.bookingId=this.bookingId,e.needCancel=this.needCancel,e.userGender=Ut[this.userGender],e.businessName=this.businessName,this.signOnDeviceCalendar&&(e.signOnDeviceCalendar=this.signOnDeviceCalendar),this.recurrenceTimeId!=null&&(e.recurrenceTimeId=this.recurrenceTimeId),e.treatments={},this.recurrenceRef!=null&&(e.recurrenceRef=this.recurrenceRef),this.recurreneFatherDate!=null&&(e.recurreneFatherDate=this.recurreneFatherDate),this.treatments.forEach((t,r)=>{e.treatments[r.toString()]=t.toJson()}),e.invoices={},this.invoices.forEach((t,r)=>{e.invoices[r]=t.toJson()}),this.isMultiRef&&(e.isMultiRef=this.isMultiRef),this.isUserExist||(e.isUserExist=this.isUserExist),this.orderingOptions!=Oe.app&&(e.orderingOptions=no[this.orderingOptions]),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.adress!=""&&(e.adress=this.adress),this.clientMail!=""&&(e.clientMail=this.clientMail),e.customerPhone=this.customerPhone,e.status=to[this.status],e.confirmedArrival=this.confirmedArrival,e.bookingDate=this.bookingDate.toISOString(),e.workerId=this.workerId.toString(),e.workerName=this.workerName,e.buisnessId=this.buisnessId,e.shopIcon=this.shopIcon.toJson(),this.recurrenceNotificationsLastDate!=null&&(e.recurrenceNotificationsLastDate=this.recurrenceNotificationsLastDate.toString()),e.notificationType=Ic[this.notificationType],e.workerNotificationOption=Tc[this.workerNotificationOption],e.userFcms=Array.from(this.userFcms),e.createdAt=this.createdAt.toISOString(),e.transactions={},this.transactions.forEach((t,r)=>{e.transactions[r]=t.toJson()}),this.paymentRequest!=null&&(e.paymentRequest=this.paymentRequest.toJson()),e}}class Ci{static _singleton=new Ci;constructor(){}static GI(){return Ci._singleton}errorCode=100;error=L.unknown;details="";addError({code:e,error:t,details:r}){this.error=t!==void 0?t:this.error,this.errorCode=e!==void 0?e:this.errorCode,this.details=r!==void 0?r:this.details}}function cf(n){return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric"}).format(n)}function uf(n){return new Intl.DateTimeFormat("en-US",{day:"2-digit"}).format(n)}function Ai(n){return new Intl.DateTimeFormat("en-US",{month:"2-digit",year:"numeric"}).format(n)}function Je(n){return new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}).format(n)}function lf(n){return new Date(`1970-01-01T${n}`)}function mn(n){return new Date(n)}function n0(n){return new Date(`01-${n}`)}function Qs(n,e){return n===null&&e===null?null:n===null?e:e===null||n<e?n:e}function i0(n){return new Date(n.getFullYear(),n.getMonth(),1)}function ye(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function Xs(n,e){return new Date(n.getFullYear(),n.getMonth()+e,n.getDate(),n.getHours(),n.getMinutes())}function ft(n){const e=n.getDay(),t=n.getDate()-e+(e===0?-6:1);return new Date(n.setDate(t))}class Re{token;joinDate;id;activeNotifications;constructor({token:e="",joinDate:t,id:r="",activeNotifications:i=!0}){this.token=e,this.joinDate=t,this.id=r,this.activeNotifications=i}static fromJson(e,t){const r=new Re({joinDate:new Date(0)});return r.id=t,r.activeNotifications=e.activeNotifications??!0,r.token=e.token??"",r}toJson(){const e={};return this.activeNotifications||(e.activeNotifications=this.activeNotifications),e.token=this.token,e.joinDate=Je(this.joinDate),e}static fromDevice(e){return new Re({joinDate:e.joinDate,id:e.id,activeNotifications:e.activeNotifications,token:e.token})}}const Zs="~.9.~",hf="..",On="_";class jr{id="";businessId="";workerName="";date="";workerId="";timeStr="";treatmentId="";treatmentName="";constructor({workerName:e="",date:t="",workerId:r="",timeStr:i="",treatmentId:s="",treatmentName:a="",businessId:c=""}){this.workerName=e,this.date=t,this.workerId=r,this.timeStr=i,this.treatmentId=s,this.treatmentName=a,this.businessId=c}fixEmptyAttributes(){this.workerName=this.workerName===""?"E":this.workerName,this.date=this.date===""?"E":this.date,this.businessId=this.businessId===""?"E":this.businessId,this.workerId=this.workerId===""?"E":this.workerId}static fromJson(e,t){const r=new jr({});return r.id=t,r.workerName=e.workerName??"",r.date=e.date??"",r.timeStr=e.timeStr??"",r.treatmentId=e.treatmentId??"",r.treatmentName=e.treatmentName??"",r.businessId=e.businessId??"",r.workerId=e.workerId??"",r}get isMulti(){return this.timeStr!==""}static fromTopicStr(e){const t=new jr({}),r=e.split(hf),i=r[0].split(On),s=r[1].split(On);return t.businessId=i[0],t.workerId=i[1].replaceAll(Zs,"+"),t.date=i[2],t.workerName=s[1],t}isEqual(e){return JSON.stringify(e.toJson())===JSON.stringify(this.toJson())}toTopicStr(){this.fixEmptyAttributes();const e=this.workerId.replaceAll("+",Zs);return[this.businessId,e,this.date,this.timeStr,this.treatmentId].join(On).split("").filter(i=>Pc.test(i)).join("")}get dateTime(){const e=mn(this.date),t=this.timeStr===""?new Date(0):lf(this.timeStr);return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes())}toJson(){const e={};return e.businessId=this.businessId,this.workerName!==""&&(e.workerName=this.workerName),this.workerId!==""&&(e.workerId=this.workerId),this.date!==""&&(e.date=this.date),this.timeStr!==""&&(e.timeStr=this.timeStr),this.treatmentName!==""&&(e.treatmentName=this.treatmentName),this.treatmentId!==""&&(e.treatmentId=this.treatmentId),e}toString(){return JSON.stringify(this.toJson())}}const df={1:"PL",2:"MasterCard",3:"Visa",4:"Maestro",5:"Isracard"},ff={PL:"1",MasterCard:"2",Visa:"3",Maestro:"4",Isracard:"5"},mf={1:"Isracard",2:"Visa Cal",3:"Diners",4:"Amex",6:"Leumi Card"},pf={Isracard:"1","Visa Cal":"2",Diners:"3",Amex:"4","Leumi Card":"6"};class lr{brand="";token="";validityMonth="";validityYear="";name="";bankName="";l4Digits="";userId="";attemptsLeft=Fr;cardId="";businessId="";constructor({brand:e="",token:t="",validityMonth:r="",validityYear:i="",name:s="",userId:a="",bankName:c="",l4Digits:o="",cardId:u="",businessId:l="",attemptsLeft:d=Fr}={}){this.brand=e,this.token=t,this.validityMonth=r,this.validityYear=i,this.name=s,this.userId=a,this.bankName=c,this.l4Digits=o,this.cardId=u,this.businessId=l,this.attemptsLeft=d}static fromJson(e,t,r){const i=new lr;return i.cardId=t,i.brand=df[e.brand]||"Card",i.token=e.token||"",i.userId=e.userId||"",i.attemptsLeft=e.attemptsLeft||Fr,i.validityMonth=e.validityMonth||"",i.validityYear=e.validityYear||"",i.businessId=r,i.name=e.name||"",i.bankName=e.bankName||"",i.bankName=mf[e.bankName]||"Bank",i.l4Digits=e.l4Digits||"",i}fromPaymentCard(e){this.brand=e.brand,this.token=e.token,this.userId=e.userId,this.businessId=e.businessId,this.cardId=e.cardId,this.attemptsLeft=e.attemptsLeft,this.validityMonth=e.validityMonth,this.validityYear=e.validityYear,this.name=e.name,this.bankName=e.bankName,this.l4Digits=e.l4Digits}toJson(){const e={};return e.brand=ff[this.brand]||"",e.token=this.token,e.userId=this.userId,e.attemptsLeft=this.attemptsLeft,e.validityMonth=this.validityMonth,e.validityYear=this.validityYear,e.name=this.name,e.bankName=this.bankName,e.bankName=pf[this.bankName]||"",e.l4Digits=this.l4Digits,e}decryptCard(e){return new lr({cardId:this.cardId,brand:this.brand,token:decryptText({encryption:this.token,password:e}),validityMonth:decryptText({encryption:this.validityMonth,password:e}),validityYear:decryptText({encryption:this.validityYear,password:e}),name:this.name,userId:this.userId,bankName:this.bankName,businessId:this.businessId,l4Digits:this.l4Digits})}encryptCard(e){return new lr({cardId:this.cardId,brand:this.brand,token:encryptText({text:this.token,password:e}),validityMonth:encryptText({text:this.validityMonth,password:e}),validityYear:encryptText({text:this.validityYear,password:e}),name:this.name,userId:this.userId,bankName:this.bankName,businessId:this.businessId,l4Digits:this.l4Digits})}isTheSameAs(e){return this.bankName===e.bankName&&this.brand===e.brand&&this.name===e.name&&this.l4Digits===e.l4Digits&&this.userId===e.userId&&this.validityMonth===e.validityMonth&&this.validityYear===e.validityYear}toString(){return JSON.stringify(this,null,"  ")}}var s0={exports:{}};function xf(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fn={exports:{}};const gf={},wf=Object.freeze(Object.defineProperty({__proto__:null,default:gf},Symbol.toStringTag,{value:"Module"})),vf=q0(wf);var js;function V(){return js||(js=1,function(n,e){(function(t,r){n.exports=r()})(W,function(){var t=t||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof W<"u"&&W.crypto&&(s=W.crypto),!s&&typeof xf=="function")try{s=vf}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function m(){}return function(p){var v;return m.prototype=p,v=new m,m.prototype=null,v}}(),o={},u=o.lib={},l=u.Base=function(){return{extend:function(m){var p=c(this);return m&&p.mixIn(m),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var p in m)m.hasOwnProperty(p)&&(this[p]=m[p]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=u.WordArray=l.extend({init:function(m,p){m=this.words=m||[],p!=i?this.sigBytes=p:this.sigBytes=m.length*4},toString:function(m){return(m||g).stringify(this)},concat:function(m){var p=this.words,v=m.words,b=this.sigBytes,k=m.sigBytes;if(this.clamp(),b%4)for(var C=0;C<k;C++){var E=v[C>>>2]>>>24-C%4*8&255;p[b+C>>>2]|=E<<24-(b+C)%4*8}else for(var F=0;F<k;F+=4)p[b+F>>>2]=v[F>>>2];return this.sigBytes+=k,this},clamp:function(){var m=this.words,p=this.sigBytes;m[p>>>2]&=4294967295<<32-p%4*8,m.length=r.ceil(p/4)},clone:function(){var m=l.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var p=[],v=0;v<m;v+=4)p.push(a());return new d.init(p,m)}}),h=o.enc={},g=h.Hex={stringify:function(m){for(var p=m.words,v=m.sigBytes,b=[],k=0;k<v;k++){var C=p[k>>>2]>>>24-k%4*8&255;b.push((C>>>4).toString(16)),b.push((C&15).toString(16))}return b.join("")},parse:function(m){for(var p=m.length,v=[],b=0;b<p;b+=2)v[b>>>3]|=parseInt(m.substr(b,2),16)<<24-b%8*4;return new d.init(v,p/2)}},w=h.Latin1={stringify:function(m){for(var p=m.words,v=m.sigBytes,b=[],k=0;k<v;k++){var C=p[k>>>2]>>>24-k%4*8&255;b.push(String.fromCharCode(C))}return b.join("")},parse:function(m){for(var p=m.length,v=[],b=0;b<p;b++)v[b>>>2]|=(m.charCodeAt(b)&255)<<24-b%4*8;return new d.init(v,p)}},x=h.Utf8={stringify:function(m){try{return decodeURIComponent(escape(w.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return w.parse(unescape(encodeURIComponent(m)))}},f=u.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=x.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var p,v=this._data,b=v.words,k=v.sigBytes,C=this.blockSize,E=C*4,F=k/E;m?F=r.ceil(F):F=r.max((F|0)-this._minBufferSize,0);var D=F*C,A=r.min(D*4,k);if(D){for(var T=0;T<D;T+=C)this._doProcessBlock(b,T);p=b.splice(0,D),v.sigBytes-=A}return new d.init(p,A)},clone:function(){var m=l.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0});u.Hasher=f.extend({cfg:l.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var p=this._doFinalize();return p},blockSize:16,_createHelper:function(m){return function(p,v){return new m.init(v).finalize(p)}},_createHmacHelper:function(m){return function(p,v){return new y.HMAC.init(m,v).finalize(p)}}});var y=o.algo={};return o}(Math);return t})}(Fn)),Fn.exports}var Sn={exports:{}},ea;function pn(){return ea||(ea=1,function(n,e){(function(t,r){n.exports=r(V())})(W,function(t){return function(r){var i=t,s=i.lib,a=s.Base,c=s.WordArray,o=i.x64={};o.Word=a.extend({init:function(u,l){this.high=u,this.low=l}}),o.WordArray=a.extend({init:function(u,l){u=this.words=u||[],l!=r?this.sigBytes=l:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,l=u.length,d=[],h=0;h<l;h++){var g=u[h];d.push(g.high),d.push(g.low)}return c.create(d,this.sigBytes)},clone:function(){for(var u=a.clone.call(this),l=u.words=this.words.slice(0),d=l.length,h=0;h<d;h++)l[h]=l[h].clone();return u}})}(),t})}(Sn)),Sn.exports}var Nn={exports:{}},ta;function yf(){return ta||(ta=1,function(n,e){(function(t,r){n.exports=r(V())})(W,function(t){return function(){if(typeof ArrayBuffer=="function"){var r=t,i=r.lib,s=i.WordArray,a=s.init,c=s.init=function(o){if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),(o instanceof Int8Array||typeof Uint8ClampedArray<"u"&&o instanceof Uint8ClampedArray||o instanceof Int16Array||o instanceof Uint16Array||o instanceof Int32Array||o instanceof Uint32Array||o instanceof Float32Array||o instanceof Float64Array)&&(o=new Uint8Array(o.buffer,o.byteOffset,o.byteLength)),o instanceof Uint8Array){for(var u=o.byteLength,l=[],d=0;d<u;d++)l[d>>>2]|=o[d]<<24-d%4*8;a.call(this,l,u)}else a.apply(this,arguments)};c.prototype=s}}(),t.lib.WordArray})}(Nn)),Nn.exports}var Mn={exports:{}},ra;function Df(){return ra||(ra=1,function(n,e){(function(t,r){n.exports=r(V())})(W,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=r.enc;a.Utf16=a.Utf16BE={stringify:function(o){for(var u=o.words,l=o.sigBytes,d=[],h=0;h<l;h+=2){var g=u[h>>>2]>>>16-h%4*8&65535;d.push(String.fromCharCode(g))}return d.join("")},parse:function(o){for(var u=o.length,l=[],d=0;d<u;d++)l[d>>>1]|=o.charCodeAt(d)<<16-d%2*16;return s.create(l,u*2)}},a.Utf16LE={stringify:function(o){for(var u=o.words,l=o.sigBytes,d=[],h=0;h<l;h+=2){var g=c(u[h>>>2]>>>16-h%4*8&65535);d.push(String.fromCharCode(g))}return d.join("")},parse:function(o){for(var u=o.length,l=[],d=0;d<u;d++)l[d>>>1]|=c(o.charCodeAt(d)<<16-d%2*16);return s.create(l,u*2)}};function c(o){return o<<8&4278255360|o>>>8&16711935}}(),t.enc.Utf16})}(Mn)),Mn.exports}var Rn={exports:{}},na;function Dt(){return na||(na=1,function(n,e){(function(t,r){n.exports=r(V())})(W,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=r.enc;a.Base64={stringify:function(o){var u=o.words,l=o.sigBytes,d=this._map;o.clamp();for(var h=[],g=0;g<l;g+=3)for(var w=u[g>>>2]>>>24-g%4*8&255,x=u[g+1>>>2]>>>24-(g+1)%4*8&255,f=u[g+2>>>2]>>>24-(g+2)%4*8&255,y=w<<16|x<<8|f,m=0;m<4&&g+m*.75<l;m++)h.push(d.charAt(y>>>6*(3-m)&63));var p=d.charAt(64);if(p)for(;h.length%4;)h.push(p);return h.join("")},parse:function(o){var u=o.length,l=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<l.length;h++)d[l.charCodeAt(h)]=h}var g=l.charAt(64);if(g){var w=o.indexOf(g);w!==-1&&(u=w)}return c(o,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function c(o,u,l){for(var d=[],h=0,g=0;g<u;g++)if(g%4){var w=l[o.charCodeAt(g-1)]<<g%4*2,x=l[o.charCodeAt(g)]>>>6-g%4*2,f=w|x;d[h>>>2]|=f<<24-h%4*8,h++}return s.create(d,h)}}(),t.enc.Base64})}(Rn)),Rn.exports}var Ln={exports:{}},ia;function bf(){return ia||(ia=1,function(n,e){(function(t,r){n.exports=r(V())})(W,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=r.enc;a.Base64url={stringify:function(o,u){u===void 0&&(u=!0);var l=o.words,d=o.sigBytes,h=u?this._safe_map:this._map;o.clamp();for(var g=[],w=0;w<d;w+=3)for(var x=l[w>>>2]>>>24-w%4*8&255,f=l[w+1>>>2]>>>24-(w+1)%4*8&255,y=l[w+2>>>2]>>>24-(w+2)%4*8&255,m=x<<16|f<<8|y,p=0;p<4&&w+p*.75<d;p++)g.push(h.charAt(m>>>6*(3-p)&63));var v=h.charAt(64);if(v)for(;g.length%4;)g.push(v);return g.join("")},parse:function(o,u){u===void 0&&(u=!0);var l=o.length,d=u?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var g=0;g<d.length;g++)h[d.charCodeAt(g)]=g}var w=d.charAt(64);if(w){var x=o.indexOf(w);x!==-1&&(l=x)}return c(o,l,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function c(o,u,l){for(var d=[],h=0,g=0;g<u;g++)if(g%4){var w=l[o.charCodeAt(g-1)]<<g%4*2,x=l[o.charCodeAt(g)]>>>6-g%4*2,f=w|x;d[h>>>2]|=f<<24-h%4*8,h++}return s.create(d,h)}}(),t.enc.Base64url})}(Ln)),Ln.exports}var Un={exports:{}},sa;function bt(){return sa||(sa=1,function(n,e){(function(t,r){n.exports=r(V())})(W,function(t){return function(r){var i=t,s=i.lib,a=s.WordArray,c=s.Hasher,o=i.algo,u=[];(function(){for(var x=0;x<64;x++)u[x]=r.abs(r.sin(x+1))*4294967296|0})();var l=o.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(x,f){for(var y=0;y<16;y++){var m=f+y,p=x[m];x[m]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360}var v=this._hash.words,b=x[f+0],k=x[f+1],C=x[f+2],E=x[f+3],F=x[f+4],D=x[f+5],A=x[f+6],T=x[f+7],P=x[f+8],N=x[f+9],R=x[f+10],U=x[f+11],j=x[f+12],G=x[f+13],Q=x[f+14],J=x[f+15],I=v[0],B=v[1],O=v[2],_=v[3];I=d(I,B,O,_,b,7,u[0]),_=d(_,I,B,O,k,12,u[1]),O=d(O,_,I,B,C,17,u[2]),B=d(B,O,_,I,E,22,u[3]),I=d(I,B,O,_,F,7,u[4]),_=d(_,I,B,O,D,12,u[5]),O=d(O,_,I,B,A,17,u[6]),B=d(B,O,_,I,T,22,u[7]),I=d(I,B,O,_,P,7,u[8]),_=d(_,I,B,O,N,12,u[9]),O=d(O,_,I,B,R,17,u[10]),B=d(B,O,_,I,U,22,u[11]),I=d(I,B,O,_,j,7,u[12]),_=d(_,I,B,O,G,12,u[13]),O=d(O,_,I,B,Q,17,u[14]),B=d(B,O,_,I,J,22,u[15]),I=h(I,B,O,_,k,5,u[16]),_=h(_,I,B,O,A,9,u[17]),O=h(O,_,I,B,U,14,u[18]),B=h(B,O,_,I,b,20,u[19]),I=h(I,B,O,_,D,5,u[20]),_=h(_,I,B,O,R,9,u[21]),O=h(O,_,I,B,J,14,u[22]),B=h(B,O,_,I,F,20,u[23]),I=h(I,B,O,_,N,5,u[24]),_=h(_,I,B,O,Q,9,u[25]),O=h(O,_,I,B,E,14,u[26]),B=h(B,O,_,I,P,20,u[27]),I=h(I,B,O,_,G,5,u[28]),_=h(_,I,B,O,C,9,u[29]),O=h(O,_,I,B,T,14,u[30]),B=h(B,O,_,I,j,20,u[31]),I=g(I,B,O,_,D,4,u[32]),_=g(_,I,B,O,P,11,u[33]),O=g(O,_,I,B,U,16,u[34]),B=g(B,O,_,I,Q,23,u[35]),I=g(I,B,O,_,k,4,u[36]),_=g(_,I,B,O,F,11,u[37]),O=g(O,_,I,B,T,16,u[38]),B=g(B,O,_,I,R,23,u[39]),I=g(I,B,O,_,G,4,u[40]),_=g(_,I,B,O,b,11,u[41]),O=g(O,_,I,B,E,16,u[42]),B=g(B,O,_,I,A,23,u[43]),I=g(I,B,O,_,N,4,u[44]),_=g(_,I,B,O,j,11,u[45]),O=g(O,_,I,B,J,16,u[46]),B=g(B,O,_,I,C,23,u[47]),I=w(I,B,O,_,b,6,u[48]),_=w(_,I,B,O,T,10,u[49]),O=w(O,_,I,B,Q,15,u[50]),B=w(B,O,_,I,D,21,u[51]),I=w(I,B,O,_,j,6,u[52]),_=w(_,I,B,O,E,10,u[53]),O=w(O,_,I,B,R,15,u[54]),B=w(B,O,_,I,k,21,u[55]),I=w(I,B,O,_,P,6,u[56]),_=w(_,I,B,O,J,10,u[57]),O=w(O,_,I,B,A,15,u[58]),B=w(B,O,_,I,G,21,u[59]),I=w(I,B,O,_,F,6,u[60]),_=w(_,I,B,O,U,10,u[61]),O=w(O,_,I,B,C,15,u[62]),B=w(B,O,_,I,N,21,u[63]),v[0]=v[0]+I|0,v[1]=v[1]+B|0,v[2]=v[2]+O|0,v[3]=v[3]+_|0},_doFinalize:function(){var x=this._data,f=x.words,y=this._nDataBytes*8,m=x.sigBytes*8;f[m>>>5]|=128<<24-m%32;var p=r.floor(y/4294967296),v=y;f[(m+64>>>9<<4)+15]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,f[(m+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,x.sigBytes=(f.length+1)*4,this._process();for(var b=this._hash,k=b.words,C=0;C<4;C++){var E=k[C];k[C]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}return b},clone:function(){var x=c.clone.call(this);return x._hash=this._hash.clone(),x}});function d(x,f,y,m,p,v,b){var k=x+(f&y|~f&m)+p+b;return(k<<v|k>>>32-v)+f}function h(x,f,y,m,p,v,b){var k=x+(f&m|y&~m)+p+b;return(k<<v|k>>>32-v)+f}function g(x,f,y,m,p,v,b){var k=x+(f^y^m)+p+b;return(k<<v|k>>>32-v)+f}function w(x,f,y,m,p,v,b){var k=x+(y^(f|~m))+p+b;return(k<<v|k>>>32-v)+f}i.MD5=c._createHelper(l),i.HmacMD5=c._createHmacHelper(l)}(Math),t.MD5})}(Un)),Un.exports}var Wn={exports:{}},aa;function a0(){return aa||(aa=1,function(n,e){(function(t,r){n.exports=r(V())})(W,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=i.Hasher,c=r.algo,o=[],u=c.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(l,d){for(var h=this._hash.words,g=h[0],w=h[1],x=h[2],f=h[3],y=h[4],m=0;m<80;m++){if(m<16)o[m]=l[d+m]|0;else{var p=o[m-3]^o[m-8]^o[m-14]^o[m-16];o[m]=p<<1|p>>>31}var v=(g<<5|g>>>27)+y+o[m];m<20?v+=(w&x|~w&f)+1518500249:m<40?v+=(w^x^f)+1859775393:m<60?v+=(w&x|w&f|x&f)-1894007588:v+=(w^x^f)-899497514,y=f,f=x,x=w<<30|w>>>2,w=g,g=v}h[0]=h[0]+g|0,h[1]=h[1]+w|0,h[2]=h[2]+x|0,h[3]=h[3]+f|0,h[4]=h[4]+y|0},_doFinalize:function(){var l=this._data,d=l.words,h=this._nDataBytes*8,g=l.sigBytes*8;return d[g>>>5]|=128<<24-g%32,d[(g+64>>>9<<4)+14]=Math.floor(h/4294967296),d[(g+64>>>9<<4)+15]=h,l.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var l=a.clone.call(this);return l._hash=this._hash.clone(),l}});r.SHA1=a._createHelper(u),r.HmacSHA1=a._createHmacHelper(u)}(),t.SHA1})}(Wn)),Wn.exports}var Hn={exports:{}},oa;function $i(){return oa||(oa=1,function(n,e){(function(t,r){n.exports=r(V())})(W,function(t){return function(r){var i=t,s=i.lib,a=s.WordArray,c=s.Hasher,o=i.algo,u=[],l=[];(function(){function g(y){for(var m=r.sqrt(y),p=2;p<=m;p++)if(!(y%p))return!1;return!0}function w(y){return(y-(y|0))*4294967296|0}for(var x=2,f=0;f<64;)g(x)&&(f<8&&(u[f]=w(r.pow(x,1/2))),l[f]=w(r.pow(x,1/3)),f++),x++})();var d=[],h=o.SHA256=c.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(g,w){for(var x=this._hash.words,f=x[0],y=x[1],m=x[2],p=x[3],v=x[4],b=x[5],k=x[6],C=x[7],E=0;E<64;E++){if(E<16)d[E]=g[w+E]|0;else{var F=d[E-15],D=(F<<25|F>>>7)^(F<<14|F>>>18)^F>>>3,A=d[E-2],T=(A<<15|A>>>17)^(A<<13|A>>>19)^A>>>10;d[E]=D+d[E-7]+T+d[E-16]}var P=v&b^~v&k,N=f&y^f&m^y&m,R=(f<<30|f>>>2)^(f<<19|f>>>13)^(f<<10|f>>>22),U=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),j=C+U+P+l[E]+d[E],G=R+N;C=k,k=b,b=v,v=p+j|0,p=m,m=y,y=f,f=j+G|0}x[0]=x[0]+f|0,x[1]=x[1]+y|0,x[2]=x[2]+m|0,x[3]=x[3]+p|0,x[4]=x[4]+v|0,x[5]=x[5]+b|0,x[6]=x[6]+k|0,x[7]=x[7]+C|0},_doFinalize:function(){var g=this._data,w=g.words,x=this._nDataBytes*8,f=g.sigBytes*8;return w[f>>>5]|=128<<24-f%32,w[(f+64>>>9<<4)+14]=r.floor(x/4294967296),w[(f+64>>>9<<4)+15]=x,g.sigBytes=w.length*4,this._process(),this._hash},clone:function(){var g=c.clone.call(this);return g._hash=this._hash.clone(),g}});i.SHA256=c._createHelper(h),i.HmacSHA256=c._createHmacHelper(h)}(Math),t.SHA256})}(Hn)),Hn.exports}var Vn={exports:{}},ca;function kf(){return ca||(ca=1,function(n,e){(function(t,r,i){n.exports=r(V(),$i())})(W,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=r.algo,c=a.SHA256,o=a.SHA224=c.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=c._doFinalize.call(this);return u.sigBytes-=4,u}});r.SHA224=c._createHelper(o),r.HmacSHA224=c._createHmacHelper(o)}(),t.SHA224})}(Vn)),Vn.exports}var qn={exports:{}},ua;function o0(){return ua||(ua=1,function(n,e){(function(t,r,i){n.exports=r(V(),pn())})(W,function(t){return function(){var r=t,i=r.lib,s=i.Hasher,a=r.x64,c=a.Word,o=a.WordArray,u=r.algo;function l(){return c.create.apply(c,arguments)}var d=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],h=[];(function(){for(var w=0;w<80;w++)h[w]=l()})();var g=u.SHA512=s.extend({_doReset:function(){this._hash=new o.init([new c.init(1779033703,4089235720),new c.init(3144134277,2227873595),new c.init(1013904242,4271175723),new c.init(2773480762,1595750129),new c.init(1359893119,2917565137),new c.init(2600822924,725511199),new c.init(528734635,4215389547),new c.init(1541459225,327033209)])},_doProcessBlock:function(w,x){for(var f=this._hash.words,y=f[0],m=f[1],p=f[2],v=f[3],b=f[4],k=f[5],C=f[6],E=f[7],F=y.high,D=y.low,A=m.high,T=m.low,P=p.high,N=p.low,R=v.high,U=v.low,j=b.high,G=b.low,Q=k.high,J=k.low,I=C.high,B=C.low,O=E.high,_=E.low,ee=F,X=D,de=A,H=T,Kt=P,kt=N,xn=R,Qt=U,Ee=j,ge=G,kr=Q,Xt=J,Cr=I,Zt=B,gn=O,jt=_,Ie=0;Ie<80;Ie++){var be,je,Ar=h[Ie];if(Ie<16)je=Ar.high=w[x+Ie*2]|0,be=Ar.low=w[x+Ie*2+1]|0;else{var ts=h[Ie-15],Ct=ts.high,er=ts.low,u0=(Ct>>>1|er<<31)^(Ct>>>8|er<<24)^Ct>>>7,rs=(er>>>1|Ct<<31)^(er>>>8|Ct<<24)^(er>>>7|Ct<<25),ns=h[Ie-2],At=ns.high,tr=ns.low,l0=(At>>>19|tr<<13)^(At<<3|tr>>>29)^At>>>6,is=(tr>>>19|At<<13)^(tr<<3|At>>>29)^(tr>>>6|At<<26),ss=h[Ie-7],h0=ss.high,d0=ss.low,as=h[Ie-16],f0=as.high,os=as.low;be=rs+d0,je=u0+h0+(be>>>0<rs>>>0?1:0),be=be+is,je=je+l0+(be>>>0<is>>>0?1:0),be=be+os,je=je+f0+(be>>>0<os>>>0?1:0),Ar.high=je,Ar.low=be}var m0=Ee&kr^~Ee&Cr,cs=ge&Xt^~ge&Zt,p0=ee&de^ee&Kt^de&Kt,x0=X&H^X&kt^H&kt,g0=(ee>>>28|X<<4)^(ee<<30|X>>>2)^(ee<<25|X>>>7),us=(X>>>28|ee<<4)^(X<<30|ee>>>2)^(X<<25|ee>>>7),w0=(Ee>>>14|ge<<18)^(Ee>>>18|ge<<14)^(Ee<<23|ge>>>9),v0=(ge>>>14|Ee<<18)^(ge>>>18|Ee<<14)^(ge<<23|Ee>>>9),ls=d[Ie],y0=ls.high,hs=ls.low,we=jt+v0,et=gn+w0+(we>>>0<jt>>>0?1:0),we=we+cs,et=et+m0+(we>>>0<cs>>>0?1:0),we=we+hs,et=et+y0+(we>>>0<hs>>>0?1:0),we=we+be,et=et+je+(we>>>0<be>>>0?1:0),ds=us+x0,D0=g0+p0+(ds>>>0<us>>>0?1:0);gn=Cr,jt=Zt,Cr=kr,Zt=Xt,kr=Ee,Xt=ge,ge=Qt+we|0,Ee=xn+et+(ge>>>0<Qt>>>0?1:0)|0,xn=Kt,Qt=kt,Kt=de,kt=H,de=ee,H=X,X=we+ds|0,ee=et+D0+(X>>>0<we>>>0?1:0)|0}D=y.low=D+X,y.high=F+ee+(D>>>0<X>>>0?1:0),T=m.low=T+H,m.high=A+de+(T>>>0<H>>>0?1:0),N=p.low=N+kt,p.high=P+Kt+(N>>>0<kt>>>0?1:0),U=v.low=U+Qt,v.high=R+xn+(U>>>0<Qt>>>0?1:0),G=b.low=G+ge,b.high=j+Ee+(G>>>0<ge>>>0?1:0),J=k.low=J+Xt,k.high=Q+kr+(J>>>0<Xt>>>0?1:0),B=C.low=B+Zt,C.high=I+Cr+(B>>>0<Zt>>>0?1:0),_=E.low=_+jt,E.high=O+gn+(_>>>0<jt>>>0?1:0)},_doFinalize:function(){var w=this._data,x=w.words,f=this._nDataBytes*8,y=w.sigBytes*8;x[y>>>5]|=128<<24-y%32,x[(y+128>>>10<<5)+30]=Math.floor(f/4294967296),x[(y+128>>>10<<5)+31]=f,w.sigBytes=x.length*4,this._process();var m=this._hash.toX32();return m},clone:function(){var w=s.clone.call(this);return w._hash=this._hash.clone(),w},blockSize:1024/32});r.SHA512=s._createHelper(g),r.HmacSHA512=s._createHmacHelper(g)}(),t.SHA512})}(qn)),qn.exports}var zn={exports:{}},la;function Cf(){return la||(la=1,function(n,e){(function(t,r,i){n.exports=r(V(),pn(),o0())})(W,function(t){return function(){var r=t,i=r.x64,s=i.Word,a=i.WordArray,c=r.algo,o=c.SHA512,u=c.SHA384=o.extend({_doReset:function(){this._hash=new a.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var l=o._doFinalize.call(this);return l.sigBytes-=16,l}});r.SHA384=o._createHelper(u),r.HmacSHA384=o._createHmacHelper(u)}(),t.SHA384})}(zn)),zn.exports}var $n={exports:{}},ha;function Af(){return ha||(ha=1,function(n,e){(function(t,r,i){n.exports=r(V(),pn())})(W,function(t){return function(r){var i=t,s=i.lib,a=s.WordArray,c=s.Hasher,o=i.x64,u=o.Word,l=i.algo,d=[],h=[],g=[];(function(){for(var f=1,y=0,m=0;m<24;m++){d[f+5*y]=(m+1)*(m+2)/2%64;var p=y%5,v=(2*f+3*y)%5;f=p,y=v}for(var f=0;f<5;f++)for(var y=0;y<5;y++)h[f+5*y]=y+(2*f+3*y)%5*5;for(var b=1,k=0;k<24;k++){for(var C=0,E=0,F=0;F<7;F++){if(b&1){var D=(1<<F)-1;D<32?E^=1<<D:C^=1<<D-32}b&128?b=b<<1^113:b<<=1}g[k]=u.create(C,E)}})();var w=[];(function(){for(var f=0;f<25;f++)w[f]=u.create()})();var x=l.SHA3=c.extend({cfg:c.cfg.extend({outputLength:512}),_doReset:function(){for(var f=this._state=[],y=0;y<25;y++)f[y]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(f,y){for(var m=this._state,p=this.blockSize/2,v=0;v<p;v++){var b=f[y+2*v],k=f[y+2*v+1];b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var C=m[v];C.high^=k,C.low^=b}for(var E=0;E<24;E++){for(var F=0;F<5;F++){for(var D=0,A=0,T=0;T<5;T++){var C=m[F+5*T];D^=C.high,A^=C.low}var P=w[F];P.high=D,P.low=A}for(var F=0;F<5;F++)for(var N=w[(F+4)%5],R=w[(F+1)%5],U=R.high,j=R.low,D=N.high^(U<<1|j>>>31),A=N.low^(j<<1|U>>>31),T=0;T<5;T++){var C=m[F+5*T];C.high^=D,C.low^=A}for(var G=1;G<25;G++){var D,A,C=m[G],Q=C.high,J=C.low,I=d[G];I<32?(D=Q<<I|J>>>32-I,A=J<<I|Q>>>32-I):(D=J<<I-32|Q>>>64-I,A=Q<<I-32|J>>>64-I);var B=w[h[G]];B.high=D,B.low=A}var O=w[0],_=m[0];O.high=_.high,O.low=_.low;for(var F=0;F<5;F++)for(var T=0;T<5;T++){var G=F+5*T,C=m[G],ee=w[G],X=w[(F+1)%5+5*T],de=w[(F+2)%5+5*T];C.high=ee.high^~X.high&de.high,C.low=ee.low^~X.low&de.low}var C=m[0],H=g[E];C.high^=H.high,C.low^=H.low}},_doFinalize:function(){var f=this._data,y=f.words;this._nDataBytes*8;var m=f.sigBytes*8,p=this.blockSize*32;y[m>>>5]|=1<<24-m%32,y[(r.ceil((m+1)/p)*p>>>5)-1]|=128,f.sigBytes=y.length*4,this._process();for(var v=this._state,b=this.cfg.outputLength/8,k=b/8,C=[],E=0;E<k;E++){var F=v[E],D=F.high,A=F.low;D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,C.push(A),C.push(D)}return new a.init(C,b)},clone:function(){for(var f=c.clone.call(this),y=f._state=this._state.slice(0),m=0;m<25;m++)y[m]=y[m].clone();return f}});i.SHA3=c._createHelper(x),i.HmacSHA3=c._createHmacHelper(x)}(Math),t.SHA3})}($n)),$n.exports}var Gn={exports:{}},da;function Ef(){return da||(da=1,function(n,e){(function(t,r){n.exports=r(V())})(W,function(t){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=t,s=i.lib,a=s.WordArray,c=s.Hasher,o=i.algo,u=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=a.create([0,1518500249,1859775393,2400959708,2840853838]),w=a.create([1352829926,1548603684,1836072691,2053994217,0]),x=o.RIPEMD160=c.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,C){for(var E=0;E<16;E++){var F=C+E,D=k[F];k[F]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}var A=this._hash.words,T=g.words,P=w.words,N=u.words,R=l.words,U=d.words,j=h.words,G,Q,J,I,B,O,_,ee,X,de;O=G=A[0],_=Q=A[1],ee=J=A[2],X=I=A[3],de=B=A[4];for(var H,E=0;E<80;E+=1)H=G+k[C+N[E]]|0,E<16?H+=f(Q,J,I)+T[0]:E<32?H+=y(Q,J,I)+T[1]:E<48?H+=m(Q,J,I)+T[2]:E<64?H+=p(Q,J,I)+T[3]:H+=v(Q,J,I)+T[4],H=H|0,H=b(H,U[E]),H=H+B|0,G=B,B=I,I=b(J,10),J=Q,Q=H,H=O+k[C+R[E]]|0,E<16?H+=v(_,ee,X)+P[0]:E<32?H+=p(_,ee,X)+P[1]:E<48?H+=m(_,ee,X)+P[2]:E<64?H+=y(_,ee,X)+P[3]:H+=f(_,ee,X)+P[4],H=H|0,H=b(H,j[E]),H=H+de|0,O=de,de=X,X=b(ee,10),ee=_,_=H;H=A[1]+J+X|0,A[1]=A[2]+I+de|0,A[2]=A[3]+B+O|0,A[3]=A[4]+G+_|0,A[4]=A[0]+Q+ee|0,A[0]=H},_doFinalize:function(){var k=this._data,C=k.words,E=this._nDataBytes*8,F=k.sigBytes*8;C[F>>>5]|=128<<24-F%32,C[(F+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,k.sigBytes=(C.length+1)*4,this._process();for(var D=this._hash,A=D.words,T=0;T<5;T++){var P=A[T];A[T]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return D},clone:function(){var k=c.clone.call(this);return k._hash=this._hash.clone(),k}});function f(k,C,E){return k^C^E}function y(k,C,E){return k&C|~k&E}function m(k,C,E){return(k|~C)^E}function p(k,C,E){return k&E|C&~E}function v(k,C,E){return k^(C|~E)}function b(k,C){return k<<C|k>>>32-C}i.RIPEMD160=c._createHelper(x),i.HmacRIPEMD160=c._createHmacHelper(x)}(),t.RIPEMD160})}(Gn)),Gn.exports}var Yn={exports:{}},fa;function Gi(){return fa||(fa=1,function(n,e){(function(t,r){n.exports=r(V())})(W,function(t){(function(){var r=t,i=r.lib,s=i.Base,a=r.enc,c=a.Utf8,o=r.algo;o.HMAC=s.extend({init:function(u,l){u=this._hasher=new u.init,typeof l=="string"&&(l=c.parse(l));var d=u.blockSize,h=d*4;l.sigBytes>h&&(l=u.finalize(l)),l.clamp();for(var g=this._oKey=l.clone(),w=this._iKey=l.clone(),x=g.words,f=w.words,y=0;y<d;y++)x[y]^=1549556828,f[y]^=909522486;g.sigBytes=w.sigBytes=h,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var l=this._hasher,d=l.finalize(u);l.reset();var h=l.finalize(this._oKey.clone().concat(d));return h}})})()})}(Yn)),Yn.exports}var Jn={exports:{}},ma;function If(){return ma||(ma=1,function(n,e){(function(t,r,i){n.exports=r(V(),$i(),Gi())})(W,function(t){return function(){var r=t,i=r.lib,s=i.Base,a=i.WordArray,c=r.algo,o=c.SHA256,u=c.HMAC,l=c.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:o,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,h){for(var g=this.cfg,w=u.create(g.hasher,d),x=a.create(),f=a.create([1]),y=x.words,m=f.words,p=g.keySize,v=g.iterations;y.length<p;){var b=w.update(h).finalize(f);w.reset();for(var k=b.words,C=k.length,E=b,F=1;F<v;F++){E=w.finalize(E),w.reset();for(var D=E.words,A=0;A<C;A++)k[A]^=D[A]}x.concat(b),m[0]++}return x.sigBytes=p*4,x}});r.PBKDF2=function(d,h,g){return l.create(g).compute(d,h)}}(),t.PBKDF2})}(Jn)),Jn.exports}var Kn={exports:{}},pa;function ht(){return pa||(pa=1,function(n,e){(function(t,r,i){n.exports=r(V(),a0(),Gi())})(W,function(t){return function(){var r=t,i=r.lib,s=i.Base,a=i.WordArray,c=r.algo,o=c.MD5,u=c.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:o,iterations:1}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,d){for(var h,g=this.cfg,w=g.hasher.create(),x=a.create(),f=x.words,y=g.keySize,m=g.iterations;f.length<y;){h&&w.update(h),h=w.update(l).finalize(d),w.reset();for(var p=1;p<m;p++)h=w.finalize(h),w.reset();x.concat(h)}return x.sigBytes=y*4,x}});r.EvpKDF=function(l,d,h){return u.create(h).compute(l,d)}}(),t.EvpKDF})}(Kn)),Kn.exports}var Qn={exports:{}},xa;function le(){return xa||(xa=1,function(n,e){(function(t,r,i){n.exports=r(V(),ht())})(W,function(t){t.lib.Cipher||function(r){var i=t,s=i.lib,a=s.Base,c=s.WordArray,o=s.BufferedBlockAlgorithm,u=i.enc;u.Utf8;var l=u.Base64,d=i.algo,h=d.EvpKDF,g=s.Cipher=o.extend({cfg:a.extend(),createEncryptor:function(D,A){return this.create(this._ENC_XFORM_MODE,D,A)},createDecryptor:function(D,A){return this.create(this._DEC_XFORM_MODE,D,A)},init:function(D,A,T){this.cfg=this.cfg.extend(T),this._xformMode=D,this._key=A,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(D){return this._append(D),this._process()},finalize:function(D){D&&this._append(D);var A=this._doFinalize();return A},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function D(A){return typeof A=="string"?F:k}return function(A){return{encrypt:function(T,P,N){return D(P).encrypt(A,T,P,N)},decrypt:function(T,P,N){return D(P).decrypt(A,T,P,N)}}}}()});s.StreamCipher=g.extend({_doFinalize:function(){var D=this._process(!0);return D},blockSize:1});var w=i.mode={},x=s.BlockCipherMode=a.extend({createEncryptor:function(D,A){return this.Encryptor.create(D,A)},createDecryptor:function(D,A){return this.Decryptor.create(D,A)},init:function(D,A){this._cipher=D,this._iv=A}}),f=w.CBC=function(){var D=x.extend();D.Encryptor=D.extend({processBlock:function(T,P){var N=this._cipher,R=N.blockSize;A.call(this,T,P,R),N.encryptBlock(T,P),this._prevBlock=T.slice(P,P+R)}}),D.Decryptor=D.extend({processBlock:function(T,P){var N=this._cipher,R=N.blockSize,U=T.slice(P,P+R);N.decryptBlock(T,P),A.call(this,T,P,R),this._prevBlock=U}});function A(T,P,N){var R,U=this._iv;U?(R=U,this._iv=r):R=this._prevBlock;for(var j=0;j<N;j++)T[P+j]^=R[j]}return D}(),y=i.pad={},m=y.Pkcs7={pad:function(D,A){for(var T=A*4,P=T-D.sigBytes%T,N=P<<24|P<<16|P<<8|P,R=[],U=0;U<P;U+=4)R.push(N);var j=c.create(R,P);D.concat(j)},unpad:function(D){var A=D.words[D.sigBytes-1>>>2]&255;D.sigBytes-=A}};s.BlockCipher=g.extend({cfg:g.cfg.extend({mode:f,padding:m}),reset:function(){var D;g.reset.call(this);var A=this.cfg,T=A.iv,P=A.mode;this._xformMode==this._ENC_XFORM_MODE?D=P.createEncryptor:(D=P.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==D?this._mode.init(this,T&&T.words):(this._mode=D.call(P,this,T&&T.words),this._mode.__creator=D)},_doProcessBlock:function(D,A){this._mode.processBlock(D,A)},_doFinalize:function(){var D,A=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(A.pad(this._data,this.blockSize),D=this._process(!0)):(D=this._process(!0),A.unpad(D)),D},blockSize:128/32});var p=s.CipherParams=a.extend({init:function(D){this.mixIn(D)},toString:function(D){return(D||this.formatter).stringify(this)}}),v=i.format={},b=v.OpenSSL={stringify:function(D){var A,T=D.ciphertext,P=D.salt;return P?A=c.create([1398893684,1701076831]).concat(P).concat(T):A=T,A.toString(l)},parse:function(D){var A,T=l.parse(D),P=T.words;return P[0]==1398893684&&P[1]==1701076831&&(A=c.create(P.slice(2,4)),P.splice(0,4),T.sigBytes-=16),p.create({ciphertext:T,salt:A})}},k=s.SerializableCipher=a.extend({cfg:a.extend({format:b}),encrypt:function(D,A,T,P){P=this.cfg.extend(P);var N=D.createEncryptor(T,P),R=N.finalize(A),U=N.cfg;return p.create({ciphertext:R,key:T,iv:U.iv,algorithm:D,mode:U.mode,padding:U.padding,blockSize:D.blockSize,formatter:P.format})},decrypt:function(D,A,T,P){P=this.cfg.extend(P),A=this._parse(A,P.format);var N=D.createDecryptor(T,P).finalize(A.ciphertext);return N},_parse:function(D,A){return typeof D=="string"?A.parse(D,this):D}}),C=i.kdf={},E=C.OpenSSL={execute:function(D,A,T,P,N){if(P||(P=c.random(64/8)),N)var R=h.create({keySize:A+T,hasher:N}).compute(D,P);else var R=h.create({keySize:A+T}).compute(D,P);var U=c.create(R.words.slice(A),T*4);return R.sigBytes=A*4,p.create({key:R,iv:U,salt:P})}},F=s.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:E}),encrypt:function(D,A,T,P){P=this.cfg.extend(P);var N=P.kdf.execute(T,D.keySize,D.ivSize,P.salt,P.hasher);P.iv=N.iv;var R=k.encrypt.call(this,D,A,N.key,P);return R.mixIn(N),R},decrypt:function(D,A,T,P){P=this.cfg.extend(P),A=this._parse(A,P.format);var N=P.kdf.execute(T,D.keySize,D.ivSize,A.salt,P.hasher);P.iv=N.iv;var R=k.decrypt.call(this,D,A,N.key,P);return R}})}()})}(Qn)),Qn.exports}var Xn={exports:{}},ga;function Tf(){return ga||(ga=1,function(n,e){(function(t,r,i){n.exports=r(V(),le())})(W,function(t){return t.mode.CFB=function(){var r=t.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize;i.call(this,s,a,o,c),this._prevBlock=s.slice(a,a+o)}}),r.Decryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize,u=s.slice(a,a+o);i.call(this,s,a,o,c),this._prevBlock=u}});function i(s,a,c,o){var u,l=this._iv;l?(u=l.slice(0),this._iv=void 0):u=this._prevBlock,o.encryptBlock(u,0);for(var d=0;d<c;d++)s[a+d]^=u[d]}return r}(),t.mode.CFB})}(Xn)),Xn.exports}var Zn={exports:{}},wa;function Pf(){return wa||(wa=1,function(n,e){(function(t,r,i){n.exports=r(V(),le())})(W,function(t){return t.mode.CTR=function(){var r=t.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize,u=this._iv,l=this._counter;u&&(l=this._counter=u.slice(0),this._iv=void 0);var d=l.slice(0);c.encryptBlock(d,0),l[o-1]=l[o-1]+1|0;for(var h=0;h<o;h++)s[a+h]^=d[h]}});return r.Decryptor=i,r}(),t.mode.CTR})}(Zn)),Zn.exports}var jn={exports:{}},va;function _f(){return va||(va=1,function(n,e){(function(t,r,i){n.exports=r(V(),le())})(W,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var r=t.lib.BlockCipherMode.extend();function i(c){if((c>>24&255)===255){var o=c>>16&255,u=c>>8&255,l=c&255;o===255?(o=0,u===255?(u=0,l===255?l=0:++l):++u):++o,c=0,c+=o<<16,c+=u<<8,c+=l}else c+=1<<24;return c}function s(c){return(c[0]=i(c[0]))===0&&(c[1]=i(c[1])),c}var a=r.Encryptor=r.extend({processBlock:function(c,o){var u=this._cipher,l=u.blockSize,d=this._iv,h=this._counter;d&&(h=this._counter=d.slice(0),this._iv=void 0),s(h);var g=h.slice(0);u.encryptBlock(g,0);for(var w=0;w<l;w++)c[o+w]^=g[w]}});return r.Decryptor=a,r}(),t.mode.CTRGladman})}(jn)),jn.exports}var ei={exports:{}},ya;function Bf(){return ya||(ya=1,function(n,e){(function(t,r,i){n.exports=r(V(),le())})(W,function(t){return t.mode.OFB=function(){var r=t.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize,u=this._iv,l=this._keystream;u&&(l=this._keystream=u.slice(0),this._iv=void 0),c.encryptBlock(l,0);for(var d=0;d<o;d++)s[a+d]^=l[d]}});return r.Decryptor=i,r}(),t.mode.OFB})}(ei)),ei.exports}var ti={exports:{}},Da;function Of(){return Da||(Da=1,function(n,e){(function(t,r,i){n.exports=r(V(),le())})(W,function(t){return t.mode.ECB=function(){var r=t.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),t.mode.ECB})}(ti)),ti.exports}var ri={exports:{}},ba;function Ff(){return ba||(ba=1,function(n,e){(function(t,r,i){n.exports=r(V(),le())})(W,function(t){return t.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,a=i*4,c=a-s%a,o=s+c-1;r.clamp(),r.words[o>>>2]|=c<<24-o%4*8,r.sigBytes+=c},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},t.pad.Ansix923})}(ri)),ri.exports}var ni={exports:{}},ka;function Sf(){return ka||(ka=1,function(n,e){(function(t,r,i){n.exports=r(V(),le())})(W,function(t){return t.pad.Iso10126={pad:function(r,i){var s=i*4,a=s-r.sigBytes%s;r.concat(t.lib.WordArray.random(a-1)).concat(t.lib.WordArray.create([a<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},t.pad.Iso10126})}(ni)),ni.exports}var ii={exports:{}},Ca;function Nf(){return Ca||(Ca=1,function(n,e){(function(t,r,i){n.exports=r(V(),le())})(W,function(t){return t.pad.Iso97971={pad:function(r,i){r.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(r,i)},unpad:function(r){t.pad.ZeroPadding.unpad(r),r.sigBytes--}},t.pad.Iso97971})}(ii)),ii.exports}var si={exports:{}},Aa;function Mf(){return Aa||(Aa=1,function(n,e){(function(t,r,i){n.exports=r(V(),le())})(W,function(t){return t.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},t.pad.ZeroPadding})}(si)),si.exports}var ai={exports:{}},Ea;function Rf(){return Ea||(Ea=1,function(n,e){(function(t,r,i){n.exports=r(V(),le())})(W,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(ai)),ai.exports}var oi={exports:{}},Ia;function Lf(){return Ia||(Ia=1,function(n,e){(function(t,r,i){n.exports=r(V(),le())})(W,function(t){return function(r){var i=t,s=i.lib,a=s.CipherParams,c=i.enc,o=c.Hex,u=i.format;u.Hex={stringify:function(l){return l.ciphertext.toString(o)},parse:function(l){var d=o.parse(l);return a.create({ciphertext:d})}}}(),t.format.Hex})}(oi)),oi.exports}var ci={exports:{}},Ta;function Uf(){return Ta||(Ta=1,function(n,e){(function(t,r,i){n.exports=r(V(),Dt(),bt(),ht(),le())})(W,function(t){return function(){var r=t,i=r.lib,s=i.BlockCipher,a=r.algo,c=[],o=[],u=[],l=[],d=[],h=[],g=[],w=[],x=[],f=[];(function(){for(var p=[],v=0;v<256;v++)v<128?p[v]=v<<1:p[v]=v<<1^283;for(var b=0,k=0,v=0;v<256;v++){var C=k^k<<1^k<<2^k<<3^k<<4;C=C>>>8^C&255^99,c[b]=C,o[C]=b;var E=p[b],F=p[E],D=p[F],A=p[C]*257^C*16843008;u[b]=A<<24|A>>>8,l[b]=A<<16|A>>>16,d[b]=A<<8|A>>>24,h[b]=A;var A=D*16843009^F*65537^E*257^b*16843008;g[C]=A<<24|A>>>8,w[C]=A<<16|A>>>16,x[C]=A<<8|A>>>24,f[C]=A,b?(b=E^p[p[p[D^E]]],k^=p[p[k]]):b=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],m=a.AES=s.extend({_doReset:function(){var p;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var v=this._keyPriorReset=this._key,b=v.words,k=v.sigBytes/4,C=this._nRounds=k+6,E=(C+1)*4,F=this._keySchedule=[],D=0;D<E;D++)D<k?F[D]=b[D]:(p=F[D-1],D%k?k>6&&D%k==4&&(p=c[p>>>24]<<24|c[p>>>16&255]<<16|c[p>>>8&255]<<8|c[p&255]):(p=p<<8|p>>>24,p=c[p>>>24]<<24|c[p>>>16&255]<<16|c[p>>>8&255]<<8|c[p&255],p^=y[D/k|0]<<24),F[D]=F[D-k]^p);for(var A=this._invKeySchedule=[],T=0;T<E;T++){var D=E-T;if(T%4)var p=F[D];else var p=F[D-4];T<4||D<=4?A[T]=p:A[T]=g[c[p>>>24]]^w[c[p>>>16&255]]^x[c[p>>>8&255]]^f[c[p&255]]}}},encryptBlock:function(p,v){this._doCryptBlock(p,v,this._keySchedule,u,l,d,h,c)},decryptBlock:function(p,v){var b=p[v+1];p[v+1]=p[v+3],p[v+3]=b,this._doCryptBlock(p,v,this._invKeySchedule,g,w,x,f,o);var b=p[v+1];p[v+1]=p[v+3],p[v+3]=b},_doCryptBlock:function(p,v,b,k,C,E,F,D){for(var A=this._nRounds,T=p[v]^b[0],P=p[v+1]^b[1],N=p[v+2]^b[2],R=p[v+3]^b[3],U=4,j=1;j<A;j++){var G=k[T>>>24]^C[P>>>16&255]^E[N>>>8&255]^F[R&255]^b[U++],Q=k[P>>>24]^C[N>>>16&255]^E[R>>>8&255]^F[T&255]^b[U++],J=k[N>>>24]^C[R>>>16&255]^E[T>>>8&255]^F[P&255]^b[U++],I=k[R>>>24]^C[T>>>16&255]^E[P>>>8&255]^F[N&255]^b[U++];T=G,P=Q,N=J,R=I}var G=(D[T>>>24]<<24|D[P>>>16&255]<<16|D[N>>>8&255]<<8|D[R&255])^b[U++],Q=(D[P>>>24]<<24|D[N>>>16&255]<<16|D[R>>>8&255]<<8|D[T&255])^b[U++],J=(D[N>>>24]<<24|D[R>>>16&255]<<16|D[T>>>8&255]<<8|D[P&255])^b[U++],I=(D[R>>>24]<<24|D[T>>>16&255]<<16|D[P>>>8&255]<<8|D[N&255])^b[U++];p[v]=G,p[v+1]=Q,p[v+2]=J,p[v+3]=I},keySize:256/32});r.AES=s._createHelper(m)}(),t.AES})}(ci)),ci.exports}var ui={exports:{}},Pa;function Wf(){return Pa||(Pa=1,function(n,e){(function(t,r,i){n.exports=r(V(),Dt(),bt(),ht(),le())})(W,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=i.BlockCipher,c=r.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=c.DES=a.extend({_doReset:function(){for(var y=this._key,m=y.words,p=[],v=0;v<56;v++){var b=o[v]-1;p[v]=m[b>>>5]>>>31-b%32&1}for(var k=this._subKeys=[],C=0;C<16;C++){for(var E=k[C]=[],F=l[C],v=0;v<24;v++)E[v/6|0]|=p[(u[v]-1+F)%28]<<31-v%6,E[4+(v/6|0)]|=p[28+(u[v+24]-1+F)%28]<<31-v%6;E[0]=E[0]<<1|E[0]>>>31;for(var v=1;v<7;v++)E[v]=E[v]>>>(v-1)*4+3;E[7]=E[7]<<5|E[7]>>>27}for(var D=this._invSubKeys=[],v=0;v<16;v++)D[v]=k[15-v]},encryptBlock:function(y,m){this._doCryptBlock(y,m,this._subKeys)},decryptBlock:function(y,m){this._doCryptBlock(y,m,this._invSubKeys)},_doCryptBlock:function(y,m,p){this._lBlock=y[m],this._rBlock=y[m+1],w.call(this,4,252645135),w.call(this,16,65535),x.call(this,2,858993459),x.call(this,8,16711935),w.call(this,1,1431655765);for(var v=0;v<16;v++){for(var b=p[v],k=this._lBlock,C=this._rBlock,E=0,F=0;F<8;F++)E|=d[F][((C^b[F])&h[F])>>>0];this._lBlock=C,this._rBlock=k^E}var D=this._lBlock;this._lBlock=this._rBlock,this._rBlock=D,w.call(this,1,1431655765),x.call(this,8,16711935),x.call(this,2,858993459),w.call(this,16,65535),w.call(this,4,252645135),y[m]=this._lBlock,y[m+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function w(y,m){var p=(this._lBlock>>>y^this._rBlock)&m;this._rBlock^=p,this._lBlock^=p<<y}function x(y,m){var p=(this._rBlock>>>y^this._lBlock)&m;this._lBlock^=p,this._rBlock^=p<<y}r.DES=a._createHelper(g);var f=c.TripleDES=a.extend({_doReset:function(){var y=this._key,m=y.words;if(m.length!==2&&m.length!==4&&m.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var p=m.slice(0,2),v=m.length<4?m.slice(0,2):m.slice(2,4),b=m.length<6?m.slice(0,2):m.slice(4,6);this._des1=g.createEncryptor(s.create(p)),this._des2=g.createEncryptor(s.create(v)),this._des3=g.createEncryptor(s.create(b))},encryptBlock:function(y,m){this._des1.encryptBlock(y,m),this._des2.decryptBlock(y,m),this._des3.encryptBlock(y,m)},decryptBlock:function(y,m){this._des3.decryptBlock(y,m),this._des2.encryptBlock(y,m),this._des1.decryptBlock(y,m)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=a._createHelper(f)}(),t.TripleDES})}(ui)),ui.exports}var li={exports:{}},_a;function Hf(){return _a||(_a=1,function(n,e){(function(t,r,i){n.exports=r(V(),Dt(),bt(),ht(),le())})(W,function(t){return function(){var r=t,i=r.lib,s=i.StreamCipher,a=r.algo,c=a.RC4=s.extend({_doReset:function(){for(var l=this._key,d=l.words,h=l.sigBytes,g=this._S=[],w=0;w<256;w++)g[w]=w;for(var w=0,x=0;w<256;w++){var f=w%h,y=d[f>>>2]>>>24-f%4*8&255;x=(x+g[w]+y)%256;var m=g[w];g[w]=g[x],g[x]=m}this._i=this._j=0},_doProcessBlock:function(l,d){l[d]^=o.call(this)},keySize:256/32,ivSize:0});function o(){for(var l=this._S,d=this._i,h=this._j,g=0,w=0;w<4;w++){d=(d+1)%256,h=(h+l[d])%256;var x=l[d];l[d]=l[h],l[h]=x,g|=l[(l[d]+l[h])%256]<<24-w*8}return this._i=d,this._j=h,g}r.RC4=s._createHelper(c);var u=a.RC4Drop=c.extend({cfg:c.cfg.extend({drop:192}),_doReset:function(){c._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)o.call(this)}});r.RC4Drop=s._createHelper(u)}(),t.RC4})}(li)),li.exports}var hi={exports:{}},Ba;function Vf(){return Ba||(Ba=1,function(n,e){(function(t,r,i){n.exports=r(V(),Dt(),bt(),ht(),le())})(W,function(t){return function(){var r=t,i=r.lib,s=i.StreamCipher,a=r.algo,c=[],o=[],u=[],l=a.Rabbit=s.extend({_doReset:function(){for(var h=this._key.words,g=this.cfg.iv,w=0;w<4;w++)h[w]=(h[w]<<8|h[w]>>>24)&16711935|(h[w]<<24|h[w]>>>8)&4278255360;var x=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],f=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var w=0;w<4;w++)d.call(this);for(var w=0;w<8;w++)f[w]^=x[w+4&7];if(g){var y=g.words,m=y[0],p=y[1],v=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,b=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,k=v>>>16|b&4294901760,C=b<<16|v&65535;f[0]^=v,f[1]^=k,f[2]^=b,f[3]^=C,f[4]^=v,f[5]^=k,f[6]^=b,f[7]^=C;for(var w=0;w<4;w++)d.call(this)}},_doProcessBlock:function(h,g){var w=this._X;d.call(this),c[0]=w[0]^w[5]>>>16^w[3]<<16,c[1]=w[2]^w[7]>>>16^w[5]<<16,c[2]=w[4]^w[1]>>>16^w[7]<<16,c[3]=w[6]^w[3]>>>16^w[1]<<16;for(var x=0;x<4;x++)c[x]=(c[x]<<8|c[x]>>>24)&16711935|(c[x]<<24|c[x]>>>8)&4278255360,h[g+x]^=c[x]},blockSize:128/32,ivSize:64/32});function d(){for(var h=this._X,g=this._C,w=0;w<8;w++)o[w]=g[w];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<o[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<o[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<o[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<o[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<o[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<o[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<o[6]>>>0?1:0)|0,this._b=g[7]>>>0<o[7]>>>0?1:0;for(var w=0;w<8;w++){var x=h[w]+g[w],f=x&65535,y=x>>>16,m=((f*f>>>17)+f*y>>>15)+y*y,p=((x&4294901760)*x|0)+((x&65535)*x|0);u[w]=m^p}h[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,h[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,h[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,h[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,h[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,h[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,h[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,h[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.Rabbit=s._createHelper(l)}(),t.Rabbit})}(hi)),hi.exports}var di={exports:{}},Oa;function qf(){return Oa||(Oa=1,function(n,e){(function(t,r,i){n.exports=r(V(),Dt(),bt(),ht(),le())})(W,function(t){return function(){var r=t,i=r.lib,s=i.StreamCipher,a=r.algo,c=[],o=[],u=[],l=a.RabbitLegacy=s.extend({_doReset:function(){var h=this._key.words,g=this.cfg.iv,w=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],x=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var f=0;f<4;f++)d.call(this);for(var f=0;f<8;f++)x[f]^=w[f+4&7];if(g){var y=g.words,m=y[0],p=y[1],v=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,b=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,k=v>>>16|b&4294901760,C=b<<16|v&65535;x[0]^=v,x[1]^=k,x[2]^=b,x[3]^=C,x[4]^=v,x[5]^=k,x[6]^=b,x[7]^=C;for(var f=0;f<4;f++)d.call(this)}},_doProcessBlock:function(h,g){var w=this._X;d.call(this),c[0]=w[0]^w[5]>>>16^w[3]<<16,c[1]=w[2]^w[7]>>>16^w[5]<<16,c[2]=w[4]^w[1]>>>16^w[7]<<16,c[3]=w[6]^w[3]>>>16^w[1]<<16;for(var x=0;x<4;x++)c[x]=(c[x]<<8|c[x]>>>24)&16711935|(c[x]<<24|c[x]>>>8)&4278255360,h[g+x]^=c[x]},blockSize:128/32,ivSize:64/32});function d(){for(var h=this._X,g=this._C,w=0;w<8;w++)o[w]=g[w];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<o[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<o[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<o[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<o[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<o[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<o[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<o[6]>>>0?1:0)|0,this._b=g[7]>>>0<o[7]>>>0?1:0;for(var w=0;w<8;w++){var x=h[w]+g[w],f=x&65535,y=x>>>16,m=((f*f>>>17)+f*y>>>15)+y*y,p=((x&4294901760)*x|0)+((x&65535)*x|0);u[w]=m^p}h[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,h[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,h[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,h[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,h[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,h[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,h[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,h[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.RabbitLegacy=s._createHelper(l)}(),t.RabbitLegacy})}(di)),di.exports}var fi={exports:{}},Fa;function zf(){return Fa||(Fa=1,function(n,e){(function(t,r,i){n.exports=r(V(),Dt(),bt(),ht(),le())})(W,function(t){return function(){var r=t,i=r.lib,s=i.BlockCipher,a=r.algo;const c=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function d(f,y){let m=y>>24&255,p=y>>16&255,v=y>>8&255,b=y&255,k=f.sbox[0][m]+f.sbox[1][p];return k=k^f.sbox[2][v],k=k+f.sbox[3][b],k}function h(f,y,m){let p=y,v=m,b;for(let k=0;k<c;++k)p=p^f.pbox[k],v=d(f,p)^v,b=p,p=v,v=b;return b=p,p=v,v=b,v=v^f.pbox[c],p=p^f.pbox[c+1],{left:p,right:v}}function g(f,y,m){let p=y,v=m,b;for(let k=c+1;k>1;--k)p=p^f.pbox[k],v=d(f,p)^v,b=p,p=v,v=b;return b=p,p=v,v=b,v=v^f.pbox[1],p=p^f.pbox[0],{left:p,right:v}}function w(f,y,m){for(let C=0;C<4;C++){f.sbox[C]=[];for(let E=0;E<256;E++)f.sbox[C][E]=u[C][E]}let p=0;for(let C=0;C<c+2;C++)f.pbox[C]=o[C]^y[p],p++,p>=m&&(p=0);let v=0,b=0,k=0;for(let C=0;C<c+2;C+=2)k=h(f,v,b),v=k.left,b=k.right,f.pbox[C]=v,f.pbox[C+1]=b;for(let C=0;C<4;C++)for(let E=0;E<256;E+=2)k=h(f,v,b),v=k.left,b=k.right,f.sbox[C][E]=v,f.sbox[C][E+1]=b;return!0}var x=a.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var f=this._keyPriorReset=this._key,y=f.words,m=f.sigBytes/4;w(l,y,m)}},encryptBlock:function(f,y){var m=h(l,f[y],f[y+1]);f[y]=m.left,f[y+1]=m.right},decryptBlock:function(f,y){var m=g(l,f[y],f[y+1]);f[y]=m.left,f[y+1]=m.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(x)}(),t.Blowfish})}(fi)),fi.exports}(function(n,e){(function(t,r,i){n.exports=r(V(),pn(),yf(),Df(),Dt(),bf(),bt(),a0(),$i(),kf(),o0(),Cf(),Af(),Ef(),Gi(),If(),ht(),le(),Tf(),Pf(),_f(),Bf(),Of(),Ff(),Sf(),Nf(),Mf(),Rf(),Lf(),Uf(),Wf(),Hf(),Vf(),qf(),zf())})(W,function(t){return t})})(s0);var $f=s0.exports;const Gf=z0($f),{AES:Yf,enc:en,SHA256:c0}=Gf,Jf="16charactersiv!";function Kf(n,e){const t=Qf(e),r=en.Utf8.parse(Jf);return Yf.encrypt(n,t,{iv:r}).toString()}function Qf(n){let e="htr;lmn;rkmnkryemnkrmnbavsdbshtg6437";return e=c0(n+e).toString(en.Hex).substring(0,32),en.Utf8.parse(e)}function Xf({id:n}){if(n.length<7)return"";const e=n.substring(3,6),t=c0(n+e).toString(en.Hex);return t.substring(0,Math.min(10,t.length)).replace(/[/.*]/g,"")}function Yi(n){return Kf(n+pc,mc).replace("/","").replace("*","").replace(".","")}class br{userId="";name="";gender=z.male;phone="";payments={};isExist=!1;fcmTokens;isVerifiedPhone=!1;userDecline=!1;constructor({userId:e="",name:t="",gender:r=z.male,isVerifiedPhone:i=!1,phone:s="",isExist:a=!0,userDecline:c=!1}){this.userId=e,this.name=t,this.gender=r,this.isVerifiedPhone=i,this.phone=s,this.isExist=a,this.userDecline=c}get customerHashPhone(){return Yi(this.phone)}get customerPhoneAsCollection(){return this.phone.replaceAll("-","")}get isPaid(){return Object.keys(this.payments).length>0}static fromJson(e,t){const r=new br({userId:t,name:e.N??"",gender:e.G?Ke[e.G]:z.male,isVerifiedPhone:e.IVP??!1,phone:e.P??"",isExist:e.IE??!0,userDecline:e.UD??!1});return e.PY!=null&&typeof e.PY=="object"&&Object.entries(e.PY).forEach(([i,s])=>{r.payments[i]=s?new Date(s):new Date(0)}),r}toJson(){const e={};return e.N=this.name,this.isVerifiedPhone&&(e.IVP=this.isVerifiedPhone),this.isExist||(e.IE=this.isExist),e.P=this.phone,this.gender!==z.male&&(e.G=z[this.gender]),Object.keys(this.payments).length>0&&(e.PY={},Object.entries(this.payments).forEach(([t,r])=>{e.PY[t]=r.toString()})),this.userDecline&&(e.UD=this.userDecline),e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class Zf{futureBookings={};passedBookings={};recurrence;setMonth(e,t){const r=n0(t),i=i0(new Date);r.getTime()===i.getTime()?(this.passedBookings[t]={},this.futureBookings[t]={}):r.getTime()>i.getTime()?this.futureBookings[t]={}:r.getTime()<i.getTime()&&(this.passedBookings[t]={}),Object.entries(e).forEach(([s,a])=>{const c=Ye.fromJson(a,s);c.cancelDate==null&&(c.isPassed?this.passedBookings[t][s]=c:this.futureBookings[t][s]=c)})}setRecurrence(e){this.recurrence={},Object.entries(e).forEach(([t,r])=>{const i=Ye.fromJson(r,t);i.cancelDate===null&&(this.recurrence[t]=i)})}get all(){const e={};return Object.values(this.futureBookings).forEach(t=>{Object.entries(t).forEach(([r,i])=>{e[i.bookingId]=i})}),Object.values(this.passedBookings).forEach(t=>{Object.entries(t).forEach(([r,i])=>{e[i.bookingId]=i})}),this.recurrence!==void 0&&Object.entries(this.recurrence).forEach(([t,r])=>{e[t]=r}),e}addBooking(e){if(e.recurrenceEvent!==null)this.recurrence??={},this.recurrence[e.bookingId]=e;else{const t=Ai(e.bookingDate);e.isPassed?(this.passedBookings[t]??={},this.passedBookings[t][e.bookingId]=e):(this.futureBookings[t]??={},this.futureBookings[t][e.bookingId]=e)}}deleteBooking(e){if(e.recurrenceEvent!==null)delete this.recurrence?.[e.bookingId];else{const t=Ai(e.bookingDate);delete this.passedBookings[t]?.[e.bookingId],delete this.futureBookings[t]?.[e.bookingId]}}lastBookingForBusiness(e,t,r=!1,i,s){let a=i;return Object.entries(this.futureBookings).forEach(([c,o])=>{Object.entries(o).forEach(([u,l])=>{e!==l.buisnessId||t!==l.workerId||s!==void 0&&s.getTime()===l.bookingDate.getTime()||(a===void 0||l.bookingDate.getTime()>a.getTime())&&(a=l.bookingDate)})}),a}}function jf(n,e){const t=he.GI().business.businessData.messagesCounter>1;switch(e.notifications.notificationOption){case ce.OnlyPush:return Object.keys(n.userFcms).length===0?Z.none:Z.push;case ce.SMSOnly:return!n.canSendMessage||!t?Z.none:Z.message;case ce.WhatAppOnly:return!n.canSendMessage||!t?Z.none:Z.whatsapp;case ce.PushOrSMS:return Object.values(n.userFcms).length>0?Z.push:!n.canSendMessage||!t?Z.none:Z.message;case ce.PushOrWhatsApp:return Object.values(n.userFcms).length>0?Z.push:!n.canSendMessage||!t?Z.none:Z.whatsapp;case ce.SMSOrPush:return n.canSendMessage&&t?Z.message:Object.values(n.userFcms).length>0?Z.push:Z.none;case ce.WhatsAppOrPush:return n.canSendMessage&&t?Z.whatsapp:Object.values(n.userFcms).length>0?Z.push:Z.none;default:return Z.none}}class Ji{customerName="";customerPhone="";isVerifiedPhone=!1;notificationType=Z.none;workerNotificationOption=ce.PushOrSMS;workerRemindersTypes=new Map;customerId="";orderingOptions=Oe.app;remindersTypes=new Map;isUserExist=!0;signOnDeviceCalendar=!1;lastTimeNotifyOnDebt=null;clientMail="";finishInvoices=!1;showAdressAlert=!1;userBookingId="";showPhoneAlert=!1;cancelDate=null;wasWaiting=!1;createdAt=new Date(0);needCancel=!1;userGender=z.anonymous;status=Te.approved;confirmedArrival=!1;userFcms=new Set;clientNote="";invoices=new Map;transactions=new Map;debts=new Map;addToClientAt=!1;userDeleted=!1;constructor(){}copyDataToOrder(e){const{worker:t,needToHoldOn:r,workerAction:i,bookingDate:s,addToCalendar:a,noteText:c=""}=e;this.clientNote=c,r?this.status=Te.waiting:this.status=Te.approved,this.showAdressAlert=t.notifications.showAdressAlert,this.showPhoneAlert=t.notifications.showPhoneAlert,!i&&!r&&s.getTime()-Date.now()<60*60*1e3&&(this.confirmedArrival=!0),this.signOnDeviceCalendar=a,this.workerNotificationOption=t.notifications.notificationOption,this.workerRemindersTypes=new Map(t.notifications.remindersTypes),t.notifications.remindersTypes.forEach((u,l)=>{s.getTime()<Date.now()||l===me.confirmArrival&&this.confirmedArrival||(s.getTime()-u*60*1e3<Date.now()+1e3?(this.remindersTypes.set(l,Math.abs(Math.floor((Date.now()-s.getTime())/1e3/60/2))-Math.abs(Math.floor((Date.now()-s.getTime())/1e3/60/2))%5),this.remindersTypes.get(l)<10&&this.remindersTypes.delete(l)):this.remindersTypes.set(l,u))}),this.orderingOptions=Oe.web,this.isUserExist=!0,this.userFcms=new Set(Ae.GI().user.userPublicData.fcmsTokens),this.isVerifiedPhone=Ae.GI().user.isVerifiedPhone;const o=Ae.GI().user.userPublicData.clientAt;this.addToClientAt=!o.has(he.GI().business.businessId)||!o.get(he.GI().business.businessId).has(t.id),this.createdAt.getTime()===new Date(0).getTime()&&(this.createdAt=new Date),this.userBookingId,this.notificationType=jf(this,t)}get toCustomerData(){return new pr({name:this.customerName,phoneNumber:this.customerPhone,isVerifiedPhone:this.isVerifiedPhone,email:this.clientMail,customerUuid:this.customerId,gender:this.userGender})}get isDepositTransaction(){let e=!1;return this.transactions.forEach((t,r)=>{e=t.type===Wr.deposit}),e}get transactionsTotalPaymentAmount(){let e=0;return this.transactions.forEach((t,r)=>{t.type===Wr.payment&&(e+=t.amount)}),e}get canSendMessage(){return this.isVerifiedPhone||this.orderingOptions===Oe.byWorker}get totalDebtAmount(){let e=0;return this.debts.forEach((t,r)=>{e+=t.amount}),e}get invoicePriceAmount(){return Array.from(this.invoices.values()).reduce((e,t)=>e+t.amount,0)}invoicesCoverPrice(e){const{totalAmount:t}=e;return this.finishInvoices||this.invoices.size>0&&Array.from(this.invoices.values()).reduce((r,i)=>r+i.amount,0)>=t}get transactionsTotalDepositAmount(){let e=0;return this.transactions.forEach((t,r)=>{t.type===Wr.deposit&&(e+=t.amount)}),e}get customerHashPhone(){return Yi(this.customerPhone)}get customerPhoneAsCollection(){return this.customerPhone.replace(/-/g,"")}reminderId(e){return this.userBookingId+"__"+kn[e]}get toPaymentRequestUser(){return new br({name:this.customerName,userId:this.customerId,gender:this.userGender,isExist:this.isUserExist,isVerifiedPhone:this.isVerifiedPhone,phone:this.customerPhone})}get typesOfEvents(){const e=new Map;return this.needCancel&&e.set(Nr.needCancel,1),this.debts.size>0&&e.set(Nr.withDebts,1),this.status===Te.waiting&&e.set(Nr.onHold,1),e}static fromJson(e,t,r){const i=new Ji;return i.customerName=e.customerName||"",i.customerId=e.customerId||"",i.customerPhone=e.customerPhone||i.customerId,i.needCancel=e.needCancel||!1,i.remindersTypes=e.remindersTypes?new Map(Object.entries(e.remindersTypes).map(([s,a])=>[gt[s],a])):new Map([[me.regular,e.minutesBeforeNotify||60]]),i.workerRemindersTypes=e.workerRemindersTypes?new Map(Object.entries(e.workerRemindersTypes).map(([s,a])=>[gt[s],a])):new Map,i.signOnDeviceCalendar=e.signOnDeviceCalendar||!1,i.userDeleted=e.userDeleted||!1,i.isVerifiedPhone=e.isVerifiedPhone||!1,i.clientMail=e.clientMail||"",i.clientNote=e.clientNote||"",i.userBookingId=t,i.orderingOptions=io[e.orderingOptions]||Oe.app,i.debts=e.debts?new Map(Object.entries(e.debts).map(([s,a])=>[s,zt.fromJson(a,s)])):new Map,i.finishInvoices=e.finishInvoices||!1,i.cancelDate=e.cancelDate?new Date(e.cancelDate):null,i.wasWaiting=e.wasWaiting||!1,i.isUserExist=e.isUserExist||!0,i.lastTimeNotifyOnDebt=e.lastTimeNotifyOnDebt?new Date(e.lastTimeNotifyOnDebt):null,i.invoices=e.invoices?new Map(Object.entries(e.invoices).map(([s,a])=>[s,$t.fromJson(a,s,r)])):new Map,i.userGender=Ke[e.userGender]||z.anonymous,i.status=ro[e.status.toString()]||Te.approved,i.confirmedArrival=e.confirmedArrival||!1,i.showAdressAlert=e.showAdressAlert||!1,i.showPhoneAlert=e.showPhoneAlert||!1,i.notificationType=so[e.notificationType]||Z.none,i.workerNotificationOption=cn[e.workerNotificationOption]||ce.PushOrSMS,i.userFcms=e.userFcms?new Set(e.userFcms):e.deviceFCM&&e.deviceFCM!==""?new Set([e.deviceFCM]):new Set,i.createdAt=e.createdAt?new Date(e.createdAt):new Date(0),i.transactions=e.transactions?new Map(Object.entries(e.transactions).map(([s,a])=>[s,qt.fromJson(a,s)])):new Map,i}toJson(){const e={};return e.customerName=this.customerName,e.customerId=this.customerId,this.wasWaiting&&(e.wasWaiting=this.wasWaiting),this.cancelDate&&(e.cancelDate=this.cancelDate.toISOString()),e.remindersTypes={},this.remindersTypes.forEach((t,r)=>{e.remindersTypes[kn[r]]=t}),e.workerRemindersTypes={},this.workerRemindersTypes.forEach((t,r)=>{e.workerRemindersTypes[kn[r]]=t}),this.userDeleted&&(e.userDeleted=this.userDeleted),this.signOnDeviceCalendar&&(e.signOnDeviceCalendar=this.signOnDeviceCalendar),this.clientNote!==""&&(e.clientNote=this.clientNote),this.needCancel&&(e.needCancel=this.needCancel),this.finishInvoices&&(e.finishInvoices=this.finishInvoices),e.userGender=Ut[this.userGender],this.invoices.size>0&&(e.invoices={},this.invoices.forEach((t,r)=>{e.invoices[r]=t.toJson()})),this.debts.size>0&&(e.debts={},this.debts.forEach((t,r)=>{e.debts[r]=t.toJson()})),this.lastTimeNotifyOnDebt&&(e.lastTimeNotifyOnDebt=this.lastTimeNotifyOnDebt.toISOString()),this.isUserExist||(e.isUserExist=this.isUserExist),this.orderingOptions!==Oe.app&&(e.orderingOptions=no[this.orderingOptions]),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.clientMail!==""&&(e.clientMail=this.clientMail),e.customerPhone=this.customerPhone,this.status!==Te.approved&&(e.status=to[this.status]),this.confirmedArrival&&(e.confirmedArrival=this.confirmedArrival),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.userFcms.size>0&&(e.userFcms=Array.from(this.userFcms)),e.createdAt=this.createdAt.toISOString(),this.transactions.size>0&&(e.transactions={},this.transactions.forEach((t,r)=>{e.transactions[r]=t.toJson()})),e}toString(){return JSON.stringify(this,null,"  ")}}class St{freeFromPayments;hashNumber;blocked;constructor({freeFromPayments:e=!1,hashNumber:t="",blocked:r=!1}={}){this.freeFromPayments=e,this.hashNumber=t,this.blocked=r}static fromJson(e,t){return new St({freeFromPayments:e.freeFromPayments,hashNumber:t})}static fromMinimalJson(e,t){return new St({blocked:e.B??!1,freeFromPayments:e.FP,hashNumber:t})}static fromCustomerData(e){return new St({blocked:e.blocked,freeFromPayments:e.freeFromPayments,hashNumber:e.hashNumber})}toJson(){const e={};return e.freeFromPayments=this.freeFromPayments,e.blocked=this.blocked,e}toMinimalJson(){const e={};return e.FP=this.freeFromPayments,e.B=this.blocked,e}toString(){return JSON.stringify(this.toJson(),null,2)}}const em=3;class pr{name="";workerNaming="";phoneNumber="";freeFromPayments=!1;isExapmle=!1;id="";customerUuid="";blocked=!1;isVerifiedPhone=!1;email="";addedManually=!1;gender=z.male;amoutOfBookings=0;firstBookingsDate;userFirstBookingsDate;lastBookingsDate;belongings=new Set;isDeleted=!1;constructor({name:e="",amoutOfBookings:t=0,gender:r=z.male,email:i="",id:s="",freeFromPayments:a=!1,addedManually:c=!1,customerUuid:o="",isVerifiedPhone:u=!1,workerNaming:l="",blocked:d=!1,phoneNumber:h="",firstBookingsDate:g,userFirstBookingsDate:w,lastBookingsDate:x}){this.name=e,this.amoutOfBookings=t,this.gender=r,this.email=i,this.id=s,this.freeFromPayments=a,this.addedManually=c,this.customerUuid=o,this.isVerifiedPhone=u,this.workerNaming=l,this.blocked=d,this.phoneNumber=h,this.firstBookingsDate=g,this.userFirstBookingsDate=w,this.lastBookingsDate=x}static fromJson(e,t){const r=new pr({});return r.name=e.name??"",e.gender!=null&&(r.gender=r.getGenderFromStr(e.gender)),r.isVerifiedPhone=e.isVerifiedPhone??!1,r.freeFromPayments=e.freeFromPayments??!1,r.customerUuid=t,r.phoneNumber=e.phoneNumber??(t.length<20&&t.includes("-")?t:""),e.firstBookingsDate!=""&&e.firstBookingsDate!=null&&(r.firstBookingsDate=new Date(e.firstBookingsDate)),e.userFirstBookingsDate!=""&&e.userFirstBookingsDate!=null&&(r.userFirstBookingsDate=new Date(e.userFirstBookingsDate),(r.firstBookingsDate==null||r.userFirstBookingsDate<r.firstBookingsDate)&&(r.firstBookingsDate=r.userFirstBookingsDate)),e.lastBookingsDate!=null&&(r.lastBookingsDate=new Date(e.lastBookingsDate)),r.workerNaming=e.workerNaming??"",r.amoutOfBookings=e.amoutOfBookings??0,r.blocked=e.blocked??!1,r.email=e.email??"",r.id=e.id??"",r.addedManually=e.AM??!1,r}fromCustomerData(e){return this.name=e.name,this.gender=e.gender,this.isVerifiedPhone=e.isVerifiedPhone,this.phoneNumber=e.phoneNumber,this.belongings=e.belongings,this.email=e.email,this.isDeleted=e.isDeleted,this.blocked=e.blocked,this.id=e.id,this.addedManually=e.addedManually,this.freeFromPayments=e.freeFromPayments,this.customerUuid=e.customerUuid,this.workerNaming=e.workerNaming,this.firstBookingsDate=e.firstBookingsDate,this.lastBookingsDate=e.lastBookingsDate,this.amoutOfBookings=e.amoutOfBookings,this.userFirstBookingsDate=e.userFirstBookingsDate,this}get nameForWorker(){return this.workerNaming==""?this.name:this.workerNaming}get getFirstDate(){return this.firstBookingsDate==null||this.userFirstBookingsDate!=null&&this.userFirstBookingsDate<this.firstBookingsDate?this.userFirstBookingsDate:this.firstBookingsDate}get customerHashPhone(){return Yi(this.phoneNumber)}get customerPhoneAsCollection(){return this.phoneNumber.replaceAll("-","")}isTheSameAs(e,{withId:t=!1}={}){const r=this.toJson();t&&(r.id=e.customerUuid);const i=e.toJson();return t&&(i.id=this.customerUuid),JSON.stringify(i)===JSON.stringify(r)}getType({bookingInMonthForRegularClient:e,worker:t}){return t.id===this.customerUuid?5:this.isDeleted?7:this.amoutOfBookings<=em?2:this.amountOfBookingsInMonth()<e?1:0}getGenderFromStr(e){return e==null||e=="A"?z.anonymous:e=="F"?z.female:z.male}getStrFromGender(e){return{[z.anonymous]:"A",[z.male]:"M",[z.female]:"F"}[e]||"A"}get toMultiBookingUser(){const e=new Ji;return e.customerName=this.name!=""?this.name:this.workerNaming,e.customerPhone=this.phoneNumber,e.customerId=this.customerUuid,e.userGender=this.gender,e}get toPaymentRequestUser(){return new br({userId:this.customerUuid,name:this.nameForWorker,gender:this.gender,isExist:!this.addedManually,isVerifiedPhone:this.isVerifiedPhone,phone:this.phoneNumber})}isMissing(e){return this.lastBookingsDate==null?!1:(new Date().getTime()-this.lastBookingsDate.getTime())/(1e3*3600*24)>e}amountOfBookingsInMonth(){if(this.firstBookingsDate==null)return-1;if(this.lastBookingsDate==null)return 0;const e=this.lastBookingsDate>new Date?new Date:this.lastBookingsDate,t=Math.max((e.getTime()-this.firstBookingsDate.getTime())/(1e3*3600*24),1);return this.amoutOfBookings/t*30}toJson(){const e={};return this.name!==""&&(e.name=this.name),this.gender!==z.male&&(e.gender=this.getStrFromGender(this.gender)),this.phoneNumber!==this.id&&(e.phoneNumber=this.phoneNumber),this.firstBookingsDate!=null&&(e.firstBookingsDate=this.firstBookingsDate.toISOString()),this.userFirstBookingsDate!=null&&(e.userFirstBookingsDate=this.userFirstBookingsDate.toISOString()),this.lastBookingsDate!=null&&(e.lastBookingsDate=this.lastBookingsDate.toISOString()),this.amoutOfBookings!==0&&(e.amoutOfBookings=this.amoutOfBookings),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.freeFromPayments=this.freeFromPayments,this.email!==""&&(e.email=this.email),e.blocked=this.blocked,this.id!==""&&(e.id=this.id),this.addedManually&&(e.AM=this.addedManually),this.workerNaming!==""&&(e.workerNaming=this.workerNaming),e}toMinimalJson(){const e={};return e.N=this.name!==""?this.name:this.workerNaming,e.G=this.getStrFromGender(this.gender),e.P=this.phoneNumber,this.phoneNumber!==this.customerUuid&&(e.CU=this.customerUuid),this.email!==""&&(e.E=this.email),this.id!==""&&(e.ID=this.id),e}merge(e){return!e.addedManually&&this.addedManually&&(this.email=e.email!==""?e.email:this.email,this.name=e.name!==""?e.name:this.name,this.addedManually=!1,this.customerUuid=e.customerUuid),this.workerNaming===""&&(this.workerNaming=e.workerNaming),this.isVerifiedPhone=e.isVerifiedPhone||this.isVerifiedPhone,this.gender=this.gender,this.blocked=e.blocked||this.blocked,this.lastBookingsDate=ef(e.lastBookingsDate,this.lastBookingsDate),this.firstBookingsDate=Qs(e.firstBookingsDate,this.firstBookingsDate),this.userFirstBookingsDate=Qs(e.userFirstBookingsDate,this.userFirstBookingsDate),this.amoutOfBookings+=e.amoutOfBookings,this}fromMinimalJson(e){return this.workerNaming=e.N??"",this.name=e.N??"",e.G!=null&&(this.gender=this.getGenderFromStr(e.gender)),this.addedManually=e.AM??!1,this.phoneNumber=e.P??"",this.customerUuid=e.CU??e.P??"",this.email=e.E??"",this.id=e.ID??"",this}get publicCustomer(){return new St({freeFromPayments:this.freeFromPayments,blocked:this.blocked,hashNumber:Xf({id:this.customerUuid})})}belongingsNames(e){return Array.from(this.belongings).map(t=>e.get(t)?.name??"").join(", ")}get forUpdate(){const e=new pr({});return e.name=this.name,e.gender=this.gender,e.isVerifiedPhone=this.isVerifiedPhone,e.phoneNumber=this.phoneNumber,e.belongings=this.belongings,e.email=this.email,e.isDeleted=this.isDeleted,e.blocked=this.blocked,e.id=this.id,e.addedManually=this.addedManually,e.freeFromPayments=this.freeFromPayments,e.customerUuid=this.customerUuid,e.workerNaming=this.workerNaming,e.firstBookingsDate=null,e.userFirstBookingsDate=null,e.amoutOfBookings=0,e.lastBookingsDate=null,e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class Ki{docId="";path="";constructor(e,t){this.docId=e,this.path=t}toJson(){const e={};return e.docId=this.docId,e.path=this.path,e}static fromJson(e){const t=new Ki("","");return t.docId=e.docId||"",t.path=e.path||"",t}toString(){return JSON.stringify(this,null,2)}}class Qi{bookingCount=0;lastUpdateTime=new Date(0);docId="";constructor({docId:e=""}){this.docId=e}static fromJson(e,t){const r=new Qi({});return e!==void 0&&t!==void 0&&(r.docId=t,r.bookingCount=e.bookingCount??0,r.lastUpdateTime=e.lastUpdateTime?new Date(e.lastUpdateTime):new Date(0)),r}toJson(){const e={};return this.lastUpdateTime.getTime()!==new Date(0).getTime()&&(e.lastUpdateTime=this.lastUpdateTime.toISOString()),this.bookingCount>0&&(e.bookingCount=this.bookingCount),e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class hr{email="";name="";phoneNumber="";id="";devices=new Map;gender=z.anonymous;myBuisnessesIds=[];reminders;clientAt=new Map;hasNotificationPermission=!0;permission=new Map;tempFcm;allowAppNotification=!0;isVerifiedPhone=!1;isVerifiedEmail=!1;invoiceCounter;newWorkerWelcomes=new Set;bookings=new Map;bookingsPreviews=new Map;bookingsDocsToLoad=new Set;localDocsToDelete=new Set;constructor({email:e="",isVerifiedPhone:t=!1,isVerifiedEmail:r=!1,name:i="",phoneNumber:s="",id:a="",gender:c=z.anonymous,devices:o=new Map}){this.email=e,this.isVerifiedPhone=t,this.isVerifiedEmail=r,this.name=i,this.phoneNumber=s,this.id=a,this.gender=c,this.devices=o}static fromJson(e,t){const r=new hr({email:e.email,isVerifiedPhone:e.isVerifiedPhone,isVerifiedEmail:e.isVerifiedEmail,name:e.name,phoneNumber:e.phoneNumber,id:e.id,gender:e.gender});return r.setUserPublicData(e,t),r}get customerData(){return new pr({customerUuid:this.id,name:this.name,email:this.email,isVerifiedPhone:this.isVerifiedPhone,gender:this.gender,phoneNumber:this.phoneNumber})}setUserPublicData(e,t){if(this.permission=new Map,this.myBuisnessesIds=[],this.isVerifiedEmail=e.isVerifiedEmail||!1,this.email=e.email||"",this.allowAppNotification=e.allowAppNotification||!0,this.email=e.email||"",this.name=e.name||"",this.clientAt=new Map,e.clientAt&&Object.entries(e.clientAt).forEach(([r,i])=>{Object.keys(i).length!==0&&(this.clientAt.set(r,new Set),Object.keys(i).forEach(s=>{this.clientAt.set(r,this.clientAt.get(r).add(s))}))}),e.localDocsToDelete&&(this.localDocsToDelete=new Set,e.localDocsToDelete.forEach(r=>{this.localDocsToDelete.add(Ki.fromJson(r))})),this.invoiceCounter=e.invoiceCounter,this.devices=new Map,e.devices&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,i])=>{this.devices.set(r,Re.fromJson(i,r))}):e.currentFcm&&e.currentFcm!==""&&(this.tempFcm=e.currentFcm),this.hasNotificationPermission=e.hasNotificationPermission||!0,e.gender&&(this.gender=Ke[e.gender]||z.anonymous),this.phoneNumber=e.phoneNumber||"",this.id=e.id||e.phoneNumber||"",e.permission&&Object.entries(e.permission).forEach(([r,i])=>{i===2&&this.myBuisnessesIds.push(r),this.permission.set(r,i)}),e.bookings&&(this.bookings=new Map,Object.entries(e.bookings).forEach(([r,i])=>{const s=Ye.fromJson(i,r);s.cancelDate||this.bookings.set(r,s)})),this.bookingsDocsToLoad=new Set,e.bookingsPreviews){const r=new Map;Object.entries(e.bookingsPreviews).forEach(([i,s])=>{r.set(i,Qi.fromJson(s,i))}),r.forEach((i,s)=>{this.bookingsPreviews.get(s)?.lastUpdateTime!==i.lastUpdateTime&&(s===Xa||n0(s)>=i0(new Date)||(t?.bookings.passedBookings?.hasOwnProperty(s)??!1))&&this.bookingsDocsToLoad.add(s)}),this.bookingsPreviews=r}this.id===this.phoneNumber?this.isVerifiedPhone=!0:this.isVerifiedPhone=e.isVerifiedPhone||!1,this.newWorkerWelcomes=new Set,e.newWorkerWelcomes&&Object.keys(e.newWorkerWelcomes).forEach(r=>{this.newWorkerWelcomes.add(r)})}get fcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm)return new Set(this.tempFcm);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}getDevicesByToken(e){const t=[];return Object.values(this.devices).forEach(r=>{r.token===e&&t.push(Re.fromDevice(r))}),t}toJson(){const e={};return this.hasNotificationPermission||(e.hasNotificationPermission=this.hasNotificationPermission),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.isVerifiedEmail&&(e.isVerifiedEmail=this.isVerifiedEmail),this.email!==""&&(e.email=this.email),Object.keys(this.bookingsPreviews).length>0&&(e.bookingsPreviews={},Object.entries(this.bookingsPreviews).forEach(([t,r])=>{e.bookingsPreviews[t]=r.toJson()})),this.allowAppNotification||(e.allowAppNotification=this.allowAppNotification),e.permission={},Object.entries(this.permission).forEach(([t,r])=>{e.permission[t]=r}),this.localDocsToDelete.size>0&&(e.localDocsToDelete=[],this.localDocsToDelete.forEach(t=>{e.localDocsToDelete.push(t.toJson())})),e.email=this.email,e.name=this.name,e.devices={},this.devices.forEach((t,r)=>{e.devices[r]=t.toJson()}),e.clientAt={},this.clientAt.forEach((t,r)=>{e.clientAt[r]={},t.forEach(i=>{e.clientAt[r][i]=""})}),e.gender=Ut[this.gender],e.phoneNumber=this.phoneNumber,e.id=this.id,this.newWorkerWelcomes.size>0&&(e.newWorkerWelcomes={},this.newWorkerWelcomes.forEach(t=>{e.newWorkerWelcomes[t]=""})),e}}class Xi{businessId="";date;productId="";constructor(e,t,r){this.businessId=e,this.date=t,this.productId=r}static fromJson(e,t){const r=new Xi(t,null,"");return r.businessId=e.businessId||"",e.date instanceof ot&&(r.date=e.date),r}toJson(){const e={};return e.businessId=this.businessId,this.date!==null&&this.date!==void 0&&(e.date=this.date),e}}class tn{productsIds={};pendingProductsIds={};id="";revenueCatId="";limitOfBuisnesses=1;preferdTipPercentage=0;cardPaymentsPass="";lastTimeUpdatePhone=new Date(0);lastTimeUpdateEmail=new Date(0);authProviders={};businessesInfo={};storyLikes=[];paymentCards={};lastVisitedBuisnesses=[];lastVisitedBuisnessesRemoved=[];lastCleanDate=ot.fromDate(new Date);businessTopics=new Set;waitingListTopics={};tempFcm;termsApprovals={};seenUpdates={};createdAt=new Date;userPublicData=new hr({});name="";isVerifiedPhone=!1;phoneNumber="";gender=z.anonymous;lastTimeConnect=new Date;userPublicDataListener;connectedGoogleEmail="";currentMonthInvoices;currentMonthPaymentRequest;currentMonthPayments;existInvoicesDocs=new Set;existPaymentsDocs=new Set;existPaymentRequestsDocs=new Set;invoices={};devices={};bookings=new Zf;hasOldNotification=!1;constructor({name:e="",phoneNumber:t="",id:r="",productsIds:i={},myBuisnessesIds:s=[],revenueCatId:a="",limitOfBuisnesses:c=1,gender:o=z.anonymous,lastVisitedBuisnesses:u=[],lastVisitedBuisnessesRemoved:l=[],paymentCards:d={},isVerifiedPhone:h=!1,isVerifiedEmail:g=!1,email:w="",lastCleanDate:x=ot.fromDate(new Date),createdAt:f=new Date}){this.userPublicData=new hr({email:w,isVerifiedEmail:g,isVerifiedPhone:h,name:e,phoneNumber:t,id:r,gender:o}),this.name=e,this.phoneNumber=t,this.id=r,this.productsIds=i,this.revenueCatId=a,this.limitOfBuisnesses=c,this.gender=o,this.lastVisitedBuisnesses=u,this.lastVisitedBuisnessesRemoved=l,this.paymentCards=d,this.isVerifiedPhone=h,this.cardPaymentsPass="",this.lastCleanDate=x,this.createdAt=f}get toPaymentRequestUser(){return new br({userId:this.id,name:this.name,gender:this.gender,isVerifiedPhone:this.isVerifiedPhone,isExist:!0,phone:this.phoneNumber,userDecline:!1})}get fcmsTokens(){if(!this.userPublicData.allowAppNotification)return new Set;if(this.tempFcm)return new Set([this.tempFcm]);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}getDeviceByToken(e){let t;return Object.values(this.devices).forEach(r=>{r.token===e&&(t=Re.fromDevice(r))}),t}static fromUserDocJson(e){const t=new tn({name:e.name,phoneNumber:e.phoneNumber,id:e.id,productsIds:{},myBuisnessesIds:[],revenueCatId:e.revenueCatId,limitOfBuisnesses:e.limitOfBuisnesses,gender:Ke[e.gender],lastVisitedBuisnesses:e.lastVisitedBuisnesses,lastVisitedBuisnessesRemoved:e.lastVisitedBuisnessesRemoved,paymentCards:{},isVerifiedPhone:e.isVerifiedPhone,isVerifiedEmail:!1,email:"",lastCleanDate:e.lastCleanDate,createdAt:new Date(e.createdAt)});return e.devices&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,i])=>{t.devices[r]=Re.fromJson(i,r)}):e.currentFcm&&e.currentFcm!==""&&(t.tempFcm=e.currentFcm),e.termsApprovals&&Object.entries(e.termsApprovals).forEach(([r,i])=>{t.termsApprovals[r]=new Date(i)||new Date(0)}),t.seenUpdates={},e.seenUpdates&&Object.entries(e.seenUpdates).forEach(([r,i])=>{t.seenUpdates[r]=new Set(i)}),t.phoneNumber=e.phoneNumber||"0",t.id=e.id||e.phoneNumber,t.preferdTipPercentage=0,e.preferdTipPercentage&&(t.preferdTipPercentage=Number.isInteger(e.preferdTipPercentage)?e.preferdTipPercentage:Math.floor(e.preferdTipPercentage)),t.cardPaymentsPass=e.cardPaymentsPass||"",e.storyLikes&&e.storyLikes.forEach(r=>t.storyLikes.push(r)),e.lastTimeUpdatePhone&&(t.lastTimeUpdatePhone=new Date(e.lastTimeUpdatePhone)||new Date(0)),e.lastTimeUpdateEmail&&(t.lastTimeUpdateEmail=new Date(e.lastTimeUpdateEmail)||new Date(0)),t.productsIds={},e.productsIds&&Object.entries(e.productsIds).forEach(([r,i])=>{t.productsIds[r]=Xi.fromJson(i,r)}),e.pendingProductsIds&&Object.entries(e.pendingProductsIds).forEach(([r,i])=>{t.pendingProductsIds[r]=i}),t.revenueCatId=e.revenueCatId||"",t.lastCleanDate=e.lastCleanDate,e.lastVisitedBuisnesses.forEach(r=>t.lastVisitedBuisnesses.push(r)),e.lastVisitedBuisnessesRemoved&&e.lastVisitedBuisnessesRemoved.forEach(r=>t.lastVisitedBuisnessesRemoved.push(r)),t.businessesInfo={},e.businessesInfo&&Object.entries(e.businessesInfo).forEach(([r,i])=>{t.businessesInfo[r]=ur.fromJson(i,r)}),e.businessTopics&&e.businessTopics.forEach(r=>{t.businessTopics.add(r)}),e.waitingListTopics&&(t.waitingListTopics={},Object.entries(e.waitingListTopics).forEach(([r,i])=>{const s=jr.fromJson(i,r);s.date===""?t.businessTopics.add(r):t.waitingListTopics[r]=s})),t.paymentCards={},e.paymentCards&&Object.entries(e.paymentCards).forEach(([r,i])=>{t.paymentCards[r]={},Object.entries(i).forEach(([s,a])=>{t.paymentCards[r][s]=lr.fromJson(a,s,r)})}),t.createdAt=new Date(e.createdAt),t.limitOfBuisnesses=e.limitOfBuisnesses||1,e.authProviders?Object.entries(e.authProviders).forEach(([r,i])=>{if(Js[r]){const s=Js[r];t.authProviders[s]=new Date(i)||new Date(2023)}}):t.authProviders={[t0.Phone]:t.createdAt},t.id===t.phoneNumber?t.isVerifiedPhone=!0:t.isVerifiedPhone=e.isVerifiedPhone||!1,e.lastTimeConnect&&(t.lastTimeConnect=new Date(e.lastTimeConnect)||new Date),t.userPublicData=new hr({isVerifiedPhone:t.isVerifiedPhone,phoneNumber:t.phoneNumber}),t}setUserPublicData(e){this.name=e.name||"",e.devices&&typeof e.devices=="object"&&Object.entries(e.devices).forEach(([t,r])=>{this.devices[t]=Re.fromJson(r,t)}),this.gender=Ke[e.gender],this.phoneNumber=e.phoneNumber,this.id=e.id||e.phoneNumber,this.userPublicData.setUserPublicData(e,this)}firstEnterance(e){return!new Set([...this.lastVisitedBuisnesses,...this.lastVisitedBuisnessesRemoved]).has(e)}toUserDocJson(){const e={};return e.name=this.name,e.devices={},Object.entries(this.devices).forEach(([t,r])=>{e.devices[t]=r.toJson()}),this.lastTimeUpdateEmail.getTime()!==new Date(0).getTime()&&(e.lastTimeUpdateEmail=this.lastTimeUpdateEmail.toISOString()),this.lastTimeUpdatePhone.getTime()!==new Date(0).getTime()&&(e.lastTimeUpdatePhone=this.lastTimeUpdatePhone.toISOString()),e.gender=Ut[this.gender],e.phoneNumber=this.phoneNumber,e.id=this.id,Object.keys(this.termsApprovals).length>0&&(e.termsApprovals={},Object.entries(this.termsApprovals).forEach(([t,r])=>{e.termsApprovals[t]=r.toISOString()})),Object.keys(this.seenUpdates).length>0&&(e.seenUpdates={},Object.entries(this.seenUpdates).forEach(([t,r])=>{e.seenUpdates[t]=Array.from(r)})),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.preferdTipPercentage=this.preferdTipPercentage,e.revenueCatId=this.revenueCatId,Object.keys(this.productsIds).length>0&&(e.productsIds={},Object.entries(this.productsIds).forEach(([t,r])=>{e.productsIds[t]=r.toJson()})),e.pendingProductsIds=this.pendingProductsIds,e.lastCleanDate=this.lastCleanDate,e.limitOfBuisnesses=this.limitOfBuisnesses,e.lastVisitedBuisnesses=this.lastVisitedBuisnesses,e.lastVisitedBuisnessesRemoved=this.lastVisitedBuisnessesRemoved,e.businessesInfo={},this.cardPaymentsPass!==""&&(e.cardPaymentsPass=this.cardPaymentsPass),Object.entries(this.businessesInfo).forEach(([t,r])=>{e.businessesInfo[t]=r.toJson()}),e.storyLikes=this.storyLikes,e.waitingListTopics={},Object.entries(this.waitingListTopics).forEach(([t,r])=>{e.waitingListTopics[t]=r.toJson()}),e.businessTopics=Array.from(this.businessTopics),e.authProviders={},Object.entries(this.authProviders).forEach(([t,r])=>{e.authProviders[t]=r.toISOString()}),e.paymentCards={},Object.entries(this.paymentCards).forEach(([t,r])=>{e.paymentCards[t]={},Object.entries(r).forEach(([i,s])=>{e.paymentCards[t][i]=s.toJson()})}),e.createdAt=this.createdAt.toISOString(),e}get developerId(){return this.id.replace("+","")}toString(){return JSON.stringify(this.toUserDocJson())+JSON.stringify(this.userPublicData.toJson())}}async function tm(){if(ct.currentBusinesssId!==""){let i=0;for(;he.GI().workers.isEmpty&&i<10;)i++,await new Promise(s=>setTimeout(s,100))}const n={},e=Ae.GI().user,t=new Map,r=e.bookings.recurrence||{};for(const i of Object.values(e.bookings.futureBookings))for(const[s,a]of Object.entries(i))t.set(s,a);for(const[i,s]of Object.entries(r)){if(s.buisnessId!==he.GI().business.businessId||s.status!==Te.approved||s.recurrenceEvent==null)continue;const a=he.GI().workers[s.workerId];if(a==null)continue;const c=a.notifications.remindersTypes.size===0?0:Math.max(...Object.values(a.notifications.remindersTypes));let o=new Date(new Date().getFullYear(),new Date().getMonth(),new Date().getDay(),s.bookingDate.getHours(),s.bookingDate.getMinutes());for(;o<De(new Date,new S({minutes:c}));){if(o<new Date){o=new Date(o.getTime()+24*60*60*1e3);continue}if(!s.recurrenceEvent.isAccureInDate({date:o})){o=new Date(o.getTime()+24*60*60*1e3);continue}const u=Ye.fromBooking(s);u.bookingDate=o;let l=!1;Tr(o,As)<new Date&&(l=!0,n[me.regular]??=[],n[me.regular].push(u));for(const[d,h]of s.remindersTypes)me.regular===d&&l||a.notifications.remindersTypes.get(d)!=null&&(Tr(o,new S({minutes:a.notifications.remindersTypes.get(d)}))<new Date||(n[d]||=[],n[d].push(u)));o=De(o,new S({days:1}))}}for(const[i,s]of t){if(s.buisnessId!==he.GI().business.businessId||s.status!==Te.approved)continue;const a=he.GI().workers[s.workerId];if(a==null||s.bookingDate<new Date)continue;let c=!1;Tr(s.bookingDate,As)<new Date&&(c=!0,n[me.regular]||=[],n[me.regular].push(s));for(const[o,u]of s.remindersTypes)a.notifications.remindersTypes.get(o)!=null&&(me.regular===o&&c||Tr(s.bookingDate,new S({minutes:a.notifications.remindersTypes.get(o)}))>=new Date)}return n}class Ae{static instance;constructor(){}static GI(){return Ae.instance||(Ae.instance=new Ae),Ae.instance}user=new tn({});verificationRepo=new Qd;userRepo=new Sl;userDoc;get getPermission(){return 0}isDeveloper(){return this.isConnected?ct.developers.hasOwnProperty(this.user.id.replace("+","")):!1}get isConnected(){return this.verificationRepo.isLoggedIn}get userId(){try{return this.verificationRepo.userId}catch{return""}}async setupUser({newUserId:e="",logoutIfDosentExist:t=!1}){try{return se.info(`The user id is -> ${e}`),e.length<5?(await this.verificationRepo.logout(),!0):(this.userDoc===void 0&&(this.userDoc=await this.userRepo.getDocRepo({path:Vr,docId:e})),!t&&(this.userDoc==null||!this.userDoc.exists())?(this.userDoc=void 0,!0):(this.user=tn.fromUserDocJson(this.userDoc?.data()),this.startPublicDataListening(),!0))}catch(r){return this.userDoc=void 0,r instanceof Error&&(se.error(`Error while setting up the user --> ${r}`),K.GI().addError({details:r.toString()})),!1}}async startPublicDataListening(){this.isConnected&&(this.user.userPublicDataListener=this.userRepo.docListenerRepo({path:`${Vr}/${this.user.id}/${Br}`,docId:Or,onChanged:async e=>{try{e.exists()&&(this.user.setUserPublicData(e.data()),console.log(`bookings to load ->  ${this.user.userPublicData.bookingsDocsToLoad}`),await this.loadBookingsDocs(this.user.userPublicData.bookingsDocsToLoad),console.log("Getting new user data from database"),this.user.userPublicData.reminders={},ct.currentBusinesssId!==""&&(this.user.userPublicData.reminders=await tm()),console.log(this.user))}catch(t){console.error(`Error in startPublicDataListening: ${t}`)}}}))}async loadBookingsDocs(e){const t=[];e.forEach(r=>{t.push(this.loadBookingDoc(r))}),await Promise.all(t)}async loadBookingDoc(e){try{const t=await this.userRepo.getDocRepo({path:dr.GI().userBookingsPathByUser(this.user.id),docId:e});e===Xa?this.user.bookings.setRecurrence(t?.data()||{}):this.user.bookings.setMonth(t?.data()||{},e)}catch(t){se.error(`Error loading booking doc ${e}: ${t}`)}}}function ar(n,e=-1){let t="",r="",i="",s="",a="",c="",o=n.days;Math.floor(o/30)>0&&(Math.floor(o/30)===1&&(c=q("month")),Math.floor(o/30)===2&&(c=q("twoMonths")),Math.floor(o/30)>2&&(c=`${Math.floor(o/30)} `+q("months"))),o-=Math.floor(o/30)*30,Math.floor(o/7)>0&&(Math.floor(o/7)===1&&(a=q("week")),Math.floor(o/7)===2&&(a=q("twoWeeks")),Math.floor(o/7)>2&&(a=`${Math.floor(o/7)} `+q("weeks"))),o-=Math.floor(o/7)*7,o===1&&(s=q("day")),o===2&&(s=q("twoDays")),o>2&&(s=`${o} `+q("days"));let u=n.hours-n.days*24;u===1&&(t=q("hour")),u===2&&(t=q("twoHours")),u>2&&(t=`${u}`+q("hoursChar"));let l=n.minutes-n.hours*60;r=l>0?`${l}`+q("minutesChar"):"";let d=n.seconds-n.minutes*60;d===1&&(i=q("second",!1)),d>1&&(i=`${d} `+q("seconds"));let h="";return n.days===365?h=q("year"):n.days%365===0&&n.days>365?h=(n.days/365).toFixed(0)+" "+q("years"):a===""&&c!==""&&s===""?h=c:a!==""&&c===""&&s===""?h=a:a!==""&&c!==""&&s===""?h=c+" "+q("and")+a:a!==""&&c===""&&s!==""?h=a+" "+q("and")+s:a===""&&c!==""&&s!==""?h=c+" "+q("and")+s:a!==""&&c!==""&&s!==""?h=c+" ,"+a+" "+q("and")+s:r===""&&t===""&&s!==""?h=s:r!==""&&t===""&&s===""?h=r:r===""&&t!==""&&s===""?h=t:r!==""&&t!==""&&s===""?h=t+" "+q("and")+r:r!==""&&t===""&&s!==""?h=s+" "+q("and")+r:r===""&&t!==""&&s!==""?h=s+" "+q("and")+t:r!==""&&t!==""&&s!==""?h=s+" ,"+t+" "+q("and")+r:i!==""&&(h=i),h.length===0?"":e===-1||e>h.length?h:h.slice(0,e)+".."+h.slice(e)}function rm(n){const e=Ae.GI().user.gender;return e===z.male||e===z.anonymous||Object.keys(Es).forEach(r=>{n=n.replaceAll(r,Es[r])}),n}function q(n,e=!0){const t=ApplicationLocalizations.translate(n);return LanguageHelper().currentLaguageCode==="he"&&e?rm(t):t}class Zi{times={};duringPaymentsTimes={};listener;lastBookingTimeDate;constructor(){}static fromJson(e){const t=new Zi;return t.setData(e),t}setData(e,t=!0){this.times={},e.eventsTimes!==null&&Object.entries(e.eventsTimes).forEach(([r,i])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&i instanceof Object&&Object.keys(i).length>0&&(this.times[r]={},Object.entries(i).forEach(([c,o])=>{this.times[r][c]=MultiBookingTime.fromJson(o)}))}),e.eventsTimeDuringPayment!==null&&t&&Object.entries(e.eventsTimeDuringPayment).forEach(([r,i])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.entries(i).forEach(([c,o])=>{const u=MultiBookingTime.fromJson(o);if(u.expiredDate!==null&&u.expiredDate.getTime()>Date.now()){if(this.times[r]??={},this.times[r][c]===null){const l=MultiBookingTime.fromMultiBookingTime(u);l.expiredDate=void 0,this.times[r][c]=l}else this.times[r][c].currentParticipants+=u.currentParticipants;s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s),this.duringPaymentsTimes[r]??={},this.duringPaymentsTimes[r][c]=u}})})}toJson(){const e={};return e.eventsTimes={},Object.entries(this.times).forEach(([t,r])=>{e.eventsTimes[t]={},Object.entries(r).forEach(([i,s])=>{e.eventsTimes[t][i]=s.toJson()})}),e}}class Nt{showAdressAlert=!1;showAdressMessage=!1;showPhoneAlert=!1;showPhoneMessage=!1;recurrenceNotificationsLastDate;notifyOnPayments=!0;notifyOnWaitingListEvents=!0;notifyAboutCancelNearDeadline=!0;notifyOnClientConfirmArrival=!0;notifyAboutOrderNearDeadline=!0;notificationOption=ce.PushOrSMS;notifyWhenGettingBooking=!0;remindersTypes=new Map;constructor(){}static fromJson(e){const t=new Nt;if(t.notifyOnWaitingListEvents=e.notifyOnWaitingListEvents??!0,e.notificationOption!=null&&(t.notificationOption=cn[e.notificationOption]??ce.PushOrSMS),t.recurrenceNotificationsLastDate=e.recurrenceNotificationsLastDate?new Date(e.recurrenceNotificationsLastDate):void 0,t.remindersTypes=new Map,e.remindersTypes!=null)for(const[r,i]of Object.entries(e.remindersTypes)){const s=gt[r];s!=null&&t.remindersTypes.set(s,i)}else t.remindersTypes.set(me.regular,e.minutesBeforeNotify??60);return t.notifyOnClientConfirmArrival=e.notifyOnClientConfirmArrival??!0,t.showAdressAlert=e.showAdressAlert??!1,t.showAdressMessage=e.showAdressMessage??!1,t.showPhoneAlert=e.showPhoneAlert??!1,t.showPhoneMessage=e.showPhoneMessage??!1,t.notifyOnPayments=e.notifyOnPayments??!0,t.notifyAboutCancelNearDeadline=e.notifyAboutCancelNearDeadline??!0,t.notifyAboutOrderNearDeadline=e.notifyAboutOrderNearDeadline??!0,t.notifyWhenGettingBooking=e.notifyWhenGettingBooking??!0,t}isEqual(e){return JSON.stringify(e.toJson())===JSON.stringify(this.toJson())}static fromWorkerNotificatiosSettings(e){return Nt.fromJson(e.toJson())}toJson(){const e={};return this.notifyOnWaitingListEvents||(e.notifyOnWaitingListEvents=this.notifyOnWaitingListEvents),this.notificationOption!==ce.PushOrSMS&&(e.notificationOption=ce[this.notificationOption]),this.recurrenceNotificationsLastDate!=null&&(e.recurrenceNotificationsLastDate=this.recurrenceNotificationsLastDate.toISOString()),this.notifyOnClientConfirmArrival||(e.notifyOnClientConfirmArrival=this.notifyOnClientConfirmArrival),this.notifyOnPayments||(e.notifyOnPayments=this.notifyOnPayments),e.remindersTypes={},this.remindersTypes.forEach((t,r)=>{e.remindersTypes[me[r]]=t}),this.notifyAboutCancelNearDeadline||(e.notifyAboutCancelNearDeadline=this.notifyAboutCancelNearDeadline),this.notifyAboutOrderNearDeadline||(e.notifyAboutOrderNearDeadline=this.notifyAboutOrderNearDeadline),this.notifyWhenGettingBooking||(e.notifyWhenGettingBooking=this.notifyWhenGettingBooking),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showAdressMessage&&(e.showAdressMessage=this.showAdressMessage),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.showPhoneMessage&&(e.showPhoneMessage=this.showPhoneMessage),e}toString(){return JSON.stringify(this.toJson())}}class ji{publicCustomersData;constructor({publicCustomersData:e}={}){this.publicCustomersData=e}static fromJson(e){return new ji().setPublicCustomersDataJson(e)}setPublicCustomersDataJson(e){return e.data??={},this.publicCustomersData={},Object.entries(e.data).forEach(([t,r])=>{const i=St.fromMinimalJson(r,t);this.publicCustomersData[t]=i}),this}toMinimalJson(){const e={};return e.data={},this.publicCustomersData??={},Object.entries(this.publicCustomersData).forEach(([t,r])=>{e.data[t]=r.toMinimalJson()}),e}}class es{eventName="";from=new Date(0);to=new Date(0);colorIndex=-1;isBreak=!1;eventIndex=0;eventsBelong=1;partOfRecurrence=!1;treatmentName="";transactionCounter=0;wantDelete=!1;onHold=!1;hasInvoice=!1;durationMinutes=0;breakNotificaiton=!1;minutesBreakNotification=60;extraData;note=null;ids=[];recurrenceEvent=void 0;timeId=null;hasDebt=!1;confirmArrival=!1;treatmentId=null;isMulti=!1;currentParticipants=0;debtCounter=0;onHoldCounter=0;invoiceCoverCounter=0;transactionsPerUser=0;wantDeleteCounter=0;confirmedArrivalAmount=0;recurrenceFatherBookingId;recurrenceBreakFatherDate;blockSchedule=!0;recurrenceBreakRefInfo;breakIconData;breakBusinessName;breakFatherRecurrenceId;breakBusinessId;breakAddedToDeviceCalendar=!1;breakId="";vacationId="";belongTreatments=1;vacationCreatedAt=void 0;isVacation=!1;vacationAddedToDeviceCalendar=!1;vacationEndTemp=null;isHoliday=!1;holidayReligion=null;subTreatmentName="";totalBookingMinutes=0;waitingListCounter=1;isWaitingList=!1;waitingListCustomerGender=z.male;customerPhoneWaitingList="";constructor(){}static fromJson({json:e,timeStr:t,dayString:r,monthString:i,workerId:s,businessModel:a,newTimeId:c}){const o=new es;o.eventName=e.p??"",o.eventIndex=e.i??0,o.onHold=e.oH??!1,o.eventsBelong=e.EB??1,o.wantDelete=e.wD??!1,o.isVacation=e.IV??!1,o.isVacation&&o.eventName===""&&(o.eventName=q("Vacation")),o.vacationId=c??"",o.breakFatherRecurrenceId=e.BFRI??"",o.vacationAddedToDeviceCalendar=e.VATDC??!1,o.blockSchedule=e.BS??!0,o.transactionCounter=e.TC??0,o.transactionsPerUser=e.TPU??0,o.hasDebt=e.HD??!1,o.debtCounter=e.DC??0,o.treatmentId=e.TID,o.confirmArrival=e.CA??!1,o.confirmedArrivalAmount=e.CAA??0,o.durationMinutes=e.d??0,o.treatmentName=e.TN??"",o.hasInvoice=e.Hi??!1,o.invoiceCoverCounter=e.ICC??0,o.note=e.N,o.recurrenceFatherBookingId=e.RFBI,o.wantDeleteCounter=e.WDC??0,o.onHoldCounter=e.OHC??0,o.isMulti=e.IM??!1,o.currentParticipants=e.CP??0,o.breakNotificaiton=e.BN??!1,o.partOfRecurrence=e.POR??!1,o.minutesBreakNotification=e.MBN??60,o.recurrenceBreakRefInfo=e.RBRI?lt.fromJson(e.RBRI):void 0,o.recurrenceBreakFatherDate=e.RBFD;const u=e.IB??!1,l=new Date(t),d=new Date(`${r}-${i}`),h=new Date(d.getFullYear(),d.getMonth(),d.getDate(),l.getHours(),l.getMinutes());return new Date(h.getTime()+o.durationMinutes*6e4),e.RE&&lt.fromJson(e.RE,h),o.colorIndex=e.c??(o.isVacation?1:0),o.ids=[s],o.isHoliday=!1,o.holidayReligion=null,o.subTreatmentName="",o.totalBookingMinutes=0,o.waitingListCounter=1,o.isWaitingList=!1,o.waitingListCustomerGender=z.male,o.customerPhoneWaitingList="",u&&(o.breakIconData=a?.design.shopIconData,o.breakBusinessName=a?.shopName,o.breakBusinessId=a?.businessId),e.VE&&(o.vacationEndTemp=mn(e.VE)),o}get endOfBooking(){return new Date(this.from.getTime()+this.totalBookingMinutes*6e4)}toJson(){const e={};return e.p=this.eventName,e.d=this.durationMinutes,e.c=this.colorIndex,this.minutesBreakNotification!==60&&(e.MBN=this.minutesBreakNotification),this.breakNotificaiton&&(e.BN=this.breakNotificaiton),this.onHoldCounter>0&&(e.OHC=this.onHoldCounter),this.confirmArrival&&(e.CA=this.confirmArrival),this.confirmedArrivalAmount>0&&(e.CAA=this.confirmedArrivalAmount),this.blockSchedule||(e.BS=this.blockSchedule),this.treatmentId!==null&&(e.TID=this.treatmentId),this.wantDeleteCounter>0&&(e.WDC=this.wantDeleteCounter),this.hasDebt&&(e.HD=this.hasDebt),this.transactionCounter>0&&(e.TC=this.transactionCounter),this.transactionsPerUser>0&&(e.TPU=this.transactionsPerUser),this.debtCounter>0&&(e.DC=this.debtCounter),this.invoiceCoverCounter>0&&(e.ICC=this.invoiceCoverCounter),this.eventsBelong!==1&&(e.EB=this.eventsBelong),this.isBreak&&(e.IB=this.isBreak),this.breakId!==""&&(e.BI=this.breakId),this.eventIndex!==0&&(e.i=this.eventIndex),this.treatmentName!==""&&(e.TN=this.treatmentName),this.onHold&&(e.oH=this.onHold),this.isMulti&&(e.IM=this.isMulti),this.currentParticipants>0&&(e.CP=this.currentParticipants),this.wantDelete&&(e.wD=this.wantDelete),this.hasInvoice&&(e.Hi=this.hasInvoice),this.recurrenceEvent!=null&&(e.RE=this.recurrenceEvent.toJson({})),this.note!==null&&this.note!==""&&(e.N=this.note),this.partOfRecurrence&&(e.POR=this.partOfRecurrence),this.recurrenceFatherBookingId!=null&&(e.RFBI=this.recurrenceFatherBookingId),this.isVacation&&(e.IV=this.isVacation),this.breakFatherRecurrenceId!=null&&(e.BFRI=this.breakFatherRecurrenceId),this.vacationAddedToDeviceCalendar&&(e.VATDC=this.vacationAddedToDeviceCalendar),this.vacationCreatedAt!=null&&(e.VCA=this.vacationCreatedAt.toString()),this.breakAddedToDeviceCalendar&&(e.BATDC=this.breakAddedToDeviceCalendar),this.timeId!==null&&this.recurrenceEvent===null&&(e.RTI=this.timeId),this.recurrenceBreakFatherDate!==null&&(e.RBFD=this.recurrenceBreakFatherDate),this.recurrenceBreakRefInfo!=null&&(e.RBRI=this.recurrenceBreakRefInfo.toJson({saveStartDate:!1,saveEnd:!0,saveException:!1})),this.subTreatmentName!==""&&(e.STN=this.subTreatmentName),this.totalBookingMinutes!==this.durationMinutes&&(e.TBM=this.totalBookingMinutes),this.belongTreatments>1&&(e.BTR=this.belongTreatments),e}toString(){return JSON.stringify(this,null,2)}}class rn{start=new Date(0);end=new Date(0);id="";createdAt;workerId="";addedToDeviceCalendar=!1;colorIndex=1;title="";recurrenceObj;constructor({end:e,start:t,title:r="",id:i="",workerId:s=""}){this.start=t,this.end=e,this.title=r,this.id=i,this.workerId=s,this.recurrenceObj=new lt({start:t,endDate:e,endOption:r0.date})}isOneDay(){return Je(this.end)===Je(this.start)}static fromEvent(e){const t=new rn({});return t.start=e.from,e.recurrenceEvent?.endDate&&(t.end=e.recurrenceEvent.endDate),t.title=e.eventName,t.createdAt=e.vacationCreatedAt,t.id=e.vacationId,t.recurrenceObj=e.recurrenceEvent,t.addedToDeviceCalendar=e.vacationAddedToDeviceCalendar,t.colorIndex=e.colorIndex,t.workerId=e.ids.length>0?e.ids[0]:"",t}static fromVacation(e){const t=new rn({});return t.start=e.start,t.end=e.end,t.addedToDeviceCalendar=e.addedToDeviceCalendar,t.id=e.id,t.createdAt=e.createdAt,t.workerId=e.workerId,t.title=e.title,t.colorIndex=e.colorIndex,t}}class nm{listener;recurrenceEvents={};vacationsEvents={};constructor(){}get recurrenceEventsList(){const e=[];return Object.entries(this.recurrenceEvents).forEach(([t,r])=>{e.push(...Object.values(r))}),e}get recurrenceEventsListWithOutVacations(){const e=[];return Object.entries(this.recurrenceEvents).forEach(([t,r])=>{Object.entries(r).forEach(([i,s])=>{s.isVacation||e.push(s)})}),e}setRecurrenceEvents(e,t,r,{putBreaks:i=!0}={}){this.recurrenceEvents={},this.vacationsEvents={},Object.entries(e).forEach(([s,a])=>{this.recurrenceEvents[s]={};const c=new Date(s);Object.entries(a).forEach(([o,u])=>{let l="",d="";if(typeof o=="string"){const g=o.split("_");g.length===2&&(l=g[1]),d=g[0]}const h=es.fromJson({json:u,timeStr:d,businessModel:r,newTimeId:l,dayString:uf(c),monthString:Ai(c),workerId:t});h.isVacation&&(this.vacationsEvents[Je(h.from)]=h),!(!i&&h.isBreak)&&(this.recurrenceEvents[s][o]=h)})})}vacationInDate(e){for(const t of Object.values(this.vacationsEvents))if(t.recurrenceEvent?.isAccureInDate({date:e}))return rn.fromEvent(t);return null}}const im={R:"R",A:"A"},sm={R:"R",A:"A"};class nn{start=new Date(0);end=new Date(0);operation="R";shifts=[];constructor({start:e,end:t,operation:r,shifts:i}){this.start=e,this.end=t,this.operation=r,this.shifts=i}static fromJson(e,t){const r=t.split("&"),i=new Date(r[0]),s=new Date(r[1]),a=sm[e.operation]||"R",c=e.shifts.map(o=>o);return new nn({start:i,end:s,operation:a,shifts:c})}static fromShiftChangeRange(e){const{start:t,end:r,operation:i,shifts:s}=e;return new nn({start:t,end:r,operation:i,shifts:[...s]})}isSameAs(e){return this.start.getTime()===e.start.getTime()&&this.end.getTime()===e.end.getTime()&&this.operation===e.operation&&this.shifts.toString()===e.shifts.toString()}toJson(){return{operation:im[this.operation],shifts:this.shifts}}combineShifts(e){if(this.operation==="R")return this.shifts;const t=[];return Bs(t,e),Bs(t,this.shifts),bo(t)}getKey(){const e=this.formatDate(this.start),t=this.formatDate(this.end);return`${e}&${t}`}formatDate(e){return e.toISOString().split("T")[0]}toString(){return JSON.stringify(this.toJson())}}class sn{name="";index="";treatments=new Map;constructor({name:e,treatments:t,index:r}){this.name=e,this.treatments=t,this.index=r}static fromJson(e,t,{pointerShortBookingTime:r,pointerLognestBookingTime:i}={}){const s=e.name||"",a=t,c=new Map;return e.treatments&&Object.entries(e.treatments).forEach(([o,u])=>{c.set(o,_e.fromJson(u,o)),r&&(c.get(o).totalMinutes<r[0]&&(r[0]=Math.max(c.get(o).times.get("0").workMinutes,5)),c.get(o).totalMinutes===r[0]&&(r[0]=Math.min(Math.max(c.get(o).times.get("0").workMinutes,5),r[0]))),i&&c.get(o).totalMinutes>i[0]&&(i[0]=Math.max(c.get(o).totalMinutes,5))}),new sn({name:s,treatments:c,index:a})}containTreatment(e){for(const t of Object.values(this.treatments))if(t.id===e)return!0;return!1}toJson(){const e={};return e.name=this.name,e.treatments={},Object.entries(this.treatments).forEach(([t,r])=>{e.treatments[t]=r.toJson()}),e}fromTreatmentSubject(e){return this.name=e.name,this.index=e.index,this.treatments=new Map,e.treatments.forEach((t,r)=>{this.treatments.set(r,_e.fromTreatment(t))}),this}toString(){return JSON.stringify(this.toJson(),null,2)}}class am{bookingsTimes={};lastBookingTimeDate;duringPaymentBookingsTime={};listener;constructor(){}findLastBookingsTimesDate(){let e;return Object.entries(this.bookingsTimes).forEach(([t,r])=>{const i=new Date(t);Object.keys(r).length>0&&(!e||i>e)&&(e=i)}),e}setWorkerPublicData(e,t=!0){this.duringPaymentBookingsTime={},this.bookingsTimes={},dayLightSavingTimes.forEach(r=>{r=new Date(r.getTime()+60*60*1e3),this.bookingsTimes[Je(r)]={[cf(r)]:60}}),e.bookingsTimes!=null&&Object.entries(e.bookingsTimes).forEach(([r,i])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.keys(i).length!=0&&(this.bookingsTimes[r]={},Object.entries(i).forEach(([c,o])=>{c.includes("00:00v")?t&&(this.bookingsTimes[r]={"00:00":1439}):(c!=="00:00"||this.bookingsTimes[r]["00:00"]!=1439)&&(this.bookingsTimes[r][c]=o)}),Object.keys(i).length>0&&s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s))}),e.duringPaymentBookingsTime!==null&&Object.entries(e.duringPaymentBookingsTime).forEach(([r,i])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.entries(i).forEach(([c,o])=>{o.length===2&&o[0]instanceof ot&&o[0].toDate().getTime()>Date.now()&&typeof o[1]=="number"&&(r in this.bookingsTimes?this.bookingsTimes[r][c]=o[1]:this.bookingsTimes[r]={[c]:o[1]},s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s),r in this.duringPaymentBookingsTime?this.duringPaymentBookingsTime[r][c]=o:this.duringPaymentBookingsTime[r]={[c]:o})})})}emptyBookingTimesDatesInMonth(e){Object.entries(this.bookingsTimes).forEach(([t,r])=>{t.includes(e)&&(this.bookingsTimes[t]={})})}toWorkerPublicDataJson(){const e={};return e.bookingsTimes={},Object.entries(this.bookingsTimes).forEach(([t,r])=>{e.bookingsTimes[t]={},Object.entries(r).forEach(([i,s])=>{e.bookingsTimes[t][i]=s})}),e.duringPaymentBookingsTime={},Object.entries(this.duringPaymentBookingsTime).forEach(([t,r])=>{e.duringPaymentBookingsTime[t]={},Object.entries(r).forEach(([i,s])=>{e.duringPaymentBookingsTime[t][i]=s})}),e}}class an{daysToAllowBookings=7;name="";phone="";id="";profileImg="";about="";maxTreatments=5;allowAppNotification=!0;religions=[];waitingListExceptionDays=new Set;closeScheduleOnHolidays=!1;weekendDays=[5,6];onHoldMinutes=0;cancelMinutes=0;minutesBeforeBookingToConfirm=1440;tempFcm;hasRecurrenceEvents=!1;windowSpaces=Sr.shortestTreatment;customWindowMinute=30;showWaitingListWhenThereIsChoises=!0;isVerifiedPhone=!1;lastCleanDate=new Date;gender=z.anonymous;deleteNeerDedlineBookingMessage;orderNeerDedlineBookingMessage;generalBookingMessage;closeCalendarDate;minDateForShowinData=new Date(0);openCalendar=!0;maxFutureBookings=4;currentClientCount=0;showVacations=!0;mustVerifyPhone=!0;allowBookingConfirmations=!0;devices=new Map;storyImages=new Map;createdAt=new Date(0);workTime=new Map([["sunday",[]],["monday",[]],["tuesday",[]],["wednesday",[]],["thursday",[]],["friday",[]],["saturday",[]]]);isCustomersNeedRecurrence=!1;specificRangeChanges=new Map;treatmentsSubjects=new Map;workerPublicData=new am;publicCustomers=new ji;storylikesAmount=new Map;multiEventsTimes=new Zi;generalBookingsCount=0;passedBookingsCount=0;shortBookingTime=999;longestBookingTime=0;recurrence=new nm;notifications=new Nt;workerDocListner;constructor({}){}static fromUserPublicData(e){const t=new an({});return t.phone=e.phoneNumber||"",t.currentClientCount=e.currentClientCount||0,t.id=e.id||t.phone,t.name=e.name||"",e.devices!=null&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,i])=>{t.devices.set(r,Re.fromJson(i,r))}):e.currentFcm!=null&&e.currentFcm!==""&&(t.tempFcm=e.currentFcm),t.gender=Ke[e.gender]||z.anonymous,t.lastCleanDate=new Date,t.createdAt=new Date,t.notifications.remindersTypes=new Map([[me.regular,60]]),t}static fromWorkerDocJson(e){const t=new an({});return t.setFromWorkerDoc(e),t}get treatmentsLength(){let e=0;return Object.values(this.treatmentsSubjects).forEach(t=>{e+=Object.values(t.treatments).length}),e}shiftsFor({day:e}){const t=this.workTime.get(wt(e,"EEEE").toLowerCase())||[];for(const r of Object.values(this.specificRangeChanges))if(ao(r.start,new Date(r.end.getTime()+23*60*60*1e3+59*60*1e3),e,e)==="STRIKE")return r.combineShifts(t);return bo(Fl(t))}isClosingDate(e){return!this.openCalendar||this.closeCalendarDate!=null&&ye(this.closeCalendarDate).getTime()===ye(e).getTime()}hasTreatemnt(e){for(const t of Object.values(this.treatmentsSubjects))if(t.containTreatment(e))return!0;return!1}get useWhatsApp(){return this.notifications.notificationOption===ce.WhatsApp||this.notifications.notificationOption===ce.PushOrWhatsApp}setFromWorkerDoc(e){if(this.daysToAllowBookings=e.daysToAllowBookings||7,this.profileImg=e.profileImg||"",this.about=e.about||"",e.lastCleanDate instanceof ot?this.lastCleanDate=e.lastCleanDate.toDate():typeof e.lastCleanDate=="string"&&(this.lastCleanDate=new Date(e.lastCleanDate)||new Date),e.religions&&(this.religions=e.religions.map(t=>Fc[t])),e.windowSpaces&&(this.windowSpaces=Bc[e.windowSpaces]||Sr.shortestTreatment),this.isCustomersNeedRecurrence=e.isCustomersNeedRecurrence||!1,this.showWaitingListWhenThereIsChoises=e.showWaitingListWhenThereIsChoises||!0,this.customWindowMinute=e.customWindowMinute||30,this.closeScheduleOnHolidays=e.closeScheduleOnHolidays||!1,this.weekendDays=e.weekendDays||[5,6],this.mustVerifyPhone=e.mustVerifyPhone||!0,this.showVacations=e.showVacations||!0,this.gender=Ke[e.gender]||z.anonymous,this.allowAppNotification=e.allowAppNotification||!0,this.name=e.name||"",this.maxTreatments=e.maxTreatments||3,this.phone=e.phone||"",this.hasRecurrenceEvents=e.hasRecurrenceEvents||!1,this.id=e.id||e.phone||"",this.minutesBeforeBookingToConfirm=e.minutesBeforeBookingToConfirm||1440,this.maxFutureBookings=e.maxFutureBookings||4,this.treatmentsSubjects=new Map,this.shortBookingTime=999,e.treatmentsSubjects){let t=[this.shortBookingTime],r=[this.longestBookingTime];Object.entries(e.treatmentsSubjects).forEach(([i,s])=>{const a=sn.fromJson(s,i,{pointerShortBookingTime:t,pointerLognestBookingTime:r});this.treatmentsSubjects.set(i,a)}),this.shortBookingTime=t[0],this.longestBookingTime=r[0]}else if(e.treatments){const t=new Map;let r=0;Object.entries(e.treatments).forEach(([i,s])=>{const a=_e.fromOldJson(s,r.toString(),i,r+4);t.set(r.toString(),a),a.totalMinutes<this.shortBookingTime&&(this.shortBookingTime=Math.max(a.times.get("0").workMinutes,5)),a.totalMinutes===this.shortBookingTime&&(this.shortBookingTime=Math.min(Math.max(a.times.get("0").workMinutes,5),this.shortBookingTime)),r+=1}),this.treatmentsSubjects=new Map([["0",new sn({name:q("general"),treatments:t,index:"0"})]])}this.onHoldMinutes=e.onHoldMinutes||0,this.cancelMinutes=e.cancelMinutes||0,e.devices!=null&&typeof e.devices=="object"&&Object.entries(e.devices).forEach(([t,r])=>{this.devices.set(t,Re.fromJson(r,t))}),this.deleteNeerDedlineBookingMessage=e.deleteNeerDedlineBookingMessage,this.orderNeerDedlineBookingMessage=e.orderNeerDedlineBookingMessage,this.generalBookingMessage=e.generalBookingMessage,this.workTime=new Map,e.workTime&&Object.entries(e.workTime).forEach(([t,r])=>{this.workTime.set(t,r.map(i=>i))}),this.waitingListExceptionDays=new Set,e.waitingListExceptionDays&&e.waitingListExceptionDays.forEach(t=>{this.waitingListExceptionDays.add(t)}),e.notifications?this.notifications=Nt.fromJson(e.notifications):(this.notifications=new Nt,this.notifications.notifyOnWaitingListEvents=e.notifyOnWaitingListEvents||!0,this.notifications.showAdressAlert=e.showAdressAlert||!1,this.notifications.showAdressMessage=e.showAdressMessage||!1,this.notifications.showPhoneAlert=e.showPhoneAlert||!1,this.notifications.showPhoneMessage=e.showPhoneMessage||!1,this.notifications.remindersTypes=new Map([[me.regular,e.minutesBeforeNotify||60]]),this.notifications.notifyOnPayments=e.notifyOnPayments||!0,this.notifications.notifyAboutCancelNearDeadline=e.notifyAboutCancelNearDeadline||!0,this.notifications.notifyAboutOrderNearDeadline=e.notifyAboutOrderNearDeadline||!0,this.notifications.notifyWhenGettingBooking=e.notifyWhenGettingBooking||!0,e.notificationOption&&(this.notifications.notificationOption=cn[e.notificationOption]||ce.OnlyPush),e.recurrenceNotificationsLastDate?this.notifications.recurrenceNotificationsLastDate=new Date(e.recurrenceNotificationsLastDate):this.notifications.recurrenceNotificationsLastDate=new Date),this.specificRangeChanges=new Map,e.specificRangeChanges&&Object.entries(e.specificRangeChanges).forEach(([t,r])=>{const i=nn.fromJson(r,t);i.end>=ye(new Date)&&this.specificRangeChanges.set(t,i)}),this.storyImages=new Map,e.storyImages&&Object.entries(e.storyImages).forEach(([t,r])=>{this.storyImages.set(t,r)}),e.closeCalendarDate&&(this.closeCalendarDate=new Date(e.closeCalendarDate)),e.minDateForShowinData&&(this.minDateForShowinData=mn(e.minDateForShowinData)),this.openCalendar=e.openCalendar||!0,this.allowBookingConfirmations=e.allowBookingConfirmations||!0,e.createdAt?this.createdAt=new Date(e.createdAt):this.createdAt=new Date(2023,0,1),this.id===this.phone?this.isVerifiedPhone=!0:this.isVerifiedPhone=e.isVerifiedPhone||!1}getInvoiceWorkerInfo(){return new InvoiceWorkerInfo({workerId:this.id,workerName:this.name})}getFcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm!=null)return new Set([this.tempFcm]);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}toWorkerDocJson(){const e={};return e.workTime={},Object.entries(this.workTime).forEach(([t,r])=>{e.workTime[t]=r}),e.specificRangeChanges={},Object.entries(this.specificRangeChanges).forEach(([t,r])=>{e.specificRangeChanges[t]=r.toJson()}),e.religions=[],this.religions.forEach(t=>{e.religions.push(Oc[t])}),this.closeCalendarDate!=null&&(e.closeCalendarDate=new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}).format(this.closeCalendarDate)),this.minDateForShowinData.getFullYear()!=new Date(0).getFullYear()&&(e.minDateForShowinData=Je(this.minDateForShowinData)),this.openCalendar||(e.openCalendar=this.openCalendar),e.allowBookingConfirmations=this.allowBookingConfirmations,this.mustVerifyPhone||(e.mustVerifyPhone=this.mustVerifyPhone),this.isCustomersNeedRecurrence&&(e.isCustomersNeedRecurrence=this.isCustomersNeedRecurrence),e.weekendDays=this.weekendDays,e.maxTreatments=this.maxTreatments,e.gender=Ut[this.gender],e.onHoldMinutes=this.onHoldMinutes,e.cancelMinutes=this.cancelMinutes,this.hasRecurrenceEvents&&(e.hasRecurrenceEvents=this.hasRecurrenceEvents),this.showVacations||(e.showVacations=this.showVacations),e.devices={},Object.entries(this.devices).forEach(([t,r])=>{e.devices[t]=r.toJson()}),e.deleteNeerDedlineBookingMessage=this.deleteNeerDedlineBookingMessage,e.orderNeerDedlineBookingMessage=this.orderNeerDedlineBookingMessage,e.generalBookingMessage=this.generalBookingMessage,e.closeScheduleOnHolidays=this.closeScheduleOnHolidays,this.customWindowMinute!=30&&(e.customWindowMinute=this.customWindowMinute),this.windowSpaces!=Sr.shortestTreatment&&(e.windowSpaces=_c[this.windowSpaces]),this.minutesBeforeBookingToConfirm!=1440&&(e.minutesBeforeBookingToConfirm=this.minutesBeforeBookingToConfirm),e.bookingDaysToDeleteLocal=[],e.notifications=this.notifications.toJson(),e.lastCleanDate=this.lastCleanDate.toString(),e.daysToAllowBookings=this.daysToAllowBookings,this.maxFutureBookings!=4&&(e.maxFutureBookings=this.maxFutureBookings),this.currentClientCount!=0&&(e.currentClientCount=this.currentClientCount),this.allowAppNotification||(e.allowAppNotification=this.allowAppNotification),this.waitingListExceptionDays.entries.length>0&&(e.waitingListExceptionDays=Array.from(this.waitingListExceptionDays)),e.treatmentsSubjects={},Object.entries(this.treatmentsSubjects).forEach(([t,r])=>{e.treatmentsSubjects[t]=r.toJson()}),this.showWaitingListWhenThereIsChoises||(e.showWaitingListWhenThereIsChoises=this.showWaitingListWhenThereIsChoises),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.profileImg=this.profileImg,e.about=this.about,e.name=name,e.phone=this.phone,e.id=this.id,e.storyImages={},Object.entries(this.storyImages).forEach(([t,r])=>{e.storyImages[t]=r}),e.createdAt=this.createdAt.toString(),e}toString(){return JSON.stringify(this.toWorkerDocJson())+this.workerPublicData.toWorkerPublicDataJson().toString()}}function om(n,e){const t=e.split("--")[0];return ct.developers.hasOwnProperty(t)&&(n=ct.developers[t].businessProductId),n.includes("basic")?pt.basic:n.includes("landing")?pt.landingPage:n.includes("advanced")?pt.advanced:n.includes("golden")?pt.golden:pt.trial}class he{static instance;constructor(){}static GI(){return he.instance||(he.instance=new he),he.instance}generalRepo=new Za;business=new Lt({businessId:"",design:new qe});workers={};businessIcon="";businessSubtype=pt.trial;async initSettings(e,{fromLoading:t=!1}={}){try{this.workers={},ct.currentBusinesssId=e,console.log("222222222222223333333333333");const r=await Promise.all([this._loadSettingsDoc(e),this._loadBusinessWorkers(e)]);return console.log("22222222222222222"),this.businessSubtype=om(this.business.productId,e),r.length>0&&r[0]===!1?!1:(this.makeBusinessDataListener(),!0)}catch(r){return se.error(`Error while initializing settings --> ${r}`),!1}}async loadBusiness(e,t,{fromLoading:r=!1,fromSearch:i=!1}={}){console.log("1111111111111111111");try{const s=await this.initSettings(e,{fromLoading:r});return console.log("33333333333333333322222222222222222"),qr.GI().themeCauseMainBuilt,!0}catch{return!1}}async _loadSettingsDoc(e){try{console.log("eeeeeeedddddddddddddd");const t=await this.generalRepo.getDocRepo({path:it,docId:e});return t===void 0||!t.exists||t.data()===null?(K.GI().error=L.notFoundBusiness,!1):(this.business=Lt.fromJson(t.data(),e),!0)}catch{return!1}}async _loadBusinessWorkers(e){try{const t=`${it}/${e}/${ir}`;console.log("eewwwwwwwww");const r=await this.generalRepo.getAllDocsInsideCollection(t);return r!==null&&r.forEach(i=>{const s=an.fromWorkerDocJson(i);Ae.GI().getPermission>1||(s.id,Ae.GI().user.id),this.workers[s.id]=s}),!0}catch(t){return t instanceof Error&&(se.error(`Error while loading the business workers docs --> ${t}`),se.error(t.stack)),!0}}async makeBusinessDataListener(){const e=dr.GI().getBusinessDataPath(ct.currentBusinesssId);this.business.businessData.listener=this.generalRepo.listenToChild({childPath:e,callback:t=>{t.exists()&&(this.business.businessData.setBusinessData(t),console.log(this.business.businessData))}})}}export{t0 as A,he as B,S as D,lc as E,Za as G,Yd as L,qr as T,Ae as U,Qd as V,ym as a,gm as b,vm as c,dm as d,Br as e,Or as f,wm as g,hr as h,it as i,ct as j,mm as k,fm as l,hm as m,Ai as n,xm as o,K as p,se as q,pm as r,Ua as s,Vr as u};
