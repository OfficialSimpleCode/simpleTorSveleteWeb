import{w as q0}from"./index.6-72uIJN.js";import{T as ht,r as Cn,b as ro,c as G0,d as Y0,_ as Ps,C as Bs,e as J0,S as Ar,f as me,E as Ln,h as K0,L as io,j as we,k as no,l as Q0,a as hi,m as X0,F as Un,n as Z0,q as Er,o as j0,p as ec,s as tc,g as Wn,i as Hn,t as rc,u as mt,v as ic,w as ki,x as nc,y as _s,z as sc,A as ac,B as oc,D as cc,G as fe,H as ge,I as uc,J as Ms,K as hc,M as Ii,N as Or,O as lc,P as dc,Q as fc}from"./index.esm2017.1gYrqaii.js";import{b as Vn,d as mc,e as H,g as so}from"./_commonjsHelpers.Y1uXSML9.js";const zn={apiKey:"AIzaSyCSIQHCC23Z7ul639fD8JLMHu4yN77_0VA",authDomain:"managementsystemapp-c1fda.firebaseapp.com",databaseURL:"https://managementsystemapp-c1fda-default-rtdb.europe-west1.firebasedatabase.app",projectId:"managementsystemapp-c1fda",storageBucket:"managementsystemapp-c1fda.appspot.com",messagingSenderId:"670820779934",appId:"1:670820779934:web:fdcf77a952b59c3090788f",measurementId:"G-WP8J044JN9"},An={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function En(i,e,t,r=!1){const n=String(e),s=(o,u)=>`\x1B[${u[0]}m${o}\x1B[${u[1]}m`,a=(o,u)=>u!=null&&typeof u=="string"?s(o,An[u]):u!=null&&Array.isArray(u)?u.reduce((h,d)=>a(h,d),o):u!=null&&u[o.trim()]!=null?a(o,u[o.trim()]):u!=null&&u["*"]!=null?a(o,u["*"]):o,c=null;return n.replace(/{{(.+?)}}/g,(o,u)=>{const h=t[u]!=null?String(t[u]):r?"":o;return i.stylePrettyLogs?a(h,i?.prettyLogStyles?.[u]??c)+s("",An.reset):h})}function ke(i,e=2,t=0){return i!=null&&isNaN(i)?"":(i=i!=null?i+t:i,e===2?i==null?"--":i<10?"0"+i:i.toString():i==null?"---":i<10?"00"+i:i<100?"0"+i:i.toString())}function pc(i){return{href:i.href,protocol:i.protocol,username:i.username,password:i.password,host:i.host,hostname:i.hostname,port:i.port,pathname:i.pathname,search:i.search,searchParams:[...i.searchParams].map(([e,t])=>({key:e,value:t})),hash:i.hash,origin:i.origin}}function ao(i){const e=new Set;return JSON.stringify(i,(t,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return r})}function Ce(i,e){const t={seen:[],stylize:oo};return e!=null&&lo(t,e),St(t.showHidden)&&(t.showHidden=!1),St(t.depth)&&(t.depth=2),St(t.colors)&&(t.colors=!0),St(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=xc),Jr(t,i,t.depth)}Ce.colors=An;Ce.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function gc(i){return typeof i=="boolean"}function St(i){return i===void 0}function oo(i){return i}function xc(i,e){const t=Ce.styles[e];return t!=null&&Ce?.colors?.[t]?.[0]!=null&&Ce?.colors?.[t]?.[1]!=null?"\x1B["+Ce.colors[t][0]+"m"+i+"\x1B["+Ce.colors[t][1]+"m":i}function Fr(i){return typeof i=="function"}function co(i){return typeof i=="string"}function wc(i){return typeof i=="number"}function uo(i){return i===null}function ho(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function Ci(i){return li(i)&&$n(i)==="[object RegExp]"}function li(i){return typeof i=="object"&&i!==null}function Ai(i){return li(i)&&($n(i)==="[object Error]"||i instanceof Error)}function Ns(i){return li(i)&&$n(i)==="[object Date]"}function $n(i){return Object.prototype.toString.call(i)}function vc(i){const e={};return i.forEach(t=>{e[t]=!0}),e}function yc(i,e,t,r,n){const s=[];for(let a=0,c=e.length;a<c;++a)ho(e,String(a))?s.push(Tn(i,e,t,r,String(a),!0)):s.push("");return n.forEach(a=>{a.match(/^\d+$/)||s.push(Tn(i,e,t,r,a,!0))}),s}function Ei(i){return"["+Error.prototype.toString.call(i)+"]"}function Jr(i,e,t=0){if(i.customInspect&&e!=null&&Fr(e)&&e?.inspect!==Ce&&!(e?.constructor&&e?.constructor.prototype===e)){if(typeof e.inspect!="function"&&e.toString!=null)return e.toString();let h=e?.inspect(t,i);return co(h)||(h=Jr(i,h,t)),h}const r=at(i,e);if(r)return r;let n=Object.keys(e);const s=vc(n);try{i.showHidden&&Object.getOwnPropertyNames&&(n=Object.getOwnPropertyNames(e))}catch{}if(Ai(e)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return Ei(e);if(n.length===0)if(Fr(i.stylize)){if(Fr(e)){const h=e.name?": "+e.name:"";return i.stylize("[Function"+h+"]","special")}if(Ci(e))return i.stylize(RegExp.prototype.toString.call(e),"regexp");if(Ns(e))return i.stylize(Date.prototype.toISOString.call(e),"date");if(Ai(e))return Ei(e)}else return e;let a="",c=!1,o=[`{
`,`
}`];if(Array.isArray(e)&&(c=!0,o=[`[
`,`
]`]),Fr(e)&&(a=" [Function"+(e.name?": "+e.name:"")+"]"),Ci(e)&&(a=" "+RegExp.prototype.toString.call(e)),Ns(e)&&(a=" "+Date.prototype.toUTCString.call(e)),Ai(e)&&(a=" "+Ei(e)),n.length===0&&(!c||e.length==0))return o[0]+a+o[1];if(t<0)return Ci(e)?i.stylize(RegExp.prototype.toString.call(e),"regexp"):i.stylize("[Object]","special");i.seen.push(e);let u;return c?u=yc(i,e,t,s,n):u=n.map(h=>Tn(i,e,t,s,h,c)),i.seen.pop(),Dc(u,a,o)}function Tn(i,e,t,r,n,s){let a,c,o={value:void 0};try{o.value=e[n]}catch{}try{Object.getOwnPropertyDescriptor&&(o=Object.getOwnPropertyDescriptor(e,n)||o)}catch{}if(o.get?o.set?c=i.stylize("[Getter/Setter]","special"):c=i.stylize("[Getter]","special"):o.set&&(c=i.stylize("[Setter]","special")),ho(r,n)||(a="["+n+"]"),c||(i.seen.indexOf(o.value)<0?(uo(t)?c=Jr(i,o.value,void 0):c=Jr(i,o.value,t-1),c.indexOf(`
`)>-1&&(s?c=c.split(`
`).map(u=>"  "+u).join(`
`).substr(2):c=`
`+c.split(`
`).map(u=>"   "+u).join(`
`))):c=i.stylize("[Circular]","special")),St(a)){if(s&&n.match(/^\d+$/))return c;a=JSON.stringify(""+n),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=i.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,"\\'").replace(/(^"|"$)/g,"'"),a=i.stylize(a,"string"))}return a+": "+c}function at(i,e){if(St(e))return i.stylize("undefined","undefined");if(co(e)){const t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\\'")+"'";return i.stylize(t,"string")}if(wc(e))return i.stylize(""+e,"number");if(gc(e))return i.stylize(""+e,"boolean");if(uo(e))return i.stylize("null","null")}function Dc(i,e,t){return t[0]+(e===""?"":e+`
`)+"  "+i.join(`,
  `)+" "+t[1]}function lo(i,e){if(!e||!li(e))return i;const t={...i},r={...e},n=Object.keys(e);let s=n.length;for(;s--;)t[n[s]]=r[n[s]];return i}function bc(i,...e){const t={seen:[],stylize:oo};i!=null&&lo(t,i);const r=e[0];let n=0,s="",a="";if(typeof r=="string"){if(e.length===1)return r;let c,o=0;for(let u=0;u<r.length-1;u++)if(r.charCodeAt(u)===37){const h=r.charCodeAt(++u);if(n+1!==e.length){switch(h){case 115:{const d=e[++n];typeof d=="number"||typeof d=="bigint"?c=at(t,d):typeof d!="object"||d===null?c=String(d):c=Ce(d,{...i,compact:3,colors:!1,depth:0});break}case 106:c=ao(e[++n]);break;case 100:{const d=e[++n];typeof d=="bigint"?c=at(t,d):typeof d=="symbol"?c="NaN":c=at(t,d);break}case 79:c=Ce(e[++n],i);break;case 111:c=Ce(e[++n],{...i,showHidden:!0,showProxy:!0,depth:4});break;case 105:{const d=e[++n];typeof d=="bigint"?c=at(t,d):typeof d=="symbol"?c="NaN":c=at(t,parseInt(c));break}case 102:{const d=e[++n];typeof d=="symbol"?c="NaN":c=at(t,parseInt(d));break}case 99:n+=1,c="";break;case 37:s+=r.slice(o,u),o=u+1;continue;default:continue}o!==u-1&&(s+=r.slice(o,u-1)),s+=c,o=u+1}else h===37&&(s+=r.slice(o,u),o=u+1)}o!==0&&(n++,a=" ",o<r.length&&(s+=r.slice(o)))}for(;n<e.length;){const c=e[n];s+=a,s+=typeof c!="string"?Ce(c,i):c,a=" ",n++}return s}const kc={getCallerStackFrame:fo,getErrorTrace:mo,getMeta:Ac,transportJSON:Pc,transportFormatted:Tc,isBuffer:Bc,isError:go,prettyFormatLogObj:Ec,prettyFormatErrorObj:xo},Ic={runtime:[typeof window,typeof document].includes("undefined")?"Generic":"Browser",browser:globalThis?.navigator?.userAgent},Cc=/(?:(?:file|https?|global code|[^@]+)@)?(?:file:)?((?:\/[^:/]+){2,})(?::(\d+))?(?::(\d+))?/;function Ac(i,e,t,r,n,s){return Object.assign({},Ic,{name:n,parentNames:s,date:new Date,logLevelId:i,logLevelName:e,path:r?void 0:fo(t)})}function fo(i,e=Error()){return po(e?.stack?.split(`
`)?.filter(t=>!t.includes("Error: "))?.[i])}function mo(i){return i?.stack?.split(`
`)?.filter(e=>!e.includes("Error: "))?.reduce((e,t)=>(e.push(po(t)),e),[])}function po(i){const e=globalThis?.location?.origin,t={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(i!=null){const r=i.match(Cc);if(r){t.filePath=r[1].replace(/\?.*$/,""),t.fullFilePath=`${e}${t.filePath}`;const n=t.filePath.split("/");t.fileName=n[n.length-1],t.fileLine=r[2],t.fileColumn=r[3],t.filePathWithLine=`${t.filePath}:${t.fileLine}`,t.fileNameWithLine=`${t.fileName}:${t.fileLine}`}}return t}function go(i){return i instanceof Error}function Ec(i,e){return i.reduce((t,r)=>(go(r)?t.errors.push(xo(r,e)):t.args.push(r),t),{args:[],errors:[]})}function xo(i,e){const t=mo(i).map(n=>En(e,e.prettyErrorStackTemplate,{...n},!0)),r={errorName:` ${i.name} `,errorMessage:Object.getOwnPropertyNames(i).reduce((n,s)=>(s!=="stack"&&n.push(i[s]),n),[]).join(", "),errorStack:t.join(`
`)};return En(e,e.prettyErrorTemplate,r)}function Tc(i,e,t,r){const n=(t.length>0&&e.length>0?`
`:"")+t.join(`
`);r.prettyInspectOptions.colors=r.stylePrettyLogs,console.log(i+bc(r.prettyInspectOptions,...e)+n)}function Pc(i){console.log(ao(i))}function Bc(i){return!1}class _c{constructor(e,t,r=4){this.logObj=t,this.stackDepthLevel=r,this.runtime=kc,this.settings={type:e?.type??"pretty",name:e?.name,parentNames:e?.parentNames,minLevel:e?.minLevel??0,argumentsArrayName:e?.argumentsArrayName,hideLogPositionForProduction:e?.hideLogPositionForProduction??!1,prettyLogTemplate:e?.prettyLogTemplate??"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	{{filePathWithLine}}{{nameWithDelimiterPrefix}}	",prettyErrorTemplate:e?.prettyErrorTemplate??`
{{errorName}} {{errorMessage}}
error stack:
{{errorStack}}`,prettyErrorStackTemplate:e?.prettyErrorStackTemplate??`  â€¢ {{fileName}}	{{method}}
	{{filePathWithLine}}`,prettyErrorParentNamesSeparator:e?.prettyErrorParentNamesSeparator??":",prettyErrorLoggerNameDelimiter:e?.prettyErrorLoggerNameDelimiter??"	",stylePrettyLogs:e?.stylePrettyLogs??!0,prettyLogTimeZone:e?.prettyLogTimeZone??"UTC",prettyLogStyles:e?.prettyLogStyles??{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:e?.prettyInspectOptions??{colors:!0,compact:!1,depth:1/0},metaProperty:e?.metaProperty??"_meta",maskPlaceholder:e?.maskPlaceholder??"[***]",maskValuesOfKeys:e?.maskValuesOfKeys??["password"],maskValuesOfKeysCaseInsensitive:e?.maskValuesOfKeysCaseInsensitive??!1,maskValuesRegEx:e?.maskValuesRegEx,prefix:[...e?.prefix??[]],attachedTransports:[...e?.attachedTransports??[]],overwrite:{mask:e?.overwrite?.mask,toLogObj:e?.overwrite?.toLogObj,addMeta:e?.overwrite?.addMeta,addPlaceholders:e?.overwrite?.addPlaceholders,formatMeta:e?.overwrite?.formatMeta,formatLogObj:e?.overwrite?.formatLogObj,transportFormatted:e?.overwrite?.transportFormatted,transportJSON:e?.overwrite?.transportJSON}}}log(e,t,...r){if(e<this.settings.minLevel)return;const n=[...this.settings.prefix,...r],s=this.settings.overwrite?.mask!=null?this.settings.overwrite?.mask(n):this.settings.maskValuesOfKeys!=null&&this.settings.maskValuesOfKeys.length>0?this._mask(n):n,a=this.logObj!=null?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,c=this.settings.overwrite?.toLogObj!=null?this.settings.overwrite?.toLogObj(s,a):this._toLogObj(s,a),o=this.settings.overwrite?.addMeta!=null?this.settings.overwrite?.addMeta(c,e,t):this._addMetaToLogObj(c,e,t);let u,h;return this.settings.overwrite?.formatMeta!=null&&(u=this.settings.overwrite?.formatMeta(o?.[this.settings.metaProperty])),this.settings.overwrite?.formatLogObj!=null&&(h=this.settings.overwrite?.formatLogObj(s,this.settings)),this.settings.type==="pretty"&&(u=u??this._prettyFormatLogObjMeta(o?.[this.settings.metaProperty]),h=h??this.runtime.prettyFormatLogObj(s,this.settings)),u!=null&&h!=null?this.settings.overwrite?.transportFormatted!=null?this.settings.overwrite?.transportFormatted(u,h.args,h.errors,this.settings):this.runtime.transportFormatted(u,h.args,h.errors,this.settings):this.settings.overwrite?.transportJSON!=null?this.settings.overwrite?.transportJSON(o):this.settings.type!=="hidden"&&this.runtime.transportJSON(o),this.settings.attachedTransports!=null&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach(d=>{d(o)}),o}attachTransport(e){this.settings.attachedTransports.push(e)}getSubLogger(e,t){const r={...this.settings,...e,parentNames:this.settings?.parentNames!=null&&this.settings?.name!=null?[...this.settings.parentNames,this.settings.name]:this.settings?.name!=null?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...e?.prefix??[]]};return new this.constructor(r,t??this.logObj,this.stackDepthLevel)}_mask(e){const t=this.settings.maskValuesOfKeysCaseInsensitive!==!0?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map(r=>r.toLowerCase());return e?.map(r=>this._recursiveCloneAndMaskValuesOfKeys(r,t))}_recursiveCloneAndMaskValuesOfKeys(e,t,r=[]){if(r.includes(e))return{...e};if(typeof e=="object"&&e!==null&&r.push(e),this.runtime.isError(e)||this.runtime.isBuffer(e))return e;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Array.isArray(e))return e.map(n=>this._recursiveCloneAndMaskValuesOfKeys(n,t,r));if(e instanceof Date)return new Date(e.getTime());if(e instanceof URL)return pc(e);if(e!==null&&typeof e=="object"){const n=this.runtime.isError(e)?this._cloneError(e):Object.create(Object.getPrototypeOf(e));return Object.getOwnPropertyNames(e).reduce((s,a)=>(s[a]=t.includes(this.settings?.maskValuesOfKeysCaseInsensitive!==!0?a:a.toLowerCase())?this.settings.maskPlaceholder:this._recursiveCloneAndMaskValuesOfKeys(e[a],t,r),s),n)}else{if(typeof e=="string"){let n=e;for(const s of this.settings?.maskValuesRegEx||[])n=n.replace(s,this.settings?.maskPlaceholder||"");return n}return e}}_recursiveCloneAndExecuteFunctions(e,t=[]){return this.isObjectOrArray(e)&&t.includes(e)?this.shallowCopy(e):(this.isObjectOrArray(e)&&t.push(e),Array.isArray(e)?e.map(r=>this._recursiveCloneAndExecuteFunctions(r,t)):e instanceof Date?new Date(e.getTime()):this.isObject(e)?Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=Object.getOwnPropertyDescriptor(e,n);if(s){Object.defineProperty(r,n,s);const a=e[n];r[n]=typeof a=="function"?a():this._recursiveCloneAndExecuteFunctions(a,t)}return r},Object.create(Object.getPrototypeOf(e))):e)}isObjectOrArray(e){return typeof e=="object"&&e!==null}isObject(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}shallowCopy(e){return Array.isArray(e)?[...e]:{...e}}_toLogObj(e,t={}){return e=e?.map(r=>this.runtime.isError(r)?this._toErrorObject(r):r),this.settings.argumentsArrayName==null?e.length===1&&!Array.isArray(e[0])&&this.runtime.isBuffer(e[0])!==!0&&!(e[0]instanceof Date)?t=typeof e[0]=="object"&&e[0]!=null?{...e[0],...t}:{0:e[0],...t}:t={...t,...e}:t={...t,[this.settings.argumentsArrayName]:e},t}_cloneError(e){const t=new e.constructor;return Object.getOwnPropertyNames(e).forEach(r=>{t[r]=e[r]}),t}_toErrorObject(e){return{nativeError:e,name:e.name??"Error",message:e.message,stack:this.runtime.getErrorTrace(e)}}_addMetaToLogObj(e,t,r){return{...e,[this.settings.metaProperty]:this.runtime.getMeta(t,r,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(e){if(e==null)return"";let t=this.settings.prettyLogTemplate;const r={};t.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?t=t.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):this.settings.prettyLogTimeZone==="UTC"?(r.yyyy=e?.date?.getUTCFullYear()??"----",r.mm=ke(e?.date?.getUTCMonth(),2,1),r.dd=ke(e?.date?.getUTCDate(),2),r.hh=ke(e?.date?.getUTCHours(),2),r.MM=ke(e?.date?.getUTCMinutes(),2),r.ss=ke(e?.date?.getUTCSeconds(),2),r.ms=ke(e?.date?.getUTCMilliseconds(),3)):(r.yyyy=e?.date?.getFullYear()??"----",r.mm=ke(e?.date?.getMonth(),2,1),r.dd=ke(e?.date?.getDate(),2),r.hh=ke(e?.date?.getHours(),2),r.MM=ke(e?.date?.getMinutes(),2),r.ss=ke(e?.date?.getSeconds(),2),r.ms=ke(e?.date?.getMilliseconds(),3));const n=this.settings.prettyLogTimeZone==="UTC"?e?.date:new Date(e?.date?.getTime()-e?.date?.getTimezoneOffset()*6e4);r.rawIsoStr=n?.toISOString(),r.dateIsoStr=n?.toISOString().replace("T"," ").replace("Z",""),r.logLevelName=e?.logLevelName,r.fileNameWithLine=e?.path?.fileNameWithLine??"",r.filePathWithLine=e?.path?.filePathWithLine??"",r.fullFilePath=e?.path?.fullFilePath??"";let s=this.settings.parentNames?.join(this.settings.prettyErrorParentNamesSeparator);return s=s!=null&&e?.name!=null?s+this.settings.prettyErrorParentNamesSeparator:void 0,r.name=e?.name!=null||s!=null?(s??"")+e?.name:"",r.nameWithDelimiterPrefix=r.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+r.name:"",r.nameWithDelimiterSuffix=r.name.length>0?r.name+this.settings.prettyErrorLoggerNameDelimiter:"",this.settings.overwrite?.addPlaceholders!=null&&this.settings.overwrite?.addPlaceholders(e,r),En(this.settings,t,r)}}class Mc extends _c{constructor(e,t){const r=typeof window<"u"&&typeof document<"u",n=r?window.chrome!==void 0&&window.CSS!==void 0&&window.CSS.supports("color","green"):!1,s=r?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1;e=e||{},e.stylePrettyLogs=e.stylePrettyLogs&&r&&!n?!1:e.stylePrettyLogs,super(e,t,s?4:5)}log(e,t,...r){return super.log(e,t,...r)}silly(...e){return super.log(0,"SILLY",...e)}trace(...e){return super.log(1,"TRACE",...e)}debug(...e){return super.log(2,"DEBUG",...e)}info(...e){return super.log(3,"INFO",...e)}warn(...e){return super.log(4,"WARN",...e)}error(...e){return super.log(5,"ERROR",...e)}fatal(...e){return super.log(6,"FATAL",...e)}getSubLogger(e,t){return super.getSubLogger(e,t)}}const ce=new Mc({minLevel:4});var Nc=(i=>(i.login="login",i.enter="enter",i))(Nc||{});const Zm={login:"login",enter:"enter"},jm=["+972-504040624","+972-525656377"],Sc=new Date(2024,0,9,20,0),Oc="production",re=`enviroments/${Oc}`,Ss="Users",Fc="BookingsObjects",Rc="Notifications",ep="Errors",tp="Helpers",Ft="PublicData",Ot="Workers",Os="Bookings",Ve="Businesses",rp="Reports",Wr="publicData",Lc="scheduleNotifications",Uc="recurrenceEvents",Wc="recurrenceBookings",Hc="multiEventsTimes",Fs="LikesCollection",Rs="BusinessData",Vc="Counters",zc="sasimple",$c="phone",Ls="^&8@^",Us="^&9@^";var Pn=(i=>(i[i.add=0]="add",i[i.remove=1]="remove",i))(Pn||{}),wo=(i=>(i[i.increment=0]="increment",i[i.decrement=1]="decrement",i))(wo||{}),xt=(i=>(i[i.basic=0]="basic",i[i.advanced=1]="advanced",i[i.trial=2]="trial",i[i.landingPage=3]="landingPage",i[i.golden=4]="golden",i))(xt||{}),U=(i=>(i[i.sendSms=0]="sendSms",i[i.updateDisplayName=1]="updateDisplayName",i[i.logout=2]="logout",i[i.serverError=3]="serverError",i[i.storageError=4]="storageError",i[i.listener=5]="listener",i[i.notLogedIn=6]="notLogedIn",i[i.illegalFields=7]="illegalFields",i[i.passedLimit=8]="passedLimit",i[i.notFoundItem=9]="notFoundItem",i[i.takenBooking=10]="takenBooking",i[i.overlapWithOntherItem=11]="overlapWithOntherItem",i[i.takenMultiBooking=12]="takenMultiBooking",i[i.alreadyWorker=13]="alreadyWorker",i[i.userNotFound=14]="userNotFound",i[i.verification=15]="verification",i[i.network=16]="network",i[i.emptyField=17]="emptyField",i[i.alreadyExistItem=18]="alreadyExistItem",i[i.uploadImages=19]="uploadImages",i[i.notSelectedImages=20]="notSelectedImages",i[i.wrongOptCode=21]="wrongOptCode",i[i.expiredOpt=22]="expiredOpt",i[i.unknown=23]="unknown",i[i.timeout=24]="timeout",i[i.purchaseError=25]="purchaseError",i[i.anonymouslySignIn=26]="anonymouslySignIn",i[i.lowSubType=27]="lowSubType",i[i.coincidingEvent=28]="coincidingEvent",i[i.coincidingHoliday=29]="coincidingHoliday",i[i.realTimeServerError=30]="realTimeServerError",i[i.blockedUser=31]="blockedUser",i[i.noPermission=32]="noPermission",i[i.paymentProblem=33]="paymentProblem",i[i.currentlyOrderingForTime=34]="currentlyOrderingForTime",i[i.notFoundBusiness=35]="notFoundBusiness",i[i.savePaymentDataError=36]="savePaymentDataError",i[i.redeemDepositError=37]="redeemDepositError",i[i.saveDepositDataError=38]="saveDepositDataError",i[i.endOfWork=39]="endOfWork",i[i.invoiceCreation=40]="invoiceCreation",i[i.cantBookRecurrenceOnDates=41]="cantBookRecurrenceOnDates",i[i.cantBookRecurrenceOnEndlessDates=42]="cantBookRecurrenceOnEndlessDates",i[i.eventHasNoAccurances=43]="eventHasNoAccurances",i[i.workerDeleteTheBookingMeanwhile=44]="workerDeleteTheBookingMeanwhile",i[i.workerUpdatedTheBookingMeanwhile=45]="workerUpdatedTheBookingMeanwhile",i[i.workerDeleteEventMeanwhile=46]="workerDeleteEventMeanwhile",i[i.workerUpdatedTheBookingWhilePayment=47]="workerUpdatedTheBookingWhilePayment",i[i.blockCard=48]="blockCard",i[i.stolenCard=49]="stolenCard",i[i.callCreditCompany=50]="callCreditCompany",i[i.transactionNotConfirmed=51]="transactionNotConfirmed",i[i.fakeCard=52]="fakeCard",i[i.wrongCVV=53]="wrongCVV",i[i.worngCAVVUCAF=54]="worngCAVVUCAF",i[i.worngAvs=55]="worngAvs",i[i.networkDisconnect=56]="networkDisconnect",i[i.partlyConfirm=57]="partlyConfirm",i[i.lackOfPointsStarsMilesOtherBenefit=58]="lackOfPointsStarsMilesOtherBenefit",i[i.unauthorizedCardAtTheTerminal=59]="unauthorizedCardAtTheTerminal",i[i.invalidBalanceCode=60]="invalidBalanceCode",i[i.cardNotAssociatedWithTheNetwork=61]="cardNotAssociatedWithTheNetwork",i[i.cardIsNotValid=62]="cardIsNotValid",i[i.currencyTypeIsNotAllowed=63]="currencyTypeIsNotAllowed",i[i.thereIsNoAuthorizationForACreditTypeInTheTransaction=64]="thereIsNoAuthorizationForACreditTypeInTheTransaction",i[i.invalidId=65]="invalidId",i[i.noTreatment=66]="noTreatment",i[i.terminalNotAuthorizedToWorkWithThisMethodTheTerminalIsNotAuthorized=67]="terminalNotAuthorizedToWorkWithThisMethodTheTerminalIsNotAuthorized",i[i.authenticationErrorTerminalReference=68]="authenticationErrorTerminalReference",i[i.exceedingTheNumberOfPayments=69]="exceedingTheNumberOfPayments",i[i.communicationError=70]="communicationError",i[i.canceledTransaction=71]="canceledTransaction",i[i.invalidToken=72]="invalidToken",i[i.terminalNotAuthorizedToUseTheToken=73]="terminalNotAuthorizedToUseTheToken",i[i.deferredCharge=74]="deferredCharge",i[i.approvalWithoutCharge=75]="approvalWithoutCharge",i[i.receivingTransactionDetails=76]="receivingTransactionDetails",i[i.theCardDetailsWereNotReadInFull=77]="theCardDetailsWereNotReadInFull",i[i.theAmountOfTheItemsDoesNotMatch=78]="theAmountOfTheItemsDoesNotMatch",i[i.YouMustEnterAFirstOrLastName=79]="YouMustEnterAFirstOrLastName",i[i.transactionDescriptionMustBeEntered=80]="transactionDescriptionMustBeEntered",i[i.youCanCreditTheEntireTransactionOrASmallAmount=81]="youCanCreditTheEntireTransactionOrASmallAmount",i[i.bigDiffrentBetweenLoginAndDelete=82]="bigDiffrentBetweenLoginAndDelete",i[i.providerNotAllowed=83]="providerNotAllowed",i[i.userDisable=84]="userDisable",i[i.providerAlreadyLinked=85]="providerAlreadyLinked",i[i.credentialAlreadyInUse=86]="credentialAlreadyInUse",i[i.accountAlreadyExists=87]="accountAlreadyExists",i[i.invalidCredential=88]="invalidCredential",i[i.userMissmatch=89]="userMissmatch",i[i.noSuchProvider=90]="noSuchProvider",i[i.duplicateBusinesssName=91]="duplicateBusinesssName",i[i.alreadyExistPhone=92]="alreadyExistPhone",i[i.userExitManually=93]="userExitManually",i[i.tooManyAttempts=94]="tooManyAttempts",i[i.expiredCode=95]="expiredCode",i[i.cantUpdateEmailTooShortTimeBetween=96]="cantUpdateEmailTooShortTimeBetween",i[i.cantUpdatePhonelTooShortTimeBetween=97]="cantUpdatePhonelTooShortTimeBetween",i[i.invalidPhoneNumber=98]="invalidPhoneNumber",i))(U||{});class q{static _singleton=new q;constructor(){}static GI(){return this._singleton}errorCode=100;error=U.unknown;details="";addError({code:e,error:t,details:r}){this.error=t||this.error,this.errorCode=e||this.errorCode,this.details=r||this.details}}class Tr{code="";name="";symbol="";constructor({code:e="",name:t="",symbol:r=""}={}){this.code=e,this.name=t,this.symbol=r}static fromJson(e){return new Tr({code:e.code||"",name:e.name||"",symbol:e.symbol||""})}toJson(){return{code:this.code,name:this.name,symbol:this.symbol}}isEqual(e){return e.code===this.code}toString(){return JSON.stringify(this.toJson(),null,2)}}const wr=new Tr({code:"USD",name:"US Dollar",symbol:"$"}),Hr=5;class Ct{static currentBusinesssId="";static hasPaddingFromTop=!1;static paddingFromTop=0;static attemptsLeftForCardPassword=Hr;static productionVersion=!0;static developers={}}class vr{static _singleton=new vr;constructor(){}static GI(){return vr._singleton}getLisksChildPath(e){const t=`${Ve}/${Ct.currentBusinesssId}/${Ot}`,r=`${e}/${Fs}`;return`${t}/${r}`}getImageStorageName(e,t){const r=e.toUpperCase(),n=t.split(r);return`${r}${n[1].split(".jpg")[0]}`}getLikesChildPath(e,t,r){const n=`${Ve}/${t}/${Ot}`,s=`${e}/${Fs}`;return`${n}/${s}/${r}`}getBusinessDataPath(e){return`${Ve}/${e}/${Rs}`}getWorkerCountersPath(e,t){return`${Ve}/${e}/${Ot}/${t}/${Vc}`}getMessageCounterPath(e){return`${Ve}/${e}/${Rs}/messagesCounter`}userBookingsPathByBooking(e){return`${Ss}/${e.customerId}/${Ft}/${Wr}/${Os}`}userBookingsPathByUser(e){return`${Ss}/${e}/${Ft}/${Wr}/${Os}`}workerBookingsPath(e){return`${Ve}/${e.buisnessId}/${Ot}/${e.workerId}/${Ft}/${Wr}/${Fc}`}}const qc={0:"muslim",1:"christian",2:"jewish"},Gc={muslim:0,christian:1,jewish:2};var yt=(i=>(i[i.onHold=0]="onHold",i[i.needCancel=1]="needCancel",i[i.waitingList=2]="waitingList",i[i.withDebts=3]="withDebts",i[i.withOutRecipts=4]="withOutRecipts",i[i.withOnlinePayment=5]="withOnlinePayment",i[i.withoutConfirmArrival=6]="withoutConfirmArrival",i))(yt||{});const Ws={0:"waitingsForApproval",1:"waitingsForCancel",2:"waitingList",4:"withOutRecipts",3:"withDebts",5:"withOnlinePayment",6:"withoutConfirmArrival"};class he{id="";token="";constructor(e){e&&(this.id=e.I||"",this.token=e.T||"")}static fromShopIconUrl(e){const t=new he;try{const r=e.split("SHOPICON");t.id=r[1].split("?alt")[0];const n=e.split("&token=");return t.token=n[1],t}catch{return new he}}static fromJson(e){const t=new he;return t.id=e.I||"",t.token=e.T||"",t}static fromJsonStr(e){const t=JSON.parse(e),r=new he;return r.id=t.I||"",r.token=t.T||"",r}get isEmpty(){return this.token===""||this.id===""}get isNotEmpty(){return this.token!==""&&this.id!==""}isEqual(e){return e.id==this.id&&e.token==this.token}getShopIconPath(e){return this.token===""||this.id===""?"":`https://firebasestorage.googleapis.com/v0/b/managementsystemapp-c1fda.appspot.com/o/enviroments%2F${re.replace("enviroments/","")}%2F${e}%2Fimages%2Flogos%2FSHOPICON${this.id}?alt=media&token=${this.token}`}toJsonStr(){const e={I:this.id,T:this.token};return JSON.stringify(e)}toJson(){return{I:this.id,T:this.token}}}class yr{businessId="";shopIcon=new he;businessName="";constructor({businessId:e="",businessName:t="",shopIcon:r=new he}={}){this.businessId=e,this.shopIcon=r,this.businessName=t}static empty(){return new yr}static fromJsonStr(e){const t=JSON.parse(e),r=yr.empty();return r.businessId=t.businessId,r.businessName=t.businessName,t.shopIcon&&(r.shopIcon=he.fromJsonStr(t.shopIcon)),r}toJsonStr(){const e={businessId:this.businessId,shopIcon:this.shopIcon.toJsonStr(),businessName:this.businessName};return JSON.stringify(e)}}var Rt=(i=>(i[i.Barber=0]="Barber",i[i.Polish=1]="Polish",i[i.Beautician=2]="Beautician",i[i.ManicurePedicure=3]="ManicurePedicure",i[i.Eyelashes=4]="Eyelashes",i[i.Eyebrows=5]="Eyebrows",i[i.Braids=6]="Braids",i[i.MakeUpArtist=7]="MakeUpArtist",i[i.TattooArtist=8]="TattooArtist",i[i.HairRemoval=9]="HairRemoval",i[i.Masseur=10]="Masseur",i[i.Physiotherapy=11]="Physiotherapy",i[i.Cobblers=12]="Cobblers",i[i.Clown=13]="Clown",i[i.SocialWorker=14]="SocialWorker",i[i.Magician=15]="Magician",i[i.Doctor=16]="Doctor",i[i.Veterinarian=17]="Veterinarian",i[i.CommunicationTherapist=18]="CommunicationTherapist",i[i.DogGroomer=19]="DogGroomer",i[i.DJ=20]="DJ",i[i.Psychologist=21]="Psychologist",i[i.Tutor=22]="Tutor",i[i.WeddingDresses=23]="WeddingDresses",i[i.DanceTeacher=24]="DanceTeacher",i[i.Babysitter=25]="Babysitter",i[i.Reflexologist=26]="Reflexologist",i[i.Dietitian=27]="Dietitian",i[i.CarWash=28]="CarWash",i[i.Photographer=29]="Photographer",i[i.SwimmingTeacher=30]="SwimmingTeacher",i[i.Counselor=31]="Counselor",i[i.Mentor=32]="Mentor",i[i.TennisCoach=33]="TennisCoach",i[i.PrivateChef=34]="PrivateChef",i[i.PersonalTrainer=35]="PersonalTrainer",i[i.Lawyer=36]="Lawyer",i[i.Sales=37]="Sales",i[i.RealEstate=38]="RealEstate",i[i.DrivingTeacher=39]="DrivingTeacher",i[i.InvestmentAdvice=40]="InvestmentAdvice",i[i.Library=41]="Library",i[i.Tailor=42]="Tailor",i[i.Restaurant=43]="Restaurant",i[i.NailConstruction=44]="NailConstruction",i[i.Dentist=45]="Dentist",i[i.BeautysSalon=46]="BeautysSalon",i[i.Washer=47]="Washer",i[i.CleaningSofas=48]="CleaningSofas",i[i.Other=49]="Other",i))(Rt||{});const Yc={0:"barber",1:"polish",48:"cleaningSofas",2:"beautician",3:"manicurePedicure",4:"eyelashes",5:"eyebrows",25:"babysitter",6:"braids",7:"makeUpArtist",8:"tattooArtist",9:"hairRemoval",10:"masseur",12:"cobblers",13:"clown",14:"socialWorker",15:"magician",16:"doctor",20:"dj",17:"veterinarian",18:"communicationTherapist",19:"dogGroomer",21:"psychologist",11:"physiotherapy",22:"Tutor",23:"weddingDresses",24:"danceTeacher",26:"reflexologist",27:"dietitian",28:"carWash",29:"photographer",30:"swimmingTeacher",31:"counselor",32:"mentor",33:"tennisCoach",34:"privateChef",35:"personalTrainer",36:"lawyer",37:"sales",38:"realEstate",39:"drivingTeacher",40:"investmentAdvice",41:"library",49:"other",42:"tailor",43:"restaurant",44:"nailConstruction",45:"dentist",46:"beautysSalon",47:"washer"},vo={barber:0,cleaningSofas:48,polish:1,beautician:2,manicurePedicure:3,eyelashes:4,eyebrows:5,babysitter:25,braids:6,makeUpArtist:7,tattooArtist:8,hairRemoval:9,masseur:10,cobblers:12,clown:13,socialWorker:14,magician:15,doctor:16,veterinarian:17,communicationTherapist:18,dogGroomer:19,psychologist:21,physiotherapy:11,Tutor:22,weddingDresses:23,danceTeacher:24,reflexologist:26,dietitian:27,carWash:28,photographer:29,swimmingTeacher:30,counselor:31,mentor:32,dj:20,tennisCoach:33,privateChef:34,personalTrainer:35,lawyer:36,sales:37,realEstate:38,drivingTeacher:39,investmentAdvice:40,library:41,other:49,restaurant:43,tailor:42,nailConstruction:44,dentist:45,beautysSalon:46,washer:47},Jc={noPayNoPayment:0,noPayNoPaymentWithReceipts:1,pay100For30WithReceipts:2,pay70For700Actiions:3},Kc=15,Qc=20,Xc={simpletor_golden_business_month_1:1e3,simpletor_advanced_business_month_1:200,simpletor_basic_business_month_1:0,simpletor_landing_business_month_1:0},Zc={simpletor_golden_business_month_1:100,simpletor_advanced_business_month_1:20,simpletor_basic_business_month_1:10,simpletor_landing_business_month_1:10};class Kr{messagesCounter=0;paymentRequestCounter=0;listener;constructor(e=0,t=0){this.messagesCounter=e,this.paymentRequestCounter=t}static forNewBusiness(){return new Kr(Qc,Kc)}static fromProductId(e){return new Kr(Xc[e]||0,Zc[e]||0)}setBusinessData(e){this.messagesCounter=parseInt(e.val().messagesCounter.toString())||0,this.paymentRequestCounter=parseInt(e.val().paymentRequestCounter.toString())||0}toJson(){const e={};return e.messagesCounter=this.messagesCounter,e.paymentRequestCounter=this.paymentRequestCounter,e}}function jc(i){const e=i.toString(),t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16);return(t*299+r*587+n*114)/1e3>155}function Hs(i,e){if(i===null)return e===null;if(e===null||i.size!==e.size)return!1;if(i===e)return!0;for(const t of i)if(!e.has(t))return!1;return!0}async function ip(){return!0}async function np(i){return new Promise(e=>setTimeout(e,i))}var Bn=(i=>(i[i.light=0]="light",i[i.dark=1]="dark",i))(Bn||{});class Ge{background=0;primary=0;surface=0;inverseSurface=0;tertiary=0;id="";fontName="";themeName="";constructor({background:e=0,primary:t=0,surface:r=0,inverseSurface:n=0,tertiary:s=0,id:a,fontName:c="",themeName:o=""}){this.background=e,this.primary=t,this.surface=r,this.inverseSurface=n,this.tertiary=s,this.id=a,this.fontName=c,this.themeName=o}static fromJson(e,t){return new Ge({background:e.background||0,primary:e.primary||0,id:t,themeName:e.themeName||"",surface:e.surface||0,tertiary:e.tertiary||0,inverseSurface:e.inverseSurface||0,fontName:e.fontName||""})}static fromBusinessTheme(e){return new Ge({themeName:e.themeName,background:e.background,primary:e.primary,tertiary:e.tertiary,id:e.id,surface:e.surface,inverseSurface:e.inverseSurface,fontName:e.fontName})}isEqual(e,t=!0){const r=e.toJson();t&&(r.id=e.id);const n=this.toJson();return t&&(n.id=this.id),JSON.stringify(r)===JSON.stringify(n)}get brightness(){return jc(this.background)?1:0}toJson(){const e={};return this.fontName!==""&&(e.fontName=this.fontName),this.surface!==0&&(e.surface=this.surface),this.inverseSurface!==0&&(e.inverseSurface=this.inverseSurface),e.tertiary=this.tertiary,e.themeName=this.themeName,this.background!==0&&(e.background=this.background),this.primary!==0&&(e.primary=this.primary),e}}var He=(i=>(i[i.Grid=0]="Grid",i[i.Carousel=1]="Carousel",i[i.EndlessCarousel=2]="EndlessCarousel",i))(He||{});const Vs={0:"grid",1:"carousel",2:"endlessCarousel"},zs={grid:0,carousel:1,endlessCarousel:2},yo={dark:new Ge({fontName:"Varela Round",themeName:"Original",id:"dark",inverseSurface:4279637532,background:4280229673,surface:4280690225,tertiary:4279834916,primary:4294940672}),darkIos:new Ge({fontName:"Varela Round",themeName:"Dark",id:"darkIos",inverseSurface:4281084974,background:4279637528,surface:4280361252,tertiary:4278190080,primary:4278225100}),light:new Ge({fontName:"Varela Round",themeName:"Pink",id:"light",inverseSurface:4294831859,background:4294375158,surface:4294967295,tertiary:4294243315,primary:4294936498}),lightIos:new Ge({fontName:"Varela Round",themeName:"Light",id:"lightIos",inverseSurface:4292664541,background:4294111991,surface:4294967295,tertiary:4293322471,primary:4278221567})};class Se{amount=0;currency=wr;constructor({amount:e,currency:t}){const r=parseFloat(e)||0;this.amount=parseFloat(r.toFixed(2)),this.currency=t}static fromJson(e){const t=new Se({amount:"0.0",currency:Tr.fromJson(e.currency)});return e.amount!=null&&(t.amount=typeof e.amount=="number"?e.amount:parseFloat(e.amount)),t}add(e){e.currency.code===this.currency.code&&(this.amount+=e.amount)}isEqual(e){return this.amount===e.amount&&this.currency.code===e.currency.code}toString(){return new Intl.NumberFormat("en-US",{style:"currency",currency:this.currency.code}).format(this.amount)}toJson(){return{amount:this.amount,currency:this.currency.toJson()}}}class $t{description="";price;imageUrl="";id="";name="";createdAt=new Date;constructor({name:e="",description:t="",id:r="",price:n,imageUrl:s=""}={}){this.name=e||"",this.description=t||"",this.id=r||"",this.price=n,this.imageUrl=s||""}static fromProduct(e){const t=new $t({id:e.id,description:e.description,price:e.price,imageUrl:e.imageUrl,name:e.name});return t.createdAt=e.createdAt,t}static fromJson(e,t){const r=new $t({id:t,description:e.description,price:Se.fromJson(e.price),imageUrl:e.imageUrl,name:e.name});return r.createdAt=e.createdAt,r}toJson(){return{description:this.description,price:this.price?this.price.toJson():null,imageUrl:this.imageUrl,name:this.name,createdAt:this.createdAt}}toString(){return JSON.stringify(this.toJson())}}class qt{title="";content="";lastModified="";index="";id="";popOnEnter=!1;constructor(e,t,r,n,s,a=!1){this.title=e,this.content=t,this.id=r,this.lastModified=n,this.index=s,this.popOnEnter=a}static fromJson(e,t){return new qt(e.title??"",e.content??"",e.id??"",e.lastModified??"",t,e.popOnEnter??!1)}static fromUpdate(e){return new qt(e.title,e.content,e.id,e.lastModified,e.index,e.popOnEnter)}toJson(){const e={};return e.title=this.title,e.id=this.id,e.content=this.content,this.lastModified!==""&&(e.lastModified=this.lastModified),this.popOnEnter&&(e.popOnEnter=this.popOnEnter),e}isValid(){return this.title!==""&&this.content!==""}toString(){return JSON.stringify(this,null,2)}}class Ye{storyView=He.Grid;productView=He.Grid;changingImages=[];products=new Map;updates=new Map;storyTitle="";shopIconUrl="";productsTitle="";bottomIcons=!1;changingImagesSwapSeconds=6;pickedThemeKey="darkIos";lastTimeToUpdateTerm=new Date(0);businessThemes=new Map;term="";mustConfirmTerm=!1;popTermOnFirstEneter=!1;isPrivateTheme=!1;constructor({storyView:e=He.Grid,productView:t=He.Grid,changingImagesSwapSeconds:r=6,shopIconUrl:n="",pickedThemeKey:s="darkIos"}={}){this.changingImagesSwapSeconds=r,this.shopIconUrl=n,this.pickedThemeKey=s}static fromJson(e){const t=new Ye;return Object.entries(e.products).forEach(([r,n])=>{t.products.set(r,$t.fromJson(n,r))}),e.changingImages&&(t.changingImages=e.changingImages.map(r=>r)),e.updates&&Object.entries(e.updates).forEach(([r,n])=>{t.updates.set(r,qt.fromJson(n,r))}),e.storyView&&(t.storyView=zs[e.storyView]||He.EndlessCarousel),e.productView&&(t.productView=zs[e.productView]||He.Grid),e.businessThemes&&Object.entries(e.businessThemes).forEach(([r,n])=>{t.businessThemes.set(r,Ge.fromJson(n,r))}),e.lastTimeToUpdateTerm&&(t.lastTimeToUpdateTerm=new Date(e.lastTimeToUpdateTerm)||new Date(0)),t.pickedThemeKey=e.pickedThemeKey||"darkIoss",t.term=e.term||"",t.bottomIcons=e.bottomIcons||!1,t.changingImagesSwapSeconds=e.changingImagesSwapSeconds||6,t.productsTitle=e.productsTitle||"",t.storyTitle=e.storyTitle||"",t.shopIconUrl=e.shopIcon||"",t.mustConfirmTerm=e.mustConfirmTerm||!1,t.popTermOnFirstEneter=e.popTermOnFirstEneter||!1,t.isPrivateTheme=e.isPrivateTheme||!1,t}get shopIconData(){return he.fromShopIconUrl(this.shopIconUrl)}static fromBusinessDesign(e){const t=new Ye;return e.products.forEach((r,n)=>{t.products.set(n,$t.fromProduct(r))}),t.changingImages=[...e.changingImages],e.updates.forEach((r,n)=>{t.updates.set(n,qt.fromUpdate(r))}),t.storyView=e.storyView,e.businessThemes.forEach((r,n)=>{t.businessThemes.set(n,Ge.fromBusinessTheme(r))}),t.shopIconUrl=e.shopIconUrl,t.pickedThemeKey=e.pickedThemeKey,t.lastTimeToUpdateTerm=e.lastTimeToUpdateTerm,t.changingImagesSwapSeconds=e.changingImagesSwapSeconds,t.term=e.term,t.bottomIcons=e.bottomIcons,t.productsTitle=e.productsTitle,t.productView=e.productView,t.storyTitle=e.storyTitle,t.mustConfirmTerm=e.mustConfirmTerm,t.popTermOnFirstEneter=e.popTermOnFirstEneter,t.isPrivateTheme=e.isPrivateTheme,t}toJson(){const e={};return this.storyView!==He.EndlessCarousel&&(e.storyView=Vs[this.storyView]),this.productView!==He.Grid&&(e.productView=Vs[this.storyView]),e.changingImages=this.changingImages,e.products={},this.products.forEach((t,r)=>{e.products[r]=t.toJson()}),e.updates={},this.updates.forEach((t,r)=>{e.updates[r]=t.toJson()}),this.mustConfirmTerm&&(e.mustConfirmTerm=this.mustConfirmTerm),this.popTermOnFirstEneter&&(e.popTermOnFirstEneter=this.popTermOnFirstEneter),this.term!==""&&(e.term=this.term),this.lastTimeToUpdateTerm!==new Date(0)&&(e.lastTimeToUpdateTerm=this.lastTimeToUpdateTerm.toISOString()),e.bottomIcons=this.bottomIcons,e.changingImagesSwapSeconds=this.changingImagesSwapSeconds,e.storyTitle=this.storyTitle,e.productsTitle=this.productsTitle,e.businessThemes={},this.businessThemes.forEach((t,r)=>{yo.hasOwnProperty(r)||(e.businessThemes[r]=t.toJson())}),e.pickedThemeKey=this.pickedThemeKey,e.shopIcon=this.shopIconUrl,e.isPrivateTheme=this.isPrivateTheme,e}}class At{businesseType=Rt.Other;currency=wr;notifyOnNewCustomer=!0;searchable=!0;billingIssue=new Map;isLandingPageMode=!1;allWorkersIds=new Map;workersIds=new Map;hypPath;expiredDate=new Date;shopPhone="";ownersName="";companyNumber="";ownersPhone="";masofNumber="";previewDoc="";instagramAccount="";revenueCatId="";pendingWorkersProductsId="";adress="";workersProductsId="";pendingProductId="";dynamicLink="";shopName="";productId="";businessId="";createdAt=new Date;blockedUsersTemp=new Map;lastTimeConnected=new Date;businessData=new Kr;design=new Ye;constructor({shopName:e="",businessId:t,productId:r="",adress:n="",dynamicLink:s="",revenueCatId:a="",ownersName:c="",instagramAccount:o="",shopPhone:u="",design:h}){this.shopName=e,this.businessId=t,this.productId=r,this.adress=n,this.dynamicLink=s,this.revenueCatId=a,this.ownersName=c,this.instagramAccount=o,this.shopPhone=u,this.design=h}static empty(){return new At({design:new Ye,businessId:""})}get businessPayLoadData(){return new yr({businessId:this.businessId,businessName:this.shopName,shopIcon:this.design.shopIconData})}static fromJson(e,t){const r=new At({businessId:t,design:new Ye});return r.setData(e,t),r}setData(e,t){if(this.businessId=t,e.currency&&(this.currency=Tr.fromJson(e.currency)),e.design)this.design=Ye.fromJson(e.design);else{const n=e.theme;this.design.pickedThemeKey=n,Object.entries(e.products).forEach(([s,a])=>{this.design.products.set(s,$t.fromJson(a,s))}),e.changingImages&&(this.design.changingImages=e.changingImages.map(s=>s)),e.updates&&e.updates.forEach((s,a)=>{this.design.updates.set(a.toString(),qt.fromJson(s,a.toString()))}),this.design.bottomIcons=e.bottomIcons??!1,this.design.storyTitle=e.storyTitle??"",this.design.changingImagesSwapSeconds=e.changingImagesSwapSeconds??6,this.design.shopIconUrl=e.shopIcon??""}this.previewDoc=e.previewDoc??"",this.workersProductsId=e.workersProductsId??"",this.pendingWorkersProductsId=e.pendingWorkersProductsId??"",this.shopName=e.shopName??"",this.isLandingPageMode=e.isLandingPageMode??!1,this.searchable=e.searchable??!0,e.expiredDate!=null&&(this.expiredDate=new Date(e.expiredDate)),this.notifyOnNewCustomer=e.notifyOnNewCustomer??!0,this.companyNumber=e.companyNumber??"",e.hypPath!=null&&(this.hypPath=Jc[e.hypPath]),this.allWorkersIds=new Map,e.allWorkersIds!=null&&Object.entries(e.allWorkersIds).forEach(([n,s])=>{this.allWorkersIds.set(n,s)});const r=this.businessId.split("--")[0];this.allWorkersIds.hasOwnProperty("+"+r)||this.allWorkersIds.set("+"+r,""),this.workersIds=new Map,e.workersIds!=null&&Object.entries(e.workersIds).forEach(([n,s])=>{this.workersIds.set(n,s)}),this.workersIds.hasOwnProperty(r)||this.workersIds.set(r,""),this.dynamicLink=e.dynamicLink??"",this.masofNumber=e.masofNumber??"",this.ownersName=e.ownersName??"",this.revenueCatId=e.revenueCatId??"",this.productId=e.productId??"",this.pendingProductId=e.pendingProductId??"",this.businesseType=vo[e.businesseType]??Rt.Other,this.instagramAccount=e.instagramAccount??"",this.adress=e.adress??"",this.shopPhone=e.shopPhone??"";try{e.billingIssue!=null&&Object.entries(e.billingIssue).forEach(([n,s])=>{this.billingIssue.set(n,s.toDate())})}catch{}e.createdAt instanceof ht?this.createdAt=e.createdAt.toDate():typeof e.createdAt=="string"&&(this.createdAt=new Date(e.createdAt)||new Date),e.lastTimeConnected!=null&&(this.lastTimeConnected=new Date(e.lastTimeConnected)||new Date)}toJson(){const e={};return e.notifyOnNewCustomer=this.notifyOnNewCustomer,e.currency=this.currency.toJson(),e.searchable=this.searchable,e.workersProductsId=this.workersProductsId,e.pendingWorkersProductsId=this.pendingWorkersProductsId,e.previewDoc=this.previewDoc,e.masofNumber=this.masofNumber,e.revenueCatId=this.revenueCatId,e.pendingProductId=this.pendingProductId,e.productId=this.productId,e.shopName=this.shopName,this.hypPath&&(e.hypPath=this.hypPath),this.billingIssue.size>0&&(e.billingIssue={},this.billingIssue.forEach((t,r)=>{e.billingIssue[r]=ht.fromDate(t)})),this.dynamicLink!==""&&(e.dynamicLink=this.dynamicLink),e.companyNumber=this.companyNumber,e.expiredDate=this.expiredDate,e.businesseType=this.businesseType,e.ownersName=this.ownersName,e.instagramAccount=this.instagramAccount,e.adress=this.adress,e.shopPhone=this.shopPhone,e.workersIds=this.workersIds,e.createdAt=this.createdAt,e.lastTimeConnected=this.lastTimeConnected,this.isLandingPageMode&&(e.isLandingPageMode=this.isLandingPageMode),e.design=this.design.toJson(),e}toString(){return JSON.stringify(this.toJson())}}class S{static microsecondsPerMillisecond=1e3;static millisecondsPerSecond=1e3;static secondsPerMinute=60;static minutesPerHour=60;static hoursPerDay=24;static microsecondsPerSecond=S.microsecondsPerMillisecond*S.millisecondsPerSecond;static microsecondsPerMinute=S.microsecondsPerSecond*S.secondsPerMinute;static microsecondsPerHour=S.microsecondsPerMinute*S.minutesPerHour;static microsecondsPerDay=S.microsecondsPerHour*S.hoursPerDay;static millisecondsPerMinute=S.millisecondsPerSecond*S.secondsPerMinute;static millisecondsPerHour=S.millisecondsPerMinute*S.minutesPerHour;static millisecondsPerDay=S.millisecondsPerHour*S.hoursPerDay;static secondsPerHour=S.secondsPerMinute*S.minutesPerHour;static secondsPerDay=S.secondsPerHour*S.hoursPerDay;static minutesPerDay=S.minutesPerHour*S.hoursPerDay;static zero=new S({seconds:0});_duration;days=0;hours=0;minutes=0;seconds=0;milliseconds=0;microseconds=0;constructor({days:e=0,hours:t=0,minutes:r=0,seconds:n=0,milliseconds:s=0,microseconds:a=0}){this._duration=a+S.microsecondsPerMillisecond*s+S.microsecondsPerSecond*n+S.microsecondsPerMinute*r+S.microsecondsPerHour*t+S.microsecondsPerDay*e}static _microseconds(e){return new S({microseconds:e})}add(e){return S._microseconds(this._duration+e._duration)}subtract(e){return S._microseconds(this._duration-e._duration)}multiply(e){return S._microseconds(Math.round(this._duration*e))}divide(e){if(e===0)throw new Error("IntegerDivisionByZeroException");return S._microseconds(Math.floor(this._duration/e))}lessThan(e){return this._duration<e._duration}greaterThan(e){return this._duration>e._duration}lessThanOrEqual(e){return this._duration<=e._duration}greaterThanOrEqual(e){return this._duration>=e._duration}get inDays(){return Math.floor(this._duration/S.microsecondsPerDay)}get inHours(){return Math.floor(this._duration/S.microsecondsPerHour)}get inMinutes(){return Math.floor(this._duration/S.microsecondsPerMinute)}get inSeconds(){return Math.floor(this._duration/S.microsecondsPerSecond)}get inMilliseconds(){return Math.floor(this._duration)}get inMicroseconds(){return this._duration}equals(e){return e instanceof S&&this._duration===e.inMicroseconds}compareTo(e){return this._duration-e._duration}}var xe=(i=>(i.waiting="waiting",i.approved="approved",i))(xe||{});const Do={waiting:"waiting",approved:"approved"},bo={waiting:"waiting",approved:"approved"};var Ie=(i=>(i.app="app",i.web="web",i.byWorker="byWorker",i))(Ie||{});const ko={app:"app",web:"web",byWorker:"byWorker"},Io={app:"app",web:"web",byWorker:"byWorker"};var Xe=(i=>(i.regular="regular",i.confirmArrival="confirmArrival",i))(Xe||{});const Vr={regular:"regular",confirmArrival:"confirmArrival"},vt={regular:"regular",confirmArrival:"confirmArrival"};var L=(i=>(i[i.message=0]="message",i[i.push=1]="push",i[i.none=2]="none",i[i.whatsapp=3]="whatsapp",i))(L||{});const eu={0:"message",1:"push",2:"none",3:"whatsapp"},Co={message:0,push:1,whatsapp:3,none:2};new S({hours:3});new S({minutes:5});var G=(i=>(i[i.male=0]="male",i[i.female=1]="female",i[i.anonymous=2]="anonymous",i))(G||{});const Gt={0:"male",1:"female",2:"anonymous"},Ze={male:0,female:1,anonymous:2};var j=(i=>(i[i.SMS=0]="SMS",i[i.SMSOrPush=1]="SMSOrPush",i[i.WhatsAppOrPush=2]="WhatsAppOrPush",i[i.WhatsApp=3]="WhatsApp",i[i.SMSOnly=4]="SMSOnly",i[i.WhatAppOnly=5]="WhatAppOnly",i[i.Push=6]="Push",i[i.PushOrWhatsApp=7]="PushOrWhatsApp",i[i.PushOrSMS=8]="PushOrSMS",i[i.OnlyPush=9]="OnlyPush",i))(j||{});const tu={0:"SMS",4:"SMSOnly",5:"WhatAppOnly",1:"SMSOrPush",2:"WhatsAppOrPush",3:"WhatsApp",9:"OnlyPush",7:"PushOrWhatsApp",8:"PushOrSMS",6:"Push"},di={SMS:0,SMSOrPush:1,WhatAppOnly:5,SMSOnly:4,WhatsAppOrPush:2,WhatsApp:3,OnlyPush:9,PushOrWhatsApp:7,PushOrSMS:8,Push:6},ru=/^[a-zA-Z0-9-_.~%]{1,900}$/;var zr=(i=>(i[i.shortestTreatment=0]="shortestTreatment",i[i.longestTreatment=1]="longestTreatment",i[i.custom=2]="custom",i[i.first=3]="first",i[i.last=4]="last",i[i.edges=5]="edges",i))(zr||{});const iu={3:"first",4:"last",5:"edges",0:"shortestTreatment",1:"longestTreatment",2:"custom"},nu={first:3,last:4,edges:5,shortestTreatment:0,longestTreatment:1,custom:2};function Ao(i,e,t,r){const n=t<i&&!(r>i),s=!(t<e)&&r>e;return n?"BEFORE":s?"AFTER":"STRIKE"}function ue(i,e){return new Date(i.getTime()+e.inMilliseconds)}function Ti(i,e){return new Date(i.getTime()-e.inMilliseconds)}function Pi(i,e){return new S({milliseconds:new Date(i.getTime()-e.getTime()).getTime()})}class Eo{start;end;constructor({start:e,end:t}){this.start=e,this.end=t}}function le(i){const e=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&e==="[object Date]"?new i.constructor(+i):typeof i=="number"||e==="[object Number]"||typeof i=="string"||e==="[object String]"?new Date(i):new Date(NaN)}function ne(i,e){return i instanceof Date?new i.constructor(e):new Date(e)}function To(i,e){const t=le(i);return isNaN(e)?ne(i,NaN):(e&&t.setDate(t.getDate()+e),t)}const Po=6048e5,su=864e5,au=6e4,ou=36e5,cu=1e3;let uu={};function Zt(){return uu}function lt(i,e){const t=Zt(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,n=le(i),s=n.getDay(),a=(s<r?7:0)+s-r;return n.setDate(n.getDate()-a),n.setHours(0,0,0,0),n}function Yt(i){return lt(i,{weekStartsOn:1})}function Bo(i){const e=le(i),t=e.getFullYear(),r=ne(i,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const n=Yt(r),s=ne(i,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const a=Yt(s);return e.getTime()>=n.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function $s(i){const e=le(i);return e.setHours(0,0,0,0),e}function Qr(i){const e=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return e.setUTCFullYear(i.getFullYear()),i.getTime()-e.getTime()}function hu(i,e){const t=$s(i),r=$s(e),n=t.getTime()-Qr(t),s=r.getTime()-Qr(r);return Math.round((n-s)/su)}function lu(i){const e=Bo(i),t=ne(i,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Yt(t)}function du(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function fu(i){if(!du(i)&&typeof i!="number")return!1;const e=le(i);return!isNaN(Number(e))}function mu(i){const e=le(i),t=ne(i,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const pu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gu=(i,e,t)=>{let r;const n=pu[i];return typeof n=="string"?r=n:e===1?r=n.one:r=n.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Bi(i){return(e={})=>{const t=e.width?String(e.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const xu={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},wu={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vu={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yu={date:Bi({formats:xu,defaultWidth:"full"}),time:Bi({formats:wu,defaultWidth:"full"}),dateTime:Bi({formats:vu,defaultWidth:"full"})},Du={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bu=(i,e,t,r)=>Du[i];function ur(i){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let n;if(r==="formatting"&&i.formattingValues){const a=i.defaultFormattingWidth||i.defaultWidth,c=t?.width?String(t.width):a;n=i.formattingValues[c]||i.formattingValues[a]}else{const a=i.defaultWidth,c=t?.width?String(t.width):i.defaultWidth;n=i.values[c]||i.values[a]}const s=i.argumentCallback?i.argumentCallback(e):e;return n[s]}}const ku={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Iu={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Cu={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Au={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Eu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Tu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Pu=(i,e)=>{const t=Number(i),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Bu={ordinalNumber:Pu,era:ur({values:ku,defaultWidth:"wide"}),quarter:ur({values:Iu,defaultWidth:"wide",argumentCallback:i=>i-1}),month:ur({values:Cu,defaultWidth:"wide"}),day:ur({values:Au,defaultWidth:"wide"}),dayPeriod:ur({values:Eu,defaultWidth:"wide",formattingValues:Tu,defaultFormattingWidth:"wide"})};function hr(i){return(e,t={})=>{const r=t.width,n=r&&i.matchPatterns[r]||i.matchPatterns[i.defaultMatchWidth],s=e.match(n);if(!s)return null;const a=s[0],c=r&&i.parsePatterns[r]||i.parsePatterns[i.defaultParseWidth],o=Array.isArray(c)?Mu(c,d=>d.test(a)):_u(c,d=>d.test(a));let u;u=i.valueCallback?i.valueCallback(o):o,u=t.valueCallback?t.valueCallback(u):u;const h=e.slice(a.length);return{value:u,rest:h}}}function _u(i,e){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&e(i[t]))return t}function Mu(i,e){for(let t=0;t<i.length;t++)if(e(i[t]))return t}function Nu(i){return(e,t={})=>{const r=e.match(i.matchPattern);if(!r)return null;const n=r[0],s=e.match(i.parsePattern);if(!s)return null;let a=i.valueCallback?i.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;const c=e.slice(n.length);return{value:a,rest:c}}}const Su=/^(\d+)(th|st|nd|rd)?/i,Ou=/\d+/i,Fu={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ru={any:[/^b/i,/^(a|c)/i]},Lu={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Uu={any:[/1/i,/2/i,/3/i,/4/i]},Wu={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Hu={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Vu={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zu={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$u={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},qu={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gu={ordinalNumber:Nu({matchPattern:Su,parsePattern:Ou,valueCallback:i=>parseInt(i,10)}),era:hr({matchPatterns:Fu,defaultMatchWidth:"wide",parsePatterns:Ru,defaultParseWidth:"any"}),quarter:hr({matchPatterns:Lu,defaultMatchWidth:"wide",parsePatterns:Uu,defaultParseWidth:"any",valueCallback:i=>i+1}),month:hr({matchPatterns:Wu,defaultMatchWidth:"wide",parsePatterns:Hu,defaultParseWidth:"any"}),day:hr({matchPatterns:Vu,defaultMatchWidth:"wide",parsePatterns:zu,defaultParseWidth:"any"}),dayPeriod:hr({matchPatterns:$u,defaultMatchWidth:"any",parsePatterns:qu,defaultParseWidth:"any"})},_o={code:"en-US",formatDistance:gu,formatLong:yu,formatRelative:bu,localize:Bu,match:Gu,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Yu(i){const e=le(i);return hu(e,mu(e))+1}function Mo(i){const e=le(i),t=Yt(e).getTime()-lu(e).getTime();return Math.round(t/Po)+1}function qn(i,e){const t=le(i),r=t.getFullYear(),n=Zt(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=ne(i,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const c=lt(a,e),o=ne(i,0);o.setFullYear(r,0,s),o.setHours(0,0,0,0);const u=lt(o,e);return t.getTime()>=c.getTime()?r+1:t.getTime()>=u.getTime()?r:r-1}function Ju(i,e){const t=Zt(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,n=qn(i,e),s=ne(i,0);return s.setFullYear(n,0,r),s.setHours(0,0,0,0),lt(s,e)}function No(i,e){const t=le(i),r=lt(t,e).getTime()-Ju(t,e).getTime();return Math.round(r/Po)+1}function K(i,e){const t=i<0?"-":"",r=Math.abs(i).toString().padStart(e,"0");return t+r}const nt={y(i,e){const t=i.getFullYear(),r=t>0?t:1-t;return K(e==="yy"?r%100:r,e.length)},M(i,e){const t=i.getMonth();return e==="M"?String(t+1):K(t+1,2)},d(i,e){return K(i.getDate(),e.length)},a(i,e){const t=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(i,e){return K(i.getHours()%12||12,e.length)},H(i,e){return K(i.getHours(),e.length)},m(i,e){return K(i.getMinutes(),e.length)},s(i,e){return K(i.getSeconds(),e.length)},S(i,e){const t=e.length,r=i.getMilliseconds(),n=Math.floor(r*Math.pow(10,t-3));return K(n,e.length)}},Mt={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ku={G:function(i,e,t){const r=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(i,e,t){if(e==="yo"){const r=i.getFullYear(),n=r>0?r:1-r;return t.ordinalNumber(n,{unit:"year"})}return nt.y(i,e)},Y:function(i,e,t,r){const n=qn(i,r),s=n>0?n:1-n;if(e==="YY"){const a=s%100;return K(a,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):K(s,e.length)},R:function(i,e){const t=Bo(i);return K(t,e.length)},u:function(i,e){const t=i.getFullYear();return K(t,e.length)},Q:function(i,e,t){const r=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return K(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(i,e,t){const r=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return K(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(i,e,t){const r=i.getMonth();switch(e){case"M":case"MM":return nt.M(i,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(i,e,t){const r=i.getMonth();switch(e){case"L":return String(r+1);case"LL":return K(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(i,e,t,r){const n=No(i,r);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):K(n,e.length)},I:function(i,e,t){const r=Mo(i);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):K(r,e.length)},d:function(i,e,t){return e==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):nt.d(i,e)},D:function(i,e,t){const r=Yu(i);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):K(r,e.length)},E:function(i,e,t){const r=i.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(i,e,t,r){const n=i.getDay(),s=(n-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return K(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(i,e,t,r){const n=i.getDay(),s=(n-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return K(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(i,e,t){const r=i.getDay(),n=r===0?7:r;switch(e){case"i":return String(n);case"ii":return K(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(i,e,t){const n=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(i,e,t){const r=i.getHours();let n;switch(r===12?n=Mt.noon:r===0?n=Mt.midnight:n=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(i,e,t){const r=i.getHours();let n;switch(r>=17?n=Mt.evening:r>=12?n=Mt.afternoon:r>=4?n=Mt.morning:n=Mt.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(i,e,t){if(e==="ho"){let r=i.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return nt.h(i,e)},H:function(i,e,t){return e==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):nt.H(i,e)},K:function(i,e,t){const r=i.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):K(r,e.length)},k:function(i,e,t){let r=i.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):K(r,e.length)},m:function(i,e,t){return e==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):nt.m(i,e)},s:function(i,e,t){return e==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):nt.s(i,e)},S:function(i,e){return nt.S(i,e)},X:function(i,e,t,r){const s=(r._originalDate||i).getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Gs(s);case"XXXX":case"XX":return gt(s);case"XXXXX":case"XXX":default:return gt(s,":")}},x:function(i,e,t,r){const s=(r._originalDate||i).getTimezoneOffset();switch(e){case"x":return Gs(s);case"xxxx":case"xx":return gt(s);case"xxxxx":case"xxx":default:return gt(s,":")}},O:function(i,e,t,r){const s=(r._originalDate||i).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+qs(s,":");case"OOOO":default:return"GMT"+gt(s,":")}},z:function(i,e,t,r){const s=(r._originalDate||i).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+qs(s,":");case"zzzz":default:return"GMT"+gt(s,":")}},t:function(i,e,t,r){const n=r._originalDate||i,s=Math.floor(n.getTime()/1e3);return K(s,e.length)},T:function(i,e,t,r){const s=(r._originalDate||i).getTime();return K(s,e.length)}};function qs(i,e=""){const t=i>0?"-":"+",r=Math.abs(i),n=Math.floor(r/60),s=r%60;return s===0?t+String(n):t+String(n)+e+K(s,2)}function Gs(i,e){return i%60===0?(i>0?"-":"+")+K(Math.abs(i)/60,2):gt(i,e)}function gt(i,e=""){const t=i>0?"-":"+",r=Math.abs(i),n=K(Math.floor(r/60),2),s=K(r%60,2);return t+n+e+s}const Ys=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},So=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Qu=(i,e)=>{const t=i.match(/(P+)(p+)?/)||[],r=t[1],n=t[2];if(!n)return Ys(i,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Ys(r,e)).replace("{{time}}",So(n,e))},_n={p:So,P:Qu},Xu=/^D+$/,Zu=/^Y+$/,ju=["D","DD","YY","YYYY"];function Oo(i){return Xu.test(i)}function Fo(i){return Zu.test(i)}function Xr(i,e,t){const r=eh(i,e,t);if(console.warn(r),ju.includes(i))throw new RangeError(r)}function eh(i,e,t){const r=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const th=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ih=/^'([^]*?)'?$/,nh=/''/g,sh=/[a-zA-Z]/;function Be(i,e,t){const r=Zt(),n=t?.locale??r.locale??_o,s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=le(i);if(!fu(c))throw new RangeError("Invalid time value");const o={firstWeekContainsDate:s,weekStartsOn:a,locale:n,_originalDate:c};return e.match(rh).map(function(h){const d=h[0];if(d==="p"||d==="P"){const l=_n[d];return l(h,n.formatLong)}return h}).join("").match(th).map(function(h){if(h==="''")return"'";const d=h[0];if(d==="'")return ah(h);const l=Ku[d];if(l)return!t?.useAdditionalWeekYearTokens&&Fo(h)&&Xr(h,e,String(i)),!t?.useAdditionalDayOfYearTokens&&Oo(h)&&Xr(h,e,String(i)),l(c,h,n.localize,o);if(d.match(sh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return h}).join("")}function ah(i){const e=i.match(ih);return e?e[1].replace(nh,"'"):i}function oh(){return Object.assign({},Zt())}function ch(i){let t=le(i).getDay();return t===0&&(t=7),t}function uh(i,e){const t=e instanceof Date?ne(e,0):new e(0);return t.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),t.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t}const hh=10;class Ro{subPriority=0;validate(e,t){return!0}}class lh extends Ro{constructor(e,t,r,n,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class dh extends Ro{priority=hh;subPriority=-1;set(e,t){return t.timestampIsSet?e:ne(e,uh(e,Date))}}class Y{run(e,t,r,n){const s=this.parse(e,t,r,n);return s?{setter:new lh(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}class fh extends Y{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const ae={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Me={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function oe(i,e){return i&&{value:e(i.value),rest:i.rest}}function ie(i,e){const t=e.match(i);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Ne(i,e){const t=e.match(i);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,n=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(n*ou+s*au+a*cu),rest:e.slice(t[0].length)}}function Lo(i){return ie(ae.anyDigitsSigned,i)}function se(i,e){switch(i){case 1:return ie(ae.singleDigit,e);case 2:return ie(ae.twoDigits,e);case 3:return ie(ae.threeDigits,e);case 4:return ie(ae.fourDigits,e);default:return ie(new RegExp("^\\d{1,"+i+"}"),e)}}function Zr(i,e){switch(i){case 1:return ie(ae.singleDigitSigned,e);case 2:return ie(ae.twoDigitsSigned,e);case 3:return ie(ae.threeDigitsSigned,e);case 4:return ie(ae.fourDigitsSigned,e);default:return ie(new RegExp("^-?\\d{1,"+i+"}"),e)}}function Gn(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Uo(i,e){const t=e>0,r=t?e:1-e;let n;if(r<=50)n=i||100;else{const s=r+50,a=Math.floor(s/100)*100,c=i>=s%100;n=i+a-(c?100:0)}return t?n:1-n}function Wo(i){return i%400===0||i%4===0&&i%100!==0}class mh extends Y{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const n=s=>({year:s,isTwoDigitYear:t==="yy"});switch(t){case"y":return oe(se(4,e),n);case"yo":return oe(r.ordinalNumber(e,{unit:"year"}),n);default:return oe(se(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const n=e.getFullYear();if(r.isTwoDigitYear){const a=Uo(r.year,n);return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}const s=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}class ph extends Y{priority=130;parse(e,t,r){const n=s=>({year:s,isTwoDigitYear:t==="YY"});switch(t){case"Y":return oe(se(4,e),n);case"Yo":return oe(r.ordinalNumber(e,{unit:"year"}),n);default:return oe(se(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,n){const s=qn(e,n);if(r.isTwoDigitYear){const c=Uo(r.year,s);return e.setFullYear(c,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),lt(e,n)}const a=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(a,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),lt(e,n)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class gh extends Y{priority=130;parse(e,t){return Zr(t==="R"?4:t.length,e)}set(e,t,r){const n=ne(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Yt(n)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class xh extends Y{priority=130;parse(e,t){return Zr(t==="u"?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class wh extends Y{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return se(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class vh extends Y{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return se(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class yh extends Y{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const n=s=>s-1;switch(t){case"M":return oe(ie(ae.month,e),n);case"MM":return oe(se(2,e),n);case"Mo":return oe(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Dh extends Y{priority=110;parse(e,t,r){const n=s=>s-1;switch(t){case"L":return oe(ie(ae.month,e),n);case"LL":return oe(se(2,e),n);case"Lo":return oe(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function bh(i,e,t){const r=le(i),n=No(r,t)-e;return r.setDate(r.getDate()-n*7),r}class kh extends Y{priority=100;parse(e,t,r){switch(t){case"w":return ie(ae.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return se(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,n){return lt(bh(e,r,n),n)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Ih(i,e){const t=le(i),r=Mo(t)-e;return t.setDate(t.getDate()-r*7),t}class Ch extends Y{priority=100;parse(e,t,r){switch(t){case"I":return ie(ae.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return se(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return Yt(Ih(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Ah=[31,28,31,30,31,30,31,31,30,31,30,31],Eh=[31,29,31,30,31,30,31,31,30,31,30,31];class Th extends Y{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return ie(ae.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return se(t.length,e)}}validate(e,t){const r=e.getFullYear(),n=Wo(r),s=e.getMonth();return n?t>=1&&t<=Eh[s]:t>=1&&t<=Ah[s]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Ph extends Y{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return ie(ae.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return se(t.length,e)}}validate(e,t){const r=e.getFullYear();return Wo(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Yn(i,e,t){const r=Zt(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=le(i),a=s.getDay(),o=(e%7+7)%7,u=7-n,h=e<0||e>6?e-(a+u)%7:(o+u)%7-(a+u)%7;return To(s,h)}class Bh extends Y{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=Yn(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class _h extends Y{priority=90;parse(e,t,r,n){const s=a=>{const c=Math.floor((a-1)/7)*7;return(a+n.weekStartsOn+6)%7+c};switch(t){case"e":case"ee":return oe(se(t.length,e),s);case"eo":return oe(r.ordinalNumber(e,{unit:"day"}),s);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=Yn(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Mh extends Y{priority=90;parse(e,t,r,n){const s=a=>{const c=Math.floor((a-1)/7)*7;return(a+n.weekStartsOn+6)%7+c};switch(t){case"c":case"cc":return oe(se(t.length,e),s);case"co":return oe(r.ordinalNumber(e,{unit:"day"}),s);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return e=Yn(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Nh(i,e){const t=le(i),r=ch(t),n=e-r;return To(t,n)}class Sh extends Y{priority=90;parse(e,t,r){const n=s=>s===0?7:s;switch(t){case"i":case"ii":return se(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return oe(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return oe(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return oe(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiii":default:return oe(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return e=Nh(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Oh extends Y{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(Gn(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Fh extends Y{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(Gn(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Rh extends Y{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(Gn(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Lh extends Y{priority=70;parse(e,t,r){switch(t){case"h":return ie(ae.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return se(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):!n&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Uh extends Y{priority=70;parse(e,t,r){switch(t){case"H":return ie(ae.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return se(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Wh extends Y{priority=70;parse(e,t,r){switch(t){case"K":return ie(ae.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return se(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Hh extends Y{priority=70;parse(e,t,r){switch(t){case"k":return ie(ae.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return se(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Vh extends Y{priority=60;parse(e,t,r){switch(t){case"m":return ie(ae.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return se(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class zh extends Y{priority=50;parse(e,t,r){switch(t){case"s":return ie(ae.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return se(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class $h extends Y{priority=30;parse(e,t){const r=n=>Math.floor(n*Math.pow(10,-t.length+3));return oe(se(t.length,e),r)}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class qh extends Y{priority=10;parse(e,t){switch(t){case"X":return Ne(Me.basicOptionalMinutes,e);case"XX":return Ne(Me.basic,e);case"XXXX":return Ne(Me.basicOptionalSeconds,e);case"XXXXX":return Ne(Me.extendedOptionalSeconds,e);case"XXX":default:return Ne(Me.extended,e)}}set(e,t,r){return t.timestampIsSet?e:ne(e,e.getTime()-Qr(e)-r)}incompatibleTokens=["t","T","x"]}class Gh extends Y{priority=10;parse(e,t){switch(t){case"x":return Ne(Me.basicOptionalMinutes,e);case"xx":return Ne(Me.basic,e);case"xxxx":return Ne(Me.basicOptionalSeconds,e);case"xxxxx":return Ne(Me.extendedOptionalSeconds,e);case"xxx":default:return Ne(Me.extended,e)}}set(e,t,r){return t.timestampIsSet?e:ne(e,e.getTime()-Qr(e)-r)}incompatibleTokens=["t","T","X"]}class Yh extends Y{priority=40;parse(e){return Lo(e)}set(e,t,r){return[ne(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Jh extends Y{priority=20;parse(e){return Lo(e)}set(e,t,r){return[ne(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const Kh={G:new fh,y:new mh,Y:new ph,R:new gh,u:new xh,Q:new wh,q:new vh,M:new yh,L:new Dh,w:new kh,I:new Ch,d:new Th,D:new Ph,E:new Bh,e:new _h,c:new Mh,i:new Sh,a:new Oh,b:new Fh,B:new Rh,h:new Lh,H:new Uh,K:new Wh,k:new Hh,m:new Vh,s:new zh,S:new $h,X:new qh,x:new Gh,t:new Yh,T:new Jh},Qh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zh=/^'([^]*?)'?$/,jh=/''/g,el=/\S/,tl=/[a-zA-Z]/;function rl(i,e,t,r){const n=oh(),s=r?.locale??n.locale??_o,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,c=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0;if(e==="")return i===""?le(t):ne(t,NaN);const o={firstWeekContainsDate:a,weekStartsOn:c,locale:s},u=[new dh],h=e.match(Xh).map(x=>{const f=x[0];if(f in _n){const y=_n[f];return y(x,s.formatLong)}return x}).join("").match(Qh),d=[];for(let x of h){!r?.useAdditionalWeekYearTokens&&Fo(x)&&Xr(x,e,i),!r?.useAdditionalDayOfYearTokens&&Oo(x)&&Xr(x,e,i);const f=x[0],y=Kh[f];if(y){const{incompatibleTokens:m}=y;if(Array.isArray(m)){const v=d.find(b=>m.includes(b.token)||b.token===f);if(v)throw new RangeError(`The format string mustn't contain \`${v.fullToken}\` and \`${x}\` at the same time`)}else if(y.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${x}\` and any other token at the same time`);d.push({token:f,fullToken:x});const p=y.run(i,x,s.match,o);if(!p)return ne(t,NaN);u.push(p.setter),i=p.rest}else{if(f.match(tl))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");if(x==="''"?x="'":f==="'"&&(x=il(x)),i.indexOf(x)===0)i=i.slice(x.length);else return ne(t,NaN)}}if(i.length>0&&el.test(i))return ne(t,NaN);const l=u.map(x=>x.priority).sort((x,f)=>f-x).filter((x,f,y)=>y.indexOf(x)===f).map(x=>u.filter(f=>f.priority===x).sort((f,y)=>y.subPriority-f.subPriority)).map(x=>x[0]);let g=le(t);if(isNaN(g.getTime()))return ne(t,NaN);const w={};for(const x of l){if(!x.validate(g,o))return ne(t,NaN);const f=x.set(g,w,o);Array.isArray(f)?(g=f[0],Object.assign(w,f[1])):g=f}return ne(t,g)}function il(i){return i.match(Zh)[1].replace(jh,"'")}function Rr(i){const e=new Date(i);return e.setFullYear(1970),e.setMonth(0),e.setDate(1),e}function Ho(i){i.sort((n,s)=>n.start.getTime()-s.start.getTime());const e=[];let t=0;for(let n=0;n<i.length;n=t){const s=i[n];for(e.push(s),t=n+1;t<i.length;t++){const a=i[t],c=Ao(Rr(s.start),Rr(s.end),Rr(a.start),Rr(a.end));if(c==="AFTER")if(s.end.toUTCString()===a.start.toUTCString())s.end=a.end;else break;c==="STRIKE"&&(a.start.getTime()<s.start.getTime()&&(s.start=a.start),a.end.getTime()>s.end.getTime()&&(s.end=a.end))}}const r=[];return e.forEach(n=>{r.push(Be(n.start,"HH:mm")),r.push(Be(n.end,"HH:mm"))}),r}function nl(i){const e=[];for(let t=0;t<i.length;t+=2){const r=new Date(i[t]),n=new Date(i[t+1]);e.push(new Eo({start:r,end:n}))}return e}function Js(i,e){for(let t=0;t<e.length;t+=2){const r=new Date(e[t]),n=new Date(e[t+1]);i.push(new Eo({start:r,end:n}))}}var sl="firebase",al="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn(sl,al,"app");function Vo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ol=Vo,zo=new Ln("auth","Firebase",Vo());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new X0("@firebase/auth");function cl(i,...e){jr.logLevel<=io.WARN&&jr.warn(`Auth (${Ar}): ${i}`,...e)}function $r(i,...e){jr.logLevel<=io.ERROR&&jr.error(`Auth (${Ar}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(i,...e){throw Kn(i,...e)}function Fe(i,...e){return Kn(i,...e)}function $o(i,e,t){const r=Object.assign(Object.assign({},ol()),{[e]:t});return new Ln("auth","Firebase",r).create(e,{appName:i.name})}function Jn(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&We(i,"argument-error"),$o(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kn(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return zo.create(i,...e)}function F(i,e,...t){if(!i)throw Kn(e,...t)}function Je(i){const e="INTERNAL ASSERTION FAILED: "+i;throw $r(e),new Error(e)}function je(i,e){i||Je(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function ul(){return Ks()==="http:"||Ks()==="https:"}function Ks(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ul()||J0()||"connection"in navigator)?navigator.onLine:!0}function ll(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){this.shortDelay=e,this.longDelay=t,je(t>e,"Short delay should be less than long delay!"),this.isMobile=G0()||Y0()}get(){return hl()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(i,e){je(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=new Pr(3e4,6e4);function tt(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function _e(i,e,t,r,n={}){return Go(i,n,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=Er(Object.assign({key:i.config.apiKey},a)).slice(1),o=await i._getAdditionalHeaders();return o["Content-Type"]="application/json",i.languageCode&&(o["X-Firebase-Locale"]=i.languageCode),qo.fetch()(Yo(i,i.config.apiHost,t,c),Object.assign({method:e,headers:o,referrerPolicy:"no-referrer"},s))})}async function Go(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},dl),e);try{const n=new ml(i),s=await Promise.race([t(),n.promise]);n.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw lr(i,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[o,u]=c.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw lr(i,"credential-already-in-use",a);if(o==="EMAIL_EXISTS")throw lr(i,"email-already-in-use",a);if(o==="USER_DISABLED")throw lr(i,"user-disabled",a);const h=r[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw $o(i,h,u);We(i,h)}}catch(n){if(n instanceof Un)throw n;We(i,"network-request-failed",{message:String(n)})}}async function fi(i,e,t,r,n={}){const s=await _e(i,e,t,r,n);return"mfaPendingCredential"in s&&We(i,"multi-factor-auth-required",{_serverResponse:s}),s}function Yo(i,e,t,r){const n=`${e}${t}?${r}`;return i.config.emulator?Qn(i.config,n):`${i.config.apiScheme}://${n}`}class ml{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Fe(this.auth,"network-request-failed")),fl.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lr(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const n=Fe(i,e,r);return n.customData._tokenResponse=t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(i,e){return _e(i,"POST","/v1/accounts:delete",e)}async function gl(i,e){return _e(i,"POST","/v1/accounts:update",e)}async function xl(i,e){return _e(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wl(i,e=!1){const t=me(i),r=await t.getIdToken(e),n=Xn(r);F(n&&n.exp&&n.auth_time&&n.iat,t.auth,"internal-error");const s=typeof n.firebase=="object"?n.firebase:void 0,a=s?.sign_in_provider;return{claims:n,token:r,authTime:fr(_i(n.auth_time)),issuedAtTime:fr(_i(n.iat)),expirationTime:fr(_i(n.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function _i(i){return Number(i)*1e3}function Xn(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return $r("JWT malformed, contained fewer than 3 sections"),null;try{const n=j0(t);return n?JSON.parse(n):($r("Failed to decode base64 JWT payload"),null)}catch(n){return $r("Caught error parsing JWT payload as JSON",n?.toString()),null}}function vl(i){const e=Xn(i);return F(e,"internal-error"),F(typeof e.exp<"u","internal-error"),F(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jt(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Un&&yl(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function yl({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fr(this.lastLoginAt),this.creationTime=fr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dr(i){var e;const t=i.auth,r=await i.getIdToken(),n=await Jt(i,xl(t,{idToken:r}));F(n?.users.length,t,"internal-error");const s=n.users[0];i._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Il(s.providerUserInfo):[],c=kl(i.providerData,a),o=i.isAnonymous,u=!(i.email&&s.passwordHash)&&!c?.length,h=o?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Jo(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(i,d)}async function bl(i){const e=me(i);await Dr(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kl(i,e){return[...i.filter(r=>!e.some(n=>n.providerId===r.providerId)),...e]}function Il(i){return i.map(e=>{var{providerId:t}=e,r=Vn(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(i,e){const t=await Go(i,{},async()=>{const r=Er({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:n,apiKey:s}=i.config,a=Yo(i,n,"/v1/token",`key=${s}`),c=await i._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",qo.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Al(i,e){return _e(i,"POST","/v2/accounts:revokeToken",tt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){F(e.idToken,"internal-error"),F(typeof e.idToken<"u","internal-error"),F(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vl(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return F(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:n,expiresIn:s}=await Cl(e,t);this.updateTokensAndExpiration(r,n,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:n,expirationTime:s}=t,a=new br;return r&&(F(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),n&&(F(typeof n=="string","internal-error",{appName:e}),a.accessToken=n),s&&(F(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new br,this.toJSON())}_performRefresh(){return Je("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(i,e){F(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Dt{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,s=Vn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jo(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Jt(this,this.stsTokenManager.getToken(this.auth,e));return F(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wl(this,e)}reload(){return bl(this)}_assign(e){this!==e&&(F(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){F(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Dr(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Jt(this,pl(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,s,a,c,o,u,h;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,l=(n=t.email)!==null&&n!==void 0?n:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(a=t.photoURL)!==null&&a!==void 0?a:void 0,x=(c=t.tenantId)!==null&&c!==void 0?c:void 0,f=(o=t._redirectEventId)!==null&&o!==void 0?o:void 0,y=(u=t.createdAt)!==null&&u!==void 0?u:void 0,m=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:p,emailVerified:v,isAnonymous:b,providerData:k,stsTokenManager:I}=t;F(p&&I,e,"internal-error");const A=br.fromJSON(this.name,I);F(typeof p=="string",e,"internal-error"),st(d,e.name),st(l,e.name),F(typeof v=="boolean",e,"internal-error"),F(typeof b=="boolean",e,"internal-error"),st(g,e.name),st(w,e.name),st(x,e.name),st(f,e.name),st(y,e.name),st(m,e.name);const N=new Dt({uid:p,auth:e,email:l,emailVerified:v,displayName:d,isAnonymous:b,photoURL:w,phoneNumber:g,tenantId:x,stsTokenManager:A,createdAt:y,lastLoginAt:m});return k&&Array.isArray(k)&&(N.providerData=k.map(D=>Object.assign({},D))),f&&(N._redirectEventId=f),N}static async _fromIdTokenResponse(e,t,r=!1){const n=new br;n.updateFromServerResponse(t);const s=new Dt({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await Dr(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new Map;function Ke(i){je(i instanceof Function,"Expected a class definition");let e=Qs.get(i);return e?(je(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Qs.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ko.type="NONE";const Xs=Ko;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(i,e,t){return`firebase:${i}:${e}:${t}`}class Lt{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:n,name:s}=this.auth;this.fullUserKey=qr(this.userKey,n.apiKey,s),this.fullPersistenceKey=qr("persistence",n.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Lt(Ke(Xs),e,r);const n=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=n[0]||Ke(Xs);const a=qr(r,e.config.apiKey,e.name);let c=null;for(const u of t)try{const h=await u._get(a);if(h){const d=Dt._fromJSON(e,h);u!==s&&(c=d),s=u;break}}catch{}const o=n.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!o.length?new Lt(s,e,r):(s=o[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Lt(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zo(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qo(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(e0(e))return"Blackberry";if(t0(e))return"Webos";if(Zn(e))return"Safari";if((e.includes("chrome/")||Xo(e))&&!e.includes("edge/"))return"Chrome";if(jo(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function Qo(i=we()){return/firefox\//i.test(i)}function Zn(i=we()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xo(i=we()){return/crios\//i.test(i)}function Zo(i=we()){return/iemobile/i.test(i)}function jo(i=we()){return/android/i.test(i)}function e0(i=we()){return/blackberry/i.test(i)}function t0(i=we()){return/webos/i.test(i)}function mi(i=we()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function El(i=we()){var e;return mi(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Tl(){return ec()&&document.documentMode===10}function r0(i=we()){return mi(i)||jo(i)||t0(i)||e0(i)||/windows phone/i.test(i)||Zo(i)}function Pl(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(i,e=[]){let t;switch(i){case"Browser":t=Zs(we());break;case"Worker":t=`${Zs(we())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ar}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,c)=>{try{const o=e(s);a(o)}catch(o){c(o)}});r.onAbort=t,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const n of t)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(i,e={}){return _e(i,"GET","/v2/passwordPolicy",tt(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=6;class Nl{constructor(e){var t,r,n,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Ml,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,n,s,a,c;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=(t=o.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),o.isValid&&(o.isValid=(r=o.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),o.isValid&&(o.isValid=(n=o.containsLowercaseLetter)!==null&&n!==void 0?n:!0),o.isValid&&(o.isValid=(s=o.containsUppercaseLetter)!==null&&s!==void 0?s:!0),o.isValid&&(o.isValid=(a=o.containsNumericCharacter)!==null&&a!==void 0?a:!0),o.isValid&&(o.isValid=(c=o.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),o}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,n,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new js(this),this.idTokenSubscription=new js(this),this.beforeStateQueue=new Bl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zo,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ke(t)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await Lt.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((n=this.currentUser)===null||n===void 0?void 0:n.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=n?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===c)&&o?.user&&(n=o.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return F(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dr(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ll()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?me(e):null;return t&&F(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&F(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ke(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _l(this),t=new Nl(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ln("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Al(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ke(e)||this._popupRedirectResolver;F(t,this,"argument-error"),this.redirectPersistenceManager=await Lt.create(this,[Ke(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(F(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const o=e.addObserver(t,r,n);return()=>{a=!0,o()}}else{const o=e.addObserver(t);return()=>{a=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return F(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=i0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&cl(`Error while retrieving App Check token: ${t.error}`),t?.token}}function jt(i){return me(i)}class js{constructor(e){this.auth=e,this.observer=null,this.addObserver=K0(t=>this.observer=t)}get next(){return F(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}function Fl(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=n=>{const s=Fe("internal-error");s.customData=n,t(s)},r.type="text/javascript",r.charset="UTF-8",Ol().appendChild(r)})}function Rl(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(i,e){const t=no(i,"auth");if(t.isInitialized()){const n=t.getImmediate(),s=t.getOptions();if(Z0(s,e??{}))return n;We(n,"already-initialized")}return t.initialize({options:e})}function Ul(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ke);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function Wl(i,e,t){const r=jt(i);F(r._canInitEmulator,r,"emulator-config-failed"),F(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const n=!!t?.disableWarnings,s=n0(e),{host:a,port:c}=Hl(e),o=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${o}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:n})}),n||Vl()}function n0(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function Hl(i){const e=n0(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const s=n[1];return{host:s,port:ea(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:ea(a)}}}function ea(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function Vl(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Je("not implemented")}_getIdTokenResponse(e){return Je("not implemented")}_linkToIdToken(e,t){return Je("not implemented")}_getReauthenticationResolver(e){return Je("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ut(i,e){return fi(i,"POST","/v1/accounts:signInWithIdp",tt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="http://localhost";class et extends jn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new et(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):We("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,s=Vn(t,["providerId","signInMethod"]);if(!r||!n)return null;const a=new et(r,n);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Ut(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ut(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ut(e,t)}buildRequest(){const e={requestUri:zl,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Er(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(i,e){return _e(i,"POST","/v1/accounts:sendVerificationCode",tt(i,e))}async function ql(i,e){return fi(i,"POST","/v1/accounts:signInWithPhoneNumber",tt(i,e))}async function Gl(i,e){const t=await fi(i,"POST","/v1/accounts:signInWithPhoneNumber",tt(i,e));if(t.temporaryProof)throw lr(i,"account-exists-with-different-credential",t);return t}const Yl={USER_NOT_FOUND:"user-not-found"};async function Jl(i,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return fi(i,"POST","/v1/accounts:signInWithPhoneNumber",tt(i,t),Yl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt extends jn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Wt({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Wt({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return ql(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Gl(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Jl(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:s}=e;return!r&&!t&&!n&&!s?null:new Wt({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends Br{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class mr extends er{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return F("providerId"in t&&"signInMethod"in t,"argument-error"),et._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return F(e.idToken||e.accessToken,"argument-error"),et._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return mr.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return mr.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:n,pendingToken:s,nonce:a,providerId:c}=e;if(!r&&!n&&!t&&!s||!c)return null;try{return new mr(c)._credential({idToken:t,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze extends er{constructor(){super("facebook.com")}static credential(e){return et._fromParams({providerId:ze.PROVIDER_ID,signInMethod:ze.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ze.credentialFromTaggedObject(e)}static credentialFromError(e){return ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ze.credential(e.oauthAccessToken)}catch{return null}}}ze.FACEBOOK_SIGN_IN_METHOD="facebook.com";ze.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e extends er{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return et._fromParams({providerId:$e.PROVIDER_ID,signInMethod:$e.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $e.credentialFromTaggedObject(e)}static credentialFromError(e){return $e.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return $e.credential(t,r)}catch{return null}}}$e.GOOGLE_SIGN_IN_METHOD="google.com";$e.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot extends er{constructor(){super("github.com")}static credential(e){return et._fromParams({providerId:ot.PROVIDER_ID,signInMethod:ot.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ot.credentialFromTaggedObject(e)}static credentialFromError(e){return ot.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ot.credential(e.oauthAccessToken)}catch{return null}}}ot.GITHUB_SIGN_IN_METHOD="github.com";ot.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends er{constructor(){super("twitter.com")}static credential(e,t){return et._fromParams({providerId:ct.PROVIDER_ID,signInMethod:ct.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ct.credentialFromTaggedObject(e)}static credentialFromError(e){return ct.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ct.credential(t,r)}catch{return null}}}ct.TWITTER_SIGN_IN_METHOD="twitter.com";ct.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){const s=await Dt._fromIdTokenResponse(e,r,n),a=ta(r);return new Kt({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const n=ta(r);return new Kt({user:e,providerId:n,_tokenResponse:r,operationType:t})}}function ta(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Un{constructor(e,t,r,n){var s;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,ei.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new ei(e,t,r,n)}}function s0(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ei._fromErrorAndOperation(i,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(i){return new Set(i.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(i,e){const t=me(i);await o0(!0,t,e);const{providerUserInfo:r}=await gl(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),n=a0(r||[]);return t.providerData=t.providerData.filter(s=>n.has(s.providerId)),n.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function es(i,e,t=!1){const r=await Jt(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Kt._forOperation(i,"link",r)}async function o0(i,e,t){await Dr(e);const r=a0(e.providerData),n=i===!1?"provider-already-linked":"no-such-provider";F(r.has(t)===i,e.auth,n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c0(i,e,t=!1){const{auth:r}=i,n="reauthenticate";try{const s=await Jt(i,s0(r,n,e,i),t);F(s.idToken,r,"internal-error");const a=Xn(s.idToken);F(a,r,"internal-error");const{sub:c}=a;return F(i.uid===c,r,"user-mismatch"),Kt._forOperation(i,n,s)}catch(s){throw s?.code==="auth/user-not-found"&&We(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u0(i,e,t=!1){const r="signIn",n=await s0(i,r,e),s=await Kt._fromIdTokenResponse(i,r,n);return t||await i._updateCurrentUser(s.user),s}async function Ql(i,e){return u0(jt(i),e)}async function Xl(i,e){const t=me(i);return await o0(!1,t,e.providerId),es(t,e)}async function Zl(i,e){return c0(me(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(i,e){return _e(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ed(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=me(i),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Jt(r,jl(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:o})=>o==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function td(i,e,t,r){return me(i).onIdTokenChanged(e,t,r)}function rd(i,e,t){return me(i).beforeAuthStateChanged(e,t)}function id(i,e,t,r){return me(i).onAuthStateChanged(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(i,e){return _e(i,"POST","/v2/accounts/mfaEnrollment:start",tt(i,e))}const ti="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ti,"1"),this.storage.removeItem(ti),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(){const i=we();return Zn(i)||mi(i)}const ad=1e3,od=10;class l0 extends h0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=sd()&&Pl(),this.fallbackToPolling=r0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,o)=>{this.notifyListeners(a,o)});return}const r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}const n=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);Tl()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,od):n()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},ad)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}l0.type="LOCAL";const cd=l0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0 extends h0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}d0.type="SESSION";const f0=d0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(n=>n.isListeningto(e));if(t)return t;const r=new pi(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:n,data:s}=t.data,a=this.handlersMap[n];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const c=Array.from(a).map(async u=>u(t.origin,s)),o=await ud(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pi.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let s,a;return new Promise((c,o)=>{const u=ts("",20);n.port1.start();const h=setTimeout(()=>{o(new Error("unsupported_event"))},r);a={messageChannel:n,onMessage(d){const l=d;if(l.data.eventId===u)switch(l.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(l.data.response);break;default:clearTimeout(h),clearTimeout(s),o(new Error("invalid_response"));break}}},this.handlers.add(a),n.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[n.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(){return window}function ld(i){Re().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(){return typeof Re().WorkerGlobalScope<"u"&&typeof Re().importScripts=="function"}async function dd(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fd(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function md(){return m0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="firebaseLocalStorageDb",pd=1,ri="firebaseLocalStorage",g0="fbase_key";class _r{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gi(i,e){return i.transaction([ri],e?"readwrite":"readonly").objectStore(ri)}function gd(){const i=indexedDB.deleteDatabase(p0);return new _r(i).toPromise()}function Nn(){const i=indexedDB.open(p0,pd);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(ri,{keyPath:g0})}catch(n){t(n)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(ri)?e(r):(r.close(),await gd(),e(await Nn()))})})}async function ra(i,e,t){const r=gi(i,!0).put({[g0]:e,value:t});return new _r(r).toPromise()}async function xd(i,e){const t=gi(i,!1).get(e),r=await new _r(t).toPromise();return r===void 0?null:r.value}function ia(i,e){const t=gi(i,!0).delete(e);return new _r(t).toPromise()}const wd=800,vd=3;class x0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nn(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>vd)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return m0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pi._getInstance(md()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await dd(),!this.activeServiceWorker)return;this.sender=new hd(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fd()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nn();return await ra(e,ti,"1"),await ia(e,ti),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ra(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>xd(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ia(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(n=>{const s=gi(n,!1).getAll();return new _r(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:n,value:s}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(s)&&(this.notifyListeners(n,s),t.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),t.push(n));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wd)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}x0.type="LOCAL";const yd=x0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(i,e){return _e(i,"POST","/v2/accounts/mfaSignIn:start",tt(i,e))}new Pr(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="recaptcha";async function kd(i,e,t){var r;const n=await t.verify();try{F(typeof n=="string",i,"argument-error"),F(t.type===bd,i,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return F(a.type==="enroll",i,"internal-error"),(await nd(i,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:n}})).phoneSessionInfo.sessionInfo;{F(a.type==="signin",i,"internal-error");const c=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return F(c,i,"missing-multi-factor-info"),(await Dd(i,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:n}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await $l(i,{phoneNumber:s.phoneNumber,recaptchaToken:n});return a}}finally{t._reset()}}async function Id(i,e){await es(me(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.providerId=bt.PROVIDER_ID,this.auth=jt(e)}verifyPhoneNumber(e,t){return kd(this.auth,e,me(t))}static credential(e,t){return Wt._fromVerification(e,t)}static credentialFromResult(e){const t=e;return bt.credentialFromTaggedObject(t)}static credentialFromError(e){return bt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Wt._fromTokenResponse(t,r):null}}bt.PROVIDER_ID="phone";bt.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(i,e){return e?Ke(e):(F(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends jn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ut(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ut(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ut(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Cd(i){return u0(i.auth,new rs(i),i.bypassAuthState)}function Ad(i){const{auth:e,user:t}=i;return F(t,e,"internal-error"),c0(t,new rs(i),i.bypassAuthState)}async function Ed(i){const{auth:e,user:t}=i;return F(t,e,"internal-error"),es(t,new rs(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,t,r,n,s=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:n,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const o={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(o))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Cd;case"linkViaPopup":case"linkViaRedirect":return Ed;case"reauthViaPopup":case"reauthViaRedirect":return Ad;default:We(this.auth,"internal-error")}}resolve(e){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=new Pr(2e3,1e4);async function Mi(i,e,t){const r=jt(i);Jn(i,e,Br);const n=xi(r,t);return new Qe(r,"signInViaPopup",e,n).executeNotNull()}async function Ni(i,e,t){const r=me(i);Jn(r.auth,e,Br);const n=xi(r.auth,t);return new Qe(r.auth,"reauthViaPopup",e,n,r).executeNotNull()}async function Si(i,e,t){const r=me(i);Jn(r.auth,e,Br);const n=xi(r.auth,t);return new Qe(r.auth,"linkViaPopup",e,n,r).executeNotNull()}class Qe extends w0{constructor(e,t,r,n,s){super(e,t,n,s),this.provider=r,this.authWindow=null,this.pollId=null,Qe.currentPopupAction&&Qe.currentPopupAction.cancel(),Qe.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return F(e,this.auth,"internal-error"),e}async onExecution(){je(this.filter.length===1,"Popup operations only handle one event");const e=ts();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fe(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qe.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Td.get())};e()}}Qe.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="pendingRedirect",Gr=new Map;class Bd extends w0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Gr.get(this.auth._key());if(!e){try{const r=await _d(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gr.set(this.auth._key(),e)}return this.bypassAuthState||Gr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _d(i,e){const t=Sd(e),r=Nd(i);if(!await r._isAvailable())return!1;const n=await r._get(t)==="true";return await r._remove(t),n}function Md(i,e){Gr.set(i._key(),e)}function Nd(i){return Ke(i._redirectPersistence)}function Sd(i){return qr(Pd,i.config.apiKey,i.name)}async function Od(i,e,t=!1){const r=jt(i),n=xi(r,e),a=await new Bd(r,n,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=10*60*1e3;class Rd{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ld(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!v0(e)){const n=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Fe(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Fd&&this.cachedEventUids.clear(),this.cachedEventUids.has(na(e))}saveEventToCache(e){this.cachedEventUids.add(na(e)),this.lastProcessedEventTime=Date.now()}}function na(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function v0({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function Ld(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v0(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(i,e={}){return _e(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hd=/^https?/;async function Vd(i){if(i.config.emulator)return;const{authorizedDomains:e}=await Ud(i);for(const t of e)try{if(zd(t))return}catch{}We(i,"unauthorized-domain")}function zd(i){const e=Mn(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const a=new URL(i);return a.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Hd.test(t))return!1;if(Wd.test(i))return r===i;const n=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=new Pr(3e4,6e4);function sa(){const i=Re().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function qd(i){return new Promise((e,t)=>{var r,n,s;function a(){sa(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sa(),t(Fe(i,"network-request-failed"))},timeout:$d.get()})}if(!((n=(r=Re().gapi)===null||r===void 0?void 0:r.iframes)===null||n===void 0)&&n.Iframe)e(gapi.iframes.getContext());else if(!((s=Re().gapi)===null||s===void 0)&&s.load)a();else{const c=Rl("iframefcb");return Re()[c]=()=>{gapi.load?a():t(Fe(i,"network-request-failed"))},Fl(`https://apis.google.com/js/api.js?onload=${c}`).catch(o=>t(o))}}).catch(e=>{throw Yr=null,e})}let Yr=null;function Gd(i){return Yr=Yr||qd(i),Yr}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new Pr(5e3,15e3),Jd="__/auth/iframe",Kd="emulator/auth/iframe",Qd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zd(i){const e=i.config;F(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Qn(e,Kd):`https://${i.config.authDomain}/${Jd}`,r={apiKey:e.apiKey,appName:i.name,v:Ar},n=Xd.get(i.config.apiHost);n&&(r.eid=n);const s=i._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Er(r).slice(1)}`}async function jd(i){const e=await Gd(i),t=Re().gapi;return F(t,i,"internal-error"),e.open({where:document.body,url:Zd(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qd,dontclear:!0},r=>new Promise(async(n,s)=>{await r.restyle({setHideOnLeave:!1});const a=Fe(i,"network-request-failed"),c=Re().setTimeout(()=>{s(a)},Yd.get());function o(){Re().clearTimeout(c),n(r)}r.ping(o).then(o,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tf=500,rf=600,nf="_blank",sf="http://localhost";class aa{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function af(i,e,t,r=tf,n=rf){const s=Math.max((window.screen.availHeight-n)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const o=Object.assign(Object.assign({},ef),{width:r.toString(),height:n.toString(),top:s,left:a}),u=we().toLowerCase();t&&(c=Xo(u)?nf:t),Qo(u)&&(e=e||sf,o.scrollbars="yes");const h=Object.entries(o).reduce((l,[g,w])=>`${l}${g}=${w},`,"");if(El(u)&&c!=="_self")return of(e||"",c),new aa(null);const d=window.open(e||"",c,h);F(d,i,"popup-blocked");try{d.focus()}catch{}return new aa(d)}function of(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="__/auth/handler",uf="emulator/auth/handler",hf=encodeURIComponent("fac");async function oa(i,e,t,r,n,s){F(i.config.authDomain,i,"auth-domain-config-required"),F(i.config.apiKey,i,"invalid-api-key");const a={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Ar,eventId:n};if(e instanceof Br){e.setDefaultLanguage(i.languageCode),a.providerId=e.providerId||"",tc(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))a[h]=d}if(e instanceof er){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}i.tenantId&&(a.tid=i.tenantId);const c=a;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const o=await i._getAppCheckToken(),u=o?`#${hf}=${encodeURIComponent(o)}`:"";return`${lf(i)}?${Er(c).slice(1)}${u}`}function lf({config:i}){return i.emulator?Qn(i,uf):`https://${i.authDomain}/${cf}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="webStorageSupport";class df{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=f0,this._completeRedirectFn=Od,this._overrideRedirectResult=Md}async _openPopup(e,t,r,n){var s;je((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await oa(e,t,r,Mn(),n);return af(e,a,ts())}async _openRedirect(e,t,r,n){await this._originValidation(e);const s=await oa(e,t,r,Mn(),n);return ld(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:n,promise:s}=this.eventManagers[t];return n?Promise.resolve(n):(je(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await jd(e),r=new Rd(e);return t.register("authEvent",n=>(F(n?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Oi,{type:Oi},n=>{var s;const a=(s=n?.[0])===null||s===void 0?void 0:s[Oi];a!==void 0&&t(!!a),We(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Vd(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return r0()||Zn()||mi()}}const ff=df;var ca="@firebase/auth",ua="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){F(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function gf(i){Ps(new Bs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;F(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const o={apiKey:a,authDomain:c,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i0(i)},u=new Sl(r,n,s,o);return Ul(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ps(new Bs("auth-internal",e=>{const t=jt(e.getProvider("auth").getImmediate());return(r=>new mf(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cn(ca,ua,pf(i)),Cn(ca,ua,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=5*60,wf=ro("authIdTokenMaxAge")||xf;let ha=null;const vf=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>wf)return;const n=t?.token;ha!==n&&(ha=n,await fetch(i,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function yf(i=hi()){const e=no(i,"auth");if(e.isInitialized())return e.getImmediate();const t=Ll(i,{popupRedirectResolver:ff,persistence:[yd,cd,f0]}),r=ro("authTokenSyncURL");if(r){const s=vf(r);rd(t,s,()=>s(t.currentUser)),td(t,a=>s(a))}const n=Q0("auth");return n&&Wl(t,`http://${n}`),t}gf("Browser");const Lr={"operation-not-allowed":U.providerNotAllowed,"user-disabled":U.userDisable,"provider-already-linked":U.providerAlreadyLinked,"credential-already-in-use":U.credentialAlreadyInUse,"invalid-verification-code":U.wrongOptCode,"invalid-verification-id":U.verification,"invalid-credential":U.invalidCredential,"user-mismatch":U.userMissmatch,"user-not-found":U.userNotFound,"no-such-provider":U.noSuchProvider,canceled:U.userExitManually,"too-many-requests":U.tooManyAttempts,"too-many-attempts":U.tooManyAttempts,"expired-code":U.expiredCode,"account-exists-with-different-credential":U.credentialAlreadyInUse,"invalid-phone-number":U.invalidPhoneNumber};var Df=(i=>(i[i.login=0]="login",i[i.link=1]="link",i[i.reauthenticate=2]="reauthenticate",i[i.phoneUpdate=3]="phoneUpdate",i))(Df||{});class bf{_auth;constructor(){Wn().length===0?Hn(zn):hi(),this._auth=yf()}async signInWithFacebookSRV(e){try{return await this.signInWithFacebookWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),ce.error(`it was an error the error is --> ${t}`),ce.error(t.name),q.GI().details=t.name,q.GI().error=Lr[t.name]??U.unknown),!1}}async signInWithFacebookWebSRV(e){const t=new ze;switch(t.addScope("email"),t.setCustomParameters({display:"popup"}),e){case 0:await Mi(this._auth,t);break;case 1:await Si(this._auth.currentUser,t);break;case 2:await Ni(this._auth.currentUser,t);break}}async signInWithGoogleSRV(e){try{return await this.signInWithGoogleWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),ce.error(`it was an error the error is --> ${t}`),ce.error(t.name),q.GI().details=t.name,q.GI().error=Lr[t.name]??U.unknown),!1}}async signInWithGoogleWebSRV(e){const t=new $e;switch(t.addScope("email"),t.addScope("profile"),t.setCustomParameters({login_hint:"user@example.com"}),e){case 0:await Mi(this._auth,t);break;case 1:await Si(this._auth.currentUser,t);break;case 2:await Ni(this._auth.currentUser,t);break}}async signInWithAppleSRV(e){try{return await this.signInWithAppleWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),ce.error(`it was an error the error is --> ${t}`),ce.error(t.name),q.GI().details=t.name,q.GI().error=Lr[t.name]??U.unknown),!1}}async signInWithAppleWebSRV(e){const t=new mr("apple.com");switch(t.addScope("email"),t.addScope("name"),e){case 0:await Mi(this._auth,t);break;case 1:await Si(this._auth.currentUser,t);break;case 2:await Ni(this._auth.currentUser,t);break}}async signInWithOtpSRV({loginType:e,verificationId:t,otp:r,autocredential:n}){const s=n??bt.credential(t,r);try{switch(e){case 0:await Ql(this._auth,s);break;case 1:await Xl(this._auth.currentUser,s);break;case 2:await Zl(this._auth.currentUser,s);break;case 3:await Id(this._auth.currentUser,s);break}return!0}catch(a){return console.error(`Error: ${a}`),a instanceof Error&&(console.error(`Error: ${a}`),ce.error(`it was an error the error is --> ${a}`),ce.error(a.name),q.GI().details=a.name,q.GI().error=Lr[a.name]??U.unknown),!1}}get isLoggedInSRV(){return console.log("5555555555555555555555555555555555555555555555555555"+this._auth.currentUser?.displayName),this._auth.currentUser!=null}onAuthUserStateChangedSRV(e){return id(this._auth,e)}async updateUserNameSRV(e){try{await ed(this._auth.currentUser,{displayName:e}),await this._auth.currentUser.reload()}catch(t){throw t instanceof Error&&q.GI().addError({error:U.updateDisplayName,details:t.toString()}),t}}userConnectedOnlyLocallySRV(){return this.isLoggedInSRV&&this._auth.currentUser.displayName===null}get lastLoginDateSRV(){return this._auth.currentUser?.metadata.lastSignInTime}get userIdSRV(){if(console.log("111111111111111111111111111111111111111111111111111111111111111"),this._auth.currentUser!=null){console.log("eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee");const e=this._auth.currentUser.displayName;return e!==null&&e.includes("&&")&&e.includes("+")?this.userPhoneSRV:this._auth.currentUser.uid}return""}get userDataSRV(){return this._auth.currentUser}async userClaimsSRV(){return this._auth.currentUser===null?null:(await this._auth.currentUser.getIdToken(!0),(await this._auth.currentUser.getIdTokenResult()).claims)}get userPhoneSRV(){if(this._auth.currentUser!==null){const t=this._auth.currentUser.displayName.split("&&")[1];return this._auth.currentUser.phoneNumber.replace(t,`${t}-`)}return""}get existsProvidersSRV(){if(this._auth.currentUser===null)return new Set;const e=new Set;return this._auth.currentUser.providerData.forEach(t=>{e.add(t.providerId)}),e}async deleteUserSRV(){if(this._auth.currentUser===null)return!1;try{return await this._auth.currentUser.delete(),!0}catch{return!1}}async unlinkProviderSRV({providerId:e}){try{return Kl(this._auth.currentUser,e),!0}catch{return!1}}async reloadUserSRV(){this._auth.currentUser!==null&&await this._auth.currentUser.reload()}async logoutSRV(){try{return await this._auth.signOut(),!this.isLoggedInSRV}catch{return!1}}}class kf extends bf{constructor(){super()}async signInWithGoogle(e){return await this.signInWithGoogleSRV(e)}async signInWithApple(e){return await this.signInWithAppleSRV(e)}async signInWithFacebook(e){return await this.signInWithFacebookSRV(e)}onAuthUserStateChanged(e){return this.onAuthUserStateChangedSRV(e)}async signInWithOtp({loginType:e,verificationId:t,otp:r,autocredential:n}){return await this.signInWithOtpSRV({loginType:e,verificationId:t,otp:r,autocredential:n})}async logout(){return await this.logoutSRV()}async unlinkProvider({providerId:e}){return await this.unlinkProviderSRV({providerId:e})}async deleteUser(){return await this.deleteUserSRV()}async reloadUser(){await this.reloadUserSRV()}userConnectedOnlyLocally(){return this.userConnectedOnlyLocallySRV()}async updateUserName({name:e}){try{return await this.updateUserNameSRV(e),!0}catch(t){return console.error(`Error occurred while saving user name --> ${t}`),!1}}get isLoggedIn(){return this.isLoggedInSRV}get existsProviders(){return this.existsProvidersSRV}get userData(){return this.userDataSRV}get userId(){return this.userIdSRV}get lastLoginDate(){return this.lastLoginDateSRV}async userClaims(){return await this.userClaimsSRV}}const If="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU2LjY5MyA1Ni42OTMiIGhlaWdodD0iNTYuNjkzcHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA1Ni42OTMgNTYuNjkzIiB3aWR0aD0iNTYuNjkzcHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik00MS43NzcsMzAuNTE3Yy0wLjA2Mi02LjIzMiw1LjA4Mi05LjIyMSw1LjMxMi05LjM3MmMtMi44OTEtNC4yMjctNy4zOTUtNC44MDctOC45OTgtNC44NzMgICBjLTMuODMtMC4zODktNy40NzcsMi4yNTYtOS40MiwyLjI1NmMtMS45MzksMC00Ljk0MS0yLjE5OS04LjExNy0yLjE0M2MtNC4xNzgsMC4wNjItOC4wMjksMi40My0xMC4xNzksNi4xNyAgIGMtNC4zMzksNy41MjctMS4xMSwxOC42ODIsMy4xMTgsMjQuNzkxYzIuMDY3LDIuOTg2LDQuNTMyLDYuMzQ2LDcuNzY2LDYuMjIzYzMuMTE3LTAuMTIzLDQuMjkzLTIuMDE2LDguMDYxLTIuMDE2ICAgczQuODI2LDIuMDE2LDguMTIzLDEuOTUzYzMuMzUyLTAuMDYxLDUuNDc3LTMuMDQzLDcuNTI3LTYuMDQxYzIuMzczLTMuNDY5LDMuMzUtNi44MjgsMy40MDgtNi45OTggICBDNDguMzA1LDQwLjQzMyw0MS44NDQsMzcuOTU4LDQxLjc3NywzMC41MTd6Ii8+PHBhdGggZD0iTTM1LjU4MiwxMi4yMjljMS43MTUtMi4wODIsMi44NzctNC45NzUsMi41NjEtNy44NTVjLTIuNDc1LDAuMS01LjQ3MSwxLjY0NS03LjI0OCwzLjcyNSAgIGMtMS41OTIsMS44NDYtMi45ODQsNC43ODUtMi42MTEsNy42MTNDMzEuMDQ1LDE1LjkyNiwzMy44NjEsMTQuMzA3LDM1LjU4MiwxMi4yMjl6Ii8+PC9nPjwvc3ZnPg==",Cf="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20id='Layer_1'%20style='enable-background:new%200%200%201000%201000;'%20version='1.1'%20viewBox='0%200%201000%201000'%20xml:space='preserve'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%233B579D;}%20.st1{fill:%23FFFFFF;}%20%3c/style%3e%3ctitle/%3e%3cg%3e%3cpath%20class='st0'%20d='M500,1000L500,1000C223.9,1000,0,776.1,0,500v0C0,223.9,223.9,0,500,0h0c276.1,0,500,223.9,500,500v0%20C1000,776.1,776.1,1000,500,1000z'/%3e%3cpath%20class='st1'%20d='M630,1000V612.7h130l19.5-150.9H630v-96.4c0-43.7,12.1-73.5,74.8-73.5l79.9,0V157%20c-13.8-1.8-61.3-5.9-116.5-5.9c-115.2,0-194.1,70.3-194.1,199.5v111.3H343.8v150.9h130.3V1000H630z'%20id='f'/%3e%3c/g%3e%3c/svg%3e",Af="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEyOCAxMjgiIGlkPSJTb2NpYWxfSWNvbnMiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnIGlkPSJfeDMxX19zdHJva2UiPjxnIGlkPSJHb29nbGUiPjxyZWN0IGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBoZWlnaHQ9IjEyOCIgd2lkdGg9IjEyOCIvPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI3LjU4NSw2NGMwLTQuMTU3LDAuNjktOC4xNDMsMS45MjMtMTEuODgxTDcuOTM4LDM1LjY0OCAgICBDMy43MzQsNDQuMTgzLDEuMzY2LDUzLjgwMSwxLjM2Niw2NGMwLDEwLjE5MSwyLjM2NiwxOS44MDIsNi41NjMsMjguMzMybDIxLjU1OC0xNi41MDNDMjguMjY2LDcyLjEwOCwyNy41ODUsNjguMTM3LDI3LjU4NSw2NCIgZmlsbD0iI0ZCQkMwNSIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNjUuNDU3LDI2LjE4MmM5LjAzMSwwLDE3LjE4OCwzLjIsMjMuNTk3LDguNDM2TDEwNy42OTgsMTYgICAgQzk2LjMzNyw2LjEwOSw4MS43NzEsMCw2NS40NTcsMEM0MC4xMjksMCwxOC4zNjEsMTQuNDg0LDcuOTM4LDM1LjY0OGwyMS41NjksMTYuNDcxQzM0LjQ3NywzNy4wMzMsNDguNjQ0LDI2LjE4Miw2NS40NTcsMjYuMTgyIiBmaWxsPSIjRUE0MzM1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02NS40NTcsMTAxLjgxOGMtMTYuODEyLDAtMzAuOTc5LTEwLjg1MS0zNS45NDktMjUuOTM3ICAgIEw3LjkzOCw5Mi4zNDlDMTguMzYxLDExMy41MTYsNDAuMTI5LDEyOCw2NS40NTcsMTI4YzE1LjYzMiwwLDMwLjU1Ny01LjU1MSw0MS43NTgtMTUuOTUxTDg2Ljc0MSw5Ni4yMjEgICAgQzgwLjk2NCw5OS44Niw3My42ODksMTAxLjgxOCw2NS40NTcsMTAxLjgxOCIgZmlsbD0iIzM0QTg1MyIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTI2LjYzNCw2NGMwLTMuNzgyLTAuNTgzLTcuODU1LTEuNDU3LTExLjYzNkg2NS40NTd2MjQuNzI3ICAgIGgzNC4zNzZjLTEuNzE5LDguNDMxLTYuMzk3LDE0LjkxMi0xMy4wOTIsMTkuMTNsMjAuNDc0LDE1LjgyOEMxMTguOTgxLDEwMS4xMjksMTI2LjYzNCw4NC44NjEsMTI2LjYzNCw2NCIgZmlsbD0iIzQyODVGNCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9nPjwvZz48L3N2Zz4=";var y0=(i=>(i[i.Apple=0]="Apple",i[i.Google=1]="Google",i[i.Facebook=2]="Facebook",i[i.Phone=3]="Phone",i))(y0||{});const sp={0:"Apple",1:"Google",2:"Facebook",3:"Phone"},ap=[1,2,0,3],la={Apple:0,Google:1,Facebook:2,Phone:3},op={0:If,1:Af,2:Cf,3:"Phone"},cp={0:"apple.com",1:"google.com",2:"facebook.com",3:"phone"};class pr{businessName="";iconUrl="";businessId="";type=Rt.Other;adress="";ownerName="";shopPhone="";constructor({businessId:e,shopPhone:t,type:r,adress:n,ownerName:s,iconUrl:a,businessName:c}){this.businessId=e,this.shopPhone=t,this.type=r,this.adress=n,this.ownerName=s,this.iconUrl=a,this.businessName=c}static empty(){return new pr({businessId:"",shopPhone:"",type:Rt.Other,adress:"",ownerName:"",iconUrl:"",businessName:""})}static fromJson(e,t){const r=e.businessName||"",n=e.iconUrl||"",s=vo[e.T]||Rt.Other,a=e.ON||"",c=e.SP||"",o=e.A||"";return new pr({businessId:t,shopPhone:c,type:s,adress:o,ownerName:a,iconUrl:n,businessName:r})}get toBusinessModel(){const e=new At({businessId:this.businessId,design:new Ye({shopIconUrl:this.iconUrl})});return e.ownersName=this.ownerName,e.shopPhone=this.shopPhone,e.shopName=this.businessName,e.adress=this.adress,e.businesseType=this.type,e}static fromBusinessInfo(e){return new pr({businessId:e.businessId,shopPhone:e.shopPhone,type:e.type,adress:e.adress,ownerName:e.ownerName,iconUrl:e.iconUrl,businessName:e.businessName})}toJson(){const e={};return e.businessName=this.businessName,e.iconUrl=this.iconUrl,e.ON=this.ownerName,e.SP=this.shopPhone,e.A=this.adress,e.T=Yc[this.type],e}isTheSame(e){return e.iconUrl===this.iconUrl&&e.ownerName===this.ownerName&&e.shopPhone===this.shopPhone&&e.adress===this.adress&&e.type===this.type&&e.businessName===this.businessName}toString(){return JSON.stringify(this.toJson())}}function Ef({booking:i,worker:e,notificationOption:t,customHsEnoughMessages:r}){if(t=t||e?.notifications.notificationOption,!t)return L.none;const n=r||Ae.GI().business.businessData.messagesCounter>1;switch(t){case j.OnlyPush:return Object.values(i.userFcms).length===0?L.none:L.push;case j.SMSOnly:return!i.canSendMessage||!n?L.none:L.message;case j.WhatAppOnly:return!i.canSendMessage||!n?L.none:L.whatsapp;case j.PushOrSMS:return Object.values(i.userFcms).length>0?L.push:!i.canSendMessage||!n?L.none:L.message;case j.PushOrWhatsApp:return Object.values(i.userFcms).length>0?L.push:!i.canSendMessage||!n?L.none:L.whatsapp;case j.SMSOrPush:return i.canSendMessage&&n?L.message:Object.values(i.userFcms).length>0?L.push:L.none;case j.WhatsAppOrPush:return i.canSendMessage&&n?L.whatsapp:Object.values(i.userFcms).length>0?L.push:L.none;default:return L.none}}function Tf(i,e){const t=Ae.GI().business.businessData.messagesCounter>1;switch(e.notifications.notificationOption){case j.OnlyPush:return Object.keys(i.userFcms).length===0?L.none:L.push;case j.SMSOnly:return!i.canSendMessage||!t?L.none:L.message;case j.WhatAppOnly:return!i.canSendMessage||!t?L.none:L.whatsapp;case j.PushOrSMS:return Object.values(i.userFcms).length>0?L.push:!i.canSendMessage||!t?L.none:L.message;case j.PushOrWhatsApp:return Object.values(i.userFcms).length>0?L.push:!i.canSendMessage||!t?L.none:L.whatsapp;case j.SMSOrPush:return i.canSendMessage&&t?L.message:Object.values(i.userFcms).length>0?L.push:L.none;case j.WhatsAppOrPush:return i.canSendMessage&&t?L.whatsapp:Object.values(i.userFcms).length>0?L.push:L.none;default:return L.none}}var D0={exports:{}};function Pf(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fi={exports:{}};const Bf={},_f=Object.freeze(Object.defineProperty({__proto__:null,default:Bf},Symbol.toStringTag,{value:"Module"})),Mf=mc(_f);var da;function z(){return da||(da=1,function(i,e){(function(t,r){i.exports=r()})(H,function(){var t=t||function(r,n){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof H<"u"&&H.crypto&&(s=H.crypto),!s&&typeof Pf=="function")try{s=Mf}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function m(){}return function(p){var v;return m.prototype=p,v=new m,m.prototype=null,v}}(),o={},u=o.lib={},h=u.Base=function(){return{extend:function(m){var p=c(this);return m&&p.mixIn(m),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var p in m)m.hasOwnProperty(p)&&(this[p]=m[p]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=u.WordArray=h.extend({init:function(m,p){m=this.words=m||[],p!=n?this.sigBytes=p:this.sigBytes=m.length*4},toString:function(m){return(m||g).stringify(this)},concat:function(m){var p=this.words,v=m.words,b=this.sigBytes,k=m.sigBytes;if(this.clamp(),b%4)for(var I=0;I<k;I++){var A=v[I>>>2]>>>24-I%4*8&255;p[b+I>>>2]|=A<<24-(b+I)%4*8}else for(var N=0;N<k;N+=4)p[b+N>>>2]=v[N>>>2];return this.sigBytes+=k,this},clamp:function(){var m=this.words,p=this.sigBytes;m[p>>>2]&=4294967295<<32-p%4*8,m.length=r.ceil(p/4)},clone:function(){var m=h.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var p=[],v=0;v<m;v+=4)p.push(a());return new d.init(p,m)}}),l=o.enc={},g=l.Hex={stringify:function(m){for(var p=m.words,v=m.sigBytes,b=[],k=0;k<v;k++){var I=p[k>>>2]>>>24-k%4*8&255;b.push((I>>>4).toString(16)),b.push((I&15).toString(16))}return b.join("")},parse:function(m){for(var p=m.length,v=[],b=0;b<p;b+=2)v[b>>>3]|=parseInt(m.substr(b,2),16)<<24-b%8*4;return new d.init(v,p/2)}},w=l.Latin1={stringify:function(m){for(var p=m.words,v=m.sigBytes,b=[],k=0;k<v;k++){var I=p[k>>>2]>>>24-k%4*8&255;b.push(String.fromCharCode(I))}return b.join("")},parse:function(m){for(var p=m.length,v=[],b=0;b<p;b++)v[b>>>2]|=(m.charCodeAt(b)&255)<<24-b%4*8;return new d.init(v,p)}},x=l.Utf8={stringify:function(m){try{return decodeURIComponent(escape(w.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return w.parse(unescape(encodeURIComponent(m)))}},f=u.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=x.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var p,v=this._data,b=v.words,k=v.sigBytes,I=this.blockSize,A=I*4,N=k/A;m?N=r.ceil(N):N=r.max((N|0)-this._minBufferSize,0);var D=N*I,C=r.min(D*4,k);if(D){for(var T=0;T<D;T+=I)this._doProcessBlock(b,T);p=b.splice(0,D),v.sigBytes-=C}return new d.init(p,C)},clone:function(){var m=h.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0});u.Hasher=f.extend({cfg:h.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var p=this._doFinalize();return p},blockSize:16,_createHelper:function(m){return function(p,v){return new m.init(v).finalize(p)}},_createHmacHelper:function(m){return function(p,v){return new y.HMAC.init(m,v).finalize(p)}}});var y=o.algo={};return o}(Math);return t})}(Fi)),Fi.exports}var Ri={exports:{}},fa;function wi(){return fa||(fa=1,function(i,e){(function(t,r){i.exports=r(z())})(H,function(t){return function(r){var n=t,s=n.lib,a=s.Base,c=s.WordArray,o=n.x64={};o.Word=a.extend({init:function(u,h){this.high=u,this.low=h}}),o.WordArray=a.extend({init:function(u,h){u=this.words=u||[],h!=r?this.sigBytes=h:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,h=u.length,d=[],l=0;l<h;l++){var g=u[l];d.push(g.high),d.push(g.low)}return c.create(d,this.sigBytes)},clone:function(){for(var u=a.clone.call(this),h=u.words=this.words.slice(0),d=h.length,l=0;l<d;l++)h[l]=h[l].clone();return u}})}(),t})}(Ri)),Ri.exports}var Li={exports:{}},ma;function Nf(){return ma||(ma=1,function(i,e){(function(t,r){i.exports=r(z())})(H,function(t){return function(){if(typeof ArrayBuffer=="function"){var r=t,n=r.lib,s=n.WordArray,a=s.init,c=s.init=function(o){if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),(o instanceof Int8Array||typeof Uint8ClampedArray<"u"&&o instanceof Uint8ClampedArray||o instanceof Int16Array||o instanceof Uint16Array||o instanceof Int32Array||o instanceof Uint32Array||o instanceof Float32Array||o instanceof Float64Array)&&(o=new Uint8Array(o.buffer,o.byteOffset,o.byteLength)),o instanceof Uint8Array){for(var u=o.byteLength,h=[],d=0;d<u;d++)h[d>>>2]|=o[d]<<24-d%4*8;a.call(this,h,u)}else a.apply(this,arguments)};c.prototype=s}}(),t.lib.WordArray})}(Li)),Li.exports}var Ui={exports:{}},pa;function Sf(){return pa||(pa=1,function(i,e){(function(t,r){i.exports=r(z())})(H,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=r.enc;a.Utf16=a.Utf16BE={stringify:function(o){for(var u=o.words,h=o.sigBytes,d=[],l=0;l<h;l+=2){var g=u[l>>>2]>>>16-l%4*8&65535;d.push(String.fromCharCode(g))}return d.join("")},parse:function(o){for(var u=o.length,h=[],d=0;d<u;d++)h[d>>>1]|=o.charCodeAt(d)<<16-d%2*16;return s.create(h,u*2)}},a.Utf16LE={stringify:function(o){for(var u=o.words,h=o.sigBytes,d=[],l=0;l<h;l+=2){var g=c(u[l>>>2]>>>16-l%4*8&65535);d.push(String.fromCharCode(g))}return d.join("")},parse:function(o){for(var u=o.length,h=[],d=0;d<u;d++)h[d>>>1]|=c(o.charCodeAt(d)<<16-d%2*16);return s.create(h,u*2)}};function c(o){return o<<8&4278255360|o>>>8&16711935}}(),t.enc.Utf16})}(Ui)),Ui.exports}var Wi={exports:{}},ga;function Et(){return ga||(ga=1,function(i,e){(function(t,r){i.exports=r(z())})(H,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=r.enc;a.Base64={stringify:function(o){var u=o.words,h=o.sigBytes,d=this._map;o.clamp();for(var l=[],g=0;g<h;g+=3)for(var w=u[g>>>2]>>>24-g%4*8&255,x=u[g+1>>>2]>>>24-(g+1)%4*8&255,f=u[g+2>>>2]>>>24-(g+2)%4*8&255,y=w<<16|x<<8|f,m=0;m<4&&g+m*.75<h;m++)l.push(d.charAt(y>>>6*(3-m)&63));var p=d.charAt(64);if(p)for(;l.length%4;)l.push(p);return l.join("")},parse:function(o){var u=o.length,h=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var l=0;l<h.length;l++)d[h.charCodeAt(l)]=l}var g=h.charAt(64);if(g){var w=o.indexOf(g);w!==-1&&(u=w)}return c(o,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function c(o,u,h){for(var d=[],l=0,g=0;g<u;g++)if(g%4){var w=h[o.charCodeAt(g-1)]<<g%4*2,x=h[o.charCodeAt(g)]>>>6-g%4*2,f=w|x;d[l>>>2]|=f<<24-l%4*8,l++}return s.create(d,l)}}(),t.enc.Base64})}(Wi)),Wi.exports}var Hi={exports:{}},xa;function Of(){return xa||(xa=1,function(i,e){(function(t,r){i.exports=r(z())})(H,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=r.enc;a.Base64url={stringify:function(o,u){u===void 0&&(u=!0);var h=o.words,d=o.sigBytes,l=u?this._safe_map:this._map;o.clamp();for(var g=[],w=0;w<d;w+=3)for(var x=h[w>>>2]>>>24-w%4*8&255,f=h[w+1>>>2]>>>24-(w+1)%4*8&255,y=h[w+2>>>2]>>>24-(w+2)%4*8&255,m=x<<16|f<<8|y,p=0;p<4&&w+p*.75<d;p++)g.push(l.charAt(m>>>6*(3-p)&63));var v=l.charAt(64);if(v)for(;g.length%4;)g.push(v);return g.join("")},parse:function(o,u){u===void 0&&(u=!0);var h=o.length,d=u?this._safe_map:this._map,l=this._reverseMap;if(!l){l=this._reverseMap=[];for(var g=0;g<d.length;g++)l[d.charCodeAt(g)]=g}var w=d.charAt(64);if(w){var x=o.indexOf(w);x!==-1&&(h=x)}return c(o,h,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function c(o,u,h){for(var d=[],l=0,g=0;g<u;g++)if(g%4){var w=h[o.charCodeAt(g-1)]<<g%4*2,x=h[o.charCodeAt(g)]>>>6-g%4*2,f=w|x;d[l>>>2]|=f<<24-l%4*8,l++}return s.create(d,l)}}(),t.enc.Base64url})}(Hi)),Hi.exports}var Vi={exports:{}},wa;function Tt(){return wa||(wa=1,function(i,e){(function(t,r){i.exports=r(z())})(H,function(t){return function(r){var n=t,s=n.lib,a=s.WordArray,c=s.Hasher,o=n.algo,u=[];(function(){for(var x=0;x<64;x++)u[x]=r.abs(r.sin(x+1))*4294967296|0})();var h=o.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(x,f){for(var y=0;y<16;y++){var m=f+y,p=x[m];x[m]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360}var v=this._hash.words,b=x[f+0],k=x[f+1],I=x[f+2],A=x[f+3],N=x[f+4],D=x[f+5],C=x[f+6],T=x[f+7],P=x[f+8],O=x[f+9],R=x[f+10],W=x[f+11],ee=x[f+12],J=x[f+13],X=x[f+14],Q=x[f+15],E=v[0],_=v[1],M=v[2],B=v[3];E=d(E,_,M,B,b,7,u[0]),B=d(B,E,_,M,k,12,u[1]),M=d(M,B,E,_,I,17,u[2]),_=d(_,M,B,E,A,22,u[3]),E=d(E,_,M,B,N,7,u[4]),B=d(B,E,_,M,D,12,u[5]),M=d(M,B,E,_,C,17,u[6]),_=d(_,M,B,E,T,22,u[7]),E=d(E,_,M,B,P,7,u[8]),B=d(B,E,_,M,O,12,u[9]),M=d(M,B,E,_,R,17,u[10]),_=d(_,M,B,E,W,22,u[11]),E=d(E,_,M,B,ee,7,u[12]),B=d(B,E,_,M,J,12,u[13]),M=d(M,B,E,_,X,17,u[14]),_=d(_,M,B,E,Q,22,u[15]),E=l(E,_,M,B,k,5,u[16]),B=l(B,E,_,M,C,9,u[17]),M=l(M,B,E,_,W,14,u[18]),_=l(_,M,B,E,b,20,u[19]),E=l(E,_,M,B,D,5,u[20]),B=l(B,E,_,M,R,9,u[21]),M=l(M,B,E,_,Q,14,u[22]),_=l(_,M,B,E,N,20,u[23]),E=l(E,_,M,B,O,5,u[24]),B=l(B,E,_,M,X,9,u[25]),M=l(M,B,E,_,A,14,u[26]),_=l(_,M,B,E,P,20,u[27]),E=l(E,_,M,B,J,5,u[28]),B=l(B,E,_,M,I,9,u[29]),M=l(M,B,E,_,T,14,u[30]),_=l(_,M,B,E,ee,20,u[31]),E=g(E,_,M,B,D,4,u[32]),B=g(B,E,_,M,P,11,u[33]),M=g(M,B,E,_,W,16,u[34]),_=g(_,M,B,E,X,23,u[35]),E=g(E,_,M,B,k,4,u[36]),B=g(B,E,_,M,N,11,u[37]),M=g(M,B,E,_,T,16,u[38]),_=g(_,M,B,E,R,23,u[39]),E=g(E,_,M,B,J,4,u[40]),B=g(B,E,_,M,b,11,u[41]),M=g(M,B,E,_,A,16,u[42]),_=g(_,M,B,E,C,23,u[43]),E=g(E,_,M,B,O,4,u[44]),B=g(B,E,_,M,ee,11,u[45]),M=g(M,B,E,_,Q,16,u[46]),_=g(_,M,B,E,I,23,u[47]),E=w(E,_,M,B,b,6,u[48]),B=w(B,E,_,M,T,10,u[49]),M=w(M,B,E,_,X,15,u[50]),_=w(_,M,B,E,D,21,u[51]),E=w(E,_,M,B,ee,6,u[52]),B=w(B,E,_,M,A,10,u[53]),M=w(M,B,E,_,R,15,u[54]),_=w(_,M,B,E,k,21,u[55]),E=w(E,_,M,B,P,6,u[56]),B=w(B,E,_,M,Q,10,u[57]),M=w(M,B,E,_,C,15,u[58]),_=w(_,M,B,E,J,21,u[59]),E=w(E,_,M,B,N,6,u[60]),B=w(B,E,_,M,W,10,u[61]),M=w(M,B,E,_,I,15,u[62]),_=w(_,M,B,E,O,21,u[63]),v[0]=v[0]+E|0,v[1]=v[1]+_|0,v[2]=v[2]+M|0,v[3]=v[3]+B|0},_doFinalize:function(){var x=this._data,f=x.words,y=this._nDataBytes*8,m=x.sigBytes*8;f[m>>>5]|=128<<24-m%32;var p=r.floor(y/4294967296),v=y;f[(m+64>>>9<<4)+15]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,f[(m+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,x.sigBytes=(f.length+1)*4,this._process();for(var b=this._hash,k=b.words,I=0;I<4;I++){var A=k[I];k[I]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return b},clone:function(){var x=c.clone.call(this);return x._hash=this._hash.clone(),x}});function d(x,f,y,m,p,v,b){var k=x+(f&y|~f&m)+p+b;return(k<<v|k>>>32-v)+f}function l(x,f,y,m,p,v,b){var k=x+(f&m|y&~m)+p+b;return(k<<v|k>>>32-v)+f}function g(x,f,y,m,p,v,b){var k=x+(f^y^m)+p+b;return(k<<v|k>>>32-v)+f}function w(x,f,y,m,p,v,b){var k=x+(y^(f|~m))+p+b;return(k<<v|k>>>32-v)+f}n.MD5=c._createHelper(h),n.HmacMD5=c._createHmacHelper(h)}(Math),t.MD5})}(Vi)),Vi.exports}var zi={exports:{}},va;function b0(){return va||(va=1,function(i,e){(function(t,r){i.exports=r(z())})(H,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=n.Hasher,c=r.algo,o=[],u=c.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(h,d){for(var l=this._hash.words,g=l[0],w=l[1],x=l[2],f=l[3],y=l[4],m=0;m<80;m++){if(m<16)o[m]=h[d+m]|0;else{var p=o[m-3]^o[m-8]^o[m-14]^o[m-16];o[m]=p<<1|p>>>31}var v=(g<<5|g>>>27)+y+o[m];m<20?v+=(w&x|~w&f)+1518500249:m<40?v+=(w^x^f)+1859775393:m<60?v+=(w&x|w&f|x&f)-1894007588:v+=(w^x^f)-899497514,y=f,f=x,x=w<<30|w>>>2,w=g,g=v}l[0]=l[0]+g|0,l[1]=l[1]+w|0,l[2]=l[2]+x|0,l[3]=l[3]+f|0,l[4]=l[4]+y|0},_doFinalize:function(){var h=this._data,d=h.words,l=this._nDataBytes*8,g=h.sigBytes*8;return d[g>>>5]|=128<<24-g%32,d[(g+64>>>9<<4)+14]=Math.floor(l/4294967296),d[(g+64>>>9<<4)+15]=l,h.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});r.SHA1=a._createHelper(u),r.HmacSHA1=a._createHmacHelper(u)}(),t.SHA1})}(zi)),zi.exports}var $i={exports:{}},ya;function is(){return ya||(ya=1,function(i,e){(function(t,r){i.exports=r(z())})(H,function(t){return function(r){var n=t,s=n.lib,a=s.WordArray,c=s.Hasher,o=n.algo,u=[],h=[];(function(){function g(y){for(var m=r.sqrt(y),p=2;p<=m;p++)if(!(y%p))return!1;return!0}function w(y){return(y-(y|0))*4294967296|0}for(var x=2,f=0;f<64;)g(x)&&(f<8&&(u[f]=w(r.pow(x,1/2))),h[f]=w(r.pow(x,1/3)),f++),x++})();var d=[],l=o.SHA256=c.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(g,w){for(var x=this._hash.words,f=x[0],y=x[1],m=x[2],p=x[3],v=x[4],b=x[5],k=x[6],I=x[7],A=0;A<64;A++){if(A<16)d[A]=g[w+A]|0;else{var N=d[A-15],D=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,C=d[A-2],T=(C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10;d[A]=D+d[A-7]+T+d[A-16]}var P=v&b^~v&k,O=f&y^f&m^y&m,R=(f<<30|f>>>2)^(f<<19|f>>>13)^(f<<10|f>>>22),W=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),ee=I+W+P+h[A]+d[A],J=R+O;I=k,k=b,b=v,v=p+ee|0,p=m,m=y,y=f,f=ee+J|0}x[0]=x[0]+f|0,x[1]=x[1]+y|0,x[2]=x[2]+m|0,x[3]=x[3]+p|0,x[4]=x[4]+v|0,x[5]=x[5]+b|0,x[6]=x[6]+k|0,x[7]=x[7]+I|0},_doFinalize:function(){var g=this._data,w=g.words,x=this._nDataBytes*8,f=g.sigBytes*8;return w[f>>>5]|=128<<24-f%32,w[(f+64>>>9<<4)+14]=r.floor(x/4294967296),w[(f+64>>>9<<4)+15]=x,g.sigBytes=w.length*4,this._process(),this._hash},clone:function(){var g=c.clone.call(this);return g._hash=this._hash.clone(),g}});n.SHA256=c._createHelper(l),n.HmacSHA256=c._createHmacHelper(l)}(Math),t.SHA256})}($i)),$i.exports}var qi={exports:{}},Da;function Ff(){return Da||(Da=1,function(i,e){(function(t,r,n){i.exports=r(z(),is())})(H,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=r.algo,c=a.SHA256,o=a.SHA224=c.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=c._doFinalize.call(this);return u.sigBytes-=4,u}});r.SHA224=c._createHelper(o),r.HmacSHA224=c._createHmacHelper(o)}(),t.SHA224})}(qi)),qi.exports}var Gi={exports:{}},ba;function k0(){return ba||(ba=1,function(i,e){(function(t,r,n){i.exports=r(z(),wi())})(H,function(t){return function(){var r=t,n=r.lib,s=n.Hasher,a=r.x64,c=a.Word,o=a.WordArray,u=r.algo;function h(){return c.create.apply(c,arguments)}var d=[h(1116352408,3609767458),h(1899447441,602891725),h(3049323471,3964484399),h(3921009573,2173295548),h(961987163,4081628472),h(1508970993,3053834265),h(2453635748,2937671579),h(2870763221,3664609560),h(3624381080,2734883394),h(310598401,1164996542),h(607225278,1323610764),h(1426881987,3590304994),h(1925078388,4068182383),h(2162078206,991336113),h(2614888103,633803317),h(3248222580,3479774868),h(3835390401,2666613458),h(4022224774,944711139),h(264347078,2341262773),h(604807628,2007800933),h(770255983,1495990901),h(1249150122,1856431235),h(1555081692,3175218132),h(1996064986,2198950837),h(2554220882,3999719339),h(2821834349,766784016),h(2952996808,2566594879),h(3210313671,3203337956),h(3336571891,1034457026),h(3584528711,2466948901),h(113926993,3758326383),h(338241895,168717936),h(666307205,1188179964),h(773529912,1546045734),h(1294757372,1522805485),h(1396182291,2643833823),h(1695183700,2343527390),h(1986661051,1014477480),h(2177026350,1206759142),h(2456956037,344077627),h(2730485921,1290863460),h(2820302411,3158454273),h(3259730800,3505952657),h(3345764771,106217008),h(3516065817,3606008344),h(3600352804,1432725776),h(4094571909,1467031594),h(275423344,851169720),h(430227734,3100823752),h(506948616,1363258195),h(659060556,3750685593),h(883997877,3785050280),h(958139571,3318307427),h(1322822218,3812723403),h(1537002063,2003034995),h(1747873779,3602036899),h(1955562222,1575990012),h(2024104815,1125592928),h(2227730452,2716904306),h(2361852424,442776044),h(2428436474,593698344),h(2756734187,3733110249),h(3204031479,2999351573),h(3329325298,3815920427),h(3391569614,3928383900),h(3515267271,566280711),h(3940187606,3454069534),h(4118630271,4000239992),h(116418474,1914138554),h(174292421,2731055270),h(289380356,3203993006),h(460393269,320620315),h(685471733,587496836),h(852142971,1086792851),h(1017036298,365543100),h(1126000580,2618297676),h(1288033470,3409855158),h(1501505948,4234509866),h(1607167915,987167468),h(1816402316,1246189591)],l=[];(function(){for(var w=0;w<80;w++)l[w]=h()})();var g=u.SHA512=s.extend({_doReset:function(){this._hash=new o.init([new c.init(1779033703,4089235720),new c.init(3144134277,2227873595),new c.init(1013904242,4271175723),new c.init(2773480762,1595750129),new c.init(1359893119,2917565137),new c.init(2600822924,725511199),new c.init(528734635,4215389547),new c.init(1541459225,327033209)])},_doProcessBlock:function(w,x){for(var f=this._hash.words,y=f[0],m=f[1],p=f[2],v=f[3],b=f[4],k=f[5],I=f[6],A=f[7],N=y.high,D=y.low,C=m.high,T=m.low,P=p.high,O=p.low,R=v.high,W=v.low,ee=b.high,J=b.low,X=k.high,Q=k.low,E=I.high,_=I.low,M=A.high,B=A.low,te=N,Z=D,pe=C,V=T,rr=P,Pt=O,Di=R,ir=W,Ee=ee,ve=J,Mr=X,nr=Q,Nr=E,sr=_,bi=M,ar=B,Te=0;Te<80;Te++){var be,rt,Sr=l[Te];if(Te<16)rt=Sr.high=w[x+Te*2]|0,be=Sr.low=w[x+Te*2+1]|0;else{var xs=l[Te-15],Bt=xs.high,or=xs.low,M0=(Bt>>>1|or<<31)^(Bt>>>8|or<<24)^Bt>>>7,ws=(or>>>1|Bt<<31)^(or>>>8|Bt<<24)^(or>>>7|Bt<<25),vs=l[Te-2],_t=vs.high,cr=vs.low,N0=(_t>>>19|cr<<13)^(_t<<3|cr>>>29)^_t>>>6,ys=(cr>>>19|_t<<13)^(cr<<3|_t>>>29)^(cr>>>6|_t<<26),Ds=l[Te-7],S0=Ds.high,O0=Ds.low,bs=l[Te-16],F0=bs.high,ks=bs.low;be=ws+O0,rt=M0+S0+(be>>>0<ws>>>0?1:0),be=be+ys,rt=rt+N0+(be>>>0<ys>>>0?1:0),be=be+ks,rt=rt+F0+(be>>>0<ks>>>0?1:0),Sr.high=rt,Sr.low=be}var R0=Ee&Mr^~Ee&Nr,Is=ve&nr^~ve&sr,L0=te&pe^te&rr^pe&rr,U0=Z&V^Z&Pt^V&Pt,W0=(te>>>28|Z<<4)^(te<<30|Z>>>2)^(te<<25|Z>>>7),Cs=(Z>>>28|te<<4)^(Z<<30|te>>>2)^(Z<<25|te>>>7),H0=(Ee>>>14|ve<<18)^(Ee>>>18|ve<<14)^(Ee<<23|ve>>>9),V0=(ve>>>14|Ee<<18)^(ve>>>18|Ee<<14)^(ve<<23|Ee>>>9),As=d[Te],z0=As.high,Es=As.low,ye=ar+V0,it=bi+H0+(ye>>>0<ar>>>0?1:0),ye=ye+Is,it=it+R0+(ye>>>0<Is>>>0?1:0),ye=ye+Es,it=it+z0+(ye>>>0<Es>>>0?1:0),ye=ye+be,it=it+rt+(ye>>>0<be>>>0?1:0),Ts=Cs+U0,$0=W0+L0+(Ts>>>0<Cs>>>0?1:0);bi=Nr,ar=sr,Nr=Mr,sr=nr,Mr=Ee,nr=ve,ve=ir+ye|0,Ee=Di+it+(ve>>>0<ir>>>0?1:0)|0,Di=rr,ir=Pt,rr=pe,Pt=V,pe=te,V=Z,Z=ye+Ts|0,te=it+$0+(Z>>>0<ye>>>0?1:0)|0}D=y.low=D+Z,y.high=N+te+(D>>>0<Z>>>0?1:0),T=m.low=T+V,m.high=C+pe+(T>>>0<V>>>0?1:0),O=p.low=O+Pt,p.high=P+rr+(O>>>0<Pt>>>0?1:0),W=v.low=W+ir,v.high=R+Di+(W>>>0<ir>>>0?1:0),J=b.low=J+ve,b.high=ee+Ee+(J>>>0<ve>>>0?1:0),Q=k.low=Q+nr,k.high=X+Mr+(Q>>>0<nr>>>0?1:0),_=I.low=_+sr,I.high=E+Nr+(_>>>0<sr>>>0?1:0),B=A.low=B+ar,A.high=M+bi+(B>>>0<ar>>>0?1:0)},_doFinalize:function(){var w=this._data,x=w.words,f=this._nDataBytes*8,y=w.sigBytes*8;x[y>>>5]|=128<<24-y%32,x[(y+128>>>10<<5)+30]=Math.floor(f/4294967296),x[(y+128>>>10<<5)+31]=f,w.sigBytes=x.length*4,this._process();var m=this._hash.toX32();return m},clone:function(){var w=s.clone.call(this);return w._hash=this._hash.clone(),w},blockSize:1024/32});r.SHA512=s._createHelper(g),r.HmacSHA512=s._createHmacHelper(g)}(),t.SHA512})}(Gi)),Gi.exports}var Yi={exports:{}},ka;function Rf(){return ka||(ka=1,function(i,e){(function(t,r,n){i.exports=r(z(),wi(),k0())})(H,function(t){return function(){var r=t,n=r.x64,s=n.Word,a=n.WordArray,c=r.algo,o=c.SHA512,u=c.SHA384=o.extend({_doReset:function(){this._hash=new a.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var h=o._doFinalize.call(this);return h.sigBytes-=16,h}});r.SHA384=o._createHelper(u),r.HmacSHA384=o._createHmacHelper(u)}(),t.SHA384})}(Yi)),Yi.exports}var Ji={exports:{}},Ia;function Lf(){return Ia||(Ia=1,function(i,e){(function(t,r,n){i.exports=r(z(),wi())})(H,function(t){return function(r){var n=t,s=n.lib,a=s.WordArray,c=s.Hasher,o=n.x64,u=o.Word,h=n.algo,d=[],l=[],g=[];(function(){for(var f=1,y=0,m=0;m<24;m++){d[f+5*y]=(m+1)*(m+2)/2%64;var p=y%5,v=(2*f+3*y)%5;f=p,y=v}for(var f=0;f<5;f++)for(var y=0;y<5;y++)l[f+5*y]=y+(2*f+3*y)%5*5;for(var b=1,k=0;k<24;k++){for(var I=0,A=0,N=0;N<7;N++){if(b&1){var D=(1<<N)-1;D<32?A^=1<<D:I^=1<<D-32}b&128?b=b<<1^113:b<<=1}g[k]=u.create(I,A)}})();var w=[];(function(){for(var f=0;f<25;f++)w[f]=u.create()})();var x=h.SHA3=c.extend({cfg:c.cfg.extend({outputLength:512}),_doReset:function(){for(var f=this._state=[],y=0;y<25;y++)f[y]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(f,y){for(var m=this._state,p=this.blockSize/2,v=0;v<p;v++){var b=f[y+2*v],k=f[y+2*v+1];b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var I=m[v];I.high^=k,I.low^=b}for(var A=0;A<24;A++){for(var N=0;N<5;N++){for(var D=0,C=0,T=0;T<5;T++){var I=m[N+5*T];D^=I.high,C^=I.low}var P=w[N];P.high=D,P.low=C}for(var N=0;N<5;N++)for(var O=w[(N+4)%5],R=w[(N+1)%5],W=R.high,ee=R.low,D=O.high^(W<<1|ee>>>31),C=O.low^(ee<<1|W>>>31),T=0;T<5;T++){var I=m[N+5*T];I.high^=D,I.low^=C}for(var J=1;J<25;J++){var D,C,I=m[J],X=I.high,Q=I.low,E=d[J];E<32?(D=X<<E|Q>>>32-E,C=Q<<E|X>>>32-E):(D=Q<<E-32|X>>>64-E,C=X<<E-32|Q>>>64-E);var _=w[l[J]];_.high=D,_.low=C}var M=w[0],B=m[0];M.high=B.high,M.low=B.low;for(var N=0;N<5;N++)for(var T=0;T<5;T++){var J=N+5*T,I=m[J],te=w[J],Z=w[(N+1)%5+5*T],pe=w[(N+2)%5+5*T];I.high=te.high^~Z.high&pe.high,I.low=te.low^~Z.low&pe.low}var I=m[0],V=g[A];I.high^=V.high,I.low^=V.low}},_doFinalize:function(){var f=this._data,y=f.words;this._nDataBytes*8;var m=f.sigBytes*8,p=this.blockSize*32;y[m>>>5]|=1<<24-m%32,y[(r.ceil((m+1)/p)*p>>>5)-1]|=128,f.sigBytes=y.length*4,this._process();for(var v=this._state,b=this.cfg.outputLength/8,k=b/8,I=[],A=0;A<k;A++){var N=v[A],D=N.high,C=N.low;D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,I.push(C),I.push(D)}return new a.init(I,b)},clone:function(){for(var f=c.clone.call(this),y=f._state=this._state.slice(0),m=0;m<25;m++)y[m]=y[m].clone();return f}});n.SHA3=c._createHelper(x),n.HmacSHA3=c._createHmacHelper(x)}(Math),t.SHA3})}(Ji)),Ji.exports}var Ki={exports:{}},Ca;function Uf(){return Ca||(Ca=1,function(i,e){(function(t,r){i.exports=r(z())})(H,function(t){/** @preserve
			(c) 2012 by CÃ©dric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var n=t,s=n.lib,a=s.WordArray,c=s.Hasher,o=n.algo,u=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),h=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=a.create([0,1518500249,1859775393,2400959708,2840853838]),w=a.create([1352829926,1548603684,1836072691,2053994217,0]),x=o.RIPEMD160=c.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,I){for(var A=0;A<16;A++){var N=I+A,D=k[N];k[N]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}var C=this._hash.words,T=g.words,P=w.words,O=u.words,R=h.words,W=d.words,ee=l.words,J,X,Q,E,_,M,B,te,Z,pe;M=J=C[0],B=X=C[1],te=Q=C[2],Z=E=C[3],pe=_=C[4];for(var V,A=0;A<80;A+=1)V=J+k[I+O[A]]|0,A<16?V+=f(X,Q,E)+T[0]:A<32?V+=y(X,Q,E)+T[1]:A<48?V+=m(X,Q,E)+T[2]:A<64?V+=p(X,Q,E)+T[3]:V+=v(X,Q,E)+T[4],V=V|0,V=b(V,W[A]),V=V+_|0,J=_,_=E,E=b(Q,10),Q=X,X=V,V=M+k[I+R[A]]|0,A<16?V+=v(B,te,Z)+P[0]:A<32?V+=p(B,te,Z)+P[1]:A<48?V+=m(B,te,Z)+P[2]:A<64?V+=y(B,te,Z)+P[3]:V+=f(B,te,Z)+P[4],V=V|0,V=b(V,ee[A]),V=V+pe|0,M=pe,pe=Z,Z=b(te,10),te=B,B=V;V=C[1]+Q+Z|0,C[1]=C[2]+E+pe|0,C[2]=C[3]+_+M|0,C[3]=C[4]+J+B|0,C[4]=C[0]+X+te|0,C[0]=V},_doFinalize:function(){var k=this._data,I=k.words,A=this._nDataBytes*8,N=k.sigBytes*8;I[N>>>5]|=128<<24-N%32,I[(N+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,k.sigBytes=(I.length+1)*4,this._process();for(var D=this._hash,C=D.words,T=0;T<5;T++){var P=C[T];C[T]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return D},clone:function(){var k=c.clone.call(this);return k._hash=this._hash.clone(),k}});function f(k,I,A){return k^I^A}function y(k,I,A){return k&I|~k&A}function m(k,I,A){return(k|~I)^A}function p(k,I,A){return k&A|I&~A}function v(k,I,A){return k^(I|~A)}function b(k,I){return k<<I|k>>>32-I}n.RIPEMD160=c._createHelper(x),n.HmacRIPEMD160=c._createHmacHelper(x)}(),t.RIPEMD160})}(Ki)),Ki.exports}var Qi={exports:{}},Aa;function ns(){return Aa||(Aa=1,function(i,e){(function(t,r){i.exports=r(z())})(H,function(t){(function(){var r=t,n=r.lib,s=n.Base,a=r.enc,c=a.Utf8,o=r.algo;o.HMAC=s.extend({init:function(u,h){u=this._hasher=new u.init,typeof h=="string"&&(h=c.parse(h));var d=u.blockSize,l=d*4;h.sigBytes>l&&(h=u.finalize(h)),h.clamp();for(var g=this._oKey=h.clone(),w=this._iKey=h.clone(),x=g.words,f=w.words,y=0;y<d;y++)x[y]^=1549556828,f[y]^=909522486;g.sigBytes=w.sigBytes=l,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var h=this._hasher,d=h.finalize(u);h.reset();var l=h.finalize(this._oKey.clone().concat(d));return l}})})()})}(Qi)),Qi.exports}var Xi={exports:{}},Ea;function Wf(){return Ea||(Ea=1,function(i,e){(function(t,r,n){i.exports=r(z(),is(),ns())})(H,function(t){return function(){var r=t,n=r.lib,s=n.Base,a=n.WordArray,c=r.algo,o=c.SHA256,u=c.HMAC,h=c.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:o,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,l){for(var g=this.cfg,w=u.create(g.hasher,d),x=a.create(),f=a.create([1]),y=x.words,m=f.words,p=g.keySize,v=g.iterations;y.length<p;){var b=w.update(l).finalize(f);w.reset();for(var k=b.words,I=k.length,A=b,N=1;N<v;N++){A=w.finalize(A),w.reset();for(var D=A.words,C=0;C<I;C++)k[C]^=D[C]}x.concat(b),m[0]++}return x.sigBytes=p*4,x}});r.PBKDF2=function(d,l,g){return h.create(g).compute(d,l)}}(),t.PBKDF2})}(Xi)),Xi.exports}var Zi={exports:{}},Ta;function ft(){return Ta||(Ta=1,function(i,e){(function(t,r,n){i.exports=r(z(),b0(),ns())})(H,function(t){return function(){var r=t,n=r.lib,s=n.Base,a=n.WordArray,c=r.algo,o=c.MD5,u=c.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:o,iterations:1}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,d){for(var l,g=this.cfg,w=g.hasher.create(),x=a.create(),f=x.words,y=g.keySize,m=g.iterations;f.length<y;){l&&w.update(l),l=w.update(h).finalize(d),w.reset();for(var p=1;p<m;p++)l=w.finalize(l),w.reset();x.concat(l)}return x.sigBytes=y*4,x}});r.EvpKDF=function(h,d,l){return u.create(l).compute(h,d)}}(),t.EvpKDF})}(Zi)),Zi.exports}var ji={exports:{}},Pa;function de(){return Pa||(Pa=1,function(i,e){(function(t,r,n){i.exports=r(z(),ft())})(H,function(t){t.lib.Cipher||function(r){var n=t,s=n.lib,a=s.Base,c=s.WordArray,o=s.BufferedBlockAlgorithm,u=n.enc;u.Utf8;var h=u.Base64,d=n.algo,l=d.EvpKDF,g=s.Cipher=o.extend({cfg:a.extend(),createEncryptor:function(D,C){return this.create(this._ENC_XFORM_MODE,D,C)},createDecryptor:function(D,C){return this.create(this._DEC_XFORM_MODE,D,C)},init:function(D,C,T){this.cfg=this.cfg.extend(T),this._xformMode=D,this._key=C,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(D){return this._append(D),this._process()},finalize:function(D){D&&this._append(D);var C=this._doFinalize();return C},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function D(C){return typeof C=="string"?N:k}return function(C){return{encrypt:function(T,P,O){return D(P).encrypt(C,T,P,O)},decrypt:function(T,P,O){return D(P).decrypt(C,T,P,O)}}}}()});s.StreamCipher=g.extend({_doFinalize:function(){var D=this._process(!0);return D},blockSize:1});var w=n.mode={},x=s.BlockCipherMode=a.extend({createEncryptor:function(D,C){return this.Encryptor.create(D,C)},createDecryptor:function(D,C){return this.Decryptor.create(D,C)},init:function(D,C){this._cipher=D,this._iv=C}}),f=w.CBC=function(){var D=x.extend();D.Encryptor=D.extend({processBlock:function(T,P){var O=this._cipher,R=O.blockSize;C.call(this,T,P,R),O.encryptBlock(T,P),this._prevBlock=T.slice(P,P+R)}}),D.Decryptor=D.extend({processBlock:function(T,P){var O=this._cipher,R=O.blockSize,W=T.slice(P,P+R);O.decryptBlock(T,P),C.call(this,T,P,R),this._prevBlock=W}});function C(T,P,O){var R,W=this._iv;W?(R=W,this._iv=r):R=this._prevBlock;for(var ee=0;ee<O;ee++)T[P+ee]^=R[ee]}return D}(),y=n.pad={},m=y.Pkcs7={pad:function(D,C){for(var T=C*4,P=T-D.sigBytes%T,O=P<<24|P<<16|P<<8|P,R=[],W=0;W<P;W+=4)R.push(O);var ee=c.create(R,P);D.concat(ee)},unpad:function(D){var C=D.words[D.sigBytes-1>>>2]&255;D.sigBytes-=C}};s.BlockCipher=g.extend({cfg:g.cfg.extend({mode:f,padding:m}),reset:function(){var D;g.reset.call(this);var C=this.cfg,T=C.iv,P=C.mode;this._xformMode==this._ENC_XFORM_MODE?D=P.createEncryptor:(D=P.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==D?this._mode.init(this,T&&T.words):(this._mode=D.call(P,this,T&&T.words),this._mode.__creator=D)},_doProcessBlock:function(D,C){this._mode.processBlock(D,C)},_doFinalize:function(){var D,C=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(C.pad(this._data,this.blockSize),D=this._process(!0)):(D=this._process(!0),C.unpad(D)),D},blockSize:128/32});var p=s.CipherParams=a.extend({init:function(D){this.mixIn(D)},toString:function(D){return(D||this.formatter).stringify(this)}}),v=n.format={},b=v.OpenSSL={stringify:function(D){var C,T=D.ciphertext,P=D.salt;return P?C=c.create([1398893684,1701076831]).concat(P).concat(T):C=T,C.toString(h)},parse:function(D){var C,T=h.parse(D),P=T.words;return P[0]==1398893684&&P[1]==1701076831&&(C=c.create(P.slice(2,4)),P.splice(0,4),T.sigBytes-=16),p.create({ciphertext:T,salt:C})}},k=s.SerializableCipher=a.extend({cfg:a.extend({format:b}),encrypt:function(D,C,T,P){P=this.cfg.extend(P);var O=D.createEncryptor(T,P),R=O.finalize(C),W=O.cfg;return p.create({ciphertext:R,key:T,iv:W.iv,algorithm:D,mode:W.mode,padding:W.padding,blockSize:D.blockSize,formatter:P.format})},decrypt:function(D,C,T,P){P=this.cfg.extend(P),C=this._parse(C,P.format);var O=D.createDecryptor(T,P).finalize(C.ciphertext);return O},_parse:function(D,C){return typeof D=="string"?C.parse(D,this):D}}),I=n.kdf={},A=I.OpenSSL={execute:function(D,C,T,P,O){if(P||(P=c.random(64/8)),O)var R=l.create({keySize:C+T,hasher:O}).compute(D,P);else var R=l.create({keySize:C+T}).compute(D,P);var W=c.create(R.words.slice(C),T*4);return R.sigBytes=C*4,p.create({key:R,iv:W,salt:P})}},N=s.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:A}),encrypt:function(D,C,T,P){P=this.cfg.extend(P);var O=P.kdf.execute(T,D.keySize,D.ivSize,P.salt,P.hasher);P.iv=O.iv;var R=k.encrypt.call(this,D,C,O.key,P);return R.mixIn(O),R},decrypt:function(D,C,T,P){P=this.cfg.extend(P),C=this._parse(C,P.format);var O=P.kdf.execute(T,D.keySize,D.ivSize,C.salt,P.hasher);P.iv=O.iv;var R=k.decrypt.call(this,D,C,O.key,P);return R}})}()})}(ji)),ji.exports}var en={exports:{}},Ba;function Hf(){return Ba||(Ba=1,function(i,e){(function(t,r,n){i.exports=r(z(),de())})(H,function(t){return t.mode.CFB=function(){var r=t.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize;n.call(this,s,a,o,c),this._prevBlock=s.slice(a,a+o)}}),r.Decryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize,u=s.slice(a,a+o);n.call(this,s,a,o,c),this._prevBlock=u}});function n(s,a,c,o){var u,h=this._iv;h?(u=h.slice(0),this._iv=void 0):u=this._prevBlock,o.encryptBlock(u,0);for(var d=0;d<c;d++)s[a+d]^=u[d]}return r}(),t.mode.CFB})}(en)),en.exports}var tn={exports:{}},_a;function Vf(){return _a||(_a=1,function(i,e){(function(t,r,n){i.exports=r(z(),de())})(H,function(t){return t.mode.CTR=function(){var r=t.lib.BlockCipherMode.extend(),n=r.Encryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize,u=this._iv,h=this._counter;u&&(h=this._counter=u.slice(0),this._iv=void 0);var d=h.slice(0);c.encryptBlock(d,0),h[o-1]=h[o-1]+1|0;for(var l=0;l<o;l++)s[a+l]^=d[l]}});return r.Decryptor=n,r}(),t.mode.CTR})}(tn)),tn.exports}var rn={exports:{}},Ma;function zf(){return Ma||(Ma=1,function(i,e){(function(t,r,n){i.exports=r(z(),de())})(H,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var r=t.lib.BlockCipherMode.extend();function n(c){if((c>>24&255)===255){var o=c>>16&255,u=c>>8&255,h=c&255;o===255?(o=0,u===255?(u=0,h===255?h=0:++h):++u):++o,c=0,c+=o<<16,c+=u<<8,c+=h}else c+=1<<24;return c}function s(c){return(c[0]=n(c[0]))===0&&(c[1]=n(c[1])),c}var a=r.Encryptor=r.extend({processBlock:function(c,o){var u=this._cipher,h=u.blockSize,d=this._iv,l=this._counter;d&&(l=this._counter=d.slice(0),this._iv=void 0),s(l);var g=l.slice(0);u.encryptBlock(g,0);for(var w=0;w<h;w++)c[o+w]^=g[w]}});return r.Decryptor=a,r}(),t.mode.CTRGladman})}(rn)),rn.exports}var nn={exports:{}},Na;function $f(){return Na||(Na=1,function(i,e){(function(t,r,n){i.exports=r(z(),de())})(H,function(t){return t.mode.OFB=function(){var r=t.lib.BlockCipherMode.extend(),n=r.Encryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize,u=this._iv,h=this._keystream;u&&(h=this._keystream=u.slice(0),this._iv=void 0),c.encryptBlock(h,0);for(var d=0;d<o;d++)s[a+d]^=h[d]}});return r.Decryptor=n,r}(),t.mode.OFB})}(nn)),nn.exports}var sn={exports:{}},Sa;function qf(){return Sa||(Sa=1,function(i,e){(function(t,r,n){i.exports=r(z(),de())})(H,function(t){return t.mode.ECB=function(){var r=t.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(n,s){this._cipher.encryptBlock(n,s)}}),r.Decryptor=r.extend({processBlock:function(n,s){this._cipher.decryptBlock(n,s)}}),r}(),t.mode.ECB})}(sn)),sn.exports}var an={exports:{}},Oa;function Gf(){return Oa||(Oa=1,function(i,e){(function(t,r,n){i.exports=r(z(),de())})(H,function(t){return t.pad.AnsiX923={pad:function(r,n){var s=r.sigBytes,a=n*4,c=a-s%a,o=s+c-1;r.clamp(),r.words[o>>>2]|=c<<24-o%4*8,r.sigBytes+=c},unpad:function(r){var n=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=n}},t.pad.Ansix923})}(an)),an.exports}var on={exports:{}},Fa;function Yf(){return Fa||(Fa=1,function(i,e){(function(t,r,n){i.exports=r(z(),de())})(H,function(t){return t.pad.Iso10126={pad:function(r,n){var s=n*4,a=s-r.sigBytes%s;r.concat(t.lib.WordArray.random(a-1)).concat(t.lib.WordArray.create([a<<24],1))},unpad:function(r){var n=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=n}},t.pad.Iso10126})}(on)),on.exports}var cn={exports:{}},Ra;function Jf(){return Ra||(Ra=1,function(i,e){(function(t,r,n){i.exports=r(z(),de())})(H,function(t){return t.pad.Iso97971={pad:function(r,n){r.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(r,n)},unpad:function(r){t.pad.ZeroPadding.unpad(r),r.sigBytes--}},t.pad.Iso97971})}(cn)),cn.exports}var un={exports:{}},La;function Kf(){return La||(La=1,function(i,e){(function(t,r,n){i.exports=r(z(),de())})(H,function(t){return t.pad.ZeroPadding={pad:function(r,n){var s=n*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var n=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(n[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},t.pad.ZeroPadding})}(un)),un.exports}var hn={exports:{}},Ua;function Qf(){return Ua||(Ua=1,function(i,e){(function(t,r,n){i.exports=r(z(),de())})(H,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(hn)),hn.exports}var ln={exports:{}},Wa;function Xf(){return Wa||(Wa=1,function(i,e){(function(t,r,n){i.exports=r(z(),de())})(H,function(t){return function(r){var n=t,s=n.lib,a=s.CipherParams,c=n.enc,o=c.Hex,u=n.format;u.Hex={stringify:function(h){return h.ciphertext.toString(o)},parse:function(h){var d=o.parse(h);return a.create({ciphertext:d})}}}(),t.format.Hex})}(ln)),ln.exports}var dn={exports:{}},Ha;function Zf(){return Ha||(Ha=1,function(i,e){(function(t,r,n){i.exports=r(z(),Et(),Tt(),ft(),de())})(H,function(t){return function(){var r=t,n=r.lib,s=n.BlockCipher,a=r.algo,c=[],o=[],u=[],h=[],d=[],l=[],g=[],w=[],x=[],f=[];(function(){for(var p=[],v=0;v<256;v++)v<128?p[v]=v<<1:p[v]=v<<1^283;for(var b=0,k=0,v=0;v<256;v++){var I=k^k<<1^k<<2^k<<3^k<<4;I=I>>>8^I&255^99,c[b]=I,o[I]=b;var A=p[b],N=p[A],D=p[N],C=p[I]*257^I*16843008;u[b]=C<<24|C>>>8,h[b]=C<<16|C>>>16,d[b]=C<<8|C>>>24,l[b]=C;var C=D*16843009^N*65537^A*257^b*16843008;g[I]=C<<24|C>>>8,w[I]=C<<16|C>>>16,x[I]=C<<8|C>>>24,f[I]=C,b?(b=A^p[p[p[D^A]]],k^=p[p[k]]):b=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],m=a.AES=s.extend({_doReset:function(){var p;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var v=this._keyPriorReset=this._key,b=v.words,k=v.sigBytes/4,I=this._nRounds=k+6,A=(I+1)*4,N=this._keySchedule=[],D=0;D<A;D++)D<k?N[D]=b[D]:(p=N[D-1],D%k?k>6&&D%k==4&&(p=c[p>>>24]<<24|c[p>>>16&255]<<16|c[p>>>8&255]<<8|c[p&255]):(p=p<<8|p>>>24,p=c[p>>>24]<<24|c[p>>>16&255]<<16|c[p>>>8&255]<<8|c[p&255],p^=y[D/k|0]<<24),N[D]=N[D-k]^p);for(var C=this._invKeySchedule=[],T=0;T<A;T++){var D=A-T;if(T%4)var p=N[D];else var p=N[D-4];T<4||D<=4?C[T]=p:C[T]=g[c[p>>>24]]^w[c[p>>>16&255]]^x[c[p>>>8&255]]^f[c[p&255]]}}},encryptBlock:function(p,v){this._doCryptBlock(p,v,this._keySchedule,u,h,d,l,c)},decryptBlock:function(p,v){var b=p[v+1];p[v+1]=p[v+3],p[v+3]=b,this._doCryptBlock(p,v,this._invKeySchedule,g,w,x,f,o);var b=p[v+1];p[v+1]=p[v+3],p[v+3]=b},_doCryptBlock:function(p,v,b,k,I,A,N,D){for(var C=this._nRounds,T=p[v]^b[0],P=p[v+1]^b[1],O=p[v+2]^b[2],R=p[v+3]^b[3],W=4,ee=1;ee<C;ee++){var J=k[T>>>24]^I[P>>>16&255]^A[O>>>8&255]^N[R&255]^b[W++],X=k[P>>>24]^I[O>>>16&255]^A[R>>>8&255]^N[T&255]^b[W++],Q=k[O>>>24]^I[R>>>16&255]^A[T>>>8&255]^N[P&255]^b[W++],E=k[R>>>24]^I[T>>>16&255]^A[P>>>8&255]^N[O&255]^b[W++];T=J,P=X,O=Q,R=E}var J=(D[T>>>24]<<24|D[P>>>16&255]<<16|D[O>>>8&255]<<8|D[R&255])^b[W++],X=(D[P>>>24]<<24|D[O>>>16&255]<<16|D[R>>>8&255]<<8|D[T&255])^b[W++],Q=(D[O>>>24]<<24|D[R>>>16&255]<<16|D[T>>>8&255]<<8|D[P&255])^b[W++],E=(D[R>>>24]<<24|D[T>>>16&255]<<16|D[P>>>8&255]<<8|D[O&255])^b[W++];p[v]=J,p[v+1]=X,p[v+2]=Q,p[v+3]=E},keySize:256/32});r.AES=s._createHelper(m)}(),t.AES})}(dn)),dn.exports}var fn={exports:{}},Va;function jf(){return Va||(Va=1,function(i,e){(function(t,r,n){i.exports=r(z(),Et(),Tt(),ft(),de())})(H,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=n.BlockCipher,c=r.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=c.DES=a.extend({_doReset:function(){for(var y=this._key,m=y.words,p=[],v=0;v<56;v++){var b=o[v]-1;p[v]=m[b>>>5]>>>31-b%32&1}for(var k=this._subKeys=[],I=0;I<16;I++){for(var A=k[I]=[],N=h[I],v=0;v<24;v++)A[v/6|0]|=p[(u[v]-1+N)%28]<<31-v%6,A[4+(v/6|0)]|=p[28+(u[v+24]-1+N)%28]<<31-v%6;A[0]=A[0]<<1|A[0]>>>31;for(var v=1;v<7;v++)A[v]=A[v]>>>(v-1)*4+3;A[7]=A[7]<<5|A[7]>>>27}for(var D=this._invSubKeys=[],v=0;v<16;v++)D[v]=k[15-v]},encryptBlock:function(y,m){this._doCryptBlock(y,m,this._subKeys)},decryptBlock:function(y,m){this._doCryptBlock(y,m,this._invSubKeys)},_doCryptBlock:function(y,m,p){this._lBlock=y[m],this._rBlock=y[m+1],w.call(this,4,252645135),w.call(this,16,65535),x.call(this,2,858993459),x.call(this,8,16711935),w.call(this,1,1431655765);for(var v=0;v<16;v++){for(var b=p[v],k=this._lBlock,I=this._rBlock,A=0,N=0;N<8;N++)A|=d[N][((I^b[N])&l[N])>>>0];this._lBlock=I,this._rBlock=k^A}var D=this._lBlock;this._lBlock=this._rBlock,this._rBlock=D,w.call(this,1,1431655765),x.call(this,8,16711935),x.call(this,2,858993459),w.call(this,16,65535),w.call(this,4,252645135),y[m]=this._lBlock,y[m+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function w(y,m){var p=(this._lBlock>>>y^this._rBlock)&m;this._rBlock^=p,this._lBlock^=p<<y}function x(y,m){var p=(this._rBlock>>>y^this._lBlock)&m;this._lBlock^=p,this._rBlock^=p<<y}r.DES=a._createHelper(g);var f=c.TripleDES=a.extend({_doReset:function(){var y=this._key,m=y.words;if(m.length!==2&&m.length!==4&&m.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var p=m.slice(0,2),v=m.length<4?m.slice(0,2):m.slice(2,4),b=m.length<6?m.slice(0,2):m.slice(4,6);this._des1=g.createEncryptor(s.create(p)),this._des2=g.createEncryptor(s.create(v)),this._des3=g.createEncryptor(s.create(b))},encryptBlock:function(y,m){this._des1.encryptBlock(y,m),this._des2.decryptBlock(y,m),this._des3.encryptBlock(y,m)},decryptBlock:function(y,m){this._des3.decryptBlock(y,m),this._des2.encryptBlock(y,m),this._des1.decryptBlock(y,m)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=a._createHelper(f)}(),t.TripleDES})}(fn)),fn.exports}var mn={exports:{}},za;function em(){return za||(za=1,function(i,e){(function(t,r,n){i.exports=r(z(),Et(),Tt(),ft(),de())})(H,function(t){return function(){var r=t,n=r.lib,s=n.StreamCipher,a=r.algo,c=a.RC4=s.extend({_doReset:function(){for(var h=this._key,d=h.words,l=h.sigBytes,g=this._S=[],w=0;w<256;w++)g[w]=w;for(var w=0,x=0;w<256;w++){var f=w%l,y=d[f>>>2]>>>24-f%4*8&255;x=(x+g[w]+y)%256;var m=g[w];g[w]=g[x],g[x]=m}this._i=this._j=0},_doProcessBlock:function(h,d){h[d]^=o.call(this)},keySize:256/32,ivSize:0});function o(){for(var h=this._S,d=this._i,l=this._j,g=0,w=0;w<4;w++){d=(d+1)%256,l=(l+h[d])%256;var x=h[d];h[d]=h[l],h[l]=x,g|=h[(h[d]+h[l])%256]<<24-w*8}return this._i=d,this._j=l,g}r.RC4=s._createHelper(c);var u=a.RC4Drop=c.extend({cfg:c.cfg.extend({drop:192}),_doReset:function(){c._doReset.call(this);for(var h=this.cfg.drop;h>0;h--)o.call(this)}});r.RC4Drop=s._createHelper(u)}(),t.RC4})}(mn)),mn.exports}var pn={exports:{}},$a;function tm(){return $a||($a=1,function(i,e){(function(t,r,n){i.exports=r(z(),Et(),Tt(),ft(),de())})(H,function(t){return function(){var r=t,n=r.lib,s=n.StreamCipher,a=r.algo,c=[],o=[],u=[],h=a.Rabbit=s.extend({_doReset:function(){for(var l=this._key.words,g=this.cfg.iv,w=0;w<4;w++)l[w]=(l[w]<<8|l[w]>>>24)&16711935|(l[w]<<24|l[w]>>>8)&4278255360;var x=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],f=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var w=0;w<4;w++)d.call(this);for(var w=0;w<8;w++)f[w]^=x[w+4&7];if(g){var y=g.words,m=y[0],p=y[1],v=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,b=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,k=v>>>16|b&4294901760,I=b<<16|v&65535;f[0]^=v,f[1]^=k,f[2]^=b,f[3]^=I,f[4]^=v,f[5]^=k,f[6]^=b,f[7]^=I;for(var w=0;w<4;w++)d.call(this)}},_doProcessBlock:function(l,g){var w=this._X;d.call(this),c[0]=w[0]^w[5]>>>16^w[3]<<16,c[1]=w[2]^w[7]>>>16^w[5]<<16,c[2]=w[4]^w[1]>>>16^w[7]<<16,c[3]=w[6]^w[3]>>>16^w[1]<<16;for(var x=0;x<4;x++)c[x]=(c[x]<<8|c[x]>>>24)&16711935|(c[x]<<24|c[x]>>>8)&4278255360,l[g+x]^=c[x]},blockSize:128/32,ivSize:64/32});function d(){for(var l=this._X,g=this._C,w=0;w<8;w++)o[w]=g[w];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<o[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<o[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<o[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<o[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<o[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<o[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<o[6]>>>0?1:0)|0,this._b=g[7]>>>0<o[7]>>>0?1:0;for(var w=0;w<8;w++){var x=l[w]+g[w],f=x&65535,y=x>>>16,m=((f*f>>>17)+f*y>>>15)+y*y,p=((x&4294901760)*x|0)+((x&65535)*x|0);u[w]=m^p}l[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,l[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,l[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,l[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,l[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,l[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,l[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,l[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.Rabbit=s._createHelper(h)}(),t.Rabbit})}(pn)),pn.exports}var gn={exports:{}},qa;function rm(){return qa||(qa=1,function(i,e){(function(t,r,n){i.exports=r(z(),Et(),Tt(),ft(),de())})(H,function(t){return function(){var r=t,n=r.lib,s=n.StreamCipher,a=r.algo,c=[],o=[],u=[],h=a.RabbitLegacy=s.extend({_doReset:function(){var l=this._key.words,g=this.cfg.iv,w=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],x=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var f=0;f<4;f++)d.call(this);for(var f=0;f<8;f++)x[f]^=w[f+4&7];if(g){var y=g.words,m=y[0],p=y[1],v=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,b=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,k=v>>>16|b&4294901760,I=b<<16|v&65535;x[0]^=v,x[1]^=k,x[2]^=b,x[3]^=I,x[4]^=v,x[5]^=k,x[6]^=b,x[7]^=I;for(var f=0;f<4;f++)d.call(this)}},_doProcessBlock:function(l,g){var w=this._X;d.call(this),c[0]=w[0]^w[5]>>>16^w[3]<<16,c[1]=w[2]^w[7]>>>16^w[5]<<16,c[2]=w[4]^w[1]>>>16^w[7]<<16,c[3]=w[6]^w[3]>>>16^w[1]<<16;for(var x=0;x<4;x++)c[x]=(c[x]<<8|c[x]>>>24)&16711935|(c[x]<<24|c[x]>>>8)&4278255360,l[g+x]^=c[x]},blockSize:128/32,ivSize:64/32});function d(){for(var l=this._X,g=this._C,w=0;w<8;w++)o[w]=g[w];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<o[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<o[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<o[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<o[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<o[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<o[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<o[6]>>>0?1:0)|0,this._b=g[7]>>>0<o[7]>>>0?1:0;for(var w=0;w<8;w++){var x=l[w]+g[w],f=x&65535,y=x>>>16,m=((f*f>>>17)+f*y>>>15)+y*y,p=((x&4294901760)*x|0)+((x&65535)*x|0);u[w]=m^p}l[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,l[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,l[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,l[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,l[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,l[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,l[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,l[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.RabbitLegacy=s._createHelper(h)}(),t.RabbitLegacy})}(gn)),gn.exports}var xn={exports:{}},Ga;function im(){return Ga||(Ga=1,function(i,e){(function(t,r,n){i.exports=r(z(),Et(),Tt(),ft(),de())})(H,function(t){return function(){var r=t,n=r.lib,s=n.BlockCipher,a=r.algo;const c=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var h={pbox:[],sbox:[]};function d(f,y){let m=y>>24&255,p=y>>16&255,v=y>>8&255,b=y&255,k=f.sbox[0][m]+f.sbox[1][p];return k=k^f.sbox[2][v],k=k+f.sbox[3][b],k}function l(f,y,m){let p=y,v=m,b;for(let k=0;k<c;++k)p=p^f.pbox[k],v=d(f,p)^v,b=p,p=v,v=b;return b=p,p=v,v=b,v=v^f.pbox[c],p=p^f.pbox[c+1],{left:p,right:v}}function g(f,y,m){let p=y,v=m,b;for(let k=c+1;k>1;--k)p=p^f.pbox[k],v=d(f,p)^v,b=p,p=v,v=b;return b=p,p=v,v=b,v=v^f.pbox[1],p=p^f.pbox[0],{left:p,right:v}}function w(f,y,m){for(let I=0;I<4;I++){f.sbox[I]=[];for(let A=0;A<256;A++)f.sbox[I][A]=u[I][A]}let p=0;for(let I=0;I<c+2;I++)f.pbox[I]=o[I]^y[p],p++,p>=m&&(p=0);let v=0,b=0,k=0;for(let I=0;I<c+2;I+=2)k=l(f,v,b),v=k.left,b=k.right,f.pbox[I]=v,f.pbox[I+1]=b;for(let I=0;I<4;I++)for(let A=0;A<256;A+=2)k=l(f,v,b),v=k.left,b=k.right,f.sbox[I][A]=v,f.sbox[I][A+1]=b;return!0}var x=a.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var f=this._keyPriorReset=this._key,y=f.words,m=f.sigBytes/4;w(h,y,m)}},encryptBlock:function(f,y){var m=l(h,f[y],f[y+1]);f[y]=m.left,f[y+1]=m.right},decryptBlock:function(f,y){var m=g(h,f[y],f[y+1]);f[y]=m.left,f[y+1]=m.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(x)}(),t.Blowfish})}(xn)),xn.exports}(function(i,e){(function(t,r,n){i.exports=r(z(),wi(),Nf(),Sf(),Et(),Of(),Tt(),b0(),is(),Ff(),k0(),Rf(),Lf(),Uf(),ns(),Wf(),ft(),de(),Hf(),Vf(),zf(),$f(),qf(),Gf(),Yf(),Jf(),Kf(),Qf(),Xf(),Zf(),jf(),em(),tm(),rm(),im())})(H,function(t){return t})})(D0);var nm=D0.exports;const sm=so(nm),{AES:am,enc:ii,SHA256:I0}=sm,om="16charactersiv!";function cm(i,e){const t=um(e),r=ii.Utf8.parse(om);return am.encrypt(i,t,{iv:r}).toString()}function um(i){let e="htr;lmn;rkmnkryemnkrmnbavsdbshtg6437";return e=I0(i+e).toString(ii.Hex).substring(0,32),ii.Utf8.parse(e)}function hm({id:i}){if(i.length<7)return"";const e=i.substring(3,6),t=I0(i+e).toString(ii.Hex);return t.substring(0,Math.min(10,t.length)).replace(/[/.*]/g,"")}function vi(i){return cm(i+$c,zc).replace("/","").replace("*","").replace(".","")}var Sn={exports:{}},Ya=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(Ya){var Ja=new Uint8Array(16);Sn.exports=function(){return Ya(Ja),Ja}}else{var Ka=new Array(16);Sn.exports=function(){for(var e=0,t;e<16;e++)e&3||(t=Math.random()*4294967296),Ka[e]=t>>>((e&3)<<3)&255;return Ka}}var C0=Sn.exports,A0=[];for(var Ur=0;Ur<256;++Ur)A0[Ur]=(Ur+256).toString(16).substr(1);function lm(i,e){var t=e||0,r=A0;return[r[i[t++]],r[i[t++]],r[i[t++]],r[i[t++]],"-",r[i[t++]],r[i[t++]],"-",r[i[t++]],r[i[t++]],"-",r[i[t++]],r[i[t++]],"-",r[i[t++]],r[i[t++]],r[i[t++]],r[i[t++]],r[i[t++]],r[i[t++]]].join("")}var E0=lm,dm=C0,fm=E0,Qa,wn,vn=0,yn=0;function mm(i,e,t){var r=e&&t||0,n=e||[];i=i||{};var s=i.node||Qa,a=i.clockseq!==void 0?i.clockseq:wn;if(s==null||a==null){var c=dm();s==null&&(s=Qa=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),a==null&&(a=wn=(c[6]<<8|c[7])&16383)}var o=i.msecs!==void 0?i.msecs:new Date().getTime(),u=i.nsecs!==void 0?i.nsecs:yn+1,h=o-vn+(u-yn)/1e4;if(h<0&&i.clockseq===void 0&&(a=a+1&16383),(h<0||o>vn)&&i.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");vn=o,yn=u,wn=a,o+=122192928e5;var d=((o&268435455)*1e4+u)%4294967296;n[r++]=d>>>24&255,n[r++]=d>>>16&255,n[r++]=d>>>8&255,n[r++]=d&255;var l=o/4294967296*1e4&268435455;n[r++]=l>>>8&255,n[r++]=l&255,n[r++]=l>>>24&15|16,n[r++]=l>>>16&255,n[r++]=a>>>8|128,n[r++]=a&255;for(var g=0;g<6;++g)n[r+g]=s[g];return e||fm(n)}var pm=mm,gm=C0,xm=E0;function wm(i,e,t){var r=e&&t||0;typeof i=="string"&&(e=i==="binary"?new Array(16):null,i=null),i=i||{};var n=i.random||(i.rng||gm)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e)for(var s=0;s<16;++s)e[r+s]=n[s];return e||xm(n)}var vm=wm,ym=pm,T0=vm,ss=T0;ss.v1=ym;ss.v4=T0;var Dm=ss;const bm=so(Dm);var qe=(i=>(i[i.deposit=0]="deposit",i[i.payment=1]="payment",i))(qe||{});const On={0:"deposit",1:"payment"},Fn={deposit:0,payment:1};class kt{type=1;amount=0;createdAt=new Date(0);id="";hypId="";constructor({type:e=1,amount:t=0,id:r="",hypId:n="",createdAt:s=new Date(0)}){this.type=e,this.amount=parseFloat(t.toFixed(2)),this.id=r,this.hypId=n,this.createdAt=s}static fromJson(e,t){const r=new kt({});return e.amount!=null&&(r.amount=e.amount),r.hypId=e.hypId||"",r.id=t,r.type=Fn[e.type]||1,r.createdAt=e.createdAt?new Date(e.createdAt):new Date(0),r}static fromTransaction(e){const t=new kt({});return t.type=e.type,t.amount=e.amount,t.id=e.id,t.hypId=e.hypId,t.createdAt=e.createdAt,t}toJson(){const e={};return e.amount=this.amount,e.hypId=this.hypId,e.type=On[this.type],e.createdAt=this.createdAt.toISOString(),e}toString(){return JSON.stringify(this.toJson(),null,2)}}class Ht{workMinutes=0;breakMinutes=0;title="";constructor({workMinutes:e=0,breakMinutes:t=0,title:r=""}){this.workMinutes=e,this.breakMinutes=t,this.title=r}get wholeMinutes(){return this.workMinutes+this.breakMinutes}static fromTreatmentTime(e){return new Ht({breakMinutes:e.breakMinutes,workMinutes:e.workMinutes,title:e.title})}static fromJson(e){return new Ht({breakMinutes:e.break||0,workMinutes:e.duration||0,title:e.title||""})}toJson(){const e={};return e.break=this.breakMinutes,e.duration=this.workMinutes,e.title=this.title,e}toString(){return JSON.stringify(this,null,2)}}class Pe{totalMinutes=0;index="";id="";note="";price;amountInAdvance=0;paymentType;isMulti=!1;showPrice=!0;showTime=!0;count=1;name="";colorIndex=-2;maxParticipants=1;maxTicketsForUser=1;tempMaxParticipants;hide=!1;showParticipants=!0;times=new Map;priceChangingNote;constructor({times:e=new Map,id:t="",price:r,count:n=1,name:s="",isMulti:a=!1,maxTicketsForUser:c=1,index:o="",amountInAdvance:u=0,colorIndex:h=-2,hide:d=!1,paymentType:l,note:g="",maxParticipants:w=1,showPrice:x=!0,showParticipants:f=!0,showTime:y=!0}={}){this.times=e,this.id=t,this.price=r,this.count=n,this.name=s,this.isMulti=a,this.maxTicketsForUser=c,this.index=o,this.amountInAdvance=u,this.colorIndex=h,this.hide=d,this.paymentType=l,this.note=g,this.maxParticipants=w,this.showPrice=x,this.showParticipants=f,this.showTime=y,this.totalMinutes=this.totalTotalMinutes}isEqual(e){return!0}get totalTotalMinutes(){let e=0;return this.times.forEach((t,r)=>{e+=t.wholeMinutes}),e}get totalWorkMinutes(){let e=0;return this.times.forEach((t,r)=>{e+=t.workMinutes}),e}get totalMinutesForBooking(){return this.totalMinutes*this.count}get amountInAdvanceForBooking(){return this.amountInAdvance*this.count}get totalPriceForBooking(){return this.price.amount*this.count}get nameForBooking(){return this.count===1?this.name:`${this.name} X${this.count}`}static fromTreatment(e){const t=new Pe({times:new Map,showTime:e.showTime,paymentType:e.paymentType,id:e.id,hide:e.hide,showPrice:e.showPrice,price:e.price,index:e.index,maxTicketsForUser:e.maxTicketsForUser,colorIndex:e.colorIndex,name:e.name,isMulti:e.isMulti,note:e.note,count:e.count,maxParticipants:e.maxParticipants,amountInAdvance:e.amountInAdvance});return t.priceChangingNote=e.priceChangingNote,t.tempMaxParticipants=e.tempMaxParticipants,t.totalMinutes=e.totalMinutes,e.times.forEach((r,n)=>{t.times.set(n,Ht.fromTreatmentTime(r))}),t}static fromTreatmentsMap(e){let t=0;const r=new Pe({price:new Se({amount:"0",currency:wr})});return e.forEach((n,s)=>{for(let a=0;a<n.count;a++)n.times.forEach((c,o)=>{r.times.set(t.toString(),c),t++}),n.price&&(r.price.amount+=n.price.amount,r.price.currency=n.price.currency),r.name===""?r.name=n.name:r.name+=` + ${n.name}`,r.showTime=r.showTime&&n.showTime,r.showPrice=r.showPrice&&n.showPrice,r.paymentType=n.paymentType,r.amountInAdvance+=n.amountInAdvance,r.totalMinutes+=n.totalMinutes}),r}get participants(){return this.tempMaxParticipants!==void 0?this.tempMaxParticipants:this.maxParticipants}priceToString(){return this.price.toString()}minutesToString(){return dr(new S({minutes:this.totalMinutes}))}static fromJson(e,t){const r=new Pe({times:new Map,id:e.id||"",colorIndex:e.colorIndex||-2,maxTicketsForUser:e.maxTicketsForUser||1,index:t,hide:e.hide||!1,name:e.name||"",isMulti:e.isMulti||!1,note:e.note||"",count:e.count||1,price:e.price?Se.fromJson(e.price):void 0,amountInAdvance:e.amountInAdvance!==void 0?typeof e.amountInAdvance=="number"?e.amountInAdvance:parseFloat(e.amountInAdvance):0,maxParticipants:e.maxParticipants||1,paymentType:Fn[e.paymentType],showPrice:e.showPrice||!1,showTime:e.showTime||!1,showParticipants:e.showParticipants||!0});if(r.priceChangingNote=e.priceChangingNote,r.tempMaxParticipants=e.tempMaxParticipants,e.times)for(const n in e.times)r.times.set(n,Ht.fromJson(e.times[n]));return r}toJson(){const e={};return e.times={},this.times.forEach((t,r)=>{e.times[r]=t.toJson()}),e.name=this.name,this.note!==""&&(e.note=this.note),this.id!==""&&(e.id=this.id),this.hide&&(e.hide=this.hide),this.maxTicketsForUser>1&&(e.maxTicketsForUser=this.maxTicketsForUser),this.colorIndex!==-2&&(e.colorIndex=this.colorIndex),this.priceChangingNote!==void 0&&(e.priceChangingNote=this.priceChangingNote),e.price=this.price?this.price.toJson():void 0,this.amountInAdvance!==0&&(e.amountInAdvance=this.amountInAdvance),this.paymentType!=null&&On[this.paymentType]!=null&&(e.paymentType=On[this.paymentType]),this.isMulti&&(e.isMulti=this.isMulti),this.tempMaxParticipants!==void 0&&(e.tempMaxParticipants=this.tempMaxParticipants),this.count!==1&&(e.count=this.count),this.maxParticipants!==1&&(e.maxParticipants=this.maxParticipants),this.showParticipants||(e.showParticipants=this.showParticipants),e.showPrice=this.showPrice,e.showTime=this.showTime,e}static fromOldJson(e,t,r,n){const s=new Pe({});if(e.times)for(const a in e.times)e.times.hasOwnProperty(a)&&s.times.set(a,Ht.fromJson(e.times[a]));return s.id="",s.colorIndex=n,s.index=t,s.name=s.parseNameFromDbField(r),e.price&&(s.price=Se.fromJson(e.price)),e.amountInAdvance!==void 0&&(s.amountInAdvance=typeof e.amountInAdvance=="number"?e.amountInAdvance:parseFloat(e.amountInAdvance)),s.paymentType=Fn[e.paymentType],s.showPrice=e.showPrice||!1,s.showTime=e.showTime||!1,s.totalMinutes=s.totalTotalMinutes,s}parseNameFromDbField(e){return e.replace(Ls,"/").replace(Us,"*")}parseNameToDbField(e){return e.replace("/",Ls).replace("*",Us)}toString(){return JSON.stringify(this,null,2)}}class as{businessId="";businessName="";date;id="";workerId="";shopIcon=new he;constructor({businessId:e="",date:t,id:r="",workerId:n="",businessName:s="",shopIcon:a=new he}={}){this.businessId=e,this.date=t||null,this.id=r,this.workerId=n,this.businessName=s,this.shopIcon=a}static fromJsonStr(e){const t=JSON.parse(e),r=t.date?new Date(t.date):null,n=t.shopIcon?he.fromJsonStr(t.shopIcon):new he,s=new as({businessId:t.businessId,date:r,id:t.id,workerId:t.workerId,businessName:t.businessName});return s.shopIcon=n,s}toJsonStr(){const e={businessId:this.businessId,date:this.date?.toString(),id:this.id,workerId:this.workerId,businessName:this.businessName,shopIcon:this.shopIcon.toJsonStr()};return JSON.stringify(e)}toString(){return this.toJsonStr()}}class os extends as{isRecurrence=!1;totalMinutes=0;constructor({businessId:e,date:t,id:r,workerId:n,businessName:s,totalMinutes:a,isRecurrence:c,shopIcon:o}){super({businessId:e,date:t,id:r,workerId:n,businessName:s,shopIcon:o}),this.totalMinutes=a,this.isRecurrence=c}static fromJsonStr(e){const t=JSON.parse(e),r=t.businessId||"",n=t.businessName||"",s=t.date?new Date(t.date):void 0,a=t.workerId||"",c=t.id||"",o=t.isRecurrence||!1,u=t.totalMinutes||0,h=t.shopIcon?he.fromJsonStr(t.shopIcon):void 0;return new os({businessId:r,date:s,id:c,workerId:a,businessName:n,totalMinutes:u,isRecurrence:o,shopIcon:h})}toJsonStr(){const e={};return e.businessId=this.businessId,e.isRecurrence=this.isRecurrence,e.totalMinutes=this.totalMinutes,e.date=this.date?.toISOString()||null,e.businessName=this.businessName,e.id=this.id,e.workerId=this.workerId,e.shopIcon=this.shopIcon?.toJsonStr()||null,JSON.stringify(e)}toString(){return this.toJsonStr()}}class cs{id="";businessId="";shopIcon=new he;businessName="";dateToNotify=new Date(0);fcms=new Set;minutesToAdd=0;address="";phoneToContact="";isMulti=!1;isRecurrence=!1;totalEventMinutes=0;type="";constructor({businessId:e,id:t,businessName:r,type:n,dateToNotify:s,isMulti:a,minutesToAdd:c,address:o,phoneToContact:u,shopIcon:h,fcms:d,totalEventMinutes:l=0,isRecurrence:g=!1}){this.businessId=e,this.id=t,this.businessName=r,this.type=n,this.dateToNotify=s,this.isMulti=a,this.minutesToAdd=c,this.address=o,this.phoneToContact=u,this.shopIcon=h,this.fcms=d,this.totalEventMinutes=l,this.isRecurrence=g}isEqual(e){return e.businessId===this.businessId&&e.businessName===this.businessName&&JSON.stringify([...e.fcms])===JSON.stringify([...this.fcms])&&e.shopIcon.isEqual(this.shopIcon)&&e.totalEventMinutes===this.totalEventMinutes&&e.isMulti===this.isMulti&&e.minutesToAdd===this.minutesToAdd&&e.isRecurrence===this.isRecurrence&&e.type===this.type}static fromJson(e){const t=he.fromJson(e.SI),r=new Set(e.FS||[]),n=new Date(e.dateToNotify);return new cs({businessId:e.I,id:e.ID,businessName:e.B,type:e.T,dateToNotify:n,isMulti:e.IM,minutesToAdd:e.MTA,address:e.A,phoneToContact:e.P,shopIcon:t,fcms:r,totalEventMinutes:e.TEM,isRecurrence:e.IR})}get dbPath(){return`/${Rc}/${Lc}/1/${this.dateToNotify.getFullYear()}/${this.dateToNotify.getMonth()}/${this.dateToNotify.getDay()}/${this.dateToNotify.getHours()}`}toJson(){const e={};return this.phoneToContact!==""&&(e.P=this.phoneToContact),this.address!==""&&(e.A=this.address),this.type!==""&&(e.T=this.type),this.businessName!==""&&(e.B=this.businessName),this.fcms.size>0&&(e.FS=Array.from(this.fcms)),this.businessId!==""&&(e.I=this.businessId),this.isMulti&&(e.IM=this.isMulti),this.minutesToAdd!==3&&(e.MTA=this.minutesToAdd),this.isRecurrence&&(e.IR=this.isRecurrence),this.totalEventMinutes>0&&(e.TEM=this.totalEventMinutes),e.SI=this.shopIcon.toJson(),e}toString(){return JSON.stringify(this.toJson(),null,2)}}const Xa="~.9.~",km="..",Dn="_";class kr{id="";businessId="";workerName="";date="";workerId="";timeStr="";treatmentId="";treatmentName="";constructor({workerName:e="",date:t="",workerId:r="",timeStr:n="",treatmentId:s="",treatmentName:a="",businessId:c=""}){this.workerName=e,this.date=t,this.workerId=r,this.timeStr=n,this.treatmentId=s,this.treatmentName=a,this.businessId=c}fixEmptyAttributes(){this.workerName=this.workerName===""?"E":this.workerName,this.date=this.date===""?"E":this.date,this.businessId=this.businessId===""?"E":this.businessId,this.workerId=this.workerId===""?"E":this.workerId}static fromJson(e,t){const r=new kr({});return r.id=t,r.workerName=e.workerName??"",r.date=e.date??"",r.timeStr=e.timeStr??"",r.treatmentId=e.treatmentId??"",r.treatmentName=e.treatmentName??"",r.businessId=e.businessId??"",r.workerId=e.workerId??"",r}get isMulti(){return this.timeStr!==""}static fromTopicStr(e){const t=new kr({}),r=e.split(km),n=r[0].split(Dn),s=r[1].split(Dn);return t.businessId=n[0],t.workerId=n[1].replaceAll(Xa,"+"),t.date=n[2],t.workerName=s[1],t}isEqual(e){return JSON.stringify(e.toJson())===JSON.stringify(this.toJson())}toTopicStr(){this.fixEmptyAttributes();const e=this.workerId.replaceAll("+",Xa);return[this.businessId,e,this.date,this.timeStr,this.treatmentId].join(Dn).split("").filter(n=>ru.test(n)).join("")}get dateTime(){const e=yi(this.date),t=this.timeStr===""?new Date(0):_m(this.timeStr);return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes())}toJson(){const e={};return e.businessId=this.businessId,this.workerName!==""&&(e.workerName=this.workerName),this.workerId!==""&&(e.workerId=this.workerId),this.date!==""&&(e.date=this.date),this.timeStr!==""&&(e.timeStr=this.timeStr),this.treatmentName!==""&&(e.treatmentName=this.treatmentName),this.treatmentId!==""&&(e.treatmentId=this.treatmentId),e}toString(){return JSON.stringify(this.toJson())}}class us{id="";date=new Date(0);isMultiBooking=!1;workerId="";signNewMultiBookingUsers=!1;constructor({id:e,date:t,isMultiBooking:r,workerId:n,signNewMultiBookingUsers:s=!1}){this.id=e,this.date=t,this.isMultiBooking=r,this.workerId=n,this.signNewMultiBookingUsers=s}toJson(){const e={};return e.I=this.id,e.D=this.date.toISOString(),e.WI=this.workerId,this.isMultiBooking&&(e.IMB=this.isMultiBooking),this.signNewMultiBookingUsers&&(e.SNMBU=this.signNewMultiBookingUsers),e}static fromJson(e){const t=e.D?new Date(e.D):new Date(0),r=e.I||"",n=e.IMB||!1,s=e.WI||"",a=e.SNMBU||!1;return new us({id:r,date:t,isMultiBooking:n,workerId:s,signNewMultiBookingUsers:a})}toString(){return JSON.stringify(this,null,2)}}class tr{userId="";name="";gender=G.male;phone="";payments={};isExist=!1;fcmTokens;isVerifiedPhone=!1;userDecline=!1;constructor({userId:e="",name:t="",gender:r=G.male,isVerifiedPhone:n=!1,phone:s="",isExist:a=!0,userDecline:c=!1}){this.userId=e,this.name=t,this.gender=r,this.isVerifiedPhone=n,this.phone=s,this.isExist=a,this.userDecline=c}get customerHashPhone(){return vi(this.phone)}get customerPhoneAsCollection(){return this.phone.replaceAll("-","")}get isPaid(){return Object.keys(this.payments).length>0}static fromJson(e,t){const r=new tr({userId:t,name:e.N??"",gender:e.G?Ze[e.G]:G.male,isVerifiedPhone:e.IVP??!1,phone:e.P??"",isExist:e.IE??!0,userDecline:e.UD??!1});return e.PY!=null&&typeof e.PY=="object"&&Object.entries(e.PY).forEach(([n,s])=>{r.payments[n]=s?new Date(s):new Date(0)}),r}toJson(){const e={};return e.N=this.name,this.isVerifiedPhone&&(e.IVP=this.isVerifiedPhone),this.isExist||(e.IE=this.isExist),e.P=this.phone,this.gender!==G.male&&(e.G=G[this.gender]),Object.keys(this.payments).length>0&&(e.PY={},Object.entries(this.payments).forEach(([t,r])=>{e.PY[t]=r.toString()})),this.userDecline&&(e.UD=this.userDecline),e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class wt extends Set{constructor(e,t){super(e),t&&this.sort(t)}sort(e){this.clear(),Array.from(this).sort(e).forEach(t=>this.add(t))}get last(){if(this.size===0)return;const e=Array.from(this);return e[e.length-1]}get isEmpty(){return this.size===0}elementAt(e){if(!(e<0||e>=this.size))return Array.from(this)[e]}intersection(e){const t=new wt;return this.forEach(r=>{e.has(r)&&t.add(r)}),t}}const Im={0:"years",1:"months",2:"weeks",3:"days"},Cm={years:0,months:1,weeks:2,days:3},Am={0:"YEARLY",1:"MONTHLY",2:"WEEKLY",3:"DAILY"};var P0=(i=>(i[i.endless=0]="endless",i[i.date=1]="date",i[i.repeats=2]="repeats",i))(P0||{});const bn=["SU","MO","TU","WE","TH","FR","SA"],kn={0:new S({days:365}),1:new S({days:30}),2:new S({days:7}),3:new S({days:1})};class dt{start;endDate;repeats=10;interval=1;freqRecurrence=3;weekDays=new wt;endOption=2;exceptionDates=new Set;customEndDate;constructor({start:e,endOption:t=2,endDate:r,repeats:n=10,interval:s=1,weekDays:a=new wt,customEndDate:c,freqRecurrence:o=3,exceptionDates:u=new Set}){this.start=e,this.weekDays=a,this.endOption=t,this.endDate=r,this.repeats=n,this.interval=s,this.customEndDate=c,this.freqRecurrence=o,this.exceptionDates=u}static fromJson(e,t){const r=new dt({});return r.start=t,r.endDate=e.ED?new Date(e.ED):void 0,r.repeats=e.R||10,r.interval=e.I||1,r.weekDays=new wt(e.WD||[]),r.exceptionDates=new Set(Object.keys(e.EDA||{}).map(yi)),r.freqRecurrence=Cm[e.FR]||3,r}toJson({saveStartDate:e=!1,saveEnd:t=!0,saveException:r=!0}){const n={};return t&&this.endDate&&this.endOption===1&&(n.ED=Le(this.endDate)),t&&this.endOption===2&&(n.R=this.repeats),this.interval!==1&&(n.I=this.interval),this.weekDays.size>0&&this.freqRecurrence===2&&(n.WD=[...this.weekDays]),r&&this.exceptionDates.size>0&&(n.EDA={},this.exceptionDates.forEach(s=>{n.EDA[Le(s)]=""})),e&&this.start&&(n.SD=this.start.toISOString()),n.FR=Im[this.freqRecurrence],n}static fromRecurrenceEvent(e){return new dt({start:e.start,endDate:e.endDate,repeats:e.repeats,interval:e.interval,freqRecurrence:e.freqRecurrence,weekDays:new wt(e.weekDays),endOption:e.endOption,exceptionDates:new Set(e.exceptionDates)})}isEqual(e){return!this.start||!e.start||this.start.getTime()!==e.start.getTime()||(this.endDate?.getTime()||0)!==(e.endDate?.getTime()||0)?!1:this.repeats===e.repeats&&this.interval===e.interval&&this.freqRecurrence===e.freqRecurrence&&Hs(e.weekDays,this.weekDays)&&Hs(e.exceptionDates,this.exceptionDates)&&this.endOption===e.endOption}get syncfuString(){let e=`FREQ=${Am[this.freqRecurrence]};`;if(this.freqRecurrence===1&&this.start&&(e+=`BYMONTHDAY=${this.start.getDate()};`),this.freqRecurrence===0&&this.start&&(e+=`BYMONTHDAY=${this.start.getDate()};BYMONTH=${this.start.getMonth()+1};`),e+=`INTERVAL=${this.interval};`,this.freqRecurrence===2&&this.weekDays.size>0&&(e+="BYDAY=",this.weekDays.forEach(t=>{t<bn.length&&(e+=bn[t]+",")}),e=e.slice(0,-1)+";"),this.customEndDate&&(this.endOption===0||this.endOfTheEvent&&this.endOfTheEvent>new Date)){const t=new Date(this.customEndDate.getFullYear(),this.customEndDate.getMonth(),this.customEndDate.getDate(),this.start?.getHours()??0,this.start?.getMinutes()??0);e+=`UNTIL=${Be(t,"yyyyMMdd'T'HHmmss'Z'")}`}else switch(this.endOption){case 0:break;case 1:if(this.endDate){const t=new Date(this.endDate.getFullYear(),this.endDate.getMonth(),this.endDate.getDate(),this.start?.getHours()??0,this.start?.getMinutes()??0);e+=`UNTIL=${Be(t,"yyyyMMdd'T'HHmmss'Z'")}`}break;case 2:e+=`COUNT=${this.repeats}`;break}return e}get accurances(){if(!this.start||this.endOption===0)return null;if(this.endOption===2)return this.repeats-this.exceptionDates.size;if(this.endOption===1&&this.endDate){let e=0;if(this.exceptionDates.forEach(t=>{t<=this.endDate&&e++}),this.freqRecurrence===2){let t=0;const r=pt(this.start);this.weekDays.forEach(u=>{this.isAccureInDate({date:ue(r,new S({days:u})),considerException:!1})&&t++});const n=Math.abs(ue(r,new S({days:6})).getTime()-pt(this.endDate).getTime()),s=Math.floor(n/this.rangeBetweenInterval.inMilliseconds),a=pt(this.endDate);let c=0;return De(a).getTime()!==De(r).getTime()&&this.weekDays.forEach(u=>{this.isAccureInDate({date:ue(a,new S({days:u})),considerException:!1})&&c++}),s*this.weekDays.size+c+t-e}else if(this.freqRecurrence===1){const t=to(this.start,this.endDate);return Math.floor(t/this.interval)-e}else{const t=this.start.getTime()-this.endDate.getTime();return Math.floor(Math.abs(t)/this.rangeBetweenInterval.inDays)-e}}return null}get rangeBetweenInterval(){return new S({minutes:kn[this.freqRecurrence].inMinutes*this.interval})}get endOfTheEvent(){const e=this.rangeBetweenInterval;if(this.endOption===1&&this.endDate!==null)return this.endDate??null;if(this.endOption===2)if(this.freqRecurrence===2){let t=0;const r=this.start.getDay()===7?0:this.start.getDay();this.weekDays.forEach(u=>{u>=r&&t++});const n=this.repeats-t,s=Math.ceil(n/this.weekDays.size),a=n%this.weekDays.size,c=new Date(this.start.getTime()+new S({minutes:e.inMinutes*s}).milliseconds),o=pt(c);this.weekDays=new wt(this.weekDays,(u,h)=>u-h);try{return new Date(o.getTime()+new S({days:a-1<0?this.weekDays.last:this.weekDays.elementAt(a-1)}).inMilliseconds)}catch{return null}}else return this.freqRecurrence===1?eo(this.start,(this.repeats-1)*this.interval):new Date(this.start.getTime()+new S({minutes:e.inMinutes*(this.repeats-1)}).inMilliseconds);return null}get explainText(){if(this.start===null)return"";let e="";const t=new S({minutes:kn[this.freqRecurrence].inMinutes*this.interval});switch(this.freqRecurrence){case 0:e+=$("yearTamplate").replaceAll("DURATION",dr(t)).replaceAll("DATE",Be(this.start,"dd/MM"));break;case 1:e+=$("monthTemplate").replaceAll("DURATION",dr(t)).replaceAll("DATE",this.start.getDate().toString());break;case 2:let n="";this.weekDays.forEach(s=>{n+=$(bn[s])+", "}),n=n.substring(0,n.length-2),e+=$("weekTemplate").replaceAll("DURATION",dr(t)).replaceAll("DAYS",n).replaceAll("AMOUNT",$(Object.keys(this.weekDays).length===1?"onDay":"onDays"));break;case 3:e+=$("dayTemplate").replaceAll("DURATION",dr(t));break}const r=this.endOfTheEvent;return r!==null&&(e+=` ${$("until")} ${Le(r)}`),e}isAccureInDate({date:e,considerException:t=!0}){if(this.start===null||De(this.start)>e)return!1;const r=this.endOfTheEvent;if(r!==null&&r<De(e)||t&&this.exceptionDates.has(De(e)))return!1;const n=new S({minutes:kn[this.freqRecurrence].inMinutes*this.interval}),s=new S({milliseconds:e.getTime()-De(this.start).getTime()}),a=this.start.getDay()===7?0:this.start.getDay(),c=e.getDay()===7?0:e.getDay();if(this.freqRecurrence===2){const o=7-a,u=n.inDays-a,h=(s.inDays+n.inDays)%n.inDays;return(h<o||h>=u)&&this.weekDays.has(c)}if(this.freqRecurrence===1){const o=to(this.start,e);return this.start.getDate()===e.getDate()&&o%this.interval===0}return s.inDays%n.inDays===0}addRangeBetween(e){const t=new Date(e.getUTCDate());return this.freqRecurrence===1?eo(t,this.interval):ue(t,new S({minutes:this.rangeBetweenInterval.inMinutes}))}overlapingDatesWith(e){if(this.start===null||e.start===null)return new Set([new Date(0)]);if(this.endOfTheEvent===null&&e.endOfTheEvent===null)return new Set([new Date(0)]);const t=new Set,r=this._getOptimalEventToPassOver(this,e),n=r[0],s=r[1];let a=n.start;for(;De(a)<=De(n.endOfTheEvent);){if(n.freqRecurrence===2){const c=pt(a);n.weekDays.forEach(o=>{const u=ue(c,new S({days:o}));s.isAccureInDate({date:u})&&n.isAccureInDate({date:u})&&t.add(De(u))})}else s.isAccureInDate({date:a})&&n.isAccureInDate({date:a})&&t.add(De(a));a=this.addRangeBetween(a)}return t}get isRelevant(){return this.endOfTheEvent===null||this.endOfTheEvent>new Date}nearestFutureAccurenceDate(e,{needToBeAfterStart:t=!0}={}){if(this.endOfTheEvent!==null&&e>this.endOfTheEvent)return null;if(this.start===null||e<this.start&&t&&this.isAccureInDate({date:this.start}))return this.start??null;const r=new S({milliseconds:e.getTime()-this.start.getTime()}).inDays;if(this.freqRecurrence===2){const c=Math.floor(r/this.rangeBetweenInterval.inDays);let o=ue(this.start,new S({days:c*this.rangeBetweenInterval.inDays})),u=pt(o);for(const h of this.weekDays){const d=new Date(u.getTime()+new S({days:h}).inMilliseconds);if(d>=e&&(this.endOfTheEvent===null||o<=this.endOfTheEvent))return d}o=ue(o,this.rangeBetweenInterval),u=pt(o);for(const h of this.weekDays){const d=ue(u,new S({days:h}));if(d>=e&&(this.endOfTheEvent===null||o<=this.endOfTheEvent))return d}return null}const n=Math.ceil(r/this.rangeBetweenInterval.inDays);let s=ue(this.start,new S({days:n*this.rangeBetweenInterval.inDays}));s<e&&(s=this.addRangeBetween(s));const a=this.endOfTheEvent;for(;!this.isAccureInDate({date:s})&&(a===null||s<a);)s=this.addRangeBetween(s);return a===null||s<=a?s:null}_getOptimalEventToPassOver(e,t){return e.endOfTheEvent===null&&t.endOfTheEvent!==null?[t,e]:e.endOfTheEvent!==null&&t.endOfTheEvent===null?[e,t]:(t.jumps??99999)<(e.jumps??99999)?[t,e]:[e,t]}get jumps(){if(this.start===null||this.endOfTheEvent===null)return null;const t=new S({milliseconds:this.start.getTime()-this.endOfTheEvent.getTime()}).inMinutes/this.rangeBetweenInterval.inMinutes;return Math.ceil(t*Math.max(this.weekDays.size,1))}toString(){return JSON.stringify(this,null,2)}}class Ir{eventName="";from=new Date(0);to=new Date(0);colorIndex=-1;isBreak=!1;eventIndex=0;eventsBelong=1;partOfRecurrence=!1;treatmentName="";transactionCounter=0;wantDelete=!1;onHold=!1;hasInvoice=!1;durationMinutes=0;breakNotificaiton=!1;minutesBreakNotification=60;extraData;note=null;ids=[];recurrenceEvent;timeId;hasDebt=!1;confirmArrival=!1;treatmentId;isMulti=!1;currentParticipants=0;debtCounter=0;onHoldCounter=0;invoiceCoverCounter=0;transactionsPerUser=0;wantDeleteCounter=0;confirmedArrivalAmount=0;recurrenceFatherBookingId;recurrenceBreakFatherDate;blockSchedule=!0;recurrenceBreakRefInfo;breakIconData;breakBusinessName;breakFatherRecurrenceId;breakBusinessId;breakAddedToDeviceCalendar=!1;breakId="";vacationId="";belongTreatments=1;vacationCreatedAt=void 0;isVacation=!1;vacationAddedToDeviceCalendar=!1;vacationEndTemp;isHoliday=!1;holidayReligion;subTreatmentName="";totalBookingMinutes=0;waitingListCounter=1;isWaitingList=!1;waitingListCustomerGender=G.male;customerPhoneWaitingList="";constructor(){}static fromJson({json:e,timeStr:t,dayString:r,monthString:n,workerId:s,businessModel:a,newTimeId:c}){const o=new Ir;o.eventName=e.p??"",o.eventIndex=e.i??0,o.onHold=e.oH??!1,o.eventsBelong=e.EB??1,o.wantDelete=e.wD??!1,o.isVacation=e.IV??!1,o.isVacation&&o.eventName===""&&(o.eventName=$("Vacation")),o.vacationId=c??"",o.breakFatherRecurrenceId=e.BFRI??"",o.vacationAddedToDeviceCalendar=e.VATDC??!1,o.blockSchedule=e.BS??!0,o.transactionCounter=e.TC??0,o.transactionsPerUser=e.TPU??0,o.hasDebt=e.HD??!1,o.debtCounter=e.DC??0,o.treatmentId=e.TID,o.confirmArrival=e.CA??!1,o.confirmedArrivalAmount=e.CAA??0,o.durationMinutes=e.d??0,o.treatmentName=e.TN??"",o.hasInvoice=e.Hi??!1,o.invoiceCoverCounter=e.ICC??0,o.note=e.N,o.recurrenceFatherBookingId=e.RFBI,o.wantDeleteCounter=e.WDC??0,o.onHoldCounter=e.OHC??0,o.isMulti=e.IM??!1,o.currentParticipants=e.CP??0,o.breakNotificaiton=e.BN??!1,o.partOfRecurrence=e.POR??!1,o.minutesBreakNotification=e.MBN??60,o.recurrenceBreakRefInfo=e.RBRI?dt.fromJson(e.RBRI):void 0,o.recurrenceBreakFatherDate=e.RBFD;const u=e.IB??!1,h=new Date(t),d=new Date(`${r}-${n}`),l=new Date(d.getFullYear(),d.getMonth(),d.getDate(),h.getHours(),h.getMinutes());return new Date(l.getTime()+o.durationMinutes*6e4),e.RE&&dt.fromJson(e.RE,l),o.colorIndex=e.c??(o.isVacation?1:0),o.ids=[s],o.isHoliday=!1,o.subTreatmentName="",o.totalBookingMinutes=0,o.waitingListCounter=1,o.isWaitingList=!1,o.waitingListCustomerGender=G.male,o.customerPhoneWaitingList="",u&&(o.breakIconData=a?.design.shopIconData,o.breakBusinessName=a?.shopName,o.breakBusinessId=a?.businessId),e.VE&&(o.vacationEndTemp=yi(e.VE)),o}get endOfBooking(){return new Date(this.from.getTime()+this.totalBookingMinutes*6e4)}toJson(){const e={};return e.p=this.eventName,e.d=this.durationMinutes,e.c=this.colorIndex,this.minutesBreakNotification!==60&&(e.MBN=this.minutesBreakNotification),this.breakNotificaiton&&(e.BN=this.breakNotificaiton),this.onHoldCounter>0&&(e.OHC=this.onHoldCounter),this.confirmArrival&&(e.CA=this.confirmArrival),this.confirmedArrivalAmount>0&&(e.CAA=this.confirmedArrivalAmount),this.blockSchedule||(e.BS=this.blockSchedule),this.treatmentId!==null&&(e.TID=this.treatmentId),this.wantDeleteCounter>0&&(e.WDC=this.wantDeleteCounter),this.hasDebt&&(e.HD=this.hasDebt),this.transactionCounter>0&&(e.TC=this.transactionCounter),this.transactionsPerUser>0&&(e.TPU=this.transactionsPerUser),this.debtCounter>0&&(e.DC=this.debtCounter),this.invoiceCoverCounter>0&&(e.ICC=this.invoiceCoverCounter),this.eventsBelong!==1&&(e.EB=this.eventsBelong),this.isBreak&&(e.IB=this.isBreak),this.breakId!==""&&(e.BI=this.breakId),this.eventIndex!==0&&(e.i=this.eventIndex),this.treatmentName!==""&&(e.TN=this.treatmentName),this.onHold&&(e.oH=this.onHold),this.isMulti&&(e.IM=this.isMulti),this.currentParticipants>0&&(e.CP=this.currentParticipants),this.wantDelete&&(e.wD=this.wantDelete),this.hasInvoice&&(e.Hi=this.hasInvoice),this.recurrenceEvent!=null&&(e.RE=this.recurrenceEvent.toJson({})),this.note!==null&&this.note!==""&&(e.N=this.note),this.partOfRecurrence&&(e.POR=this.partOfRecurrence),this.recurrenceFatherBookingId!=null&&(e.RFBI=this.recurrenceFatherBookingId),this.isVacation&&(e.IV=this.isVacation),this.breakFatherRecurrenceId!=null&&(e.BFRI=this.breakFatherRecurrenceId),this.vacationAddedToDeviceCalendar&&(e.VATDC=this.vacationAddedToDeviceCalendar),this.vacationCreatedAt!=null&&(e.VCA=this.vacationCreatedAt.toString()),this.breakAddedToDeviceCalendar&&(e.BATDC=this.breakAddedToDeviceCalendar),this.timeId!==null&&this.recurrenceEvent===null&&(e.RTI=this.timeId),this.recurrenceBreakFatherDate!==null&&(e.RBFD=this.recurrenceBreakFatherDate),this.recurrenceBreakRefInfo!=null&&(e.RBRI=this.recurrenceBreakRefInfo.toJson({saveStartDate:!1,saveEnd:!0,saveException:!1})),this.subTreatmentName!==""&&(e.STN=this.subTreatmentName),this.totalBookingMinutes!==this.durationMinutes&&(e.TBM=this.totalBookingMinutes),this.belongTreatments>1&&(e.BTR=this.belongTreatments),e}toString(){return JSON.stringify(this,null,2)}}class Qt{createdAt=new Date(0);id="";amount=0;description="";showUser=!1;constructor({createdAt:e,amount:t,id:r,showUser:n,description:s=""}){this.createdAt=e,this.amount=t,this.id=r,this.showUser=n,this.description=s}static fromJson(e,t){return new Qt({createdAt:e.createdAt?new Date(e.createdAt):new Date(0),amount:e.amount!=null?typeof e.amount=="number"?e.amount:parseFloat(e.amount):0,id:t,showUser:e.showUser??!1,description:e.description??""})}static fromDebt(e){return new Qt({createdAt:e.createdAt,amount:e.amount,id:e.id,showUser:e.showUser,description:e.description})}isEqual(e){return e.id===this.id&&e.description===this.description&&e.showUser===this.showUser&&e.createdAt.toString()===this.createdAt.toString()&&this.amount===e.amount}toJson(){const e={};return e.createdAt=this.createdAt.toISOString(),e.amount=this.amount,this.showUser&&(e.showUser=this.showUser),this.description!==""&&(e.description=this.description),e}}class Em{date=new Date(0);workerId="";workerName="";workerPhone="";buisnessId="";businessName="";recurrenceEvent;recurrenceRef;recurrenceFatherDate;recurrenceEventRefInfo;recurrenceNotificationsLastDate;recurrenceChildDate;constructor({workerId:e="",workerName:t="",businessName:r="",buisnessId:n="",workerPhone:s=""}={}){this.workerId=e,this.workerName=t,this.businessName=r,this.buisnessId=n,this.workerPhone=s}}class Xt{invoiceId="";docId="";monthStr="";issuedBy="";amount=0;constructor({monthStr:e,invoiceId:t,docId:r,amount:n,issuedBy:s}){this.monthStr=e,this.invoiceId=t,this.docId=r,this.amount=n,this.issuedBy=s}toJson(){const e={};return e.monthStr=this.monthStr,e.docId=this.docId,e.issuedBy=this.issuedBy,e.amount=this.amount,e}static fromJson(e,t,r){const n=new Xt({});return n.invoiceId=t,n.docId=e.docId??"",n.monthStr=e.monthStr??"",n.issuedBy=e.issuedBy??r,e.amount!=null&&(n.amount=typeof e.amount=="number"?e.amount:parseFloat(e.amount)),n}static fromBookingInvoiceData(e){const t=new Xt({});return t.invoiceId=e.invoiceId,t.docId=e.docId,t.monthStr=e.monthStr,t.issuedBy=e.issuedBy,t.amount=e.amount,t}toString(){return JSON.stringify(this.toJson(),null,2)}}const Tm="simpletor.officialsimplecode.com",Pm="?PaymentId=PAYMENT_ID";class hs{id="";workerId="";createdAt=new Date(0);signNewMultiBookingUsers=!0;constructor({id:e,workerId:t}){this.id=e,this.workerId=t}get link(){return`https://${Tm}/${Pm}`.replace("PAYMENT_ID",this.id)}static fromJson(e){const t=new hs({});return t.id=e.id??"",e.createdAt!=null&&(t.createdAt=new Date(e.createdAt)||new Date(0)),t.workerId=e.workerId??"",t.signNewMultiBookingUsers=e.signNewMultiBookingUsers??!0,t}toJson(){const e={};return this.createdAt.getTime()!==new Date(0).getTime()&&(e.createdAt=this.createdAt.toISOString()),this.signNewMultiBookingUsers||(e.signNewMultiBookingUsers=this.signNewMultiBookingUsers),e.id=this.id,e.workerId=this.workerId,e}toString(){return JSON.stringify(this.toJson(),null,2)}}const{v4:Za}=bm;class ut extends Em{customerName="";customerPhone="";customerId="";orderingOptions=Ie.app;isVerifiedPhone=!1;isUserExist=!0;notificationType=L.none;workerNotificationOption=j.PushOrSMS;workerRemindersTypes=new Map;workerDeleted=!1;clientMail="";showAdressAlert=!1;showPhoneAlert=!1;signOnDeviceCalendar=!1;isMultiRef=!1;cancelDate;lastTimeNotifyOnDebt;adress="";wasWaiting=!1;bookingDate=new Date(0);note="";needCancel=!1;treatments=new Map;userGender=G.anonymous;workerGender=G.anonymous;status=xe.approved;confirmedArrival=!1;bookingId="";userFcms=new Set;clientNote="";shopIcon=new he;remindersTypes=new Map;createdAt=new Date;finishInvoices=!1;invoices=new Map;transactions=new Map;recurrenceTimeId;recurreneFatherDate;debts=new Map;addToClientAt=!1;paymentRequest;userDeleted=!1;fatherMultiBooking;fatherRecurrenceBooking;constructor({workerId:e,workerName:t,businessName:r,buisnessId:n,workerPhone:s}){super({workerId:e,workerName:t,businessName:r,buisnessId:n,workerPhone:s})}static empty(){return new ut({})}static fromBooking(e){const t=new ut({});return t.customerName=e.customerName,t.customerPhone=e.customerPhone,t.customerId=e.customerId,t.workerPhone=e.workerPhone,t.workerGender=e.workerGender,t.userGender=e.userGender,t.businessName=e.businessName,t.buisnessId=e.buisnessId,t.bookingId=e.bookingId,t.workerGender=e.workerGender,t.shopIcon=e.shopIcon,t.recurrenceTimeId=e.recurrenceTimeId,t.note=e.note,t.workerRemindersTypes={...e.workerRemindersTypes},t.signOnDeviceCalendar=e.signOnDeviceCalendar,t.userDeleted=e.userDeleted,t.workerNotificationOption=e.workerNotificationOption,t.paymentRequest=e.paymentRequest,t.remindersTypes={...e.remindersTypes},t.isVerifiedPhone=e.isVerifiedPhone,t.workerDeleted=e.workerDeleted,t.finishInvoices=e.finishInvoices,t.adress=e.adress,t.addToClientAt=e.addToClientAt,t.showAdressAlert=e.showAdressAlert,t.showPhoneAlert=e.showPhoneAlert,t.orderingOptions=e.orderingOptions,t.isUserExist=e.isUserExist,t.isMultiRef=e.isMultiRef,t.needCancel=e.needCancel,t.userGender=e.userGender,t.bookingDate=e.bookingDate,t.recurrenceNotificationsLastDate=e.recurrenceNotificationsLastDate,t.cancelDate=e.cancelDate,t.customerId=e.customerId,t.workerPhone=e.workerPhone,t.lastTimeNotifyOnDebt=e.lastTimeNotifyOnDebt,e.debts.forEach((r,n)=>{t.debts.set(n,Qt.fromDebt(r))}),t.treatments=new Map,e.treatments.forEach((r,n)=>{const s=Pe.fromTreatment(r);s.index=n,t.treatments.set(n,r)}),t.invoices=new Map,e.invoices.forEach((r,n)=>{t.invoices.set(n,Xt.fromBookingInvoiceData(r))}),t.clientNote=e.clientNote,t.status=e.status,t.confirmedArrival=e.confirmedArrival,t.createdAt=e.createdAt,t.clientMail=e.clientMail,t.workerName=e.workerName,t.buisnessId=e.buisnessId,t.notificationType=e.notificationType,t.userFcms=new Set(e.userFcms),t.recurreneFatherDate=e.recurreneFatherDate,t.recurrenceRef=e.recurrenceRef,t.transactions=new Map,e.transactions.forEach((r,n)=>{t.transactions.set(n,kt.fromTransaction(r))}),t}static fromJson(e,t){try{const r=new ut({});if(r.workerGender=Ze[e.workerGender]||G.anonymous,r.customerName=e.customerName||"",r.note=e.note||"",r.bookingId=t,r.signOnDeviceCalendar=e.signOnDeviceCalendar||!1,r.userDeleted=e.userDeleted||!1,r.workerDeleted=e.workerDeleted||!1,r.customerId=e.customerId||e.customerPhone||"",r.workerPhone=e.workerPhone||"",r.customerPhone=e.customerPhone||"",r.recurrenceTimeId=e.recurrenceTimeId,r.workerId=e.workerId||e.workerPhone||"",r.adress=e.adress||"",e.shopIcon!=null&&(r.shopIcon=he.fromJson(e.shopIcon)),r.isVerifiedPhone=e.isVerifiedPhone||!1,r.customerId==r.customerPhone&&r.customerId.length==14&&(r.isVerifiedPhone=!0),r.isMultiRef=e.isMultiRef||!1,r.needCancel=e.needCancel||!1,e.lastTimeNotifyOnDebt!=null&&(r.lastTimeNotifyOnDebt=new Date(e.lastTimeNotifyOnDebt)),r.finishInvoices=e.finishInvoices||!1,e.remindersTypes!=null?Object.entries(e.remindersTypes).forEach(([n,s])=>{vt[n]!=null&&r.remindersTypes.set(vt[n],s)}):r.remindersTypes=new Map([Xe.regular,e.minutesBeforeNotify||60]),e.workerRemindersTypes!=null&&Object.entries(e.workerRemindersTypes).forEach(([n,s])=>{vt[n]!=null&&r.workerRemindersTypes.set(vt[n],s)}),r.clientMail=e.clientMail||"",e.recurrenceNotificationsLastDate!=null&&(r.recurrenceNotificationsLastDate=new Date(e.recurrenceNotificationsLastDate)),r.clientNote=e.clientNote||"",r.recurreneFatherDate=e.recurreneFatherDate,r.recurrenceRef=e.recurrenceRef,e.orderingOptions!=null&&(r.orderingOptions=Io[e.orderingOptions]||Ie.app),e.debts!=null&&Object.entries(e.debts).forEach(([n,s])=>{r.debts.set(n,Qt.fromJson(s,n))}),e.cancelDate!=null&&(r.cancelDate=new Date(e.cancelDate)),r.wasWaiting=e.wasWaiting||!1,r.isUserExist=e.isUserExist||!0,e.invoices!=null&&Object.entries(e.invoices).forEach(([n,s])=>{r.invoices.set(n,Xt.fromJson(s,n,r.workerId))}),e.userGender!=null&&(r.userGender=Ze[e.userGender]||G.anonymous),r.status=bo[e.status.toString()]||xe.approved,r.confirmedArrival=e.confirmedArrival||!1,e.bookingDate!=null&&(r.bookingDate=new Date(e.bookingDate)||new Date(0)),e.treatments!=null){r.treatments=new Map;let n=0;Object.entries(e.treatments).forEach(([s,a])=>{const c=e.treatments[n.toString()];r.treatments.set(n.toString(),Pe.fromJson(c,n.toString())),n+=1})}else if(e.treatment!=null){const n=Pe.fromJson(e.treatment,"0");r.treatments.set("0",n)}return r.showAdressAlert=e.showAdressAlert||!1,r.showPhoneAlert=e.showPhoneAlert||!1,r.workerName=e.workerName||"",r.businessName=e.businessName||"",r.buisnessId=e.buisnessId||"",e.notificationType!=null?r.notificationType=Co[e.notificationType]||L.push:e.withMessage?r.notificationType=L.message:r.notificationType=L.push,e.workerNotificationOption!=null&&(r.workerNotificationOption=di[e.workerNotificationOption]||j.PushOrSMS),e.userFcms!=null?e.userFcms.forEach(n=>{r.userFcms.add(n)}):e.deviceFCM!=null&&e.deviceFCM!=""&&(r.userFcms=new Set([e.deviceFCM])),e.createdAt!=null&&(r.createdAt=new Date(e.createdAt)||new Date(0)),e.RE!=null&&(r.recurrenceEvent=dt.fromJson(e.RE,r.bookingDate)),e.RERI!=null&&(r.recurrenceEventRefInfo=dt.fromJson(e.RERI)),r.transactions=new Map,e.transactions!=null&&Object.entries(e.transactions).forEach(([n,s])=>{r.transactions.set(n,kt.fromJson(s,n))}),e.paymentRequest!=null&&(r.paymentRequest=hs.fromJson(e.paymentRequest)),r}catch(r){return ce.error(`Error loading booking doc ${t}: ${r}`),new ut({})}}get treatmentLength(){return Array.from(this.treatments.values()).reduce((e,t)=>t.count+e,0)}get canSendMessage(){return this.isVerifiedPhone||this.orderingOptions===Ie.byWorker}get treatmentsToStringNotDetailed(){return this.treatmentLength===1?this.treatments.values().next().value.name:this.treatments.size===1?`${this.treatments.values().next().value.name}x${this.treatmentLength}`:`${this.treatments.values().next().value.name}+${this.treatmentLength-1}`}get isPassed(){if(this.recurrenceEvent!=null){if(this.recurrenceChildDate!=null)return ue(this.recurrenceChildDate,new S({minutes:this.totalMinutes+2}))<new Date;const e=this.recurrenceEvent.endOfTheEvent;return e!==null&&e<Mm(new Date)}else return ue(this.bookingDate,new S({minutes:this.totalMinutes+2}))<new Date}get totalMinutes(){let e=0;return this.treatments.forEach((t,r)=>{e+=t.totalMinutesForBooking}),e}get customerHashPhone(){return vi(this.customerPhone)}get bookingWorkTimes(){const e=new Map;let t=this.bookingDate;return Object.values(this.treatments).forEach(r=>{Array.from({length:r.count}).forEach(()=>{Object.values(r.times).forEach(n=>{t=ue(t,new S({minutes:n.breakMinutes})),e.set(Nt(t),n.workMinutes),t=ue(t,new S({minutes:n.workMinutes}))})})}),e}get totalEventsCount(){let e=0;return Object.values(this.treatments).forEach(t=>{e+=t.times.length*t.count}),e}get invoicesCoverPrice(){const e=Object.values(this.invoices).reduce((t,r)=>t+r.amount,0);return this.finishInvoices||this.invoices.size>0&&e>=this.totalPrice.amount}get totalPrice(){let e=new Se({amount:"0",currency:wr});return Object.values(this.treatments).forEach(t=>{e.amount+=t.totalPriceForBooking,e.currency=t.price.currency}),e}get typesOfEvents(){const e=new Map;return this.recurrenceEvent!==null?new Map:(this.needCancel&&e.set(yt.needCancel,1),this.debts.size>0&&e.set(yt.withDebts,1),this.status===xe.waiting&&e.set(yt.onHold,1),e)}get remindersToFutureNotifications(){const e=[];for(const[t,r]of this.remindersTypes){const n=this.reminder(t);n!==null&&e.push(n)}return e}reminder(e){if(this.notificationType!==L.push)return null;const t=this.remindersTypes.get(e);if(t===void 0||t===0)return null;const r=In(this,t);return r<new Date||this.userFcms.size===0?null:new cs({businessName:this.businessName,shopIcon:this.shopIcon,address:this.showAdressAlert?this.adress:"",isMulti:this.isMultiRef,isRecurrence:this.recurrenceEvent!==null||this.recurrenceRef!==null,id:this.reminderId(e),dateToNotify:r,phoneToContact:this.showPhoneAlert?Wm(this.workerPhone):"",businessId:this.buisnessId,type:this.treatmentsToStringNotDetailed,minutesToAdd:this.utcDeltaMinutes()+t,totalEventMinutes:this.totalMinutes,fcms:{...this.userFcms}})}utcDeltaMinutes(){const e=new Date,t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes());return Math.floor((Date.now()-t.getTime())/(60*1e3))}get remindersOnBooking(){const e={};return this.cancelDate!==null?{}:this.userFcms.size===0?{}:this.notificationType===L.message?{}:(this.remindersTypes.forEach((t,r)=>{if(t<=0)return;const n=In(this,t);n>=new Date&&(e[n.toISOString()]??={},e[n.toISOString()]={[this.reminderId(r)]:null})}),e)}get bookingsEventsAsJson(){const e=new Map;let t=this.bookingDate,r=this.totalEventsCount,n=0;return this.invoicesCoverPrice,this.treatments.forEach((s,a)=>{Array.from({length:s.count}).forEach(()=>{s.times.forEach((c,o)=>{t=ue(t,new S({minutes:c.breakMinutes}));const u=this.recurrenceTimeId!=null&&this.recurrenceEvent!=null?`${Nt(t)}_${this.recurrenceTimeId}`:Nt(t),h=new Ir;h.eventIndex=n,h.treatmentId=s.id,h.subTreatmentName=c.title,h.totalBookingMinutes=this.totalMinutes,h.belongTreatments=this.treatmentLength,h.onHold=this.status==="waiting",h.wantDelete=this.needCancel,h.ids=[this.workerId],h.confirmArrival=this.confirmedArrival,h.hasDebt=this.debts.size>0,h.timeId=this.recurrenceEvent!=null?this.recurrenceTimeId:void 0,h.treatmentName=s.name,h.transactionCounter=this.transactions.size,h.eventsBelong=r,h.isBreak=!1,h.partOfRecurrence=this.recurrenceRef!=null,h.hasInvoice,h.recurrenceEvent=this.recurrenceEvent,h.eventName=this.customerId,h.from=t,h.durationMinutes=c.workMinutes,h.colorIndex=s.colorIndex,e.set(u,h.toJson()),t=ue(t,new S({minutes:c.workMinutes})),n+=1})})}),e}get monthStr(){return ni(this.bookingDate)}get toBookingReferencePaymentObj(){return new us({id:this.bookingId,isMultiBooking:!1,date:this.bookingDate,workerId:this.workerId})}async copyDataToOrder({user:e,worker:t,needToHoldOn:r,business:n,noteText:s="",clientNoteText:a=""}){this.customerName=e.name,this.customerId=e.id,this.customerPhone=e.phoneNumber,this.userGender=e.gender,this.isVerifiedPhone=e.isVerifiedPhone,this.clientMail=e.userPublicData.email;const c=e.userPublicData.clientAt;this.addToClientAt=!c.hasOwnProperty(n.businessId)||!c.get(n.businessId)?.has(t.id),this.orderingOptions=Ie.web,this.adress=n.adress,this.clientNote=a,this.wasWaiting=!1,this.note=s,this.shopIcon=n.design.shopIconData,this.userFcms=e.fcmsTokens,Pi(this.bookingDate,new Date).inMinutes<60&&!r&&(this.confirmedArrival=!0),this.workerNotificationOption=t.notifications.notificationOption,this.workerRemindersTypes={...t.notifications.remindersTypes};for(const[o,u]of t.notifications.remindersTypes)this.isPassed||o===Xe.confirmArrival&&this.confirmedArrival||(Ti(this.bookingDate,new S({minutes:u}))<ue(new Date,new S({seconds:1}))&&this.recurrenceEvent===void 0?(this.remindersTypes.set(o,this.remindersTypes.get(o)-this.remindersTypes.get(o)%5),this.remindersTypes.get(o)<10&&this.remindersTypes.delete(o)):this.remindersTypes.set(o,u));this.workerId=t.id,this.workerPhone=t.phone,this.workerName=t.name,this.workerGender=t.gender,this.showPhoneAlert=t.notifications.showPhoneAlert,this.showAdressAlert=t.notifications.showAdressAlert,this.businessName=n.shopName,this.bookingId=this.bookingId===""?Za():this.bookingId,this.buisnessId=n.businessId,r?this.status=xe.waiting:this.status=xe.approved,this.isVerifiedPhone=e.isVerifiedPhone,this.notificationType=Ef({booking:this,worker:t})}updateBookingByBooking({oldBooking:e,worker:t,needToHoldOn:r,business:n,newClientNote:s,keepRecurrence:a=!1}){if(this.customerName=e.customerName,this.customerPhone=e.customerPhone,this.userGender=e.userGender,this.clientMail=e.clientMail,this.customerId=e.customerId,this.note=e.note,e.treatments.size>this.treatments.size){const o=new Map;let u=0;for(const[h,d]of Object.entries(this.treatments))o.set(u.toString(),d),u+=1;this.treatments=o}const c=new Map([...e.treatments.entries()].sort((o,u)=>o[0].localeCompare(u[0])));e.treatments=c,e.customerPhone!=this.customerPhone?this.orderingOptions=Ie.byWorker:this.orderingOptions=e.orderingOptions,s!=null?this.clientNote=s:this.clientNote=e.clientNote,this.workerNotificationOption=t.notifications.notificationOption,this.workerRemindersTypes={...t.notifications.remindersTypes},t.notifications.remindersTypes.forEach((o,u)=>{Ti(this.bookingDate,new S({minutes:o}))<ue(new Date,new S({minutes:1}))&&(this.remindersTypes.set(u,Math.abs(Math.floor(Pi(new Date,this.bookingDate).inMinutes/2))),this.remindersTypes.set(u,this.remindersTypes.get(u)-this.remindersTypes.get(u)%5),this.remindersTypes.get(u)<10&&this.remindersTypes.delete(u))}),this.debts={...e.debts},this.isUserExist=e.isUserExist,this.createdAt=e.createdAt,this.lastTimeNotifyOnDebt=e.lastTimeNotifyOnDebt,this.cancelDate=e.cancelDate,this.wasWaiting=e.wasWaiting,this.signOnDeviceCalendar=e.signOnDeviceCalendar,this.recurrenceEvent=void 0,this.recurrenceNotificationsLastDate=void 0,this.recurrenceTimeId=void 0,a||(this.recurrenceRef=void 0,this.recurreneFatherDate=void 0,this.recurrenceEventRefInfo=void 0),this.userDeleted=e.userDeleted,this.paymentRequest=e.paymentRequest,this.shopIcon=n.design.shopIconData,this.workerName=t.name,this.workerGender=t.gender,this.workerId=t.id,this.workerPhone=t.phone,this.showPhoneAlert=t.notifications.showPhoneAlert,this.showAdressAlert=t.notifications.showAdressAlert,this.adress=n.adress,this.invoices={...e.invoices},this.businessName=n.shopName,this.bookingId=e.bookingId===""||e.recurrenceEvent!=null?Za():e.bookingId,this.buisnessId=e.buisnessId,this.notificationType=e.notificationType,this.bookingDate===e.bookingDate?this.status=e.status:this.status=r?xe.waiting:xe.approved,this.confirmedArrival=!1,r||Pi(this.bookingDate,new Date).inMinutes<60&&(this.confirmedArrival=!0),this.needCancel=e.needCancel,this.finishInvoices=e.finishInvoices,this.transactions=new Map;for(const[o,u]of Object.entries(e.transactions))this.transactions.set(o,kt.fromTransaction(u))}sameTreatments(e){let t=!0;return this.treatmentLength!==e.treatmentLength?!1:(Object.entries(this.treatments).forEach(([r,n])=>{let s=!1;Object.entries(e.treatments).forEach(([a,c])=>{n.id===c.id&&n.count===c.count&&(s=!0)}),t=t&&s}),t)}get businessPayloadData(){return new yr({businessName:this.businessName,businessId:this.buisnessId,shopIcon:this.shopIcon})}get notificationTopic(){return new kr({date:Le(this.bookingDate),businessId:this.buisnessId,workerId:this.workerId,workerName:this.workerName})}get remindersToScheduleMessages(){const e=[];return this.remindersTypes.forEach((t,r)=>{const n=this.reminderMessage(r);n!=null&&e.push(n)}),e}reminderMessage(e){const t=this.remindersTypes.get(e);t==null||t===0||Ti(this.bookingDate,new S({minutes:t}))<new Date}get toBookingNotificationPayload(){return new os({businessId:this.buisnessId,id:this.bookingId,businessName:this.businessName,totalMinutes:this.totalMinutes,isRecurrence:this.recurrenceEvent!=null,date:this.bookingDate,workerId:this.workerId,shopIcon:this.shopIcon})}get transactionsTotalPaymentPrice(){let e=new Se({amount:"0",currency:this.totalPrice.currency});for(const t of Object.values(this.transactions))t.type===qe.payment&&(e.amount+=t.amount);return e}get isDepositTransaction(){return Object.keys(this.transactions).length===1?Object.values(this.transactions)[0].type===qe.deposit:!1}get totalDebtAmount(){let e=0;for(const t of Object.values(this.debts))e+=t.amount;return e}get treatmentsToStringDetailed(){let e="";for(const t of Object.values(this.treatments))e+=t.nameForBooking+" + ";return e.length>0?e.substring(0,e.length-3):""}get priceInAdvance(){const e=new Se({amount:"0",currency:wr});for(const t of Object.values(this.treatments))e.amount+=t.amountInAdvanceForBooking,e.currency=t.price.currency;return e}get messageRemindersOnBooking(){const e=[];if(this.cancelDate!==null||this.userFcms.size===0||this.notificationType===L.push)return e;for(const[t,r]of this.remindersTypes){if(r<=0)continue;In(this,r).toUTCString()>=new Date().toUTCString()&&e.push(this.reminderId(t))}return e}get invoiceItem(){return new InvoiceItem({code:0,information:this.treatmentsToStringDetailed,amountPerItem:this.totalPrice.amount,quantity:1})}get toPaymentRequestUser(){return new tr({name:this.customerName,userId:this.customerId,gender:this.userGender,isVerifiedPhone:this.isVerifiedPhone,isExist:this.isUserExist,phone:this.customerPhone})}get invoiceItems(){const e=new Map;let t=0;for(const r of Object.values(this.treatments)){let n=r.name;r.priceChangingNote!==null&&r.priceChangingNote!==""&&(n+=`: ${r.priceChangingNote}.`),Array.from({length:r.count},s=>{e.set(t,new InvoiceItem({code:t,information:n,amountPerItem:r.price.amount,quantity:1})),t++})}return e}get transactionsTotalDepositPrice(){let e=new Se({amount:"0",currency:this.totalPrice.currency});for(const t of Object.values(this.transactions))t.type===qe.deposit&&(e.amount+=t.amount);return e}get transactionDepositLength(){let e=0;for(const t of Object.values(this.transactions))t.type===qe.deposit&&(e+=1);return e}get transactionPaymentLength(){let e=0;for(const t of Object.values(this.transactions))t.type===qe.payment&&(e+=1);return e}reminderId(e){return this.createdAt<Sc?this.bookingId:`${this.bookingId}__${Vr[e]}`}get bookingsEventsAsEvents(){const e=new Map;let t=this.bookingDate,r=this.totalEventsCount,n=0;return this.invoicesCoverPrice,this.treatments.forEach((s,a)=>{Array.from({length:s.count}).forEach(()=>{s.times.forEach((c,o)=>{t=ue(t,new S({minutes:c.breakMinutes}));const u=this.recurrenceTimeId!=null&&this.recurrenceEvent!=null?`${Nt(t)}_${this.recurrenceTimeId}`:Nt(t),h=new Ir;h.eventIndex=n,h.treatmentId=s.id,h.subTreatmentName=c.title,h.totalBookingMinutes=this.totalMinutes,h.belongTreatments=this.treatmentLength,h.onHold=this.status==="waiting",h.wantDelete=this.needCancel,h.ids=[this.workerId],h.confirmArrival=this.confirmedArrival,h.hasDebt=this.debts.size>0,h.timeId=this.recurrenceEvent!=null?this.recurrenceTimeId:void 0,h.treatmentName=s.name,h.transactionCounter=this.transactions.size,h.eventsBelong=r,h.isBreak=!1,h.partOfRecurrence=this.recurrenceRef!=null,h.hasInvoice,h.recurrenceEvent=this.recurrenceEvent,h.eventName=this.customerId,h.from=t,h.durationMinutes=c.workMinutes,h.colorIndex=s.colorIndex,e.set(u,h),t=ue(t,new S({minutes:c.workMinutes})),n+=1})})}),e}isTheSameAs({booking:e,customerId:t,note:r}){let n=!0;if(this.treatments.size!==e.treatments.size)return!1;for(const[s,a]of this.treatments)if(e.treatments.get(s)?.id!=a.id||e.treatments.get(s)?.count!=a.count){n=!1;break}return n&&e.customerId===t&&e.clientNote===this.clientNote&&e.note===r&&this.bookingDate.getTime()===e.bookingDate.getTime()&&this.workerId===e.workerId}toJson(){const e={};return e.workerGender=Gt[this.workerGender],e.customerName=this.customerName,e.note=this.note,e.customerId=this.customerId,this.wasWaiting&&(e.wasWaiting=this.wasWaiting),this.workerDeleted&&(e.workerDeleted=this.workerDeleted),this.cancelDate!=null&&(e.cancelDate=this.cancelDate.toString()),e.remindersTypes={},this.clientNote!=""&&(e.clientNote=this.clientNote),this.finishInvoices&&(e.finishInvoices=this.finishInvoices),this.debts.size>0&&(e.debts={},this.debts.forEach((t,r)=>{e.debts[r]=t.toJson()})),this.lastTimeNotifyOnDebt!=null&&(e.lastTimeNotifyOnDebt=this.lastTimeNotifyOnDebt.toString()),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.userDeleted&&(e.userDeleted=this.userDeleted),e.bookingId=this.bookingId,e.needCancel=this.needCancel,e.userGender=Gt[this.userGender],e.businessName=this.businessName,this.signOnDeviceCalendar&&(e.signOnDeviceCalendar=this.signOnDeviceCalendar),this.recurrenceTimeId!=null&&(e.recurrenceTimeId=this.recurrenceTimeId),e.treatments={},this.recurrenceRef!=null&&(e.recurrenceRef=this.recurrenceRef),this.recurreneFatherDate!=null&&(e.recurreneFatherDate=this.recurreneFatherDate),this.treatments.forEach((t,r)=>{e.treatments[r.toString()]=t.toJson()}),e.invoices={},this.invoices.forEach((t,r)=>{e.invoices[r]=t.toJson()}),this.isMultiRef&&(e.isMultiRef=this.isMultiRef),this.isUserExist||(e.isUserExist=this.isUserExist),this.orderingOptions!=Ie.app&&(e.orderingOptions=ko[this.orderingOptions]),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.adress!=""&&(e.adress=this.adress),this.clientMail!=""&&(e.clientMail=this.clientMail),e.customerPhone=this.customerPhone,e.status=Do[this.status],e.confirmedArrival=this.confirmedArrival,e.bookingDate=this.bookingDate.toISOString(),e.workerId=this.workerId.toString(),e.workerName=this.workerName,e.buisnessId=this.buisnessId,e.shopIcon=this.shopIcon.toJson(),this.recurrenceNotificationsLastDate!=null&&(e.recurrenceNotificationsLastDate=this.recurrenceNotificationsLastDate.toString()),e.notificationType=eu[this.notificationType],e.workerNotificationOption=tu[this.workerNotificationOption],e.userFcms=Array.from(this.userFcms),e.createdAt=this.createdAt.toISOString(),e.transactions={},this.transactions.forEach((t,r)=>{e.transactions[r]=t.toJson()}),this.paymentRequest!=null&&(e.paymentRequest=this.paymentRequest.toJson()),e}}class Rn{static _singleton=new Rn;constructor(){}static GI(){return Rn._singleton}errorCode=100;error=U.unknown;details="";addError({code:e,error:t,details:r}){this.error=t!==void 0?t:this.error,this.errorCode=e!==void 0?e:this.errorCode,this.details=r!==void 0?r:this.details}}function Nt(i){return Be(i,"HH:mm")}function Bm(i){return Be(i,"dd")}function ni(i){return Be(i,"MM-yyyy")}function Le(i){return Be(i,"dd-MM-yyyy")}function _m(i){return new Date(`1970-01-01T${i}`)}function yi(i){return new Date(i)}function B0(i){return new Date(`01-${i}`)}function ja(i,e){return i===null&&e===null?null:i===null?e:e===null||i<e?i:e}function _0(i){return new Date(i.getFullYear(),i.getMonth(),1)}function De(i){return new Date(i.getFullYear(),i.getMonth(),i.getDate())}function eo(i,e){return new Date(i.getFullYear(),i.getMonth()+e,i.getDate(),i.getHours(),i.getMinutes())}function pt(i){const e=i.getDay(),t=i.getDate()-e+(e===0?-6:1);return new Date(i.setDate(t))}function Mm(i){return rl(Be(i,"dd-MM-yyyy"),"dd-MM-yyyy",new Date)}function to(i,e){let t=i.getFullYear()-e.getFullYear(),r=i.getMonth()-e.getMonth();return r<0&&(t-=1,r+=12),Math.abs(t*12+r)}function Nm(i,e){return i===null&&e===null?null:i===null?e:e===null?i:e>i?e:i}function In(i,e){return new Date(i.bookingDate.getTime()-e*6e4)}class ls{customerName="";customerPhone="";isVerifiedPhone=!1;notificationType=L.none;workerNotificationOption=j.PushOrSMS;workerRemindersTypes=new Map;customerId="";orderingOptions=Ie.app;remindersTypes=new Map;isUserExist=!0;signOnDeviceCalendar=!1;lastTimeNotifyOnDebt=null;clientMail="";finishInvoices=!1;showAdressAlert=!1;userBookingId="";showPhoneAlert=!1;cancelDate=null;wasWaiting=!1;createdAt=new Date(0);needCancel=!1;userGender=G.anonymous;status=xe.approved;confirmedArrival=!1;userFcms=new Set;clientNote="";invoices=new Map;transactions=new Map;debts=new Map;addToClientAt=!1;userDeleted=!1;constructor(){}copyDataToOrder(e){const{worker:t,needToHoldOn:r,workerAction:n,bookingDate:s,addToCalendar:a,noteText:c=""}=e;this.clientNote=c,r?this.status=xe.waiting:this.status=xe.approved,this.showAdressAlert=t.notifications.showAdressAlert,this.showPhoneAlert=t.notifications.showPhoneAlert,!n&&!r&&s.getTime()-Date.now()<60*60*1e3&&(this.confirmedArrival=!0),this.signOnDeviceCalendar=a,this.workerNotificationOption=t.notifications.notificationOption,this.workerRemindersTypes=new Map(t.notifications.remindersTypes),t.notifications.remindersTypes.forEach((u,h)=>{s.getTime()<Date.now()||h===Xe.confirmArrival&&this.confirmedArrival||(s.getTime()-u*60*1e3<Date.now()+1e3?(this.remindersTypes.set(h,Math.abs(Math.floor((Date.now()-s.getTime())/1e3/60/2))-Math.abs(Math.floor((Date.now()-s.getTime())/1e3/60/2))%5),this.remindersTypes.get(h)<10&&this.remindersTypes.delete(h)):this.remindersTypes.set(h,u))}),this.orderingOptions=Ie.web,this.isUserExist=!0,this.userFcms=new Set(Oe.GI().user.userPublicData.fcmsTokens),this.isVerifiedPhone=Oe.GI().user.isVerifiedPhone;const o=Oe.GI().user.userPublicData.clientAt;this.addToClientAt=!o.has(Ae.GI().business.businessId)||!o.get(Ae.GI().business.businessId).has(t.id),this.createdAt.getTime()===new Date(0).getTime()&&(this.createdAt=new Date),this.userBookingId,this.notificationType=Tf(this,t)}get toCustomerData(){return new It({name:this.customerName,phoneNumber:this.customerPhone,isVerifiedPhone:this.isVerifiedPhone,email:this.clientMail,customerUuid:this.customerId,gender:this.userGender})}get isDepositTransaction(){let e=!1;return this.transactions.forEach((t,r)=>{e=t.type===qe.deposit}),e}get transactionsTotalPaymentAmount(){let e=0;return this.transactions.forEach((t,r)=>{t.type===qe.payment&&(e+=t.amount)}),e}get canSendMessage(){return this.isVerifiedPhone||this.orderingOptions===Ie.byWorker}get totalDebtAmount(){let e=0;return this.debts.forEach((t,r)=>{e+=t.amount}),e}get invoicePriceAmount(){return Array.from(this.invoices.values()).reduce((e,t)=>e+t.amount,0)}invoicesCoverPrice(e){const{totalAmount:t}=e;return this.finishInvoices||this.invoices.size>0&&Array.from(this.invoices.values()).reduce((r,n)=>r+n.amount,0)>=t}get transactionsTotalDepositAmount(){let e=0;return this.transactions.forEach((t,r)=>{t.type===qe.deposit&&(e+=t.amount)}),e}get customerHashPhone(){return vi(this.customerPhone)}get customerPhoneAsCollection(){return this.customerPhone.replace(/-/g,"")}reminderId(e){return this.userBookingId+"__"+Vr[e]}get toPaymentRequestUser(){return new tr({name:this.customerName,userId:this.customerId,gender:this.userGender,isExist:this.isUserExist,isVerifiedPhone:this.isVerifiedPhone,phone:this.customerPhone})}get typesOfEvents(){const e=new Map;return this.needCancel&&e.set(yt.needCancel,1),this.debts.size>0&&e.set(yt.withDebts,1),this.status===xe.waiting&&e.set(yt.onHold,1),e}static fromJson(e,t,r){const n=new ls;return n.customerName=e.customerName||"",n.customerId=e.customerId||"",n.customerPhone=e.customerPhone||n.customerId,n.needCancel=e.needCancel||!1,n.remindersTypes=e.remindersTypes?new Map(Object.entries(e.remindersTypes).map(([s,a])=>[vt[s],a])):new Map([[Xe.regular,e.minutesBeforeNotify||60]]),n.workerRemindersTypes=e.workerRemindersTypes?new Map(Object.entries(e.workerRemindersTypes).map(([s,a])=>[vt[s],a])):new Map,n.signOnDeviceCalendar=e.signOnDeviceCalendar||!1,n.userDeleted=e.userDeleted||!1,n.isVerifiedPhone=e.isVerifiedPhone||!1,n.clientMail=e.clientMail||"",n.clientNote=e.clientNote||"",n.userBookingId=t,n.orderingOptions=Io[e.orderingOptions]||Ie.app,n.debts=e.debts?new Map(Object.entries(e.debts).map(([s,a])=>[s,Qt.fromJson(a,s)])):new Map,n.finishInvoices=e.finishInvoices||!1,n.cancelDate=e.cancelDate?new Date(e.cancelDate):null,n.wasWaiting=e.wasWaiting||!1,n.isUserExist=e.isUserExist||!0,n.lastTimeNotifyOnDebt=e.lastTimeNotifyOnDebt?new Date(e.lastTimeNotifyOnDebt):null,n.invoices=e.invoices?new Map(Object.entries(e.invoices).map(([s,a])=>[s,Xt.fromJson(a,s,r)])):new Map,n.userGender=Ze[e.userGender]||G.anonymous,n.status=bo[e.status.toString()]||xe.approved,n.confirmedArrival=e.confirmedArrival||!1,n.showAdressAlert=e.showAdressAlert||!1,n.showPhoneAlert=e.showPhoneAlert||!1,n.notificationType=Co[e.notificationType]||L.none,n.workerNotificationOption=di[e.workerNotificationOption]||j.PushOrSMS,n.userFcms=e.userFcms?new Set(e.userFcms):e.deviceFCM&&e.deviceFCM!==""?new Set([e.deviceFCM]):new Set,n.createdAt=e.createdAt?new Date(e.createdAt):new Date(0),n.transactions=e.transactions?new Map(Object.entries(e.transactions).map(([s,a])=>[s,kt.fromJson(a,s)])):new Map,n}toJson(){const e={};return e.customerName=this.customerName,e.customerId=this.customerId,this.wasWaiting&&(e.wasWaiting=this.wasWaiting),this.cancelDate&&(e.cancelDate=this.cancelDate.toISOString()),e.remindersTypes={},this.remindersTypes.forEach((t,r)=>{e.remindersTypes[Vr[r]]=t}),e.workerRemindersTypes={},this.workerRemindersTypes.forEach((t,r)=>{e.workerRemindersTypes[Vr[r]]=t}),this.userDeleted&&(e.userDeleted=this.userDeleted),this.signOnDeviceCalendar&&(e.signOnDeviceCalendar=this.signOnDeviceCalendar),this.clientNote!==""&&(e.clientNote=this.clientNote),this.needCancel&&(e.needCancel=this.needCancel),this.finishInvoices&&(e.finishInvoices=this.finishInvoices),e.userGender=Gt[this.userGender],this.invoices.size>0&&(e.invoices={},this.invoices.forEach((t,r)=>{e.invoices[r]=t.toJson()})),this.debts.size>0&&(e.debts={},this.debts.forEach((t,r)=>{e.debts[r]=t.toJson()})),this.lastTimeNotifyOnDebt&&(e.lastTimeNotifyOnDebt=this.lastTimeNotifyOnDebt.toISOString()),this.isUserExist||(e.isUserExist=this.isUserExist),this.orderingOptions!==Ie.app&&(e.orderingOptions=ko[this.orderingOptions]),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.clientMail!==""&&(e.clientMail=this.clientMail),e.customerPhone=this.customerPhone,this.status!==xe.approved&&(e.status=Do[this.status]),this.confirmedArrival&&(e.confirmedArrival=this.confirmedArrival),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.userFcms.size>0&&(e.userFcms=Array.from(this.userFcms)),e.createdAt=this.createdAt.toISOString(),this.transactions.size>0&&(e.transactions={},this.transactions.forEach((t,r)=>{e.transactions[r]=t.toJson()})),e}toString(){return JSON.stringify(this,null,"  ")}}class Vt{freeFromPayments;hashNumber;blocked;constructor({freeFromPayments:e=!1,hashNumber:t="",blocked:r=!1}={}){this.freeFromPayments=e,this.hashNumber=t,this.blocked=r}static fromJson(e,t){return new Vt({freeFromPayments:e.freeFromPayments,hashNumber:t})}static fromMinimalJson(e,t){return new Vt({blocked:e.B??!1,freeFromPayments:e.FP,hashNumber:t})}static fromCustomerData(e){return new Vt({blocked:e.blocked,freeFromPayments:e.freeFromPayments,hashNumber:e.hashNumber})}toJson(){const e={};return e.freeFromPayments=this.freeFromPayments,e.blocked=this.blocked,e}toMinimalJson(){const e={};return e.FP=this.freeFromPayments,e.B=this.blocked,e}toString(){return JSON.stringify(this.toJson(),null,2)}}const Sm=3;class It{name="";workerNaming="";phoneNumber="";freeFromPayments=!1;isExapmle=!1;id="";customerUuid="";blocked=!1;isVerifiedPhone=!1;email="";addedManually=!1;gender=G.male;amoutOfBookings=0;firstBookingsDate;userFirstBookingsDate;lastBookingsDate;belongings=new Set;isDeleted=!1;constructor({name:e="",amoutOfBookings:t=0,gender:r=G.male,email:n="",id:s="",freeFromPayments:a=!1,addedManually:c=!1,customerUuid:o="",isVerifiedPhone:u=!1,workerNaming:h="",blocked:d=!1,phoneNumber:l="",firstBookingsDate:g,userFirstBookingsDate:w,lastBookingsDate:x}){this.name=e,this.amoutOfBookings=t,this.gender=r,this.email=n,this.id=s,this.freeFromPayments=a,this.addedManually=c,this.customerUuid=o,this.isVerifiedPhone=u,this.workerNaming=h,this.blocked=d,this.phoneNumber=l,this.firstBookingsDate=g,this.userFirstBookingsDate=w,this.lastBookingsDate=x}static fromJson(e,t){const r=new It({});return r.name=e.name??"",e.gender!=null&&(r.gender=r.getGenderFromStr(e.gender)),r.isVerifiedPhone=e.isVerifiedPhone??!1,r.freeFromPayments=e.freeFromPayments??!1,r.customerUuid=t,r.phoneNumber=e.phoneNumber??(t.length<20&&t.includes("-")?t:""),e.firstBookingsDate!=""&&e.firstBookingsDate!=null&&(r.firstBookingsDate=new Date(e.firstBookingsDate)),e.userFirstBookingsDate!=""&&e.userFirstBookingsDate!=null&&(r.userFirstBookingsDate=new Date(e.userFirstBookingsDate),(r.firstBookingsDate==null||r.userFirstBookingsDate<r.firstBookingsDate)&&(r.firstBookingsDate=r.userFirstBookingsDate)),e.lastBookingsDate!=null&&(r.lastBookingsDate=new Date(e.lastBookingsDate)),r.workerNaming=e.workerNaming??"",r.amoutOfBookings=e.amoutOfBookings??0,r.blocked=e.blocked??!1,r.email=e.email??"",r.id=e.id??"",r.addedManually=e.AM??!1,r}fromCustomerData(e){return this.name=e.name,this.gender=e.gender,this.isVerifiedPhone=e.isVerifiedPhone,this.phoneNumber=e.phoneNumber,this.belongings=e.belongings,this.email=e.email,this.isDeleted=e.isDeleted,this.blocked=e.blocked,this.id=e.id,this.addedManually=e.addedManually,this.freeFromPayments=e.freeFromPayments,this.customerUuid=e.customerUuid,this.workerNaming=e.workerNaming,this.firstBookingsDate=e.firstBookingsDate,this.lastBookingsDate=e.lastBookingsDate,this.amoutOfBookings=e.amoutOfBookings,this.userFirstBookingsDate=e.userFirstBookingsDate,this}get nameForWorker(){return this.workerNaming==""?this.name:this.workerNaming}get getFirstDate(){return this.firstBookingsDate==null||this.userFirstBookingsDate!=null&&this.userFirstBookingsDate<this.firstBookingsDate?this.userFirstBookingsDate:this.firstBookingsDate}get customerHashPhone(){return vi(this.phoneNumber)}get customerPhoneAsCollection(){return this.phoneNumber.replaceAll("-","")}isTheSameAs(e,{withId:t=!1}={}){const r=this.toJson();t&&(r.id=e.customerUuid);const n=e.toJson();return t&&(n.id=this.customerUuid),JSON.stringify(n)===JSON.stringify(r)}getType({bookingInMonthForRegularClient:e,worker:t}){return t.id===this.customerUuid?5:this.isDeleted?7:this.amoutOfBookings<=Sm?2:this.amountOfBookingsInMonth()<e?1:0}getGenderFromStr(e){return e==null||e=="A"?G.anonymous:e=="F"?G.female:G.male}getStrFromGender(e){return{[G.anonymous]:"A",[G.male]:"M",[G.female]:"F"}[e]||"A"}get toMultiBookingUser(){const e=new ls;return e.customerName=this.name!=""?this.name:this.workerNaming,e.customerPhone=this.phoneNumber,e.customerId=this.customerUuid,e.userGender=this.gender,e}get toPaymentRequestUser(){return new tr({userId:this.customerUuid,name:this.nameForWorker,gender:this.gender,isExist:!this.addedManually,isVerifiedPhone:this.isVerifiedPhone,phone:this.phoneNumber})}isMissing(e){return this.lastBookingsDate==null?!1:(new Date().getTime()-this.lastBookingsDate.getTime())/(1e3*3600*24)>e}amountOfBookingsInMonth(){if(this.firstBookingsDate==null)return-1;if(this.lastBookingsDate==null)return 0;const e=this.lastBookingsDate>new Date?new Date:this.lastBookingsDate,t=Math.max((e.getTime()-this.firstBookingsDate.getTime())/(1e3*3600*24),1);return this.amoutOfBookings/t*30}toJson(){const e={};return this.name!==""&&(e.name=this.name),this.gender!==G.male&&(e.gender=this.getStrFromGender(this.gender)),this.phoneNumber!==this.id&&(e.phoneNumber=this.phoneNumber),this.firstBookingsDate!=null&&(e.firstBookingsDate=this.firstBookingsDate.toISOString()),this.userFirstBookingsDate!=null&&(e.userFirstBookingsDate=this.userFirstBookingsDate.toISOString()),this.lastBookingsDate!=null&&(e.lastBookingsDate=this.lastBookingsDate.toISOString()),this.amoutOfBookings!==0&&(e.amoutOfBookings=this.amoutOfBookings),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.freeFromPayments=this.freeFromPayments,this.email!==""&&(e.email=this.email),e.blocked=this.blocked,this.id!==""&&(e.id=this.id),this.addedManually&&(e.AM=this.addedManually),this.workerNaming!==""&&(e.workerNaming=this.workerNaming),e}toMinimalJson(){const e={};return e.N=this.name!==""?this.name:this.workerNaming,e.G=this.getStrFromGender(this.gender),e.P=this.phoneNumber,this.phoneNumber!==this.customerUuid&&(e.CU=this.customerUuid),this.email!==""&&(e.E=this.email),this.id!==""&&(e.ID=this.id),e}merge(e){return!e.addedManually&&this.addedManually&&(this.email=e.email!==""?e.email:this.email,this.name=e.name!==""?e.name:this.name,this.addedManually=!1,this.customerUuid=e.customerUuid),this.workerNaming===""&&(this.workerNaming=e.workerNaming),this.isVerifiedPhone=e.isVerifiedPhone||this.isVerifiedPhone,this.gender=this.gender,this.blocked=e.blocked||this.blocked,this.lastBookingsDate=Nm(e.lastBookingsDate,this.lastBookingsDate),this.firstBookingsDate=ja(e.firstBookingsDate,this.firstBookingsDate),this.userFirstBookingsDate=ja(e.userFirstBookingsDate,this.userFirstBookingsDate),this.amoutOfBookings+=e.amoutOfBookings,this}static fromMinimalJson(e){const t=new It({});return t.workerNaming=e.N??"",t.name=e.N??"",e.G!=null&&(t.gender=t.getGenderFromStr(e.gender)),t.addedManually=e.AM??!1,t.phoneNumber=e.P??"",t.customerUuid=e.CU??e.P??"",t.email=e.E??"",t.id=e.ID??"",t}get publicCustomer(){return new Vt({freeFromPayments:this.freeFromPayments,blocked:this.blocked,hashNumber:hm({id:this.customerUuid})})}belongingsNames(e){return Array.from(this.belongings).map(t=>e.get(t)?.name??"").join(", ")}get forUpdate(){const e=new It({});return e.name=this.name,e.gender=this.gender,e.isVerifiedPhone=this.isVerifiedPhone,e.phoneNumber=this.phoneNumber,e.belongings=this.belongings,e.email=this.email,e.isDeleted=this.isDeleted,e.blocked=this.blocked,e.id=this.id,e.addedManually=this.addedManually,e.freeFromPayments=this.freeFromPayments,e.customerUuid=this.customerUuid,e.workerNaming=this.workerNaming,e.firstBookingsDate=null,e.userFirstBookingsDate=null,e.amoutOfBookings=0,e.lastBookingsDate=null,e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class Ue{token;joinDate;id;activeNotifications;constructor({token:e="",joinDate:t,id:r="",activeNotifications:n=!0}){this.token=e,this.joinDate=t,this.id=r,this.activeNotifications=n}static fromJson(e,t){const r=new Ue({joinDate:new Date(0)});return r.id=t,r.activeNotifications=e.activeNotifications??!0,r.token=e.token??"",r}toJson(){const e={};return this.activeNotifications||(e.activeNotifications=this.activeNotifications),e.token=this.token,e.joinDate=Le(this.joinDate),e}static fromDevice(e){return new Ue({joinDate:e.joinDate,id:e.id,activeNotifications:e.activeNotifications,token:e.token})}}const Om={1:"PL",2:"MasterCard",3:"Visa",4:"Maestro",5:"Isracard"},Fm={PL:"1",MasterCard:"2",Visa:"3",Maestro:"4",Isracard:"5"},Rm={1:"Isracard",2:"Visa Cal",3:"Diners",4:"Amex",6:"Leumi Card"},Lm={Isracard:"1","Visa Cal":"2",Diners:"3",Amex:"4","Leumi Card":"6"};class gr{brand="";token="";validityMonth="";validityYear="";name="";bankName="";l4Digits="";userId="";attemptsLeft=Hr;cardId="";businessId="";constructor({brand:e="",token:t="",validityMonth:r="",validityYear:n="",name:s="",userId:a="",bankName:c="",l4Digits:o="",cardId:u="",businessId:h="",attemptsLeft:d=Hr}={}){this.brand=e,this.token=t,this.validityMonth=r,this.validityYear=n,this.name=s,this.userId=a,this.bankName=c,this.l4Digits=o,this.cardId=u,this.businessId=h,this.attemptsLeft=d}static fromJson(e,t,r){const n=new gr;return n.cardId=t,n.brand=Om[e.brand]||"Card",n.token=e.token||"",n.userId=e.userId||"",n.attemptsLeft=e.attemptsLeft||Hr,n.validityMonth=e.validityMonth||"",n.validityYear=e.validityYear||"",n.businessId=r,n.name=e.name||"",n.bankName=e.bankName||"",n.bankName=Rm[e.bankName]||"Bank",n.l4Digits=e.l4Digits||"",n}fromPaymentCard(e){this.brand=e.brand,this.token=e.token,this.userId=e.userId,this.businessId=e.businessId,this.cardId=e.cardId,this.attemptsLeft=e.attemptsLeft,this.validityMonth=e.validityMonth,this.validityYear=e.validityYear,this.name=e.name,this.bankName=e.bankName,this.l4Digits=e.l4Digits}toJson(){const e={};return e.brand=Fm[this.brand]||"",e.token=this.token,e.userId=this.userId,e.attemptsLeft=this.attemptsLeft,e.validityMonth=this.validityMonth,e.validityYear=this.validityYear,e.name=this.name,e.bankName=this.bankName,e.bankName=Lm[this.bankName]||"",e.l4Digits=this.l4Digits,e}decryptCard(e){return new gr({cardId:this.cardId,brand:this.brand,token:decryptText({encryption:this.token,password:e}),validityMonth:decryptText({encryption:this.validityMonth,password:e}),validityYear:decryptText({encryption:this.validityYear,password:e}),name:this.name,userId:this.userId,bankName:this.bankName,businessId:this.businessId,l4Digits:this.l4Digits})}encryptCard(e){return new gr({cardId:this.cardId,brand:this.brand,token:encryptText({text:this.token,password:e}),validityMonth:encryptText({text:this.validityMonth,password:e}),validityYear:encryptText({text:this.validityYear,password:e}),name:this.name,userId:this.userId,bankName:this.bankName,businessId:this.businessId,l4Digits:this.l4Digits})}isTheSameAs(e){return this.bankName===e.bankName&&this.brand===e.brand&&this.name===e.name&&this.l4Digits===e.l4Digits&&this.userId===e.userId&&this.validityMonth===e.validityMonth&&this.validityYear===e.validityYear}toString(){return JSON.stringify(this,null,"  ")}}class Um{futureBookings={};passedBookings={};recurrence;setMonth(e,t){const r=B0(t),n=_0(new Date);r.getTime()===n.getTime()?(this.passedBookings[t]={},this.futureBookings[t]={}):r.getTime()>n.getTime()?this.futureBookings[t]={}:r.getTime()<n.getTime()&&(this.passedBookings[t]={}),Object.entries(e).forEach(([s,a])=>{const c=ut.fromJson(a,s);c.cancelDate==null&&(c.isPassed?this.passedBookings[t][s]=c:this.futureBookings[t][s]=c)})}setRecurrence(e){this.recurrence={},Object.entries(e).forEach(([t,r])=>{const n=ut.fromJson(r,t);n.cancelDate===null&&(this.recurrence[t]=n)})}get all(){const e={};return Object.values(this.futureBookings).forEach(t=>{Object.entries(t).forEach(([r,n])=>{e[n.bookingId]=n})}),Object.values(this.passedBookings).forEach(t=>{Object.entries(t).forEach(([r,n])=>{e[n.bookingId]=n})}),this.recurrence!==void 0&&Object.entries(this.recurrence).forEach(([t,r])=>{e[t]=r}),e}addBooking(e){if(e.recurrenceEvent!==null)this.recurrence??={},this.recurrence[e.bookingId]=e;else{const t=ni(e.bookingDate);e.isPassed?(this.passedBookings[t]??={},this.passedBookings[t][e.bookingId]=e):(this.futureBookings[t]??={},this.futureBookings[t][e.bookingId]=e)}}deleteBooking(e){if(e.recurrenceEvent!==null)delete this.recurrence?.[e.bookingId];else{const t=ni(e.bookingDate);delete this.passedBookings[t]?.[e.bookingId],delete this.futureBookings[t]?.[e.bookingId]}}lastBookingForBusiness({businessId:e,workerId:t,includePast:r=!1,initDate:n,exclude:s}){let a=n;return Object.entries(this.futureBookings).forEach(([c,o])=>{Object.entries(o).forEach(([u,h])=>{e!==h.buisnessId||t!==h.workerId||s!=null&&s.getTime()===h.bookingDate.getTime()||(a===void 0||h.bookingDate.getTime()>a.getTime())&&(a=h.bookingDate)})}),a}firstBookingForBusiness({businessId:e,workerId:t,includePast:r,initDate:n,exclude:s}){let a=n;for(const[c,o]of Object.entries(this.futureBookings))for(const[u,h]of Object.entries(o))e!==h.buisnessId||t!==h.workerId||s!=null&&s.getTime()===h.bookingDate.getTime()||(a===void 0||h.bookingDate.getTime()<a.getTime())&&(a=h.bookingDate);if(a===void 0&&r)for(const[c,o]of Object.entries(this.passedBookings))for(const[u,h]of Object.entries(o))e!==h.buisnessId||t!==h.workerId||s!==void 0&&s.getTime()===h.bookingDate.getTime()||(a===void 0||h.bookingDate.getTime()<a.getTime())&&(a=h.bookingDate);return a}}class ds{docId="";path="";constructor(e,t){this.docId=e,this.path=t}toJson(){const e={};return e.docId=this.docId,e.path=this.path,e}static fromJson(e){const t=new ds("","");return t.docId=e.docId||"",t.path=e.path||"",t}toString(){return JSON.stringify(this,null,2)}}class fs{bookingCount=0;lastUpdateTime=new Date(0);docId="";constructor({docId:e=""}){this.docId=e}static fromJson(e,t){const r=new fs({});return e!==void 0&&t!==void 0&&(r.docId=t,r.bookingCount=e.bookingCount??0,r.lastUpdateTime=e.lastUpdateTime?new Date(e.lastUpdateTime):new Date(0)),r}toJson(){const e={};return this.lastUpdateTime.getTime()!==new Date(0).getTime()&&(e.lastUpdateTime=this.lastUpdateTime.toISOString()),this.bookingCount>0&&(e.bookingCount=this.bookingCount),e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class xr{email="";name="";phoneNumber="";id="";devices=new Map;gender=G.anonymous;myBuisnessesIds=[];reminders;clientAt=new Map;hasNotificationPermission=!0;permission=new Map;tempFcm;allowAppNotification=!0;isVerifiedPhone=!1;isVerifiedEmail=!1;invoiceCounter;newWorkerWelcomes=new Set;bookings=new Map;bookingsPreviews=new Map;bookingsDocsToLoad=new Set;localDocsToDelete=new Set;constructor({email:e="",isVerifiedPhone:t=!1,isVerifiedEmail:r=!1,name:n="",phoneNumber:s="",id:a="",gender:c=G.anonymous,devices:o=new Map}){this.email=e,this.isVerifiedPhone=t,this.isVerifiedEmail=r,this.name=n,this.phoneNumber=s,this.id=a,this.gender=c,this.devices=o}static fromJson(e,t){const r=new xr({email:e.email,isVerifiedPhone:e.isVerifiedPhone,isVerifiedEmail:e.isVerifiedEmail,name:e.name,phoneNumber:e.phoneNumber,id:e.id,gender:e.gender});return r.setUserPublicData(e,t),r}get customerData(){return new It({customerUuid:this.id,name:this.name,email:this.email,isVerifiedPhone:this.isVerifiedPhone,gender:this.gender,phoneNumber:this.phoneNumber})}setUserPublicData(e,t){if(this.permission=new Map,this.myBuisnessesIds=[],this.isVerifiedEmail=e.isVerifiedEmail||!1,this.email=e.email||"",this.allowAppNotification=e.allowAppNotification||!0,this.email=e.email||"",this.name=e.name||"",this.clientAt=new Map,e.clientAt&&Object.entries(e.clientAt).forEach(([r,n])=>{Object.keys(n).length!==0&&(this.clientAt.set(r,new Set),Object.keys(n).forEach(s=>{this.clientAt.set(r,this.clientAt.get(r).add(s))}))}),e.localDocsToDelete&&(this.localDocsToDelete=new Set,e.localDocsToDelete.forEach(r=>{this.localDocsToDelete.add(ds.fromJson(r))})),this.invoiceCounter=e.invoiceCounter,this.devices=new Map,e.devices&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,n])=>{this.devices.set(r,Ue.fromJson(n,r))}):e.currentFcm&&e.currentFcm!==""&&(this.tempFcm=e.currentFcm),this.hasNotificationPermission=e.hasNotificationPermission||!0,e.gender&&(this.gender=Ze[e.gender]||G.anonymous),this.phoneNumber=e.phoneNumber||"",this.id=e.id||e.phoneNumber||"",e.permission&&Object.entries(e.permission).forEach(([r,n])=>{n===2&&this.myBuisnessesIds.push(r),this.permission.set(r,n)}),e.bookings&&(this.bookings=new Map,Object.entries(e.bookings).forEach(([r,n])=>{const s=ut.fromJson(n,r);s.cancelDate||this.bookings.set(r,s)})),this.bookingsDocsToLoad=new Set,e.bookingsPreviews){const r=new Map;Object.entries(e.bookingsPreviews).forEach(([n,s])=>{r.set(n,fs.fromJson(s,n))}),r.forEach((n,s)=>{this.bookingsPreviews.get(s)?.lastUpdateTime!==n.lastUpdateTime&&(s===Wc||B0(s)>=_0(new Date)||(t?.bookings.passedBookings?.hasOwnProperty(s)??!1))&&this.bookingsDocsToLoad.add(s)}),this.bookingsPreviews=r}this.id===this.phoneNumber?this.isVerifiedPhone=!0:this.isVerifiedPhone=e.isVerifiedPhone||!1,this.newWorkerWelcomes=new Set,e.newWorkerWelcomes&&Object.keys(e.newWorkerWelcomes).forEach(r=>{this.newWorkerWelcomes.add(r)})}get fcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm)return new Set(this.tempFcm);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}getDevicesByToken(e){const t=[];return Object.values(this.devices).forEach(r=>{r.token===e&&t.push(Ue.fromDevice(r))}),t}toJson(){const e={};return this.hasNotificationPermission||(e.hasNotificationPermission=this.hasNotificationPermission),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.isVerifiedEmail&&(e.isVerifiedEmail=this.isVerifiedEmail),this.email!==""&&(e.email=this.email),Object.keys(this.bookingsPreviews).length>0&&(e.bookingsPreviews={},Object.entries(this.bookingsPreviews).forEach(([t,r])=>{e.bookingsPreviews[t]=r.toJson()})),this.allowAppNotification||(e.allowAppNotification=this.allowAppNotification),e.permission={},Object.entries(this.permission).forEach(([t,r])=>{e.permission[t]=r}),this.localDocsToDelete.size>0&&(e.localDocsToDelete=[],this.localDocsToDelete.forEach(t=>{e.localDocsToDelete.push(t.toJson())})),e.email=this.email,e.name=this.name,e.devices={},this.devices.forEach((t,r)=>{e.devices[r]=t.toJson()}),e.clientAt={},this.clientAt.forEach((t,r)=>{e.clientAt[r]={},t.forEach(n=>{e.clientAt[r][n]=""})}),e.gender=Gt[this.gender],e.phoneNumber=this.phoneNumber,e.id=this.id,this.newWorkerWelcomes.size>0&&(e.newWorkerWelcomes={},this.newWorkerWelcomes.forEach(t=>{e.newWorkerWelcomes[t]=""})),e}}class ms{businessId="";date;productId="";constructor(e,t,r){this.businessId=e,this.date=t,this.productId=r}static fromJson(e,t){const r=new ms(t,null,"");return r.businessId=e.businessId||"",e.date instanceof ht&&(r.date=e.date),r}toJson(){const e={};return e.businessId=this.businessId,this.date!==null&&this.date!==void 0&&(e.date=this.date),e}}class si{productsIds={};pendingProductsIds={};id="";revenueCatId="";limitOfBuisnesses=1;preferdTipPercentage=0;cardPaymentsPass="";lastTimeUpdatePhone=new Date(0);lastTimeUpdateEmail=new Date(0);authProviders=new Map;businessesInfo={};storyLikes=[];paymentCards={};lastVisitedBuisnesses=[];lastVisitedBuisnessesRemoved=[];lastCleanDate=ht.fromDate(new Date);businessTopics=new Set;waitingListTopics={};tempFcm;termsApprovals={};seenUpdates={};createdAt=new Date;userPublicData=new xr({});name="";isVerifiedPhone=!1;phoneNumber="";gender=G.anonymous;lastTimeConnect=new Date;userPublicDataListener;connectedGoogleEmail="";currentMonthInvoices;currentMonthPaymentRequest;currentMonthPayments;existInvoicesDocs=new Set;existPaymentsDocs=new Set;existPaymentRequestsDocs=new Set;invoices={};devices={};bookings=new Um;hasOldNotification=!1;constructor({name:e="",phoneNumber:t="",id:r="",productsIds:n={},myBuisnessesIds:s=[],revenueCatId:a="",limitOfBuisnesses:c=1,gender:o=G.anonymous,lastVisitedBuisnesses:u=[],lastVisitedBuisnessesRemoved:h=[],paymentCards:d={},isVerifiedPhone:l=!1,isVerifiedEmail:g=!1,email:w="",lastCleanDate:x=ht.fromDate(new Date),createdAt:f=new Date}){this.userPublicData=new xr({email:w,isVerifiedEmail:g,isVerifiedPhone:l,name:e,phoneNumber:t,id:r,gender:o}),this.name=e,this.phoneNumber=t,this.id=r,this.productsIds=n,this.revenueCatId=a,this.limitOfBuisnesses=c,this.gender=o,this.lastVisitedBuisnesses=u,this.lastVisitedBuisnessesRemoved=h,this.paymentCards=d,this.isVerifiedPhone=l,this.cardPaymentsPass="",this.lastCleanDate=x,this.createdAt=f}get toPaymentRequestUser(){return new tr({userId:this.id,name:this.name,gender:this.gender,isVerifiedPhone:this.isVerifiedPhone,isExist:!0,phone:this.phoneNumber,userDecline:!1})}customerDataFromBooking({booking:e,exclude:t,needDelete:r=!1,initDate:n}){return new It({name:this.name,email:this.userPublicData.email,gender:this.gender,customerUuid:this.id,phoneNumber:this.phoneNumber,isVerifiedPhone:this.isVerifiedPhone,userFirstBookingsDate:this.bookings.firstBookingForBusiness({businessId:e.buisnessId,workerId:e.workerId,exclude:r?e.bookingDate:t,initDate:r?n:e.bookingDate}),lastBookingsDate:this.bookings.lastBookingForBusiness({businessId:e.buisnessId,workerId:e.workerId,exclude:r?e.bookingDate:t,initDate:r?n:e.bookingDate})})}get fcmsTokens(){if(!this.userPublicData.allowAppNotification)return new Set;if(this.tempFcm)return new Set([this.tempFcm]);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}getDeviceByToken(e){let t;return Object.values(this.devices).forEach(r=>{r.token===e&&(t=Ue.fromDevice(r))}),t}static fromUserDocJson(e){const t=new si({name:e.name,phoneNumber:e.phoneNumber,id:e.id,productsIds:{},myBuisnessesIds:[],revenueCatId:e.revenueCatId,limitOfBuisnesses:e.limitOfBuisnesses,gender:Ze[e.gender],lastVisitedBuisnesses:e.lastVisitedBuisnesses,lastVisitedBuisnessesRemoved:e.lastVisitedBuisnessesRemoved,paymentCards:{},isVerifiedPhone:e.isVerifiedPhone,isVerifiedEmail:!1,email:"",lastCleanDate:e.lastCleanDate,createdAt:new Date(e.createdAt)});return e.devices&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,n])=>{t.devices[r]=Ue.fromJson(n,r)}):e.currentFcm&&e.currentFcm!==""&&(t.tempFcm=e.currentFcm),e.termsApprovals&&Object.entries(e.termsApprovals).forEach(([r,n])=>{t.termsApprovals[r]=new Date(n)||new Date(0)}),t.seenUpdates={},e.seenUpdates&&Object.entries(e.seenUpdates).forEach(([r,n])=>{t.seenUpdates[r]=new Set(n)}),t.phoneNumber=e.phoneNumber||"0",t.id=e.id||e.phoneNumber,t.preferdTipPercentage=0,e.preferdTipPercentage&&(t.preferdTipPercentage=Number.isInteger(e.preferdTipPercentage)?e.preferdTipPercentage:Math.floor(e.preferdTipPercentage)),t.cardPaymentsPass=e.cardPaymentsPass||"",e.storyLikes&&e.storyLikes.forEach(r=>t.storyLikes.push(r)),e.lastTimeUpdatePhone&&(t.lastTimeUpdatePhone=new Date(e.lastTimeUpdatePhone)||new Date(0)),e.lastTimeUpdateEmail&&(t.lastTimeUpdateEmail=new Date(e.lastTimeUpdateEmail)||new Date(0)),t.productsIds={},e.productsIds&&Object.entries(e.productsIds).forEach(([r,n])=>{t.productsIds[r]=ms.fromJson(n,r)}),e.pendingProductsIds&&Object.entries(e.pendingProductsIds).forEach(([r,n])=>{t.pendingProductsIds[r]=n}),t.revenueCatId=e.revenueCatId||"",t.lastCleanDate=e.lastCleanDate,e.lastVisitedBuisnesses.forEach(r=>t.lastVisitedBuisnesses.push(r)),e.lastVisitedBuisnessesRemoved&&e.lastVisitedBuisnessesRemoved.forEach(r=>t.lastVisitedBuisnessesRemoved.push(r)),t.businessesInfo={},e.businessesInfo&&Object.entries(e.businessesInfo).forEach(([r,n])=>{t.businessesInfo[r]=pr.fromJson(n,r)}),e.businessTopics&&e.businessTopics.forEach(r=>{t.businessTopics.add(r)}),e.waitingListTopics&&(t.waitingListTopics={},Object.entries(e.waitingListTopics).forEach(([r,n])=>{const s=kr.fromJson(n,r);s.date===""?t.businessTopics.add(r):t.waitingListTopics[r]=s})),t.paymentCards={},e.paymentCards&&Object.entries(e.paymentCards).forEach(([r,n])=>{t.paymentCards[r]={},Object.entries(n).forEach(([s,a])=>{t.paymentCards[r][s]=gr.fromJson(a,s,r)})}),t.createdAt=new Date(e.createdAt),t.limitOfBuisnesses=e.limitOfBuisnesses||1,e.authProviders?Object.entries(e.authProviders).forEach(([r,n])=>{if(la[r]){const s=la[r];t.authProviders.set(s,new Date(n)||new Date(2023))}}):t.authProviders=new Map([[y0.Phone,t.createdAt]]),t.id===t.phoneNumber?t.isVerifiedPhone=!0:t.isVerifiedPhone=e.isVerifiedPhone||!1,e.lastTimeConnect&&(t.lastTimeConnect=new Date(e.lastTimeConnect)||new Date),t.userPublicData=new xr({isVerifiedPhone:t.isVerifiedPhone,phoneNumber:t.phoneNumber}),t}setUserPublicData(e){this.name=e.name||"",e.devices&&typeof e.devices=="object"&&Object.entries(e.devices).forEach(([t,r])=>{this.devices[t]=Ue.fromJson(r,t)}),this.gender=Ze[e.gender],this.phoneNumber=e.phoneNumber,this.id=e.id||e.phoneNumber,this.userPublicData.setUserPublicData(e,this)}firstEnterance(e){return!new Set([...this.lastVisitedBuisnesses,...this.lastVisitedBuisnessesRemoved]).has(e)}toUserDocJson(){const e={};return e.name=this.name,e.devices={},Object.entries(this.devices).forEach(([t,r])=>{e.devices[t]=r.toJson()}),this.lastTimeUpdateEmail.getTime()!==new Date(0).getTime()&&(e.lastTimeUpdateEmail=this.lastTimeUpdateEmail.toISOString()),this.lastTimeUpdatePhone.getTime()!==new Date(0).getTime()&&(e.lastTimeUpdatePhone=this.lastTimeUpdatePhone.toISOString()),e.gender=Gt[this.gender],e.phoneNumber=this.phoneNumber,e.id=this.id,Object.keys(this.termsApprovals).length>0&&(e.termsApprovals={},Object.entries(this.termsApprovals).forEach(([t,r])=>{e.termsApprovals[t]=r.toISOString()})),Object.keys(this.seenUpdates).length>0&&(e.seenUpdates={},Object.entries(this.seenUpdates).forEach(([t,r])=>{e.seenUpdates[t]=Array.from(r)})),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.preferdTipPercentage=this.preferdTipPercentage,e.revenueCatId=this.revenueCatId,Object.keys(this.productsIds).length>0&&(e.productsIds={},Object.entries(this.productsIds).forEach(([t,r])=>{e.productsIds[t]=r.toJson()})),e.pendingProductsIds=this.pendingProductsIds,e.lastCleanDate=this.lastCleanDate,e.limitOfBuisnesses=this.limitOfBuisnesses,e.lastVisitedBuisnesses=this.lastVisitedBuisnesses,e.lastVisitedBuisnessesRemoved=this.lastVisitedBuisnessesRemoved,e.businessesInfo={},this.cardPaymentsPass!==""&&(e.cardPaymentsPass=this.cardPaymentsPass),Object.entries(this.businessesInfo).forEach(([t,r])=>{e.businessesInfo[t]=r.toJson()}),e.storyLikes=this.storyLikes,e.waitingListTopics={},Object.entries(this.waitingListTopics).forEach(([t,r])=>{e.waitingListTopics[t]=r.toJson()}),e.businessTopics=Array.from(this.businessTopics),e.authProviders={},this.authProviders.forEach((t,r)=>{e.authProviders[r]=t.toISOString()}),e.paymentCards={},Object.entries(this.paymentCards).forEach(([t,r])=>{e.paymentCards[t]={},Object.entries(r).forEach(([n,s])=>{e.paymentCards[t][n]=s.toJson()})}),e.createdAt=this.createdAt.toISOString(),e}get developerId(){return this.id.replace("+","")}toString(){return JSON.stringify(this.toUserDocJson())+JSON.stringify(this.userPublicData.toJson())}}class Oe{static instance;constructor(){}static GI(){return Oe.instance||(Oe.instance=new Oe),Oe.instance}user=new si({});verificationRepo=new kf;userDoc;get getPermission(){return 0}isDeveloper(){return this.isConnected?Ct.developers.hasOwnProperty(this.user.id.replace("+","")):!1}get isConnected(){return this.verificationRepo.isLoggedIn}get userId(){try{return this.verificationRepo.userId}catch{return""}}async setupUser({newUserId:e="",logoutIfDosentExist:t=!1}){try{return ce.info(`The user id is -> ${e}`),e.length<5?(await this.verificationRepo.logout(),!0):!t&&(this.userDoc==null||!this.userDoc.exists())?(this.userDoc=void 0,!0):(this.user=si.fromUserDocJson(this.userDoc?.data()),this.startPublicDataListening(),!0)}catch(r){return this.userDoc=void 0,r instanceof Error&&(ce.error(`Error while setting up the user --> ${r}`),q.GI().addError({details:r.toString()})),!1}}async startPublicDataListening(){this.isConnected}async loadBookingsDocs(e){const t=[];e.forEach(r=>{t.push(this.loadBookingDoc(r))}),await Promise.all(t)}async loadBookingDoc(e){}}function dr(i,e=-1){let t="",r="",n="",s="",a="",c="",o=i.days;Math.floor(o/30)>0&&(Math.floor(o/30)===1&&(c=$("month")),Math.floor(o/30)===2&&(c=$("twoMonths")),Math.floor(o/30)>2&&(c=`${Math.floor(o/30)} `+$("months"))),o-=Math.floor(o/30)*30,Math.floor(o/7)>0&&(Math.floor(o/7)===1&&(a=$("week")),Math.floor(o/7)===2&&(a=$("twoWeeks")),Math.floor(o/7)>2&&(a=`${Math.floor(o/7)} `+$("weeks"))),o-=Math.floor(o/7)*7,o===1&&(s=$("day")),o===2&&(s=$("twoDays")),o>2&&(s=`${o} `+$("days"));let u=i.hours-i.days*24;u===1&&(t=$("hour")),u===2&&(t=$("twoHours")),u>2&&(t=`${u}`+$("hoursChar"));let h=i.minutes-i.hours*60;r=h>0?`${h}`+$("minutesChar"):"";let d=i.seconds-i.minutes*60;d===1&&(n=$("second",!1)),d>1&&(n=`${d} `+$("seconds"));let l="";return i.days===365?l=$("year"):i.days%365===0&&i.days>365?l=(i.days/365).toFixed(0)+" "+$("years"):a===""&&c!==""&&s===""?l=c:a!==""&&c===""&&s===""?l=a:a!==""&&c!==""&&s===""?l=c+" "+$("and")+a:a!==""&&c===""&&s!==""?l=a+" "+$("and")+s:a===""&&c!==""&&s!==""?l=c+" "+$("and")+s:a!==""&&c!==""&&s!==""?l=c+" ,"+a+" "+$("and")+s:r===""&&t===""&&s!==""?l=s:r!==""&&t===""&&s===""?l=r:r===""&&t!==""&&s===""?l=t:r!==""&&t!==""&&s===""?l=t+" "+$("and")+r:r!==""&&t===""&&s!==""?l=s+" "+$("and")+r:r===""&&t!==""&&s!==""?l=s+" "+$("and")+t:r!==""&&t!==""&&s!==""?l=s+" ,"+t+" "+$("and")+r:n!==""&&(l=n),l.length===0?"":e===-1||e>l.length?l:l.slice(0,e)+".."+l.slice(e)}function $(i,e=!0){return i}function Wm(i){try{const e=i.indexOf("-");let t=i.substring(e+1,i.length);return t="0"+t,t.substring(0,3)+"-"+t.substring(3,t.length)}catch{return i}}class ps{times={};duringPaymentsTimes={};listener;lastBookingTimeDate;constructor(){}static fromJson(e){const t=new ps;return t.setData(e),t}setData(e,t=!0){this.times={},e.eventsTimes!==null&&Object.entries(e.eventsTimes).forEach(([r,n])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&n instanceof Object&&Object.keys(n).length>0&&(this.times[r]={},Object.entries(n).forEach(([c,o])=>{this.times[r][c]=MultiBookingTime.fromJson(o)}))}),e.eventsTimeDuringPayment!==null&&t&&Object.entries(e.eventsTimeDuringPayment).forEach(([r,n])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.entries(n).forEach(([c,o])=>{const u=MultiBookingTime.fromJson(o);if(u.expiredDate!==null&&u.expiredDate.getTime()>Date.now()){if(this.times[r]??={},this.times[r][c]===null){const h=MultiBookingTime.fromMultiBookingTime(u);h.expiredDate=void 0,this.times[r][c]=h}else this.times[r][c].currentParticipants+=u.currentParticipants;s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s),this.duringPaymentsTimes[r]??={},this.duringPaymentsTimes[r][c]=u}})})}toJson(){const e={};return e.eventsTimes={},Object.entries(this.times).forEach(([t,r])=>{e.eventsTimes[t]={},Object.entries(r).forEach(([n,s])=>{e.eventsTimes[t][n]=s.toJson()})}),e}}class zt{showAdressAlert=!1;showAdressMessage=!1;showPhoneAlert=!1;showPhoneMessage=!1;recurrenceNotificationsLastDate;notifyOnPayments=!0;notifyOnWaitingListEvents=!0;notifyAboutCancelNearDeadline=!0;notifyOnClientConfirmArrival=!0;notifyAboutOrderNearDeadline=!0;notificationOption=j.PushOrSMS;notifyWhenGettingBooking=!0;remindersTypes=new Map;constructor(){}static fromJson(e){const t=new zt;if(t.notifyOnWaitingListEvents=e.notifyOnWaitingListEvents??!0,e.notificationOption!=null&&(t.notificationOption=di[e.notificationOption]??j.PushOrSMS),t.recurrenceNotificationsLastDate=e.recurrenceNotificationsLastDate?new Date(e.recurrenceNotificationsLastDate):void 0,t.remindersTypes=new Map,e.remindersTypes!=null)for(const[r,n]of Object.entries(e.remindersTypes)){const s=vt[r];s!=null&&t.remindersTypes.set(s,n)}else t.remindersTypes.set(Xe.regular,e.minutesBeforeNotify??60);return t.notifyOnClientConfirmArrival=e.notifyOnClientConfirmArrival??!0,t.showAdressAlert=e.showAdressAlert??!1,t.showAdressMessage=e.showAdressMessage??!1,t.showPhoneAlert=e.showPhoneAlert??!1,t.showPhoneMessage=e.showPhoneMessage??!1,t.notifyOnPayments=e.notifyOnPayments??!0,t.notifyAboutCancelNearDeadline=e.notifyAboutCancelNearDeadline??!0,t.notifyAboutOrderNearDeadline=e.notifyAboutOrderNearDeadline??!0,t.notifyWhenGettingBooking=e.notifyWhenGettingBooking??!0,t}isEqual(e){return JSON.stringify(e.toJson())===JSON.stringify(this.toJson())}static fromWorkerNotificatiosSettings(e){return zt.fromJson(e.toJson())}toJson(){const e={};return this.notifyOnWaitingListEvents||(e.notifyOnWaitingListEvents=this.notifyOnWaitingListEvents),this.notificationOption!==j.PushOrSMS&&(e.notificationOption=j[this.notificationOption]),this.recurrenceNotificationsLastDate!=null&&(e.recurrenceNotificationsLastDate=this.recurrenceNotificationsLastDate.toISOString()),this.notifyOnClientConfirmArrival||(e.notifyOnClientConfirmArrival=this.notifyOnClientConfirmArrival),this.notifyOnPayments||(e.notifyOnPayments=this.notifyOnPayments),e.remindersTypes={},this.remindersTypes.forEach((t,r)=>{e.remindersTypes[Xe[r]]=t}),this.notifyAboutCancelNearDeadline||(e.notifyAboutCancelNearDeadline=this.notifyAboutCancelNearDeadline),this.notifyAboutOrderNearDeadline||(e.notifyAboutOrderNearDeadline=this.notifyAboutOrderNearDeadline),this.notifyWhenGettingBooking||(e.notifyWhenGettingBooking=this.notifyWhenGettingBooking),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showAdressMessage&&(e.showAdressMessage=this.showAdressMessage),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.showPhoneMessage&&(e.showPhoneMessage=this.showPhoneMessage),e}toString(){return JSON.stringify(this.toJson())}}class gs{publicCustomersData;constructor({publicCustomersData:e}={}){this.publicCustomersData=e}static fromJson(e){return new gs().setPublicCustomersDataJson(e)}setPublicCustomersDataJson(e){return e.data??={},this.publicCustomersData={},Object.entries(e.data).forEach(([t,r])=>{const n=Vt.fromMinimalJson(r,t);this.publicCustomersData[t]=n}),this}toMinimalJson(){const e={};return e.data={},this.publicCustomersData??={},Object.entries(this.publicCustomersData).forEach(([t,r])=>{e.data[t]=r.toMinimalJson()}),e}}class ai{start=new Date(0);end=new Date(0);id="";createdAt;workerId="";addedToDeviceCalendar=!1;colorIndex=1;title="";recurrenceObj;constructor({end:e,start:t,title:r="",id:n="",workerId:s=""}){this.start=t,this.end=e,this.title=r,this.id=n,this.workerId=s,this.recurrenceObj=new dt({start:t,endDate:e,endOption:P0.date})}isOneDay(){return Le(this.end)===Le(this.start)}static fromEvent(e){const t=new ai({});return t.start=e.from,e.recurrenceEvent?.endDate&&(t.end=e.recurrenceEvent.endDate),t.title=e.eventName,t.createdAt=e.vacationCreatedAt,t.id=e.vacationId,t.recurrenceObj=e.recurrenceEvent,t.addedToDeviceCalendar=e.vacationAddedToDeviceCalendar,t.colorIndex=e.colorIndex,t.workerId=e.ids.length>0?e.ids[0]:"",t}static fromVacation(e){const t=new ai({});return t.start=e.start,t.end=e.end,t.addedToDeviceCalendar=e.addedToDeviceCalendar,t.id=e.id,t.createdAt=e.createdAt,t.workerId=e.workerId,t.title=e.title,t.colorIndex=e.colorIndex,t}}class Hm{listener;recurrenceEvents={};vacationsEvents={};constructor(){}get recurrenceEventsList(){const e=[];return Object.entries(this.recurrenceEvents).forEach(([t,r])=>{e.push(...Object.values(r))}),e}get recurrenceEventsListWithOutVacations(){const e=[];return Object.entries(this.recurrenceEvents).forEach(([t,r])=>{Object.entries(r).forEach(([n,s])=>{s.isVacation||e.push(s)})}),e}setRecurrenceEvents(e,t,r,{putBreaks:n=!0}={}){this.recurrenceEvents={},this.vacationsEvents={},Object.entries(e).forEach(([s,a])=>{this.recurrenceEvents[s]={};const c=new Date(s);Object.entries(a).forEach(([o,u])=>{let h="",d="";if(typeof o=="string"){const g=o.split("_");g.length===2&&(h=g[1]),d=g[0]}const l=Ir.fromJson({json:u,timeStr:d,businessModel:r,newTimeId:h,dayString:Bm(c),monthString:ni(c),workerId:t});l.isVacation&&(this.vacationsEvents[Le(l.from)]=l),!(!n&&l.isBreak)&&(this.recurrenceEvents[s][o]=l)})})}vacationInDate(e){for(const t of Object.values(this.vacationsEvents))if(t.recurrenceEvent?.isAccureInDate({date:e}))return ai.fromEvent(t);return null}}const Vm={R:"R",A:"A"},zm={R:"R",A:"A"};class oi{start=new Date(0);end=new Date(0);operation="R";shifts=[];constructor({start:e,end:t,operation:r,shifts:n}){this.start=e,this.end=t,this.operation=r,this.shifts=n}static fromJson(e,t){const r=t.split("&"),n=new Date(r[0]),s=new Date(r[1]),a=zm[e.operation]||"R",c=e.shifts.map(o=>o);return new oi({start:n,end:s,operation:a,shifts:c})}static fromShiftChangeRange(e){const{start:t,end:r,operation:n,shifts:s}=e;return new oi({start:t,end:r,operation:n,shifts:[...s]})}isSameAs(e){return this.start.getTime()===e.start.getTime()&&this.end.getTime()===e.end.getTime()&&this.operation===e.operation&&this.shifts.toString()===e.shifts.toString()}toJson(){return{operation:Vm[this.operation],shifts:this.shifts}}combineShifts(e){if(this.operation==="R")return this.shifts;const t=[];return Js(t,e),Js(t,this.shifts),Ho(t)}getKey(){const e=this.formatDate(this.start),t=this.formatDate(this.end);return`${e}&${t}`}formatDate(e){return e.toISOString().split("T")[0]}toString(){return JSON.stringify(this.toJson())}}class ci{name="";index="";treatments=new Map;constructor({name:e,treatments:t,index:r}){this.name=e,this.treatments=t,this.index=r}static fromJson(e,t,{pointerShortBookingTime:r,pointerLognestBookingTime:n}={}){const s=e.name||"",a=t,c=new Map;return e.treatments&&Object.entries(e.treatments).forEach(([o,u])=>{c.set(o,Pe.fromJson(u,o)),r&&(c.get(o).totalMinutes<r[0]&&(r[0]=Math.max(c.get(o).times.get("0").workMinutes,5)),c.get(o).totalMinutes===r[0]&&(r[0]=Math.min(Math.max(c.get(o).times.get("0").workMinutes,5),r[0]))),n&&c.get(o).totalMinutes>n[0]&&(n[0]=Math.max(c.get(o).totalMinutes,5))}),new ci({name:s,treatments:c,index:a})}containTreatment(e){for(const t of Object.values(this.treatments))if(t.id===e)return!0;return!1}toJson(){const e={};return e.name=this.name,e.treatments={},Object.entries(this.treatments).forEach(([t,r])=>{e.treatments[t]=r.toJson()}),e}fromTreatmentSubject(e){return this.name=e.name,this.index=e.index,this.treatments=new Map,e.treatments.forEach((t,r)=>{this.treatments.set(r,Pe.fromTreatment(t))}),this}toString(){return JSON.stringify(this.toJson(),null,2)}}class $m{bookingsTimes={};lastBookingTimeDate;duringPaymentBookingsTime={};listener;constructor(){}findLastBookingsTimesDate(){let e;return Object.entries(this.bookingsTimes).forEach(([t,r])=>{const n=new Date(t);Object.keys(r).length>0&&(!e||n>e)&&(e=n)}),e}setWorkerPublicData(e,t=!0){this.duringPaymentBookingsTime={},this.bookingsTimes={},dayLightSavingTimes.forEach(r=>{r=new Date(r.getTime()+60*60*1e3),this.bookingsTimes[Le(r)]={[Nt(r)]:60}}),e.bookingsTimes!=null&&Object.entries(e.bookingsTimes).forEach(([r,n])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.keys(n).length!=0&&(this.bookingsTimes[r]={},Object.entries(n).forEach(([c,o])=>{c.includes("00:00v")?t&&(this.bookingsTimes[r]={"00:00":1439}):(c!=="00:00"||this.bookingsTimes[r]["00:00"]!=1439)&&(this.bookingsTimes[r][c]=o)}),Object.keys(n).length>0&&s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s))}),e.duringPaymentBookingsTime!==null&&Object.entries(e.duringPaymentBookingsTime).forEach(([r,n])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.entries(n).forEach(([c,o])=>{o.length===2&&o[0]instanceof ht&&o[0].toDate().getTime()>Date.now()&&typeof o[1]=="number"&&(r in this.bookingsTimes?this.bookingsTimes[r][c]=o[1]:this.bookingsTimes[r]={[c]:o[1]},s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s),r in this.duringPaymentBookingsTime?this.duringPaymentBookingsTime[r][c]=o:this.duringPaymentBookingsTime[r]={[c]:o})})})}emptyBookingTimesDatesInMonth(e){Object.entries(this.bookingsTimes).forEach(([t,r])=>{t.includes(e)&&(this.bookingsTimes[t]={})})}toWorkerPublicDataJson(){const e={};return e.bookingsTimes={},Object.entries(this.bookingsTimes).forEach(([t,r])=>{e.bookingsTimes[t]={},Object.entries(r).forEach(([n,s])=>{e.bookingsTimes[t][n]=s})}),e.duringPaymentBookingsTime={},Object.entries(this.duringPaymentBookingsTime).forEach(([t,r])=>{e.duringPaymentBookingsTime[t]={},Object.entries(r).forEach(([n,s])=>{e.duringPaymentBookingsTime[t][n]=s})}),e}}class Cr{daysToAllowBookings=7;name="";phone="";id="";profileImg="";about="";maxTreatments=5;allowAppNotification=!0;religions=[];waitingListExceptionDays=new Set;closeScheduleOnHolidays=!1;weekendDays=[5,6];onHoldMinutes=0;cancelMinutes=0;minutesBeforeBookingToConfirm=1440;tempFcm;hasRecurrenceEvents=!1;windowSpaces=zr.shortestTreatment;customWindowMinute=30;showWaitingListWhenThereIsChoises=!0;isVerifiedPhone=!1;lastCleanDate=new Date;gender=G.anonymous;deleteNeerDedlineBookingMessage;orderNeerDedlineBookingMessage;generalBookingMessage;closeCalendarDate;minDateForShowinData=new Date(0);openCalendar=!0;maxFutureBookings=4;currentClientCount=0;showVacations=!0;mustVerifyPhone=!0;allowBookingConfirmations=!0;devices=new Map;storyImages=new Map;createdAt=new Date(0);workTime=new Map([["sunday",[]],["monday",[]],["tuesday",[]],["wednesday",[]],["thursday",[]],["friday",[]],["saturday",[]]]);isCustomersNeedRecurrence=!1;specificRangeChanges=new Map;treatmentsSubjects=new Map;workerPublicData=new $m;publicCustomers=new gs;storylikesAmount={};multiEventsTimes=new ps;generalBookingsCount=0;passedBookingsCount=0;shortBookingTime=999;longestBookingTime=0;recurrence=new Hm;notifications=new zt;workerDocListner;constructor({}){}static fromUserPublicData(e){const t=new Cr({});return t.phone=e.phoneNumber||"",t.currentClientCount=e.currentClientCount||0,t.id=e.id||t.phone,t.name=e.name||"",e.devices!=null&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,n])=>{t.devices.set(r,Ue.fromJson(n,r))}):e.currentFcm!=null&&e.currentFcm!==""&&(t.tempFcm=e.currentFcm),t.gender=Ze[e.gender]||G.anonymous,t.lastCleanDate=new Date,t.createdAt=new Date,t.notifications.remindersTypes=new Map([[Xe.regular,60]]),t}static fromWorkerDocJson(e){const t=new Cr({});return t.setFromWorkerDoc(e),t}get treatmentsLength(){let e=0;return Object.values(this.treatmentsSubjects).forEach(t=>{e+=Object.values(t.treatments).length}),e}shiftsFor({day:e}){const t=this.workTime.get(Be(e,"EEEE").toLowerCase())||[];for(const r of Object.values(this.specificRangeChanges))if(Ao(r.start,new Date(r.end.getTime()+23*60*60*1e3+59*60*1e3),e,e)==="STRIKE")return r.combineShifts(t);return Ho(nl(t))}get fcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm!=null)return new Set([this.tempFcm]);const e=new Set;for(const t of Object.values(this.devices))t.activeNotifications&&e.add(t.token);return e}isClosingDate(e){return!this.openCalendar||this.closeCalendarDate!=null&&De(this.closeCalendarDate).getTime()===De(e).getTime()}hasTreatemnt(e){for(const t of Object.values(this.treatmentsSubjects))if(t.containTreatment(e))return!0;return!1}get useWhatsApp(){return this.notifications.notificationOption===j.WhatsApp||this.notifications.notificationOption===j.PushOrWhatsApp}setFromWorkerDoc(e){if(this.daysToAllowBookings=e.daysToAllowBookings||7,this.profileImg=e.profileImg||"",this.about=e.about||"",e.lastCleanDate instanceof ht?this.lastCleanDate=e.lastCleanDate.toDate():typeof e.lastCleanDate=="string"&&(this.lastCleanDate=new Date(e.lastCleanDate)||new Date),e.religions&&(this.religions=e.religions.map(t=>Gc[t])),e.windowSpaces&&(this.windowSpaces=nu[e.windowSpaces]||zr.shortestTreatment),this.isCustomersNeedRecurrence=e.isCustomersNeedRecurrence||!1,this.showWaitingListWhenThereIsChoises=e.showWaitingListWhenThereIsChoises||!0,this.customWindowMinute=e.customWindowMinute||30,this.closeScheduleOnHolidays=e.closeScheduleOnHolidays||!1,this.weekendDays=e.weekendDays||[5,6],this.mustVerifyPhone=e.mustVerifyPhone||!0,this.showVacations=e.showVacations||!0,this.gender=Ze[e.gender]||G.anonymous,this.allowAppNotification=e.allowAppNotification||!0,this.name=e.name||"",this.maxTreatments=e.maxTreatments||3,this.phone=e.phone||"",this.hasRecurrenceEvents=e.hasRecurrenceEvents||!1,this.id=e.id||e.phone||"",this.minutesBeforeBookingToConfirm=e.minutesBeforeBookingToConfirm||1440,this.maxFutureBookings=e.maxFutureBookings||4,this.treatmentsSubjects=new Map,this.shortBookingTime=999,e.treatmentsSubjects){let t=[this.shortBookingTime],r=[this.longestBookingTime];Object.entries(e.treatmentsSubjects).forEach(([n,s])=>{const a=ci.fromJson(s,n,{pointerShortBookingTime:t,pointerLognestBookingTime:r});this.treatmentsSubjects.set(n,a)}),this.shortBookingTime=t[0],this.longestBookingTime=r[0]}else if(e.treatments){const t=new Map;let r=0;Object.entries(e.treatments).forEach(([n,s])=>{const a=Pe.fromOldJson(s,r.toString(),n,r+4);t.set(r.toString(),a),a.totalMinutes<this.shortBookingTime&&(this.shortBookingTime=Math.max(a.times.get("0").workMinutes,5)),a.totalMinutes===this.shortBookingTime&&(this.shortBookingTime=Math.min(Math.max(a.times.get("0").workMinutes,5),this.shortBookingTime)),r+=1}),this.treatmentsSubjects=new Map([["0",new ci({name:$("general"),treatments:t,index:"0"})]])}this.onHoldMinutes=e.onHoldMinutes||0,this.cancelMinutes=e.cancelMinutes||0,e.devices!=null&&typeof e.devices=="object"&&Object.entries(e.devices).forEach(([t,r])=>{this.devices.set(t,Ue.fromJson(r,t))}),this.deleteNeerDedlineBookingMessage=e.deleteNeerDedlineBookingMessage,this.orderNeerDedlineBookingMessage=e.orderNeerDedlineBookingMessage,this.generalBookingMessage=e.generalBookingMessage,this.workTime=new Map,e.workTime&&Object.entries(e.workTime).forEach(([t,r])=>{this.workTime.set(t,r.map(n=>n))}),this.waitingListExceptionDays=new Set,e.waitingListExceptionDays&&e.waitingListExceptionDays.forEach(t=>{this.waitingListExceptionDays.add(t)}),e.notifications?this.notifications=zt.fromJson(e.notifications):(this.notifications=new zt,this.notifications.notifyOnWaitingListEvents=e.notifyOnWaitingListEvents||!0,this.notifications.showAdressAlert=e.showAdressAlert||!1,this.notifications.showAdressMessage=e.showAdressMessage||!1,this.notifications.showPhoneAlert=e.showPhoneAlert||!1,this.notifications.showPhoneMessage=e.showPhoneMessage||!1,this.notifications.remindersTypes=new Map([[Xe.regular,e.minutesBeforeNotify||60]]),this.notifications.notifyOnPayments=e.notifyOnPayments||!0,this.notifications.notifyAboutCancelNearDeadline=e.notifyAboutCancelNearDeadline||!0,this.notifications.notifyAboutOrderNearDeadline=e.notifyAboutOrderNearDeadline||!0,this.notifications.notifyWhenGettingBooking=e.notifyWhenGettingBooking||!0,e.notificationOption&&(this.notifications.notificationOption=di[e.notificationOption]||j.OnlyPush),e.recurrenceNotificationsLastDate?this.notifications.recurrenceNotificationsLastDate=new Date(e.recurrenceNotificationsLastDate):this.notifications.recurrenceNotificationsLastDate=new Date),this.specificRangeChanges=new Map,e.specificRangeChanges&&Object.entries(e.specificRangeChanges).forEach(([t,r])=>{const n=oi.fromJson(r,t);n.end>=De(new Date)&&this.specificRangeChanges.set(t,n)}),this.storyImages=new Map,e.storyImages&&Object.entries(e.storyImages).forEach(([t,r])=>{this.storyImages.set(t,r)}),e.closeCalendarDate&&(this.closeCalendarDate=new Date(e.closeCalendarDate)),e.minDateForShowinData&&(this.minDateForShowinData=yi(e.minDateForShowinData)),this.openCalendar=e.openCalendar||!0,this.allowBookingConfirmations=e.allowBookingConfirmations||!0,e.createdAt?this.createdAt=new Date(e.createdAt):this.createdAt=new Date(2023,0,1),this.id===this.phone?this.isVerifiedPhone=!0:this.isVerifiedPhone=e.isVerifiedPhone||!1}getInvoiceWorkerInfo(){return new InvoiceWorkerInfo({workerId:this.id,workerName:this.name})}getFcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm!=null)return new Set([this.tempFcm]);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}toWorkerDocJson(){const e={};return e.workTime={},Object.entries(this.workTime).forEach(([t,r])=>{e.workTime[t]=r}),e.specificRangeChanges={},Object.entries(this.specificRangeChanges).forEach(([t,r])=>{e.specificRangeChanges[t]=r.toJson()}),e.religions=[],this.religions.forEach(t=>{e.religions.push(qc[t])}),this.closeCalendarDate!=null&&(e.closeCalendarDate=new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}).format(this.closeCalendarDate)),this.minDateForShowinData.getFullYear()!=new Date(0).getFullYear()&&(e.minDateForShowinData=Le(this.minDateForShowinData)),this.openCalendar||(e.openCalendar=this.openCalendar),e.allowBookingConfirmations=this.allowBookingConfirmations,this.mustVerifyPhone||(e.mustVerifyPhone=this.mustVerifyPhone),this.isCustomersNeedRecurrence&&(e.isCustomersNeedRecurrence=this.isCustomersNeedRecurrence),e.weekendDays=this.weekendDays,e.maxTreatments=this.maxTreatments,e.gender=Gt[this.gender],e.onHoldMinutes=this.onHoldMinutes,e.cancelMinutes=this.cancelMinutes,this.hasRecurrenceEvents&&(e.hasRecurrenceEvents=this.hasRecurrenceEvents),this.showVacations||(e.showVacations=this.showVacations),e.devices={},Object.entries(this.devices).forEach(([t,r])=>{e.devices[t]=r.toJson()}),e.deleteNeerDedlineBookingMessage=this.deleteNeerDedlineBookingMessage,e.orderNeerDedlineBookingMessage=this.orderNeerDedlineBookingMessage,e.generalBookingMessage=this.generalBookingMessage,e.closeScheduleOnHolidays=this.closeScheduleOnHolidays,this.customWindowMinute!=30&&(e.customWindowMinute=this.customWindowMinute),this.windowSpaces!=zr.shortestTreatment&&(e.windowSpaces=iu[this.windowSpaces]),this.minutesBeforeBookingToConfirm!=1440&&(e.minutesBeforeBookingToConfirm=this.minutesBeforeBookingToConfirm),e.bookingDaysToDeleteLocal=[],e.notifications=this.notifications.toJson(),e.lastCleanDate=this.lastCleanDate.toString(),e.daysToAllowBookings=this.daysToAllowBookings,this.maxFutureBookings!=4&&(e.maxFutureBookings=this.maxFutureBookings),this.currentClientCount!=0&&(e.currentClientCount=this.currentClientCount),this.allowAppNotification||(e.allowAppNotification=this.allowAppNotification),this.waitingListExceptionDays.entries.length>0&&(e.waitingListExceptionDays=Array.from(this.waitingListExceptionDays)),e.treatmentsSubjects={},Object.entries(this.treatmentsSubjects).forEach(([t,r])=>{e.treatmentsSubjects[t]=r.toJson()}),this.showWaitingListWhenThereIsChoises||(e.showWaitingListWhenThereIsChoises=this.showWaitingListWhenThereIsChoises),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.profileImg=this.profileImg,e.about=this.about,e.name=name,e.phone=this.phone,e.id=this.id,e.storyImages={},Object.entries(this.storyImages).forEach(([t,r])=>{e.storyImages[t]=r}),e.createdAt=this.createdAt.toString(),e}toString(){return JSON.stringify(this.toWorkerDocJson())+this.workerPublicData.toWorkerPublicDataJson().toString()}}class qm{_db;constructor(){Wn().length===0?Hn(zn):hi(),this._db=rc()}async getChild({childPath:e}){try{const t=mt(this._db,`${re}/${e}`);return await ic(t)}catch(t){throw t}}async updateChild({childPath:e,data:t}){try{const r=mt(this._db,`${re}/${e}`);return await ki(r,t),!0}catch{return!1}}async removeChild({childPath:e}){try{const t=mt(this._db,`${re}/${e}`);return await nc(t),!0}catch{return!1}}async incrementNumberChild({childPath:e,valueId:t,delta:r,command:n}){try{n===wo.decrement&&(r=-r);const s={[t]:_s(r)},a=mt(this._db,`${re}/${e}`);return await ki(a,s),!0}catch{return!1}}async incrementMultipleNumberChild({childPath:e,data:t}){try{const r={};for(const[s,a]of Object.entries(t))r[s]=_s(a);const n=mt(this._db,`${re}/${e}`);return await ki(n,r),!0}catch{return!1}}listenToChild({childPath:e,callback:t}){const r=mt(this._db,`${re}/${e}`);return sc(r,t)}async setChild({childPath:e,data:t}){try{const r=mt(this._db,`${re}/${e}`);return await ac(r,t),!0}catch{return!1}}}class Gm extends qm{_firestore;constructor(){Wn().length===0?Hn(zn):hi(),super(),this._firestore=oc()}get getBatch(){return cc(this._firestore)}async getDocSRV({path:e,docId:t,insideEnviroments:r=!0}){try{const n=fe(this._firestore,r?`${re}/${e}`:e),s=ge(n,t);return await uc(s)}catch(n){throw n instanceof Error&&(ce.error(n.message),q.GI().addError({error:U.serverError,details:n.message})),n}}async getAllDocsInsideCollection(e){try{const t=fe(this._firestore,`${re}/${e}`);return(await Ms(t)).docs.map(n=>n.data())}catch(t){if(t instanceof Error)throw q.GI().addError({error:U.serverError,details:t.toString()}),t;return[]}}async commmitBatch(e){try{return await e.commit(),!0}catch(t){throw ce.error("Error while commit batch -->",t),t instanceof Error&&q.GI().addError({error:U.serverError,details:t.toString()}),new Error(`Server Error: ${t}`)}}async runTransaction(e){try{return await hc(this._firestore,async r=>await e(r))}catch(t){throw console.error("Error while run transaction -->",t),t instanceof Error&&q.GI().addError({error:U.serverError,details:t.toString()}),new Error(`Server Error: ${t}`)}}async transactionGet(e,t,r){try{const n=fe(this._firestore,`${re}/${t}`),s=ge(n,r);return await e.get(s)}catch(n){throw console.error("Error while getting document in transaction -->",n),n instanceof Error&&q.GI().addError({error:U.serverError,details:n.toString()}),new Error(`Server Error: ${n}`)}}async transactionUpdateAsMap({transaction:e,path:t,docId:r,fieldName:n,value:s}){try{const a=fe(this._firestore,`${re}/${t}`),c=ge(a,r),o={[n]:s||Ii()};e.update(c,o)}catch(a){throw ce.error("Error while updating document in transaction -->",a),a instanceof Error&&q.GI().addError({error:U.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}async setAsMap({batch:e,path:t,docId:r,data:n,insideEnviroments:s=!0}){try{const a=fe(this._firestore,s?`${re}/${t}`:t),c=ge(a,r);e.set(c,n,{merge:!0})}catch(a){throw a instanceof Error&&q.GI().addError({error:U.serverError,details:a.toString()}),a}}async getAllDocsAndIdsInsideCollection({path:e}){try{const t=fe(this._firestore,`$envKey/${e}`),r=await Ms(t),n={};return r.docs.forEach(s=>{n[s.id]=s.data()}),n}catch(t){throw t instanceof Error&&q.GI().addError({error:U.serverError,details:t.toString()}),t}}async transactionUpdateMultipleFieldsAsMap({transaction:e,path:t,docId:r,data:n,insideEnvironments:s=!0}){try{const a=fe(this._firestore,s?`${re}/${t}`:t),c=ge(a,r),o=this.organizeData(n);e.update(c,o)}catch(a){throw console.error("Error while updating multiple fields in transaction -->",a),a instanceof Error&&q.GI().addError({error:U.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}async transactionCreateDoc({transaction:e,path:t,docId:r,value:n}){try{const s=fe(this._firestore,`${re}/${t}`),a=ge(s,r);e.set(a,n)}catch(s){throw ce.error("Error while creating document in transaction -->",s),s instanceof Error&&q.GI().addError({error:U.serverError,details:s.toString()}),new Error(`Server Error: ${s}`)}}async transactionSetAsMap({transaction:e,path:t,docId:r,data:n}){try{const s=fe(this._firestore,`${re}/${t}`),a=ge(s,r),c=this.organizeData(n);e.set(a,c,{merge:!0})}catch(s){throw ce.error("Error while setting document as map in transaction -->",s),s instanceof Error&&q.GI().addError({error:U.serverError,details:s.toString()}),new Error(`Server Error: ${s}`)}}async deleteDoc({batch:e,path:t,docId:r}){try{const n=fe(this._firestore,`${re}/${t}`),s=ge(n,r);e.delete(s)}catch(n){throw n instanceof Error&&q.GI().addError({error:U.serverError,details:n.toString()}),n}}async setDoc({batch:e,path:t,docId:r,valueToSet:n,insideEnviroments:s=!0}){try{const a=fe(this._firestore,s?`${re}/${t}`:t),c=ge(a,r);e.set(c,n)}catch(a){throw a instanceof Error&&q.GI().addError({error:U.serverError,details:a.toString()}),a}}async createDoc({batch:e,path:t,docId:r,valueAsJson:n,insideEnviroments:s=!0,mergeIfExist:a=!1}){try{const c=a?{merge:!0}:null,o=fe(this._firestore,s?`${re}/${t}`:t),u=ge(o,r);e.set(u,n,{merge:a})}catch(c){throw c instanceof Error&&q.GI().addError({error:U.serverError,details:c.toString()}),c}}async updateFieldInsideDocAsMap({batch:e,path:t,docId:r,value:n,fieldName:s,command:a,insideEnviroments:c=!0}){try{const o=fe(this._firestore,c?`${re}/${t}`:t),u=ge(o,r);a===null?e.update(u,{[s]:n??Ii()}):e.update(u,{[s]:a===1?Or(1):Or(-1)})}catch(o){throw o instanceof Error&&q.GI().addError({error:U.serverError,details:o.toString()}),o}}async updateMultipleFieldsInsideDocAsMap({batch:e,path:t,docId:r,data:n,insideEnviroments:s=!0}){try{const a=fe(this._firestore,s?`${re}/${t}`:t),c=ge(a,r);e.update(c,this.organizeData(n))}catch(a){throw ce.error("Error while updating the batch -->",a),a instanceof Error&&q.GI().addError({error:U.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}updateFieldInsideDocAsArray({batch:e,path:t,docId:r,fieldName:n,value:s,command:a=Pn.add}){try{const c=fe(this._firestore,`${re}/${t}`),o=ge(c,r);e.update(o,{[n]:a===Pn.remove?lc([s]):dc([s])})}catch(c){throw c instanceof Error&&q.GI().addError({error:U.serverError,details:c.toString()}),new Error(`Server Error: ${c}`)}}docListener({path:e,docId:t,onChanged:r}){try{const n=fe(this._firestore,`${re}/${e}`),s=ge(n,t);return fc(s,r)}catch(n){throw n instanceof Error&&q.GI().addError({error:U.serverError,details:n.message}),n}}organizeData(e){var t={};return Object.entries(e).forEach(([r,n])=>{let s=n;s===null&&(s=Ii()),s===1&&(s=Or(1)),s===0&&(s=Or(-1)),t[r]=s}),t}get currentTimestamp(){return ht.now()}}class Ym extends Gm{constructor(){super()}async getDocRepo({path:e,docId:t,insideEnviroments:r=!0}){return await super.getDocSRV({path:e,docId:t,insideEnviroments:r})}async createDocRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:n=!0,mergeIfExist:s=!1}){const a=this.getBatch;return super.createDoc({batch:a,path:e,docId:t,valueAsJson:r,insideEnviroments:n,mergeIfExist:s}),await this.commmitBatch(a)}async updateFieldInsideDocAsArrayRepo({path:e,docId:t,fieldName:r,value:n,command:s}){const a=this.getBatch;return super.updateFieldInsideDocAsArray({batch:a,path:e,docId:t,fieldName:r,value:n,command:s}),await this.commmitBatch(a)}async updateFieldInsideDocAsMapRepo({path:e,docId:t,fieldName:r,value:n,insideEnviroments:s=!0,command:a=null}){const c=this.getBatch;return this.updateFieldInsideDocAsMap({batch:c,path:e,docId:t,fieldName:r,value:n,command:a,insideEnviroments:s}),await this.commmitBatch(c)}async updateMultipleFieldsInsideDocAsMapRepo({path:e,docId:t,data:r,insideEnviroments:n=!0}){const s=this.getBatch;return super.updateMultipleFieldsInsideDocAsMap({batch:s,path:e,docId:t,data:r,insideEnviroments:n}),await this.commmitBatch(s)}async deleteDocRepo({path:e,docId:t}){const r=this.getBatch;return super.deleteDoc({batch:r,path:e,docId:t}),await this.commmitBatch(r)}async setDocRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:n=!0}){const s=this.getBatch;return super.setDoc({batch:s,path:e,docId:t,valueToSet:r,insideEnviroments:n}),await this.commmitBatch(s)}async setAsMapWithMergeRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:n=!0}){const s=this.getBatch;return super.setAsMap({batch:s,path:e,docId:t,data:r,insideEnviroments:n}),await this.commmitBatch(s)}docListenerRepo({path:e,docId:t,onChanged:r}){return super.docListener({path:e,docId:t,onChanged:r})}async getWorkerFromTransactionRepo({transaction:e,workerId:t,businessModel:r,needMultiDoc:n=!1}){const s=`${Ve}/${Ct.currentBusinesssId}/${Ot}`,a=await this.transactionGet(e,s,t);if(!a.exists())return;const c=Cr.fromWorkerDocJson(a.data());return await super.transactionGet(e,`${s}/${t}/${Ft}`,Wr).then(o=>{o.exists()&&c.workerPublicData.setWorkerPublicData(o.data())}),c.hasRecurrenceEvents&&c.isCustomersNeedRecurrence&&await super.transactionGet(e,`${s}/${t}/${Ft}`,Uc).then(o=>{o.exists()&&o.data()!=null&&c.recurrence.setRecurrenceEvents(o.data(),t,r??At.empty())}),n&&await super.transactionGet(e,`${s}/${t}/${Ft}`,Hc).then(o=>{o.exists()&&c.multiEventsTimes.setData(o.data())}),c}toFormatedCustomerData({customerData:e,amountOfBookingsCommand:t,useUserFirstBookingsDate:r=!1,saveExtraData:n=!1}){const s=e.toJson();s.amoutOfBookings=t;const a={};return a[`data.${e.customerUuid}.amoutOfBookings`]=s.amoutOfBookings,s.lastBookingsDate!=null&&(a[`data.${e.customerUuid}.lastBookingsDate`]=s.lastBookingsDate),r?s.userFirstBookingsDate!=null&&(a[`data.${e.customerUuid}.userFirstBookingsDate`]=s.userFirstBookingsDate):s.firstBookingsDate!=null&&(a[`data.${e.customerUuid}.firstBookingsDate`]=s.firstBookingsDate),n&&(s.gender!=null&&(a[`data.${e.customerUuid}.gender`]=s.gender),s.name!=null&&(a[`data.${e.customerUuid}.name`]=s.name),s.workerNaming!=null&&(a[`data.${e.customerUuid}.name`]=s.workerNaming),s.email!=null&&(a[`data.${e.customerUuid}.email`]=s.email),s.id!=null&&(a[`data.${e.customerUuid}.id`]=s.id)),a}async realTimeEventsCounterHandler({businessId:e,workerId:t,types:r,increment:n}){if(r.size===0)return!0;const s=vr.GI().getWorkerCountersPath(e,t),a={};return r.forEach((c,o)=>{Ws[o]!==null&&c!==0&&(a[Ws[o]]=(n?1:-1)*c)}),Object.keys(a).length===0?!0:await this.incrementMultipleNumberChild({childPath:s,data:a})}}class ui{static _singleton=new ui;constructor(){}static GI(){return ui._singleton}defaultTheme="darkIos";currentKeyTheme=null;themeCauseMainBuilt=!1;currentThemes={...yo};currentBusinessTheme=null;async changeTheme(e,{needOverlayHandling:t=!0,ovveride:r=!1,needWaitOverlay:n=!1}={}){const s=this.currentThemes[e];if(s==null||this.currentBusinessTheme==null||!s.isEqual(this.currentBusinessTheme)||r){switch(this.currentThemes[e]?.brightness){case Bn.light:Ae.GI().businessIcon="darkShopIcon";break;case Bn.dark:Ae.GI().businessIcon="lightShopIcon";break;default:Ae.GI().businessIcon="lightShopIcon";break}return this.themeCauseMainBuilt=!0,this.currentKeyTheme=e,this.currentThemes.hasOwnProperty(e)&&(this.currentBusinessTheme=this.currentThemes[e]),!0}return!1}}function Jm(i,e){const t=e.split("--")[0];return Ct.developers.hasOwnProperty(t)&&(i=Ct.developers[t].businessProductId),i.includes("basic")?xt.basic:i.includes("landing")?xt.landingPage:i.includes("advanced")?xt.advanced:i.includes("golden")?xt.golden:xt.trial}class Ae{static instance;constructor(){}static GI(){return Ae.instance||(Ae.instance=new Ae),Ae.instance}generalRepo=new Ym;business=new At({businessId:"",design:new Ye});workers={};businessIcon="";businessSubtype=xt.trial;async initSettings(e,{fromLoading:t=!1}={}){try{this.workers={},Ct.currentBusinesssId=e,console.log("222222222222223333333333333");const r=await Promise.all([this._loadSettingsDoc(e),this._loadBusinessWorkers(e)]);return console.log("22222222222222222"),this.businessSubtype=Jm(this.business.productId,e),r.length>0&&r[0]===!1?!1:(this.makeBusinessDataListener(),!0)}catch(r){return ce.error(`Error while initializing settings --> ${r}`),!1}}async loadBusiness(e,t,{fromLoading:r=!1,fromSearch:n=!1}={}){console.log("1111111111111111111");try{const s=await this.initSettings(e,{fromLoading:r});return console.log("33333333333333333322222222222222222"),ui.GI().themeCauseMainBuilt,!0}catch{return!1}}async _loadSettingsDoc(e){try{console.log("eeeeeeedddddddddddddd");const t=await this.generalRepo.getDocRepo({path:Ve,docId:e});return t===void 0||!t.exists||t.data()===null?(q.GI().error=U.notFoundBusiness,!1):(this.business=At.fromJson(t.data(),e),!0)}catch{return!1}}async _loadBusinessWorkers(e){try{const t=`${Ve}/${e}/${Ot}`;console.log("eewwwwwwwww");const r=await this.generalRepo.getAllDocsInsideCollection(t);return r!==null&&r.forEach(n=>{const s=Cr.fromWorkerDocJson(n);Oe.GI().getPermission>1||(s.id,Oe.GI().user.id),this.workers[s.id]=s}),!0}catch(t){return t instanceof Error&&(ce.error(`Error while loading the business workers docs --> ${t}`),ce.error(t.stack)),!0}}async makeBusinessDataListener(){const e=vr.GI().getBusinessDataPath(Ct.currentBusinesssId);this.business.businessData.listener=this.generalRepo.listenToChild({childPath:e,callback:t=>{t.exists()&&(this.business.businessData.setBusinessData(t),console.log(this.business.businessData))}})}}let up=q0();export{y0 as A,Ae as B,S as D,Nc as E,G,Df as L,ui as T,Oe as U,kf as V,cp as a,sp as b,op as c,Le as d,Af as e,Ym as f,ap as g,jm as h,Ss as i,Ft as j,Wr as k,xr as l,Ve as m,Ct as n,tp as o,ep as p,Zm as q,ni as r,rp as s,ip as t,up as u,q as v,np as w,ce as x,zn as y};
