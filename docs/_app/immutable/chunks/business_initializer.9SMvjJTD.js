var jh=Object.defineProperty;var ed=(r,e,t)=>e in r?jh(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var o=(r,e,t)=>(ed(r,typeof e!="symbol"?e+"":e,t),t);import{r as $a,T as pr,g as po,i as go,a as hn,c as td,d as br,e as rd,u as Ln,f as sd,h as Mc,o as id,s as nd,j as ad,w as od,k as Me,l as Ve,m as cd,n as Nc,p as ud,q as Un,t as Ai,v as ld,x as hd,y as dd,z as vu,A as fd,B as md,_ as Oc,C as Bc,D as pd,S as hi,E as He,F as xo,G as gd,L as Du,H as Ze,I as bu,J as xd,K as yd,M as yo,N as wd,O as di,P as vd,Q as Dd,R as bd,b as kd}from"./Business.RoDs-7LR.js";import{g as Id,c as Z,d as ku,$ as Td,a as Ad,_ as wo}from"./runtime.C9OlveJK.js";import{a5 as xt}from"./scheduler.xMnZeRYy.js";import{w as fi}from"./index.5OULvqcs.js";let Fc=fi(null);function sr(r){Fc.set(r),setTimeout(()=>{Fc.set(null)},2e3)}const vo={apiKey:"AIzaSyCSIQHCC23Z7ul639fD8JLMHu4yN77_0VA",authDomain:"managementsystemapp-c1fda.firebaseapp.com",databaseURL:"https://managementsystemapp-c1fda-default-rtdb.europe-west1.firebasedatabase.app",projectId:"managementsystemapp-c1fda",storageBucket:"managementsystemapp-c1fda.appspot.com",messagingSenderId:"670820779934",appId:"1:670820779934:web:fdcf77a952b59c3090788f",measurementId:"G-WP8J044JN9"};var Ed="firebase",Cd="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$a(Ed,Cd,"app");const za={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function Ga(r,e,t,s=!1){const i=String(e),n=(u,l)=>`\x1B[${l[0]}m${u}\x1B[${l[1]}m`,a=(u,l)=>l!=null&&typeof l=="string"?n(u,za[l]):l!=null&&Array.isArray(l)?l.reduce((h,d)=>a(h,d),u):l!=null&&l[u.trim()]!=null?a(u,l[u.trim()]):l!=null&&l["*"]!=null?a(u,l["*"]):u,c=null;return i.replace(/{{(.+?)}}/g,(u,l)=>{var d;const h=t[l]!=null?String(t[l]):s?"":u;return r.stylePrettyLogs?a(h,((d=r==null?void 0:r.prettyLogStyles)==null?void 0:d[l])??c)+n("",za.reset):h})}function tt(r,e=2,t=0){return r!=null&&isNaN(r)?"":(r=r!=null?r+t:r,e===2?r==null?"--":r<10?"0"+r:r.toString():r==null?"---":r<10?"00"+r:r<100?"0"+r:r.toString())}function _d(r){return{href:r.href,protocol:r.protocol,username:r.username,password:r.password,host:r.host,hostname:r.hostname,port:r.port,pathname:r.pathname,search:r.search,searchParams:[...r.searchParams].map(([e,t])=>({key:e,value:t})),hash:r.hash,origin:r.origin}}function Iu(r){const e=new Set;return JSON.stringify(r,(t,s)=>{if(typeof s=="object"&&s!==null){if(e.has(s))return"[Circular]";e.add(s)}return s})}function Oe(r,e){const t={seen:[],stylize:Tu};return e!=null&&_u(t,e),Qr(t.showHidden)&&(t.showHidden=!1),Qr(t.depth)&&(t.depth=2),Qr(t.colors)&&(t.colors=!0),Qr(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=Sd),Yi(t,r,t.depth)}Oe.colors=za;Oe.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Pd(r){return typeof r=="boolean"}function Qr(r){return r===void 0}function Tu(r){return r}function Sd(r,e){var s,i,n,a;const t=Oe.styles[e];return t!=null&&((i=(s=Oe==null?void 0:Oe.colors)==null?void 0:s[t])==null?void 0:i[0])!=null&&((a=(n=Oe==null?void 0:Oe.colors)==null?void 0:n[t])==null?void 0:a[1])!=null?"\x1B["+Oe.colors[t][0]+"m"+r+"\x1B["+Oe.colors[t][1]+"m":r}function Ei(r){return typeof r=="function"}function Au(r){return typeof r=="string"}function Md(r){return typeof r=="number"}function Eu(r){return r===null}function Cu(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Wn(r){return dn(r)&&Do(r)==="[object RegExp]"}function dn(r){return typeof r=="object"&&r!==null}function Hn(r){return dn(r)&&(Do(r)==="[object Error]"||r instanceof Error)}function Rc(r){return dn(r)&&Do(r)==="[object Date]"}function Do(r){return Object.prototype.toString.call(r)}function Nd(r){const e={};return r.forEach(t=>{e[t]=!0}),e}function Od(r,e,t,s,i){const n=[];for(let a=0,c=e.length;a<c;++a)Cu(e,String(a))?n.push(qa(r,e,t,s,String(a),!0)):n.push("");return i.forEach(a=>{a.match(/^\d+$/)||n.push(qa(r,e,t,s,a,!0))}),n}function Yn(r){return"["+Error.prototype.toString.call(r)+"]"}function Yi(r,e,t=0){if(r.customInspect&&e!=null&&Ei(e)&&(e==null?void 0:e.inspect)!==Oe&&!(e!=null&&e.constructor&&(e==null?void 0:e.constructor.prototype)===e)){if(typeof e.inspect!="function"&&e.toString!=null)return e.toString();let h=e==null?void 0:e.inspect(t,r);return Au(h)||(h=Yi(r,h,t)),h}const s=ar(r,e);if(s)return s;let i=Object.keys(e);const n=Nd(i);try{r.showHidden&&Object.getOwnPropertyNames&&(i=Object.getOwnPropertyNames(e))}catch{}if(Hn(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return Yn(e);if(i.length===0)if(Ei(r.stylize)){if(Ei(e)){const h=e.name?": "+e.name:"";return r.stylize("[Function"+h+"]","special")}if(Wn(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Rc(e))return r.stylize(Date.prototype.toISOString.call(e),"date");if(Hn(e))return Yn(e)}else return e;let a="",c=!1,u=[`{
`,`
}`];if(Array.isArray(e)&&(c=!0,u=[`[
`,`
]`]),Ei(e)&&(a=" [Function"+(e.name?": "+e.name:"")+"]"),Wn(e)&&(a=" "+RegExp.prototype.toString.call(e)),Rc(e)&&(a=" "+Date.prototype.toUTCString.call(e)),Hn(e)&&(a=" "+Yn(e)),i.length===0&&(!c||e.length==0))return u[0]+a+u[1];if(t<0)return Wn(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);let l;return c?l=Od(r,e,t,n,i):l=i.map(h=>qa(r,e,t,n,h,c)),r.seen.pop(),Bd(l,a,u)}function qa(r,e,t,s,i,n){let a,c,u={value:void 0};try{u.value=e[i]}catch{}try{Object.getOwnPropertyDescriptor&&(u=Object.getOwnPropertyDescriptor(e,i)||u)}catch{}if(u.get?u.set?c=r.stylize("[Getter/Setter]","special"):c=r.stylize("[Getter]","special"):u.set&&(c=r.stylize("[Setter]","special")),Cu(s,i)||(a="["+i+"]"),c||(r.seen.indexOf(u.value)<0?(Eu(t)?c=Yi(r,u.value,void 0):c=Yi(r,u.value,t-1),c.indexOf(`
`)>-1&&(n?c=c.split(`
`).map(l=>"  "+l).join(`
`).substr(2):c=`
`+c.split(`
`).map(l=>"   "+l).join(`
`))):c=r.stylize("[Circular]","special")),Qr(a)){if(n&&i.match(/^\d+$/))return c;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=r.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,"\\'").replace(/(^"|"$)/g,"'"),a=r.stylize(a,"string"))}return a+": "+c}function ar(r,e){if(Qr(e))return r.stylize("undefined","undefined");if(Au(e)){const t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\\'")+"'";return r.stylize(t,"string")}if(Md(e))return r.stylize(""+e,"number");if(Pd(e))return r.stylize(""+e,"boolean");if(Eu(e))return r.stylize("null","null")}function Bd(r,e,t){return t[0]+(e===""?"":e+`
`)+"  "+r.join(`,
  `)+" "+t[1]}function _u(r,e){if(!e||!dn(e))return r;const t={...r},s={...e},i=Object.keys(e);let n=i.length;for(;n--;)t[i[n]]=s[i[n]];return r}function Fd(r,...e){const t={seen:[],stylize:Tu};r!=null&&_u(t,r);const s=e[0];let i=0,n="",a="";if(typeof s=="string"){if(e.length===1)return s;let c,u=0;for(let l=0;l<s.length-1;l++)if(s.charCodeAt(l)===37){const h=s.charCodeAt(++l);if(i+1!==e.length){switch(h){case 115:{const d=e[++i];typeof d=="number"||typeof d=="bigint"?c=ar(t,d):typeof d!="object"||d===null?c=String(d):c=Oe(d,{...r,compact:3,colors:!1,depth:0});break}case 106:c=Iu(e[++i]);break;case 100:{const d=e[++i];typeof d=="bigint"?c=ar(t,d):typeof d=="symbol"?c="NaN":c=ar(t,d);break}case 79:c=Oe(e[++i],r);break;case 111:c=Oe(e[++i],{...r,showHidden:!0,showProxy:!0,depth:4});break;case 105:{const d=e[++i];typeof d=="bigint"?c=ar(t,d):typeof d=="symbol"?c="NaN":c=ar(t,parseInt(c));break}case 102:{const d=e[++i];typeof d=="symbol"?c="NaN":c=ar(t,parseInt(d));break}case 99:i+=1,c="";break;case 37:n+=s.slice(u,l),u=l+1;continue;default:continue}u!==l-1&&(n+=s.slice(u,l-1)),n+=c,u=l+1}else h===37&&(n+=s.slice(u,l),u=l+1)}u!==0&&(i++,a=" ",u<s.length&&(n+=s.slice(u)))}for(;i<e.length;){const c=e[i];n+=a,n+=typeof c!="string"?Oe(c,r):c,a=" ",i++}return n}const Rd={getCallerStackFrame:Pu,getErrorTrace:Su,getMeta:Wd,transportJSON:Vd,transportFormatted:Yd,isBuffer:$d,isError:Nu,prettyFormatLogObj:Hd,prettyFormatErrorObj:Ou};var wu;const Ld={runtime:[typeof window,typeof document].includes("undefined")?"Generic":"Browser",browser:(wu=globalThis==null?void 0:globalThis.navigator)==null?void 0:wu.userAgent},Ud=/(?:(?:file|https?|global code|[^@]+)@)?(?:file:)?((?:\/[^:/]+){2,})(?::(\d+))?(?::(\d+))?/;function Wd(r,e,t,s,i,n){return Object.assign({},Ld,{name:i,parentNames:n,date:new Date,logLevelId:r,logLevelName:e,path:s?void 0:Pu(t)})}function Pu(r,e=Error()){var t,s,i;return Mu((i=(s=(t=e==null?void 0:e.stack)==null?void 0:t.split(`
`))==null?void 0:s.filter(n=>!n.includes("Error: ")))==null?void 0:i[r])}function Su(r){var e,t,s;return(s=(t=(e=r==null?void 0:r.stack)==null?void 0:e.split(`
`))==null?void 0:t.filter(i=>!i.includes("Error: ")))==null?void 0:s.reduce((i,n)=>(i.push(Mu(n)),i),[])}function Mu(r){var s;const e=(s=globalThis==null?void 0:globalThis.location)==null?void 0:s.origin,t={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(r!=null){const i=r.match(Ud);if(i){t.filePath=i[1].replace(/\?.*$/,""),t.fullFilePath=`${e}${t.filePath}`;const n=t.filePath.split("/");t.fileName=n[n.length-1],t.fileLine=i[2],t.fileColumn=i[3],t.filePathWithLine=`${t.filePath}:${t.fileLine}`,t.fileNameWithLine=`${t.fileName}:${t.fileLine}`}}return t}function Nu(r){return r instanceof Error}function Hd(r,e){return r.reduce((t,s)=>(Nu(s)?t.errors.push(Ou(s,e)):t.args.push(s),t),{args:[],errors:[]})}function Ou(r,e){const t=Su(r).map(i=>Ga(e,e.prettyErrorStackTemplate,{...i},!0)),s={errorName:` ${r.name} `,errorMessage:Object.getOwnPropertyNames(r).reduce((i,n)=>(n!=="stack"&&i.push(r[n]),i),[]).join(", "),errorStack:t.join(`
`)};return Ga(e,e.prettyErrorTemplate,s)}function Yd(r,e,t,s){const i=(t.length>0&&e.length>0?`
`:"")+t.join(`
`);s.prettyInspectOptions.colors=s.stylePrettyLogs,console.log(r+Fd(s.prettyInspectOptions,...e)+i)}function Vd(r){console.log(Iu(r))}function $d(r){return!1}class zd{constructor(e,t,s=4){var i,n,a,c,u,l,h,d;this.logObj=t,this.stackDepthLevel=s,this.runtime=Rd,this.settings={type:(e==null?void 0:e.type)??"pretty",name:e==null?void 0:e.name,parentNames:e==null?void 0:e.parentNames,minLevel:(e==null?void 0:e.minLevel)??0,argumentsArrayName:e==null?void 0:e.argumentsArrayName,hideLogPositionForProduction:(e==null?void 0:e.hideLogPositionForProduction)??!1,prettyLogTemplate:(e==null?void 0:e.prettyLogTemplate)??"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	{{filePathWithLine}}{{nameWithDelimiterPrefix}}	",prettyErrorTemplate:(e==null?void 0:e.prettyErrorTemplate)??`
{{errorName}} {{errorMessage}}
error stack:
{{errorStack}}`,prettyErrorStackTemplate:(e==null?void 0:e.prettyErrorStackTemplate)??`  • {{fileName}}	{{method}}
	{{filePathWithLine}}`,prettyErrorParentNamesSeparator:(e==null?void 0:e.prettyErrorParentNamesSeparator)??":",prettyErrorLoggerNameDelimiter:(e==null?void 0:e.prettyErrorLoggerNameDelimiter)??"	",stylePrettyLogs:(e==null?void 0:e.stylePrettyLogs)??!0,prettyLogTimeZone:(e==null?void 0:e.prettyLogTimeZone)??"UTC",prettyLogStyles:(e==null?void 0:e.prettyLogStyles)??{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:(e==null?void 0:e.prettyInspectOptions)??{colors:!0,compact:!1,depth:1/0},metaProperty:(e==null?void 0:e.metaProperty)??"_meta",maskPlaceholder:(e==null?void 0:e.maskPlaceholder)??"[***]",maskValuesOfKeys:(e==null?void 0:e.maskValuesOfKeys)??["password"],maskValuesOfKeysCaseInsensitive:(e==null?void 0:e.maskValuesOfKeysCaseInsensitive)??!1,maskValuesRegEx:e==null?void 0:e.maskValuesRegEx,prefix:[...(e==null?void 0:e.prefix)??[]],attachedTransports:[...(e==null?void 0:e.attachedTransports)??[]],overwrite:{mask:(i=e==null?void 0:e.overwrite)==null?void 0:i.mask,toLogObj:(n=e==null?void 0:e.overwrite)==null?void 0:n.toLogObj,addMeta:(a=e==null?void 0:e.overwrite)==null?void 0:a.addMeta,addPlaceholders:(c=e==null?void 0:e.overwrite)==null?void 0:c.addPlaceholders,formatMeta:(u=e==null?void 0:e.overwrite)==null?void 0:u.formatMeta,formatLogObj:(l=e==null?void 0:e.overwrite)==null?void 0:l.formatLogObj,transportFormatted:(h=e==null?void 0:e.overwrite)==null?void 0:h.transportFormatted,transportJSON:(d=e==null?void 0:e.overwrite)==null?void 0:d.transportJSON}}}log(e,t,...s){var d,f,p,m,w,y,D,g,x,v,I,T,b,A;if(e<this.settings.minLevel)return;const i=[...this.settings.prefix,...s],n=((d=this.settings.overwrite)==null?void 0:d.mask)!=null?(f=this.settings.overwrite)==null?void 0:f.mask(i):this.settings.maskValuesOfKeys!=null&&this.settings.maskValuesOfKeys.length>0?this._mask(i):i,a=this.logObj!=null?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,c=((p=this.settings.overwrite)==null?void 0:p.toLogObj)!=null?(m=this.settings.overwrite)==null?void 0:m.toLogObj(n,a):this._toLogObj(n,a),u=((w=this.settings.overwrite)==null?void 0:w.addMeta)!=null?(y=this.settings.overwrite)==null?void 0:y.addMeta(c,e,t):this._addMetaToLogObj(c,e,t);let l,h;return((D=this.settings.overwrite)==null?void 0:D.formatMeta)!=null&&(l=(g=this.settings.overwrite)==null?void 0:g.formatMeta(u==null?void 0:u[this.settings.metaProperty])),((x=this.settings.overwrite)==null?void 0:x.formatLogObj)!=null&&(h=(v=this.settings.overwrite)==null?void 0:v.formatLogObj(n,this.settings)),this.settings.type==="pretty"&&(l=l??this._prettyFormatLogObjMeta(u==null?void 0:u[this.settings.metaProperty]),h=h??this.runtime.prettyFormatLogObj(n,this.settings)),l!=null&&h!=null?((I=this.settings.overwrite)==null?void 0:I.transportFormatted)!=null?(T=this.settings.overwrite)==null||T.transportFormatted(l,h.args,h.errors,this.settings):this.runtime.transportFormatted(l,h.args,h.errors,this.settings):((b=this.settings.overwrite)==null?void 0:b.transportJSON)!=null?(A=this.settings.overwrite)==null||A.transportJSON(u):this.settings.type!=="hidden"&&this.runtime.transportJSON(u),this.settings.attachedTransports!=null&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach(C=>{C(u)}),u}attachTransport(e){this.settings.attachedTransports.push(e)}getSubLogger(e,t){var n,a,c;const s={...this.settings,...e,parentNames:((n=this.settings)==null?void 0:n.parentNames)!=null&&((a=this.settings)==null?void 0:a.name)!=null?[...this.settings.parentNames,this.settings.name]:((c=this.settings)==null?void 0:c.name)!=null?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...(e==null?void 0:e.prefix)??[]]};return new this.constructor(s,t??this.logObj,this.stackDepthLevel)}_mask(e){const t=this.settings.maskValuesOfKeysCaseInsensitive!==!0?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map(s=>s.toLowerCase());return e==null?void 0:e.map(s=>this._recursiveCloneAndMaskValuesOfKeys(s,t))}_recursiveCloneAndMaskValuesOfKeys(e,t,s=[]){var i,n;if(s.includes(e))return{...e};if(typeof e=="object"&&e!==null&&s.push(e),this.runtime.isError(e)||this.runtime.isBuffer(e))return e;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Array.isArray(e))return e.map(a=>this._recursiveCloneAndMaskValuesOfKeys(a,t,s));if(e instanceof Date)return new Date(e.getTime());if(e instanceof URL)return _d(e);if(e!==null&&typeof e=="object"){const a=this.runtime.isError(e)?this._cloneError(e):Object.create(Object.getPrototypeOf(e));return Object.getOwnPropertyNames(e).reduce((c,u)=>{var l;return c[u]=t.includes(((l=this.settings)==null?void 0:l.maskValuesOfKeysCaseInsensitive)!==!0?u:u.toLowerCase())?this.settings.maskPlaceholder:this._recursiveCloneAndMaskValuesOfKeys(e[u],t,s),c},a)}else{if(typeof e=="string"){let a=e;for(const c of((i=this.settings)==null?void 0:i.maskValuesRegEx)||[])a=a.replace(c,((n=this.settings)==null?void 0:n.maskPlaceholder)||"");return a}return e}}_recursiveCloneAndExecuteFunctions(e,t=[]){return this.isObjectOrArray(e)&&t.includes(e)?this.shallowCopy(e):(this.isObjectOrArray(e)&&t.push(e),Array.isArray(e)?e.map(s=>this._recursiveCloneAndExecuteFunctions(s,t)):e instanceof Date?new Date(e.getTime()):this.isObject(e)?Object.getOwnPropertyNames(e).reduce((s,i)=>{const n=Object.getOwnPropertyDescriptor(e,i);if(n){Object.defineProperty(s,i,n);const a=e[i];s[i]=typeof a=="function"?a():this._recursiveCloneAndExecuteFunctions(a,t)}return s},Object.create(Object.getPrototypeOf(e))):e)}isObjectOrArray(e){return typeof e=="object"&&e!==null}isObject(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}shallowCopy(e){return Array.isArray(e)?[...e]:{...e}}_toLogObj(e,t={}){return e=e==null?void 0:e.map(s=>this.runtime.isError(s)?this._toErrorObject(s):s),this.settings.argumentsArrayName==null?e.length===1&&!Array.isArray(e[0])&&this.runtime.isBuffer(e[0])!==!0&&!(e[0]instanceof Date)?t=typeof e[0]=="object"&&e[0]!=null?{...e[0],...t}:{0:e[0],...t}:t={...t,...e}:t={...t,[this.settings.argumentsArrayName]:e},t}_cloneError(e){const t=new e.constructor;return Object.getOwnPropertyNames(e).forEach(s=>{t[s]=e[s]}),t}_toErrorObject(e){return{nativeError:e,name:e.name??"Error",message:e.message,stack:this.runtime.getErrorTrace(e)}}_addMetaToLogObj(e,t,s){return{...e,[this.settings.metaProperty]:this.runtime.getMeta(t,s,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(e){var a,c,u,l,h,d,f,p,m,w,y,D,g,x,v,I,T,b,A,C,k,E;if(e==null)return"";let t=this.settings.prettyLogTemplate;const s={};t.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?t=t.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):this.settings.prettyLogTimeZone==="UTC"?(s.yyyy=((a=e==null?void 0:e.date)==null?void 0:a.getUTCFullYear())??"----",s.mm=tt((c=e==null?void 0:e.date)==null?void 0:c.getUTCMonth(),2,1),s.dd=tt((u=e==null?void 0:e.date)==null?void 0:u.getUTCDate(),2),s.hh=tt((l=e==null?void 0:e.date)==null?void 0:l.getUTCHours(),2),s.MM=tt((h=e==null?void 0:e.date)==null?void 0:h.getUTCMinutes(),2),s.ss=tt((d=e==null?void 0:e.date)==null?void 0:d.getUTCSeconds(),2),s.ms=tt((f=e==null?void 0:e.date)==null?void 0:f.getUTCMilliseconds(),3)):(s.yyyy=((p=e==null?void 0:e.date)==null?void 0:p.getFullYear())??"----",s.mm=tt((m=e==null?void 0:e.date)==null?void 0:m.getMonth(),2,1),s.dd=tt((w=e==null?void 0:e.date)==null?void 0:w.getDate(),2),s.hh=tt((y=e==null?void 0:e.date)==null?void 0:y.getHours(),2),s.MM=tt((D=e==null?void 0:e.date)==null?void 0:D.getMinutes(),2),s.ss=tt((g=e==null?void 0:e.date)==null?void 0:g.getSeconds(),2),s.ms=tt((x=e==null?void 0:e.date)==null?void 0:x.getMilliseconds(),3));const i=this.settings.prettyLogTimeZone==="UTC"?e==null?void 0:e.date:new Date(((v=e==null?void 0:e.date)==null?void 0:v.getTime())-((I=e==null?void 0:e.date)==null?void 0:I.getTimezoneOffset())*6e4);s.rawIsoStr=i==null?void 0:i.toISOString(),s.dateIsoStr=i==null?void 0:i.toISOString().replace("T"," ").replace("Z",""),s.logLevelName=e==null?void 0:e.logLevelName,s.fileNameWithLine=((T=e==null?void 0:e.path)==null?void 0:T.fileNameWithLine)??"",s.filePathWithLine=((b=e==null?void 0:e.path)==null?void 0:b.filePathWithLine)??"",s.fullFilePath=((A=e==null?void 0:e.path)==null?void 0:A.fullFilePath)??"";let n=(C=this.settings.parentNames)==null?void 0:C.join(this.settings.prettyErrorParentNamesSeparator);return n=n!=null&&(e==null?void 0:e.name)!=null?n+this.settings.prettyErrorParentNamesSeparator:void 0,s.name=(e==null?void 0:e.name)!=null||n!=null?(n??"")+(e==null?void 0:e.name):"",s.nameWithDelimiterPrefix=s.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+s.name:"",s.nameWithDelimiterSuffix=s.name.length>0?s.name+this.settings.prettyErrorLoggerNameDelimiter:"",((k=this.settings.overwrite)==null?void 0:k.addPlaceholders)!=null&&((E=this.settings.overwrite)==null||E.addPlaceholders(e,s)),Ga(this.settings,t,s)}}class Gd extends zd{constructor(e,t){const s=typeof window<"u"&&typeof document<"u",i=s?window.chrome!==void 0&&window.CSS!==void 0&&window.CSS.supports("color","green"):!1,n=s?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1;e=e||{},e.stylePrettyLogs=e.stylePrettyLogs&&s&&!i?!1:e.stylePrettyLogs,super(e,t,n?4:5)}log(e,t,...s){return super.log(e,t,...s)}silly(...e){return super.log(0,"SILLY",...e)}trace(...e){return super.log(1,"TRACE",...e)}debug(...e){return super.log(2,"DEBUG",...e)}info(...e){return super.log(3,"INFO",...e)}warn(...e){return super.log(4,"WARN",...e)}error(...e){return super.log(5,"ERROR",...e)}fatal(...e){return super.log(6,"FATAL",...e)}getSubLogger(e,t){return super.getSubLogger(e,t)}}const K=new Gd({minLevel:4});var qd=(r=>(r.login="login",r.enter="enter",r))(qd||{});const Pb={login:"login",enter:"enter"},Sb=["+972-504040624","+972-525656377"],Jd=new Date(2024,0,9,20,0),Zd="production",ve=`enviroments/${Zd}`,rt="Users",Qd="BookingsObjects",Kd="Notifications",Mb="Errors",Nb="Helpers",qe="PublicData",ut="Workers",Vn="Invoices",$n="PaymentRequests",Ys="Bookings",gt="Phones",Gr="collections",Ge="Businesses",Xd="PaymentsRequestsPreviews",Ob="Reports",jd="publicCustomersData",Lc="clients",lt="publicData",ef="scheduleNotifications",tf="recurrenceEvents",Bu="recurrenceBookings",rf="multiEventsTimes",Uc="LikesCollection",Wc="BusinessData",sf="Counters",nf="sasimple",af="phone",Hc="^&8@^",Yc="^&9@^";var Ja=(r=>(r[r.add=0]="add",r[r.remove=1]="remove",r))(Ja||{}),Vs=(r=>(r[r.increment=0]="increment",r[r.decrement=1]="decrement",r))(Vs||{}),Ar=(r=>(r[r.basic=0]="basic",r[r.advanced=1]="advanced",r[r.trial=2]="trial",r[r.landingPage=3]="landingPage",r[r.golden=4]="golden",r))(Ar||{}),U;let Y=(U=class{constructor({days:e=0,hours:t=0,minutes:s=0,seconds:i=0,milliseconds:n=0,microseconds:a=0}){o(this,"_duration");o(this,"days",0);o(this,"hours",0);o(this,"minutes",0);o(this,"seconds",0);o(this,"milliseconds",0);o(this,"microseconds",0);this._duration=a+U.microsecondsPerMillisecond*n+U.microsecondsPerSecond*i+U.microsecondsPerMinute*s+U.microsecondsPerHour*t+U.microsecondsPerDay*e}static _microseconds(e){return new U({microseconds:e})}add(e){return U._microseconds(this._duration+e._duration)}subtract(e){return U._microseconds(this._duration-e._duration)}multiply(e){return U._microseconds(Math.round(this._duration*e))}divide(e){if(e===0)throw new Error("IntegerDivisionByZeroException");return U._microseconds(Math.floor(this._duration/e))}lessThan(e){return this._duration<e._duration}greaterThan(e){return this._duration>e._duration}lessThanOrEqual(e){return this._duration<=e._duration}greaterThanOrEqual(e){return this._duration>=e._duration}get inDays(){return Math.floor(this._duration/U.microsecondsPerDay)}get inHours(){return Math.floor(this._duration/U.microsecondsPerHour)}get inMinutes(){return Math.floor(this._duration/U.microsecondsPerMinute)}get inSeconds(){return Math.floor(this._duration/U.microsecondsPerSecond)}get inMilliseconds(){return Math.floor(this._duration/U.microsecondsPerMillisecond)}get inMicroseconds(){return this._duration}equals(e){return e instanceof U&&this._duration===e.inMicroseconds}compareTo(e){return this._duration-e._duration}},o(U,"microsecondsPerMillisecond",1e3),o(U,"millisecondsPerSecond",1e3),o(U,"secondsPerMinute",60),o(U,"minutesPerHour",60),o(U,"hoursPerDay",24),o(U,"microsecondsPerSecond",U.microsecondsPerMillisecond*U.millisecondsPerSecond),o(U,"microsecondsPerMinute",U.microsecondsPerSecond*U.secondsPerMinute),o(U,"microsecondsPerHour",U.microsecondsPerMinute*U.minutesPerHour),o(U,"microsecondsPerDay",U.microsecondsPerHour*U.hoursPerDay),o(U,"millisecondsPerMinute",U.millisecondsPerSecond*U.secondsPerMinute),o(U,"millisecondsPerHour",U.millisecondsPerMinute*U.minutesPerHour),o(U,"millisecondsPerDay",U.millisecondsPerHour*U.hoursPerDay),o(U,"secondsPerHour",U.secondsPerMinute*U.minutesPerHour),o(U,"secondsPerDay",U.secondsPerHour*U.hoursPerDay),o(U,"minutesPerDay",U.minutesPerHour*U.hoursPerDay),o(U,"zero",new U({seconds:0})),U);var Be=(r=>(r.waiting="waiting",r.approved="approved",r))(Be||{});const Fu={waiting:"waiting",approved:"approved"},Ru={waiting:"waiting",approved:"approved"};var st=(r=>(r.app="app",r.web="web",r.byWorker="byWorker",r))(st||{});const Lu={app:"app",web:"web",byWorker:"byWorker"},Uu={app:"app",web:"web",byWorker:"byWorker"};var Ue=(r=>(r.regular="regular",r.confirmArrival="confirmArrival",r))(Ue||{});const Mi={regular:"regular",confirmArrival:"confirmArrival"},Pr={regular:"regular",confirmArrival:"confirmArrival"};var z=(r=>(r[r.message=0]="message",r[r.push=1]="push",r[r.none=2]="none",r[r.whatsapp=3]="whatsapp",r))(z||{});const of={0:"message",1:"push",2:"none",3:"whatsapp"},Wu={message:0,push:1,whatsapp:3,none:2},Vc=new Y({hours:3});new Y({minutes:5});var G=(r=>(r[r.sendSms=0]="sendSms",r[r.updateDisplayName=1]="updateDisplayName",r[r.logout=2]="logout",r[r.serverError=3]="serverError",r[r.storageError=4]="storageError",r[r.listener=5]="listener",r[r.notLogedIn=6]="notLogedIn",r[r.illegalFields=7]="illegalFields",r[r.passedLimit=8]="passedLimit",r[r.notFoundItem=9]="notFoundItem",r[r.takenBooking=10]="takenBooking",r[r.overlapWithOntherItem=11]="overlapWithOntherItem",r[r.takenMultiBooking=12]="takenMultiBooking",r[r.alreadyWorker=13]="alreadyWorker",r[r.userNotFound=14]="userNotFound",r[r.verification=15]="verification",r[r.network=16]="network",r[r.emptyField=17]="emptyField",r[r.alreadyExistItem=18]="alreadyExistItem",r[r.uploadImages=19]="uploadImages",r[r.notSelectedImages=20]="notSelectedImages",r[r.wrongOptCode=21]="wrongOptCode",r[r.expiredOpt=22]="expiredOpt",r[r.unknown=23]="unknown",r[r.timeout=24]="timeout",r[r.purchaseError=25]="purchaseError",r[r.anonymouslySignIn=26]="anonymouslySignIn",r[r.lowSubType=27]="lowSubType",r[r.coincidingEvent=28]="coincidingEvent",r[r.coincidingHoliday=29]="coincidingHoliday",r[r.realTimeServerError=30]="realTimeServerError",r[r.blockedUser=31]="blockedUser",r[r.noPermission=32]="noPermission",r[r.paymentProblem=33]="paymentProblem",r[r.currentlyOrderingForTime=34]="currentlyOrderingForTime",r[r.notFoundBusiness=35]="notFoundBusiness",r[r.savePaymentDataError=36]="savePaymentDataError",r[r.redeemDepositError=37]="redeemDepositError",r[r.saveDepositDataError=38]="saveDepositDataError",r[r.endOfWork=39]="endOfWork",r[r.invoiceCreation=40]="invoiceCreation",r[r.cantBookRecurrenceOnDates=41]="cantBookRecurrenceOnDates",r[r.cantBookRecurrenceOnEndlessDates=42]="cantBookRecurrenceOnEndlessDates",r[r.eventHasNoAccurances=43]="eventHasNoAccurances",r[r.workerDeleteTheBookingMeanwhile=44]="workerDeleteTheBookingMeanwhile",r[r.workerUpdatedTheBookingMeanwhile=45]="workerUpdatedTheBookingMeanwhile",r[r.workerDeleteEventMeanwhile=46]="workerDeleteEventMeanwhile",r[r.workerUpdatedTheBookingWhilePayment=47]="workerUpdatedTheBookingWhilePayment",r[r.blockCard=48]="blockCard",r[r.stolenCard=49]="stolenCard",r[r.callCreditCompany=50]="callCreditCompany",r[r.transactionNotConfirmed=51]="transactionNotConfirmed",r[r.fakeCard=52]="fakeCard",r[r.wrongCVV=53]="wrongCVV",r[r.worngCAVVUCAF=54]="worngCAVVUCAF",r[r.worngAvs=55]="worngAvs",r[r.networkDisconnect=56]="networkDisconnect",r[r.partlyConfirm=57]="partlyConfirm",r[r.lackOfPointsStarsMilesOtherBenefit=58]="lackOfPointsStarsMilesOtherBenefit",r[r.unauthorizedCardAtTheTerminal=59]="unauthorizedCardAtTheTerminal",r[r.invalidBalanceCode=60]="invalidBalanceCode",r[r.cardNotAssociatedWithTheNetwork=61]="cardNotAssociatedWithTheNetwork",r[r.cardIsNotValid=62]="cardIsNotValid",r[r.currencyTypeIsNotAllowed=63]="currencyTypeIsNotAllowed",r[r.thereIsNoAuthorizationForACreditTypeInTheTransaction=64]="thereIsNoAuthorizationForACreditTypeInTheTransaction",r[r.invalidId=65]="invalidId",r[r.noTreatment=66]="noTreatment",r[r.terminalNotAuthorizedToWorkWithThisMethodTheTerminalIsNotAuthorized=67]="terminalNotAuthorizedToWorkWithThisMethodTheTerminalIsNotAuthorized",r[r.authenticationErrorTerminalReference=68]="authenticationErrorTerminalReference",r[r.exceedingTheNumberOfPayments=69]="exceedingTheNumberOfPayments",r[r.communicationError=70]="communicationError",r[r.canceledTransaction=71]="canceledTransaction",r[r.invalidToken=72]="invalidToken",r[r.terminalNotAuthorizedToUseTheToken=73]="terminalNotAuthorizedToUseTheToken",r[r.deferredCharge=74]="deferredCharge",r[r.approvalWithoutCharge=75]="approvalWithoutCharge",r[r.receivingTransactionDetails=76]="receivingTransactionDetails",r[r.theCardDetailsWereNotReadInFull=77]="theCardDetailsWereNotReadInFull",r[r.theAmountOfTheItemsDoesNotMatch=78]="theAmountOfTheItemsDoesNotMatch",r[r.YouMustEnterAFirstOrLastName=79]="YouMustEnterAFirstOrLastName",r[r.transactionDescriptionMustBeEntered=80]="transactionDescriptionMustBeEntered",r[r.youCanCreditTheEntireTransactionOrASmallAmount=81]="youCanCreditTheEntireTransactionOrASmallAmount",r[r.bigDiffrentBetweenLoginAndDelete=82]="bigDiffrentBetweenLoginAndDelete",r[r.providerNotAllowed=83]="providerNotAllowed",r[r.userDisable=84]="userDisable",r[r.providerAlreadyLinked=85]="providerAlreadyLinked",r[r.credentialAlreadyInUse=86]="credentialAlreadyInUse",r[r.accountAlreadyExists=87]="accountAlreadyExists",r[r.invalidCredential=88]="invalidCredential",r[r.userMissmatch=89]="userMissmatch",r[r.noSuchProvider=90]="noSuchProvider",r[r.duplicateBusinesssName=91]="duplicateBusinesssName",r[r.alreadyExistPhone=92]="alreadyExistPhone",r[r.userExitManually=93]="userExitManually",r[r.tooManyAttempts=94]="tooManyAttempts",r[r.expiredCode=95]="expiredCode",r[r.cantUpdateEmailTooShortTimeBetween=96]="cantUpdateEmailTooShortTimeBetween",r[r.cantUpdatePhonelTooShortTimeBetween=97]="cantUpdatePhonelTooShortTimeBetween",r[r.invalidPhoneNumber=98]="invalidPhoneNumber",r))(G||{});const ln=class ln{constructor(){o(this,"errorCode",100);o(this,"error",G.unknown);o(this,"details","")}static GI(){return this._singleton}addError({code:e,error:t,details:s}){this.error=t||this.error,this.errorCode=e||this.errorCode,this.details=s||this.details}};o(ln,"_singleton",new ln);let re=ln;class Rt{constructor({code:e="",name:t="",symbol:s=""}={}){o(this,"code","");o(this,"name","");o(this,"symbol","");this.code=e,this.name=t,this.symbol=s}static fromJson(e){return new Rt({code:e.code||"",name:e.name||"",symbol:e.symbol||""})}toJson(){return{code:this.code,name:this.name,symbol:this.symbol}}isEqual(e){return e.code===this.code}toString(){return JSON.stringify(this.toJson(),null,2)}}const gr=new Rt({code:"USD",name:"US Dollar",symbol:"$"}),$c={ILS:new Rt({code:"ILS",name:"Israel Shekel",symbol:"₪"}),USD:new Rt({code:"USD",name:"United States Dollar",symbol:"$"}),EUR:new Rt({code:"EUR",name:"Euro",symbol:"€"}),GBP:new Rt({code:"GBP",name:"British Pound",symbol:"£"})},Ni=5,cf="https://icom.yaad.net/cgi-bin/yaadpay/yaadpay3ds.pl?Masof=MASOFNUMBER&action=PrintHesh&asm=INVOICENUMBER&type=PDF&signature=SIGNATURE";class We{}o(We,"currentBusinesssId",""),o(We,"hasPaddingFromTop",!1),o(We,"paddingFromTop",0),o(We,"attemptsLeftForCardPassword",Ni),o(We,"productionVersion",!0),o(We,"developers",{});const Qs=class Qs{constructor(){}static GI(){return Qs._singleton}getLisksChildPath(e){const t=`${Ge}/${We.currentBusinesssId}/${ut}`,s=`${e}/${Uc}`;return`${t}/${s}`}getImageStorageName(e,t){const s=e.toUpperCase(),i=t.split(s);return`${s}${i[1].split(".jpg")[0]}`}getLikesChildPath(e,t,s){const i=`${Ge}/${t}/${ut}`,n=`${e}/${Uc}`;return`${i}/${n}/${s}`}getBusinessDataPath(e){return`${Ge}/${e}/${Wc}`}getWorkerCountersPath(e,t){return`${Ge}/${e}/${ut}/${t}/${sf}`}getMessageCounterPath(e){return`${Ge}/${e}/${Wc}/messagesCounter`}userBookingsPathByBooking(e){return`${rt}/${e.customerId}/${qe}/${lt}/${Ys}`}userBookingsPathByUser(e){return`${rt}/${e}/${qe}/${lt}/${Ys}`}workerBookingsPath(e){return`${Ge}/${e.buisnessId}/${ut}/${e.workerId}/${qe}/${lt}/${Qd}`}};o(Qs,"_singleton",new Qs);let js=Qs;const zc="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%2020010904//EN'%20'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd'%3e%3csvg%20version='1.0'%20xmlns='http://www.w3.org/2000/svg'%20width='128.000000pt'%20height='128.000000pt'%20viewBox='0%200%20128.000000%20128.000000'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cg%20transform='translate(0.000000,128.000000)%20scale(0.100000,-0.100000)'%20fill='%23000000'%20stroke='none'%3e%3cpath%20d='M499%20922%20c-34%20-17%20-65%20-44%20-84%20-71%20-28%20-39%20-30%20-50%20-33%20-142%20-3%20-70%200%20-99%208%20-99%206%200%2017%20-14%2024%20-32%2013%20-30%2014%20-28%2021%2062%207%2086%2010%2095%2037%20120%2016%2015%2047%2033%2069%2039%2039%2012%2041%2011%2079%20-23%2045%20-41%2077%20-59%2089%20-51%205%203%2019%20-7%2030%20-21%2017%20-22%2021%20-23%2021%20-9%200%2017%201%2017%2021%20-1%2029%20-26%2037%20-44%2045%20-100%207%20-54%2014%20-71%2014%20-34%200%2013%208%2032%2018%2043%2012%2014%2016%2034%2015%2074%20-4%20119%20-56%20200%20-143%20223%20-22%206%20-40%2014%20-40%2019%200%2014%20-50%2031%20-94%2031%20-28%200%20-63%20-10%20-97%20-28z'/%3e%3cpath%20d='M478%20199%20c-10%20-5%20-51%20-16%20-91%20-24%20-82%20-16%20-127%20-31%20-127%20-43%200%20-13%20101%20-71%20161%20-91%2060%20-22%20187%20-46%20195%20-38%203%202%20-16%2050%20-42%20106%20-48%20102%20-58%20112%20-96%2090z'/%3e%3cpath%20d='M706%20162%20c-14%20-28%20-37%20-76%20-51%20-108%20l-25%20-57%2065%207%20c87%209%20208%2048%20270%2087%2047%2030%2048%2032%2030%2045%20-11%208%20-35%2018%20-55%2023%20-19%205%20-66%2017%20-105%2026%20-38%209%20-78%2019%20-87%2022%20-12%204%20-23%20-8%20-42%20-45z'/%3e%3c/g%3e%3c/svg%3e",uf="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%2020010904//EN'%20'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd'%3e%3csvg%20version='1.0'%20xmlns='http://www.w3.org/2000/svg'%20width='128.000000pt'%20height='128.000000pt'%20viewBox='0%200%20128.000000%20128.000000'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cg%20transform='translate(0.000000,128.000000)%20scale(0.100000,-0.100000)'%20fill='%23000000'%20stroke='none'%3e%3cpath%20d='M574%201186%20c-23%20-7%20-52%20-21%20-65%20-30%20-13%20-9%20-33%20-16%20-45%20-16%20-40%200%20-100%20-55%20-133%20-122%20-51%20-104%20-64%20-186%20-65%20-423%20-1%20-170%203%20-222%2017%20-273%209%20-35%2017%20-65%2017%20-67%200%20-3%20-17%20-9%20-38%20-15%20-22%20-5%20-46%20-18%20-56%20-29%20-16%20-18%20-15%20-20%2030%20-60%2095%20-84%20275%20-151%20404%20-151%20125%200%20309%2067%20395%20144%20l40%2036%20-30%2025%20c-16%2014%20-49%2030%20-73%2037%20l-43%2011%208%2056%20c4%2031%208%20148%207%20261%20-1%20218%20-15%20329%20-56%20437%20-51%20138%20-193%20219%20-314%20179z%20m-30%20-230%20c61%20-46%20113%20-73%20196%20-101%2076%20-26%2075%20-24%2086%20-202%20l7%20-112%20-47%20-47%20c-41%20-43%20-46%20-52%20-46%20-93%200%20-70%208%20-88%2043%20-98%2065%20-18%2040%20-65%20-106%20-203%20l-58%20-54%20-96%2097%20c-53%2053%20-98%2097%20-100%2097%20-8%200%20-33%2029%20-33%2038%200%205%2024%2015%2053%2023%20l52%2014%203%2068%203%2068%20-46%2051%20c-26%2029%20-53%2065%20-61%2080%20-21%2040%20-20%20235%201%20306%2018%2059%2071%20128%2089%20114%206%20-5%2033%20-26%2060%20-46z'/%3e%3c/g%3e%3c/svg%3e";var te=(r=>(r[r.male=0]="male",r[r.female=1]="female",r[r.anonymous=2]="anonymous",r))(te||{});const Gc={"אתה בטוח":"את בטוחה","אתה יכול":"את יכולה","דרג ":"דרגי ","אתה ":"את ","בטוח ":"בטוחה ","בטוח?":"בטוחה?",הפעל:"הפעלי",צא:"צאי"," צור":" צרי","בחר ":"בחרי ",תחויב:"תחויבי",אשר:"אשרי",לקוח:"לקוחה","סמן ":"סמני ","הכנס ":"הכניסי ",הזמן:"הזמיני",נווט:"נווטי","הוסף ":"הוסיפי ","הזמן ":"הזמיני ",רשום:"רשומה",מסתכן:"מסתכנת","הזמיני שהזנת":"הזמן שהזנת",שתרצה:"שתרצי",שלם:"שלמי",לשלמי:"לשלם","תרצה ":"תרצי ",עדכן:"עדכני","שלם הכל":"שלמי הכל",הפקד:"הפקדי",בטל:"בטלי","לחץ ":"לחצי ",השאר:"השאירי","שים לב":"שימי לב","הזן ":"הזיני ",בוא:"בואי","הקלד ":"הקלדי ","שבהן את עובד":"שבהן את עובדת","כאן תוכל להוסיף":"כאן תוכלי להוסיף","במסך זה תוכל":"במסך זה תוכלי","עדיין מתלבט":"עדיין מתלבטת",ותוכל:"ותוכלי",סיים:"סיימי",המשך:"המשיכי","ברוך הבא":"ברוכה הבאה","נסה ":"נסי ",הוצאית:"הוצאת","תהיה ":"תהיי ",התקשר:"התקשרי",תוסר:"תוסרי","תוכל ":"תוכלי ","את משתמש":"את משתמשת",לקוחהות:"לקוחות",צרית:"צורת","מחק את":"מחקי את",מאבד:"מאבדת",אמת:"אמתי",מותאמת:"מתואמת",לאמתי:"לאמת",דלג:"דלגי",לבטלי:"לבטל",כאשרי:"כאשר",סרב:"סרבי",לסרבי:"לסרב",לנווטי:"לנווט",תקבל:"תקבלי",אשריאי:"אשראי"},hs={0:"male",1:"female",2:"anonymous"},Bb={0:zc,1:uf,2:zc},Jt={male:0,female:1,anonymous:2},Fb=[0,1,2];var me=(r=>(r[r.SMS=0]="SMS",r[r.SMSOrPush=1]="SMSOrPush",r[r.WhatsAppOrPush=2]="WhatsAppOrPush",r[r.WhatsApp=3]="WhatsApp",r[r.SMSOnly=4]="SMSOnly",r[r.WhatAppOnly=5]="WhatAppOnly",r[r.Push=6]="Push",r[r.PushOrWhatsApp=7]="PushOrWhatsApp",r[r.PushOrSMS=8]="PushOrSMS",r[r.OnlyPush=9]="OnlyPush",r))(me||{});const lf={0:"SMS",4:"SMSOnly",5:"WhatAppOnly",1:"SMSOrPush",2:"WhatsAppOrPush",3:"WhatsApp",9:"OnlyPush",7:"PushOrWhatsApp",8:"PushOrSMS",6:"Push"},fn={SMS:0,SMSOrPush:1,WhatAppOnly:5,SMSOnly:4,WhatsAppOrPush:2,WhatsApp:3,OnlyPush:9,PushOrWhatsApp:7,PushOrSMS:8,Push:6},hf=/^[a-zA-Z0-9-_.~%]{1,900}$/;var Za=(r=>(r[r.muslim=0]="muslim",r[r.christian=1]="christian",r[r.jewish=2]="jewish",r))(Za||{});const df={0:"muslim",1:"christian",2:"jewish"},ff={muslim:0,christian:1,jewish:2},qc={1:{"01-01-0000":"New Year's Day","16-01-0000":"Martin Luther King Jr. Day","20-02-0000":"Presidents' Day","29-05-0000":"Memorial Day","19-06-0000":"Juneteenth","04-07-0000":"Independence Day","04-09-0000":"Labor Day","09-10-0000":"Columbus Day","11-11-0000":"Veterans Day","23-11-0000":"Thanksgiving Day","25-12-0000":"Christmas Day"},2:{"06-04-2023":"Passover (Day 1)","12-04-2023":"Passover (Day 7)","26-04-2023":"Yom HaAtzmaut","26-05-2023":"Shavuot","16-09-2023":"Rosh Hashana","17-09-2023":"Rosh Hashana (Day 2)","25-09-2023":"Yom Kippur","30-09-2023":"Sukkot","07-10-2023":"Simchat Torah","23-04-2024":"Passover (Day 1)","29-04-2024":"Passover (Day 7)","14-05-2024":"Yom HaAtzmaut","12-06-2024":"Shavuot","03-10-2024":"Rosh Hashana","04-10-2024":"Rosh Hashana (Day 2)","12-10-2024":"Yom Kippur","17-10-2024":"Sukkot","24-10-2024":"Simchat Torah","13-04-2025":"Passover (Day 1)","19-04-2025":"Passover (Day 7)","01-05-2025":"Yom HaAtzmaut","02-06-2025":"Shavuot","23-09-2025":"Rosh Hashana","24-09-2025":"Rosh Hashana (Day 2)","02-10-2025":"Yom Kippur","07-10-2025":"Sukkot","14-10-2025":"Simchat Torah"},0:{}},mf=["","monday","tuesday","wednesday","thursday","friday","saturday","sunday"];var Nr=(r=>(r[r.onHold=0]="onHold",r[r.needCancel=1]="needCancel",r[r.waitingList=2]="waitingList",r[r.withDebts=3]="withDebts",r[r.withOutRecipts=4]="withOutRecipts",r[r.withOnlinePayment=5]="withOnlinePayment",r[r.withoutConfirmArrival=6]="withoutConfirmArrival",r))(Nr||{});const Jc={0:"waitingsForApproval",1:"waitingsForCancel",2:"waitingList",4:"withOutRecipts",3:"withDebts",5:"withOnlinePayment",6:"withoutConfirmArrival"};function Pe(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function ke(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}function bo(r,e){const t=Pe(r);return isNaN(e)?ke(r,NaN):(e&&t.setDate(t.getDate()+e),t)}const Hu=6048e5,pf=864e5,gf=6e4,xf=36e5,yf=1e3;let wf={};function Ds(){return wf}function xr(r,e){var c,u,l,h;const t=Ds(),s=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??t.weekStartsOn??((h=(l=t.locale)==null?void 0:l.options)==null?void 0:h.weekStartsOn)??0,i=Pe(r),n=i.getDay(),a=(n<s?7:0)+n-s;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function ds(r){return xr(r,{weekStartsOn:1})}function Yu(r){const e=Pe(r),t=e.getFullYear(),s=ke(r,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const i=ds(s),n=ke(r,0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);const a=ds(n);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Zc(r){const e=Pe(r);return e.setHours(0,0,0,0),e}function Vi(r){const e=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return e.setUTCFullYear(r.getFullYear()),r.getTime()-e.getTime()}function vf(r,e){const t=Zc(r),s=Zc(e),i=t.getTime()-Vi(t),n=s.getTime()-Vi(s);return Math.round((i-n)/pf)}function Df(r){const e=Yu(r),t=ke(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),ds(t)}function bf(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function kf(r){if(!bf(r)&&typeof r!="number")return!1;const e=Pe(r);return!isNaN(Number(e))}function If(r){const e=Pe(r),t=ke(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Tf={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Af=(r,e,t)=>{let s;const i=Tf[r];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function zn(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const Ef={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Cf={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_f={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pf={date:zn({formats:Ef,defaultWidth:"full"}),time:zn({formats:Cf,defaultWidth:"full"}),dateTime:zn({formats:_f,defaultWidth:"full"})},Sf={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Mf=(r,e,t,s)=>Sf[r];function Bs(r){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let i;if(s==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,c=t!=null&&t.width?String(t.width):a;i=r.formattingValues[c]||r.formattingValues[a]}else{const a=r.defaultWidth,c=t!=null&&t.width?String(t.width):r.defaultWidth;i=r.values[c]||r.values[a]}const n=r.argumentCallback?r.argumentCallback(e):e;return i[n]}}const Nf={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Of={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bf={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ff={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Rf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Lf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Uf=(r,e)=>{const t=Number(r),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Wf={ordinalNumber:Uf,era:Bs({values:Nf,defaultWidth:"wide"}),quarter:Bs({values:Of,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Bs({values:Bf,defaultWidth:"wide"}),day:Bs({values:Ff,defaultWidth:"wide"}),dayPeriod:Bs({values:Rf,defaultWidth:"wide",formattingValues:Lf,defaultFormattingWidth:"wide"})};function Fs(r){return(e,t={})=>{const s=t.width,i=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],n=e.match(i);if(!n)return null;const a=n[0],c=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],u=Array.isArray(c)?Yf(c,d=>d.test(a)):Hf(c,d=>d.test(a));let l;l=r.valueCallback?r.valueCallback(u):u,l=t.valueCallback?t.valueCallback(l):l;const h=e.slice(a.length);return{value:l,rest:h}}}function Hf(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function Yf(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function Vf(r){return(e,t={})=>{const s=e.match(r.matchPattern);if(!s)return null;const i=s[0],n=e.match(r.parsePattern);if(!n)return null;let a=r.valueCallback?r.valueCallback(n[0]):n[0];a=t.valueCallback?t.valueCallback(a):a;const c=e.slice(i.length);return{value:a,rest:c}}}const $f=/^(\d+)(th|st|nd|rd)?/i,zf=/\d+/i,Gf={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qf={any:[/^b/i,/^(a|c)/i]},Jf={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Zf={any:[/1/i,/2/i,/3/i,/4/i]},Qf={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Kf={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Xf={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},jf={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},em={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tm={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rm={ordinalNumber:Vf({matchPattern:$f,parsePattern:zf,valueCallback:r=>parseInt(r,10)}),era:Fs({matchPatterns:Gf,defaultMatchWidth:"wide",parsePatterns:qf,defaultParseWidth:"any"}),quarter:Fs({matchPatterns:Jf,defaultMatchWidth:"wide",parsePatterns:Zf,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Fs({matchPatterns:Qf,defaultMatchWidth:"wide",parsePatterns:Kf,defaultParseWidth:"any"}),day:Fs({matchPatterns:Xf,defaultMatchWidth:"wide",parsePatterns:jf,defaultParseWidth:"any"}),dayPeriod:Fs({matchPatterns:em,defaultMatchWidth:"any",parsePatterns:tm,defaultParseWidth:"any"})},Vu={code:"en-US",formatDistance:Af,formatLong:Pf,formatRelative:Mf,localize:Wf,match:rm,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sm(r){const e=Pe(r);return vf(e,If(e))+1}function $u(r){const e=Pe(r),t=ds(e).getTime()-Df(e).getTime();return Math.round(t/Hu)+1}function ko(r,e){var h,d,f,p;const t=Pe(r),s=t.getFullYear(),i=Ds(),n=(e==null?void 0:e.firstWeekContainsDate)??((d=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,a=ke(r,0);a.setFullYear(s+1,0,n),a.setHours(0,0,0,0);const c=xr(a,e),u=ke(r,0);u.setFullYear(s,0,n),u.setHours(0,0,0,0);const l=xr(u,e);return t.getTime()>=c.getTime()?s+1:t.getTime()>=l.getTime()?s:s-1}function im(r,e){var c,u,l,h;const t=Ds(),s=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(l=t.locale)==null?void 0:l.options)==null?void 0:h.firstWeekContainsDate)??1,i=ko(r,e),n=ke(r,0);return n.setFullYear(i,0,s),n.setHours(0,0,0,0),xr(n,e)}function zu(r,e){const t=Pe(r),s=xr(t,e).getTime()-im(t,e).getTime();return Math.round(s/Hu)+1}function ce(r,e){const t=r<0?"-":"",s=Math.abs(r).toString().padStart(e,"0");return t+s}const ir={y(r,e){const t=r.getFullYear(),s=t>0?t:1-t;return ce(e==="yy"?s%100:s,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):ce(t+1,2)},d(r,e){return ce(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return ce(r.getHours()%12||12,e.length)},H(r,e){return ce(r.getHours(),e.length)},m(r,e){return ce(r.getMinutes(),e.length)},s(r,e){return ce(r.getSeconds(),e.length)},S(r,e){const t=e.length,s=r.getMilliseconds(),i=Math.floor(s*Math.pow(10,t-3));return ce(i,e.length)}},qr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nm={G:function(r,e,t){const s=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const s=r.getFullYear(),i=s>0?s:1-s;return t.ordinalNumber(i,{unit:"year"})}return ir.y(r,e)},Y:function(r,e,t,s){const i=ko(r,s),n=i>0?i:1-i;if(e==="YY"){const a=n%100;return ce(a,2)}return e==="Yo"?t.ordinalNumber(n,{unit:"year"}):ce(n,e.length)},R:function(r,e){const t=Yu(r);return ce(t,e.length)},u:function(r,e){const t=r.getFullYear();return ce(t,e.length)},Q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return ce(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return ce(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(r,e,t){const s=r.getMonth();switch(e){case"M":case"MM":return ir.M(r,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(r,e,t){const s=r.getMonth();switch(e){case"L":return String(s+1);case"LL":return ce(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(r,e,t,s){const i=zu(r,s);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):ce(i,e.length)},I:function(r,e,t){const s=$u(r);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):ce(s,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):ir.d(r,e)},D:function(r,e,t){const s=sm(r);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):ce(s,e.length)},E:function(r,e,t){const s=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(r,e,t,s){const i=r.getDay(),n=(i-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(n);case"ee":return ce(n,2);case"eo":return t.ordinalNumber(n,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(r,e,t,s){const i=r.getDay(),n=(i-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(n);case"cc":return ce(n,e.length);case"co":return t.ordinalNumber(n,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(r,e,t){const s=r.getDay(),i=s===0?7:s;switch(e){case"i":return String(i);case"ii":return ce(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(r,e,t){const i=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,e,t){const s=r.getHours();let i;switch(s===12?i=qr.noon:s===0?i=qr.midnight:i=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,e,t){const s=r.getHours();let i;switch(s>=17?i=qr.evening:s>=12?i=qr.afternoon:s>=4?i=qr.morning:i=qr.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let s=r.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return ir.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):ir.H(r,e)},K:function(r,e,t){const s=r.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):ce(s,e.length)},k:function(r,e,t){let s=r.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):ce(s,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):ir.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):ir.s(r,e)},S:function(r,e){return ir.S(r,e)},X:function(r,e,t,s){const n=(s._originalDate||r).getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Kc(n);case"XXXX":case"XX":return Tr(n);case"XXXXX":case"XXX":default:return Tr(n,":")}},x:function(r,e,t,s){const n=(s._originalDate||r).getTimezoneOffset();switch(e){case"x":return Kc(n);case"xxxx":case"xx":return Tr(n);case"xxxxx":case"xxx":default:return Tr(n,":")}},O:function(r,e,t,s){const n=(s._originalDate||r).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Qc(n,":");case"OOOO":default:return"GMT"+Tr(n,":")}},z:function(r,e,t,s){const n=(s._originalDate||r).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Qc(n,":");case"zzzz":default:return"GMT"+Tr(n,":")}},t:function(r,e,t,s){const i=s._originalDate||r,n=Math.floor(i.getTime()/1e3);return ce(n,e.length)},T:function(r,e,t,s){const n=(s._originalDate||r).getTime();return ce(n,e.length)}};function Qc(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),i=Math.floor(s/60),n=s%60;return n===0?t+String(i):t+String(i)+e+ce(n,2)}function Kc(r,e){return r%60===0?(r>0?"-":"+")+ce(Math.abs(r)/60,2):Tr(r,e)}function Tr(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),i=ce(Math.floor(s/60),2),n=ce(s%60,2);return t+i+e+n}const Xc=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Gu=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},am=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],s=t[1],i=t[2];if(!i)return Xc(r,e);let n;switch(s){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"});break}return n.replace("{{date}}",Xc(s,e)).replace("{{time}}",Gu(i,e))},Qa={p:Gu,P:am},om=/^D+$/,cm=/^Y+$/,um=["D","DD","YY","YYYY"];function qu(r){return om.test(r)}function Ju(r){return cm.test(r)}function $i(r,e,t){const s=lm(r,e,t);if(console.warn(s),um.includes(r))throw new RangeError(s)}function lm(r,e,t){const s=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hm=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dm=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fm=/^'([^]*?)'?$/,mm=/''/g,pm=/[a-zA-Z]/;function Ce(r,e,t){var h,d,f,p,m,w,y,D;const s=Ds(),i=(t==null?void 0:t.locale)??s.locale??Vu,n=(t==null?void 0:t.firstWeekContainsDate)??((d=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((w=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:w.weekStartsOn)??s.weekStartsOn??((D=(y=s.locale)==null?void 0:y.options)==null?void 0:D.weekStartsOn)??0,c=Pe(r);if(!kf(c))throw new RangeError("Invalid time value");const u={firstWeekContainsDate:n,weekStartsOn:a,locale:i,_originalDate:c};return e.match(dm).map(function(g){const x=g[0];if(x==="p"||x==="P"){const v=Qa[x];return v(g,i.formatLong)}return g}).join("").match(hm).map(function(g){if(g==="''")return"'";const x=g[0];if(x==="'")return gm(g);const v=nm[x];if(v)return!(t!=null&&t.useAdditionalWeekYearTokens)&&Ju(g)&&$i(g,e,String(r)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&qu(g)&&$i(g,e,String(r)),v(c,g,i.localize,u);if(x.match(pm))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return g}).join("")}function gm(r){const e=r.match(fm);return e?e[1].replace(mm,"'"):r}function xm(){return Object.assign({},Ds())}function ym(r){let t=Pe(r).getDay();return t===0&&(t=7),t}function wm(r,e){const t=e instanceof Date?ke(e,0):new e(0);return t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),t.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),t}const vm=10;class Zu{constructor(){o(this,"subPriority",0)}validate(e,t){return!0}}class Dm extends Zu{constructor(e,t,s,i,n){super(),this.value=e,this.validateValue=t,this.setValue=s,this.priority=i,n&&(this.subPriority=n)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,s){return this.setValue(e,t,this.value,s)}}class bm extends Zu{constructor(){super(...arguments);o(this,"priority",vm);o(this,"subPriority",-1)}set(t,s){return s.timestampIsSet?t:ke(t,wm(t,Date))}}class ae{run(e,t,s,i){const n=this.parse(e,t,s,i);return n?{setter:new Dm(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}validate(e,t,s){return!0}}class km extends ae{constructor(){super(...arguments);o(this,"priority",140);o(this,"incompatibleTokens",["R","u","t","T"])}parse(t,s,i){switch(s){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,s,i){return s.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const Ae={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},yt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ee(r,e){return r&&{value:e(r.value),rest:r.rest}}function be(r,e){const t=e.match(r);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function wt(r,e){const t=e.match(r);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const s=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,n=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:s*(i*xf+n*gf+a*yf),rest:e.slice(t[0].length)}}function Qu(r){return be(Ae.anyDigitsSigned,r)}function Ie(r,e){switch(r){case 1:return be(Ae.singleDigit,e);case 2:return be(Ae.twoDigits,e);case 3:return be(Ae.threeDigits,e);case 4:return be(Ae.fourDigits,e);default:return be(new RegExp("^\\d{1,"+r+"}"),e)}}function zi(r,e){switch(r){case 1:return be(Ae.singleDigitSigned,e);case 2:return be(Ae.twoDigitsSigned,e);case 3:return be(Ae.threeDigitsSigned,e);case 4:return be(Ae.fourDigitsSigned,e);default:return be(new RegExp("^-?\\d{1,"+r+"}"),e)}}function Io(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Ku(r,e){const t=e>0,s=t?e:1-e;let i;if(s<=50)i=r||100;else{const n=s+50,a=Math.floor(n/100)*100,c=r>=n%100;i=r+a-(c?100:0)}return t?i:1-i}function Xu(r){return r%400===0||r%4===0&&r%100!==0}class Im extends ae{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,s,i){const n=a=>({year:a,isTwoDigitYear:s==="yy"});switch(s){case"y":return Ee(Ie(4,t),n);case"yo":return Ee(i.ordinalNumber(t,{unit:"year"}),n);default:return Ee(Ie(s.length,t),n)}}validate(t,s){return s.isTwoDigitYear||s.year>0}set(t,s,i){const n=t.getFullYear();if(i.isTwoDigitYear){const c=Ku(i.year,n);return t.setFullYear(c,0,1),t.setHours(0,0,0,0),t}const a=!("era"in s)||s.era===1?i.year:1-i.year;return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}}class Tm extends ae{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,s,i){const n=a=>({year:a,isTwoDigitYear:s==="YY"});switch(s){case"Y":return Ee(Ie(4,t),n);case"Yo":return Ee(i.ordinalNumber(t,{unit:"year"}),n);default:return Ee(Ie(s.length,t),n)}}validate(t,s){return s.isTwoDigitYear||s.year>0}set(t,s,i,n){const a=ko(t,n);if(i.isTwoDigitYear){const u=Ku(i.year,a);return t.setFullYear(u,0,n.firstWeekContainsDate),t.setHours(0,0,0,0),xr(t,n)}const c=!("era"in s)||s.era===1?i.year:1-i.year;return t.setFullYear(c,0,n.firstWeekContainsDate),t.setHours(0,0,0,0),xr(t,n)}}class Am extends ae{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,s){return zi(s==="R"?4:s.length,t)}set(t,s,i){const n=ke(t,0);return n.setFullYear(i,0,4),n.setHours(0,0,0,0),ds(n)}}class Em extends ae{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,s){return zi(s==="u"?4:s.length,t)}set(t,s,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class Cm extends ae{constructor(){super(...arguments);o(this,"priority",120);o(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,s,i){switch(s){case"Q":case"QQ":return Ie(s.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,s){return s>=1&&s<=4}set(t,s,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class _m extends ae{constructor(){super(...arguments);o(this,"priority",120);o(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,s,i){switch(s){case"q":case"qq":return Ie(s.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,s){return s>=1&&s<=4}set(t,s,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class Pm extends ae{constructor(){super(...arguments);o(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);o(this,"priority",110)}parse(t,s,i){const n=a=>a-1;switch(s){case"M":return Ee(be(Ae.month,t),n);case"MM":return Ee(Ie(2,t),n);case"Mo":return Ee(i.ordinalNumber(t,{unit:"month"}),n);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,s){return s>=0&&s<=11}set(t,s,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class Sm extends ae{constructor(){super(...arguments);o(this,"priority",110);o(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,s,i){const n=a=>a-1;switch(s){case"L":return Ee(be(Ae.month,t),n);case"LL":return Ee(Ie(2,t),n);case"Lo":return Ee(i.ordinalNumber(t,{unit:"month"}),n);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,s){return s>=0&&s<=11}set(t,s,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function Mm(r,e,t){const s=Pe(r),i=zu(s,t)-e;return s.setDate(s.getDate()-i*7),s}class Nm extends ae{constructor(){super(...arguments);o(this,"priority",100);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,s,i){switch(s){case"w":return be(Ae.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return Ie(s.length,t)}}validate(t,s){return s>=1&&s<=53}set(t,s,i,n){return xr(Mm(t,i,n),n)}}function Om(r,e){const t=Pe(r),s=$u(t)-e;return t.setDate(t.getDate()-s*7),t}class Bm extends ae{constructor(){super(...arguments);o(this,"priority",100);o(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,s,i){switch(s){case"I":return be(Ae.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return Ie(s.length,t)}}validate(t,s){return s>=1&&s<=53}set(t,s,i){return ds(Om(t,i))}}const Fm=[31,28,31,30,31,30,31,31,30,31,30,31],Rm=[31,29,31,30,31,30,31,31,30,31,30,31];class Lm extends ae{constructor(){super(...arguments);o(this,"priority",90);o(this,"subPriority",1);o(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,s,i){switch(s){case"d":return be(Ae.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return Ie(s.length,t)}}validate(t,s){const i=t.getFullYear(),n=Xu(i),a=t.getMonth();return n?s>=1&&s<=Rm[a]:s>=1&&s<=Fm[a]}set(t,s,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class Um extends ae{constructor(){super(...arguments);o(this,"priority",90);o(this,"subpriority",1);o(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,s,i){switch(s){case"D":case"DD":return be(Ae.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return Ie(s.length,t)}}validate(t,s){const i=t.getFullYear();return Xu(i)?s>=1&&s<=366:s>=1&&s<=365}set(t,s,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function To(r,e,t){var d,f,p,m;const s=Ds(),i=(t==null?void 0:t.weekStartsOn)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??s.weekStartsOn??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,n=Pe(r),a=n.getDay(),u=(e%7+7)%7,l=7-i,h=e<0||e>6?e-(a+l)%7:(u+l)%7-(a+l)%7;return bo(n,h)}class Wm extends ae{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,s,i){switch(s){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,s){return s>=0&&s<=6}set(t,s,i,n){return t=To(t,i,n),t.setHours(0,0,0,0),t}}class Hm extends ae{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,s,i,n){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+n.weekStartsOn+6)%7+u};switch(s){case"e":case"ee":return Ee(Ie(s.length,t),a);case"eo":return Ee(i.ordinalNumber(t,{unit:"day"}),a);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,s){return s>=0&&s<=6}set(t,s,i,n){return t=To(t,i,n),t.setHours(0,0,0,0),t}}class Ym extends ae{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,s,i,n){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+n.weekStartsOn+6)%7+u};switch(s){case"c":case"cc":return Ee(Ie(s.length,t),a);case"co":return Ee(i.ordinalNumber(t,{unit:"day"}),a);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,s){return s>=0&&s<=6}set(t,s,i,n){return t=To(t,i,n),t.setHours(0,0,0,0),t}}function Vm(r,e){const t=Pe(r),s=ym(t),i=e-s;return bo(t,i)}class $m extends ae{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,s,i){const n=a=>a===0?7:a;switch(s){case"i":case"ii":return Ie(s.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return Ee(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),n);case"iiiii":return Ee(i.day(t,{width:"narrow",context:"formatting"}),n);case"iiiiii":return Ee(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),n);case"iiii":default:return Ee(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),n)}}validate(t,s){return s>=1&&s<=7}set(t,s,i){return t=Vm(t,i),t.setHours(0,0,0,0),t}}class zm extends ae{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,s,i){switch(s){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,s,i){return t.setHours(Io(i),0,0,0),t}}class Gm extends ae{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,s,i){switch(s){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,s,i){return t.setHours(Io(i),0,0,0),t}}class qm extends ae{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["a","b","t","T"])}parse(t,s,i){switch(s){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,s,i){return t.setHours(Io(i),0,0,0),t}}class Jm extends ae{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,s,i){switch(s){case"h":return be(Ae.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return Ie(s.length,t)}}validate(t,s){return s>=1&&s<=12}set(t,s,i){const n=t.getHours()>=12;return n&&i<12?t.setHours(i+12,0,0,0):!n&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class Zm extends ae{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,s,i){switch(s){case"H":return be(Ae.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return Ie(s.length,t)}}validate(t,s){return s>=0&&s<=23}set(t,s,i){return t.setHours(i,0,0,0),t}}class Qm extends ae{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,s,i){switch(s){case"K":return be(Ae.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return Ie(s.length,t)}}validate(t,s){return s>=0&&s<=11}set(t,s,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class Km extends ae{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,s,i){switch(s){case"k":return be(Ae.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return Ie(s.length,t)}}validate(t,s){return s>=1&&s<=24}set(t,s,i){const n=i<=24?i%24:i;return t.setHours(n,0,0,0),t}}class Xm extends ae{constructor(){super(...arguments);o(this,"priority",60);o(this,"incompatibleTokens",["t","T"])}parse(t,s,i){switch(s){case"m":return be(Ae.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return Ie(s.length,t)}}validate(t,s){return s>=0&&s<=59}set(t,s,i){return t.setMinutes(i,0,0),t}}class jm extends ae{constructor(){super(...arguments);o(this,"priority",50);o(this,"incompatibleTokens",["t","T"])}parse(t,s,i){switch(s){case"s":return be(Ae.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return Ie(s.length,t)}}validate(t,s){return s>=0&&s<=59}set(t,s,i){return t.setSeconds(i,0),t}}class ep extends ae{constructor(){super(...arguments);o(this,"priority",30);o(this,"incompatibleTokens",["t","T"])}parse(t,s){const i=n=>Math.floor(n*Math.pow(10,-s.length+3));return Ee(Ie(s.length,t),i)}set(t,s,i){return t.setMilliseconds(i),t}}class tp extends ae{constructor(){super(...arguments);o(this,"priority",10);o(this,"incompatibleTokens",["t","T","x"])}parse(t,s){switch(s){case"X":return wt(yt.basicOptionalMinutes,t);case"XX":return wt(yt.basic,t);case"XXXX":return wt(yt.basicOptionalSeconds,t);case"XXXXX":return wt(yt.extendedOptionalSeconds,t);case"XXX":default:return wt(yt.extended,t)}}set(t,s,i){return s.timestampIsSet?t:ke(t,t.getTime()-Vi(t)-i)}}class rp extends ae{constructor(){super(...arguments);o(this,"priority",10);o(this,"incompatibleTokens",["t","T","X"])}parse(t,s){switch(s){case"x":return wt(yt.basicOptionalMinutes,t);case"xx":return wt(yt.basic,t);case"xxxx":return wt(yt.basicOptionalSeconds,t);case"xxxxx":return wt(yt.extendedOptionalSeconds,t);case"xxx":default:return wt(yt.extended,t)}}set(t,s,i){return s.timestampIsSet?t:ke(t,t.getTime()-Vi(t)-i)}}class sp extends ae{constructor(){super(...arguments);o(this,"priority",40);o(this,"incompatibleTokens","*")}parse(t){return Qu(t)}set(t,s,i){return[ke(t,i*1e3),{timestampIsSet:!0}]}}class ip extends ae{constructor(){super(...arguments);o(this,"priority",20);o(this,"incompatibleTokens","*")}parse(t){return Qu(t)}set(t,s,i){return[ke(t,i),{timestampIsSet:!0}]}}const np={G:new km,y:new Im,Y:new Tm,R:new Am,u:new Em,Q:new Cm,q:new _m,M:new Pm,L:new Sm,w:new Nm,I:new Bm,d:new Lm,D:new Um,E:new Wm,e:new Hm,c:new Ym,i:new $m,a:new zm,b:new Gm,B:new qm,h:new Jm,H:new Zm,K:new Qm,k:new Km,m:new Xm,s:new jm,S:new ep,X:new tp,x:new rp,t:new sp,T:new ip},ap=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,op=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cp=/^'([^]*?)'?$/,up=/''/g,lp=/\S/,hp=/[a-zA-Z]/;function Ao(r,e,t,s){var w,y,D,g,x,v,I,T;const i=xm(),n=(s==null?void 0:s.locale)??i.locale??Vu,a=(s==null?void 0:s.firstWeekContainsDate)??((y=(w=s==null?void 0:s.locale)==null?void 0:w.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(D=i.locale)==null?void 0:D.options)==null?void 0:g.firstWeekContainsDate)??1,c=(s==null?void 0:s.weekStartsOn)??((v=(x=s==null?void 0:s.locale)==null?void 0:x.options)==null?void 0:v.weekStartsOn)??i.weekStartsOn??((T=(I=i.locale)==null?void 0:I.options)==null?void 0:T.weekStartsOn)??0;if(e==="")return r===""?Pe(t):ke(t,NaN);const u={firstWeekContainsDate:a,weekStartsOn:c,locale:n},l=[new bm],h=e.match(op).map(b=>{const A=b[0];if(A in Qa){const C=Qa[A];return C(b,n.formatLong)}return b}).join("").match(ap),d=[];for(let b of h){!(s!=null&&s.useAdditionalWeekYearTokens)&&Ju(b)&&$i(b,e,r),!(s!=null&&s.useAdditionalDayOfYearTokens)&&qu(b)&&$i(b,e,r);const A=b[0],C=np[A];if(C){const{incompatibleTokens:k}=C;if(Array.isArray(k)){const _=d.find(S=>k.includes(S.token)||S.token===A);if(_)throw new RangeError(`The format string mustn't contain \`${_.fullToken}\` and \`${b}\` at the same time`)}else if(C.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);d.push({token:A,fullToken:b});const E=C.run(r,b,n.match,u);if(!E)return ke(t,NaN);l.push(E.setter),r=E.rest}else{if(A.match(hp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");if(b==="''"?b="'":A==="'"&&(b=dp(b)),r.indexOf(b)===0)r=r.slice(b.length);else return ke(t,NaN)}}if(r.length>0&&lp.test(r))return ke(t,NaN);const f=l.map(b=>b.priority).sort((b,A)=>A-b).filter((b,A,C)=>C.indexOf(b)===A).map(b=>l.filter(A=>A.priority===b).sort((A,C)=>C.subPriority-A.subPriority)).map(b=>b[0]);let p=Pe(t);if(isNaN(p.getTime()))return ke(t,NaN);const m={};for(const b of f){if(!b.validate(p,u))return ke(t,NaN);const A=b.set(p,m,u);Array.isArray(A)?(p=A[0],Object.assign(m,A[1])):p=A}return ke(t,p)}function dp(r){return r.match(cp)[1].replace(up,"'")}var dr=(r=>(r[r.shortestTreatment=0]="shortestTreatment",r[r.longestTreatment=1]="longestTreatment",r[r.custom=2]="custom",r[r.first=3]="first",r[r.last=4]="last",r[r.edges=5]="edges",r))(dr||{});const fp={3:"first",4:"last",5:"edges",0:"shortestTreatment",1:"longestTreatment",2:"custom"},mp={first:3,last:4,edges:5,shortestTreatment:0,longestTreatment:1,custom:2};var jr=(r=>(r[r.Barber=0]="Barber",r[r.Polish=1]="Polish",r[r.Beautician=2]="Beautician",r[r.ManicurePedicure=3]="ManicurePedicure",r[r.Eyelashes=4]="Eyelashes",r[r.Eyebrows=5]="Eyebrows",r[r.Braids=6]="Braids",r[r.MakeUpArtist=7]="MakeUpArtist",r[r.TattooArtist=8]="TattooArtist",r[r.HairRemoval=9]="HairRemoval",r[r.Masseur=10]="Masseur",r[r.Physiotherapy=11]="Physiotherapy",r[r.Cobblers=12]="Cobblers",r[r.Clown=13]="Clown",r[r.SocialWorker=14]="SocialWorker",r[r.Magician=15]="Magician",r[r.Doctor=16]="Doctor",r[r.Veterinarian=17]="Veterinarian",r[r.CommunicationTherapist=18]="CommunicationTherapist",r[r.DogGroomer=19]="DogGroomer",r[r.DJ=20]="DJ",r[r.Psychologist=21]="Psychologist",r[r.Tutor=22]="Tutor",r[r.WeddingDresses=23]="WeddingDresses",r[r.DanceTeacher=24]="DanceTeacher",r[r.Babysitter=25]="Babysitter",r[r.Reflexologist=26]="Reflexologist",r[r.Dietitian=27]="Dietitian",r[r.CarWash=28]="CarWash",r[r.Photographer=29]="Photographer",r[r.SwimmingTeacher=30]="SwimmingTeacher",r[r.Counselor=31]="Counselor",r[r.Mentor=32]="Mentor",r[r.TennisCoach=33]="TennisCoach",r[r.PrivateChef=34]="PrivateChef",r[r.PersonalTrainer=35]="PersonalTrainer",r[r.Lawyer=36]="Lawyer",r[r.Sales=37]="Sales",r[r.RealEstate=38]="RealEstate",r[r.DrivingTeacher=39]="DrivingTeacher",r[r.InvestmentAdvice=40]="InvestmentAdvice",r[r.Library=41]="Library",r[r.Tailor=42]="Tailor",r[r.Restaurant=43]="Restaurant",r[r.NailConstruction=44]="NailConstruction",r[r.Dentist=45]="Dentist",r[r.BeautysSalon=46]="BeautysSalon",r[r.Washer=47]="Washer",r[r.CleaningSofas=48]="CleaningSofas",r[r.Other=49]="Other",r))(jr||{});const pp={0:"barber",1:"polish",48:"cleaningSofas",2:"beautician",3:"manicurePedicure",4:"eyelashes",5:"eyebrows",25:"babysitter",6:"braids",7:"makeUpArtist",8:"tattooArtist",9:"hairRemoval",10:"masseur",12:"cobblers",13:"clown",14:"socialWorker",15:"magician",16:"doctor",20:"dj",17:"veterinarian",18:"communicationTherapist",19:"dogGroomer",21:"psychologist",11:"physiotherapy",22:"Tutor",23:"weddingDresses",24:"danceTeacher",26:"reflexologist",27:"dietitian",28:"carWash",29:"photographer",30:"swimmingTeacher",31:"counselor",32:"mentor",33:"tennisCoach",34:"privateChef",35:"personalTrainer",36:"lawyer",37:"sales",38:"realEstate",39:"drivingTeacher",40:"investmentAdvice",41:"library",49:"other",42:"tailor",43:"restaurant",44:"nailConstruction",45:"dentist",46:"beautysSalon",47:"washer"},ju={barber:0,cleaningSofas:48,polish:1,beautician:2,manicurePedicure:3,eyelashes:4,eyebrows:5,babysitter:25,braids:6,makeUpArtist:7,tattooArtist:8,hairRemoval:9,masseur:10,cobblers:12,clown:13,socialWorker:14,magician:15,doctor:16,veterinarian:17,communicationTherapist:18,dogGroomer:19,psychologist:21,physiotherapy:11,Tutor:22,weddingDresses:23,danceTeacher:24,reflexologist:26,dietitian:27,carWash:28,photographer:29,swimmingTeacher:30,counselor:31,mentor:32,dj:20,tennisCoach:33,privateChef:34,personalTrainer:35,lawyer:36,sales:37,realEstate:38,drivingTeacher:39,investmentAdvice:40,library:41,other:49,restaurant:43,tailor:42,nailConstruction:44,dentist:45,beautysSalon:46,washer:47},gp="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU2LjY5MyA1Ni42OTMiIGhlaWdodD0iNTYuNjkzcHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA1Ni42OTMgNTYuNjkzIiB3aWR0aD0iNTYuNjkzcHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik00MS43NzcsMzAuNTE3Yy0wLjA2Mi02LjIzMiw1LjA4Mi05LjIyMSw1LjMxMi05LjM3MmMtMi44OTEtNC4yMjctNy4zOTUtNC44MDctOC45OTgtNC44NzMgICBjLTMuODMtMC4zODktNy40NzcsMi4yNTYtOS40MiwyLjI1NmMtMS45MzksMC00Ljk0MS0yLjE5OS04LjExNy0yLjE0M2MtNC4xNzgsMC4wNjItOC4wMjksMi40My0xMC4xNzksNi4xNyAgIGMtNC4zMzksNy41MjctMS4xMSwxOC42ODIsMy4xMTgsMjQuNzkxYzIuMDY3LDIuOTg2LDQuNTMyLDYuMzQ2LDcuNzY2LDYuMjIzYzMuMTE3LTAuMTIzLDQuMjkzLTIuMDE2LDguMDYxLTIuMDE2ICAgczQuODI2LDIuMDE2LDguMTIzLDEuOTUzYzMuMzUyLTAuMDYxLDUuNDc3LTMuMDQzLDcuNTI3LTYuMDQxYzIuMzczLTMuNDY5LDMuMzUtNi44MjgsMy40MDgtNi45OTggICBDNDguMzA1LDQwLjQzMyw0MS44NDQsMzcuOTU4LDQxLjc3NywzMC41MTd6Ii8+PHBhdGggZD0iTTM1LjU4MiwxMi4yMjljMS43MTUtMi4wODIsMi44NzctNC45NzUsMi41NjEtNy44NTVjLTIuNDc1LDAuMS01LjQ3MSwxLjY0NS03LjI0OCwzLjcyNSAgIGMtMS41OTIsMS44NDYtMi45ODQsNC43ODUtMi42MTEsNy42MTNDMzEuMDQ1LDE1LjkyNiwzMy44NjEsMTQuMzA3LDM1LjU4MiwxMi4yMjl6Ii8+PC9nPjwvc3ZnPg==",xp="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20id='Layer_1'%20style='enable-background:new%200%200%201000%201000;'%20version='1.1'%20viewBox='0%200%201000%201000'%20xml:space='preserve'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%233B579D;}%20.st1{fill:%23FFFFFF;}%20%3c/style%3e%3ctitle/%3e%3cg%3e%3cpath%20class='st0'%20d='M500,1000L500,1000C223.9,1000,0,776.1,0,500v0C0,223.9,223.9,0,500,0h0c276.1,0,500,223.9,500,500v0%20C1000,776.1,776.1,1000,500,1000z'/%3e%3cpath%20class='st1'%20d='M630,1000V612.7h130l19.5-150.9H630v-96.4c0-43.7,12.1-73.5,74.8-73.5l79.9,0V157%20c-13.8-1.8-61.3-5.9-116.5-5.9c-115.2,0-194.1,70.3-194.1,199.5v111.3H343.8v150.9h130.3V1000H630z'%20id='f'/%3e%3c/g%3e%3c/svg%3e",yp="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEyOCAxMjgiIGlkPSJTb2NpYWxfSWNvbnMiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnIGlkPSJfeDMxX19zdHJva2UiPjxnIGlkPSJHb29nbGUiPjxyZWN0IGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBoZWlnaHQ9IjEyOCIgd2lkdGg9IjEyOCIvPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI3LjU4NSw2NGMwLTQuMTU3LDAuNjktOC4xNDMsMS45MjMtMTEuODgxTDcuOTM4LDM1LjY0OCAgICBDMy43MzQsNDQuMTgzLDEuMzY2LDUzLjgwMSwxLjM2Niw2NGMwLDEwLjE5MSwyLjM2NiwxOS44MDIsNi41NjMsMjguMzMybDIxLjU1OC0xNi41MDNDMjguMjY2LDcyLjEwOCwyNy41ODUsNjguMTM3LDI3LjU4NSw2NCIgZmlsbD0iI0ZCQkMwNSIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNjUuNDU3LDI2LjE4MmM5LjAzMSwwLDE3LjE4OCwzLjIsMjMuNTk3LDguNDM2TDEwNy42OTgsMTYgICAgQzk2LjMzNyw2LjEwOSw4MS43NzEsMCw2NS40NTcsMEM0MC4xMjksMCwxOC4zNjEsMTQuNDg0LDcuOTM4LDM1LjY0OGwyMS41NjksMTYuNDcxQzM0LjQ3NywzNy4wMzMsNDguNjQ0LDI2LjE4Miw2NS40NTcsMjYuMTgyIiBmaWxsPSIjRUE0MzM1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02NS40NTcsMTAxLjgxOGMtMTYuODEyLDAtMzAuOTc5LTEwLjg1MS0zNS45NDktMjUuOTM3ICAgIEw3LjkzOCw5Mi4zNDlDMTguMzYxLDExMy41MTYsNDAuMTI5LDEyOCw2NS40NTcsMTI4YzE1LjYzMiwwLDMwLjU1Ny01LjU1MSw0MS43NTgtMTUuOTUxTDg2Ljc0MSw5Ni4yMjEgICAgQzgwLjk2NCw5OS44Niw3My42ODksMTAxLjgxOCw2NS40NTcsMTAxLjgxOCIgZmlsbD0iIzM0QTg1MyIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTI2LjYzNCw2NGMwLTMuNzgyLTAuNTgzLTcuODU1LTEuNDU3LTExLjYzNkg2NS40NTd2MjQuNzI3ICAgIGgzNC4zNzZjLTEuNzE5LDguNDMxLTYuMzk3LDE0LjkxMi0xMy4wOTIsMTkuMTNsMjAuNDc0LDE1LjgyOEMxMTguOTgxLDEwMS4xMjksMTI2LjYzNCw4NC44NjEsMTI2LjYzNCw2NCIgZmlsbD0iIzQyODVGNCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9nPjwvZz48L3N2Zz4=";var el=(r=>(r[r.Apple=0]="Apple",r[r.Google=1]="Google",r[r.Facebook=2]="Facebook",r[r.Phone=3]="Phone",r))(el||{});const Rb={0:"Apple",1:"Google",2:"Facebook",3:"Phone"},Lb=[1,2,0,3],jc={Apple:0,Google:1,Facebook:2,Phone:3},Ub={0:gp,1:yp,2:xp,3:"Phone"},Wb={0:"apple.com",1:"google.com",2:"facebook.com",3:"phone"};function Hb(r){function e(l){return l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4)}let t=r.toString(16),s=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16),n=parseInt(t.slice(6,8),16);const a=e(s/255),c=e(i/255),u=e(n/255);return .2126*a+.7152*c+.0722*u}function wp(r,e=155){console.log(r);const t=r.toString(16),s=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16),n=parseInt(t.slice(6,8),16),a=(s*299+i*587+n*114)/1e3;return console.log(a),a>e}function e0(r,e){if(r===null)return e===null;if(e===null||r.size!==e.size)return!1;if(r===e)return!0;for(const t of r)if(!e.has(t))return!1;return!0}async function Yb(){return!0}var Ka=(r=>(r[r.light=0]="light",r[r.dark=1]="dark",r))(Ka||{});class Lt{constructor({background:e=0,primary:t=0,surface:s=0,inverseSurface:i=0,tertiary:n=0,id:a,fontName:c="",themeName:u=""}){o(this,"background",0);o(this,"primary",0);o(this,"surface",0);o(this,"inverseSurface",0);o(this,"tertiary",0);o(this,"id","");o(this,"fontName","");o(this,"themeName","");this.background=e,this.primary=t,this.surface=s,this.inverseSurface=i,this.tertiary=n,this.id=a,this.fontName=c,this.themeName=u}static fromJson(e,t){return new Lt({background:e.background||0,primary:e.primary||0,id:t,themeName:e.themeName||"",surface:e.surface||0,tertiary:e.tertiary||0,inverseSurface:e.inverseSurface||0,fontName:e.fontName||""})}static fromBusinessTheme(e){return new Lt({themeName:e.themeName,background:e.background,primary:e.primary,tertiary:e.tertiary,id:e.id,surface:e.surface,inverseSurface:e.inverseSurface,fontName:e.fontName})}isEqual(e,t=!0){const s=e.toJson();t&&(s.id=e.id);const i=this.toJson();return t&&(i.id=this.id),JSON.stringify(s)===JSON.stringify(i)}get brightness(){return wp(this.background)?1:0}toJson(){const e={};return this.fontName!==""&&(e.fontName=this.fontName),this.surface!==0&&(e.surface=this.surface),this.inverseSurface!==0&&(e.inverseSurface=this.inverseSurface),e.tertiary=this.tertiary,e.themeName=this.themeName,this.background!==0&&(e.background=this.background),this.primary!==0&&(e.primary=this.primary),e}}var St=(r=>(r[r.Grid=0]="Grid",r[r.Carousel=1]="Carousel",r[r.EndlessCarousel=2]="EndlessCarousel",r))(St||{});const t0={0:"grid",1:"carousel",2:"endlessCarousel"},r0={grid:0,carousel:1,endlessCarousel:2},tl={dark:new Lt({fontName:"Varela Round",themeName:"Original",id:"dark",inverseSurface:4279637532,background:4280229673,surface:4280690225,tertiary:4279834916,primary:4294940672}),darkIos:new Lt({fontName:"Varela Round",themeName:"Dark",id:"darkIos",inverseSurface:4281084974,background:4279637528,surface:4280361252,tertiary:4278190080,primary:4278225100}),light:new Lt({fontName:"Varela Round",themeName:"Pink",id:"light",inverseSurface:4294831859,background:4294375158,surface:4294967295,tertiary:4294243315,primary:4294936498}),lightIos:new Lt({fontName:"Varela Round",themeName:"Light",id:"lightIos",inverseSurface:4292664541,background:4294111991,surface:4294967295,tertiary:4293322471,primary:4278221567})};class he{constructor(e){o(this,"id","");o(this,"token","");e&&(this.id=e.I||"",this.token=e.T||"")}static fromShopIconUrl(e){const t=new he;try{const s=e.split("SHOPICON");t.id=s[1].split("?alt")[0];const i=e.split("&token=");return t.token=i[1],t}catch{return new he}}static fromJson(e){const t=new he;return t.id=e.I||"",t.token=e.T||"",t}static fromJsonStr(e){const t=JSON.parse(e),s=new he;return s.id=t.I||"",s.token=t.T||"",s}get isEmpty(){return this.token===""||this.id===""}get isNotEmpty(){return this.token!==""&&this.id!==""}isEqual(e){return e.id==this.id&&e.token==this.token}getShopIconPath(e){return this.token===""||this.id===""?"":`https://firebasestorage.googleapis.com/v0/b/managementsystemapp-c1fda.appspot.com/o/enviroments%2F${ve.replace("enviroments/","")}%2F${e}%2Fimages%2Flogos%2FSHOPICON${this.id}?alt=media&token=${this.token}`}toJsonStr(){const e={I:this.id,T:this.token};return JSON.stringify(e)}toJson(){return{I:this.id,T:this.token}}}class Fe{constructor({amount:e,currency:t}){o(this,"amount",0);o(this,"currency",gr);const s=parseFloat(e)||0;this.amount=parseFloat(s.toFixed(2)),this.currency=t}static fromJson(e){const t=new Fe({amount:"0.0",currency:Rt.fromJson(e.currency)});return e.amount!=null&&(t.amount=typeof e.amount=="number"?e.amount:parseFloat(e.amount)),t}add(e){e.currency.code===this.currency.code&&(this.amount+=e.amount)}isEqual(e){return this.amount===e.amount&&this.currency.code===e.currency.code}toString(){return new Intl.NumberFormat("en-US",{style:"currency",currency:this.currency.code}).format(this.amount).slice(0,-1)}toJson(){return{amount:this.amount,currency:this.currency.toJson()}}}let s0=class Xa{constructor({name:e="",description:t="",id:s="",price:i,imageUrl:n=""}={}){o(this,"description","");o(this,"price");o(this,"imageUrl","");o(this,"id","");o(this,"name","");o(this,"createdAt",new Date);this.name=e||"",this.description=t||"",this.id=s||"",this.price=i,this.imageUrl=n||""}static fromProduct(e){const t=new Xa({id:e.id,description:e.description,price:e.price,imageUrl:e.imageUrl,name:e.name});return t.createdAt=e.createdAt,t}static fromJson(e,t){const s=new Xa({id:t,description:e.description,price:Fe.fromJson(e.price),imageUrl:e.imageUrl,name:e.name});return s.createdAt=e.createdAt,s}toJson(){return{description:this.description,price:this.price?this.price.toJson():null,imageUrl:this.imageUrl,name:this.name,createdAt:this.createdAt}}toString(){return JSON.stringify(this.toJson())}};class fs{constructor(e,t,s,i,n,a=!1){o(this,"title","");o(this,"content","");o(this,"lastModified","");o(this,"index","");o(this,"id","");o(this,"popOnEnter",!1);this.title=e,this.content=t,this.id=s,this.lastModified=i,this.index=n,this.popOnEnter=a}static fromJson(e,t){return new fs(e.title??"",e.content??"",e.id??"",e.lastModified??"",t,e.popOnEnter??!1)}static fromUpdate(e){return new fs(e.title,e.content,e.id,e.lastModified,e.index,e.popOnEnter)}toJson(){const e={};return e.title=this.title,e.id=this.id,e.content=this.content,this.lastModified!==""&&(e.lastModified=this.lastModified),this.popOnEnter&&(e.popOnEnter=this.popOnEnter),e}isValid(){return this.title!==""&&this.content!==""}toString(){return JSON.stringify(this,null,2)}}class Ut{constructor({storyView:e=St.Grid,productView:t=St.Grid,changingImagesSwapSeconds:s=6,shopIconUrl:i="",pickedThemeKey:n="darkIos"}={}){o(this,"storyView",St.Grid);o(this,"productView",St.Grid);o(this,"changingImages",[]);o(this,"products",new Map);o(this,"updates",new Map);o(this,"storyTitle","");o(this,"shopIconUrl","");o(this,"productsTitle","");o(this,"bottomIcons",!1);o(this,"changingImagesSwapSeconds",6);o(this,"pickedThemeKey","darkIos");o(this,"lastTimeToUpdateTerm",new Date(0));o(this,"businessThemes",new Map);o(this,"term","");o(this,"mustConfirmTerm",!1);o(this,"popTermOnFirstEneter",!1);o(this,"isPrivateTheme",!1);this.changingImagesSwapSeconds=s,this.shopIconUrl=i,this.pickedThemeKey=n}static fromJson(e){const t=new Ut;return Object.entries(e.products).forEach(([s,i])=>{t.products.set(s,s0.fromJson(i,s))}),e.changingImages&&(t.changingImages=e.changingImages.map(s=>s)),e.updates&&Object.entries(e.updates).forEach(([s,i])=>{t.updates.set(s,fs.fromJson(i,s))}),e.storyView&&(t.storyView=r0[e.storyView]||St.EndlessCarousel),e.productView&&(t.productView=r0[e.productView]||St.Grid),e.businessThemes&&Object.entries(e.businessThemes).forEach(([s,i])=>{t.businessThemes.set(s,Lt.fromJson(i,s))}),e.lastTimeToUpdateTerm&&(t.lastTimeToUpdateTerm=new Date(e.lastTimeToUpdateTerm)||new Date(0)),t.pickedThemeKey=e.pickedThemeKey||"darkIoss",t.term=e.term||"",t.bottomIcons=e.bottomIcons||!1,t.changingImagesSwapSeconds=e.changingImagesSwapSeconds||6,t.productsTitle=e.productsTitle||"",t.storyTitle=e.storyTitle||"",t.shopIconUrl=e.shopIcon||"",t.mustConfirmTerm=e.mustConfirmTerm||!1,t.popTermOnFirstEneter=e.popTermOnFirstEneter||!1,t.isPrivateTheme=e.isPrivateTheme||!1,t}get shopIconData(){return he.fromShopIconUrl(this.shopIconUrl)}static fromBusinessDesign(e){const t=new Ut;return e.products.forEach((s,i)=>{t.products.set(i,s0.fromProduct(s))}),t.changingImages=[...e.changingImages],e.updates.forEach((s,i)=>{t.updates.set(i,fs.fromUpdate(s))}),t.storyView=e.storyView,e.businessThemes.forEach((s,i)=>{t.businessThemes.set(i,Lt.fromBusinessTheme(s))}),t.shopIconUrl=e.shopIconUrl,t.pickedThemeKey=e.pickedThemeKey,t.lastTimeToUpdateTerm=e.lastTimeToUpdateTerm,t.changingImagesSwapSeconds=e.changingImagesSwapSeconds,t.term=e.term,t.bottomIcons=e.bottomIcons,t.productsTitle=e.productsTitle,t.productView=e.productView,t.storyTitle=e.storyTitle,t.mustConfirmTerm=e.mustConfirmTerm,t.popTermOnFirstEneter=e.popTermOnFirstEneter,t.isPrivateTheme=e.isPrivateTheme,t}toJson(){const e={};return this.storyView!==St.EndlessCarousel&&(e.storyView=t0[this.storyView]),this.productView!==St.Grid&&(e.productView=t0[this.storyView]),e.changingImages=this.changingImages,e.products={},this.products.forEach((t,s)=>{e.products[s]=t.toJson()}),e.updates={},this.updates.forEach((t,s)=>{e.updates[s]=t.toJson()}),this.mustConfirmTerm&&(e.mustConfirmTerm=this.mustConfirmTerm),this.popTermOnFirstEneter&&(e.popTermOnFirstEneter=this.popTermOnFirstEneter),this.term!==""&&(e.term=this.term),this.lastTimeToUpdateTerm!==new Date(0)&&(e.lastTimeToUpdateTerm=this.lastTimeToUpdateTerm.toISOString()),e.bottomIcons=this.bottomIcons,e.changingImagesSwapSeconds=this.changingImagesSwapSeconds,e.storyTitle=this.storyTitle,e.productsTitle=this.productsTitle,e.businessThemes={},this.businessThemes.forEach((t,s)=>{tl.hasOwnProperty(s)||(e.businessThemes[s]=t.toJson())}),e.pickedThemeKey=this.pickedThemeKey,e.shopIcon=this.shopIconUrl,e.isPrivateTheme=this.isPrivateTheme,e}}class ms{constructor({businessId:e="",businessName:t="",shopIcon:s=new he}={}){o(this,"businessId","");o(this,"shopIcon",new he);o(this,"businessName","");this.businessId=e,this.shopIcon=s,this.businessName=t}static empty(){return new ms}static fromJsonStr(e){const t=JSON.parse(e),s=ms.empty();return s.businessId=t.businessId,s.businessName=t.businessName,t.shopIcon&&(s.shopIcon=he.fromJsonStr(t.shopIcon)),s}toJsonStr(){const e={businessId:this.businessId,shopIcon:this.shopIcon.toJsonStr(),businessName:this.businessName};return JSON.stringify(e)}}const vp={noPayNoPayment:0,noPayNoPaymentWithReceipts:1,pay100For30WithReceipts:2,pay70For700Actiions:3},Dp=15,bp=20,kp={simpletor_golden_business_month_1:1e3,simpletor_advanced_business_month_1:200,simpletor_basic_business_month_1:0,simpletor_landing_business_month_1:0},Ip={simpletor_golden_business_month_1:100,simpletor_advanced_business_month_1:20,simpletor_basic_business_month_1:10,simpletor_landing_business_month_1:10};class Gi{constructor(e=0,t=0){o(this,"messagesCounter",0);o(this,"paymentRequestCounter",0);o(this,"listener");this.messagesCounter=e,this.paymentRequestCounter=t}static forNewBusiness(){return new Gi(bp,Dp)}static fromProductId(e){return new Gi(kp[e]||0,Ip[e]||0)}setBusinessData(e){this.messagesCounter=parseInt(e.val().messagesCounter.toString())||0,this.paymentRequestCounter=parseInt(e.val().paymentRequestCounter.toString())||0}toJson(){const e={};return e.messagesCounter=this.messagesCounter,e.paymentRequestCounter=this.paymentRequestCounter,e}}class qi{constructor({name:e="",description:t="",id:s="",price:i,imageUrl:n=""}={}){o(this,"description","");o(this,"price");o(this,"imageUrl","");o(this,"id","");o(this,"name","");o(this,"createdAt",new Date);this.name=e||"",this.description=t||"",this.id=s||"",this.price=i,this.imageUrl=n||""}static fromProduct(e){const t=new qi({id:e.id,description:e.description,price:e.price,imageUrl:e.imageUrl,name:e.name});return t.createdAt=e.createdAt,t}static fromJson(e,t){const s=new qi({id:t,description:e.description,price:Fe.fromJson(e.price),imageUrl:e.imageUrl,name:e.name});return s.createdAt=e.createdAt,s}toJson(){return{description:this.description,price:this.price?this.price.toJson():null,imageUrl:this.imageUrl,name:this.name,createdAt:this.createdAt}}toString(){return JSON.stringify(this.toJson())}}var Tp=(r=>(r[r.scheduleSettings=0]="scheduleSettings",r[r.workSettings=1]="workSettings",r[r.customers=2]="customers",r[r.dataPermission=3]="dataPermission",r[r.waitings=4]="waitings",r[r.storyUpload=5]="storyUpload",r[r.resumePermission=6]="resumePermission",r[r.schedulePemission=7]="schedulePemission",r[r.bookingsPermission=8]="bookingsPermission",r[r.invoicesPremission=9]="invoicesPremission",r[r.paymentRequestPermmission=10]="paymentRequestPermmission",r))(Tp||{});const Ap={0:"scheduleSettings",1:"workSettings",2:"customers",6:"resumePermission",3:"dataPermission",9:"invoicesPremission",4:"waitings",5:"storyUpload",7:"schedulePemission",8:"bookingsPermission",10:"paymentRequestPermmission"},Ep={scheduleSettings:0,workSettings:1,customers:2,resumePermission:2,dataPermission:3,invoicesPremission:9,waitings:4,storyUpload:5,schedulePermission:7,bookingsPermission:8,paymentRequestPermission:10},Cp=[0,1,2,3,4,5,6,7,8,9,10];class Ji{constructor(){o(this,"map",{})}static fromJson(e){const t=new Ji;return t.map={},Object.entries(e).forEach(([s,i])=>{t.map[s]=new Map,Cp.forEach(n=>{t.map[s].set(n,e[s][Ep[n]]??!0)})}),t}toJson(){const e={};return Object.entries(this.map).forEach(([t,s])=>{s.forEach((i,n)=>{i||(e[t]??(e[t]={}),e[t][Ap[n]]=i)})}),e}}class ps{constructor({shopName:e="",businessId:t,productId:s="",adress:i="",dynamicLink:n="",revenueCatId:a="",ownersName:c="",instagramAccount:u="",shopPhone:l="",design:h}){o(this,"businesseType",jr.Other);o(this,"currency",gr);o(this,"notifyOnNewCustomer",!0);o(this,"searchable",!0);o(this,"billingIssue",new Map);o(this,"isLandingPageMode",!1);o(this,"allWorkersIds",new Map);o(this,"workersIds",new Map);o(this,"hypPath");o(this,"expiredDate",new Date);o(this,"workersPermissions",new Ji);o(this,"shopPhone","");o(this,"ownersName","");o(this,"companyNumber","");o(this,"ownersPhone","");o(this,"masofNumber","");o(this,"previewDoc","");o(this,"instagramAccount","");o(this,"revenueCatId","");o(this,"pendingWorkersProductsId","");o(this,"adress","");o(this,"workersProductsId","");o(this,"pendingProductId","");o(this,"dynamicLink","");o(this,"shopName","");o(this,"productId","");o(this,"businessId","");o(this,"createdAt",new Date);o(this,"blockedUsersTemp",new Map);o(this,"lastTimeConnected",new Date);o(this,"businessData",new Gi);o(this,"design",new Ut);this.shopName=e,this.businessId=t,this.productId=s,this.adress=i,this.dynamicLink=n,this.revenueCatId=a,this.ownersName=c,this.instagramAccount=u,this.shopPhone=l,this.design=h}static empty(){return new ps({design:new Ut,businessId:""})}get businessPayLoadData(){return new ms({businessId:this.businessId,businessName:this.shopName,shopIcon:this.design.shopIconData})}static fromJson(e,t){const s=new ps({businessId:t,design:new Ut});return s.setData(e,t),s}setData(e,t){if(this.businessId=t,e.currency&&(this.currency=Rt.fromJson(e.currency)),e.design)this.design=Ut.fromJson(e.design);else{const i=e.theme;this.design.pickedThemeKey=i,Object.entries(e.products).forEach(([n,a])=>{this.design.products.set(n,qi.fromJson(a,n))}),e.changingImages&&(this.design.changingImages=e.changingImages.map(n=>n)),e.updates&&e.updates.forEach((n,a)=>{this.design.updates.set(a.toString(),fs.fromJson(n,a.toString()))}),this.design.bottomIcons=e.bottomIcons??!1,this.design.storyTitle=e.storyTitle??"",this.design.changingImagesSwapSeconds=e.changingImagesSwapSeconds??6,this.design.shopIconUrl=e.shopIcon??""}e.workersPermissions!=null&&(this.workersPermissions=Ji.fromJson(e.workersPermissions)),this.previewDoc=e.previewDoc??"",this.workersProductsId=e.workersProductsId??"",this.pendingWorkersProductsId=e.pendingWorkersProductsId??"",this.shopName=e.shopName??"",this.isLandingPageMode=e.isLandingPageMode??!1,this.searchable=e.searchable??!0,e.expiredDate!=null&&(this.expiredDate=new Date(e.expiredDate)),this.notifyOnNewCustomer=e.notifyOnNewCustomer??!0,this.companyNumber=e.companyNumber??"",e.hypPath!=null&&(this.hypPath=vp[e.hypPath]),this.allWorkersIds=new Map,e.allWorkersIds!=null&&Object.entries(e.allWorkersIds).forEach(([i,n])=>{this.allWorkersIds.set(i,n)});const s=this.businessId.split("--")[0];this.allWorkersIds.hasOwnProperty("+"+s)||this.allWorkersIds.set("+"+s,""),this.workersIds=new Map,e.workersIds!=null&&Object.entries(e.workersIds).forEach(([i,n])=>{this.workersIds.set(i,n)}),this.workersIds.hasOwnProperty(s)||this.workersIds.set(s,""),this.dynamicLink=e.dynamicLink??"",this.masofNumber=e.masofNumber??"",this.ownersName=e.ownersName??"",this.revenueCatId=e.revenueCatId??"",this.productId=e.productId??"",this.pendingProductId=e.pendingProductId??"",this.businesseType=ju[e.businesseType]??jr.Other,this.instagramAccount=e.instagramAccount??"",this.adress=e.adress??"",this.shopPhone=e.shopPhone??"";try{e.billingIssue!=null&&Object.entries(e.billingIssue).forEach(([i,n])=>{this.billingIssue.set(i,n.toDate())})}catch{}e.createdAt instanceof pr?this.createdAt=e.createdAt.toDate():typeof e.createdAt=="string"&&(this.createdAt=new Date(e.createdAt)||new Date),e.lastTimeConnected!=null&&(this.lastTimeConnected=new Date(e.lastTimeConnected)||new Date)}toJson(){const e={};return e.notifyOnNewCustomer=this.notifyOnNewCustomer,e.currency=this.currency.toJson(),e.searchable=this.searchable,e.workersProductsId=this.workersProductsId,e.pendingWorkersProductsId=this.pendingWorkersProductsId,e.previewDoc=this.previewDoc,e.masofNumber=this.masofNumber,e.revenueCatId=this.revenueCatId,e.pendingProductId=this.pendingProductId,e.productId=this.productId,e.shopName=this.shopName,this.hypPath&&(e.hypPath=this.hypPath),this.billingIssue.size>0&&(e.billingIssue={},this.billingIssue.forEach((t,s)=>{e.billingIssue[s]=pr.fromDate(t)})),this.dynamicLink!==""&&(e.dynamicLink=this.dynamicLink),e.companyNumber=this.companyNumber,e.expiredDate=this.expiredDate,e.businesseType=this.businesseType,e.ownersName=this.ownersName,e.instagramAccount=this.instagramAccount,e.adress=this.adress,e.shopPhone=this.shopPhone,e.workersPermissions=this.workersPermissions.toJson(),e.workersIds=this.workersIds,e.createdAt=this.createdAt,e.lastTimeConnected=this.lastTimeConnected,this.isLandingPageMode&&(e.isLandingPageMode=this.isLandingPageMode),e.design=this.design.toJson(),e}toString(){return JSON.stringify(this.toJson())}}class $s{constructor({businessId:e,shopPhone:t,type:s,adress:i,ownerName:n,iconUrl:a,businessName:c}){o(this,"businessName","");o(this,"iconUrl","");o(this,"businessId","");o(this,"type",jr.Other);o(this,"adress","");o(this,"ownerName","");o(this,"shopPhone","");this.businessId=e,this.shopPhone=t,this.type=s,this.adress=i,this.ownerName=n,this.iconUrl=a,this.businessName=c}static empty(){return new $s({businessId:"",shopPhone:"",type:jr.Other,adress:"",ownerName:"",iconUrl:"",businessName:""})}static fromJson(e,t){const s=e.businessName||"",i=e.iconUrl||"",n=ju[e.T]||jr.Other,a=e.ON||"",c=e.SP||"",u=e.A||"";return new $s({businessId:t,shopPhone:c,type:n,adress:u,ownerName:a,iconUrl:i,businessName:s})}get toBusinessModel(){const e=new ps({businessId:this.businessId,design:new Ut({shopIconUrl:this.iconUrl})});return e.ownersName=this.ownerName,e.shopPhone=this.shopPhone,e.shopName=this.businessName,e.adress=this.adress,e.businesseType=this.type,e}static fromBusinessInfo(e){return new $s({businessId:e.businessId,shopPhone:e.shopPhone,type:e.type,adress:e.adress,ownerName:e.ownerName,iconUrl:e.iconUrl,businessName:e.businessName})}toJson(){const e={};return e.businessName=this.businessName,e.iconUrl=this.iconUrl,e.ON=this.ownerName,e.SP=this.shopPhone,e.A=this.adress,e.T=pp[this.type],e}isTheSame(e){return e.iconUrl===this.iconUrl&&e.ownerName===this.ownerName&&e.shopPhone===this.shopPhone&&e.adress===this.adress&&e.type===this.type&&e.businessName===this.businessName}toString(){return JSON.stringify(this.toJson())}}var rl={exports:{}};function _p(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Gn={exports:{}};const Pp={},Sp=Object.freeze(Object.defineProperty({__proto__:null,default:Pp},Symbol.toStringTag,{value:"Module"})),Mp=Id(Sp);var i0;function j(){return i0||(i0=1,function(r,e){(function(t,s){r.exports=s()})(Z,function(){var t=t||function(s,i){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof Z<"u"&&Z.crypto&&(n=Z.crypto),!n&&typeof _p=="function")try{n=Mp}catch{}var a=function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function g(){}return function(x){var v;return g.prototype=x,v=new g,g.prototype=null,v}}(),u={},l=u.lib={},h=l.Base=function(){return{extend:function(g){var x=c(this);return g&&x.mixIn(g),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var x in g)g.hasOwnProperty(x)&&(this[x]=g[x]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=l.WordArray=h.extend({init:function(g,x){g=this.words=g||[],x!=i?this.sigBytes=x:this.sigBytes=g.length*4},toString:function(g){return(g||p).stringify(this)},concat:function(g){var x=this.words,v=g.words,I=this.sigBytes,T=g.sigBytes;if(this.clamp(),I%4)for(var b=0;b<T;b++){var A=v[b>>>2]>>>24-b%4*8&255;x[I+b>>>2]|=A<<24-(I+b)%4*8}else for(var C=0;C<T;C+=4)x[I+C>>>2]=v[C>>>2];return this.sigBytes+=T,this},clamp:function(){var g=this.words,x=this.sigBytes;g[x>>>2]&=4294967295<<32-x%4*8,g.length=s.ceil(x/4)},clone:function(){var g=h.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var x=[],v=0;v<g;v+=4)x.push(a());return new d.init(x,g)}}),f=u.enc={},p=f.Hex={stringify:function(g){for(var x=g.words,v=g.sigBytes,I=[],T=0;T<v;T++){var b=x[T>>>2]>>>24-T%4*8&255;I.push((b>>>4).toString(16)),I.push((b&15).toString(16))}return I.join("")},parse:function(g){for(var x=g.length,v=[],I=0;I<x;I+=2)v[I>>>3]|=parseInt(g.substr(I,2),16)<<24-I%8*4;return new d.init(v,x/2)}},m=f.Latin1={stringify:function(g){for(var x=g.words,v=g.sigBytes,I=[],T=0;T<v;T++){var b=x[T>>>2]>>>24-T%4*8&255;I.push(String.fromCharCode(b))}return I.join("")},parse:function(g){for(var x=g.length,v=[],I=0;I<x;I++)v[I>>>2]|=(g.charCodeAt(I)&255)<<24-I%4*8;return new d.init(v,x)}},w=f.Utf8={stringify:function(g){try{return decodeURIComponent(escape(m.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return m.parse(unescape(encodeURIComponent(g)))}},y=l.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=w.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var x,v=this._data,I=v.words,T=v.sigBytes,b=this.blockSize,A=b*4,C=T/A;g?C=s.ceil(C):C=s.max((C|0)-this._minBufferSize,0);var k=C*b,E=s.min(k*4,T);if(k){for(var _=0;_<k;_+=b)this._doProcessBlock(I,_);x=I.splice(0,k),v.sigBytes-=E}return new d.init(x,E)},clone:function(){var g=h.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0});l.Hasher=y.extend({cfg:h.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(g){return function(x,v){return new g.init(v).finalize(x)}},_createHmacHelper:function(g){return function(x,v){return new D.HMAC.init(g,v).finalize(x)}}});var D=u.algo={};return u}(Math);return t})}(Gn)),Gn.exports}var qn={exports:{}},n0;function mn(){return n0||(n0=1,function(r,e){(function(t,s){r.exports=s(j())})(Z,function(t){return function(s){var i=t,n=i.lib,a=n.Base,c=n.WordArray,u=i.x64={};u.Word=a.extend({init:function(l,h){this.high=l,this.low=h}}),u.WordArray=a.extend({init:function(l,h){l=this.words=l||[],h!=s?this.sigBytes=h:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,h=l.length,d=[],f=0;f<h;f++){var p=l[f];d.push(p.high),d.push(p.low)}return c.create(d,this.sigBytes)},clone:function(){for(var l=a.clone.call(this),h=l.words=this.words.slice(0),d=h.length,f=0;f<d;f++)h[f]=h[f].clone();return l}})}(),t})}(qn)),qn.exports}var Jn={exports:{}},a0;function Np(){return a0||(a0=1,function(r,e){(function(t,s){r.exports=s(j())})(Z,function(t){return function(){if(typeof ArrayBuffer=="function"){var s=t,i=s.lib,n=i.WordArray,a=n.init,c=n.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,h=[],d=0;d<l;d++)h[d>>>2]|=u[d]<<24-d%4*8;a.call(this,h,l)}else a.apply(this,arguments)};c.prototype=n}}(),t.lib.WordArray})}(Jn)),Jn.exports}var Zn={exports:{}},o0;function Op(){return o0||(o0=1,function(r,e){(function(t,s){r.exports=s(j())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.WordArray,a=s.enc;a.Utf16=a.Utf16BE={stringify:function(u){for(var l=u.words,h=u.sigBytes,d=[],f=0;f<h;f+=2){var p=l[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(p))}return d.join("")},parse:function(u){for(var l=u.length,h=[],d=0;d<l;d++)h[d>>>1]|=u.charCodeAt(d)<<16-d%2*16;return n.create(h,l*2)}},a.Utf16LE={stringify:function(u){for(var l=u.words,h=u.sigBytes,d=[],f=0;f<h;f+=2){var p=c(l[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(p))}return d.join("")},parse:function(u){for(var l=u.length,h=[],d=0;d<l;d++)h[d>>>1]|=c(u.charCodeAt(d)<<16-d%2*16);return n.create(h,l*2)}};function c(u){return u<<8&4278255360|u>>>8&16711935}}(),t.enc.Utf16})}(Zn)),Zn.exports}var Qn={exports:{}},c0;function Ur(){return c0||(c0=1,function(r,e){(function(t,s){r.exports=s(j())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.WordArray,a=s.enc;a.Base64={stringify:function(u){var l=u.words,h=u.sigBytes,d=this._map;u.clamp();for(var f=[],p=0;p<h;p+=3)for(var m=l[p>>>2]>>>24-p%4*8&255,w=l[p+1>>>2]>>>24-(p+1)%4*8&255,y=l[p+2>>>2]>>>24-(p+2)%4*8&255,D=m<<16|w<<8|y,g=0;g<4&&p+g*.75<h;g++)f.push(d.charAt(D>>>6*(3-g)&63));var x=d.charAt(64);if(x)for(;f.length%4;)f.push(x);return f.join("")},parse:function(u){var l=u.length,h=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<h.length;f++)d[h.charCodeAt(f)]=f}var p=h.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(l=m)}return c(u,l,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function c(u,l,h){for(var d=[],f=0,p=0;p<l;p++)if(p%4){var m=h[u.charCodeAt(p-1)]<<p%4*2,w=h[u.charCodeAt(p)]>>>6-p%4*2,y=m|w;d[f>>>2]|=y<<24-f%4*8,f++}return n.create(d,f)}}(),t.enc.Base64})}(Qn)),Qn.exports}var Kn={exports:{}},u0;function Bp(){return u0||(u0=1,function(r,e){(function(t,s){r.exports=s(j())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.WordArray,a=s.enc;a.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var h=u.words,d=u.sigBytes,f=l?this._safe_map:this._map;u.clamp();for(var p=[],m=0;m<d;m+=3)for(var w=h[m>>>2]>>>24-m%4*8&255,y=h[m+1>>>2]>>>24-(m+1)%4*8&255,D=h[m+2>>>2]>>>24-(m+2)%4*8&255,g=w<<16|y<<8|D,x=0;x<4&&m+x*.75<d;x++)p.push(f.charAt(g>>>6*(3-x)&63));var v=f.charAt(64);if(v)for(;p.length%4;)p.push(v);return p.join("")},parse:function(u,l){l===void 0&&(l=!0);var h=u.length,d=l?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<d.length;p++)f[d.charCodeAt(p)]=p}var m=d.charAt(64);if(m){var w=u.indexOf(m);w!==-1&&(h=w)}return c(u,h,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function c(u,l,h){for(var d=[],f=0,p=0;p<l;p++)if(p%4){var m=h[u.charCodeAt(p-1)]<<p%4*2,w=h[u.charCodeAt(p)]>>>6-p%4*2,y=m|w;d[f>>>2]|=y<<24-f%4*8,f++}return n.create(d,f)}}(),t.enc.Base64url})}(Kn)),Kn.exports}var Xn={exports:{}},l0;function Wr(){return l0||(l0=1,function(r,e){(function(t,s){r.exports=s(j())})(Z,function(t){return function(s){var i=t,n=i.lib,a=n.WordArray,c=n.Hasher,u=i.algo,l=[];(function(){for(var w=0;w<64;w++)l[w]=s.abs(s.sin(w+1))*4294967296|0})();var h=u.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(w,y){for(var D=0;D<16;D++){var g=y+D,x=w[g];w[g]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var v=this._hash.words,I=w[y+0],T=w[y+1],b=w[y+2],A=w[y+3],C=w[y+4],k=w[y+5],E=w[y+6],_=w[y+7],S=w[y+8],L=w[y+9],V=w[y+10],J=w[y+11],pe=w[y+12],oe=w[y+13],de=w[y+14],ue=w[y+15],P=v[0],N=v[1],O=v[2],M=v[3];P=d(P,N,O,M,I,7,l[0]),M=d(M,P,N,O,T,12,l[1]),O=d(O,M,P,N,b,17,l[2]),N=d(N,O,M,P,A,22,l[3]),P=d(P,N,O,M,C,7,l[4]),M=d(M,P,N,O,k,12,l[5]),O=d(O,M,P,N,E,17,l[6]),N=d(N,O,M,P,_,22,l[7]),P=d(P,N,O,M,S,7,l[8]),M=d(M,P,N,O,L,12,l[9]),O=d(O,M,P,N,V,17,l[10]),N=d(N,O,M,P,J,22,l[11]),P=d(P,N,O,M,pe,7,l[12]),M=d(M,P,N,O,oe,12,l[13]),O=d(O,M,P,N,de,17,l[14]),N=d(N,O,M,P,ue,22,l[15]),P=f(P,N,O,M,T,5,l[16]),M=f(M,P,N,O,E,9,l[17]),O=f(O,M,P,N,J,14,l[18]),N=f(N,O,M,P,I,20,l[19]),P=f(P,N,O,M,k,5,l[20]),M=f(M,P,N,O,V,9,l[21]),O=f(O,M,P,N,ue,14,l[22]),N=f(N,O,M,P,C,20,l[23]),P=f(P,N,O,M,L,5,l[24]),M=f(M,P,N,O,de,9,l[25]),O=f(O,M,P,N,A,14,l[26]),N=f(N,O,M,P,S,20,l[27]),P=f(P,N,O,M,oe,5,l[28]),M=f(M,P,N,O,b,9,l[29]),O=f(O,M,P,N,_,14,l[30]),N=f(N,O,M,P,pe,20,l[31]),P=p(P,N,O,M,k,4,l[32]),M=p(M,P,N,O,S,11,l[33]),O=p(O,M,P,N,J,16,l[34]),N=p(N,O,M,P,de,23,l[35]),P=p(P,N,O,M,T,4,l[36]),M=p(M,P,N,O,C,11,l[37]),O=p(O,M,P,N,_,16,l[38]),N=p(N,O,M,P,V,23,l[39]),P=p(P,N,O,M,oe,4,l[40]),M=p(M,P,N,O,I,11,l[41]),O=p(O,M,P,N,A,16,l[42]),N=p(N,O,M,P,E,23,l[43]),P=p(P,N,O,M,L,4,l[44]),M=p(M,P,N,O,pe,11,l[45]),O=p(O,M,P,N,ue,16,l[46]),N=p(N,O,M,P,b,23,l[47]),P=m(P,N,O,M,I,6,l[48]),M=m(M,P,N,O,_,10,l[49]),O=m(O,M,P,N,de,15,l[50]),N=m(N,O,M,P,k,21,l[51]),P=m(P,N,O,M,pe,6,l[52]),M=m(M,P,N,O,A,10,l[53]),O=m(O,M,P,N,V,15,l[54]),N=m(N,O,M,P,T,21,l[55]),P=m(P,N,O,M,S,6,l[56]),M=m(M,P,N,O,ue,10,l[57]),O=m(O,M,P,N,E,15,l[58]),N=m(N,O,M,P,oe,21,l[59]),P=m(P,N,O,M,C,6,l[60]),M=m(M,P,N,O,J,10,l[61]),O=m(O,M,P,N,b,15,l[62]),N=m(N,O,M,P,L,21,l[63]),v[0]=v[0]+P|0,v[1]=v[1]+N|0,v[2]=v[2]+O|0,v[3]=v[3]+M|0},_doFinalize:function(){var w=this._data,y=w.words,D=this._nDataBytes*8,g=w.sigBytes*8;y[g>>>5]|=128<<24-g%32;var x=s.floor(D/4294967296),v=D;y[(g+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,y[(g+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,w.sigBytes=(y.length+1)*4,this._process();for(var I=this._hash,T=I.words,b=0;b<4;b++){var A=T[b];T[b]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return I},clone:function(){var w=c.clone.call(this);return w._hash=this._hash.clone(),w}});function d(w,y,D,g,x,v,I){var T=w+(y&D|~y&g)+x+I;return(T<<v|T>>>32-v)+y}function f(w,y,D,g,x,v,I){var T=w+(y&g|D&~g)+x+I;return(T<<v|T>>>32-v)+y}function p(w,y,D,g,x,v,I){var T=w+(y^D^g)+x+I;return(T<<v|T>>>32-v)+y}function m(w,y,D,g,x,v,I){var T=w+(D^(y|~g))+x+I;return(T<<v|T>>>32-v)+y}i.MD5=c._createHelper(h),i.HmacMD5=c._createHmacHelper(h)}(Math),t.MD5})}(Xn)),Xn.exports}var jn={exports:{}},h0;function sl(){return h0||(h0=1,function(r,e){(function(t,s){r.exports=s(j())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.WordArray,a=i.Hasher,c=s.algo,u=[],l=c.SHA1=a.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(h,d){for(var f=this._hash.words,p=f[0],m=f[1],w=f[2],y=f[3],D=f[4],g=0;g<80;g++){if(g<16)u[g]=h[d+g]|0;else{var x=u[g-3]^u[g-8]^u[g-14]^u[g-16];u[g]=x<<1|x>>>31}var v=(p<<5|p>>>27)+D+u[g];g<20?v+=(m&w|~m&y)+1518500249:g<40?v+=(m^w^y)+1859775393:g<60?v+=(m&w|m&y|w&y)-1894007588:v+=(m^w^y)-899497514,D=y,y=w,w=m<<30|m>>>2,m=p,p=v}f[0]=f[0]+p|0,f[1]=f[1]+m|0,f[2]=f[2]+w|0,f[3]=f[3]+y|0,f[4]=f[4]+D|0},_doFinalize:function(){var h=this._data,d=h.words,f=this._nDataBytes*8,p=h.sigBytes*8;return d[p>>>5]|=128<<24-p%32,d[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(p+64>>>9<<4)+15]=f,h.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});s.SHA1=a._createHelper(l),s.HmacSHA1=a._createHmacHelper(l)}(),t.SHA1})}(jn)),jn.exports}var ea={exports:{}},d0;function Eo(){return d0||(d0=1,function(r,e){(function(t,s){r.exports=s(j())})(Z,function(t){return function(s){var i=t,n=i.lib,a=n.WordArray,c=n.Hasher,u=i.algo,l=[],h=[];(function(){function p(D){for(var g=s.sqrt(D),x=2;x<=g;x++)if(!(D%x))return!1;return!0}function m(D){return(D-(D|0))*4294967296|0}for(var w=2,y=0;y<64;)p(w)&&(y<8&&(l[y]=m(s.pow(w,1/2))),h[y]=m(s.pow(w,1/3)),y++),w++})();var d=[],f=u.SHA256=c.extend({_doReset:function(){this._hash=new a.init(l.slice(0))},_doProcessBlock:function(p,m){for(var w=this._hash.words,y=w[0],D=w[1],g=w[2],x=w[3],v=w[4],I=w[5],T=w[6],b=w[7],A=0;A<64;A++){if(A<16)d[A]=p[m+A]|0;else{var C=d[A-15],k=(C<<25|C>>>7)^(C<<14|C>>>18)^C>>>3,E=d[A-2],_=(E<<15|E>>>17)^(E<<13|E>>>19)^E>>>10;d[A]=k+d[A-7]+_+d[A-16]}var S=v&I^~v&T,L=y&D^y&g^D&g,V=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),J=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),pe=b+J+S+h[A]+d[A],oe=V+L;b=T,T=I,I=v,v=x+pe|0,x=g,g=D,D=y,y=pe+oe|0}w[0]=w[0]+y|0,w[1]=w[1]+D|0,w[2]=w[2]+g|0,w[3]=w[3]+x|0,w[4]=w[4]+v|0,w[5]=w[5]+I|0,w[6]=w[6]+T|0,w[7]=w[7]+b|0},_doFinalize:function(){var p=this._data,m=p.words,w=this._nDataBytes*8,y=p.sigBytes*8;return m[y>>>5]|=128<<24-y%32,m[(y+64>>>9<<4)+14]=s.floor(w/4294967296),m[(y+64>>>9<<4)+15]=w,p.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var p=c.clone.call(this);return p._hash=this._hash.clone(),p}});i.SHA256=c._createHelper(f),i.HmacSHA256=c._createHmacHelper(f)}(Math),t.SHA256})}(ea)),ea.exports}var ta={exports:{}},f0;function Fp(){return f0||(f0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Eo())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.WordArray,a=s.algo,c=a.SHA256,u=a.SHA224=c.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=c._doFinalize.call(this);return l.sigBytes-=4,l}});s.SHA224=c._createHelper(u),s.HmacSHA224=c._createHmacHelper(u)}(),t.SHA224})}(ta)),ta.exports}var ra={exports:{}},m0;function il(){return m0||(m0=1,function(r,e){(function(t,s,i){r.exports=s(j(),mn())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.Hasher,a=s.x64,c=a.Word,u=a.WordArray,l=s.algo;function h(){return c.create.apply(c,arguments)}var d=[h(1116352408,3609767458),h(1899447441,602891725),h(3049323471,3964484399),h(3921009573,2173295548),h(961987163,4081628472),h(1508970993,3053834265),h(2453635748,2937671579),h(2870763221,3664609560),h(3624381080,2734883394),h(310598401,1164996542),h(607225278,1323610764),h(1426881987,3590304994),h(1925078388,4068182383),h(2162078206,991336113),h(2614888103,633803317),h(3248222580,3479774868),h(3835390401,2666613458),h(4022224774,944711139),h(264347078,2341262773),h(604807628,2007800933),h(770255983,1495990901),h(1249150122,1856431235),h(1555081692,3175218132),h(1996064986,2198950837),h(2554220882,3999719339),h(2821834349,766784016),h(2952996808,2566594879),h(3210313671,3203337956),h(3336571891,1034457026),h(3584528711,2466948901),h(113926993,3758326383),h(338241895,168717936),h(666307205,1188179964),h(773529912,1546045734),h(1294757372,1522805485),h(1396182291,2643833823),h(1695183700,2343527390),h(1986661051,1014477480),h(2177026350,1206759142),h(2456956037,344077627),h(2730485921,1290863460),h(2820302411,3158454273),h(3259730800,3505952657),h(3345764771,106217008),h(3516065817,3606008344),h(3600352804,1432725776),h(4094571909,1467031594),h(275423344,851169720),h(430227734,3100823752),h(506948616,1363258195),h(659060556,3750685593),h(883997877,3785050280),h(958139571,3318307427),h(1322822218,3812723403),h(1537002063,2003034995),h(1747873779,3602036899),h(1955562222,1575990012),h(2024104815,1125592928),h(2227730452,2716904306),h(2361852424,442776044),h(2428436474,593698344),h(2756734187,3733110249),h(3204031479,2999351573),h(3329325298,3815920427),h(3391569614,3928383900),h(3515267271,566280711),h(3940187606,3454069534),h(4118630271,4000239992),h(116418474,1914138554),h(174292421,2731055270),h(289380356,3203993006),h(460393269,320620315),h(685471733,587496836),h(852142971,1086792851),h(1017036298,365543100),h(1126000580,2618297676),h(1288033470,3409855158),h(1501505948,4234509866),h(1607167915,987167468),h(1816402316,1246189591)],f=[];(function(){for(var m=0;m<80;m++)f[m]=h()})();var p=l.SHA512=n.extend({_doReset:function(){this._hash=new u.init([new c.init(1779033703,4089235720),new c.init(3144134277,2227873595),new c.init(1013904242,4271175723),new c.init(2773480762,1595750129),new c.init(1359893119,2917565137),new c.init(2600822924,725511199),new c.init(528734635,4215389547),new c.init(1541459225,327033209)])},_doProcessBlock:function(m,w){for(var y=this._hash.words,D=y[0],g=y[1],x=y[2],v=y[3],I=y[4],T=y[5],b=y[6],A=y[7],C=D.high,k=D.low,E=g.high,_=g.low,S=x.high,L=x.low,V=v.high,J=v.low,pe=I.high,oe=I.low,de=T.high,ue=T.low,P=b.high,N=b.low,O=A.high,M=A.low,ye=C,fe=k,Ye=E,Q=_,Cs=S,Vr=L,Fn=V,_s=J,ot=pe,Qe=oe,ki=de,Ps=ue,Ii=P,Ss=N,Rn=O,Ms=M,ct=0;ct<80;ct++){var et,tr,Ti=f[ct];if(ct<16)tr=Ti.high=m[w+ct*2]|0,et=Ti.low=m[w+ct*2+1]|0;else{var vc=f[ct-15],$r=vc.high,Ns=vc.low,Wh=($r>>>1|Ns<<31)^($r>>>8|Ns<<24)^$r>>>7,Dc=(Ns>>>1|$r<<31)^(Ns>>>8|$r<<24)^(Ns>>>7|$r<<25),bc=f[ct-2],zr=bc.high,Os=bc.low,Hh=(zr>>>19|Os<<13)^(zr<<3|Os>>>29)^zr>>>6,kc=(Os>>>19|zr<<13)^(Os<<3|zr>>>29)^(Os>>>6|zr<<26),Ic=f[ct-7],Yh=Ic.high,Vh=Ic.low,Tc=f[ct-16],$h=Tc.high,Ac=Tc.low;et=Dc+Vh,tr=Wh+Yh+(et>>>0<Dc>>>0?1:0),et=et+kc,tr=tr+Hh+(et>>>0<kc>>>0?1:0),et=et+Ac,tr=tr+$h+(et>>>0<Ac>>>0?1:0),Ti.high=tr,Ti.low=et}var zh=ot&ki^~ot&Ii,Ec=Qe&Ps^~Qe&Ss,Gh=ye&Ye^ye&Cs^Ye&Cs,qh=fe&Q^fe&Vr^Q&Vr,Jh=(ye>>>28|fe<<4)^(ye<<30|fe>>>2)^(ye<<25|fe>>>7),Cc=(fe>>>28|ye<<4)^(fe<<30|ye>>>2)^(fe<<25|ye>>>7),Zh=(ot>>>14|Qe<<18)^(ot>>>18|Qe<<14)^(ot<<23|Qe>>>9),Qh=(Qe>>>14|ot<<18)^(Qe>>>18|ot<<14)^(Qe<<23|ot>>>9),_c=d[ct],Kh=_c.high,Pc=_c.low,Ke=Ms+Qh,rr=Rn+Zh+(Ke>>>0<Ms>>>0?1:0),Ke=Ke+Ec,rr=rr+zh+(Ke>>>0<Ec>>>0?1:0),Ke=Ke+Pc,rr=rr+Kh+(Ke>>>0<Pc>>>0?1:0),Ke=Ke+et,rr=rr+tr+(Ke>>>0<et>>>0?1:0),Sc=Cc+qh,Xh=Jh+Gh+(Sc>>>0<Cc>>>0?1:0);Rn=Ii,Ms=Ss,Ii=ki,Ss=Ps,ki=ot,Ps=Qe,Qe=_s+Ke|0,ot=Fn+rr+(Qe>>>0<_s>>>0?1:0)|0,Fn=Cs,_s=Vr,Cs=Ye,Vr=Q,Ye=ye,Q=fe,fe=Ke+Sc|0,ye=rr+Xh+(fe>>>0<Ke>>>0?1:0)|0}k=D.low=k+fe,D.high=C+ye+(k>>>0<fe>>>0?1:0),_=g.low=_+Q,g.high=E+Ye+(_>>>0<Q>>>0?1:0),L=x.low=L+Vr,x.high=S+Cs+(L>>>0<Vr>>>0?1:0),J=v.low=J+_s,v.high=V+Fn+(J>>>0<_s>>>0?1:0),oe=I.low=oe+Qe,I.high=pe+ot+(oe>>>0<Qe>>>0?1:0),ue=T.low=ue+Ps,T.high=de+ki+(ue>>>0<Ps>>>0?1:0),N=b.low=N+Ss,b.high=P+Ii+(N>>>0<Ss>>>0?1:0),M=A.low=M+Ms,A.high=O+Rn+(M>>>0<Ms>>>0?1:0)},_doFinalize:function(){var m=this._data,w=m.words,y=this._nDataBytes*8,D=m.sigBytes*8;w[D>>>5]|=128<<24-D%32,w[(D+128>>>10<<5)+30]=Math.floor(y/4294967296),w[(D+128>>>10<<5)+31]=y,m.sigBytes=w.length*4,this._process();var g=this._hash.toX32();return g},clone:function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m},blockSize:1024/32});s.SHA512=n._createHelper(p),s.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})}(ra)),ra.exports}var sa={exports:{}},p0;function Rp(){return p0||(p0=1,function(r,e){(function(t,s,i){r.exports=s(j(),mn(),il())})(Z,function(t){return function(){var s=t,i=s.x64,n=i.Word,a=i.WordArray,c=s.algo,u=c.SHA512,l=c.SHA384=u.extend({_doReset:function(){this._hash=new a.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var h=u._doFinalize.call(this);return h.sigBytes-=16,h}});s.SHA384=u._createHelper(l),s.HmacSHA384=u._createHmacHelper(l)}(),t.SHA384})}(sa)),sa.exports}var ia={exports:{}},g0;function Lp(){return g0||(g0=1,function(r,e){(function(t,s,i){r.exports=s(j(),mn())})(Z,function(t){return function(s){var i=t,n=i.lib,a=n.WordArray,c=n.Hasher,u=i.x64,l=u.Word,h=i.algo,d=[],f=[],p=[];(function(){for(var y=1,D=0,g=0;g<24;g++){d[y+5*D]=(g+1)*(g+2)/2%64;var x=D%5,v=(2*y+3*D)%5;y=x,D=v}for(var y=0;y<5;y++)for(var D=0;D<5;D++)f[y+5*D]=D+(2*y+3*D)%5*5;for(var I=1,T=0;T<24;T++){for(var b=0,A=0,C=0;C<7;C++){if(I&1){var k=(1<<C)-1;k<32?A^=1<<k:b^=1<<k-32}I&128?I=I<<1^113:I<<=1}p[T]=l.create(b,A)}})();var m=[];(function(){for(var y=0;y<25;y++)m[y]=l.create()})();var w=h.SHA3=c.extend({cfg:c.cfg.extend({outputLength:512}),_doReset:function(){for(var y=this._state=[],D=0;D<25;D++)y[D]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(y,D){for(var g=this._state,x=this.blockSize/2,v=0;v<x;v++){var I=y[D+2*v],T=y[D+2*v+1];I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360;var b=g[v];b.high^=T,b.low^=I}for(var A=0;A<24;A++){for(var C=0;C<5;C++){for(var k=0,E=0,_=0;_<5;_++){var b=g[C+5*_];k^=b.high,E^=b.low}var S=m[C];S.high=k,S.low=E}for(var C=0;C<5;C++)for(var L=m[(C+4)%5],V=m[(C+1)%5],J=V.high,pe=V.low,k=L.high^(J<<1|pe>>>31),E=L.low^(pe<<1|J>>>31),_=0;_<5;_++){var b=g[C+5*_];b.high^=k,b.low^=E}for(var oe=1;oe<25;oe++){var k,E,b=g[oe],de=b.high,ue=b.low,P=d[oe];P<32?(k=de<<P|ue>>>32-P,E=ue<<P|de>>>32-P):(k=ue<<P-32|de>>>64-P,E=de<<P-32|ue>>>64-P);var N=m[f[oe]];N.high=k,N.low=E}var O=m[0],M=g[0];O.high=M.high,O.low=M.low;for(var C=0;C<5;C++)for(var _=0;_<5;_++){var oe=C+5*_,b=g[oe],ye=m[oe],fe=m[(C+1)%5+5*_],Ye=m[(C+2)%5+5*_];b.high=ye.high^~fe.high&Ye.high,b.low=ye.low^~fe.low&Ye.low}var b=g[0],Q=p[A];b.high^=Q.high,b.low^=Q.low}},_doFinalize:function(){var y=this._data,D=y.words;this._nDataBytes*8;var g=y.sigBytes*8,x=this.blockSize*32;D[g>>>5]|=1<<24-g%32,D[(s.ceil((g+1)/x)*x>>>5)-1]|=128,y.sigBytes=D.length*4,this._process();for(var v=this._state,I=this.cfg.outputLength/8,T=I/8,b=[],A=0;A<T;A++){var C=v[A],k=C.high,E=C.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,b.push(E),b.push(k)}return new a.init(b,I)},clone:function(){for(var y=c.clone.call(this),D=y._state=this._state.slice(0),g=0;g<25;g++)D[g]=D[g].clone();return y}});i.SHA3=c._createHelper(w),i.HmacSHA3=c._createHmacHelper(w)}(Math),t.SHA3})}(ia)),ia.exports}var na={exports:{}},x0;function Up(){return x0||(x0=1,function(r,e){(function(t,s){r.exports=s(j())})(Z,function(t){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(s){var i=t,n=i.lib,a=n.WordArray,c=n.Hasher,u=i.algo,l=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),h=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=a.create([0,1518500249,1859775393,2400959708,2840853838]),m=a.create([1352829926,1548603684,1836072691,2053994217,0]),w=u.RIPEMD160=c.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(T,b){for(var A=0;A<16;A++){var C=b+A,k=T[C];T[C]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var E=this._hash.words,_=p.words,S=m.words,L=l.words,V=h.words,J=d.words,pe=f.words,oe,de,ue,P,N,O,M,ye,fe,Ye;O=oe=E[0],M=de=E[1],ye=ue=E[2],fe=P=E[3],Ye=N=E[4];for(var Q,A=0;A<80;A+=1)Q=oe+T[b+L[A]]|0,A<16?Q+=y(de,ue,P)+_[0]:A<32?Q+=D(de,ue,P)+_[1]:A<48?Q+=g(de,ue,P)+_[2]:A<64?Q+=x(de,ue,P)+_[3]:Q+=v(de,ue,P)+_[4],Q=Q|0,Q=I(Q,J[A]),Q=Q+N|0,oe=N,N=P,P=I(ue,10),ue=de,de=Q,Q=O+T[b+V[A]]|0,A<16?Q+=v(M,ye,fe)+S[0]:A<32?Q+=x(M,ye,fe)+S[1]:A<48?Q+=g(M,ye,fe)+S[2]:A<64?Q+=D(M,ye,fe)+S[3]:Q+=y(M,ye,fe)+S[4],Q=Q|0,Q=I(Q,pe[A]),Q=Q+Ye|0,O=Ye,Ye=fe,fe=I(ye,10),ye=M,M=Q;Q=E[1]+ue+fe|0,E[1]=E[2]+P+Ye|0,E[2]=E[3]+N+O|0,E[3]=E[4]+oe+M|0,E[4]=E[0]+de+ye|0,E[0]=Q},_doFinalize:function(){var T=this._data,b=T.words,A=this._nDataBytes*8,C=T.sigBytes*8;b[C>>>5]|=128<<24-C%32,b[(C+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,T.sigBytes=(b.length+1)*4,this._process();for(var k=this._hash,E=k.words,_=0;_<5;_++){var S=E[_];E[_]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}return k},clone:function(){var T=c.clone.call(this);return T._hash=this._hash.clone(),T}});function y(T,b,A){return T^b^A}function D(T,b,A){return T&b|~T&A}function g(T,b,A){return(T|~b)^A}function x(T,b,A){return T&A|b&~A}function v(T,b,A){return T^(b|~A)}function I(T,b){return T<<b|T>>>32-b}i.RIPEMD160=c._createHelper(w),i.HmacRIPEMD160=c._createHmacHelper(w)}(),t.RIPEMD160})}(na)),na.exports}var aa={exports:{}},y0;function Co(){return y0||(y0=1,function(r,e){(function(t,s){r.exports=s(j())})(Z,function(t){(function(){var s=t,i=s.lib,n=i.Base,a=s.enc,c=a.Utf8,u=s.algo;u.HMAC=n.extend({init:function(l,h){l=this._hasher=new l.init,typeof h=="string"&&(h=c.parse(h));var d=l.blockSize,f=d*4;h.sigBytes>f&&(h=l.finalize(h)),h.clamp();for(var p=this._oKey=h.clone(),m=this._iKey=h.clone(),w=p.words,y=m.words,D=0;D<d;D++)w[D]^=1549556828,y[D]^=909522486;p.sigBytes=m.sigBytes=f,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var h=this._hasher,d=h.finalize(l);h.reset();var f=h.finalize(this._oKey.clone().concat(d));return f}})})()})}(aa)),aa.exports}var oa={exports:{}},w0;function Wp(){return w0||(w0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Eo(),Co())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.Base,a=i.WordArray,c=s.algo,u=c.SHA256,l=c.HMAC,h=c.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var p=this.cfg,m=l.create(p.hasher,d),w=a.create(),y=a.create([1]),D=w.words,g=y.words,x=p.keySize,v=p.iterations;D.length<x;){var I=m.update(f).finalize(y);m.reset();for(var T=I.words,b=T.length,A=I,C=1;C<v;C++){A=m.finalize(A),m.reset();for(var k=A.words,E=0;E<b;E++)T[E]^=k[E]}w.concat(I),g[0]++}return w.sigBytes=x*4,w}});s.PBKDF2=function(d,f,p){return h.create(p).compute(d,f)}}(),t.PBKDF2})}(oa)),oa.exports}var ca={exports:{}},v0;function Dr(){return v0||(v0=1,function(r,e){(function(t,s,i){r.exports=s(j(),sl(),Co())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.Base,a=i.WordArray,c=s.algo,u=c.MD5,l=c.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:u,iterations:1}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,d){for(var f,p=this.cfg,m=p.hasher.create(),w=a.create(),y=w.words,D=p.keySize,g=p.iterations;y.length<D;){f&&m.update(f),f=m.update(h).finalize(d),m.reset();for(var x=1;x<g;x++)f=m.finalize(f),m.reset();w.concat(f)}return w.sigBytes=D*4,w}});s.EvpKDF=function(h,d,f){return l.create(f).compute(h,d)}}(),t.EvpKDF})}(ca)),ca.exports}var ua={exports:{}},D0;function Se(){return D0||(D0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Dr())})(Z,function(t){t.lib.Cipher||function(s){var i=t,n=i.lib,a=n.Base,c=n.WordArray,u=n.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var h=l.Base64,d=i.algo,f=d.EvpKDF,p=n.Cipher=u.extend({cfg:a.extend(),createEncryptor:function(k,E){return this.create(this._ENC_XFORM_MODE,k,E)},createDecryptor:function(k,E){return this.create(this._DEC_XFORM_MODE,k,E)},init:function(k,E,_){this.cfg=this.cfg.extend(_),this._xformMode=k,this._key=E,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var E=this._doFinalize();return E},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(E){return typeof E=="string"?C:T}return function(E){return{encrypt:function(_,S,L){return k(S).encrypt(E,_,S,L)},decrypt:function(_,S,L){return k(S).decrypt(E,_,S,L)}}}}()});n.StreamCipher=p.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var m=i.mode={},w=n.BlockCipherMode=a.extend({createEncryptor:function(k,E){return this.Encryptor.create(k,E)},createDecryptor:function(k,E){return this.Decryptor.create(k,E)},init:function(k,E){this._cipher=k,this._iv=E}}),y=m.CBC=function(){var k=w.extend();k.Encryptor=k.extend({processBlock:function(_,S){var L=this._cipher,V=L.blockSize;E.call(this,_,S,V),L.encryptBlock(_,S),this._prevBlock=_.slice(S,S+V)}}),k.Decryptor=k.extend({processBlock:function(_,S){var L=this._cipher,V=L.blockSize,J=_.slice(S,S+V);L.decryptBlock(_,S),E.call(this,_,S,V),this._prevBlock=J}});function E(_,S,L){var V,J=this._iv;J?(V=J,this._iv=s):V=this._prevBlock;for(var pe=0;pe<L;pe++)_[S+pe]^=V[pe]}return k}(),D=i.pad={},g=D.Pkcs7={pad:function(k,E){for(var _=E*4,S=_-k.sigBytes%_,L=S<<24|S<<16|S<<8|S,V=[],J=0;J<S;J+=4)V.push(L);var pe=c.create(V,S);k.concat(pe)},unpad:function(k){var E=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=E}};n.BlockCipher=p.extend({cfg:p.cfg.extend({mode:y,padding:g}),reset:function(){var k;p.reset.call(this);var E=this.cfg,_=E.iv,S=E.mode;this._xformMode==this._ENC_XFORM_MODE?k=S.createEncryptor:(k=S.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,_&&_.words):(this._mode=k.call(S,this,_&&_.words),this._mode.__creator=k)},_doProcessBlock:function(k,E){this._mode.processBlock(k,E)},_doFinalize:function(){var k,E=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(E.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),E.unpad(k)),k},blockSize:128/32});var x=n.CipherParams=a.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),v=i.format={},I=v.OpenSSL={stringify:function(k){var E,_=k.ciphertext,S=k.salt;return S?E=c.create([1398893684,1701076831]).concat(S).concat(_):E=_,E.toString(h)},parse:function(k){var E,_=h.parse(k),S=_.words;return S[0]==1398893684&&S[1]==1701076831&&(E=c.create(S.slice(2,4)),S.splice(0,4),_.sigBytes-=16),x.create({ciphertext:_,salt:E})}},T=n.SerializableCipher=a.extend({cfg:a.extend({format:I}),encrypt:function(k,E,_,S){S=this.cfg.extend(S);var L=k.createEncryptor(_,S),V=L.finalize(E),J=L.cfg;return x.create({ciphertext:V,key:_,iv:J.iv,algorithm:k,mode:J.mode,padding:J.padding,blockSize:k.blockSize,formatter:S.format})},decrypt:function(k,E,_,S){S=this.cfg.extend(S),E=this._parse(E,S.format);var L=k.createDecryptor(_,S).finalize(E.ciphertext);return L},_parse:function(k,E){return typeof k=="string"?E.parse(k,this):k}}),b=i.kdf={},A=b.OpenSSL={execute:function(k,E,_,S,L){if(S||(S=c.random(64/8)),L)var V=f.create({keySize:E+_,hasher:L}).compute(k,S);else var V=f.create({keySize:E+_}).compute(k,S);var J=c.create(V.words.slice(E),_*4);return V.sigBytes=E*4,x.create({key:V,iv:J,salt:S})}},C=n.PasswordBasedCipher=T.extend({cfg:T.cfg.extend({kdf:A}),encrypt:function(k,E,_,S){S=this.cfg.extend(S);var L=S.kdf.execute(_,k.keySize,k.ivSize,S.salt,S.hasher);S.iv=L.iv;var V=T.encrypt.call(this,k,E,L.key,S);return V.mixIn(L),V},decrypt:function(k,E,_,S){S=this.cfg.extend(S),E=this._parse(E,S.format);var L=S.kdf.execute(_,k.keySize,k.ivSize,E.salt,S.hasher);S.iv=L.iv;var V=T.decrypt.call(this,k,E,L.key,S);return V}})}()})}(ua)),ua.exports}var la={exports:{}},b0;function Hp(){return b0||(b0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Se())})(Z,function(t){return t.mode.CFB=function(){var s=t.lib.BlockCipherMode.extend();s.Encryptor=s.extend({processBlock:function(n,a){var c=this._cipher,u=c.blockSize;i.call(this,n,a,u,c),this._prevBlock=n.slice(a,a+u)}}),s.Decryptor=s.extend({processBlock:function(n,a){var c=this._cipher,u=c.blockSize,l=n.slice(a,a+u);i.call(this,n,a,u,c),this._prevBlock=l}});function i(n,a,c,u){var l,h=this._iv;h?(l=h.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var d=0;d<c;d++)n[a+d]^=l[d]}return s}(),t.mode.CFB})}(la)),la.exports}var ha={exports:{}},k0;function Yp(){return k0||(k0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Se())})(Z,function(t){return t.mode.CTR=function(){var s=t.lib.BlockCipherMode.extend(),i=s.Encryptor=s.extend({processBlock:function(n,a){var c=this._cipher,u=c.blockSize,l=this._iv,h=this._counter;l&&(h=this._counter=l.slice(0),this._iv=void 0);var d=h.slice(0);c.encryptBlock(d,0),h[u-1]=h[u-1]+1|0;for(var f=0;f<u;f++)n[a+f]^=d[f]}});return s.Decryptor=i,s}(),t.mode.CTR})}(ha)),ha.exports}var da={exports:{}},I0;function Vp(){return I0||(I0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Se())})(Z,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var s=t.lib.BlockCipherMode.extend();function i(c){if((c>>24&255)===255){var u=c>>16&255,l=c>>8&255,h=c&255;u===255?(u=0,l===255?(l=0,h===255?h=0:++h):++l):++u,c=0,c+=u<<16,c+=l<<8,c+=h}else c+=1<<24;return c}function n(c){return(c[0]=i(c[0]))===0&&(c[1]=i(c[1])),c}var a=s.Encryptor=s.extend({processBlock:function(c,u){var l=this._cipher,h=l.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),n(f);var p=f.slice(0);l.encryptBlock(p,0);for(var m=0;m<h;m++)c[u+m]^=p[m]}});return s.Decryptor=a,s}(),t.mode.CTRGladman})}(da)),da.exports}var fa={exports:{}},T0;function $p(){return T0||(T0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Se())})(Z,function(t){return t.mode.OFB=function(){var s=t.lib.BlockCipherMode.extend(),i=s.Encryptor=s.extend({processBlock:function(n,a){var c=this._cipher,u=c.blockSize,l=this._iv,h=this._keystream;l&&(h=this._keystream=l.slice(0),this._iv=void 0),c.encryptBlock(h,0);for(var d=0;d<u;d++)n[a+d]^=h[d]}});return s.Decryptor=i,s}(),t.mode.OFB})}(fa)),fa.exports}var ma={exports:{}},A0;function zp(){return A0||(A0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Se())})(Z,function(t){return t.mode.ECB=function(){var s=t.lib.BlockCipherMode.extend();return s.Encryptor=s.extend({processBlock:function(i,n){this._cipher.encryptBlock(i,n)}}),s.Decryptor=s.extend({processBlock:function(i,n){this._cipher.decryptBlock(i,n)}}),s}(),t.mode.ECB})}(ma)),ma.exports}var pa={exports:{}},E0;function Gp(){return E0||(E0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Se())})(Z,function(t){return t.pad.AnsiX923={pad:function(s,i){var n=s.sigBytes,a=i*4,c=a-n%a,u=n+c-1;s.clamp(),s.words[u>>>2]|=c<<24-u%4*8,s.sigBytes+=c},unpad:function(s){var i=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=i}},t.pad.Ansix923})}(pa)),pa.exports}var ga={exports:{}},C0;function qp(){return C0||(C0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Se())})(Z,function(t){return t.pad.Iso10126={pad:function(s,i){var n=i*4,a=n-s.sigBytes%n;s.concat(t.lib.WordArray.random(a-1)).concat(t.lib.WordArray.create([a<<24],1))},unpad:function(s){var i=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=i}},t.pad.Iso10126})}(ga)),ga.exports}var xa={exports:{}},_0;function Jp(){return _0||(_0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Se())})(Z,function(t){return t.pad.Iso97971={pad:function(s,i){s.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(s,i)},unpad:function(s){t.pad.ZeroPadding.unpad(s),s.sigBytes--}},t.pad.Iso97971})}(xa)),xa.exports}var ya={exports:{}},P0;function Zp(){return P0||(P0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Se())})(Z,function(t){return t.pad.ZeroPadding={pad:function(s,i){var n=i*4;s.clamp(),s.sigBytes+=n-(s.sigBytes%n||n)},unpad:function(s){for(var i=s.words,n=s.sigBytes-1,n=s.sigBytes-1;n>=0;n--)if(i[n>>>2]>>>24-n%4*8&255){s.sigBytes=n+1;break}}},t.pad.ZeroPadding})}(ya)),ya.exports}var wa={exports:{}},S0;function Qp(){return S0||(S0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Se())})(Z,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(wa)),wa.exports}var va={exports:{}},M0;function Kp(){return M0||(M0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Se())})(Z,function(t){return function(s){var i=t,n=i.lib,a=n.CipherParams,c=i.enc,u=c.Hex,l=i.format;l.Hex={stringify:function(h){return h.ciphertext.toString(u)},parse:function(h){var d=u.parse(h);return a.create({ciphertext:d})}}}(),t.format.Hex})}(va)),va.exports}var Da={exports:{}},N0;function Xp(){return N0||(N0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Ur(),Wr(),Dr(),Se())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.BlockCipher,a=s.algo,c=[],u=[],l=[],h=[],d=[],f=[],p=[],m=[],w=[],y=[];(function(){for(var x=[],v=0;v<256;v++)v<128?x[v]=v<<1:x[v]=v<<1^283;for(var I=0,T=0,v=0;v<256;v++){var b=T^T<<1^T<<2^T<<3^T<<4;b=b>>>8^b&255^99,c[I]=b,u[b]=I;var A=x[I],C=x[A],k=x[C],E=x[b]*257^b*16843008;l[I]=E<<24|E>>>8,h[I]=E<<16|E>>>16,d[I]=E<<8|E>>>24,f[I]=E;var E=k*16843009^C*65537^A*257^I*16843008;p[b]=E<<24|E>>>8,m[b]=E<<16|E>>>16,w[b]=E<<8|E>>>24,y[b]=E,I?(I=A^x[x[x[k^A]]],T^=x[x[T]]):I=T=1}})();var D=[0,1,2,4,8,16,32,64,128,27,54],g=a.AES=n.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var v=this._keyPriorReset=this._key,I=v.words,T=v.sigBytes/4,b=this._nRounds=T+6,A=(b+1)*4,C=this._keySchedule=[],k=0;k<A;k++)k<T?C[k]=I[k]:(x=C[k-1],k%T?T>6&&k%T==4&&(x=c[x>>>24]<<24|c[x>>>16&255]<<16|c[x>>>8&255]<<8|c[x&255]):(x=x<<8|x>>>24,x=c[x>>>24]<<24|c[x>>>16&255]<<16|c[x>>>8&255]<<8|c[x&255],x^=D[k/T|0]<<24),C[k]=C[k-T]^x);for(var E=this._invKeySchedule=[],_=0;_<A;_++){var k=A-_;if(_%4)var x=C[k];else var x=C[k-4];_<4||k<=4?E[_]=x:E[_]=p[c[x>>>24]]^m[c[x>>>16&255]]^w[c[x>>>8&255]]^y[c[x&255]]}}},encryptBlock:function(x,v){this._doCryptBlock(x,v,this._keySchedule,l,h,d,f,c)},decryptBlock:function(x,v){var I=x[v+1];x[v+1]=x[v+3],x[v+3]=I,this._doCryptBlock(x,v,this._invKeySchedule,p,m,w,y,u);var I=x[v+1];x[v+1]=x[v+3],x[v+3]=I},_doCryptBlock:function(x,v,I,T,b,A,C,k){for(var E=this._nRounds,_=x[v]^I[0],S=x[v+1]^I[1],L=x[v+2]^I[2],V=x[v+3]^I[3],J=4,pe=1;pe<E;pe++){var oe=T[_>>>24]^b[S>>>16&255]^A[L>>>8&255]^C[V&255]^I[J++],de=T[S>>>24]^b[L>>>16&255]^A[V>>>8&255]^C[_&255]^I[J++],ue=T[L>>>24]^b[V>>>16&255]^A[_>>>8&255]^C[S&255]^I[J++],P=T[V>>>24]^b[_>>>16&255]^A[S>>>8&255]^C[L&255]^I[J++];_=oe,S=de,L=ue,V=P}var oe=(k[_>>>24]<<24|k[S>>>16&255]<<16|k[L>>>8&255]<<8|k[V&255])^I[J++],de=(k[S>>>24]<<24|k[L>>>16&255]<<16|k[V>>>8&255]<<8|k[_&255])^I[J++],ue=(k[L>>>24]<<24|k[V>>>16&255]<<16|k[_>>>8&255]<<8|k[S&255])^I[J++],P=(k[V>>>24]<<24|k[_>>>16&255]<<16|k[S>>>8&255]<<8|k[L&255])^I[J++];x[v]=oe,x[v+1]=de,x[v+2]=ue,x[v+3]=P},keySize:256/32});s.AES=n._createHelper(g)}(),t.AES})}(Da)),Da.exports}var ba={exports:{}},O0;function jp(){return O0||(O0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Ur(),Wr(),Dr(),Se())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.WordArray,a=i.BlockCipher,c=s.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=c.DES=a.extend({_doReset:function(){for(var D=this._key,g=D.words,x=[],v=0;v<56;v++){var I=u[v]-1;x[v]=g[I>>>5]>>>31-I%32&1}for(var T=this._subKeys=[],b=0;b<16;b++){for(var A=T[b]=[],C=h[b],v=0;v<24;v++)A[v/6|0]|=x[(l[v]-1+C)%28]<<31-v%6,A[4+(v/6|0)]|=x[28+(l[v+24]-1+C)%28]<<31-v%6;A[0]=A[0]<<1|A[0]>>>31;for(var v=1;v<7;v++)A[v]=A[v]>>>(v-1)*4+3;A[7]=A[7]<<5|A[7]>>>27}for(var k=this._invSubKeys=[],v=0;v<16;v++)k[v]=T[15-v]},encryptBlock:function(D,g){this._doCryptBlock(D,g,this._subKeys)},decryptBlock:function(D,g){this._doCryptBlock(D,g,this._invSubKeys)},_doCryptBlock:function(D,g,x){this._lBlock=D[g],this._rBlock=D[g+1],m.call(this,4,252645135),m.call(this,16,65535),w.call(this,2,858993459),w.call(this,8,16711935),m.call(this,1,1431655765);for(var v=0;v<16;v++){for(var I=x[v],T=this._lBlock,b=this._rBlock,A=0,C=0;C<8;C++)A|=d[C][((b^I[C])&f[C])>>>0];this._lBlock=b,this._rBlock=T^A}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,m.call(this,1,1431655765),w.call(this,8,16711935),w.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),D[g]=this._lBlock,D[g+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function m(D,g){var x=(this._lBlock>>>D^this._rBlock)&g;this._rBlock^=x,this._lBlock^=x<<D}function w(D,g){var x=(this._rBlock>>>D^this._lBlock)&g;this._lBlock^=x,this._rBlock^=x<<D}s.DES=a._createHelper(p);var y=c.TripleDES=a.extend({_doReset:function(){var D=this._key,g=D.words;if(g.length!==2&&g.length!==4&&g.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=g.slice(0,2),v=g.length<4?g.slice(0,2):g.slice(2,4),I=g.length<6?g.slice(0,2):g.slice(4,6);this._des1=p.createEncryptor(n.create(x)),this._des2=p.createEncryptor(n.create(v)),this._des3=p.createEncryptor(n.create(I))},encryptBlock:function(D,g){this._des1.encryptBlock(D,g),this._des2.decryptBlock(D,g),this._des3.encryptBlock(D,g)},decryptBlock:function(D,g){this._des3.decryptBlock(D,g),this._des2.encryptBlock(D,g),this._des1.decryptBlock(D,g)},keySize:192/32,ivSize:64/32,blockSize:64/32});s.TripleDES=a._createHelper(y)}(),t.TripleDES})}(ba)),ba.exports}var ka={exports:{}},B0;function eg(){return B0||(B0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Ur(),Wr(),Dr(),Se())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.StreamCipher,a=s.algo,c=a.RC4=n.extend({_doReset:function(){for(var h=this._key,d=h.words,f=h.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,w=0;m<256;m++){var y=m%f,D=d[y>>>2]>>>24-y%4*8&255;w=(w+p[m]+D)%256;var g=p[m];p[m]=p[w],p[w]=g}this._i=this._j=0},_doProcessBlock:function(h,d){h[d]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var h=this._S,d=this._i,f=this._j,p=0,m=0;m<4;m++){d=(d+1)%256,f=(f+h[d])%256;var w=h[d];h[d]=h[f],h[f]=w,p|=h[(h[d]+h[f])%256]<<24-m*8}return this._i=d,this._j=f,p}s.RC4=n._createHelper(c);var l=a.RC4Drop=c.extend({cfg:c.cfg.extend({drop:192}),_doReset:function(){c._doReset.call(this);for(var h=this.cfg.drop;h>0;h--)u.call(this)}});s.RC4Drop=n._createHelper(l)}(),t.RC4})}(ka)),ka.exports}var Ia={exports:{}},F0;function tg(){return F0||(F0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Ur(),Wr(),Dr(),Se())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.StreamCipher,a=s.algo,c=[],u=[],l=[],h=a.Rabbit=n.extend({_doReset:function(){for(var f=this._key.words,p=this.cfg.iv,m=0;m<4;m++)f[m]=(f[m]<<8|f[m]>>>24)&16711935|(f[m]<<24|f[m]>>>8)&4278255360;var w=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],y=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var m=0;m<4;m++)d.call(this);for(var m=0;m<8;m++)y[m]^=w[m+4&7];if(p){var D=p.words,g=D[0],x=D[1],v=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,I=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,T=v>>>16|I&4294901760,b=I<<16|v&65535;y[0]^=v,y[1]^=T,y[2]^=I,y[3]^=b,y[4]^=v,y[5]^=T,y[6]^=I,y[7]^=b;for(var m=0;m<4;m++)d.call(this)}},_doProcessBlock:function(f,p){var m=this._X;d.call(this),c[0]=m[0]^m[5]>>>16^m[3]<<16,c[1]=m[2]^m[7]>>>16^m[5]<<16,c[2]=m[4]^m[1]>>>16^m[7]<<16,c[3]=m[6]^m[3]>>>16^m[1]<<16;for(var w=0;w<4;w++)c[w]=(c[w]<<8|c[w]>>>24)&16711935|(c[w]<<24|c[w]>>>8)&4278255360,f[p+w]^=c[w]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,p=this._C,m=0;m<8;m++)u[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<u[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<u[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<u[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<u[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<u[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<u[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<u[6]>>>0?1:0)|0,this._b=p[7]>>>0<u[7]>>>0?1:0;for(var m=0;m<8;m++){var w=f[m]+p[m],y=w&65535,D=w>>>16,g=((y*y>>>17)+y*D>>>15)+D*D,x=((w&4294901760)*w|0)+((w&65535)*w|0);l[m]=g^x}f[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,f[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,f[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,f[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,f[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,f[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,f[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,f[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s.Rabbit=n._createHelper(h)}(),t.Rabbit})}(Ia)),Ia.exports}var Ta={exports:{}},R0;function rg(){return R0||(R0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Ur(),Wr(),Dr(),Se())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.StreamCipher,a=s.algo,c=[],u=[],l=[],h=a.RabbitLegacy=n.extend({_doReset:function(){var f=this._key.words,p=this.cfg.iv,m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],w=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var y=0;y<4;y++)d.call(this);for(var y=0;y<8;y++)w[y]^=m[y+4&7];if(p){var D=p.words,g=D[0],x=D[1],v=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,I=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,T=v>>>16|I&4294901760,b=I<<16|v&65535;w[0]^=v,w[1]^=T,w[2]^=I,w[3]^=b,w[4]^=v,w[5]^=T,w[6]^=I,w[7]^=b;for(var y=0;y<4;y++)d.call(this)}},_doProcessBlock:function(f,p){var m=this._X;d.call(this),c[0]=m[0]^m[5]>>>16^m[3]<<16,c[1]=m[2]^m[7]>>>16^m[5]<<16,c[2]=m[4]^m[1]>>>16^m[7]<<16,c[3]=m[6]^m[3]>>>16^m[1]<<16;for(var w=0;w<4;w++)c[w]=(c[w]<<8|c[w]>>>24)&16711935|(c[w]<<24|c[w]>>>8)&4278255360,f[p+w]^=c[w]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,p=this._C,m=0;m<8;m++)u[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<u[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<u[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<u[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<u[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<u[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<u[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<u[6]>>>0?1:0)|0,this._b=p[7]>>>0<u[7]>>>0?1:0;for(var m=0;m<8;m++){var w=f[m]+p[m],y=w&65535,D=w>>>16,g=((y*y>>>17)+y*D>>>15)+D*D,x=((w&4294901760)*w|0)+((w&65535)*w|0);l[m]=g^x}f[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,f[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,f[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,f[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,f[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,f[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,f[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,f[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s.RabbitLegacy=n._createHelper(h)}(),t.RabbitLegacy})}(Ta)),Ta.exports}var Aa={exports:{}},L0;function sg(){return L0||(L0=1,function(r,e){(function(t,s,i){r.exports=s(j(),Ur(),Wr(),Dr(),Se())})(Z,function(t){return function(){var s=t,i=s.lib,n=i.BlockCipher,a=s.algo;const c=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var h={pbox:[],sbox:[]};function d(y,D){let g=D>>24&255,x=D>>16&255,v=D>>8&255,I=D&255,T=y.sbox[0][g]+y.sbox[1][x];return T=T^y.sbox[2][v],T=T+y.sbox[3][I],T}function f(y,D,g){let x=D,v=g,I;for(let T=0;T<c;++T)x=x^y.pbox[T],v=d(y,x)^v,I=x,x=v,v=I;return I=x,x=v,v=I,v=v^y.pbox[c],x=x^y.pbox[c+1],{left:x,right:v}}function p(y,D,g){let x=D,v=g,I;for(let T=c+1;T>1;--T)x=x^y.pbox[T],v=d(y,x)^v,I=x,x=v,v=I;return I=x,x=v,v=I,v=v^y.pbox[1],x=x^y.pbox[0],{left:x,right:v}}function m(y,D,g){for(let b=0;b<4;b++){y.sbox[b]=[];for(let A=0;A<256;A++)y.sbox[b][A]=l[b][A]}let x=0;for(let b=0;b<c+2;b++)y.pbox[b]=u[b]^D[x],x++,x>=g&&(x=0);let v=0,I=0,T=0;for(let b=0;b<c+2;b+=2)T=f(y,v,I),v=T.left,I=T.right,y.pbox[b]=v,y.pbox[b+1]=I;for(let b=0;b<4;b++)for(let A=0;A<256;A+=2)T=f(y,v,I),v=T.left,I=T.right,y.sbox[b][A]=v,y.sbox[b][A+1]=I;return!0}var w=a.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var y=this._keyPriorReset=this._key,D=y.words,g=y.sigBytes/4;m(h,D,g)}},encryptBlock:function(y,D){var g=f(h,y[D],y[D+1]);y[D]=g.left,y[D+1]=g.right},decryptBlock:function(y,D){var g=p(h,y[D],y[D+1]);y[D]=g.left,y[D+1]=g.right},blockSize:64/32,keySize:128/32,ivSize:64/32});s.Blowfish=n._createHelper(w)}(),t.Blowfish})}(Aa)),Aa.exports}(function(r,e){(function(t,s,i){r.exports=s(j(),mn(),Np(),Op(),Ur(),Bp(),Wr(),sl(),Eo(),Fp(),il(),Rp(),Lp(),Up(),Co(),Wp(),Dr(),Se(),Hp(),Yp(),Vp(),$p(),zp(),Gp(),qp(),Jp(),Zp(),Qp(),Kp(),Xp(),jp(),eg(),tg(),rg(),sg())})(Z,function(t){return t})})(rl);var ig=rl.exports;const ng=ku(ig),{AES:ag,enc:ei,SHA256:_o}=ng,og="16charactersiv!";function cg(r,e){const t=ug(e),s=ei.Utf8.parse(og);return ag.encrypt(r,t,{iv:s}).toString()}function ug(r){let e="htr;lmn;rkmnkryemnkrmnbavsdbshtg6437";return e=_o(r+e).toString(ei.Hex).substring(0,32),ei.Utf8.parse(e)}function Vb(r,e="simpleCode"){return r===""?"":_o(r+e).toString(ei.Hex)}function lg({id:r}){if(r.length<7)return"";const e=r.substring(3,6),t=_o(r+e).toString(ei.Hex);return t.substring(0,Math.min(10,t.length)).replace(/[/.*]/g,"")}function Lr(r){return cg(r+af,nf).replace("/","").replace("*","").replace(".","")}function mi(r,e,t,s){const i=t<r&&!(s>r),n=!(t<e)&&s>e;return i?"BEFORE":n?"AFTER":"STRIKE"}function se(r,e){return new Date(r.getTime()+e.inMilliseconds)}function Sr(r,e){return new Date(r.getTime()-e.inMilliseconds)}function Oi(r,e){return new Y({milliseconds:new Date(r.getTime()-e.getTime()).getTime()})}class nl{constructor({start:e,end:t}){o(this,"start");o(this,"end");this.start=e,this.end=t}}function al(r){r.sort((i,n)=>i.start.getTime()-n.start.getTime());const e=[];let t=0;for(let i=0;i<r.length;i=t){const n=r[i];for(e.push(n),t=i+1;t<r.length;t++){const a=r[t],c=mi(Ws(n.start),Ws(n.end),Ws(a.start),Ws(a.end));if(c==="AFTER")if(n.end.toUTCString()===a.start.toUTCString())n.end=a.end;else break;c==="STRIKE"&&(a.start.getTime()<n.start.getTime()&&(n.start=a.start),a.end.getTime()>n.end.getTime()&&(n.end=a.end))}}const s=[];return e.forEach(i=>{s.push(or(i.start)),s.push(or(i.end))}),s}function hg(r){const e=[];for(let t=0;t<r.length;t+=2){const s=bt(r[t]),i=bt(r[t+1]);e.push(new nl({start:s,end:i}))}return e}function U0(r,e){for(let t=0;t<e.length;t+=2){const s=new Date(e[t]),i=new Date(e[t+1]);r.push(new nl({start:s,end:i}))}}class kt{constructor({token:e="",joinDate:t,id:s="",activeNotifications:i=!0}){o(this,"token");o(this,"joinDate");o(this,"id");o(this,"activeNotifications");this.token=e,this.joinDate=t,this.id=s,this.activeNotifications=i}static fromJson(e,t){const s=new kt({joinDate:new Date(0)});return s.id=t,s.activeNotifications=e.activeNotifications??!0,s.token=e.token??"",s}toJson(){const e={};return this.activeNotifications||(e.activeNotifications=this.activeNotifications),e.token=this.token,e.joinDate=Je(this.joinDate),e}static fromDevice(e){return new kt({joinDate:e.joinDate,id:e.id,activeNotifications:e.activeNotifications,token:e.token})}}class es{constructor({treatmentId:e,minutes:t,maxParticipants:s,paymentRequestId:i,showWaitingList:n=!0,currentParticipants:a=0,expiredDate:c,index:u=0}){o(this,"treatmentId","");o(this,"currentParticipants",0);o(this,"maxParticipants");o(this,"minutes",0);o(this,"index",0);o(this,"showWaitingList",!0);o(this,"expiredDate");o(this,"paymentRequestId");this.treatmentId=e,this.currentParticipants=a,this.minutes=t,this.showWaitingList=n,this.maxParticipants=s,this.expiredDate=c,this.paymentRequestId=i,this.index=u}static fromMultiBookingTime(e){return new es({treatmentId:e.treatmentId,currentParticipants:e.currentParticipants,minutes:e.minutes,showWaitingList:e.showWaitingList,maxParticipants:e.maxParticipants,expiredDate:e.expiredDate,paymentRequestId:e.paymentRequestId,index:e.index})}static fromJson(e){const t=e.TI||"",s=e.CP||0,i=e.M||0,n=e.PRI,a=e.SWL||!0,c=e.ED,u=e.MP,l=e.I||0,h=c?new Date(c):void 0;return new es({treatmentId:t,currentParticipants:s,minutes:i,maxParticipants:u,paymentRequestId:n,showWaitingList:a,expiredDate:h,index:l})}toJson(){const e={};return this.treatmentId!==""&&(e.TI=this.treatmentId),this.currentParticipants!==0&&(e.CP=this.currentParticipants),this.maxParticipants!==void 0&&(e.MP=this.maxParticipants),this.paymentRequestId!==void 0&&(e.PRI=this.paymentRequestId),e.M=this.minutes,this.index!==0&&(e.I=this.index),this.showWaitingList||(e.SWL=this.showWaitingList),this.expiredDate!==void 0&&(e.ED=this.expiredDate.toISOString()),e}}class Po{constructor(){o(this,"times",{});o(this,"duringPaymentsTimes",{});o(this,"listener");o(this,"lastBookingTimeDate")}static fromJson(e){const t=new Po;return t.setData(e),t}setData(e,t=!0){this.times={},e.eventsTimes!==null&&Object.entries(e.eventsTimes).forEach(([s,i])=>{const n=new Date(s),a=new Date;a.setDate(a.getDate()-7),n>=a&&i instanceof Object&&Object.keys(i).length>0&&(this.times[s]={},Object.entries(i).forEach(([c,u])=>{this.times[s][c]=es.fromJson(u)}))}),e.eventsTimeDuringPayment!==null&&t&&Object.entries(e.eventsTimeDuringPayment).forEach(([s,i])=>{const n=new Date(s),a=new Date;a.setDate(a.getDate()-7),n>=a&&Object.entries(i).forEach(([c,u])=>{var h,d;const l=es.fromJson(u);if(l.expiredDate!==null&&l.expiredDate.getTime()>Date.now()){if((h=this.times)[s]??(h[s]={}),this.times[s][c]===null){const f=es.fromMultiBookingTime(l);f.expiredDate=void 0,this.times[s][c]=f}else this.times[s][c].currentParticipants+=l.currentParticipants;n>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=n),(d=this.duringPaymentsTimes)[s]??(d[s]={}),this.duringPaymentsTimes[s][c]=l}})})}toJson(){const e={};return e.eventsTimes={},Object.entries(this.times).forEach(([t,s])=>{e.eventsTimes[t]={},Object.entries(s).forEach(([i,n])=>{e.eventsTimes[t][i]=n.toJson()})}),e}}class ts{constructor(){o(this,"showAdressAlert",!1);o(this,"showAdressMessage",!1);o(this,"showPhoneAlert",!1);o(this,"showPhoneMessage",!1);o(this,"recurrenceNotificationsLastDate");o(this,"notifyOnPayments",!0);o(this,"notifyOnWaitingListEvents",!0);o(this,"notifyAboutCancelNearDeadline",!0);o(this,"notifyOnClientConfirmArrival",!0);o(this,"notifyAboutOrderNearDeadline",!0);o(this,"notificationOption",me.PushOrSMS);o(this,"notifyWhenGettingBooking",!0);o(this,"remindersTypes",new Map)}static fromJson(e){const t=new ts;if(t.notifyOnWaitingListEvents=e.notifyOnWaitingListEvents??!0,e.notificationOption!=null&&(t.notificationOption=fn[e.notificationOption]??me.PushOrSMS),t.recurrenceNotificationsLastDate=e.recurrenceNotificationsLastDate?new Date(e.recurrenceNotificationsLastDate):void 0,t.remindersTypes=new Map,e.remindersTypes!=null)for(const[s,i]of Object.entries(e.remindersTypes)){const n=Pr[s];n!=null&&t.remindersTypes.set(n,i)}else t.remindersTypes.set(Ue.regular,e.minutesBeforeNotify??60);return t.notifyOnClientConfirmArrival=e.notifyOnClientConfirmArrival??!0,t.showAdressAlert=e.showAdressAlert??!1,t.showAdressMessage=e.showAdressMessage??!1,t.showPhoneAlert=e.showPhoneAlert??!1,t.showPhoneMessage=e.showPhoneMessage??!1,t.notifyOnPayments=e.notifyOnPayments??!0,t.notifyAboutCancelNearDeadline=e.notifyAboutCancelNearDeadline??!0,t.notifyAboutOrderNearDeadline=e.notifyAboutOrderNearDeadline??!0,t.notifyWhenGettingBooking=e.notifyWhenGettingBooking??!0,t}isEqual(e){return JSON.stringify(e.toJson())===JSON.stringify(this.toJson())}static fromWorkerNotificatiosSettings(e){return ts.fromJson(e.toJson())}toJson(){const e={};return this.notifyOnWaitingListEvents||(e.notifyOnWaitingListEvents=this.notifyOnWaitingListEvents),this.notificationOption!==me.PushOrSMS&&(e.notificationOption=me[this.notificationOption]),this.recurrenceNotificationsLastDate!=null&&(e.recurrenceNotificationsLastDate=this.recurrenceNotificationsLastDate.toISOString()),this.notifyOnClientConfirmArrival||(e.notifyOnClientConfirmArrival=this.notifyOnClientConfirmArrival),this.notifyOnPayments||(e.notifyOnPayments=this.notifyOnPayments),e.remindersTypes={},this.remindersTypes.forEach((t,s)=>{e.remindersTypes[Ue[s]]=t}),this.notifyAboutCancelNearDeadline||(e.notifyAboutCancelNearDeadline=this.notifyAboutCancelNearDeadline),this.notifyAboutOrderNearDeadline||(e.notifyAboutOrderNearDeadline=this.notifyAboutOrderNearDeadline),this.notifyWhenGettingBooking||(e.notifyWhenGettingBooking=this.notifyWhenGettingBooking),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showAdressMessage&&(e.showAdressMessage=this.showAdressMessage),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.showPhoneMessage&&(e.showPhoneMessage=this.showPhoneMessage),e}toString(){return JSON.stringify(this.toJson())}}class rs{constructor({freeFromPayments:e=!1,hashNumber:t="",blocked:s=!1}={}){o(this,"freeFromPayments");o(this,"hashNumber");o(this,"blocked");this.freeFromPayments=e,this.hashNumber=t,this.blocked=s}static fromJson(e,t){return new rs({freeFromPayments:e.freeFromPayments,hashNumber:t})}static fromMinimalJson(e,t){return new rs({blocked:e.B??!1,freeFromPayments:e.FP,hashNumber:t})}static fromCustomerData(e){return new rs({blocked:e.blocked,freeFromPayments:e.freeFromPayments,hashNumber:e.hashNumber})}toJson(){const e={};return e.freeFromPayments=this.freeFromPayments,e.blocked=this.blocked,e}toMinimalJson(){const e={};return e.FP=this.freeFromPayments,e.B=this.blocked,e}toString(){return JSON.stringify(this.toJson(),null,2)}}class So{constructor({publicCustomersData:e}={}){o(this,"publicCustomersData");this.publicCustomersData=e}static fromJson(e){return new So().setPublicCustomersDataJson(e)}setPublicCustomersDataJson(e){return e.data??(e.data={}),this.publicCustomersData={},Object.entries(e.data).forEach(([t,s])=>{const i=rs.fromMinimalJson(s,t);this.publicCustomersData[t]=i}),this}toMinimalJson(){const e={};return e.data={},this.publicCustomersData??(this.publicCustomersData={}),Object.entries(this.publicCustomersData).forEach(([t,s])=>{e.data[t]=s.toMinimalJson()}),e}}class Er extends Set{constructor(e,t){super(e),t&&this.sort(t)}sort(e){this.clear(),Array.from(this).sort(e).forEach(t=>this.add(t))}get last(){if(this.size===0)return;const e=Array.from(this);return e[e.length-1]}get isEmpty(){return this.size===0}elementAt(e){if(!(e<0||e>=this.size))return Array.from(this)[e]}intersection(e){const t=new Er;return this.forEach(s=>{e.has(s)&&t.add(s)}),t}}const dg={0:"years",1:"months",2:"weeks",3:"days"},fg={years:0,months:1,weeks:2,days:3},mg={0:"YEARLY",1:"MONTHLY",2:"WEEKLY",3:"DAILY"};var ol=(r=>(r[r.endless=0]="endless",r[r.date=1]="date",r[r.repeats=2]="repeats",r))(ol||{});const Ea=["SU","MO","TU","WE","TH","FR","SA"],Ca={0:new Y({days:365}),1:new Y({days:30}),2:new Y({days:7}),3:new Y({days:1})};class yr{constructor({start:e,endOption:t=2,endDate:s,repeats:i=10,interval:n=1,weekDays:a=new Er,customEndDate:c,freqRecurrence:u=3,exceptionDates:l=new Set}){o(this,"start");o(this,"endDate");o(this,"repeats",10);o(this,"interval",1);o(this,"freqRecurrence",3);o(this,"weekDays",new Er);o(this,"endOption",2);o(this,"exceptionDates",new Set);o(this,"customEndDate");this.start=e,this.weekDays=a,this.endOption=t,this.endDate=s,this.repeats=i,this.interval=n,this.customEndDate=c,this.freqRecurrence=u,this.exceptionDates=l}static fromJson(e,t){const s=new yr({});return s.start=t,s.endDate=e.ED?new Date(e.ED):void 0,s.repeats=e.R||10,s.interval=e.I||1,s.weekDays=new Er(e.WD||[]),s.exceptionDates=new Set(Object.keys(e.EDA||{}).map(Ts)),s.freqRecurrence=fg[e.FR]||3,s}toJson({saveStartDate:e=!1,saveEnd:t=!0,saveException:s=!0}){const i={};return t&&this.endDate&&this.endOption===1&&(i.ED=Je(this.endDate)),t&&this.endOption===2&&(i.R=this.repeats),this.interval!==1&&(i.I=this.interval),this.weekDays.size>0&&this.freqRecurrence===2&&(i.WD=[...this.weekDays]),s&&this.exceptionDates.size>0&&(i.EDA={},this.exceptionDates.forEach(n=>{i.EDA[Je(n)]=""})),e&&this.start&&(i.SD=this.start.toISOString()),i.FR=dg[this.freqRecurrence],i}static fromRecurrenceEvent(e){return new yr({start:e.start,endDate:e.endDate,repeats:e.repeats,interval:e.interval,freqRecurrence:e.freqRecurrence,weekDays:new Er(e.weekDays),endOption:e.endOption,exceptionDates:new Set(e.exceptionDates)})}isEqual(e){var t,s;return!this.start||!e.start||this.start.getTime()!==e.start.getTime()||(((t=this.endDate)==null?void 0:t.getTime())||0)!==(((s=e.endDate)==null?void 0:s.getTime())||0)?!1:this.repeats===e.repeats&&this.interval===e.interval&&this.freqRecurrence===e.freqRecurrence&&e0(e.weekDays,this.weekDays)&&e0(e.exceptionDates,this.exceptionDates)&&this.endOption===e.endOption}get syncfuString(){var t,s,i,n;let e=`FREQ=${mg[this.freqRecurrence]};`;if(this.freqRecurrence===1&&this.start&&(e+=`BYMONTHDAY=${this.start.getDate()};`),this.freqRecurrence===0&&this.start&&(e+=`BYMONTHDAY=${this.start.getDate()};BYMONTH=${this.start.getMonth()+1};`),e+=`INTERVAL=${this.interval};`,this.freqRecurrence===2&&this.weekDays.size>0&&(e+="BYDAY=",this.weekDays.forEach(a=>{a<Ea.length&&(e+=Ea[a]+",")}),e=e.slice(0,-1)+";"),this.customEndDate&&(this.endOption===0||this.endOfTheEvent&&this.endOfTheEvent>new Date)){const a=new Date(this.customEndDate.getFullYear(),this.customEndDate.getMonth(),this.customEndDate.getDate(),((t=this.start)==null?void 0:t.getHours())??0,((s=this.start)==null?void 0:s.getMinutes())??0);e+=`UNTIL=${Ce(a,"yyyyMMdd'T'HHmmss'Z'")}`}else switch(this.endOption){case 0:break;case 1:if(this.endDate){const a=new Date(this.endDate.getFullYear(),this.endDate.getMonth(),this.endDate.getDate(),((i=this.start)==null?void 0:i.getHours())??0,((n=this.start)==null?void 0:n.getMinutes())??0);e+=`UNTIL=${Ce(a,"yyyyMMdd'T'HHmmss'Z'")}`}break;case 2:e+=`COUNT=${this.repeats}`;break}return e}get accurances(){if(!this.start||this.endOption===0)return null;if(this.endOption===2)return this.repeats-this.exceptionDates.size;if(this.endOption===1&&this.endDate){let e=0;if(this.exceptionDates.forEach(t=>{t<=this.endDate&&e++}),this.freqRecurrence===2){let t=0;const s=Ir(this.start);this.weekDays.forEach(l=>{this.isAccureInDate({date:se(s,new Y({days:l})),considerException:!1})&&t++});const i=Math.abs(se(s,new Y({days:6})).getTime()-Ir(this.endDate).getTime()),n=Math.floor(i/this.rangeBetweenInterval.inMilliseconds),a=Ir(this.endDate);let c=0;return ze(a).getTime()!==ze(s).getTime()&&this.weekDays.forEach(l=>{this.isAccureInDate({date:se(a,new Y({days:l})),considerException:!1})&&c++}),n*this.weekDays.size+c+t-e}else if(this.freqRecurrence===1){const t=Z0(this.start,this.endDate);return Math.floor(t/this.interval)-e}else{const t=this.start.getTime()-this.endDate.getTime();return Math.floor(Math.abs(t)/this.rangeBetweenInterval.inDays)-e}}return null}get rangeBetweenInterval(){return new Y({minutes:Ca[this.freqRecurrence].inMinutes*this.interval})}get endOfTheEvent(){const e=this.rangeBetweenInterval;if(this.endOption===1&&this.endDate!==null)return this.endDate??null;if(this.endOption===2)if(this.freqRecurrence===2){let t=0;const s=this.start.getDay()===7?0:this.start.getDay();this.weekDays.forEach(l=>{l>=s&&t++});const i=this.repeats-t,n=Math.ceil(i/this.weekDays.size),a=i%this.weekDays.size,c=new Date(this.start.getTime()+new Y({minutes:e.inMinutes*n}).milliseconds),u=Ir(c);this.weekDays=new Er(this.weekDays,(l,h)=>l-h);try{return new Date(u.getTime()+new Y({days:a-1<0?this.weekDays.last:this.weekDays.elementAt(a-1)}).inMilliseconds)}catch{return null}}else return this.freqRecurrence===1?J0(this.start,(this.repeats-1)*this.interval):new Date(this.start.getTime()+new Y({minutes:e.inMinutes*(this.repeats-1)}).inMilliseconds);return null}get explainText(){if(this.start===null)return"";let e="";const t=new Y({minutes:Ca[this.freqRecurrence].inMinutes*this.interval});switch(this.freqRecurrence){case 0:e+=W("yearTamplate").replaceAll("DURATION",Us(t)).replaceAll("DATE",Ce(this.start,"dd/MM"));break;case 1:e+=W("monthTemplate").replaceAll("DURATION",Us(t)).replaceAll("DATE",this.start.getDate().toString());break;case 2:let i="";this.weekDays.forEach(n=>{i+=W(Ea[n])+", "}),i=i.substring(0,i.length-2),e+=W("weekTemplate").replaceAll("DURATION",Us(t)).replaceAll("DAYS",i).replaceAll("AMOUNT",W(Object.keys(this.weekDays).length===1?"onDay":"onDays"));break;case 3:e+=W("dayTemplate").replaceAll("DURATION",Us(t));break}const s=this.endOfTheEvent;return s!==null&&(e+=` ${W("until")} ${Je(s)}`),e}isAccureInDate({date:e,considerException:t=!0}){if(this.start===null||ze(this.start)>e)return!1;const s=this.endOfTheEvent;if(s!==null&&s<ze(e)||t&&this.exceptionDates.has(ze(e)))return!1;const i=new Y({minutes:Ca[this.freqRecurrence].inMinutes*this.interval}),n=new Y({milliseconds:e.getTime()-ze(this.start).getTime()}),a=this.start.getDay()===7?0:this.start.getDay(),c=e.getDay()===7?0:e.getDay();if(this.freqRecurrence===2){const u=7-a,l=i.inDays-a,h=(n.inDays+i.inDays)%i.inDays;return(h<u||h>=l)&&this.weekDays.has(c)}if(this.freqRecurrence===1){const u=Z0(this.start,e);return this.start.getDate()===e.getDate()&&u%this.interval===0}return n.inDays%i.inDays===0}addRangeBetween(e){const t=new Date(e.getUTCDate());return this.freqRecurrence===1?J0(t,this.interval):se(t,new Y({minutes:this.rangeBetweenInterval.inMinutes}))}overlapingDatesWith(e){if(this.start===null||e.start===null)return new Set([new Date(0)]);if(this.endOfTheEvent===null&&e.endOfTheEvent===null)return new Set([new Date(0)]);const t=new Set,s=this._getOptimalEventToPassOver(this,e),i=s[0],n=s[1];let a=i.start;for(;ze(a)<=ze(i.endOfTheEvent);){if(i.freqRecurrence===2){const c=Ir(a);i.weekDays.forEach(u=>{const l=se(c,new Y({days:u}));n.isAccureInDate({date:l})&&i.isAccureInDate({date:l})&&t.add(ze(l))})}else n.isAccureInDate({date:a})&&i.isAccureInDate({date:a})&&t.add(ze(a));a=this.addRangeBetween(a)}return t}get isRelevant(){return this.endOfTheEvent===null||this.endOfTheEvent>new Date}nearestFutureAccurenceDate(e,{needToBeAfterStart:t=!0}={}){if(this.endOfTheEvent!==null&&e>this.endOfTheEvent)return null;if(this.start===null||e<this.start&&t&&this.isAccureInDate({date:this.start}))return this.start??null;const s=new Y({milliseconds:e.getTime()-this.start.getTime()}).inDays;if(this.freqRecurrence===2){const c=Math.floor(s/this.rangeBetweenInterval.inDays);let u=se(this.start,new Y({days:c*this.rangeBetweenInterval.inDays})),l=Ir(u);for(const h of this.weekDays){const d=new Date(l.getTime()+new Y({days:h}).inMilliseconds);if(d>=e&&(this.endOfTheEvent===null||u<=this.endOfTheEvent))return d}u=se(u,this.rangeBetweenInterval),l=Ir(u);for(const h of this.weekDays){const d=se(l,new Y({days:h}));if(d>=e&&(this.endOfTheEvent===null||u<=this.endOfTheEvent))return d}return null}const i=Math.ceil(s/this.rangeBetweenInterval.inDays);let n=se(this.start,new Y({days:i*this.rangeBetweenInterval.inDays}));n<e&&(n=this.addRangeBetween(n));const a=this.endOfTheEvent;for(;!this.isAccureInDate({date:n})&&(a===null||n<a);)n=this.addRangeBetween(n);return a===null||n<=a?n:null}_getOptimalEventToPassOver(e,t){return e.endOfTheEvent===null&&t.endOfTheEvent!==null?[t,e]:e.endOfTheEvent!==null&&t.endOfTheEvent===null?[e,t]:(t.jumps??99999)<(e.jumps??99999)?[t,e]:[e,t]}get jumps(){if(this.start===null||this.endOfTheEvent===null)return null;const t=new Y({milliseconds:this.start.getTime()-this.endOfTheEvent.getTime()}).inMinutes/this.rangeBetweenInterval.inMinutes;return Math.ceil(t*Math.max(this.weekDays.size,1))}toString(){return JSON.stringify(this,null,2)}}class ti{constructor(){o(this,"eventName","");o(this,"from",new Date(0));o(this,"to",new Date(0));o(this,"colorIndex",-1);o(this,"isBreak",!1);o(this,"eventIndex",0);o(this,"eventsBelong",1);o(this,"partOfRecurrence",!1);o(this,"treatmentName","");o(this,"transactionCounter",0);o(this,"wantDelete",!1);o(this,"onHold",!1);o(this,"hasInvoice",!1);o(this,"durationMinutes",0);o(this,"breakNotificaiton",!1);o(this,"minutesBreakNotification",60);o(this,"extraData");o(this,"note",null);o(this,"ids",[]);o(this,"recurrenceEvent");o(this,"timeId");o(this,"hasDebt",!1);o(this,"confirmArrival",!1);o(this,"treatmentId");o(this,"isMulti",!1);o(this,"currentParticipants",0);o(this,"debtCounter",0);o(this,"onHoldCounter",0);o(this,"invoiceCoverCounter",0);o(this,"transactionsPerUser",0);o(this,"wantDeleteCounter",0);o(this,"confirmedArrivalAmount",0);o(this,"recurrenceFatherBookingId");o(this,"recurrenceBreakFatherDate");o(this,"blockSchedule",!0);o(this,"recurrenceBreakRefInfo");o(this,"breakIconData");o(this,"breakBusinessName");o(this,"breakFatherRecurrenceId");o(this,"breakBusinessId");o(this,"breakAddedToDeviceCalendar",!1);o(this,"breakId","");o(this,"vacationId","");o(this,"belongTreatments",1);o(this,"vacationCreatedAt");o(this,"isVacation",!1);o(this,"vacationAddedToDeviceCalendar",!1);o(this,"vacationEndTemp");o(this,"isHoliday",!1);o(this,"holidayReligion");o(this,"subTreatmentName","");o(this,"totalBookingMinutes",0);o(this,"waitingListCounter",1);o(this,"isWaitingList",!1);o(this,"waitingListCustomerGender",te.male);o(this,"customerPhoneWaitingList","")}static fromJson({json:e,timeStr:t,dayString:s,monthString:i,workerId:n,businessModel:a,newTimeId:c}){const u=new ti;u.eventName=e.p??"",u.eventIndex=e.i??0,u.onHold=e.oH??!1,u.eventsBelong=e.EB??1,u.wantDelete=e.wD??!1,u.isVacation=e.IV??!1,u.isVacation&&u.eventName===""&&(u.eventName=W("Vacation")),u.vacationId=c??"",u.breakFatherRecurrenceId=e.BFRI??"",u.vacationAddedToDeviceCalendar=e.VATDC??!1,u.blockSchedule=e.BS??!0,u.transactionCounter=e.TC??0,u.transactionsPerUser=e.TPU??0,u.hasDebt=e.HD??!1,u.debtCounter=e.DC??0,u.treatmentId=e.TID,u.confirmArrival=e.CA??!1,u.confirmedArrivalAmount=e.CAA??0,u.durationMinutes=e.d??0,u.treatmentName=e.TN??"",u.hasInvoice=e.Hi??!1,u.invoiceCoverCounter=e.ICC??0,u.note=e.N,u.recurrenceFatherBookingId=e.RFBI,u.wantDeleteCounter=e.WDC??0,u.onHoldCounter=e.OHC??0,u.isMulti=e.IM??!1,u.currentParticipants=e.CP??0,u.breakNotificaiton=e.BN??!1,u.partOfRecurrence=e.POR??!1,u.minutesBreakNotification=e.MBN??60,u.recurrenceBreakRefInfo=e.RBRI?yr.fromJson(e.RBRI):void 0,u.recurrenceBreakFatherDate=e.RBFD;const l=e.IB??!1,h=new Date(t),d=new Date(`${s}-${i}`),f=new Date(d.getFullYear(),d.getMonth(),d.getDate(),h.getHours(),h.getMinutes());return new Date(f.getTime()+u.durationMinutes*6e4),e.RE&&yr.fromJson(e.RE,f),u.colorIndex=e.c??(u.isVacation?1:0),u.ids=[n],u.isHoliday=!1,u.subTreatmentName="",u.totalBookingMinutes=0,u.waitingListCounter=1,u.isWaitingList=!1,u.waitingListCustomerGender=te.male,u.customerPhoneWaitingList="",l&&(u.breakIconData=a==null?void 0:a.design.shopIconData,u.breakBusinessName=a==null?void 0:a.shopName,u.breakBusinessId=a==null?void 0:a.businessId),e.VE&&(u.vacationEndTemp=Ts(e.VE)),u}get endOfBooking(){return new Date(this.from.getTime()+this.totalBookingMinutes*6e4)}toJson(){const e={};return e.p=this.eventName,e.d=this.durationMinutes,e.c=this.colorIndex,this.minutesBreakNotification!==60&&(e.MBN=this.minutesBreakNotification),this.breakNotificaiton&&(e.BN=this.breakNotificaiton),this.onHoldCounter>0&&(e.OHC=this.onHoldCounter),this.confirmArrival&&(e.CA=this.confirmArrival),this.confirmedArrivalAmount>0&&(e.CAA=this.confirmedArrivalAmount),this.blockSchedule||(e.BS=this.blockSchedule),this.treatmentId!==null&&(e.TID=this.treatmentId),this.wantDeleteCounter>0&&(e.WDC=this.wantDeleteCounter),this.hasDebt&&(e.HD=this.hasDebt),this.transactionCounter>0&&(e.TC=this.transactionCounter),this.transactionsPerUser>0&&(e.TPU=this.transactionsPerUser),this.debtCounter>0&&(e.DC=this.debtCounter),this.invoiceCoverCounter>0&&(e.ICC=this.invoiceCoverCounter),this.eventsBelong!==1&&(e.EB=this.eventsBelong),this.isBreak&&(e.IB=this.isBreak),this.breakId!==""&&(e.BI=this.breakId),this.eventIndex!==0&&(e.i=this.eventIndex),this.treatmentName!==""&&(e.TN=this.treatmentName),this.onHold&&(e.oH=this.onHold),this.isMulti&&(e.IM=this.isMulti),this.currentParticipants>0&&(e.CP=this.currentParticipants),this.wantDelete&&(e.wD=this.wantDelete),this.hasInvoice&&(e.Hi=this.hasInvoice),this.recurrenceEvent!=null&&(e.RE=this.recurrenceEvent.toJson({})),this.note!==null&&this.note!==""&&(e.N=this.note),this.partOfRecurrence&&(e.POR=this.partOfRecurrence),this.recurrenceFatherBookingId!=null&&(e.RFBI=this.recurrenceFatherBookingId),this.isVacation&&(e.IV=this.isVacation),this.breakFatherRecurrenceId!=null&&(e.BFRI=this.breakFatherRecurrenceId),this.vacationAddedToDeviceCalendar&&(e.VATDC=this.vacationAddedToDeviceCalendar),this.vacationCreatedAt!=null&&(e.VCA=this.vacationCreatedAt.toString()),this.breakAddedToDeviceCalendar&&(e.BATDC=this.breakAddedToDeviceCalendar),this.timeId!==null&&this.recurrenceEvent===null&&(e.RTI=this.timeId),this.recurrenceBreakFatherDate!==null&&(e.RBFD=this.recurrenceBreakFatherDate),this.recurrenceBreakRefInfo!=null&&(e.RBRI=this.recurrenceBreakRefInfo.toJson({saveStartDate:!1,saveEnd:!0,saveException:!1})),this.subTreatmentName!==""&&(e.STN=this.subTreatmentName),this.totalBookingMinutes!==this.durationMinutes&&(e.TBM=this.totalBookingMinutes),this.belongTreatments>1&&(e.BTR=this.belongTreatments),e}toString(){return JSON.stringify(this,null,2)}}class Zi{constructor({end:e,start:t,title:s="",id:i="",workerId:n=""}){o(this,"start",new Date(0));o(this,"end",new Date(0));o(this,"id","");o(this,"createdAt");o(this,"workerId","");o(this,"addedToDeviceCalendar",!1);o(this,"colorIndex",1);o(this,"title","");o(this,"recurrenceObj");this.start=t,this.end=e,this.title=s,this.id=i,this.workerId=n,this.recurrenceObj=new yr({start:t,endDate:e,endOption:ol.date})}isOneDay(){return Je(this.end)===Je(this.start)}static fromEvent(e){var s;const t=new Zi({});return t.start=e.from,(s=e.recurrenceEvent)!=null&&s.endDate&&(t.end=e.recurrenceEvent.endDate),t.title=e.eventName,t.createdAt=e.vacationCreatedAt,t.id=e.vacationId,t.recurrenceObj=e.recurrenceEvent,t.addedToDeviceCalendar=e.vacationAddedToDeviceCalendar,t.colorIndex=e.colorIndex,t.workerId=e.ids.length>0?e.ids[0]:"",t}static fromVacation(e){const t=new Zi({});return t.start=e.start,t.end=e.end,t.addedToDeviceCalendar=e.addedToDeviceCalendar,t.id=e.id,t.createdAt=e.createdAt,t.workerId=e.workerId,t.title=e.title,t.colorIndex=e.colorIndex,t}}class pg{constructor(){o(this,"listener");o(this,"recurrenceEvents",{});o(this,"vacationsEvents",{})}get recurrenceEventsList(){const e=[];return Object.entries(this.recurrenceEvents).forEach(([t,s])=>{e.push(...Object.values(s))}),e}get recurrenceEventsListWithOutVacations(){const e=[];return Object.entries(this.recurrenceEvents).forEach(([t,s])=>{Object.entries(s).forEach(([i,n])=>{n.isVacation||e.push(n)})}),e}setRecurrenceEvents(e,t,s,{putBreaks:i=!0}={}){this.recurrenceEvents={},this.vacationsEvents={},Object.entries(e).forEach(([n,a])=>{this.recurrenceEvents[n]={};const c=Ts(n);Object.entries(a).forEach(([u,l])=>{let h="",d="";if(typeof u=="string"){const p=u.split("_");p.length===2&&(h=p[1]),d=p[0]}const f=ti.fromJson({json:l,timeStr:d,businessModel:s,newTimeId:h,dayString:uo(c),monthString:vr(c),workerId:t});f.isVacation&&(this.vacationsEvents[Je(f.from)]=f),!(!i&&f.isBreak)&&(this.recurrenceEvents[n][u]=f)})})}vacationInDate(e){var t;for(const s of Object.values(this.vacationsEvents))if((t=s.recurrenceEvent)!=null&&t.isAccureInDate({date:e}))return Zi.fromEvent(s)}}const gg={R:"R",A:"A"},xg={R:"R",A:"A"};class Qi{constructor({start:e,end:t,operation:s,shifts:i}){o(this,"start",new Date(0));o(this,"end",new Date(0));o(this,"operation","R");o(this,"shifts",[]);this.start=e,this.end=t,this.operation=s,this.shifts=i}static fromJson(e,t){const s=t.split("&"),i=new Date(s[0]),n=new Date(s[1]),a=xg[e.operation]||"R",c=e.shifts.map(u=>u);return new Qi({start:i,end:n,operation:a,shifts:c})}static fromShiftChangeRange(e){const{start:t,end:s,operation:i,shifts:n}=e;return new Qi({start:t,end:s,operation:i,shifts:[...n]})}isSameAs(e){return this.start.getTime()===e.start.getTime()&&this.end.getTime()===e.end.getTime()&&this.operation===e.operation&&this.shifts.toString()===e.shifts.toString()}toJson(){return{operation:gg[this.operation],shifts:this.shifts}}combineShifts(e){if(this.operation==="R")return this.shifts;const t=[];return U0(t,e),U0(t,this.shifts),al(t)}getKey(){const e=this.formatDate(this.start),t=this.formatDate(this.end);return`${e}&${t}`}formatDate(e){return e.toISOString().split("T")[0]}toString(){return JSON.stringify(this.toJson())}}class Ki{constructor({name:e,treatments:t,index:s}){o(this,"name","");o(this,"index","");o(this,"treatments",new Map);this.name=e,this.treatments=t,this.index=s}static fromJson(e,t,{pointerShortBookingTime:s,pointerLognestBookingTime:i}={}){const n=e.name||"",a=t,c=new Map;return e.treatments&&Object.entries(e.treatments).forEach(([u,l])=>{c.set(u,Re.fromJson(l,u)),s&&(c.get(u).totalMinutes<s[0]&&(s[0]=Math.max(c.get(u).times.get("0").workMinutes,5)),c.get(u).totalMinutes===s[0]&&(s[0]=Math.min(Math.max(c.get(u).times.get("0").workMinutes,5),s[0]))),i&&c.get(u).totalMinutes>i[0]&&(i[0]=Math.max(c.get(u).totalMinutes,5))}),new Ki({name:n,treatments:c,index:a})}containTreatment(e){for(const t of Object.values(this.treatments))if(t.id===e)return!0;return!1}toJson(){const e={};return e.name=this.name,e.treatments={},Object.entries(this.treatments).forEach(([t,s])=>{e.treatments[t]=s.toJson()}),e}fromTreatmentSubject(e){return this.name=e.name,this.index=e.index,this.treatments=new Map,e.treatments.forEach((t,s)=>{this.treatments.set(s,Re.fromTreatment(t))}),this}toString(){return JSON.stringify(this.toJson(),null,2)}}const yg=new Set([new Date(2023,10,29)]);class wg{constructor(){o(this,"bookingsTimes",{});o(this,"lastBookingTimeDate");o(this,"duringPaymentBookingsTime",{});o(this,"listener")}findLastBookingsTimesDate(){let e;return Object.entries(this.bookingsTimes).forEach(([t,s])=>{const i=new Date(t);Object.keys(s).length>0&&(!e||i>e)&&(e=i)}),e}setWorkerPublicData(e,t=!0){this.duringPaymentBookingsTime={},this.bookingsTimes={},yg.forEach(s=>{s=new Date(s.getTime()+60*60*1e3),this.bookingsTimes[Je(s)]={[or(s)]:60}}),e.bookingsTimes!=null&&Object.entries(e.bookingsTimes).forEach(([s,i])=>{const n=new Date(s),a=new Date;a.setDate(a.getDate()-7),n>=a&&Object.keys(i).length!=0&&(this.bookingsTimes[s]={},Object.entries(i).forEach(([c,u])=>{c.includes("00:00v")?t&&(this.bookingsTimes[s]={"00:00":1439}):(c!=="00:00"||this.bookingsTimes[s]["00:00"]!=1439)&&(this.bookingsTimes[s][c]=u)}),Object.keys(i).length>0&&n>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=n))}),e.duringPaymentBookingsTime!==null&&Object.entries(e.duringPaymentBookingsTime).forEach(([s,i])=>{const n=new Date(s),a=new Date;a.setDate(a.getDate()-7),n>=a&&Object.entries(i).forEach(([c,u])=>{u.length===2&&u[0]instanceof pr&&u[0].toDate().getTime()>Date.now()&&typeof u[1]=="number"&&(s in this.bookingsTimes?this.bookingsTimes[s][c]=u[1]:this.bookingsTimes[s]={[c]:u[1]},n>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=n),s in this.duringPaymentBookingsTime?this.duringPaymentBookingsTime[s][c]=u:this.duringPaymentBookingsTime[s]={[c]:u})})})}emptyBookingTimesDatesInMonth(e){Object.entries(this.bookingsTimes).forEach(([t,s])=>{t.includes(e)&&(this.bookingsTimes[t]={})})}toWorkerPublicDataJson(){const e={};return e.bookingsTimes={},Object.entries(this.bookingsTimes).forEach(([t,s])=>{e.bookingsTimes[t]={},Object.entries(s).forEach(([i,n])=>{e.bookingsTimes[t][i]=n})}),e.duringPaymentBookingsTime={},Object.entries(this.duringPaymentBookingsTime).forEach(([t,s])=>{e.duringPaymentBookingsTime[t]={},Object.entries(s).forEach(([i,n])=>{e.duringPaymentBookingsTime[t][i]=n})}),e}}class ri{constructor({}){o(this,"daysToAllowBookings",7);o(this,"name","");o(this,"phone","");o(this,"id","");o(this,"profileImg","");o(this,"about","");o(this,"maxTreatments",5);o(this,"allowAppNotification",!0);o(this,"religions",[]);o(this,"waitingListExceptionDays",new Set);o(this,"closeScheduleOnHolidays",!1);o(this,"weekendDays",[5,6]);o(this,"onHoldMinutes",0);o(this,"cancelMinutes",0);o(this,"minutesBeforeBookingToConfirm",1440);o(this,"tempFcm");o(this,"hasRecurrenceEvents",!1);o(this,"windowSpaces",dr.shortestTreatment);o(this,"customWindowMinute",30);o(this,"showWaitingListWhenThereIsChoises",!0);o(this,"isVerifiedPhone",!1);o(this,"lastCleanDate",new Date);o(this,"gender",te.anonymous);o(this,"deleteNeerDedlineBookingMessage");o(this,"orderNeerDedlineBookingMessage");o(this,"generalBookingMessage");o(this,"closeCalendarDate");o(this,"minDateForShowinData",new Date(0));o(this,"openCalendar",!0);o(this,"maxFutureBookings",4);o(this,"currentClientCount",0);o(this,"showVacations",!0);o(this,"mustVerifyPhone",!0);o(this,"allowBookingConfirmations",!0);o(this,"devices",new Map);o(this,"storyImages",new Map);o(this,"createdAt",new Date(0));o(this,"workTime",new Map([["sunday",[]],["monday",[]],["tuesday",[]],["wednesday",[]],["thursday",[]],["friday",[]],["saturday",[]]]));o(this,"isCustomersNeedRecurrence",!1);o(this,"specificRangeChanges",new Map);o(this,"treatmentsSubjects",new Map);o(this,"workerPublicData",new wg);o(this,"publicCustomers",new So);o(this,"storylikesAmount",{});o(this,"multiEventsTimes",new Po);o(this,"generalBookingsCount",0);o(this,"passedBookingsCount",0);o(this,"shortBookingTime",999);o(this,"longestBookingTime",0);o(this,"recurrence",new pg);o(this,"notifications",new ts);o(this,"workerDocListner")}static fromUserPublicData(e){const t=new ri({});return t.phone=e.phoneNumber||"",t.currentClientCount=e.currentClientCount||0,t.id=e.id||t.phone,t.name=e.name||"",e.devices!=null&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([s,i])=>{t.devices.set(s,kt.fromJson(i,s))}):e.currentFcm!=null&&e.currentFcm!==""&&(t.tempFcm=e.currentFcm),t.gender=Jt[e.gender]||te.anonymous,t.lastCleanDate=new Date,t.createdAt=new Date,t.notifications.remindersTypes=new Map([[Ue.regular,60]]),t}static fromWorkerDocJson(e){const t=new ri({});return t.setFromWorkerDoc(e),t}get treatmentsLength(){let e=0;return Object.values(this.treatmentsSubjects).forEach(t=>{e+=Object.values(t.treatments).length}),e}shiftsFor({day:e}){const t=this.workTime.get(Ce(e,"EEEE").toLowerCase())||[];for(const s of Object.values(this.specificRangeChanges))if(mi(s.start,new Date(s.end.getTime()+23*60*60*1e3+59*60*1e3),e,e)==="STRIKE")return s.combineShifts(t);return al(hg(t))}get fcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm!=null)return new Set([this.tempFcm]);const e=new Set;for(const t of Object.values(this.devices))t.activeNotifications&&e.add(t.token);return e}isClosingDate(e){return!this.openCalendar||this.closeCalendarDate!=null&&ze(this.closeCalendarDate).getTime()===ze(e).getTime()}hasTreatemnt(e){for(const t of Object.values(this.treatmentsSubjects))if(t.containTreatment(e))return!0;return!1}get useWhatsApp(){return this.notifications.notificationOption===me.WhatsApp||this.notifications.notificationOption===me.PushOrWhatsApp}setFromWorkerDoc(e){if(this.daysToAllowBookings=e.daysToAllowBookings||7,this.profileImg=e.profileImg||"",this.about=e.about||"",e.lastCleanDate instanceof pr?this.lastCleanDate=e.lastCleanDate.toDate():typeof e.lastCleanDate=="string"&&(this.lastCleanDate=new Date(e.lastCleanDate)||new Date),e.religions&&(this.religions=e.religions.map(t=>ff[t])),e.windowSpaces&&(this.windowSpaces=mp[e.windowSpaces]||dr.shortestTreatment),this.isCustomersNeedRecurrence=e.isCustomersNeedRecurrence||!1,this.showWaitingListWhenThereIsChoises=e.showWaitingListWhenThereIsChoises||!0,this.customWindowMinute=e.customWindowMinute||30,this.closeScheduleOnHolidays=e.closeScheduleOnHolidays||!1,this.weekendDays=e.weekendDays||[5,6],this.mustVerifyPhone=e.mustVerifyPhone||!0,this.showVacations=e.showVacations||!0,this.gender=Jt[e.gender]||te.anonymous,this.allowAppNotification=e.allowAppNotification||!0,this.name=e.name||"",this.maxTreatments=e.maxTreatments||3,this.phone=e.phone||"",this.hasRecurrenceEvents=e.hasRecurrenceEvents||!1,this.id=e.id||e.phone||"",this.minutesBeforeBookingToConfirm=e.minutesBeforeBookingToConfirm||1440,this.maxFutureBookings=e.maxFutureBookings||4,this.treatmentsSubjects=new Map,this.shortBookingTime=999,e.treatmentsSubjects){let t=[this.shortBookingTime],s=[this.longestBookingTime];Object.entries(e.treatmentsSubjects).forEach(([i,n])=>{const a=Ki.fromJson(n,i,{pointerShortBookingTime:t,pointerLognestBookingTime:s});this.treatmentsSubjects.set(i,a)}),this.shortBookingTime=t[0],this.longestBookingTime=s[0]}else if(e.treatments){const t=new Map;let s=0;Object.entries(e.treatments).forEach(([i,n])=>{const a=Re.fromOldJson(n,s.toString(),i,s+4);t.set(s.toString(),a),a.totalMinutes<this.shortBookingTime&&(this.shortBookingTime=Math.max(a.times.get("0").workMinutes,5)),a.totalMinutes===this.shortBookingTime&&(this.shortBookingTime=Math.min(Math.max(a.times.get("0").workMinutes,5),this.shortBookingTime)),s+=1}),this.treatmentsSubjects=new Map([["0",new Ki({name:W("general"),treatments:t,index:"0"})]])}this.onHoldMinutes=e.onHoldMinutes||0,this.cancelMinutes=e.cancelMinutes||0,e.devices!=null&&typeof e.devices=="object"&&Object.entries(e.devices).forEach(([t,s])=>{this.devices.set(t,kt.fromJson(s,t))}),this.deleteNeerDedlineBookingMessage=e.deleteNeerDedlineBookingMessage,this.orderNeerDedlineBookingMessage=e.orderNeerDedlineBookingMessage,this.generalBookingMessage=e.generalBookingMessage,this.workTime=new Map,e.workTime&&Object.entries(e.workTime).forEach(([t,s])=>{this.workTime.set(t,s.map(i=>i))}),this.waitingListExceptionDays=new Set,e.waitingListExceptionDays&&e.waitingListExceptionDays.forEach(t=>{this.waitingListExceptionDays.add(t)}),e.notifications?this.notifications=ts.fromJson(e.notifications):(this.notifications=new ts,this.notifications.notifyOnWaitingListEvents=e.notifyOnWaitingListEvents||!0,this.notifications.showAdressAlert=e.showAdressAlert||!1,this.notifications.showAdressMessage=e.showAdressMessage||!1,this.notifications.showPhoneAlert=e.showPhoneAlert||!1,this.notifications.showPhoneMessage=e.showPhoneMessage||!1,this.notifications.remindersTypes=new Map([[Ue.regular,e.minutesBeforeNotify||60]]),this.notifications.notifyOnPayments=e.notifyOnPayments||!0,this.notifications.notifyAboutCancelNearDeadline=e.notifyAboutCancelNearDeadline||!0,this.notifications.notifyAboutOrderNearDeadline=e.notifyAboutOrderNearDeadline||!0,this.notifications.notifyWhenGettingBooking=e.notifyWhenGettingBooking||!0,e.notificationOption&&(this.notifications.notificationOption=fn[e.notificationOption]||me.OnlyPush),e.recurrenceNotificationsLastDate?this.notifications.recurrenceNotificationsLastDate=new Date(e.recurrenceNotificationsLastDate):this.notifications.recurrenceNotificationsLastDate=new Date),this.specificRangeChanges=new Map,e.specificRangeChanges&&Object.entries(e.specificRangeChanges).forEach(([t,s])=>{const i=Qi.fromJson(s,t);i.end>=ze(new Date)&&this.specificRangeChanges.set(t,i)}),this.storyImages=new Map,e.storyImages&&Object.entries(e.storyImages).forEach(([t,s])=>{this.storyImages.set(t,s)}),e.closeCalendarDate&&(this.closeCalendarDate=new Date(e.closeCalendarDate)),e.minDateForShowinData&&(this.minDateForShowinData=Ts(e.minDateForShowinData)),this.openCalendar=e.openCalendar||!0,this.allowBookingConfirmations=e.allowBookingConfirmations||!0,e.createdAt?this.createdAt=new Date(e.createdAt):this.createdAt=new Date(2023,0,1),this.id===this.phone?this.isVerifiedPhone=!0:this.isVerifiedPhone=e.isVerifiedPhone||!1}getInvoiceWorkerInfo(){return new InvoiceWorkerInfo({workerId:this.id,workerName:this.name})}getFcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm!=null)return new Set([this.tempFcm]);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}toWorkerDocJson(){const e={};return e.workTime={},Object.entries(this.workTime).forEach(([t,s])=>{e.workTime[t]=s}),e.specificRangeChanges={},Object.entries(this.specificRangeChanges).forEach(([t,s])=>{e.specificRangeChanges[t]=s.toJson()}),e.religions=[],this.religions.forEach(t=>{e.religions.push(df[t])}),this.closeCalendarDate!=null&&(e.closeCalendarDate=new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}).format(this.closeCalendarDate)),this.minDateForShowinData.getFullYear()!=new Date(0).getFullYear()&&(e.minDateForShowinData=Je(this.minDateForShowinData)),this.openCalendar||(e.openCalendar=this.openCalendar),e.allowBookingConfirmations=this.allowBookingConfirmations,this.mustVerifyPhone||(e.mustVerifyPhone=this.mustVerifyPhone),this.isCustomersNeedRecurrence&&(e.isCustomersNeedRecurrence=this.isCustomersNeedRecurrence),e.weekendDays=this.weekendDays,e.maxTreatments=this.maxTreatments,e.gender=hs[this.gender],e.onHoldMinutes=this.onHoldMinutes,e.cancelMinutes=this.cancelMinutes,this.hasRecurrenceEvents&&(e.hasRecurrenceEvents=this.hasRecurrenceEvents),this.showVacations||(e.showVacations=this.showVacations),e.devices={},Object.entries(this.devices).forEach(([t,s])=>{e.devices[t]=s.toJson()}),e.deleteNeerDedlineBookingMessage=this.deleteNeerDedlineBookingMessage,e.orderNeerDedlineBookingMessage=this.orderNeerDedlineBookingMessage,e.generalBookingMessage=this.generalBookingMessage,e.closeScheduleOnHolidays=this.closeScheduleOnHolidays,this.customWindowMinute!=30&&(e.customWindowMinute=this.customWindowMinute),this.windowSpaces!=dr.shortestTreatment&&(e.windowSpaces=fp[this.windowSpaces]),this.minutesBeforeBookingToConfirm!=1440&&(e.minutesBeforeBookingToConfirm=this.minutesBeforeBookingToConfirm),e.bookingDaysToDeleteLocal=[],e.notifications=this.notifications.toJson(),e.lastCleanDate=this.lastCleanDate.toString(),e.daysToAllowBookings=this.daysToAllowBookings,this.maxFutureBookings!=4&&(e.maxFutureBookings=this.maxFutureBookings),this.currentClientCount!=0&&(e.currentClientCount=this.currentClientCount),this.allowAppNotification||(e.allowAppNotification=this.allowAppNotification),this.waitingListExceptionDays.entries.length>0&&(e.waitingListExceptionDays=Array.from(this.waitingListExceptionDays)),e.treatmentsSubjects={},Object.entries(this.treatmentsSubjects).forEach(([t,s])=>{e.treatmentsSubjects[t]=s.toJson()}),this.showWaitingListWhenThereIsChoises||(e.showWaitingListWhenThereIsChoises=this.showWaitingListWhenThereIsChoises),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.profileImg=this.profileImg,e.about=this.about,e.name=name,e.phone=this.phone,e.id=this.id,e.storyImages={},Object.entries(this.storyImages).forEach(([t,s])=>{e.storyImages[t]=s}),e.createdAt=this.createdAt.toString(),e}toString(){return JSON.stringify(this.toWorkerDocJson())+this.workerPublicData.toWorkerPublicDataJson().toString()}}function cl({booking:r,worker:e,notificationOption:t,customHsEnoughMessages:s}){if(t=t||(e==null?void 0:e.notifications.notificationOption),!t)return z.none;const i=s||De.GI().business.businessData.messagesCounter>1;switch(t){case me.OnlyPush:return Object.values(r.userFcms).length===0?z.none:z.push;case me.SMSOnly:return!r.canSendMessage||!i?z.none:z.message;case me.WhatAppOnly:return!r.canSendMessage||!i?z.none:z.whatsapp;case me.PushOrSMS:return Object.values(r.userFcms).length>0?z.push:!r.canSendMessage||!i?z.none:z.message;case me.PushOrWhatsApp:return Object.values(r.userFcms).length>0?z.push:!r.canSendMessage||!i?z.none:z.whatsapp;case me.SMSOrPush:return r.canSendMessage&&i?z.message:Object.values(r.userFcms).length>0?z.push:z.none;case me.WhatsAppOrPush:return r.canSendMessage&&i?z.whatsapp:Object.values(r.userFcms).length>0?z.push:z.none;default:return z.none}}function vg(r,e){const t=De.GI().business.businessData.messagesCounter>1;switch(e.notifications.notificationOption){case me.OnlyPush:return Object.keys(r.userFcms).length===0?z.none:z.push;case me.SMSOnly:return!r.canSendMessage||!t?z.none:z.message;case me.WhatAppOnly:return!r.canSendMessage||!t?z.none:z.whatsapp;case me.PushOrSMS:return Object.values(r.userFcms).length>0?z.push:!r.canSendMessage||!t?z.none:z.message;case me.PushOrWhatsApp:return Object.values(r.userFcms).length>0?z.push:!r.canSendMessage||!t?z.none:z.whatsapp;case me.SMSOrPush:return r.canSendMessage&&t?z.message:Object.values(r.userFcms).length>0?z.push:z.none;case me.WhatsAppOrPush:return r.canSendMessage&&t?z.whatsapp:Object.values(r.userFcms).length>0?z.push:z.none;default:return z.none}}class wr{constructor({monthStr:e,invoiceId:t,docId:s,amount:i,issuedBy:n}){o(this,"invoiceId","");o(this,"docId","");o(this,"monthStr","");o(this,"issuedBy","");o(this,"amount",0);this.monthStr=e,this.invoiceId=t,this.docId=s,this.amount=i,this.issuedBy=n}toJson(){const e={};return e.monthStr=this.monthStr,e.docId=this.docId,e.issuedBy=this.issuedBy,e.amount=this.amount,e}static fromJson(e,t,s){const i=new wr({});return i.invoiceId=t,i.docId=e.docId??"",i.monthStr=e.monthStr??"",i.issuedBy=e.issuedBy??s,e.amount!=null&&(i.amount=typeof e.amount=="number"?e.amount:parseFloat(e.amount)),i}static fromBookingInvoiceData(e){const t=new wr({});return t.invoiceId=e.invoiceId,t.docId=e.docId,t.monthStr=e.monthStr,t.issuedBy=e.issuedBy,t.amount=e.amount,t}toString(){return JSON.stringify(this.toJson(),null,2)}}var Ot=(r=>(r[r.deposit=0]="deposit",r[r.payment=1]="payment",r))(Ot||{});const ja={0:"deposit",1:"payment"},eo={deposit:0,payment:1};class Or{constructor({type:e=1,amount:t=0,id:s="",hypId:i="",createdAt:n=new Date(0)}){o(this,"type",1);o(this,"amount",0);o(this,"createdAt",new Date(0));o(this,"id","");o(this,"hypId","");this.type=e,this.amount=parseFloat(t.toFixed(2)),this.id=s,this.hypId=i,this.createdAt=n}static fromJson(e,t){const s=new Or({});return e.amount!=null&&(s.amount=e.amount),s.hypId=e.hypId||"",s.id=t,s.type=eo[e.type]||1,s.createdAt=e.createdAt?new Date(e.createdAt):new Date(0),s}static fromTransaction(e){const t=new Or({});return t.type=e.type,t.amount=e.amount,t.id=e.id,t.hypId=e.hypId,t.createdAt=e.createdAt,t}toJson(){const e={};return e.amount=this.amount,e.hypId=this.hypId,e.type=ja[this.type],e.createdAt=this.createdAt.toISOString(),e}toString(){return JSON.stringify(this.toJson(),null,2)}}class Hr{constructor({userId:e="",name:t="",gender:s=te.male,isVerifiedPhone:i=!1,phone:n="",isExist:a=!0,userDecline:c=!1}){o(this,"userId","");o(this,"name","");o(this,"gender",te.male);o(this,"phone","");o(this,"payments",{});o(this,"isExist",!1);o(this,"fcmTokens");o(this,"isVerifiedPhone",!1);o(this,"userDecline",!1);this.userId=e,this.name=t,this.gender=s,this.isVerifiedPhone=i,this.phone=n,this.isExist=a,this.userDecline=c}get customerHashPhone(){return Lr(this.phone)}get customerPhoneAsCollection(){return this.phone.replaceAll("-","")}get isPaid(){return Object.keys(this.payments).length>0}static fromJson(e,t){const s=new Hr({userId:t,name:e.N??"",gender:e.G?Jt[e.G]:te.male,isVerifiedPhone:e.IVP??!1,phone:e.P??"",isExist:e.IE??!0,userDecline:e.UD??!1});return e.PY!=null&&typeof e.PY=="object"&&Object.entries(e.PY).forEach(([i,n])=>{s.payments[i]=n?new Date(n):new Date(0)}),s}toJson(){const e={};return e.N=this.name,this.isVerifiedPhone&&(e.IVP=this.isVerifiedPhone),this.isExist||(e.IE=this.isExist),e.P=this.phone,this.gender!==te.male&&(e.G=te[this.gender]),Object.keys(this.payments).length>0&&(e.PY={},Object.entries(this.payments).forEach(([t,s])=>{e.PY[t]=s.toString()})),this.userDecline&&(e.UD=this.userDecline),e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class gs{constructor({createdAt:e,amount:t,id:s,showUser:i,description:n=""}){o(this,"createdAt",new Date(0));o(this,"id","");o(this,"amount",0);o(this,"description","");o(this,"showUser",!1);this.createdAt=e,this.amount=t,this.id=s,this.showUser=i,this.description=n}static fromJson(e,t){return new gs({createdAt:e.createdAt?new Date(e.createdAt):new Date(0),amount:e.amount!=null?typeof e.amount=="number"?e.amount:parseFloat(e.amount):0,id:t,showUser:e.showUser??!1,description:e.description??""})}static fromDebt(e){return new gs({createdAt:e.createdAt,amount:e.amount,id:e.id,showUser:e.showUser,description:e.description})}isEqual(e){return e.id===this.id&&e.description===this.description&&e.showUser===this.showUser&&e.createdAt.toString()===this.createdAt.toString()&&this.amount===e.amount}toJson(){const e={};return e.createdAt=this.createdAt.toISOString(),e.amount=this.amount,this.showUser&&(e.showUser=this.showUser),this.description!==""&&(e.description=this.description),e}}class Mo{constructor(){o(this,"customerName","");o(this,"customerPhone","");o(this,"isVerifiedPhone",!1);o(this,"notificationType",z.none);o(this,"workerNotificationOption",me.PushOrSMS);o(this,"workerRemindersTypes",new Map);o(this,"customerId","");o(this,"orderingOptions",st.app);o(this,"remindersTypes",new Map);o(this,"isUserExist",!0);o(this,"signOnDeviceCalendar",!1);o(this,"lastTimeNotifyOnDebt",null);o(this,"clientMail","");o(this,"finishInvoices",!1);o(this,"showAdressAlert",!1);o(this,"userBookingId","");o(this,"showPhoneAlert",!1);o(this,"cancelDate",null);o(this,"wasWaiting",!1);o(this,"createdAt",new Date(0));o(this,"needCancel",!1);o(this,"userGender",te.anonymous);o(this,"status",Be.approved);o(this,"confirmedArrival",!1);o(this,"userFcms",new Set);o(this,"clientNote","");o(this,"invoices",new Map);o(this,"transactions",new Map);o(this,"debts",new Map);o(this,"addToClientAt",!1);o(this,"userDeleted",!1)}copyDataToOrder({worker:e,needToHoldOn:t,workerAction:s,bookingDate:i,addToCalendar:n,business:a,user:c,noteText:u=""}){this.clientNote=u,t?this.status=Be.waiting:this.status=Be.approved,this.showAdressAlert=e.notifications.showAdressAlert,this.showPhoneAlert=e.notifications.showPhoneAlert,!s&&!t&&i.getTime()-Date.now()<60*60*1e3&&(this.confirmedArrival=!0),this.signOnDeviceCalendar=n,this.workerNotificationOption=e.notifications.notificationOption,this.workerRemindersTypes=new Map(e.notifications.remindersTypes),e.notifications.remindersTypes.forEach((h,d)=>{i.getTime()<Date.now()||d===Ue.confirmArrival&&this.confirmedArrival||(i.getTime()-h*60*1e3<Date.now()+1e3?(this.remindersTypes.set(d,Math.abs(Math.floor((Date.now()-i.getTime())/1e3/60/2))-Math.abs(Math.floor((Date.now()-i.getTime())/1e3/60/2))%5),this.remindersTypes.get(d)<10&&this.remindersTypes.delete(d)):this.remindersTypes.set(d,h))}),this.orderingOptions=st.web,this.isUserExist=!0,this.userFcms=new Set(c.userPublicData.fcmsTokens),this.isVerifiedPhone=c.isVerifiedPhone;const l=c.userPublicData.clientAt;this.addToClientAt=!l.has(a.businessId)||!l.get(a.businessId).has(e.id),this.createdAt.getTime()===new Date(0).getTime()&&(this.createdAt=new Date),this.userBookingId,this.notificationType=vg(this,e)}get isDepositTransaction(){let e=!1;return this.transactions.forEach((t,s)=>{e=t.type===Ot.deposit}),e}get transactionsTotalPaymentAmount(){let e=0;return this.transactions.forEach((t,s)=>{t.type===Ot.payment&&(e+=t.amount)}),e}get canSendMessage(){return this.isVerifiedPhone||this.orderingOptions===st.byWorker}get totalDebtAmount(){let e=0;return this.debts.forEach((t,s)=>{e+=t.amount}),e}get invoicePriceAmount(){return Array.from(this.invoices.values()).reduce((e,t)=>e+t.amount,0)}invoicesCoverPrice(e){const{totalAmount:t}=e;return this.finishInvoices||this.invoices.size>0&&Array.from(this.invoices.values()).reduce((s,i)=>s+i.amount,0)>=t}get transactionsTotalDepositAmount(){let e=0;return this.transactions.forEach((t,s)=>{t.type===Ot.deposit&&(e+=t.amount)}),e}get customerHashPhone(){return Lr(this.customerPhone)}get customerPhoneAsCollection(){return this.customerPhone.replace(/-/g,"")}reminderId(e){return this.userBookingId+"__"+Mi[e]}get toPaymentRequestUser(){return new Hr({name:this.customerName,userId:this.customerId,gender:this.userGender,isExist:this.isUserExist,isVerifiedPhone:this.isVerifiedPhone,phone:this.customerPhone})}get typesOfEvents(){const e=new Map;return this.needCancel&&e.set(Nr.needCancel,1),this.debts.size>0&&e.set(Nr.withDebts,1),this.status===Be.waiting&&e.set(Nr.onHold,1),e}static fromJson(e,t,s){const i=new Mo;return i.customerName=e.customerName||"",i.customerId=e.customerId||"",i.customerPhone=e.customerPhone||i.customerId,i.needCancel=e.needCancel||!1,i.remindersTypes=e.remindersTypes?new Map(Object.entries(e.remindersTypes).map(([n,a])=>[Pr[n],a])):new Map([[Ue.regular,e.minutesBeforeNotify||60]]),i.workerRemindersTypes=e.workerRemindersTypes?new Map(Object.entries(e.workerRemindersTypes).map(([n,a])=>[Pr[n],a])):new Map,i.signOnDeviceCalendar=e.signOnDeviceCalendar||!1,i.userDeleted=e.userDeleted||!1,i.isVerifiedPhone=e.isVerifiedPhone||!1,i.clientMail=e.clientMail||"",i.clientNote=e.clientNote||"",i.userBookingId=t,i.orderingOptions=Uu[e.orderingOptions]||st.app,i.debts=e.debts?new Map(Object.entries(e.debts).map(([n,a])=>[n,gs.fromJson(a,n)])):new Map,i.finishInvoices=e.finishInvoices||!1,i.cancelDate=e.cancelDate?new Date(e.cancelDate):null,i.wasWaiting=e.wasWaiting||!1,i.isUserExist=e.isUserExist||!0,i.lastTimeNotifyOnDebt=e.lastTimeNotifyOnDebt?new Date(e.lastTimeNotifyOnDebt):null,i.invoices=e.invoices?new Map(Object.entries(e.invoices).map(([n,a])=>[n,wr.fromJson(a,n,s)])):new Map,i.userGender=Jt[e.userGender]||te.anonymous,i.status=Ru[e.status.toString()]||Be.approved,i.confirmedArrival=e.confirmedArrival||!1,i.showAdressAlert=e.showAdressAlert||!1,i.showPhoneAlert=e.showPhoneAlert||!1,i.notificationType=Wu[e.notificationType]||z.none,i.workerNotificationOption=fn[e.workerNotificationOption]||me.PushOrSMS,i.userFcms=e.userFcms?new Set(e.userFcms):e.deviceFCM&&e.deviceFCM!==""?new Set([e.deviceFCM]):new Set,i.createdAt=e.createdAt?new Date(e.createdAt):new Date(0),i.transactions=e.transactions?new Map(Object.entries(e.transactions).map(([n,a])=>[n,Or.fromJson(a,n)])):new Map,i}toJson(){const e={};return e.customerName=this.customerName,e.customerId=this.customerId,this.wasWaiting&&(e.wasWaiting=this.wasWaiting),this.cancelDate&&(e.cancelDate=this.cancelDate.toISOString()),e.remindersTypes={},this.remindersTypes.forEach((t,s)=>{e.remindersTypes[Mi[s]]=t}),e.workerRemindersTypes={},this.workerRemindersTypes.forEach((t,s)=>{e.workerRemindersTypes[Mi[s]]=t}),this.userDeleted&&(e.userDeleted=this.userDeleted),this.signOnDeviceCalendar&&(e.signOnDeviceCalendar=this.signOnDeviceCalendar),this.clientNote!==""&&(e.clientNote=this.clientNote),this.needCancel&&(e.needCancel=this.needCancel),this.finishInvoices&&(e.finishInvoices=this.finishInvoices),e.userGender=hs[this.userGender],this.invoices.size>0&&(e.invoices={},this.invoices.forEach((t,s)=>{e.invoices[s]=t.toJson()})),this.debts.size>0&&(e.debts={},this.debts.forEach((t,s)=>{e.debts[s]=t.toJson()})),this.lastTimeNotifyOnDebt&&(e.lastTimeNotifyOnDebt=this.lastTimeNotifyOnDebt.toISOString()),this.isUserExist||(e.isUserExist=this.isUserExist),this.orderingOptions!==st.app&&(e.orderingOptions=Lu[this.orderingOptions]),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.clientMail!==""&&(e.clientMail=this.clientMail),e.customerPhone=this.customerPhone,this.status!==Be.approved&&(e.status=Fu[this.status]),this.confirmedArrival&&(e.confirmedArrival=this.confirmedArrival),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.userFcms.size>0&&(e.userFcms=Array.from(this.userFcms)),e.createdAt=this.createdAt.toISOString(),this.transactions.size>0&&(e.transactions={},this.transactions.forEach((t,s)=>{e.transactions[s]=t.toJson()})),e}toString(){return JSON.stringify(this,null,"  ")}}class fr{constructor({name:e="",amoutOfBookings:t=0,gender:s=te.male,email:i="",id:n="",freeFromPayments:a=!1,addedManually:c=!1,customerUuid:u="",isVerifiedPhone:l=!1,workerNaming:h="",blocked:d=!1,phoneNumber:f="",firstBookingsDate:p,userFirstBookingsDate:m,lastBookingsDate:w}){o(this,"name","");o(this,"workerNaming","");o(this,"phoneNumber","");o(this,"freeFromPayments",!1);o(this,"isExapmle",!1);o(this,"id","");o(this,"customerUuid","");o(this,"blocked",!1);o(this,"isVerifiedPhone",!1);o(this,"email","");o(this,"addedManually",!1);o(this,"gender",te.male);o(this,"amoutOfBookings",0);o(this,"firstBookingsDate");o(this,"userFirstBookingsDate");o(this,"lastBookingsDate");o(this,"belongings",new Set);o(this,"isDeleted",!1);this.name=e,this.amoutOfBookings=t,this.gender=s,this.email=i,this.id=n,this.freeFromPayments=a,this.addedManually=c,this.customerUuid=u,this.isVerifiedPhone=l,this.workerNaming=h,this.blocked=d,this.phoneNumber=f,this.firstBookingsDate=p,this.userFirstBookingsDate=m,this.lastBookingsDate=w}static fromJson(e,t){const s=new fr({});return s.name=e.name??"",e.gender!=null&&(s.gender=s.getGenderFromStr(e.gender)),s.isVerifiedPhone=e.isVerifiedPhone??!1,s.freeFromPayments=e.freeFromPayments??!1,s.customerUuid=t,s.phoneNumber=e.phoneNumber??(t.length<20&&t.includes("-")?t:""),e.firstBookingsDate!=""&&e.firstBookingsDate!=null&&(s.firstBookingsDate=new Date(e.firstBookingsDate)),e.userFirstBookingsDate!=""&&e.userFirstBookingsDate!=null&&(s.userFirstBookingsDate=new Date(e.userFirstBookingsDate),(s.firstBookingsDate==null||s.userFirstBookingsDate<s.firstBookingsDate)&&(s.firstBookingsDate=s.userFirstBookingsDate)),e.lastBookingsDate!=null&&(s.lastBookingsDate=new Date(e.lastBookingsDate)),s.workerNaming=e.workerNaming??"",s.amoutOfBookings=e.amoutOfBookings??0,s.blocked=e.blocked??!1,s.email=e.email??"",s.id=e.id??"",s.addedManually=e.AM??!1,s}fromCustomerData(e){return this.name=e.name,this.gender=e.gender,this.isVerifiedPhone=e.isVerifiedPhone,this.phoneNumber=e.phoneNumber,this.belongings=e.belongings,this.email=e.email,this.isDeleted=e.isDeleted,this.blocked=e.blocked,this.id=e.id,this.addedManually=e.addedManually,this.freeFromPayments=e.freeFromPayments,this.customerUuid=e.customerUuid,this.workerNaming=e.workerNaming,this.firstBookingsDate=e.firstBookingsDate,this.lastBookingsDate=e.lastBookingsDate,this.amoutOfBookings=e.amoutOfBookings,this.userFirstBookingsDate=e.userFirstBookingsDate,this}get nameForWorker(){return this.workerNaming==""?this.name:this.workerNaming}get getFirstDate(){return this.firstBookingsDate==null||this.userFirstBookingsDate!=null&&this.userFirstBookingsDate<this.firstBookingsDate?this.userFirstBookingsDate:this.firstBookingsDate}get customerHashPhone(){return Lr(this.phoneNumber)}get customerPhoneAsCollection(){return this.phoneNumber.replaceAll("-","")}isTheSameAs(e,{withId:t=!1}={}){const s=this.toJson();t&&(s.id=e.customerUuid);const i=e.toJson();return t&&(i.id=this.customerUuid),JSON.stringify(i)===JSON.stringify(s)}getGenderFromStr(e){return e==null||e=="A"?te.anonymous:e=="F"?te.female:te.male}getStrFromGender(e){return{[te.anonymous]:"A",[te.male]:"M",[te.female]:"F"}[e]||"A"}get toMultiBookingUser(){const e=new Mo;return e.customerName=this.name!=""?this.name:this.workerNaming,e.customerPhone=this.phoneNumber,e.customerId=this.customerUuid,e.userGender=this.gender,e}get toPaymentRequestUser(){return new Hr({userId:this.customerUuid,name:this.nameForWorker,gender:this.gender,isExist:!this.addedManually,isVerifiedPhone:this.isVerifiedPhone,phone:this.phoneNumber})}isMissing(e){return this.lastBookingsDate==null?!1:(new Date().getTime()-this.lastBookingsDate.getTime())/(1e3*3600*24)>e}amountOfBookingsInMonth(){if(this.firstBookingsDate==null)return-1;if(this.lastBookingsDate==null)return 0;const e=this.lastBookingsDate>new Date?new Date:this.lastBookingsDate,t=Math.max((e.getTime()-this.firstBookingsDate.getTime())/(1e3*3600*24),1);return this.amoutOfBookings/t*30}toJson(){const e={};return this.name!==""&&(e.name=this.name),this.gender!==te.male&&(e.gender=this.getStrFromGender(this.gender)),this.phoneNumber!==this.id&&(e.phoneNumber=this.phoneNumber),this.firstBookingsDate!=null&&(e.firstBookingsDate=this.firstBookingsDate.toISOString()),this.userFirstBookingsDate!=null&&(e.userFirstBookingsDate=this.userFirstBookingsDate.toISOString()),this.lastBookingsDate!=null&&(e.lastBookingsDate=this.lastBookingsDate.toISOString()),this.amoutOfBookings!==0&&(e.amoutOfBookings=this.amoutOfBookings),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.freeFromPayments=this.freeFromPayments,this.email!==""&&(e.email=this.email),e.blocked=this.blocked,this.id!==""&&(e.id=this.id),this.addedManually&&(e.AM=this.addedManually),this.workerNaming!==""&&(e.workerNaming=this.workerNaming),e}toMinimalJson(){const e={};return e.N=this.name!==""?this.name:this.workerNaming,e.G=this.getStrFromGender(this.gender),e.P=this.phoneNumber,this.phoneNumber!==this.customerUuid&&(e.CU=this.customerUuid),this.email!==""&&(e.E=this.email),this.id!==""&&(e.ID=this.id),e}static fromMinimalJson(e){const t=new fr({});return t.workerNaming=e.N??"",t.name=e.N??"",e.G!=null&&(t.gender=t.getGenderFromStr(e.gender)),t.addedManually=e.AM??!1,t.phoneNumber=e.P??"",t.customerUuid=e.CU??e.P??"",t.email=e.E??"",t.id=e.ID??"",t}get publicCustomer(){return new rs({freeFromPayments:this.freeFromPayments,blocked:this.blocked,hashNumber:lg({id:this.customerUuid})})}get forUpdate(){const e=new fr({});return e.name=this.name,e.gender=this.gender,e.isVerifiedPhone=this.isVerifiedPhone,e.phoneNumber=this.phoneNumber,e.belongings=this.belongings,e.email=this.email,e.isDeleted=this.isDeleted,e.blocked=this.blocked,e.id=this.id,e.addedManually=this.addedManually,e.freeFromPayments=this.freeFromPayments,e.customerUuid=this.customerUuid,e.workerNaming=this.workerNaming,e.firstBookingsDate=null,e.userFirstBookingsDate=null,e.amoutOfBookings=0,e.lastBookingsDate=null,e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}const W0="~.9.~",Dg="..",_a="_";class si{constructor({workerName:e="",date:t="",workerId:s="",timeStr:i="",treatmentId:n="",treatmentName:a="",businessId:c=""}){o(this,"id","");o(this,"businessId","");o(this,"workerName","");o(this,"date","");o(this,"workerId","");o(this,"timeStr","");o(this,"treatmentId","");o(this,"treatmentName","");this.workerName=e,this.date=t,this.workerId=s,this.timeStr=i,this.treatmentId=n,this.treatmentName=a,this.businessId=c}fixEmptyAttributes(){this.workerName=this.workerName===""?"E":this.workerName,this.date=this.date===""?"E":this.date,this.businessId=this.businessId===""?"E":this.businessId,this.workerId=this.workerId===""?"E":this.workerId}static fromJson(e,t){const s=new si({});return s.id=t,s.workerName=e.workerName??"",s.date=e.date??"",s.timeStr=e.timeStr??"",s.treatmentId=e.treatmentId??"",s.treatmentName=e.treatmentName??"",s.businessId=e.businessId??"",s.workerId=e.workerId??"",s}get isMulti(){return this.timeStr!==""}static fromTopicStr(e){const t=new si({}),s=e.split(Dg),i=s[0].split(_a),n=s[1].split(_a);return t.businessId=i[0],t.workerId=i[1].replaceAll(W0,"+"),t.date=i[2],t.workerName=n[1],t}isEqual(e){return JSON.stringify(e.toJson())===JSON.stringify(this.toJson())}toTopicStr(){this.fixEmptyAttributes();const e=this.workerId.replaceAll("+",W0);return[this.businessId,e,this.date,this.timeStr,this.treatmentId].join(_a).split("").filter(i=>hf.test(i)).join("")}get dateTime(){const e=Ts(this.date),t=this.timeStr===""?new Date(0):bt(this.timeStr);return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes())}toJson(){const e={};return e.businessId=this.businessId,this.workerName!==""&&(e.workerName=this.workerName),this.workerId!==""&&(e.workerId=this.workerId),this.date!==""&&(e.date=this.date),this.timeStr!==""&&(e.timeStr=this.timeStr),this.treatmentName!==""&&(e.treatmentName=this.treatmentName),this.treatmentId!==""&&(e.treatmentId=this.treatmentId),e}toString(){return JSON.stringify(this.toJson())}}const bg={1:"PL",2:"MasterCard",3:"Visa",4:"Maestro",5:"Isracard"},kg={PL:"1",MasterCard:"2",Visa:"3",Maestro:"4",Isracard:"5"},Ig={1:"Isracard",2:"Visa Cal",3:"Diners",4:"Amex",6:"Leumi Card"},Tg={Isracard:"1","Visa Cal":"2",Diners:"3",Amex:"4","Leumi Card":"6"};class zs{constructor({brand:e="",token:t="",validityMonth:s="",validityYear:i="",name:n="",userId:a="",bankName:c="",l4Digits:u="",cardId:l="",businessId:h="",attemptsLeft:d=Ni}={}){o(this,"brand","");o(this,"token","");o(this,"validityMonth","");o(this,"validityYear","");o(this,"name","");o(this,"bankName","");o(this,"l4Digits","");o(this,"userId","");o(this,"attemptsLeft",Ni);o(this,"cardId","");o(this,"businessId","");this.brand=e,this.token=t,this.validityMonth=s,this.validityYear=i,this.name=n,this.userId=a,this.bankName=c,this.l4Digits=u,this.cardId=l,this.businessId=h,this.attemptsLeft=d}static fromJson(e,t,s){const i=new zs;return i.cardId=t,i.brand=bg[e.brand]||"Card",i.token=e.token||"",i.userId=e.userId||"",i.attemptsLeft=e.attemptsLeft||Ni,i.validityMonth=e.validityMonth||"",i.validityYear=e.validityYear||"",i.businessId=s,i.name=e.name||"",i.bankName=e.bankName||"",i.bankName=Ig[e.bankName]||"Bank",i.l4Digits=e.l4Digits||"",i}fromPaymentCard(e){this.brand=e.brand,this.token=e.token,this.userId=e.userId,this.businessId=e.businessId,this.cardId=e.cardId,this.attemptsLeft=e.attemptsLeft,this.validityMonth=e.validityMonth,this.validityYear=e.validityYear,this.name=e.name,this.bankName=e.bankName,this.l4Digits=e.l4Digits}toJson(){const e={};return e.brand=kg[this.brand]||"",e.token=this.token,e.userId=this.userId,e.attemptsLeft=this.attemptsLeft,e.validityMonth=this.validityMonth,e.validityYear=this.validityYear,e.name=this.name,e.bankName=this.bankName,e.bankName=Tg[this.bankName]||"",e.l4Digits=this.l4Digits,e}decryptCard(e){return new zs({cardId:this.cardId,brand:this.brand,token:decryptText({encryption:this.token,password:e}),validityMonth:decryptText({encryption:this.validityMonth,password:e}),validityYear:decryptText({encryption:this.validityYear,password:e}),name:this.name,userId:this.userId,bankName:this.bankName,businessId:this.businessId,l4Digits:this.l4Digits})}encryptCard(e){return new zs({cardId:this.cardId,brand:this.brand,token:encryptText({text:this.token,password:e}),validityMonth:encryptText({text:this.validityMonth,password:e}),validityYear:encryptText({text:this.validityYear,password:e}),name:this.name,userId:this.userId,bankName:this.bankName,businessId:this.businessId,l4Digits:this.l4Digits})}isTheSameAs(e){return this.bankName===e.bankName&&this.brand===e.brand&&this.name===e.name&&this.l4Digits===e.l4Digits&&this.userId===e.userId&&this.validityMonth===e.validityMonth&&this.validityYear===e.validityYear}toString(){return JSON.stringify(this,null,"  ")}}class Ag{constructor(){o(this,"futureBookings",{});o(this,"passedBookings",{});o(this,"recurrence")}setMonth(e,t){const s=th(t),i=rh(new Date);s.getTime()===i.getTime()?(this.passedBookings[t]={},this.futureBookings[t]={}):s.getTime()>i.getTime()?this.futureBookings[t]={}:s.getTime()<i.getTime()&&(this.passedBookings[t]={}),Object.entries(e).forEach(([n,a])=>{const c=Xe.fromJson(a,n);c.cancelDate==null&&(c.isPassed?this.passedBookings[t][n]=c:this.futureBookings[t][n]=c)})}setRecurrence(e){this.recurrence={},Object.entries(e).forEach(([t,s])=>{const i=Xe.fromJson(s,t);i.cancelDate===null&&(this.recurrence[t]=i)})}get all(){const e={};return Object.values(this.futureBookings).forEach(t=>{Object.entries(t).forEach(([s,i])=>{e[i.bookingId]=i})}),Object.values(this.passedBookings).forEach(t=>{Object.entries(t).forEach(([s,i])=>{e[i.bookingId]=i})}),this.recurrence!==void 0&&Object.entries(this.recurrence).forEach(([t,s])=>{e[t]=s}),e}addBooking(e){var t,s;if(e.recurrenceEvent!==null)this.recurrence??(this.recurrence={}),this.recurrence[e.bookingId]=e;else{const i=vr(e.bookingDate);e.isPassed?((t=this.passedBookings)[i]??(t[i]={}),this.passedBookings[i][e.bookingId]=e):((s=this.futureBookings)[i]??(s[i]={}),this.futureBookings[i][e.bookingId]=e)}}deleteBooking(e){var t,s,i;if(e.recurrenceEvent!==null)(t=this.recurrence)==null||delete t[e.bookingId];else{const n=vr(e.bookingDate);(s=this.passedBookings[n])==null||delete s[e.bookingId],(i=this.futureBookings[n])==null||delete i[e.bookingId]}}lastBookingForBusiness({businessId:e,workerId:t,includePast:s=!1,initDate:i,exclude:n}){let a=i;return Object.entries(this.futureBookings).forEach(([c,u])=>{Object.entries(u).forEach(([l,h])=>{e!==h.buisnessId||t!==h.workerId||n!=null&&n.getTime()===h.bookingDate.getTime()||(a===void 0||h.bookingDate.getTime()>a.getTime())&&(a=h.bookingDate)})}),a}firstBookingForBusiness({businessId:e,workerId:t,includePast:s,initDate:i,exclude:n}){let a=i;for(const[c,u]of Object.entries(this.futureBookings))for(const[l,h]of Object.entries(u))e!==h.buisnessId||t!==h.workerId||n!=null&&n.getTime()===h.bookingDate.getTime()||(a===void 0||h.bookingDate.getTime()<a.getTime())&&(a=h.bookingDate);if(a===void 0&&s)for(const[c,u]of Object.entries(this.passedBookings))for(const[l,h]of Object.entries(u))e!==h.buisnessId||t!==h.workerId||n!==void 0&&n.getTime()===h.bookingDate.getTime()||(a===void 0||h.bookingDate.getTime()<a.getTime())&&(a=h.bookingDate);return a}}class No{constructor(e,t){o(this,"docId","");o(this,"path","");this.docId=e,this.path=t}toJson(){const e={};return e.docId=this.docId,e.path=this.path,e}static fromJson(e){const t=new No("","");return t.docId=e.docId||"",t.path=e.path||"",t}toString(){return JSON.stringify(this,null,2)}}class pn{constructor({docId:e=""}){o(this,"bookingCount",0);o(this,"lastUpdateTime",new Date(0));o(this,"docId","");this.docId=e}static fromJson(e,t){const s=new pn({});return e!==void 0&&t!==void 0&&(s.docId=t,s.bookingCount=e.bookingCount??0,s.lastUpdateTime=e.lastUpdateTime?new Date(e.lastUpdateTime):new Date(0)),s}toJson(){const e={};return this.lastUpdateTime.getTime()!==new Date(0).getTime()&&(e.lastUpdateTime=this.lastUpdateTime.toISOString()),this.bookingCount>0&&(e.bookingCount=this.bookingCount),e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class Gs{constructor({email:e="",isVerifiedPhone:t=!1,isVerifiedEmail:s=!1,name:i="",phoneNumber:n="",id:a="",gender:c=te.anonymous,devices:u=new Map}){o(this,"email","");o(this,"name","");o(this,"phoneNumber","");o(this,"id","");o(this,"devices",new Map);o(this,"gender",te.anonymous);o(this,"myBuisnessesIds",[]);o(this,"reminders");o(this,"clientAt",new Map);o(this,"hasNotificationPermission",!0);o(this,"permission",new Map);o(this,"tempFcm");o(this,"allowAppNotification",!0);o(this,"isVerifiedPhone",!1);o(this,"isVerifiedEmail",!1);o(this,"invoiceCounter");o(this,"newWorkerWelcomes",new Set);o(this,"bookings",new Map);o(this,"bookingsPreviews",new Map);o(this,"bookingsDocsToLoad",new Set);o(this,"localDocsToDelete",new Set);this.email=e,this.isVerifiedPhone=t,this.isVerifiedEmail=s,this.name=i,this.phoneNumber=n,this.id=a,this.gender=c,this.devices=u}static fromJson(e,t){const s=new Gs({email:e.email,isVerifiedPhone:e.isVerifiedPhone,isVerifiedEmail:e.isVerifiedEmail,name:e.name,phoneNumber:e.phoneNumber,id:e.id,gender:e.gender});return s.setUserPublicData(e,t),s}get customerData(){return new fr({customerUuid:this.id,name:this.name,email:this.email,isVerifiedPhone:this.isVerifiedPhone,gender:this.gender,phoneNumber:this.phoneNumber})}setUserPublicData(e,t){if(this.permission=new Map,this.myBuisnessesIds=[],this.isVerifiedEmail=e.isVerifiedEmail||!1,this.email=e.email||"",this.allowAppNotification=e.allowAppNotification||!0,this.email=e.email||"",this.name=e.name||"",this.clientAt=new Map,e.clientAt&&Object.entries(e.clientAt).forEach(([s,i])=>{Object.keys(i).length!==0&&(this.clientAt.set(s,new Set),Object.keys(i).forEach(n=>{this.clientAt.set(s,this.clientAt.get(s).add(n))}))}),e.localDocsToDelete&&(this.localDocsToDelete=new Set,e.localDocsToDelete.forEach(s=>{this.localDocsToDelete.add(No.fromJson(s))})),this.invoiceCounter=e.invoiceCounter,this.devices=new Map,e.devices&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([s,i])=>{this.devices.set(s,kt.fromJson(i,s))}):e.currentFcm&&e.currentFcm!==""&&(this.tempFcm=e.currentFcm),this.hasNotificationPermission=e.hasNotificationPermission||!0,e.gender&&(this.gender=Jt[e.gender]||te.anonymous),this.phoneNumber=e.phoneNumber||"",this.id=e.id||e.phoneNumber||"",e.permission&&Object.entries(e.permission).forEach(([s,i])=>{i===2&&this.myBuisnessesIds.push(s),this.permission.set(s,i)}),e.bookings&&(this.bookings=new Map,Object.entries(e.bookings).forEach(([s,i])=>{const n=Xe.fromJson(i,s);n.cancelDate||this.bookings.set(s,n)})),this.bookingsDocsToLoad=new Set,e.bookingsPreviews){const s=new Map;Object.entries(e.bookingsPreviews).forEach(([i,n])=>{s.set(i,pn.fromJson(n,i))}),s.forEach((i,n)=>{var a,c;((a=this.bookingsPreviews.get(n))==null?void 0:a.lastUpdateTime)!==i.lastUpdateTime&&(n===Bu||th(n)>=rh(new Date)||(((c=t==null?void 0:t.passedBookings)==null?void 0:c.hasOwnProperty(n))??!1))&&this.bookingsDocsToLoad.add(n)}),this.bookingsPreviews=s}this.id===this.phoneNumber?this.isVerifiedPhone=!0:this.isVerifiedPhone=e.isVerifiedPhone||!1,this.newWorkerWelcomes=new Set,e.newWorkerWelcomes&&Object.keys(e.newWorkerWelcomes).forEach(s=>{this.newWorkerWelcomes.add(s)})}get fcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm)return new Set(this.tempFcm);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}getDevicesByToken(e){const t=[];return Object.values(this.devices).forEach(s=>{s.token===e&&t.push(kt.fromDevice(s))}),t}toJson(){const e={};return this.hasNotificationPermission||(e.hasNotificationPermission=this.hasNotificationPermission),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.isVerifiedEmail&&(e.isVerifiedEmail=this.isVerifiedEmail),this.email!==""&&(e.email=this.email),Object.keys(this.bookingsPreviews).length>0&&(e.bookingsPreviews={},Object.entries(this.bookingsPreviews).forEach(([t,s])=>{e.bookingsPreviews[t]=s.toJson()})),this.allowAppNotification||(e.allowAppNotification=this.allowAppNotification),e.permission={},Object.entries(this.permission).forEach(([t,s])=>{e.permission[t]=s}),this.localDocsToDelete.size>0&&(e.localDocsToDelete=[],this.localDocsToDelete.forEach(t=>{e.localDocsToDelete.push(t.toJson())})),e.email=this.email,e.name=this.name,e.devices={},this.devices.forEach((t,s)=>{e.devices[s]=t.toJson()}),e.clientAt={},this.clientAt.forEach((t,s)=>{e.clientAt[s]={},t.forEach(i=>{e.clientAt[s][i]=""})}),e.gender=hs[this.gender],e.phoneNumber=this.phoneNumber,e.id=this.id,this.newWorkerWelcomes.size>0&&(e.newWorkerWelcomes={},this.newWorkerWelcomes.forEach(t=>{e.newWorkerWelcomes[t]=""})),e}}class Oo{constructor(e,t,s){o(this,"businessId","");o(this,"date");o(this,"productId","");this.businessId=e,this.date=t,this.productId=s}static fromJson(e,t){const s=new Oo(t,null,"");return s.businessId=e.businessId||"",e.date instanceof pr&&(s.date=e.date),s}toJson(){const e={};return e.businessId=this.businessId,this.date!==null&&this.date!==void 0&&(e.date=this.date),e}}class ss{constructor({name:e="",phoneNumber:t="",id:s="",productsIds:i={},myBuisnessesIds:n=[],revenueCatId:a="",limitOfBuisnesses:c=1,gender:u=te.anonymous,lastVisitedBuisnesses:l=[],lastVisitedBuisnessesRemoved:h=[],paymentCards:d={},isVerifiedPhone:f=!1,isVerifiedEmail:p=!1,email:m="",lastCleanDate:w=pr.fromDate(new Date),createdAt:y=new Date}){o(this,"productsIds",{});o(this,"pendingProductsIds",{});o(this,"id","");o(this,"revenueCatId","");o(this,"limitOfBuisnesses",1);o(this,"preferdTipPercentage",0);o(this,"cardPaymentsPass","");o(this,"lastTimeUpdatePhone",new Date(0));o(this,"lastTimeUpdateEmail",new Date(0));o(this,"authProviders",new Map);o(this,"businessesInfo",{});o(this,"storyLikes",[]);o(this,"paymentCards",{});o(this,"lastVisitedBuisnesses",[]);o(this,"lastVisitedBuisnessesRemoved",[]);o(this,"lastCleanDate",pr.fromDate(new Date));o(this,"businessTopics",new Set);o(this,"waitingListTopics",{});o(this,"tempFcm");o(this,"termsApprovals",{});o(this,"seenUpdates",{});o(this,"createdAt",new Date);o(this,"userPublicData",new Gs({}));o(this,"name","");o(this,"isVerifiedPhone",!1);o(this,"phoneNumber","");o(this,"gender",te.anonymous);o(this,"lastTimeConnect",new Date);o(this,"userPublicDataListener");o(this,"connectedGoogleEmail","");o(this,"currentMonthInvoices");o(this,"currentMonthPaymentRequest");o(this,"currentMonthPayments");o(this,"existInvoicesDocs",new Set);o(this,"existPaymentsDocs",new Set);o(this,"existPaymentRequestsDocs",new Set);o(this,"invoices",{});o(this,"devices",{});o(this,"bookings",new Ag);o(this,"hasOldNotification",!1);this.userPublicData=new Gs({email:m,isVerifiedEmail:p,isVerifiedPhone:f,name:e,phoneNumber:t,id:s,gender:u}),this.name=e,this.phoneNumber=t,this.id=s,this.productsIds=i,this.revenueCatId=a,this.limitOfBuisnesses=c,this.gender=u,this.lastVisitedBuisnesses=l,this.lastVisitedBuisnessesRemoved=h,this.paymentCards=d,this.isVerifiedPhone=f,this.cardPaymentsPass="",this.lastCleanDate=w,this.createdAt=y}get toPaymentRequestUser(){return new Hr({userId:this.id,name:this.name,gender:this.gender,isVerifiedPhone:this.isVerifiedPhone,isExist:!0,phone:this.phoneNumber,userDecline:!1})}customerDataFromBooking({booking:e,exclude:t,needDelete:s=!1,initDate:i}){return new fr({name:this.name,email:this.userPublicData.email,gender:this.gender,customerUuid:this.id,phoneNumber:this.phoneNumber,isVerifiedPhone:this.isVerifiedPhone,userFirstBookingsDate:this.bookings.firstBookingForBusiness({businessId:e.buisnessId,workerId:e.workerId,exclude:s?e.bookingDate:t,initDate:s?i:e.bookingDate}),lastBookingsDate:this.bookings.lastBookingForBusiness({businessId:e.buisnessId,workerId:e.workerId,exclude:s?e.bookingDate:t,initDate:s?i:e.bookingDate})})}get fcmsTokens(){if(!this.userPublicData.allowAppNotification)return new Set;if(this.tempFcm)return new Set([this.tempFcm]);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}getDeviceByToken(e){let t;return Object.values(this.devices).forEach(s=>{s.token===e&&(t=kt.fromDevice(s))}),t}static fromUserDocJson(e){const t=new ss({name:e.name,phoneNumber:e.phoneNumber,id:e.id,productsIds:{},myBuisnessesIds:[],revenueCatId:e.revenueCatId,limitOfBuisnesses:e.limitOfBuisnesses,gender:Jt[e.gender],lastVisitedBuisnesses:e.lastVisitedBuisnesses,lastVisitedBuisnessesRemoved:e.lastVisitedBuisnessesRemoved,paymentCards:{},isVerifiedPhone:e.isVerifiedPhone,isVerifiedEmail:!1,email:"",lastCleanDate:e.lastCleanDate,createdAt:new Date(e.createdAt)});return e.devices&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([s,i])=>{t.devices[s]=kt.fromJson(i,s)}):e.currentFcm&&e.currentFcm!==""&&(t.tempFcm=e.currentFcm),e.termsApprovals&&Object.entries(e.termsApprovals).forEach(([s,i])=>{t.termsApprovals[s]=new Date(i)||new Date(0)}),t.seenUpdates={},e.seenUpdates&&Object.entries(e.seenUpdates).forEach(([s,i])=>{t.seenUpdates[s]=new Set(i)}),t.phoneNumber=e.phoneNumber||"0",t.id=e.id||e.phoneNumber,t.preferdTipPercentage=0,e.preferdTipPercentage&&(t.preferdTipPercentage=Number.isInteger(e.preferdTipPercentage)?e.preferdTipPercentage:Math.floor(e.preferdTipPercentage)),t.cardPaymentsPass=e.cardPaymentsPass||"",e.storyLikes&&e.storyLikes.forEach(s=>t.storyLikes.push(s)),e.lastTimeUpdatePhone&&(t.lastTimeUpdatePhone=new Date(e.lastTimeUpdatePhone)||new Date(0)),e.lastTimeUpdateEmail&&(t.lastTimeUpdateEmail=new Date(e.lastTimeUpdateEmail)||new Date(0)),t.productsIds={},e.productsIds&&Object.entries(e.productsIds).forEach(([s,i])=>{t.productsIds[s]=Oo.fromJson(i,s)}),e.pendingProductsIds&&Object.entries(e.pendingProductsIds).forEach(([s,i])=>{t.pendingProductsIds[s]=i}),t.revenueCatId=e.revenueCatId||"",t.lastCleanDate=e.lastCleanDate,e.lastVisitedBuisnesses.forEach(s=>t.lastVisitedBuisnesses.push(s)),e.lastVisitedBuisnessesRemoved&&e.lastVisitedBuisnessesRemoved.forEach(s=>t.lastVisitedBuisnessesRemoved.push(s)),t.businessesInfo={},e.businessesInfo&&Object.entries(e.businessesInfo).forEach(([s,i])=>{t.businessesInfo[s]=$s.fromJson(i,s)}),e.businessTopics&&e.businessTopics.forEach(s=>{t.businessTopics.add(s)}),e.waitingListTopics&&(t.waitingListTopics={},Object.entries(e.waitingListTopics).forEach(([s,i])=>{const n=si.fromJson(i,s);n.date===""?t.businessTopics.add(s):t.waitingListTopics[s]=n})),t.paymentCards={},e.paymentCards&&Object.entries(e.paymentCards).forEach(([s,i])=>{t.paymentCards[s]={},Object.entries(i).forEach(([n,a])=>{t.paymentCards[s][n]=zs.fromJson(a,n,s)})}),t.createdAt=new Date(e.createdAt),t.limitOfBuisnesses=e.limitOfBuisnesses||1,e.authProviders?Object.entries(e.authProviders).forEach(([s,i])=>{if(jc[s]){const n=jc[s];t.authProviders.set(n,new Date(i)||new Date(2023))}}):t.authProviders=new Map([[el.Phone,t.createdAt]]),t.id===t.phoneNumber?t.isVerifiedPhone=!0:t.isVerifiedPhone=e.isVerifiedPhone||!1,e.lastTimeConnect&&(t.lastTimeConnect=new Date(e.lastTimeConnect)||new Date),t.userPublicData=new Gs({isVerifiedPhone:t.isVerifiedPhone,phoneNumber:t.phoneNumber}),t}setUserPublicData(e){this.name=e.name||"",e.devices&&typeof e.devices=="object"&&Object.entries(e.devices).forEach(([t,s])=>{this.devices[t]=kt.fromJson(s,t)}),this.gender=Jt[e.gender],this.phoneNumber=e.phoneNumber,this.id=e.id||e.phoneNumber,this.userPublicData.setUserPublicData(e,this.bookings)}firstEnterance(e){return!new Set([...this.lastVisitedBuisnesses,...this.lastVisitedBuisnessesRemoved]).has(e)}toUserDocJson(){const e={};return e.name=this.name,e.devices={},Object.entries(this.devices).forEach(([t,s])=>{e.devices[t]=s.toJson()}),this.lastTimeUpdateEmail.getTime()!==new Date(0).getTime()&&(e.lastTimeUpdateEmail=this.lastTimeUpdateEmail.toISOString()),this.lastTimeUpdatePhone.getTime()!==new Date(0).getTime()&&(e.lastTimeUpdatePhone=this.lastTimeUpdatePhone.toISOString()),e.gender=hs[this.gender],e.phoneNumber=this.phoneNumber,e.id=this.id,Object.keys(this.termsApprovals).length>0&&(e.termsApprovals={},Object.entries(this.termsApprovals).forEach(([t,s])=>{e.termsApprovals[t]=s.toISOString()})),Object.keys(this.seenUpdates).length>0&&(e.seenUpdates={},Object.entries(this.seenUpdates).forEach(([t,s])=>{e.seenUpdates[t]=Array.from(s)})),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.preferdTipPercentage=this.preferdTipPercentage,e.revenueCatId=this.revenueCatId,Object.keys(this.productsIds).length>0&&(e.productsIds={},Object.entries(this.productsIds).forEach(([t,s])=>{e.productsIds[t]=s.toJson()})),e.pendingProductsIds=this.pendingProductsIds,e.lastCleanDate=this.lastCleanDate,e.limitOfBuisnesses=this.limitOfBuisnesses,e.lastVisitedBuisnesses=this.lastVisitedBuisnesses,e.lastVisitedBuisnessesRemoved=this.lastVisitedBuisnessesRemoved,e.businessesInfo={},this.cardPaymentsPass!==""&&(e.cardPaymentsPass=this.cardPaymentsPass),Object.entries(this.businessesInfo).forEach(([t,s])=>{e.businessesInfo[t]=s.toJson()}),e.storyLikes=this.storyLikes,e.waitingListTopics={},Object.entries(this.waitingListTopics).forEach(([t,s])=>{e.waitingListTopics[t]=s.toJson()}),e.businessTopics=Array.from(this.businessTopics),e.authProviders={},this.authProviders.forEach((t,s)=>{e.authProviders[s]=t.toISOString()}),e.paymentCards={},Object.entries(this.paymentCards).forEach(([t,s])=>{e.paymentCards[t]={},Object.entries(s).forEach(([i,n])=>{e.paymentCards[t][i]=n.toJson()})}),e.createdAt=this.createdAt.toISOString(),e}get developerId(){return this.id.replace("+","")}toString(){return JSON.stringify(this.toUserDocJson())+JSON.stringify(this.userPublicData.toJson())}}let to=fi(new ss({})),Pa=fi(!1);function W(r,e=!0){const t=xt(Td)(r);return xt(Ad)==="he"&&e?Eg(t):t}function Eg(r){const e=xt(to).gender;return e===te.male||e===te.anonymous||Object.keys(Gc).forEach(s=>{r=r.replaceAll(s,Gc[s])}),r}function Us(r,e=-1){let t="",s="",i="",n="",a="",c="",u=r.days;Math.floor(u/30)>0&&(Math.floor(u/30)===1&&(c=W("month")),Math.floor(u/30)===2&&(c=W("twoMonths")),Math.floor(u/30)>2&&(c=`${Math.floor(u/30)} `+W("months"))),u-=Math.floor(u/30)*30,Math.floor(u/7)>0&&(Math.floor(u/7)===1&&(a=W("week")),Math.floor(u/7)===2&&(a=W("twoWeeks")),Math.floor(u/7)>2&&(a=`${Math.floor(u/7)} `+W("weeks"))),u-=Math.floor(u/7)*7,u===1&&(n=W("day")),u===2&&(n=W("twoDays")),u>2&&(n=`${u} `+W("days"));let l=r.hours-r.days*24;l===1&&(t=W("hour")),l===2&&(t=W("twoHours")),l>2&&(t=`${l}`+W("hoursChar"));let h=r.minutes-r.hours*60;s=h>0?`${h}`+W("minutesChar"):"";let d=r.seconds-r.minutes*60;d===1&&(i=W("second",!1)),d>1&&(i=`${d} `+W("seconds"));let f="";return r.days===365?f=W("year"):r.days%365===0&&r.days>365?f=(r.days/365).toFixed(0)+" "+W("years"):a===""&&c!==""&&n===""?f=c:a!==""&&c===""&&n===""?f=a:a!==""&&c!==""&&n===""?f=c+" "+W("and")+a:a!==""&&c===""&&n!==""?f=a+" "+W("and")+n:a===""&&c!==""&&n!==""?f=c+" "+W("and")+n:a!==""&&c!==""&&n!==""?f=c+" ,"+a+" "+W("and")+n:s===""&&t===""&&n!==""?f=n:s!==""&&t===""&&n===""?f=s:s===""&&t!==""&&n===""?f=t:s!==""&&t!==""&&n===""?f=t+" "+W("and")+s:s!==""&&t===""&&n!==""?f=n+" "+W("and")+s:s===""&&t!==""&&n!==""?f=n+" "+W("and")+t:s!==""&&t!==""&&n!==""?f=n+" ,"+t+" "+W("and")+s:i!==""&&(f=i),f.length===0?"":e===-1||e>f.length?f:f.slice(0,e)+".."+f.slice(e)}function $b(r){const e=s=>s.toString().padStart(2,"0"),t=e(r.minutes%60);return`${e(r.hours)}:${t}`}function zb(r,e=""){let t="";Ce(r,"dd-MM-yyyy")===Ce(bo(new Date,1),"dd-MM-yyyy")&&(t=W("tomorrow")),Ce(r,"dd-MM-yyyy")===Ce(new Date,"dd-MM-yyyy")&&(t=W("today"));const s=mf[r.getDay()];return`${t!==""?t:e+W(s)}`}function Cg(r){try{const e=r.indexOf("-");let t=r.substring(e+1,r.length);return t="0"+t,t.substring(0,3)+"-"+t.substring(3,t.length)}catch{return r}}class is{constructor({workMinutes:e=0,breakMinutes:t=0,title:s=""}){o(this,"workMinutes",0);o(this,"breakMinutes",0);o(this,"title","");this.workMinutes=e,this.breakMinutes=t,this.title=s}get wholeMinutes(){return this.workMinutes+this.breakMinutes}static fromTreatmentTime(e){return new is({breakMinutes:e.breakMinutes,workMinutes:e.workMinutes,title:e.title})}static fromJson(e){return new is({breakMinutes:e.break||0,workMinutes:e.duration||0,title:e.title||""})}toJson(){const e={};return e.break=this.breakMinutes,e.duration=this.workMinutes,e.title=this.title,e}toString(){return JSON.stringify(this,null,2)}}class Re{constructor({times:e=new Map,id:t="",price:s,count:i=1,name:n="",isMulti:a=!1,maxTicketsForUser:c=1,index:u="",amountInAdvance:l=0,colorIndex:h=-2,hide:d=!1,paymentType:f,note:p="",maxParticipants:m=1,showPrice:w=!0,showParticipants:y=!0,showTime:D=!0}={}){o(this,"totalMinutes",0);o(this,"index","");o(this,"id","");o(this,"note","");o(this,"price");o(this,"amountInAdvance",0);o(this,"paymentType");o(this,"isMulti",!1);o(this,"showPrice",!0);o(this,"showTime",!0);o(this,"count",1);o(this,"name","");o(this,"colorIndex",-2);o(this,"maxParticipants",1);o(this,"maxTicketsForUser",1);o(this,"tempMaxParticipants");o(this,"hide",!1);o(this,"showParticipants",!0);o(this,"times",new Map);o(this,"priceChangingNote");this.times=e,this.id=t,this.price=s,this.count=i,this.name=n,this.isMulti=a,this.maxTicketsForUser=c,this.index=u,this.amountInAdvance=l,this.colorIndex=h,this.hide=d,this.paymentType=f,this.note=p,this.maxParticipants=m,this.showPrice=w,this.showParticipants=y,this.showTime=D,this.totalMinutes=this.totalTotalMinutes}isEqual(e){return!0}get totalTotalMinutes(){let e=0;return this.times.forEach((t,s)=>{e+=t.wholeMinutes}),e}get totalWorkMinutes(){let e=0;return this.times.forEach((t,s)=>{e+=t.workMinutes}),e}get totalMinutesForBooking(){return this.totalMinutes*this.count}get amountInAdvanceForBooking(){return this.amountInAdvance*this.count}get totalPriceForBooking(){return this.price.amount*this.count}get nameForBooking(){return this.count===1?this.name:`${this.name} X${this.count}`}static fromTreatment(e){const t=new Re({times:new Map,showTime:e.showTime,paymentType:e.paymentType,id:e.id,hide:e.hide,showPrice:e.showPrice,price:e.price,index:e.index,maxTicketsForUser:e.maxTicketsForUser,colorIndex:e.colorIndex,name:e.name,isMulti:e.isMulti,note:e.note,count:e.count,maxParticipants:e.maxParticipants,amountInAdvance:e.amountInAdvance});return t.priceChangingNote=e.priceChangingNote,t.tempMaxParticipants=e.tempMaxParticipants,t.totalMinutes=e.totalMinutes,e.times.forEach((s,i)=>{t.times.set(i,is.fromTreatmentTime(s))}),t}static fromTreatmentsMap(e){let t=0;const s=new Re({price:new Fe({amount:"0",currency:gr})});return e.forEach((i,n)=>{for(let a=0;a<i.count;a++)i.times.forEach((c,u)=>{s.times.set(t.toString(),c),t++}),i.price&&(s.price.amount+=i.price.amount,s.price.currency=i.price.currency),s.name===""?s.name=i.name:s.name+=` + ${i.name}`,s.showTime=s.showTime&&i.showTime,s.showPrice=s.showPrice&&i.showPrice,s.paymentType=i.paymentType,s.amountInAdvance+=i.amountInAdvance,s.totalMinutes+=i.totalMinutes}),s}get participants(){return this.tempMaxParticipants!==void 0?this.tempMaxParticipants:this.maxParticipants}priceToString(){return this.price.toString()}minutesToString(){return Us(new Y({minutes:this.totalMinutes}))}static fromJson(e,t){const s=new Re({times:new Map,id:e.id||"",colorIndex:e.colorIndex||-2,maxTicketsForUser:e.maxTicketsForUser||1,index:t,hide:e.hide||!1,name:e.name||"",isMulti:e.isMulti||!1,note:e.note||"",count:e.count||1,price:e.price?Fe.fromJson(e.price):void 0,amountInAdvance:e.amountInAdvance!==void 0?typeof e.amountInAdvance=="number"?e.amountInAdvance:parseFloat(e.amountInAdvance):0,maxParticipants:e.maxParticipants||1,paymentType:eo[e.paymentType],showPrice:e.showPrice||!1,showTime:e.showTime||!1,showParticipants:e.showParticipants||!0});if(s.priceChangingNote=e.priceChangingNote,s.tempMaxParticipants=e.tempMaxParticipants,e.times)for(const i in e.times)s.times.set(i,is.fromJson(e.times[i]));return s}toJson(){const e={};return e.times={},this.times.forEach((t,s)=>{e.times[s]=t.toJson()}),e.name=this.name,this.note!==""&&(e.note=this.note),this.id!==""&&(e.id=this.id),this.hide&&(e.hide=this.hide),this.maxTicketsForUser>1&&(e.maxTicketsForUser=this.maxTicketsForUser),this.colorIndex!==-2&&(e.colorIndex=this.colorIndex),this.priceChangingNote!==void 0&&(e.priceChangingNote=this.priceChangingNote),e.price=this.price?this.price.toJson():void 0,this.amountInAdvance!==0&&(e.amountInAdvance=this.amountInAdvance),this.paymentType!=null&&ja[this.paymentType]!=null&&(e.paymentType=ja[this.paymentType]),this.isMulti&&(e.isMulti=this.isMulti),this.tempMaxParticipants!==void 0&&(e.tempMaxParticipants=this.tempMaxParticipants),this.count!==1&&(e.count=this.count),this.maxParticipants!==1&&(e.maxParticipants=this.maxParticipants),this.showParticipants||(e.showParticipants=this.showParticipants),e.showPrice=this.showPrice,e.showTime=this.showTime,e}static fromOldJson(e,t,s,i){const n=new Re({});if(e.times)for(const a in e.times)e.times.hasOwnProperty(a)&&n.times.set(a,is.fromJson(e.times[a]));return n.id="",n.colorIndex=i,n.index=t,n.name=n.parseNameFromDbField(s),e.price&&(n.price=Fe.fromJson(e.price)),e.amountInAdvance!==void 0&&(n.amountInAdvance=typeof e.amountInAdvance=="number"?e.amountInAdvance:parseFloat(e.amountInAdvance)),n.paymentType=eo[e.paymentType],n.showPrice=e.showPrice||!1,n.showTime=e.showTime||!1,n.totalMinutes=n.totalTotalMinutes,n}parseNameFromDbField(e){return e.replace(Hc,"/").replace(Yc,"*")}parseNameToDbField(e){return e.replace("/",Hc).replace("*",Yc)}toString(){return JSON.stringify(this,null,2)}}class xs{constructor({displayDate:e,maxParticipants:t=1,currentParticipants:s=0,isMulti:i=!1,isHoliday:n=!1,signedPaymentRequestId:a,isVacation:c=!1,recurrenceTimeId:u,showParticipants:l=!0,showMultiWaitingList:h=!0,recurrenceFatherBookingId:d,isWaitingList:f=!1,recurrenceMultiEvent:p,fatherRecurrenceMultiEventDate:m}){o(this,"displayDate");o(this,"from",new Date(0));o(this,"maxParticipants",0);o(this,"currentParticipants",0);o(this,"showParticipants",!0);o(this,"isWaitingList",!1);o(this,"showMultiWaitingList",!0);o(this,"duration",new Y({}));o(this,"isMulti",!1);o(this,"recurrenceMultiEvent");o(this,"fatherRecurrenceMultiEventDate");o(this,"recurrenceFatherBookingId");o(this,"recurrenceTimeId");o(this,"isVacation",!1);o(this,"isHoliday",!1);o(this,"signedPaymentRequestId");this.displayDate=e,this.maxParticipants=t,this.currentParticipants=s,this.isMulti=i,this.isHoliday=n,this.signedPaymentRequestId=a,this.isVacation=c,this.recurrenceTimeId=u,this.showParticipants=l,this.showMultiWaitingList=h,this.recurrenceFatherBookingId=d,this.isWaitingList=f,this.recurrenceMultiEvent=p,this.fatherRecurrenceMultiEventDate=m}static fromTimePickerObj(e){const t=new xs({displayDate:e.displayDate,recurrenceTimeId:e.recurrenceTimeId,showMultiWaitingList:e.showMultiWaitingList,isVacation:e.isVacation,isHoliday:e.isHoliday,isMulti:e.isMulti,signedPaymentRequestId:e.signedPaymentRequestId,maxParticipants:e.maxParticipants,currentParticipants:e.currentParticipants,showParticipants:e.showParticipants,recurrenceFatherBookingId:e.recurrenceFatherBookingId,recurrenceMultiEvent:e.recurrenceMultiEvent,fatherRecurrenceMultiEventDate:e.fatherRecurrenceMultiEventDate});return t.from=e.from,t.duration=e.duration,t}get hasFreePlace(){return this.maxParticipants>this.currentParticipants}get timeId(){if(this.displayDate)return this.recurrenceTimeId?`${this.dateToTimeStr(this.displayDate)}_${this.recurrenceTimeId}`:this.dateToTimeStr(this.displayDate)}toJson(){const e={};return e.id=this.from.toISOString(),e.from=this.from,e.duration=this.duration.inMinutes,e.to=se(this.from,this.duration),e.displayDate=this.displayDate??"",this.recurrenceTimeId!=null&&(e.recurrenceTimeId=this.recurrenceTimeId),this.recurrenceFatherBookingId!=null&&(e.recurrenceFatherBookingId=this.recurrenceFatherBookingId),this.fatherRecurrenceMultiEventDate!=null&&(e.fatherRecurrenceMultiEventDate=this.fatherRecurrenceMultiEventDate),this.recurrenceMultiEvent!=null&&(e.recurrenceMultiEvent=this.recurrenceMultiEvent.toJson({})),this.showMultiWaitingList||(e.showMultiWaitingList=this.showMultiWaitingList),this.isVacation&&(e.isVacation=this.isVacation),this.isHoliday&&(e.isHoliday=this.isHoliday),this.isMulti&&(e.isMulti=this.isMulti),this.signedPaymentRequestId!=null&&(e.signedPaymentRequestId=this.signedPaymentRequestId),this.maxParticipants!=0&&(e.maxParticipants=this.maxParticipants),this.currentParticipants!=0&&(e.currentParticipants=this.currentParticipants),this.showParticipants||(e.showParticipants=this.showParticipants),e}dateToTimeStr(e){return""}}const Ks=class Ks{constructor(){o(this,"errorCode",100);o(this,"error",G.unknown);o(this,"details","")}static GI(){return Ks._singleton}addError({code:e,error:t,details:s}){this.error=t!==void 0?t:this.error,this.errorCode=e!==void 0?e:this.errorCode,this.details=s!==void 0?s:this.details}};o(Ks,"_singleton",new Ks);let H0=Ks;//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ul;function F(){return ul.apply(null,arguments)}function _g(r){ul=r}function dt(r){return r instanceof Array||Object.prototype.toString.call(r)==="[object Array]"}function Br(r){return r!=null&&Object.prototype.toString.call(r)==="[object Object]"}function ie(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Bo(r){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(r).length===0;var e;for(e in r)if(ie(r,e))return!1;return!0}function $e(r){return r===void 0}function Zt(r){return typeof r=="number"||Object.prototype.toString.call(r)==="[object Number]"}function pi(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function ll(r,e){var t=[],s,i=r.length;for(s=0;s<i;++s)t.push(e(r[s],s));return t}function lr(r,e){for(var t in e)ie(e,t)&&(r[t]=e[t]);return ie(e,"toString")&&(r.toString=e.toString),ie(e,"valueOf")&&(r.valueOf=e.valueOf),r}function Ct(r,e,t,s){return Nl(r,e,t,s,!0).utc()}function Pg(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function q(r){return r._pf==null&&(r._pf=Pg()),r._pf}var ro;Array.prototype.some?ro=Array.prototype.some:ro=function(r){var e=Object(this),t=e.length>>>0,s;for(s=0;s<t;s++)if(s in e&&r.call(this,e[s],s,e))return!0;return!1};function Fo(r){var e=null,t=!1,s=r._d&&!isNaN(r._d.getTime());if(s&&(e=q(r),t=ro.call(e.parsedDateParts,function(i){return i!=null}),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),r._strict&&(s=s&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(r))r._isValid=s;else return s;return r._isValid}function gn(r){var e=Ct(NaN);return r!=null?lr(q(e),r):q(e).userInvalidated=!0,e}var Y0=F.momentProperties=[],Sa=!1;function Ro(r,e){var t,s,i,n=Y0.length;if($e(e._isAMomentObject)||(r._isAMomentObject=e._isAMomentObject),$e(e._i)||(r._i=e._i),$e(e._f)||(r._f=e._f),$e(e._l)||(r._l=e._l),$e(e._strict)||(r._strict=e._strict),$e(e._tzm)||(r._tzm=e._tzm),$e(e._isUTC)||(r._isUTC=e._isUTC),$e(e._offset)||(r._offset=e._offset),$e(e._pf)||(r._pf=q(e)),$e(e._locale)||(r._locale=e._locale),n>0)for(t=0;t<n;t++)s=Y0[t],i=e[s],$e(i)||(r[s]=i);return r}function gi(r){Ro(this,r),this._d=new Date(r._d!=null?r._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Sa===!1&&(Sa=!0,F.updateOffset(this),Sa=!1)}function ft(r){return r instanceof gi||r!=null&&r._isAMomentObject!=null}function hl(r){F.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+r)}function nt(r,e){var t=!0;return lr(function(){if(F.deprecationHandler!=null&&F.deprecationHandler(null,r),t){var s=[],i,n,a,c=arguments.length;for(n=0;n<c;n++){if(i="",typeof arguments[n]=="object"){i+=`
[`+n+"] ";for(a in arguments[0])ie(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[n];s.push(i)}hl(r+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var V0={};function dl(r,e){F.deprecationHandler!=null&&F.deprecationHandler(r,e),V0[r]||(hl(e),V0[r]=!0)}F.suppressDeprecationWarnings=!1;F.deprecationHandler=null;function _t(r){return typeof Function<"u"&&r instanceof Function||Object.prototype.toString.call(r)==="[object Function]"}function Sg(r){var e,t;for(t in r)ie(r,t)&&(e=r[t],_t(e)?this[t]=e:this["_"+t]=e);this._config=r,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function so(r,e){var t=lr({},r),s;for(s in e)ie(e,s)&&(Br(r[s])&&Br(e[s])?(t[s]={},lr(t[s],r[s]),lr(t[s],e[s])):e[s]!=null?t[s]=e[s]:delete t[s]);for(s in r)ie(r,s)&&!ie(e,s)&&Br(r[s])&&(t[s]=lr({},t[s]));return t}function Lo(r){r!=null&&this.set(r)}var io;Object.keys?io=Object.keys:io=function(r){var e,t=[];for(e in r)ie(r,e)&&t.push(e);return t};var Mg={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Ng(r,e,t){var s=this._calendar[r]||this._calendar.sameElse;return _t(s)?s.call(e,t):s}function At(r,e,t){var s=""+Math.abs(r),i=e-s.length,n=r>=0;return(n?t?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var Uo=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ci=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ma={},ns={};function H(r,e,t,s){var i=s;typeof s=="string"&&(i=function(){return this[s]()}),r&&(ns[r]=i),e&&(ns[e[0]]=function(){return At(i.apply(this,arguments),e[1],e[2])}),t&&(ns[t]=function(){return this.localeData().ordinal(i.apply(this,arguments),r)})}function Og(r){return r.match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"")}function Bg(r){var e=r.match(Uo),t,s;for(t=0,s=e.length;t<s;t++)ns[e[t]]?e[t]=ns[e[t]]:e[t]=Og(e[t]);return function(i){var n="",a;for(a=0;a<s;a++)n+=_t(e[a])?e[a].call(i,r):e[a];return n}}function Bi(r,e){return r.isValid()?(e=fl(e,r.localeData()),Ma[e]=Ma[e]||Bg(e),Ma[e](r)):r.localeData().invalidDate()}function fl(r,e){var t=5;function s(i){return e.longDateFormat(i)||i}for(Ci.lastIndex=0;t>=0&&Ci.test(r);)r=r.replace(Ci,s),Ci.lastIndex=0,t-=1;return r}var Fg={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Rg(r){var e=this._longDateFormat[r],t=this._longDateFormat[r.toUpperCase()];return e||!t?e:(this._longDateFormat[r]=t.match(Uo).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[r])}var Lg="Invalid date";function Ug(){return this._invalidDate}var Wg="%d",Hg=/\d{1,2}/;function Yg(r){return this._ordinal.replace("%d",r)}var Vg={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function $g(r,e,t,s){var i=this._relativeTime[t];return _t(i)?i(r,e,t,s):i.replace(/%d/i,r)}function zg(r,e){var t=this._relativeTime[r>0?"future":"past"];return _t(t)?t(e):t.replace(/%s/i,e)}var $0={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function at(r){return typeof r=="string"?$0[r]||$0[r.toLowerCase()]:void 0}function Wo(r){var e={},t,s;for(s in r)ie(r,s)&&(t=at(s),t&&(e[t]=r[s]));return e}var Gg={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function qg(r){var e=[],t;for(t in r)ie(r,t)&&e.push({unit:t,priority:Gg[t]});return e.sort(function(s,i){return s.priority-i.priority}),e}var ml=/\d/,je=/\d\d/,pl=/\d{3}/,Ho=/\d{4}/,xn=/[+-]?\d{6}/,xe=/\d\d?/,gl=/\d\d\d\d?/,xl=/\d\d\d\d\d\d?/,yn=/\d{1,3}/,Yo=/\d{1,4}/,wn=/[+-]?\d{1,6}/,bs=/\d+/,vn=/[+-]?\d+/,Jg=/Z|[+-]\d\d:?\d\d/gi,Dn=/Z|[+-]\d\d(?::?\d\d)?/gi,Zg=/[+-]?\d+(\.\d{1,3})?/,xi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ks=/^[1-9]\d?/,Vo=/^([1-9]\d|\d)/,Xi;Xi={};function R(r,e,t){Xi[r]=_t(e)?e:function(s,i){return s&&t?t:e}}function Qg(r,e){return ie(Xi,r)?Xi[r](e._strict,e._locale):new RegExp(Kg(r))}function Kg(r){return Gt(r.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,s,i,n){return t||s||i||n}))}function Gt(r){return r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function it(r){return r<0?Math.ceil(r)||0:Math.floor(r)}function X(r){var e=+r,t=0;return e!==0&&isFinite(e)&&(t=it(e)),t}var no={};function le(r,e){var t,s=e,i;for(typeof r=="string"&&(r=[r]),Zt(e)&&(s=function(n,a){a[e]=X(n)}),i=r.length,t=0;t<i;t++)no[r[t]]=s}function yi(r,e){le(r,function(t,s,i,n){i._w=i._w||{},e(t,i._w,i,n)})}function Xg(r,e,t){e!=null&&ie(no,r)&&no[r](e,t._a,t,r)}function bn(r){return r%4===0&&r%100!==0||r%400===0}var Le=0,Wt=1,vt=2,_e=3,ht=4,Ht=5,Mr=6,jg=7,ex=8;H("Y",0,0,function(){var r=this.year();return r<=9999?At(r,4):"+"+r});H(0,["YY",2],0,function(){return this.year()%100});H(0,["YYYY",4],0,"year");H(0,["YYYYY",5],0,"year");H(0,["YYYYYY",6,!0],0,"year");R("Y",vn);R("YY",xe,je);R("YYYY",Yo,Ho);R("YYYYY",wn,xn);R("YYYYYY",wn,xn);le(["YYYYY","YYYYYY"],Le);le("YYYY",function(r,e){e[Le]=r.length===2?F.parseTwoDigitYear(r):X(r)});le("YY",function(r,e){e[Le]=F.parseTwoDigitYear(r)});le("Y",function(r,e){e[Le]=parseInt(r,10)});function qs(r){return bn(r)?366:365}F.parseTwoDigitYear=function(r){return X(r)+(X(r)>68?1900:2e3)};var yl=Is("FullYear",!0);function tx(){return bn(this.year())}function Is(r,e){return function(t){return t!=null?(wl(this,r,t),F.updateOffset(this,e),this):ii(this,r)}}function ii(r,e){if(!r.isValid())return NaN;var t=r._d,s=r._isUTC;switch(e){case"Milliseconds":return s?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return s?t.getUTCSeconds():t.getSeconds();case"Minutes":return s?t.getUTCMinutes():t.getMinutes();case"Hours":return s?t.getUTCHours():t.getHours();case"Date":return s?t.getUTCDate():t.getDate();case"Day":return s?t.getUTCDay():t.getDay();case"Month":return s?t.getUTCMonth():t.getMonth();case"FullYear":return s?t.getUTCFullYear():t.getFullYear();default:return NaN}}function wl(r,e,t){var s,i,n,a,c;if(!(!r.isValid()||isNaN(t))){switch(s=r._d,i=r._isUTC,e){case"Milliseconds":return void(i?s.setUTCMilliseconds(t):s.setMilliseconds(t));case"Seconds":return void(i?s.setUTCSeconds(t):s.setSeconds(t));case"Minutes":return void(i?s.setUTCMinutes(t):s.setMinutes(t));case"Hours":return void(i?s.setUTCHours(t):s.setHours(t));case"Date":return void(i?s.setUTCDate(t):s.setDate(t));case"FullYear":break;default:return}n=t,a=r.month(),c=r.date(),c=c===29&&a===1&&!bn(n)?28:c,i?s.setUTCFullYear(n,a,c):s.setFullYear(n,a,c)}}function rx(r){return r=at(r),_t(this[r])?this[r]():this}function sx(r,e){if(typeof r=="object"){r=Wo(r);var t=qg(r),s,i=t.length;for(s=0;s<i;s++)this[t[s].unit](r[t[s].unit])}else if(r=at(r),_t(this[r]))return this[r](e);return this}function ix(r,e){return(r%e+e)%e}var Te;Array.prototype.indexOf?Te=Array.prototype.indexOf:Te=function(r){var e;for(e=0;e<this.length;++e)if(this[e]===r)return e;return-1};function $o(r,e){if(isNaN(r)||isNaN(e))return NaN;var t=ix(e,12);return r+=(e-t)/12,t===1?bn(r)?29:28:31-t%7%2}H("M",["MM",2],"Mo",function(){return this.month()+1});H("MMM",0,0,function(r){return this.localeData().monthsShort(this,r)});H("MMMM",0,0,function(r){return this.localeData().months(this,r)});R("M",xe,ks);R("MM",xe,je);R("MMM",function(r,e){return e.monthsShortRegex(r)});R("MMMM",function(r,e){return e.monthsRegex(r)});le(["M","MM"],function(r,e){e[Wt]=X(r)-1});le(["MMM","MMMM"],function(r,e,t,s){var i=t._locale.monthsParse(r,s,t._strict);i!=null?e[Wt]=i:q(t).invalidMonth=r});var nx="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),vl="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Dl=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ax=xi,ox=xi;function cx(r,e){return r?dt(this._months)?this._months[r.month()]:this._months[(this._months.isFormat||Dl).test(e)?"format":"standalone"][r.month()]:dt(this._months)?this._months:this._months.standalone}function ux(r,e){return r?dt(this._monthsShort)?this._monthsShort[r.month()]:this._monthsShort[Dl.test(e)?"format":"standalone"][r.month()]:dt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lx(r,e,t){var s,i,n,a=r.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)n=Ct([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(n,"").toLocaleLowerCase();return t?e==="MMM"?(i=Te.call(this._shortMonthsParse,a),i!==-1?i:null):(i=Te.call(this._longMonthsParse,a),i!==-1?i:null):e==="MMM"?(i=Te.call(this._shortMonthsParse,a),i!==-1?i:(i=Te.call(this._longMonthsParse,a),i!==-1?i:null)):(i=Te.call(this._longMonthsParse,a),i!==-1?i:(i=Te.call(this._shortMonthsParse,a),i!==-1?i:null))}function hx(r,e,t){var s,i,n;if(this._monthsParseExact)return lx.call(this,r,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=Ct([2e3,s]),t&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!t&&!this._monthsParse[s]&&(n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(n.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[s].test(r))return s;if(t&&e==="MMM"&&this._shortMonthsParse[s].test(r))return s;if(!t&&this._monthsParse[s].test(r))return s}}function bl(r,e){if(!r.isValid())return r;if(typeof e=="string"){if(/^\d+$/.test(e))e=X(e);else if(e=r.localeData().monthsParse(e),!Zt(e))return r}var t=e,s=r.date();return s=s<29?s:Math.min(s,$o(r.year(),t)),r._isUTC?r._d.setUTCMonth(t,s):r._d.setMonth(t,s),r}function kl(r){return r!=null?(bl(this,r),F.updateOffset(this,!0),this):ii(this,"Month")}function dx(){return $o(this.year(),this.month())}function fx(r){return this._monthsParseExact?(ie(this,"_monthsRegex")||Il.call(this),r?this._monthsShortStrictRegex:this._monthsShortRegex):(ie(this,"_monthsShortRegex")||(this._monthsShortRegex=ax),this._monthsShortStrictRegex&&r?this._monthsShortStrictRegex:this._monthsShortRegex)}function mx(r){return this._monthsParseExact?(ie(this,"_monthsRegex")||Il.call(this),r?this._monthsStrictRegex:this._monthsRegex):(ie(this,"_monthsRegex")||(this._monthsRegex=ox),this._monthsStrictRegex&&r?this._monthsStrictRegex:this._monthsRegex)}function Il(){function r(u,l){return l.length-u.length}var e=[],t=[],s=[],i,n,a,c;for(i=0;i<12;i++)n=Ct([2e3,i]),a=Gt(this.monthsShort(n,"")),c=Gt(this.months(n,"")),e.push(a),t.push(c),s.push(c),s.push(a);e.sort(r),t.sort(r),s.sort(r),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function px(r,e,t,s,i,n,a){var c;return r<100&&r>=0?(c=new Date(r+400,e,t,s,i,n,a),isFinite(c.getFullYear())&&c.setFullYear(r)):c=new Date(r,e,t,s,i,n,a),c}function ni(r){var e,t;return r<100&&r>=0?(t=Array.prototype.slice.call(arguments),t[0]=r+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(r)):e=new Date(Date.UTC.apply(null,arguments)),e}function ji(r,e,t){var s=7+e-t,i=(7+ni(r,0,s).getUTCDay()-e)%7;return-i+s-1}function Tl(r,e,t,s,i){var n=(7+t-s)%7,a=ji(r,s,i),c=1+7*(e-1)+n+a,u,l;return c<=0?(u=r-1,l=qs(u)+c):c>qs(r)?(u=r+1,l=c-qs(r)):(u=r,l=c),{year:u,dayOfYear:l}}function ai(r,e,t){var s=ji(r.year(),e,t),i=Math.floor((r.dayOfYear()-s-1)/7)+1,n,a;return i<1?(a=r.year()-1,n=i+qt(a,e,t)):i>qt(r.year(),e,t)?(n=i-qt(r.year(),e,t),a=r.year()+1):(a=r.year(),n=i),{week:n,year:a}}function qt(r,e,t){var s=ji(r,e,t),i=ji(r+1,e,t);return(qs(r)-s+i)/7}H("w",["ww",2],"wo","week");H("W",["WW",2],"Wo","isoWeek");R("w",xe,ks);R("ww",xe,je);R("W",xe,ks);R("WW",xe,je);yi(["w","ww","W","WW"],function(r,e,t,s){e[s.substr(0,1)]=X(r)});function gx(r){return ai(r,this._week.dow,this._week.doy).week}var xx={dow:0,doy:6};function yx(){return this._week.dow}function wx(){return this._week.doy}function vx(r){var e=this.localeData().week(this);return r==null?e:this.add((r-e)*7,"d")}function Dx(r){var e=ai(this,1,4).week;return r==null?e:this.add((r-e)*7,"d")}H("d",0,"do","day");H("dd",0,0,function(r){return this.localeData().weekdaysMin(this,r)});H("ddd",0,0,function(r){return this.localeData().weekdaysShort(this,r)});H("dddd",0,0,function(r){return this.localeData().weekdays(this,r)});H("e",0,0,"weekday");H("E",0,0,"isoWeekday");R("d",xe);R("e",xe);R("E",xe);R("dd",function(r,e){return e.weekdaysMinRegex(r)});R("ddd",function(r,e){return e.weekdaysShortRegex(r)});R("dddd",function(r,e){return e.weekdaysRegex(r)});yi(["dd","ddd","dddd"],function(r,e,t,s){var i=t._locale.weekdaysParse(r,s,t._strict);i!=null?e.d=i:q(t).invalidWeekday=r});yi(["d","e","E"],function(r,e,t,s){e[s]=X(r)});function bx(r,e){return typeof r!="string"?r:isNaN(r)?(r=e.weekdaysParse(r),typeof r=="number"?r:null):parseInt(r,10)}function kx(r,e){return typeof r=="string"?e.weekdaysParse(r)%7||7:isNaN(r)?null:r}function zo(r,e){return r.slice(e,7).concat(r.slice(0,e))}var Ix="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Al="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Tx="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ax=xi,Ex=xi,Cx=xi;function _x(r,e){var t=dt(this._weekdays)?this._weekdays:this._weekdays[r&&r!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return r===!0?zo(t,this._week.dow):r?t[r.day()]:t}function Px(r){return r===!0?zo(this._weekdaysShort,this._week.dow):r?this._weekdaysShort[r.day()]:this._weekdaysShort}function Sx(r){return r===!0?zo(this._weekdaysMin,this._week.dow):r?this._weekdaysMin[r.day()]:this._weekdaysMin}function Mx(r,e,t){var s,i,n,a=r.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)n=Ct([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(n,"").toLocaleLowerCase();return t?e==="dddd"?(i=Te.call(this._weekdaysParse,a),i!==-1?i:null):e==="ddd"?(i=Te.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=Te.call(this._minWeekdaysParse,a),i!==-1?i:null):e==="dddd"?(i=Te.call(this._weekdaysParse,a),i!==-1||(i=Te.call(this._shortWeekdaysParse,a),i!==-1)?i:(i=Te.call(this._minWeekdaysParse,a),i!==-1?i:null)):e==="ddd"?(i=Te.call(this._shortWeekdaysParse,a),i!==-1||(i=Te.call(this._weekdaysParse,a),i!==-1)?i:(i=Te.call(this._minWeekdaysParse,a),i!==-1?i:null)):(i=Te.call(this._minWeekdaysParse,a),i!==-1||(i=Te.call(this._weekdaysParse,a),i!==-1)?i:(i=Te.call(this._shortWeekdaysParse,a),i!==-1?i:null))}function Nx(r,e,t){var s,i,n;if(this._weekdaysParseExact)return Mx.call(this,r,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=Ct([2e3,1]).day(s),t&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(n.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[s].test(r))return s;if(t&&e==="ddd"&&this._shortWeekdaysParse[s].test(r))return s;if(t&&e==="dd"&&this._minWeekdaysParse[s].test(r))return s;if(!t&&this._weekdaysParse[s].test(r))return s}}function Ox(r){if(!this.isValid())return r!=null?this:NaN;var e=ii(this,"Day");return r!=null?(r=bx(r,this.localeData()),this.add(r-e,"d")):e}function Bx(r){if(!this.isValid())return r!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return r==null?e:this.add(r-e,"d")}function Fx(r){if(!this.isValid())return r!=null?this:NaN;if(r!=null){var e=kx(r,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Rx(r){return this._weekdaysParseExact?(ie(this,"_weekdaysRegex")||Go.call(this),r?this._weekdaysStrictRegex:this._weekdaysRegex):(ie(this,"_weekdaysRegex")||(this._weekdaysRegex=Ax),this._weekdaysStrictRegex&&r?this._weekdaysStrictRegex:this._weekdaysRegex)}function Lx(r){return this._weekdaysParseExact?(ie(this,"_weekdaysRegex")||Go.call(this),r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ie(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ex),this._weekdaysShortStrictRegex&&r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ux(r){return this._weekdaysParseExact?(ie(this,"_weekdaysRegex")||Go.call(this),r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ie(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Cx),this._weekdaysMinStrictRegex&&r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Go(){function r(h,d){return d.length-h.length}var e=[],t=[],s=[],i=[],n,a,c,u,l;for(n=0;n<7;n++)a=Ct([2e3,1]).day(n),c=Gt(this.weekdaysMin(a,"")),u=Gt(this.weekdaysShort(a,"")),l=Gt(this.weekdays(a,"")),e.push(c),t.push(u),s.push(l),i.push(c),i.push(u),i.push(l);e.sort(r),t.sort(r),s.sort(r),i.sort(r),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function qo(){return this.hours()%12||12}function Wx(){return this.hours()||24}H("H",["HH",2],0,"hour");H("h",["hh",2],0,qo);H("k",["kk",2],0,Wx);H("hmm",0,0,function(){return""+qo.apply(this)+At(this.minutes(),2)});H("hmmss",0,0,function(){return""+qo.apply(this)+At(this.minutes(),2)+At(this.seconds(),2)});H("Hmm",0,0,function(){return""+this.hours()+At(this.minutes(),2)});H("Hmmss",0,0,function(){return""+this.hours()+At(this.minutes(),2)+At(this.seconds(),2)});function El(r,e){H(r,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}El("a",!0);El("A",!1);function Cl(r,e){return e._meridiemParse}R("a",Cl);R("A",Cl);R("H",xe,Vo);R("h",xe,ks);R("k",xe,ks);R("HH",xe,je);R("hh",xe,je);R("kk",xe,je);R("hmm",gl);R("hmmss",xl);R("Hmm",gl);R("Hmmss",xl);le(["H","HH"],_e);le(["k","kk"],function(r,e,t){var s=X(r);e[_e]=s===24?0:s});le(["a","A"],function(r,e,t){t._isPm=t._locale.isPM(r),t._meridiem=r});le(["h","hh"],function(r,e,t){e[_e]=X(r),q(t).bigHour=!0});le("hmm",function(r,e,t){var s=r.length-2;e[_e]=X(r.substr(0,s)),e[ht]=X(r.substr(s)),q(t).bigHour=!0});le("hmmss",function(r,e,t){var s=r.length-4,i=r.length-2;e[_e]=X(r.substr(0,s)),e[ht]=X(r.substr(s,2)),e[Ht]=X(r.substr(i)),q(t).bigHour=!0});le("Hmm",function(r,e,t){var s=r.length-2;e[_e]=X(r.substr(0,s)),e[ht]=X(r.substr(s))});le("Hmmss",function(r,e,t){var s=r.length-4,i=r.length-2;e[_e]=X(r.substr(0,s)),e[ht]=X(r.substr(s,2)),e[Ht]=X(r.substr(i))});function Hx(r){return(r+"").toLowerCase().charAt(0)==="p"}var Yx=/[ap]\.?m?\.?/i,Vx=Is("Hours",!0);function $x(r,e,t){return r>11?t?"pm":"PM":t?"am":"AM"}var _l={calendar:Mg,longDateFormat:Fg,invalidDate:Lg,ordinal:Wg,dayOfMonthOrdinalParse:Hg,relativeTime:Vg,months:nx,monthsShort:vl,week:xx,weekdays:Ix,weekdaysMin:Tx,weekdaysShort:Al,meridiemParse:Yx},we={},Rs={},oi;function zx(r,e){var t,s=Math.min(r.length,e.length);for(t=0;t<s;t+=1)if(r[t]!==e[t])return t;return s}function z0(r){return r&&r.toLowerCase().replace("_","-")}function Gx(r){for(var e=0,t,s,i,n;e<r.length;){for(n=z0(r[e]).split("-"),t=n.length,s=z0(r[e+1]),s=s?s.split("-"):null;t>0;){if(i=kn(n.slice(0,t).join("-")),i)return i;if(s&&s.length>=t&&zx(n,s)>=t-1)break;t--}e++}return oi}function qx(r){return!!(r&&r.match("^[^/\\\\]*$"))}function kn(r){var e=null,t;if(we[r]===void 0&&typeof module<"u"&&module&&module.exports&&qx(r))try{e=oi._abbr,t=require,t("./locale/"+r),mr(e)}catch{we[r]=null}return we[r]}function mr(r,e){var t;return r&&($e(e)?t=Xt(r):t=Jo(r,e),t?oi=t:typeof console<"u"&&console.warn&&console.warn("Locale "+r+" not found. Did you forget to load it?")),oi._abbr}function Jo(r,e){if(e!==null){var t,s=_l;if(e.abbr=r,we[r]!=null)dl("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=we[r]._config;else if(e.parentLocale!=null)if(we[e.parentLocale]!=null)s=we[e.parentLocale]._config;else if(t=kn(e.parentLocale),t!=null)s=t._config;else return Rs[e.parentLocale]||(Rs[e.parentLocale]=[]),Rs[e.parentLocale].push({name:r,config:e}),null;return we[r]=new Lo(so(s,e)),Rs[r]&&Rs[r].forEach(function(i){Jo(i.name,i.config)}),mr(r),we[r]}else return delete we[r],null}function Jx(r,e){if(e!=null){var t,s,i=_l;we[r]!=null&&we[r].parentLocale!=null?we[r].set(so(we[r]._config,e)):(s=kn(r),s!=null&&(i=s._config),e=so(i,e),s==null&&(e.abbr=r),t=new Lo(e),t.parentLocale=we[r],we[r]=t),mr(r)}else we[r]!=null&&(we[r].parentLocale!=null?(we[r]=we[r].parentLocale,r===mr()&&mr(r)):we[r]!=null&&delete we[r]);return we[r]}function Xt(r){var e;if(r&&r._locale&&r._locale._abbr&&(r=r._locale._abbr),!r)return oi;if(!dt(r)){if(e=kn(r),e)return e;r=[r]}return Gx(r)}function Zx(){return io(we)}function Zo(r){var e,t=r._a;return t&&q(r).overflow===-2&&(e=t[Wt]<0||t[Wt]>11?Wt:t[vt]<1||t[vt]>$o(t[Le],t[Wt])?vt:t[_e]<0||t[_e]>24||t[_e]===24&&(t[ht]!==0||t[Ht]!==0||t[Mr]!==0)?_e:t[ht]<0||t[ht]>59?ht:t[Ht]<0||t[Ht]>59?Ht:t[Mr]<0||t[Mr]>999?Mr:-1,q(r)._overflowDayOfYear&&(e<Le||e>vt)&&(e=vt),q(r)._overflowWeeks&&e===-1&&(e=jg),q(r)._overflowWeekday&&e===-1&&(e=ex),q(r).overflow=e),r}var Qx=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kx=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Xx=/Z|[+-]\d\d(?::?\d\d)?/,_i=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Na=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],jx=/^\/?Date\((-?\d+)/i,e1=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,t1={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Pl(r){var e,t,s=r._i,i=Qx.exec(s)||Kx.exec(s),n,a,c,u,l=_i.length,h=Na.length;if(i){for(q(r).iso=!0,e=0,t=l;e<t;e++)if(_i[e][1].exec(i[1])){a=_i[e][0],n=_i[e][2]!==!1;break}if(a==null){r._isValid=!1;return}if(i[3]){for(e=0,t=h;e<t;e++)if(Na[e][1].exec(i[3])){c=(i[2]||" ")+Na[e][0];break}if(c==null){r._isValid=!1;return}}if(!n&&c!=null){r._isValid=!1;return}if(i[4])if(Xx.exec(i[4]))u="Z";else{r._isValid=!1;return}r._f=a+(c||"")+(u||""),Ko(r)}else r._isValid=!1}function r1(r,e,t,s,i,n){var a=[s1(r),vl.indexOf(e),parseInt(t,10),parseInt(s,10),parseInt(i,10)];return n&&a.push(parseInt(n,10)),a}function s1(r){var e=parseInt(r,10);return e<=49?2e3+e:e<=999?1900+e:e}function i1(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function n1(r,e,t){if(r){var s=Al.indexOf(r),i=new Date(e[0],e[1],e[2]).getDay();if(s!==i)return q(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function a1(r,e,t){if(r)return t1[r];if(e)return 0;var s=parseInt(t,10),i=s%100,n=(s-i)/100;return n*60+i}function Sl(r){var e=e1.exec(i1(r._i)),t;if(e){if(t=r1(e[4],e[3],e[2],e[5],e[6],e[7]),!n1(e[1],t,r))return;r._a=t,r._tzm=a1(e[8],e[9],e[10]),r._d=ni.apply(null,r._a),r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),q(r).rfc2822=!0}else r._isValid=!1}function o1(r){var e=jx.exec(r._i);if(e!==null){r._d=new Date(+e[1]);return}if(Pl(r),r._isValid===!1)delete r._isValid;else return;if(Sl(r),r._isValid===!1)delete r._isValid;else return;r._strict?r._isValid=!1:F.createFromInputFallback(r)}F.createFromInputFallback=nt("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(r){r._d=new Date(r._i+(r._useUTC?" UTC":""))});function Zr(r,e,t){return r??e??t}function c1(r){var e=new Date(F.now());return r._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Qo(r){var e,t,s=[],i,n,a;if(!r._d){for(i=c1(r),r._w&&r._a[vt]==null&&r._a[Wt]==null&&u1(r),r._dayOfYear!=null&&(a=Zr(r._a[Le],i[Le]),(r._dayOfYear>qs(a)||r._dayOfYear===0)&&(q(r)._overflowDayOfYear=!0),t=ni(a,0,r._dayOfYear),r._a[Wt]=t.getUTCMonth(),r._a[vt]=t.getUTCDate()),e=0;e<3&&r._a[e]==null;++e)r._a[e]=s[e]=i[e];for(;e<7;e++)r._a[e]=s[e]=r._a[e]==null?e===2?1:0:r._a[e];r._a[_e]===24&&r._a[ht]===0&&r._a[Ht]===0&&r._a[Mr]===0&&(r._nextDay=!0,r._a[_e]=0),r._d=(r._useUTC?ni:px).apply(null,s),n=r._useUTC?r._d.getUTCDay():r._d.getDay(),r._tzm!=null&&r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),r._nextDay&&(r._a[_e]=24),r._w&&typeof r._w.d<"u"&&r._w.d!==n&&(q(r).weekdayMismatch=!0)}}function u1(r){var e,t,s,i,n,a,c,u,l;e=r._w,e.GG!=null||e.W!=null||e.E!=null?(n=1,a=4,t=Zr(e.GG,r._a[Le],ai(ge(),1,4).year),s=Zr(e.W,1),i=Zr(e.E,1),(i<1||i>7)&&(u=!0)):(n=r._locale._week.dow,a=r._locale._week.doy,l=ai(ge(),n,a),t=Zr(e.gg,r._a[Le],l.year),s=Zr(e.w,l.week),e.d!=null?(i=e.d,(i<0||i>6)&&(u=!0)):e.e!=null?(i=e.e+n,(e.e<0||e.e>6)&&(u=!0)):i=n),s<1||s>qt(t,n,a)?q(r)._overflowWeeks=!0:u!=null?q(r)._overflowWeekday=!0:(c=Tl(t,s,i,n,a),r._a[Le]=c.year,r._dayOfYear=c.dayOfYear)}F.ISO_8601=function(){};F.RFC_2822=function(){};function Ko(r){if(r._f===F.ISO_8601){Pl(r);return}if(r._f===F.RFC_2822){Sl(r);return}r._a=[],q(r).empty=!0;var e=""+r._i,t,s,i,n,a,c=e.length,u=0,l,h;for(i=fl(r._f,r._locale).match(Uo)||[],h=i.length,t=0;t<h;t++)n=i[t],s=(e.match(Qg(n,r))||[])[0],s&&(a=e.substr(0,e.indexOf(s)),a.length>0&&q(r).unusedInput.push(a),e=e.slice(e.indexOf(s)+s.length),u+=s.length),ns[n]?(s?q(r).empty=!1:q(r).unusedTokens.push(n),Xg(n,s,r)):r._strict&&!s&&q(r).unusedTokens.push(n);q(r).charsLeftOver=c-u,e.length>0&&q(r).unusedInput.push(e),r._a[_e]<=12&&q(r).bigHour===!0&&r._a[_e]>0&&(q(r).bigHour=void 0),q(r).parsedDateParts=r._a.slice(0),q(r).meridiem=r._meridiem,r._a[_e]=l1(r._locale,r._a[_e],r._meridiem),l=q(r).era,l!==null&&(r._a[Le]=r._locale.erasConvertYear(l,r._a[Le])),Qo(r),Zo(r)}function l1(r,e,t){var s;return t==null?e:r.meridiemHour!=null?r.meridiemHour(e,t):(r.isPM!=null&&(s=r.isPM(t),s&&e<12&&(e+=12),!s&&e===12&&(e=0)),e)}function h1(r){var e,t,s,i,n,a,c=!1,u=r._f.length;if(u===0){q(r).invalidFormat=!0,r._d=new Date(NaN);return}for(i=0;i<u;i++)n=0,a=!1,e=Ro({},r),r._useUTC!=null&&(e._useUTC=r._useUTC),e._f=r._f[i],Ko(e),Fo(e)&&(a=!0),n+=q(e).charsLeftOver,n+=q(e).unusedTokens.length*10,q(e).score=n,c?n<s&&(s=n,t=e):(s==null||n<s||a)&&(s=n,t=e,a&&(c=!0));lr(r,t||e)}function d1(r){if(!r._d){var e=Wo(r._i),t=e.day===void 0?e.date:e.day;r._a=ll([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(s){return s&&parseInt(s,10)}),Qo(r)}}function f1(r){var e=new gi(Zo(Ml(r)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Ml(r){var e=r._i,t=r._f;return r._locale=r._locale||Xt(r._l),e===null||t===void 0&&e===""?gn({nullInput:!0}):(typeof e=="string"&&(r._i=e=r._locale.preparse(e)),ft(e)?new gi(Zo(e)):(pi(e)?r._d=e:dt(t)?h1(r):t?Ko(r):m1(r),Fo(r)||(r._d=null),r))}function m1(r){var e=r._i;$e(e)?r._d=new Date(F.now()):pi(e)?r._d=new Date(e.valueOf()):typeof e=="string"?o1(r):dt(e)?(r._a=ll(e.slice(0),function(t){return parseInt(t,10)}),Qo(r)):Br(e)?d1(r):Zt(e)?r._d=new Date(e):F.createFromInputFallback(r)}function Nl(r,e,t,s,i){var n={};return(e===!0||e===!1)&&(s=e,e=void 0),(t===!0||t===!1)&&(s=t,t=void 0),(Br(r)&&Bo(r)||dt(r)&&r.length===0)&&(r=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=i,n._l=t,n._i=r,n._f=e,n._strict=s,f1(n)}function ge(r,e,t,s){return Nl(r,e,t,s,!1)}var p1=nt("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=ge.apply(null,arguments);return this.isValid()&&r.isValid()?r<this?this:r:gn()}),g1=nt("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=ge.apply(null,arguments);return this.isValid()&&r.isValid()?r>this?this:r:gn()});function Ol(r,e){var t,s;if(e.length===1&&dt(e[0])&&(e=e[0]),!e.length)return ge();for(t=e[0],s=1;s<e.length;++s)(!e[s].isValid()||e[s][r](t))&&(t=e[s]);return t}function x1(){var r=[].slice.call(arguments,0);return Ol("isBefore",r)}function y1(){var r=[].slice.call(arguments,0);return Ol("isAfter",r)}var w1=function(){return Date.now?Date.now():+new Date},Ls=["year","quarter","month","week","day","hour","minute","second","millisecond"];function v1(r){var e,t=!1,s,i=Ls.length;for(e in r)if(ie(r,e)&&!(Te.call(Ls,e)!==-1&&(r[e]==null||!isNaN(r[e]))))return!1;for(s=0;s<i;++s)if(r[Ls[s]]){if(t)return!1;parseFloat(r[Ls[s]])!==X(r[Ls[s]])&&(t=!0)}return!0}function D1(){return this._isValid}function b1(){return mt(NaN)}function In(r){var e=Wo(r),t=e.year||0,s=e.quarter||0,i=e.month||0,n=e.week||e.isoWeek||0,a=e.day||0,c=e.hour||0,u=e.minute||0,l=e.second||0,h=e.millisecond||0;this._isValid=v1(e),this._milliseconds=+h+l*1e3+u*6e4+c*1e3*60*60,this._days=+a+n*7,this._months=+i+s*3+t*12,this._data={},this._locale=Xt(),this._bubble()}function Fi(r){return r instanceof In}function ao(r){return r<0?Math.round(-1*r)*-1:Math.round(r)}function k1(r,e,t){var s=Math.min(r.length,e.length),i=Math.abs(r.length-e.length),n=0,a;for(a=0;a<s;a++)(t&&r[a]!==e[a]||!t&&X(r[a])!==X(e[a]))&&n++;return n+i}function Bl(r,e){H(r,0,0,function(){var t=this.utcOffset(),s="+";return t<0&&(t=-t,s="-"),s+At(~~(t/60),2)+e+At(~~t%60,2)})}Bl("Z",":");Bl("ZZ","");R("Z",Dn);R("ZZ",Dn);le(["Z","ZZ"],function(r,e,t){t._useUTC=!0,t._tzm=Xo(Dn,r)});var I1=/([\+\-]|\d\d)/gi;function Xo(r,e){var t=(e||"").match(r),s,i,n;return t===null?null:(s=t[t.length-1]||[],i=(s+"").match(I1)||["-",0,0],n=+(i[1]*60)+X(i[2]),n===0?0:i[0]==="+"?n:-n)}function jo(r,e){var t,s;return e._isUTC?(t=e.clone(),s=(ft(r)||pi(r)?r.valueOf():ge(r).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+s),F.updateOffset(t,!1),t):ge(r).local()}function oo(r){return-Math.round(r._d.getTimezoneOffset())}F.updateOffset=function(){};function T1(r,e,t){var s=this._offset||0,i;if(!this.isValid())return r!=null?this:NaN;if(r!=null){if(typeof r=="string"){if(r=Xo(Dn,r),r===null)return this}else Math.abs(r)<16&&!t&&(r=r*60);return!this._isUTC&&e&&(i=oo(this)),this._offset=r,this._isUTC=!0,i!=null&&this.add(i,"m"),s!==r&&(!e||this._changeInProgress?Ll(this,mt(r-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,F.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:oo(this)}function A1(r,e){return r!=null?(typeof r!="string"&&(r=-r),this.utcOffset(r,e),this):-this.utcOffset()}function E1(r){return this.utcOffset(0,r)}function C1(r){return this._isUTC&&(this.utcOffset(0,r),this._isUTC=!1,r&&this.subtract(oo(this),"m")),this}function _1(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var r=Xo(Jg,this._i);r!=null?this.utcOffset(r):this.utcOffset(0,!0)}return this}function P1(r){return this.isValid()?(r=r?ge(r).utcOffset():0,(this.utcOffset()-r)%60===0):!1}function S1(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function M1(){if(!$e(this._isDSTShifted))return this._isDSTShifted;var r={},e;return Ro(r,this),r=Ml(r),r._a?(e=r._isUTC?Ct(r._a):ge(r._a),this._isDSTShifted=this.isValid()&&k1(r._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function N1(){return this.isValid()?!this._isUTC:!1}function O1(){return this.isValid()?this._isUTC:!1}function Fl(){return this.isValid()?this._isUTC&&this._offset===0:!1}var B1=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,F1=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function mt(r,e){var t=r,s=null,i,n,a;return Fi(r)?t={ms:r._milliseconds,d:r._days,M:r._months}:Zt(r)||!isNaN(+r)?(t={},e?t[e]=+r:t.milliseconds=+r):(s=B1.exec(r))?(i=s[1]==="-"?-1:1,t={y:0,d:X(s[vt])*i,h:X(s[_e])*i,m:X(s[ht])*i,s:X(s[Ht])*i,ms:X(ao(s[Mr]*1e3))*i}):(s=F1.exec(r))?(i=s[1]==="-"?-1:1,t={y:kr(s[2],i),M:kr(s[3],i),w:kr(s[4],i),d:kr(s[5],i),h:kr(s[6],i),m:kr(s[7],i),s:kr(s[8],i)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(a=R1(ge(t.from),ge(t.to)),t={},t.ms=a.milliseconds,t.M=a.months),n=new In(t),Fi(r)&&ie(r,"_locale")&&(n._locale=r._locale),Fi(r)&&ie(r,"_isValid")&&(n._isValid=r._isValid),n}mt.fn=In.prototype;mt.invalid=b1;function kr(r,e){var t=r&&parseFloat(r.replace(",","."));return(isNaN(t)?0:t)*e}function G0(r,e){var t={};return t.months=e.month()-r.month()+(e.year()-r.year())*12,r.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+r.clone().add(t.months,"M"),t}function R1(r,e){var t;return r.isValid()&&e.isValid()?(e=jo(e,r),r.isBefore(e)?t=G0(r,e):(t=G0(e,r),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function Rl(r,e){return function(t,s){var i,n;return s!==null&&!isNaN(+s)&&(dl(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=t,t=s,s=n),i=mt(t,s),Ll(this,i,r),this}}function Ll(r,e,t,s){var i=e._milliseconds,n=ao(e._days),a=ao(e._months);r.isValid()&&(s=s??!0,a&&bl(r,ii(r,"Month")+a*t),n&&wl(r,"Date",ii(r,"Date")+n*t),i&&r._d.setTime(r._d.valueOf()+i*t),s&&F.updateOffset(r,n||a))}var L1=Rl(1,"add"),U1=Rl(-1,"subtract");function Ul(r){return typeof r=="string"||r instanceof String}function W1(r){return ft(r)||pi(r)||Ul(r)||Zt(r)||Y1(r)||H1(r)||r===null||r===void 0}function H1(r){var e=Br(r)&&!Bo(r),t=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,n,a=s.length;for(i=0;i<a;i+=1)n=s[i],t=t||ie(r,n);return e&&t}function Y1(r){var e=dt(r),t=!1;return e&&(t=r.filter(function(s){return!Zt(s)&&Ul(r)}).length===0),e&&t}function V1(r){var e=Br(r)&&!Bo(r),t=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,n;for(i=0;i<s.length;i+=1)n=s[i],t=t||ie(r,n);return e&&t}function $1(r,e){var t=r.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function z1(r,e){arguments.length===1&&(arguments[0]?W1(arguments[0])?(r=arguments[0],e=void 0):V1(arguments[0])&&(e=arguments[0],r=void 0):(r=void 0,e=void 0));var t=r||ge(),s=jo(t,this).startOf("day"),i=F.calendarFormat(this,s)||"sameElse",n=e&&(_t(e[i])?e[i].call(this,t):e[i]);return this.format(n||this.localeData().calendar(i,this,ge(t)))}function G1(){return new gi(this)}function q1(r,e){var t=ft(r)?r:ge(r);return this.isValid()&&t.isValid()?(e=at(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function J1(r,e){var t=ft(r)?r:ge(r);return this.isValid()&&t.isValid()?(e=at(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function Z1(r,e,t,s){var i=ft(r)?r:ge(r),n=ft(e)?e:ge(e);return this.isValid()&&i.isValid()&&n.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(i,t):!this.isBefore(i,t))&&(s[1]===")"?this.isBefore(n,t):!this.isAfter(n,t))):!1}function Q1(r,e){var t=ft(r)?r:ge(r),s;return this.isValid()&&t.isValid()?(e=at(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(s=t.valueOf(),this.clone().startOf(e).valueOf()<=s&&s<=this.clone().endOf(e).valueOf())):!1}function K1(r,e){return this.isSame(r,e)||this.isAfter(r,e)}function X1(r,e){return this.isSame(r,e)||this.isBefore(r,e)}function j1(r,e,t){var s,i,n;if(!this.isValid())return NaN;if(s=jo(r,this),!s.isValid())return NaN;switch(i=(s.utcOffset()-this.utcOffset())*6e4,e=at(e),e){case"year":n=Ri(this,s)/12;break;case"month":n=Ri(this,s);break;case"quarter":n=Ri(this,s)/3;break;case"second":n=(this-s)/1e3;break;case"minute":n=(this-s)/6e4;break;case"hour":n=(this-s)/36e5;break;case"day":n=(this-s-i)/864e5;break;case"week":n=(this-s-i)/6048e5;break;default:n=this-s}return t?n:it(n)}function Ri(r,e){if(r.date()<e.date())return-Ri(e,r);var t=(e.year()-r.year())*12+(e.month()-r.month()),s=r.clone().add(t,"months"),i,n;return e-s<0?(i=r.clone().add(t-1,"months"),n=(e-s)/(s-i)):(i=r.clone().add(t+1,"months"),n=(e-s)/(i-s)),-(t+n)||0}F.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";F.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function ey(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ty(r){if(!this.isValid())return null;var e=r!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?Bi(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):_t(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Bi(t,"Z")):Bi(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ry(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var r="moment",e="",t,s,i,n;return this.isLocal()||(r=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+r+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",n=e+'[")]',this.format(t+s+i+n)}function sy(r){r||(r=this.isUtc()?F.defaultFormatUtc:F.defaultFormat);var e=Bi(this,r);return this.localeData().postformat(e)}function iy(r,e){return this.isValid()&&(ft(r)&&r.isValid()||ge(r).isValid())?mt({to:this,from:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ny(r){return this.from(ge(),r)}function ay(r,e){return this.isValid()&&(ft(r)&&r.isValid()||ge(r).isValid())?mt({from:this,to:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function oy(r){return this.to(ge(),r)}function Wl(r){var e;return r===void 0?this._locale._abbr:(e=Xt(r),e!=null&&(this._locale=e),this)}var Hl=nt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(r){return r===void 0?this.localeData():this.locale(r)});function Yl(){return this._locale}var en=1e3,as=60*en,tn=60*as,Vl=(365*400+97)*24*tn;function os(r,e){return(r%e+e)%e}function $l(r,e,t){return r<100&&r>=0?new Date(r+400,e,t)-Vl:new Date(r,e,t).valueOf()}function zl(r,e,t){return r<100&&r>=0?Date.UTC(r+400,e,t)-Vl:Date.UTC(r,e,t)}function cy(r){var e,t;if(r=at(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?zl:$l,r){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=os(e+(this._isUTC?0:this.utcOffset()*as),tn);break;case"minute":e=this._d.valueOf(),e-=os(e,as);break;case"second":e=this._d.valueOf(),e-=os(e,en);break}return this._d.setTime(e),F.updateOffset(this,!0),this}function uy(r){var e,t;if(r=at(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?zl:$l,r){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=tn-os(e+(this._isUTC?0:this.utcOffset()*as),tn)-1;break;case"minute":e=this._d.valueOf(),e+=as-os(e,as)-1;break;case"second":e=this._d.valueOf(),e+=en-os(e,en)-1;break}return this._d.setTime(e),F.updateOffset(this,!0),this}function ly(){return this._d.valueOf()-(this._offset||0)*6e4}function hy(){return Math.floor(this.valueOf()/1e3)}function dy(){return new Date(this.valueOf())}function fy(){var r=this;return[r.year(),r.month(),r.date(),r.hour(),r.minute(),r.second(),r.millisecond()]}function my(){var r=this;return{years:r.year(),months:r.month(),date:r.date(),hours:r.hours(),minutes:r.minutes(),seconds:r.seconds(),milliseconds:r.milliseconds()}}function py(){return this.isValid()?this.toISOString():null}function gy(){return Fo(this)}function xy(){return lr({},q(this))}function yy(){return q(this).overflow}function wy(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}H("N",0,0,"eraAbbr");H("NN",0,0,"eraAbbr");H("NNN",0,0,"eraAbbr");H("NNNN",0,0,"eraName");H("NNNNN",0,0,"eraNarrow");H("y",["y",1],"yo","eraYear");H("y",["yy",2],0,"eraYear");H("y",["yyy",3],0,"eraYear");H("y",["yyyy",4],0,"eraYear");R("N",ec);R("NN",ec);R("NNN",ec);R("NNNN",Py);R("NNNNN",Sy);le(["N","NN","NNN","NNNN","NNNNN"],function(r,e,t,s){var i=t._locale.erasParse(r,s,t._strict);i?q(t).era=i:q(t).invalidEra=r});R("y",bs);R("yy",bs);R("yyy",bs);R("yyyy",bs);R("yo",My);le(["y","yy","yyy","yyyy"],Le);le(["yo"],function(r,e,t,s){var i;t._locale._eraYearOrdinalRegex&&(i=r.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[Le]=t._locale.eraYearOrdinalParse(r,i):e[Le]=parseInt(r,10)});function vy(r,e){var t,s,i,n=this._eras||Xt("en")._eras;for(t=0,s=n.length;t<s;++t){switch(typeof n[t].since){case"string":i=F(n[t].since).startOf("day"),n[t].since=i.valueOf();break}switch(typeof n[t].until){case"undefined":n[t].until=1/0;break;case"string":i=F(n[t].until).startOf("day").valueOf(),n[t].until=i.valueOf();break}}return n}function Dy(r,e,t){var s,i,n=this.eras(),a,c,u;for(r=r.toUpperCase(),s=0,i=n.length;s<i;++s)if(a=n[s].name.toUpperCase(),c=n[s].abbr.toUpperCase(),u=n[s].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(c===r)return n[s];break;case"NNNN":if(a===r)return n[s];break;case"NNNNN":if(u===r)return n[s];break}else if([a,c,u].indexOf(r)>=0)return n[s]}function by(r,e){var t=r.since<=r.until?1:-1;return e===void 0?F(r.since).year():F(r.since).year()+(e-r.offset)*t}function ky(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].name;return""}function Iy(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].narrow;return""}function Ty(){var r,e,t,s=this.localeData().eras();for(r=0,e=s.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),s[r].since<=t&&t<=s[r].until||s[r].until<=t&&t<=s[r].since)return s[r].abbr;return""}function Ay(){var r,e,t,s,i=this.localeData().eras();for(r=0,e=i.length;r<e;++r)if(t=i[r].since<=i[r].until?1:-1,s=this.clone().startOf("day").valueOf(),i[r].since<=s&&s<=i[r].until||i[r].until<=s&&s<=i[r].since)return(this.year()-F(i[r].since).year())*t+i[r].offset;return this.year()}function Ey(r){return ie(this,"_erasNameRegex")||tc.call(this),r?this._erasNameRegex:this._erasRegex}function Cy(r){return ie(this,"_erasAbbrRegex")||tc.call(this),r?this._erasAbbrRegex:this._erasRegex}function _y(r){return ie(this,"_erasNarrowRegex")||tc.call(this),r?this._erasNarrowRegex:this._erasRegex}function ec(r,e){return e.erasAbbrRegex(r)}function Py(r,e){return e.erasNameRegex(r)}function Sy(r,e){return e.erasNarrowRegex(r)}function My(r,e){return e._eraYearOrdinalRegex||bs}function tc(){var r=[],e=[],t=[],s=[],i,n,a,c,u,l=this.eras();for(i=0,n=l.length;i<n;++i)a=Gt(l[i].name),c=Gt(l[i].abbr),u=Gt(l[i].narrow),e.push(a),r.push(c),t.push(u),s.push(a),s.push(c),s.push(u);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}H(0,["gg",2],0,function(){return this.weekYear()%100});H(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Tn(r,e){H(0,[r,r.length],0,e)}Tn("gggg","weekYear");Tn("ggggg","weekYear");Tn("GGGG","isoWeekYear");Tn("GGGGG","isoWeekYear");R("G",vn);R("g",vn);R("GG",xe,je);R("gg",xe,je);R("GGGG",Yo,Ho);R("gggg",Yo,Ho);R("GGGGG",wn,xn);R("ggggg",wn,xn);yi(["gggg","ggggg","GGGG","GGGGG"],function(r,e,t,s){e[s.substr(0,2)]=X(r)});yi(["gg","GG"],function(r,e,t,s){e[s]=F.parseTwoDigitYear(r)});function Ny(r){return Gl.call(this,r,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Oy(r){return Gl.call(this,r,this.isoWeek(),this.isoWeekday(),1,4)}function By(){return qt(this.year(),1,4)}function Fy(){return qt(this.isoWeekYear(),1,4)}function Ry(){var r=this.localeData()._week;return qt(this.year(),r.dow,r.doy)}function Ly(){var r=this.localeData()._week;return qt(this.weekYear(),r.dow,r.doy)}function Gl(r,e,t,s,i){var n;return r==null?ai(this,s,i).year:(n=qt(r,s,i),e>n&&(e=n),Uy.call(this,r,e,t,s,i))}function Uy(r,e,t,s,i){var n=Tl(r,e,t,s,i),a=ni(n.year,0,n.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}H("Q",0,"Qo","quarter");R("Q",ml);le("Q",function(r,e){e[Wt]=(X(r)-1)*3});function Wy(r){return r==null?Math.ceil((this.month()+1)/3):this.month((r-1)*3+this.month()%3)}H("D",["DD",2],"Do","date");R("D",xe,ks);R("DD",xe,je);R("Do",function(r,e){return r?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});le(["D","DD"],vt);le("Do",function(r,e){e[vt]=X(r.match(xe)[0])});var ql=Is("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear");R("DDD",yn);R("DDDD",pl);le(["DDD","DDDD"],function(r,e,t){t._dayOfYear=X(r)});function Hy(r){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return r==null?e:this.add(r-e,"d")}H("m",["mm",2],0,"minute");R("m",xe,Vo);R("mm",xe,je);le(["m","mm"],ht);var Yy=Is("Minutes",!1);H("s",["ss",2],0,"second");R("s",xe,Vo);R("ss",xe,je);le(["s","ss"],Ht);var Vy=Is("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)});H(0,["SS",2],0,function(){return~~(this.millisecond()/10)});H(0,["SSS",3],0,"millisecond");H(0,["SSSS",4],0,function(){return this.millisecond()*10});H(0,["SSSSS",5],0,function(){return this.millisecond()*100});H(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});H(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});H(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});H(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});R("S",yn,ml);R("SS",yn,je);R("SSS",yn,pl);var hr,Jl;for(hr="SSSS";hr.length<=9;hr+="S")R(hr,bs);function $y(r,e){e[Mr]=X(("0."+r)*1e3)}for(hr="S";hr.length<=9;hr+="S")le(hr,$y);Jl=Is("Milliseconds",!1);H("z",0,0,"zoneAbbr");H("zz",0,0,"zoneName");function zy(){return this._isUTC?"UTC":""}function Gy(){return this._isUTC?"Coordinated Universal Time":""}var B=gi.prototype;B.add=L1;B.calendar=z1;B.clone=G1;B.diff=j1;B.endOf=uy;B.format=sy;B.from=iy;B.fromNow=ny;B.to=ay;B.toNow=oy;B.get=rx;B.invalidAt=yy;B.isAfter=q1;B.isBefore=J1;B.isBetween=Z1;B.isSame=Q1;B.isSameOrAfter=K1;B.isSameOrBefore=X1;B.isValid=gy;B.lang=Hl;B.locale=Wl;B.localeData=Yl;B.max=g1;B.min=p1;B.parsingFlags=xy;B.set=sx;B.startOf=cy;B.subtract=U1;B.toArray=fy;B.toObject=my;B.toDate=dy;B.toISOString=ty;B.inspect=ry;typeof Symbol<"u"&&Symbol.for!=null&&(B[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});B.toJSON=py;B.toString=ey;B.unix=hy;B.valueOf=ly;B.creationData=wy;B.eraName=ky;B.eraNarrow=Iy;B.eraAbbr=Ty;B.eraYear=Ay;B.year=yl;B.isLeapYear=tx;B.weekYear=Ny;B.isoWeekYear=Oy;B.quarter=B.quarters=Wy;B.month=kl;B.daysInMonth=dx;B.week=B.weeks=vx;B.isoWeek=B.isoWeeks=Dx;B.weeksInYear=Ry;B.weeksInWeekYear=Ly;B.isoWeeksInYear=By;B.isoWeeksInISOWeekYear=Fy;B.date=ql;B.day=B.days=Ox;B.weekday=Bx;B.isoWeekday=Fx;B.dayOfYear=Hy;B.hour=B.hours=Vx;B.minute=B.minutes=Yy;B.second=B.seconds=Vy;B.millisecond=B.milliseconds=Jl;B.utcOffset=T1;B.utc=E1;B.local=C1;B.parseZone=_1;B.hasAlignedHourOffset=P1;B.isDST=S1;B.isLocal=N1;B.isUtcOffset=O1;B.isUtc=Fl;B.isUTC=Fl;B.zoneAbbr=zy;B.zoneName=Gy;B.dates=nt("dates accessor is deprecated. Use date instead.",ql);B.months=nt("months accessor is deprecated. Use month instead",kl);B.years=nt("years accessor is deprecated. Use year instead",yl);B.zone=nt("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",A1);B.isDSTShifted=nt("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",M1);function qy(r){return ge(r*1e3)}function Jy(){return ge.apply(null,arguments).parseZone()}function Zl(r){return r}var ne=Lo.prototype;ne.calendar=Ng;ne.longDateFormat=Rg;ne.invalidDate=Ug;ne.ordinal=Yg;ne.preparse=Zl;ne.postformat=Zl;ne.relativeTime=$g;ne.pastFuture=zg;ne.set=Sg;ne.eras=vy;ne.erasParse=Dy;ne.erasConvertYear=by;ne.erasAbbrRegex=Cy;ne.erasNameRegex=Ey;ne.erasNarrowRegex=_y;ne.months=cx;ne.monthsShort=ux;ne.monthsParse=hx;ne.monthsRegex=mx;ne.monthsShortRegex=fx;ne.week=gx;ne.firstDayOfYear=wx;ne.firstDayOfWeek=yx;ne.weekdays=_x;ne.weekdaysMin=Sx;ne.weekdaysShort=Px;ne.weekdaysParse=Nx;ne.weekdaysRegex=Rx;ne.weekdaysShortRegex=Lx;ne.weekdaysMinRegex=Ux;ne.isPM=Hx;ne.meridiem=$x;function rn(r,e,t,s){var i=Xt(),n=Ct().set(s,e);return i[t](n,r)}function Ql(r,e,t){if(Zt(r)&&(e=r,r=void 0),r=r||"",e!=null)return rn(r,e,t,"month");var s,i=[];for(s=0;s<12;s++)i[s]=rn(r,s,t,"month");return i}function rc(r,e,t,s){typeof r=="boolean"?(Zt(e)&&(t=e,e=void 0),e=e||""):(e=r,t=e,r=!1,Zt(e)&&(t=e,e=void 0),e=e||"");var i=Xt(),n=r?i._week.dow:0,a,c=[];if(t!=null)return rn(e,(t+n)%7,s,"day");for(a=0;a<7;a++)c[a]=rn(e,(a+n)%7,s,"day");return c}function Zy(r,e){return Ql(r,e,"months")}function Qy(r,e){return Ql(r,e,"monthsShort")}function Ky(r,e,t){return rc(r,e,t,"weekdays")}function Xy(r,e,t){return rc(r,e,t,"weekdaysShort")}function jy(r,e,t){return rc(r,e,t,"weekdaysMin")}mr("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(r){var e=r%10,t=X(r%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return r+t}});F.lang=nt("moment.lang is deprecated. Use moment.locale instead.",mr);F.langData=nt("moment.langData is deprecated. Use moment.localeData instead.",Xt);var Pt=Math.abs;function ew(){var r=this._data;return this._milliseconds=Pt(this._milliseconds),this._days=Pt(this._days),this._months=Pt(this._months),r.milliseconds=Pt(r.milliseconds),r.seconds=Pt(r.seconds),r.minutes=Pt(r.minutes),r.hours=Pt(r.hours),r.months=Pt(r.months),r.years=Pt(r.years),this}function Kl(r,e,t,s){var i=mt(e,t);return r._milliseconds+=s*i._milliseconds,r._days+=s*i._days,r._months+=s*i._months,r._bubble()}function tw(r,e){return Kl(this,r,e,1)}function rw(r,e){return Kl(this,r,e,-1)}function q0(r){return r<0?Math.floor(r):Math.ceil(r)}function sw(){var r=this._milliseconds,e=this._days,t=this._months,s=this._data,i,n,a,c,u;return r>=0&&e>=0&&t>=0||r<=0&&e<=0&&t<=0||(r+=q0(co(t)+e)*864e5,e=0,t=0),s.milliseconds=r%1e3,i=it(r/1e3),s.seconds=i%60,n=it(i/60),s.minutes=n%60,a=it(n/60),s.hours=a%24,e+=it(a/24),u=it(Xl(e)),t+=u,e-=q0(co(u)),c=it(t/12),t%=12,s.days=e,s.months=t,s.years=c,this}function Xl(r){return r*4800/146097}function co(r){return r*146097/4800}function iw(r){if(!this.isValid())return NaN;var e,t,s=this._milliseconds;if(r=at(r),r==="month"||r==="quarter"||r==="year")switch(e=this._days+s/864e5,t=this._months+Xl(e),r){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(co(this._months)),r){case"week":return e/7+s/6048e5;case"day":return e+s/864e5;case"hour":return e*24+s/36e5;case"minute":return e*1440+s/6e4;case"second":return e*86400+s/1e3;case"millisecond":return Math.floor(e*864e5)+s;default:throw new Error("Unknown unit "+r)}}function jt(r){return function(){return this.as(r)}}var jl=jt("ms"),nw=jt("s"),aw=jt("m"),ow=jt("h"),cw=jt("d"),uw=jt("w"),lw=jt("M"),hw=jt("Q"),dw=jt("y"),fw=jl;function mw(){return mt(this)}function pw(r){return r=at(r),this.isValid()?this[r+"s"]():NaN}function Yr(r){return function(){return this.isValid()?this._data[r]:NaN}}var gw=Yr("milliseconds"),xw=Yr("seconds"),yw=Yr("minutes"),ww=Yr("hours"),vw=Yr("days"),Dw=Yr("months"),bw=Yr("years");function kw(){return it(this.days()/7)}var Mt=Math.round,Kr={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Iw(r,e,t,s,i){return i.relativeTime(e||1,!!t,r,s)}function Tw(r,e,t,s){var i=mt(r).abs(),n=Mt(i.as("s")),a=Mt(i.as("m")),c=Mt(i.as("h")),u=Mt(i.as("d")),l=Mt(i.as("M")),h=Mt(i.as("w")),d=Mt(i.as("y")),f=n<=t.ss&&["s",n]||n<t.s&&["ss",n]||a<=1&&["m"]||a<t.m&&["mm",a]||c<=1&&["h"]||c<t.h&&["hh",c]||u<=1&&["d"]||u<t.d&&["dd",u];return t.w!=null&&(f=f||h<=1&&["w"]||h<t.w&&["ww",h]),f=f||l<=1&&["M"]||l<t.M&&["MM",l]||d<=1&&["y"]||["yy",d],f[2]=e,f[3]=+r>0,f[4]=s,Iw.apply(null,f)}function Aw(r){return r===void 0?Mt:typeof r=="function"?(Mt=r,!0):!1}function Ew(r,e){return Kr[r]===void 0?!1:e===void 0?Kr[r]:(Kr[r]=e,r==="s"&&(Kr.ss=e-1),!0)}function Cw(r,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,s=Kr,i,n;return typeof r=="object"&&(e=r,r=!1),typeof r=="boolean"&&(t=r),typeof e=="object"&&(s=Object.assign({},Kr,e),e.s!=null&&e.ss==null&&(s.ss=e.s-1)),i=this.localeData(),n=Tw(this,!t,s,i),t&&(n=i.pastFuture(+this,n)),i.postformat(n)}var Oa=Math.abs;function Jr(r){return(r>0)-(r<0)||+r}function An(){if(!this.isValid())return this.localeData().invalidDate();var r=Oa(this._milliseconds)/1e3,e=Oa(this._days),t=Oa(this._months),s,i,n,a,c=this.asSeconds(),u,l,h,d;return c?(s=it(r/60),i=it(s/60),r%=60,s%=60,n=it(t/12),t%=12,a=r?r.toFixed(3).replace(/\.?0+$/,""):"",u=c<0?"-":"",l=Jr(this._months)!==Jr(c)?"-":"",h=Jr(this._days)!==Jr(c)?"-":"",d=Jr(this._milliseconds)!==Jr(c)?"-":"",u+"P"+(n?l+n+"Y":"")+(t?l+t+"M":"")+(e?h+e+"D":"")+(i||s||r?"T":"")+(i?d+i+"H":"")+(s?d+s+"M":"")+(r?d+a+"S":"")):"P0D"}var ee=In.prototype;ee.isValid=D1;ee.abs=ew;ee.add=tw;ee.subtract=rw;ee.as=iw;ee.asMilliseconds=jl;ee.asSeconds=nw;ee.asMinutes=aw;ee.asHours=ow;ee.asDays=cw;ee.asWeeks=uw;ee.asMonths=lw;ee.asQuarters=hw;ee.asYears=dw;ee.valueOf=fw;ee._bubble=sw;ee.clone=mw;ee.get=pw;ee.milliseconds=gw;ee.seconds=xw;ee.minutes=yw;ee.hours=ww;ee.days=vw;ee.weeks=kw;ee.months=Dw;ee.years=bw;ee.humanize=Cw;ee.toISOString=An;ee.toString=An;ee.toJSON=An;ee.locale=Wl;ee.localeData=Yl;ee.toIsoString=nt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",An);ee.lang=Hl;H("X",0,0,"unix");H("x",0,0,"valueOf");R("x",vn);R("X",Zg);le("X",function(r,e,t){t._d=new Date(parseFloat(r)*1e3)});le("x",function(r,e,t){t._d=new Date(X(r))});//! moment.js
F.version="2.30.1";_g(ge);F.fn=B;F.min=x1;F.max=y1;F.now=w1;F.utc=Ct;F.unix=qy;F.months=Zy;F.isDate=pi;F.locale=mr;F.invalid=gn;F.duration=mt;F.isMoment=ft;F.weekdays=Ky;F.parseZone=Jy;F.localeData=Xt;F.isDuration=Fi;F.monthsShort=Qy;F.weekdaysMin=jy;F.defineLocale=Jo;F.updateLocale=Jx;F.locales=Zx;F.weekdaysShort=Xy;F.normalizeUnits=at;F.relativeTimeRounding=Aw;F.relativeTimeThreshold=Ew;F.calendarFormat=$1;F.prototype=B;F.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function _w(r,e,t){const s=Ce(new Date,"HH:mm"),i=t??e===Ce(new Date,"dd-MM-yyyy"),n=r<Ao(s,"HH:mm",new Date);return i&&n}function Pw(r,e){const t=Ce(new Date,"HH:mm"),s=e===Ce(new Date,"dd-MM-yyyy"),i=r<Ao(t,"HH:mm",new Date);return s&&i}function Sw(r,e){const t=new Map;let s=e;return Re.fromTreatmentsMap(r.treatments).times.forEach((n,a)=>{s=se(s,new Y({minutes:n.breakMinutes})),t.set(a,{start:s,duration:new Y({minutes:n.workMinutes})}),s=se(s,new Y({minutes:n.workMinutes}))}),t}function Mw(r,e){const t=new Map,s=Re.fromTreatmentsMap(r.treatments);let i=new Date(e.getTime()-s.totalMinutes*6e4);return s.times.forEach((n,a)=>{i=new Date(i.getTime()+n.breakMinutes*6e4),t.set(a,{start:i,duration:new Y({minutes:n.workMinutes})}),i=new Date(i.getTime()+n.workMinutes*6e4)}),t}function Nw(r,e,t){let s=0,i=0;const n=Array.from(e.values());return r.forEach(a=>{const c=n[i].start,u=se(c,n[i].duration);for(a;a<t.length&&!(a+1>=t.length);a+=2){const l=mi(t[a],t[a+1],c,u);if(l==="STRIKE"){const h=Oi(u,t[a+1]);s=Math.max(s,h.inMinutes);break}if(l==="BEFORE")break}i+=1}),s}function Ow(r,e,t){let s=0;const i=Object.values(e);let n=i.length-1;return r.forEach(a=>{const c=i[n].start,u=new Date(c.getTime()+i[n].duration.minutes*6e4);for(a;a>=0&&!(a-1<0);a-=2){const l=mi(t[a-1],t[a],c,u);if(l==="STRIKE"){const h=u.getTime()-t[a-1].getTime();s=Math.max(s,h/6e4);break}if(l==="AFTER")break}n-=1}),s}function Dt(r,e){r.forEach((t,s)=>{t.start=se(t.start,new Y({minutes:e})),r.set(s,t)})}function Gb({worker:r,dateForCheck:e,treatment:t}){const s=[];if(Je(r.closeCalendarDate??new Date(0))===Je(e)||!r.openCalendar)return s;const i=r.multiEventsTimes.times[Je(e)]??{};return Object.entries(i).forEach(([n,a])=>{if(a.treatmentId===t.id&&a.index===0){const c=bt(n),u=new Date(e.getFullYear(),e.getMonth(),e.getDate(),c.getHours(),c.getMinutes());if(u<new Date)return;const l=a.maxParticipants??t.participants;s.push(new xs({isMulti:!0,showMultiWaitingList:a.showWaitingList,signedPaymentRequestId:a.paymentRequestId,displayDate:u,maxParticipants:l,isWaitingList:l<=a.currentParticipants,currentParticipants:a.currentParticipants,showParticipants:t.showParticipants}))}}),Object.entries(r.recurrence.recurrenceEvents).forEach(([n,a])=>{Object.entries(a).forEach(([c,u])=>{var d;if(!u.isMulti||u.recurrenceEvent===null||u.treatmentId!==t.id||!((d=u.recurrenceEvent)!=null&&d.isAccureInDate({date:e}))||u.eventIndex!==0)return;const l=bt(c),h=new Date(e.getFullYear(),e.getMonth(),e.getDate(),l.getHours(),l.getMinutes());s.push(new xs({displayDate:h,isMulti:!0,recurrenceTimeId:u.timeId??void 0,recurrenceFatherBookingId:u.recurrenceFatherBookingId,maxParticipants:t.participants,currentParticipants:u.currentParticipants,isWaitingList:t.participants<=u.currentParticipants,showParticipants:t.showParticipants,recurrenceMultiEvent:u.recurrenceEvent,fatherRecurrenceMultiEventDate:u.from}))})}),s.sort((n,a)=>n.displayDate.getTime()-a.displayDate.getTime()),s}function qb({worker:r,booking:e,isUpdate:t=!1,oldBooking:s,workerSheet:i=!1,reverse:n=!1,workerAction:a=!1,amoutLimit:c,recurrenceSkipDate:u}){const l=[];if(r===void 0||eh(r,e.bookingDate,a,i))return l;const h=Je(e.bookingDate),d=Ww(r.shiftsFor({day:e.bookingDate})),p=Lw({worker:r,bookingDate:h,isUpdate:t,workerAction:a,oldBooking:s,recurrenceSkipDate:u});p.sort(),d.sort();const m=Re.fromTreatmentsMap(e.treatments);if(console.log("work",d),console.log("forbbidenTimes",p),console.log("treatment",m),n)return Bw({worker:r,work:d,forbbidenTimes:p,bookingDate:h,treatment:m,booking:Xe.fromBooking(e),workerSheet:i,amoutLimit:c});const w=Array.from({length:m.times.size},()=>0);console.log("forbiddenTimesPointers",w);let y=Uw(new Date,!0);console.log("currentTime",y);let D=0;for(let g=0;g<d.length;g+=2){let x=d[g];const v=d[g+1];if(console.log("pointerWork",x),console.log("endWork",v),_w(x,h)){switch(mi(y,y,x,v)){case"BEFORE":K.debug("Alg duration status - BEFORE");continue;case"AFTER":K.debug("Alg duration status - AFTER");break;case"STRIKE":K.debug("Alg duration status - STRIKE");break}x=y}const I=Sw(e,x),T=Array.from(I.values()),b=T[T.length-1],A=T[0];for(console.log("valuesArr",T),console.log("valuesArr",T),console.log("lastTimeSegment",b),console.log("firstTimeSegment",A);se(b.start,b.duration)<=v;){if(D++,D>500){K.error("Infinity loop in times algorithm - stopping");break}const C=Nw(w,I,p),k=Fw(A.start,p,w,r),E=C===0;if(E){const _=A.start,S=new Date(e.bookingDate.getFullYear(),e.bookingDate.getMonth(),e.bookingDate.getDate(),_.getHours(),_.getMinutes());if(console.log("minutesToJump",C),console.log("jump",k),console.log("allowedTime",E),l.push(new xs({displayDate:S})),c!==void 0&&c>=l.length)return l;i?Dt(I,5):(console.log("BEFORE"),I.forEach((L,V)=>{console.log("Values for key",V),console.log(L.start),console.log(L.duration)}),Dt(I,k),console.log("AFTER"),I.forEach((L,V)=>{console.log("Values for key",V),console.log(L.start),console.log(L.duration)}))}else p.length-1<w[0]+1?i?Dt(I,5):Dt(I,k):Dt(I,C)}}return l}function eh(r,e,t,s){return r.closeScheduleOnHolidays&&Hw(r,e)?(K.debug("Holiday is a free day for this worker -> don't generate times"),!0):!t&&r.recurrence.vacationInDate(e)!=null?(K.debug("Vacation is a free day for this worker -> don't generate times"),!0):!s&&r.isClosingDate(e)?(K.debug("This day is closing by the worker"),!0):!1}function Bw({worker:r,work:e,forbbidenTimes:t,bookingDate:s,treatment:i,booking:n,workerSheet:a=!1,amoutLimit:c}){const u=[];if(eh(r,n.bookingDate,!1,a))return u;const l=Array.from({length:i.times.size},()=>t.length-1);let h=0;for(let d=e.length-1;d>=0;d-=2){const f=e[d],p=e[d-1],m=Mw(n,f),y=Array.from(m.values())[0];for(;y.start>=p;){if(h++,h>500){K.error("Infinity loop in times algorithm - stopping");break}if(Pw(y.start,s))break;const D=Ow(l,m,t),g=Rw(y.start,t,l,r);if(D===0){const v=y.start,I=new Date(n.bookingDate.getFullYear(),n.bookingDate.getMonth(),n.bookingDate.getDate(),v.getHours(),v.getMinutes());if(u.push(new xs({displayDate:I})),c!==void 0&&c>=u.length)return u;a?Dt(m,-5):Dt(m,-g)}else l[0]<0?a?Dt(m,-5):Dt(m,-g):Dt(m,-D)}}return u}function Fw(r,e,t,s){const i=s.windowSpaces===dr.custom?s.customWindowMinute:s.windowSpaces===dr.longestTreatment?s.longestBookingTime:s.shortBookingTime,n=new Date(r.getTime()+i*6e4);if(t.length<=0||t[0]+1>=e.length)return i;const a=e[t[0]],c=e[t[0]+1];return a.getTime()>r.getTime()&&a.getTime()<n.getTime()?c.getTime()-r.getTime():i}function Rw(r,e,t,s){const i=s.windowSpaces===dr.custom?s.customWindowMinute:s.windowSpaces===dr.longestTreatment?s.longestBookingTime:s.shortBookingTime,n=new Date(r.getTime()-i*6e4);if(t.length<=0||t[0]+1>=e.length)return i;const a=e[t[0]];return a.getTime()<r.getTime()&&a.getTime()>n.getTime()?r.getTime()-a.getTime():i}function Lw({worker:r,bookingDate:e,oldBooking:t,recurrenceSkipDate:s,isUpdate:i=!1,workerAction:n=!1}){const a=[],c=Ts(e);r.workerPublicData.bookingsTimes[e]&&Object.entries(r.workerPublicData.bookingsTimes[e]).forEach(([h,d])=>{const f=bt(h);a.push(f,se(f,new Y({minutes:d})))});const u=new Set;i&&t&&t.recurrenceEvent&&s&&t.bookingsEventsAsEvents.forEach((h,d)=>{const f=bt(d);u.add(new Date(s.getFullYear(),s.getMonth(),s.getDate(),f.getHours(),f.getMinutes()).toString())});let l=!1;if(Object.entries(r.recurrence.recurrenceEvents).forEach(([h,d])=>{Object.entries(d).forEach(([f,p])=>{if(!(!p.blockSchedule&&p.isBreak)&&!(p.isVacation&&n)&&!l){if(i&&t&&t.recurrenceEvent){const m=bt(f),w=se(c,new Y({hours:m.getHours(),minutes:m.getMinutes()}));if(u.has(w.toString()))return}if(p.recurrenceEvent&&p.recurrenceEvent.isAccureInDate({date:c})){const m=bt(f);p.isVacation&&(l=!0,a.length=0),a.push(m,se(m,new Y({minutes:p.durationMinutes})))}}})}),i&&t&&t.workerId===r.id&&!t.recurrenceEvent){const h=ze(t.bookingDate);if(c.getTime()/1e3-h.getTime()/1e3===0){let d=Ws(t.bookingDate);Re.fromTreatmentsMap(t.treatments).times.forEach((p,m)=>{d=se(d,new Y({minutes:p.breakMinutes}));const w=se(d,new Y({minutes:p.workMinutes}));a.splice(a.indexOf(d),2),a.splice(a.indexOf(w),2),d=w})}}return a}function Uw(r,e=!1){const t=r.getMinutes(),s=Math.floor(t/10),i=t%10,n=Math.ceil(i/5);return e?new Date(1970,0,1,r.getHours(),s*10+n*5):new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),s*10+n*5)}function or(r){return Ce(r,"HH:mm")}function Jb(r,e){return Ce(r,e,{})}function uo(r){return Ce(r,"dd")}function vr(r){return Ce(r,"MM-yyyy")}function Je(r){return Ce(r,"dd-MM-yyyy")}function bt(r){const e=F(r,"HH:mm").toDate();return e.setFullYear(1970),e.setMonth(0),e.setDate(1),e}function Ts(r){return F(r,"dd-MM-yyyy").toDate()}function th(r){return F(r,"MM-yyyy").toDate()}function Zb(r){return r.getHours()>=19&&r.getHours()<=23||r.getHours()>=0&&r.getHours()<=2?W("night"):r.getHours()>=3&&r.getHours()<=4?W("beforeMorning"):r.getHours()>=5&&r.getHours()<=11?W("morning"):W("noon")}function rh(r){return new Date(r.getFullYear(),r.getMonth(),1)}function ze(r){return new Date(r.getFullYear(),r.getMonth(),r.getDate())}function Ws(r){return new Date(1970,0,1,r.getHours(),r.getMinutes())}function J0(r,e){return new Date(r.getFullYear(),r.getMonth()+e,r.getDate(),r.getHours(),r.getMinutes())}function Ww(r){const e=[];for(let t=0;t<r.length;t++)e.push(bt(r[t]));return e}function Ir(r){const e=r.getDay(),t=r.getDate()-e+(e===0?-6:1);return new Date(r.setDate(t))}function Hw(r,e){let t=!1;return r.religions.forEach(s=>{var n,a;let i=Ce(e,"dd-MM-yyyy");switch(s){case Za.christian:i=i.substring(0,i.length-4)+"0000",t=(t||((n=qc[Za.christian])==null?void 0:n[i])!=null)??!1;break;default:t=(t||((a=qc[s])==null?void 0:a[i])!=null)??!1;break}}),t}function Yw(r){return Ao(Ce(r,"dd-MM-yyyy"),"dd-MM-yyyy",new Date)}function Z0(r,e){let t=r.getFullYear()-e.getFullYear(),s=r.getMonth()-e.getMonth();return s<0&&(t-=1,s+=12),Math.abs(t*12+s)}function Ba(r,e){return new Date(r.bookingDate.getTime()-e*6e4)}function Qb(r){var e=r.getDay(),t=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],s=t[e];return s}var lo={exports:{}},Q0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(Q0){var K0=new Uint8Array(16);lo.exports=function(){return Q0(K0),K0}}else{var X0=new Array(16);lo.exports=function(){for(var e=0,t;e<16;e++)e&3||(t=Math.random()*4294967296),X0[e]=t>>>((e&3)<<3)&255;return X0}}var sh=lo.exports,ih=[];for(var Pi=0;Pi<256;++Pi)ih[Pi]=(Pi+256).toString(16).substr(1);function Vw(r,e){var t=e||0,s=ih;return[s[r[t++]],s[r[t++]],s[r[t++]],s[r[t++]],"-",s[r[t++]],s[r[t++]],"-",s[r[t++]],s[r[t++]],"-",s[r[t++]],s[r[t++]],"-",s[r[t++]],s[r[t++]],s[r[t++]],s[r[t++]],s[r[t++]],s[r[t++]]].join("")}var nh=Vw,$w=sh,zw=nh,j0,Fa,Ra=0,La=0;function Gw(r,e,t){var s=e&&t||0,i=e||[];r=r||{};var n=r.node||j0,a=r.clockseq!==void 0?r.clockseq:Fa;if(n==null||a==null){var c=$w();n==null&&(n=j0=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),a==null&&(a=Fa=(c[6]<<8|c[7])&16383)}var u=r.msecs!==void 0?r.msecs:new Date().getTime(),l=r.nsecs!==void 0?r.nsecs:La+1,h=u-Ra+(l-La)/1e4;if(h<0&&r.clockseq===void 0&&(a=a+1&16383),(h<0||u>Ra)&&r.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ra=u,La=l,Fa=a,u+=122192928e5;var d=((u&268435455)*1e4+l)%4294967296;i[s++]=d>>>24&255,i[s++]=d>>>16&255,i[s++]=d>>>8&255,i[s++]=d&255;var f=u/4294967296*1e4&268435455;i[s++]=f>>>8&255,i[s++]=f&255,i[s++]=f>>>24&15|16,i[s++]=f>>>16&255,i[s++]=a>>>8|128,i[s++]=a&255;for(var p=0;p<6;++p)i[s+p]=n[p];return e||zw(i)}var qw=Gw,Jw=sh,Zw=nh;function Qw(r,e,t){var s=e&&t||0;typeof r=="string"&&(e=r==="binary"?new Array(16):null,r=null),r=r||{};var i=r.random||(r.rng||Jw)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e)for(var n=0;n<16;++n)e[s+n]=i[n];return e||Zw(i)}var Kw=Qw,Xw=qw,ah=Kw,sc=ah;sc.v1=Xw;sc.v4=ah;var jw=sc;const ev=ku(jw);class wi{constructor({businessId:e="",date:t,id:s="",workerId:i="",businessName:n="",shopIcon:a=new he}={}){o(this,"businessId","");o(this,"businessName","");o(this,"date");o(this,"id","");o(this,"workerId","");o(this,"shopIcon",new he);this.businessId=e,this.date=t||null,this.id=s,this.workerId=i,this.businessName=n,this.shopIcon=a}static fromJsonStr(e){const t=JSON.parse(e),s=t.date?new Date(t.date):null,i=t.shopIcon?he.fromJsonStr(t.shopIcon):new he,n=new wi({businessId:t.businessId,date:s,id:t.id,workerId:t.workerId,businessName:t.businessName});return n.shopIcon=i,n}toJsonStr(){var t;const e={businessId:this.businessId,date:(t=this.date)==null?void 0:t.toString(),id:this.id,workerId:this.workerId,businessName:this.businessName,shopIcon:this.shopIcon.toJsonStr()};return JSON.stringify(e)}toString(){return this.toJsonStr()}}class ic extends wi{constructor({businessId:t,date:s,id:i,workerId:n,businessName:a,totalMinutes:c,isRecurrence:u,shopIcon:l}){super({businessId:t,date:s,id:i,workerId:n,businessName:a,shopIcon:l});o(this,"isRecurrence",!1);o(this,"totalMinutes",0);this.totalMinutes=c,this.isRecurrence=u}static fromJsonStr(t){const s=JSON.parse(t),i=s.businessId||"",n=s.businessName||"",a=s.date?new Date(s.date):void 0,c=s.workerId||"",u=s.id||"",l=s.isRecurrence||!1,h=s.totalMinutes||0,d=s.shopIcon?he.fromJsonStr(s.shopIcon):void 0;return new ic({businessId:i,date:a,id:u,workerId:c,businessName:n,totalMinutes:h,isRecurrence:l,shopIcon:d})}toJsonStr(){var s,i;const t={};return t.businessId=this.businessId,t.isRecurrence=this.isRecurrence,t.totalMinutes=this.totalMinutes,t.date=((s=this.date)==null?void 0:s.toISOString())||null,t.businessName=this.businessName,t.id=this.id,t.workerId=this.workerId,t.shopIcon=((i=this.shopIcon)==null?void 0:i.toJsonStr())||null,JSON.stringify(t)}toString(){return this.toJsonStr()}}class nc{constructor({businessId:e,id:t,businessName:s,type:i,dateToNotify:n,isMulti:a,minutesToAdd:c,address:u,phoneToContact:l,shopIcon:h,fcms:d,totalEventMinutes:f=0,isRecurrence:p=!1}){o(this,"id","");o(this,"businessId","");o(this,"shopIcon",new he);o(this,"businessName","");o(this,"dateToNotify",new Date(0));o(this,"fcms",new Set);o(this,"minutesToAdd",0);o(this,"address","");o(this,"phoneToContact","");o(this,"isMulti",!1);o(this,"isRecurrence",!1);o(this,"totalEventMinutes",0);o(this,"type","");this.businessId=e,this.id=t,this.businessName=s,this.type=i,this.dateToNotify=n,this.isMulti=a,this.minutesToAdd=c,this.address=u,this.phoneToContact=l,this.shopIcon=h,this.fcms=d,this.totalEventMinutes=f,this.isRecurrence=p}isEqual(e){return e.businessId===this.businessId&&e.businessName===this.businessName&&JSON.stringify([...e.fcms])===JSON.stringify([...this.fcms])&&e.shopIcon.isEqual(this.shopIcon)&&e.totalEventMinutes===this.totalEventMinutes&&e.isMulti===this.isMulti&&e.minutesToAdd===this.minutesToAdd&&e.isRecurrence===this.isRecurrence&&e.type===this.type}static fromJson(e){const t=he.fromJson(e.SI),s=new Set(e.FS||[]),i=new Date(e.dateToNotify);return new nc({businessId:e.I,id:e.ID,businessName:e.B,type:e.T,dateToNotify:i,isMulti:e.IM,minutesToAdd:e.MTA,address:e.A,phoneToContact:e.P,shopIcon:t,fcms:s,totalEventMinutes:e.TEM,isRecurrence:e.IR})}get dbPath(){return`/${Kd}/${ef}/1/${this.dateToNotify.getFullYear()}/${this.dateToNotify.getMonth()}/${this.dateToNotify.getDay()}/${this.dateToNotify.getHours()}`}toJson(){const e={};return this.phoneToContact!==""&&(e.P=this.phoneToContact),this.address!==""&&(e.A=this.address),this.type!==""&&(e.T=this.type),this.businessName!==""&&(e.B=this.businessName),this.fcms.size>0&&(e.FS=Array.from(this.fcms)),this.businessId!==""&&(e.I=this.businessId),this.isMulti&&(e.IM=this.isMulti),this.minutesToAdd!==3&&(e.MTA=this.minutesToAdd),this.isRecurrence&&(e.IR=this.isRecurrence),this.totalEventMinutes>0&&(e.TEM=this.totalEventMinutes),e.SI=this.shopIcon.toJson(),e}toString(){return JSON.stringify(this.toJson(),null,2)}}class En{constructor({id:e,date:t,isMultiBooking:s,workerId:i,signNewMultiBookingUsers:n=!1}){o(this,"id","");o(this,"date",new Date(0));o(this,"isMultiBooking",!1);o(this,"workerId","");o(this,"signNewMultiBookingUsers",!1);this.id=e,this.date=t,this.isMultiBooking=s,this.workerId=i,this.signNewMultiBookingUsers=n}toJson(){const e={};return e.I=this.id,e.D=this.date.toISOString(),e.WI=this.workerId,this.isMultiBooking&&(e.IMB=this.isMultiBooking),this.signNewMultiBookingUsers&&(e.SNMBU=this.signNewMultiBookingUsers),e}static fromJson(e){const t=e.D?new Date(e.D):new Date(0),s=e.I||"",i=e.IMB||!1,n=e.WI||"",a=e.SNMBU||!1;return new En({id:s,date:t,isMultiBooking:i,workerId:n,signNewMultiBookingUsers:a})}toString(){return JSON.stringify(this,null,2)}}class tv{constructor({workerId:e="",workerName:t="",businessName:s="",buisnessId:i="",workerPhone:n=""}={}){o(this,"date",new Date(0));o(this,"workerId","");o(this,"workerName","");o(this,"workerPhone","");o(this,"buisnessId","");o(this,"businessName","");o(this,"recurrenceEvent");o(this,"recurrenceRef");o(this,"recurrenceFatherDate");o(this,"recurrenceEventRefInfo");o(this,"recurrenceNotificationsLastDate");o(this,"recurrenceChildDate");this.workerId=e,this.workerName=t,this.businessName=s,this.buisnessId=i,this.workerPhone=n}}const ac="simpletor.officialsimplecode.com",Kb="businesses?BusinessId=BUISNESS_ID",oc="?PaymentId=PAYMENT_ID";class Cn{constructor({id:e,workerId:t}){o(this,"id","");o(this,"workerId","");o(this,"createdAt",new Date(0));o(this,"signNewMultiBookingUsers",!0);this.id=e,this.workerId=t}get link(){return`https://${ac}/${oc}`.replace("PAYMENT_ID",this.id)}static fromJson(e){const t=new Cn({});return t.id=e.id??"",e.createdAt!=null&&(t.createdAt=new Date(e.createdAt)||new Date(0)),t.workerId=e.workerId??"",t.signNewMultiBookingUsers=e.signNewMultiBookingUsers??!0,t}toJson(){const e={};return this.createdAt.getTime()!==new Date(0).getTime()&&(e.createdAt=this.createdAt.toISOString()),this.signNewMultiBookingUsers||(e.signNewMultiBookingUsers=this.signNewMultiBookingUsers),e.id=this.id,e.workerId=this.workerId,e}toString(){return JSON.stringify(this.toJson(),null,2)}}const{v4:eu}=ev;class Xe extends tv{constructor({workerId:t,workerName:s,businessName:i,buisnessId:n,workerPhone:a}){super({workerId:t,workerName:s,businessName:i,buisnessId:n,workerPhone:a});o(this,"customerName","");o(this,"customerPhone","");o(this,"customerId","");o(this,"orderingOptions",st.app);o(this,"isVerifiedPhone",!1);o(this,"isUserExist",!0);o(this,"notificationType",z.none);o(this,"workerNotificationOption",me.PushOrSMS);o(this,"workerRemindersTypes",new Map);o(this,"workerDeleted",!1);o(this,"clientMail","");o(this,"showAdressAlert",!1);o(this,"showPhoneAlert",!1);o(this,"signOnDeviceCalendar",!1);o(this,"isMultiRef",!1);o(this,"cancelDate");o(this,"lastTimeNotifyOnDebt");o(this,"adress","");o(this,"wasWaiting",!1);o(this,"bookingDate",new Date(0));o(this,"note","");o(this,"needCancel",!1);o(this,"treatments",new Map);o(this,"userGender",te.anonymous);o(this,"workerGender",te.anonymous);o(this,"status",Be.approved);o(this,"confirmedArrival",!1);o(this,"bookingId","");o(this,"userFcms",new Set);o(this,"clientNote","");o(this,"shopIcon",new he);o(this,"remindersTypes",new Map);o(this,"createdAt",new Date);o(this,"finishInvoices",!1);o(this,"invoices",new Map);o(this,"transactions",new Map);o(this,"recurrenceTimeId");o(this,"recurreneFatherDate");o(this,"debts",new Map);o(this,"addToClientAt",!1);o(this,"paymentRequest");o(this,"userDeleted",!1);o(this,"fatherMultiBooking");o(this,"fatherRecurrenceBooking")}static empty(){return new Xe({})}static fromBooking(t){const s=new Xe({});return s.customerName=t.customerName,s.customerPhone=t.customerPhone,s.customerId=t.customerId,s.workerPhone=t.workerPhone,s.workerGender=t.workerGender,s.userGender=t.userGender,s.businessName=t.businessName,s.buisnessId=t.buisnessId,s.bookingId=t.bookingId,s.workerGender=t.workerGender,s.shopIcon=t.shopIcon,s.recurrenceTimeId=t.recurrenceTimeId,s.note=t.note,s.workerRemindersTypes={...t.workerRemindersTypes},s.signOnDeviceCalendar=t.signOnDeviceCalendar,s.userDeleted=t.userDeleted,s.workerNotificationOption=t.workerNotificationOption,s.paymentRequest=t.paymentRequest,s.remindersTypes={...t.remindersTypes},s.isVerifiedPhone=t.isVerifiedPhone,s.workerDeleted=t.workerDeleted,s.finishInvoices=t.finishInvoices,s.adress=t.adress,s.addToClientAt=t.addToClientAt,s.showAdressAlert=t.showAdressAlert,s.showPhoneAlert=t.showPhoneAlert,s.orderingOptions=t.orderingOptions,s.isUserExist=t.isUserExist,s.isMultiRef=t.isMultiRef,s.needCancel=t.needCancel,s.userGender=t.userGender,s.bookingDate=t.bookingDate,s.recurrenceNotificationsLastDate=t.recurrenceNotificationsLastDate,s.cancelDate=t.cancelDate,s.customerId=t.customerId,s.workerPhone=t.workerPhone,s.lastTimeNotifyOnDebt=t.lastTimeNotifyOnDebt,t.debts.forEach((i,n)=>{s.debts.set(n,gs.fromDebt(i))}),s.treatments=new Map,t.treatments.forEach((i,n)=>{const a=Re.fromTreatment(i);a.index=n,s.treatments.set(n,i)}),s.invoices=new Map,t.invoices.forEach((i,n)=>{s.invoices.set(n,wr.fromBookingInvoiceData(i))}),s.clientNote=t.clientNote,s.status=t.status,s.confirmedArrival=t.confirmedArrival,s.createdAt=t.createdAt,s.clientMail=t.clientMail,s.workerName=t.workerName,s.buisnessId=t.buisnessId,s.notificationType=t.notificationType,s.userFcms=new Set(t.userFcms),s.recurreneFatherDate=t.recurreneFatherDate,s.recurrenceRef=t.recurrenceRef,s.transactions=new Map,t.transactions.forEach((i,n)=>{s.transactions.set(n,Or.fromTransaction(i))}),s}static fromJson(t,s){try{const i=new Xe({});if(i.workerGender=Jt[t.workerGender]||te.anonymous,i.customerName=t.customerName||"",i.note=t.note||"",i.bookingId=s,i.signOnDeviceCalendar=t.signOnDeviceCalendar||!1,i.userDeleted=t.userDeleted||!1,i.workerDeleted=t.workerDeleted||!1,i.customerId=t.customerId||t.customerPhone||"",i.workerPhone=t.workerPhone||"",i.customerPhone=t.customerPhone||"",i.recurrenceTimeId=t.recurrenceTimeId,i.workerId=t.workerId||t.workerPhone||"",i.adress=t.adress||"",t.shopIcon!=null&&(i.shopIcon=he.fromJson(t.shopIcon)),i.isVerifiedPhone=t.isVerifiedPhone||!1,i.customerId==i.customerPhone&&i.customerId.length==14&&(i.isVerifiedPhone=!0),i.isMultiRef=t.isMultiRef||!1,i.needCancel=t.needCancel||!1,t.lastTimeNotifyOnDebt!=null&&(i.lastTimeNotifyOnDebt=new Date(t.lastTimeNotifyOnDebt)),i.finishInvoices=t.finishInvoices||!1,t.remindersTypes!=null?Object.entries(t.remindersTypes).forEach(([n,a])=>{Pr[n]!=null&&i.remindersTypes.set(Pr[n],a)}):i.remindersTypes=new Map([Ue.regular,t.minutesBeforeNotify||60]),t.workerRemindersTypes!=null&&Object.entries(t.workerRemindersTypes).forEach(([n,a])=>{Pr[n]!=null&&i.workerRemindersTypes.set(Pr[n],a)}),i.clientMail=t.clientMail||"",t.recurrenceNotificationsLastDate!=null&&(i.recurrenceNotificationsLastDate=new Date(t.recurrenceNotificationsLastDate)),i.clientNote=t.clientNote||"",i.recurreneFatherDate=t.recurreneFatherDate,i.recurrenceRef=t.recurrenceRef,t.orderingOptions!=null&&(i.orderingOptions=Uu[t.orderingOptions]||st.app),t.debts!=null&&Object.entries(t.debts).forEach(([n,a])=>{i.debts.set(n,gs.fromJson(a,n))}),t.cancelDate!=null&&(i.cancelDate=new Date(t.cancelDate)),i.wasWaiting=t.wasWaiting||!1,i.isUserExist=t.isUserExist||!0,t.invoices!=null&&Object.entries(t.invoices).forEach(([n,a])=>{i.invoices.set(n,wr.fromJson(a,n,i.workerId))}),t.userGender!=null&&(i.userGender=Jt[t.userGender]||te.anonymous),i.status=Ru[t.status.toString()]||Be.approved,i.confirmedArrival=t.confirmedArrival||!1,t.bookingDate!=null&&(i.bookingDate=new Date(t.bookingDate)||new Date(0)),t.treatments!=null){i.treatments=new Map;let n=0;Object.entries(t.treatments).forEach(([a,c])=>{const u=t.treatments[n.toString()];i.treatments.set(n.toString(),Re.fromJson(u,n.toString())),n+=1})}else if(t.treatment!=null){const n=Re.fromJson(t.treatment,"0");i.treatments.set("0",n)}return i.showAdressAlert=t.showAdressAlert||!1,i.showPhoneAlert=t.showPhoneAlert||!1,i.workerName=t.workerName||"",i.businessName=t.businessName||"",i.buisnessId=t.buisnessId||"",t.notificationType!=null?i.notificationType=Wu[t.notificationType]||z.push:t.withMessage?i.notificationType=z.message:i.notificationType=z.push,t.workerNotificationOption!=null&&(i.workerNotificationOption=fn[t.workerNotificationOption]||me.PushOrSMS),t.userFcms!=null?t.userFcms.forEach(n=>{i.userFcms.add(n)}):t.deviceFCM!=null&&t.deviceFCM!=""&&(i.userFcms=new Set([t.deviceFCM])),t.createdAt!=null&&(i.createdAt=new Date(t.createdAt)||new Date(0)),t.RE!=null&&(i.recurrenceEvent=yr.fromJson(t.RE,i.bookingDate)),t.RERI!=null&&(i.recurrenceEventRefInfo=yr.fromJson(t.RERI)),i.transactions=new Map,t.transactions!=null&&Object.entries(t.transactions).forEach(([n,a])=>{i.transactions.set(n,Or.fromJson(a,n))}),t.paymentRequest!=null&&(i.paymentRequest=Cn.fromJson(t.paymentRequest)),i}catch(i){return K.error(`Error loading booking doc ${s}: ${i}`),new Xe({})}}get treatmentLength(){return Array.from(this.treatments.values()).reduce((t,s)=>s.count+t,0)}get canSendMessage(){return this.isVerifiedPhone||this.orderingOptions===st.byWorker}get treatmentsToStringNotDetailed(){return this.treatmentLength===1?this.treatments.values().next().value.name:this.treatments.size===1?`${this.treatments.values().next().value.name}x${this.treatmentLength}`:`${this.treatments.values().next().value.name}+${this.treatmentLength-1}`}get isPassed(){if(this.recurrenceEvent!=null){if(this.recurrenceChildDate!=null)return se(this.recurrenceChildDate,new Y({minutes:this.totalMinutes+2}))<new Date;const t=this.recurrenceEvent.endOfTheEvent;return t!==null&&t<Yw(new Date)}else return se(this.bookingDate,new Y({minutes:this.totalMinutes+2}))<new Date}get currentDisplayDate(){return this.recurrenceChildDate??this.bookingDate}get totalMinutes(){let t=0;return this.treatments.forEach((s,i)=>{t+=s.totalMinutesForBooking}),t}get customerHashPhone(){return Lr(this.customerPhone)}get bookingWorkTimes(){const t=new Map;let s=this.bookingDate;return Object.values(this.treatments).forEach(i=>{Array.from({length:i.count}).forEach(()=>{Object.values(i.times).forEach(n=>{s=se(s,new Y({minutes:n.breakMinutes})),t.set(or(s),n.workMinutes),s=se(s,new Y({minutes:n.workMinutes}))})})}),t}get totalEventsCount(){let t=0;return Object.values(this.treatments).forEach(s=>{t+=s.times.length*s.count}),t}get invoicesCoverPrice(){const t=Object.values(this.invoices).reduce((s,i)=>s+i.amount,0);return this.finishInvoices||this.invoices.size>0&&t>=this.totalPrice.amount}get totalPrice(){let t=new Fe({amount:"0",currency:gr});return Object.values(this.treatments).forEach(s=>{t.amount+=s.totalPriceForBooking,t.currency=s.price.currency}),t}get typesOfEvents(){const t=new Map;return this.recurrenceEvent!==null?new Map:(this.needCancel&&t.set(Nr.needCancel,1),this.debts.size>0&&t.set(Nr.withDebts,1),this.status===Be.waiting&&t.set(Nr.onHold,1),t)}get remindersToFutureNotifications(){const t=[];for(const[s,i]of this.remindersTypes){const n=this.reminder(s);n!==null&&t.push(n)}return t}reminder(t){if(this.notificationType!==z.push)return null;const s=this.remindersTypes.get(t);if(s===void 0||s===0)return null;const i=Ba(this,s);return i<new Date||this.userFcms.size===0?null:new nc({businessName:this.businessName,shopIcon:this.shopIcon,address:this.showAdressAlert?this.adress:"",isMulti:this.isMultiRef,isRecurrence:this.recurrenceEvent!==null||this.recurrenceRef!==null,id:this.reminderId(t),dateToNotify:i,phoneToContact:this.showPhoneAlert?Cg(this.workerPhone):"",businessId:this.buisnessId,type:this.treatmentsToStringNotDetailed,minutesToAdd:this.utcDeltaMinutes()+s,totalEventMinutes:this.totalMinutes,fcms:{...this.userFcms}})}utcDeltaMinutes(){const t=new Date,s=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes());return Math.floor((Date.now()-s.getTime())/(60*1e3))}get remindersOnBooking(){const t={};return this.cancelDate!==null?{}:this.userFcms.size===0?{}:this.notificationType===z.message?{}:(this.remindersTypes.forEach((s,i)=>{var a;if(s<=0)return;const n=Ba(this,s);n>=new Date&&(t[a=n.toISOString()]??(t[a]={}),t[n.toISOString()]={[this.reminderId(i)]:null})}),t)}get bookingsEventsAsJson(){const t=new Map;let s=this.bookingDate,i=this.totalEventsCount,n=0;return this.invoicesCoverPrice,this.treatments.forEach((a,c)=>{Array.from({length:a.count}).forEach(()=>{a.times.forEach((u,l)=>{s=se(s,new Y({minutes:u.breakMinutes}));const h=this.recurrenceTimeId!=null&&this.recurrenceEvent!=null?`${or(s)}_${this.recurrenceTimeId}`:or(s),d=new ti;d.eventIndex=n,d.treatmentId=a.id,d.subTreatmentName=u.title,d.totalBookingMinutes=this.totalMinutes,d.belongTreatments=this.treatmentLength,d.onHold=this.status==="waiting",d.wantDelete=this.needCancel,d.ids=[this.workerId],d.confirmArrival=this.confirmedArrival,d.hasDebt=this.debts.size>0,d.timeId=this.recurrenceEvent!=null?this.recurrenceTimeId:void 0,d.treatmentName=a.name,d.transactionCounter=this.transactions.size,d.eventsBelong=i,d.isBreak=!1,d.partOfRecurrence=this.recurrenceRef!=null,d.hasInvoice,d.recurrenceEvent=this.recurrenceEvent,d.eventName=this.customerId,d.from=s,d.durationMinutes=u.workMinutes,d.colorIndex=a.colorIndex,t.set(h,d.toJson()),s=se(s,new Y({minutes:u.workMinutes})),n+=1})})}),t}get monthStr(){return vr(this.bookingDate)}get toBookingReferencePaymentObj(){return new En({id:this.bookingId,isMultiBooking:!1,date:this.bookingDate,workerId:this.workerId})}async copyDataToOrder({user:t,worker:s,needToHoldOn:i,business:n,noteText:a="",clientNoteText:c=""}){var l;this.customerName=t.name,this.customerId=t.id,this.customerPhone=t.phoneNumber,this.userGender=t.gender,this.isVerifiedPhone=t.isVerifiedPhone,this.clientMail=t.userPublicData.email;const u=t.userPublicData.clientAt;this.addToClientAt=!u.hasOwnProperty(n.businessId)||!((l=u.get(n.businessId))!=null&&l.has(s.id)),this.userFcms=t.fcmsTokens,this.isVerifiedPhone=t.isVerifiedPhone,this.orderingOptions=st.web,this.adress=n.adress,this.clientNote=c,this.wasWaiting=!1,this.note=a,this.shopIcon=n.design.shopIconData,Oi(this.bookingDate,new Date).inMinutes<60&&!i&&(this.confirmedArrival=!0),this.workerNotificationOption=s.notifications.notificationOption,this.workerRemindersTypes={...s.notifications.remindersTypes};for(const[h,d]of s.notifications.remindersTypes)this.isPassed||h===Ue.confirmArrival&&this.confirmedArrival||(Sr(this.bookingDate,new Y({minutes:d}))<se(new Date,new Y({seconds:1}))&&this.recurrenceEvent===void 0?(this.remindersTypes.set(h,this.remindersTypes.get(h)-this.remindersTypes.get(h)%5),this.remindersTypes.get(h)<10&&this.remindersTypes.delete(h)):this.remindersTypes.set(h,d));this.workerId=s.id,this.workerPhone=s.phone,this.workerName=s.name,this.workerGender=s.gender,this.showPhoneAlert=s.notifications.showPhoneAlert,this.showAdressAlert=s.notifications.showAdressAlert,this.businessName=n.shopName,this.bookingId=this.bookingId===""?eu():this.bookingId,this.buisnessId=n.businessId,i?this.status=Be.waiting:this.status=Be.approved,this.notificationType=cl({booking:this,worker:s})}updateBookingByBooking({oldBooking:t,worker:s,needToHoldOn:i,business:n,newClientNote:a,keepRecurrence:c=!1}){if(this.customerName=t.customerName,this.customerPhone=t.customerPhone,this.userGender=t.userGender,this.clientMail=t.clientMail,this.customerId=t.customerId,this.note=t.note,t.treatments.size>this.treatments.size){const l=new Map;let h=0;for(const[d,f]of Object.entries(this.treatments))l.set(h.toString(),f),h+=1;this.treatments=l}const u=new Map([...t.treatments.entries()].sort((l,h)=>l[0].localeCompare(h[0])));t.treatments=u,t.customerPhone!=this.customerPhone?this.orderingOptions=st.byWorker:this.orderingOptions=t.orderingOptions,a!=null?this.clientNote=a:this.clientNote=t.clientNote,this.workerNotificationOption=s.notifications.notificationOption,this.workerRemindersTypes={...s.notifications.remindersTypes},s.notifications.remindersTypes.forEach((l,h)=>{Sr(this.bookingDate,new Y({minutes:l}))<se(new Date,new Y({minutes:1}))&&(this.remindersTypes.set(h,Math.abs(Math.floor(Oi(new Date,this.bookingDate).inMinutes/2))),this.remindersTypes.set(h,this.remindersTypes.get(h)-this.remindersTypes.get(h)%5),this.remindersTypes.get(h)<10&&this.remindersTypes.delete(h))}),this.debts={...t.debts},this.isUserExist=t.isUserExist,this.createdAt=t.createdAt,this.lastTimeNotifyOnDebt=t.lastTimeNotifyOnDebt,this.cancelDate=t.cancelDate,this.wasWaiting=t.wasWaiting,this.signOnDeviceCalendar=t.signOnDeviceCalendar,this.recurrenceEvent=void 0,this.recurrenceNotificationsLastDate=void 0,this.recurrenceTimeId=void 0,c||(this.recurrenceRef=void 0,this.recurreneFatherDate=void 0,this.recurrenceEventRefInfo=void 0),this.userDeleted=t.userDeleted,this.paymentRequest=t.paymentRequest,this.shopIcon=n.design.shopIconData,this.workerName=s.name,this.workerGender=s.gender,this.workerId=s.id,this.workerPhone=s.phone,this.showPhoneAlert=s.notifications.showPhoneAlert,this.showAdressAlert=s.notifications.showAdressAlert,this.adress=n.adress,this.invoices={...t.invoices},this.businessName=n.shopName,this.bookingId=t.bookingId===""||t.recurrenceEvent!=null?eu():t.bookingId,this.buisnessId=t.buisnessId,this.notificationType=t.notificationType,this.bookingDate===t.bookingDate?this.status=t.status:this.status=i?Be.waiting:Be.approved,this.confirmedArrival=!1,i||Oi(this.bookingDate,new Date).inMinutes<60&&(this.confirmedArrival=!0),this.needCancel=t.needCancel,this.finishInvoices=t.finishInvoices,this.transactions=new Map;for(const[l,h]of Object.entries(t.transactions))this.transactions.set(l,Or.fromTransaction(h))}sameTreatments(t){let s=!0;return this.treatmentLength!==t.treatmentLength?!1:(Object.entries(this.treatments).forEach(([i,n])=>{let a=!1;Object.entries(t.treatments).forEach(([c,u])=>{n.id===u.id&&n.count===u.count&&(a=!0)}),s=s&&a}),s)}get businessPayloadData(){return new ms({businessName:this.businessName,businessId:this.buisnessId,shopIcon:this.shopIcon})}get notificationTopic(){return new si({date:Je(this.bookingDate),businessId:this.buisnessId,workerId:this.workerId,workerName:this.workerName})}get remindersToScheduleMessages(){const t=[];return this.remindersTypes.forEach((s,i)=>{const n=this.reminderMessage(i);n!=null&&t.push(n)}),t}reminderMessage(t){const s=this.remindersTypes.get(t);s==null||s===0||Sr(this.bookingDate,new Y({minutes:s}))<new Date}get toBookingNotificationPayload(){return new ic({businessId:this.buisnessId,id:this.bookingId,businessName:this.businessName,totalMinutes:this.totalMinutes,isRecurrence:this.recurrenceEvent!=null,date:this.bookingDate,workerId:this.workerId,shopIcon:this.shopIcon})}get transactionsTotalPaymentPrice(){let t=new Fe({amount:"0",currency:this.totalPrice.currency});for(const s of Object.values(this.transactions))s.type===Ot.payment&&(t.amount+=s.amount);return t}get isDepositTransaction(){return Object.keys(this.transactions).length===1?Object.values(this.transactions)[0].type===Ot.deposit:!1}get totalDebtAmount(){let t=0;for(const s of Object.values(this.debts))t+=s.amount;return t}get treatmentsToStringDetailed(){let t="";for(const s of Object.values(this.treatments))t+=s.nameForBooking+" + ";return t.length>0?t.substring(0,t.length-3):""}get priceInAdvance(){const t=new Fe({amount:"0",currency:gr});for(const s of Object.values(this.treatments))t.amount+=s.amountInAdvanceForBooking,t.currency=s.price.currency;return t}get messageRemindersOnBooking(){const t=[];if(this.cancelDate!==null||this.userFcms.size===0||this.notificationType===z.push)return t;for(const[s,i]of this.remindersTypes){if(i<=0)continue;Ba(this,i).toUTCString()>=new Date().toUTCString()&&t.push(this.reminderId(s))}return t}get invoiceItem(){return new InvoiceItem({code:0,information:this.treatmentsToStringDetailed,amountPerItem:this.totalPrice.amount,quantity:1})}get toPaymentRequestUser(){return new Hr({name:this.customerName,userId:this.customerId,gender:this.userGender,isVerifiedPhone:this.isVerifiedPhone,isExist:this.isUserExist,phone:this.customerPhone})}get invoiceItems(){const t=new Map;let s=0;for(const i of Object.values(this.treatments)){let n=i.name;i.priceChangingNote!==null&&i.priceChangingNote!==""&&(n+=`: ${i.priceChangingNote}.`),Array.from({length:i.count},a=>{t.set(s,new InvoiceItem({code:s,information:n,amountPerItem:i.price.amount,quantity:1})),s++})}return t}get transactionsTotalDepositPrice(){let t=new Fe({amount:"0",currency:this.totalPrice.currency});for(const s of Object.values(this.transactions))s.type===Ot.deposit&&(t.amount+=s.amount);return t}get transactionDepositLength(){let t=0;for(const s of Object.values(this.transactions))s.type===Ot.deposit&&(t+=1);return t}get transactionPaymentLength(){let t=0;for(const s of Object.values(this.transactions))s.type===Ot.payment&&(t+=1);return t}reminderId(t){return this.createdAt<Jd?this.bookingId:`${this.bookingId}__${Mi[t]}`}get bookingsEventsAsEvents(){const t=new Map;let s=this.bookingDate,i=this.totalEventsCount,n=0;return this.invoicesCoverPrice,this.treatments.forEach((a,c)=>{Array.from({length:a.count}).forEach(()=>{a.times.forEach((u,l)=>{s=se(s,new Y({minutes:u.breakMinutes}));const h=this.recurrenceTimeId!=null&&this.recurrenceEvent!=null?`${or(s)}_${this.recurrenceTimeId}`:or(s),d=new ti;d.eventIndex=n,d.treatmentId=a.id,d.subTreatmentName=u.title,d.totalBookingMinutes=this.totalMinutes,d.belongTreatments=this.treatmentLength,d.onHold=this.status==="waiting",d.wantDelete=this.needCancel,d.ids=[this.workerId],d.confirmArrival=this.confirmedArrival,d.hasDebt=this.debts.size>0,d.timeId=this.recurrenceEvent!=null?this.recurrenceTimeId:void 0,d.treatmentName=a.name,d.transactionCounter=this.transactions.size,d.eventsBelong=i,d.isBreak=!1,d.partOfRecurrence=this.recurrenceRef!=null,d.hasInvoice,d.recurrenceEvent=this.recurrenceEvent,d.eventName=this.customerId,d.from=s,d.durationMinutes=u.workMinutes,d.colorIndex=a.colorIndex,t.set(h,d),s=se(s,new Y({minutes:u.workMinutes})),n+=1})})}),t}isTheSameAs({booking:t,customerId:s,note:i}){var a,c;let n=!0;if(this.treatments.size!==t.treatments.size)return!1;for(const[u,l]of this.treatments)if(((a=t.treatments.get(u))==null?void 0:a.id)!=l.id||((c=t.treatments.get(u))==null?void 0:c.count)!=l.count){n=!1;break}return n&&t.customerId===s&&t.clientNote===this.clientNote&&t.note===i&&this.bookingDate.getTime()===t.bookingDate.getTime()&&this.workerId===t.workerId}toJson(){const t={};return t.workerGender=hs[this.workerGender],t.customerName=this.customerName,t.note=this.note,t.customerId=this.customerId,this.wasWaiting&&(t.wasWaiting=this.wasWaiting),this.workerDeleted&&(t.workerDeleted=this.workerDeleted),this.cancelDate!=null&&(t.cancelDate=this.cancelDate.toString()),t.remindersTypes={},this.clientNote!=""&&(t.clientNote=this.clientNote),this.finishInvoices&&(t.finishInvoices=this.finishInvoices),this.debts.size>0&&(t.debts={},this.debts.forEach((s,i)=>{t.debts[i]=s.toJson()})),this.lastTimeNotifyOnDebt!=null&&(t.lastTimeNotifyOnDebt=this.lastTimeNotifyOnDebt.toString()),this.isVerifiedPhone&&(t.isVerifiedPhone=this.isVerifiedPhone),this.userDeleted&&(t.userDeleted=this.userDeleted),t.bookingId=this.bookingId,t.needCancel=this.needCancel,t.userGender=hs[this.userGender],t.businessName=this.businessName,this.signOnDeviceCalendar&&(t.signOnDeviceCalendar=this.signOnDeviceCalendar),this.recurrenceTimeId!=null&&(t.recurrenceTimeId=this.recurrenceTimeId),t.treatments={},this.recurrenceRef!=null&&(t.recurrenceRef=this.recurrenceRef),this.recurreneFatherDate!=null&&(t.recurreneFatherDate=this.recurreneFatherDate),this.treatments.forEach((s,i)=>{t.treatments[i.toString()]=s.toJson()}),t.invoices={},this.invoices.forEach((s,i)=>{t.invoices[i]=s.toJson()}),this.isMultiRef&&(t.isMultiRef=this.isMultiRef),this.isUserExist||(t.isUserExist=this.isUserExist),this.orderingOptions!=st.app&&(t.orderingOptions=Lu[this.orderingOptions]),this.showAdressAlert&&(t.showAdressAlert=this.showAdressAlert),this.showPhoneAlert&&(t.showPhoneAlert=this.showPhoneAlert),this.adress!=""&&(t.adress=this.adress),this.clientMail!=""&&(t.clientMail=this.clientMail),t.customerPhone=this.customerPhone,t.status=Fu[this.status],t.confirmedArrival=this.confirmedArrival,t.bookingDate=this.bookingDate.toISOString(),t.workerId=this.workerId.toString(),t.workerName=this.workerName,t.buisnessId=this.buisnessId,t.shopIcon=this.shopIcon.toJson(),this.recurrenceNotificationsLastDate!=null&&(t.recurrenceNotificationsLastDate=this.recurrenceNotificationsLastDate.toString()),t.notificationType=of[this.notificationType],t.workerNotificationOption=lf[this.workerNotificationOption],t.userFcms=Array.from(this.userFcms),t.createdAt=this.createdAt.toISOString(),t.transactions={},this.transactions.forEach((s,i)=>{t.transactions[i]=s.toJson()}),this.paymentRequest!=null&&(t.paymentRequest=this.paymentRequest.toJson()),t}}class cc extends wi{constructor({businessId:e="",date:t,id:s="",workerId:i="",businessName:n="",shopIcon:a}={}){super({businessId:e,date:t,id:s,workerId:i,businessName:n,shopIcon:a})}static fromJsonStr(e){const t=JSON.parse(e),s=t.date?new Date(t.date):null,i=t.shopIcon?he.fromJsonStr(t.shopIcon):new he,n=new cc({businessId:t.businessId,date:s,id:t.id,workerId:t.workerId,businessName:t.businessName});return n.shopIcon=i,n}toJsonStr(){var t;const e={businessId:this.businessId,date:(t=this.date)==null?void 0:t.toString(),businessName:this.businessName,id:this.id,workerId:this.workerId,shopIcon:this.shopIcon.toJsonStr()};return JSON.stringify(e)}toString(){return this.toJsonStr()}}class uc{constructor(){o(this,"price",new Fe({amount:"0",currency:gr}));o(this,"id","");o(this,"createdAt",new Date(0))}}class ys{constructor({masofNumber:e="",businessName:t="",adress:s="",businessId:i="",shopIcon:n,businessNumber:a=""}={}){o(this,"masofNumber","");o(this,"businessName","");o(this,"adress","");o(this,"businessNumber","");o(this,"businessId","");o(this,"shopIcon");this.masofNumber=e||"",this.businessName=t||"",this.adress=s||"",this.businessNumber=a||"",this.businessId=i||"",this.shopIcon=n}toJson(){const e={};return e.MN=this.masofNumber,this.shopIcon!==void 0&&(e.SI=this.shopIcon.toJson()),e.BNA=this.businessName,e.BID=this.businessId,e.A=this.adress,e.BNU=this.businessNumber,e}static fromJson(e){const t=e.SI!==void 0?he.fromJson(e.SI):void 0;return new ys({masofNumber:e.MN||"",businessName:e.BNA||"",businessId:e.BID||"",shopIcon:t,adress:e.A||"",businessNumber:e.BNU||""})}}class tu{constructor(e=0){o(this,"amount");this.amount=e}addAmount(e){this.amount+=e}removeAmount(e){this.amount-=e}}class sn{constructor(e,t,s,i,n,a){o(this,"accountNumber","");o(this,"bankBranch","");o(this,"bankNumber","");o(this,"checkNumber","");o(this,"amount",0);o(this,"repaymentDate",new Date(0));this.accountNumber=e,this.bankBranch=t,this.bankNumber=s,this.checkNumber=i,this.amount=n,this.repaymentDate=a}toJson(){const e={};return e.AN=this.accountNumber,e.BB=this.bankBranch,e.BN=this.bankNumber,e.CN=this.checkNumber,e.A=this.amount,e.RD=this.repaymentDate.toISOString(),e}static fromJson(e){return new sn(e.AN||"",e.BB||"",e.BN||"",e.CN||"",e.A||0,new Date(e.RD||"1970-01-01T00:00:00.000Z"))}toString(){return JSON.stringify(this,null,2)}}class nn{constructor({amount:e=0,currency:t,onlinePayment:s,cash:i}={}){o(this,"checks",[]);o(this,"onlinePayment");o(this,"cash");o(this,"applicationPayments",[]);o(this,"amount",0);o(this,"currency");this.amount=e,this.currency=t,this.onlinePayment=s,this.cash=i}addCheck(e){this.checks.push(e),this.amount+=e.amount}removeCheck(e){const t=this.checks.indexOf(e);t!==-1&&(this.checks.splice(t,1),this.amount-=e.amount)}addCashAmount(e){this.cash||(this.cash=new tu),this.cash.addAmount(e),this.amount+=e}removeCashAmount(e){this.cash&&(this.cash.removeAmount(e),this.amount-=e)}get cashAmount(){return this.cash?this.cash.amount:0}get allChecks(){return new MultipleChecks({checks:this.checks})}get allPaymentsAsChecks(){const e=new MultipleChecks({checks:this.checks});if(this.cash||this.applicationPayments.length>0){let t=0;this.cash&&(t+=this.cash.amount),this.applicationPayments.length>0&&this.applicationPayments.forEach(s=>{t+=s.amount}),e.addCheck(new sn({accountNumber:"",bankBranch:"",bankNumber:"",checkNumber:"",amount:t,repaymentDate:new Date(0)}))}return e}toJson(){const e={};return this.checks.length>0&&(e.Ch=this.checks.map(t=>t.toJson())),this.applicationPayments.length>0&&(e.AP=this.applicationPayments.map(t=>t.toJson())),this.cash&&this.cash.amount>0&&(e.CA=this.cash.amount),this.onlinePayment&&(e.OP=this.onlinePayment.amount),e.A=this.amount,e.C=this.currency,e}static fromJson(e){const t=new nn;if(t.checks=[],e.Ch&&e.Ch.forEach(s=>{t.checks.push(sn.fromJson(s))}),e.AP&&e.AP.forEach(s=>{t.applicationPayments.push(ApplicationPayment.fromJson(s))}),e.CA){const s=typeof e.CA=="number"?e.CA:parseFloat(e.CA);t.cash=new tu({amount:s})}return e.OP&&(t.onlinePayment=new OnlinePayment({amount:e.OP})),e.A&&(t.amount=typeof e.A=="number"?e.A:parseFloat(e.A)),t.currency=e.C||"",t}}class lc extends uc{constructor({customerData:t,createdAt:s,paymentsMethods:i,items:n,businessInfo:a,workerInfo:c,invoiceNumber:u,invoiceId:l=""}){super();o(this,"customerData",new fr({}));o(this,"invoiceNumber");o(this,"workerInfo",new InvoiceWorkerInfo);o(this,"businessInfo",new ys);o(this,"invoiceId","");o(this,"signature");o(this,"items",{});o(this,"paymentsMethods",new nn);this.customerData=t,this.createdAt=s,this.paymentsMethods=i,this.items=n,this.businessInfo=a,this.workerInfo=c,this.invoiceNumber=u,this.invoiceId=l||"",this.price=new Fe({amount:this.paymentsMethods.amount.toString(),currency:$c[this.paymentsMethods.currency??""]||gr})}get itemsAsString(){let t="";for(const s in this.items)t+=this.items[s].toItemFormat();return t}get itemsTotalAmount(){let t=0;for(const s in this.items)t+=this.items[s].totalAmount;return t}get toBookingInvoiceData(){return new wr({issuedBy:this.workerInfo.workerId,docId:this.getInvoiceDocIndexByDate(this.createdAt).toString(),monthStr:vr(this.createdAt),invoiceId:this.invoiceId,amount:this.paymentsMethods.amount})}getInvoiceDocIndexByDate(t){return(parseInt(uo(t),10)||0)>16?2:1}static fromJson(t,s){const i=new lc({});return i.invoiceId=s,t.CD!==void 0&&(i.customerData=fr.fromMinimalJson(t.CD)),t.RD!==void 0&&(i.createdAt=new Date(t.RD)),t.BI!==void 0&&(i.businessInfo=ys.fromJson(t.BI)),t.WIN!==void 0&&(i.workerInfo=InvoiceWorkerInfo.fromJson(t.WIN)),i.items={},Object.entries(t.I).forEach(([n,a])=>{i.items[parseInt(n,10)]=InvoiceItem.fromJson(a,parseInt(n,10))}),t.PM!==void 0&&(i.paymentsMethods=nn.fromJson(t.PM)),t.IN!==void 0&&(i.invoiceNumber=parseInt(t.IN,10)),i.price=new Fe({amount:i.paymentsMethods.amount.toString(),currency:$c[i.paymentsMethods.currency??""]||gr}),i.signature=t.Sig,i}toJson(){const t={};this.invoiceNumber!==void 0&&(t.IN=this.invoiceNumber.toString()),this.signature!==void 0&&(t.Sig=this.signature),t.BI=this.businessInfo.toJson(),t.WIN=this.workerInfo.toJson(),t.RD=this.createdAt.toISOString(),t.CD=this.customerData.toMinimalJson(),t.I={};for(const s in this.items)t.I[s]=this.items[s].toJson();return t.PM=this.paymentsMethods.toJson(),t}get customerHashPhone(){return Lr(this.customerData.phoneNumber)}get customerPhoneAsCollection(){return this.customerData.phoneNumber.replace(/-/g,"")}get bookingInvoiceData(){return new wr({docId:this.docId.toString(),amount:this.paymentsMethods.amount,monthStr:vr(this.createdAt),issuedBy:this.workerInfo.workerId,invoiceId:this.invoiceId})}get link(){let t="";return this.signature===void 0?"":(this.invoiceNumber!==void 0&&(t=cf.replace("MASOFNUMBER",this.businessInfo.masofNumber).replace("INVOICENUMBER",this.invoiceNumber.toString()).replace("SIGNATURE",this.signature)),t)}get toInvoiceNoticaficationPayload(){return new cc({businessId:this.businessInfo.businessId,businessName:this.businessInfo.businessName,date:this.createdAt,id:this.invoiceId})}get docId(){return(parseInt(uo(this.createdAt),10)||0)>16?2:1}toString(){return JSON.stringify(this,null,2)}}class _n extends wi{constructor({businessId:e,date:t,id:s,workerId:i,businessName:n,shopIcon:a}){super({businessId:e,date:t,id:s,workerId:i,businessName:n})}static fromJsonStr(e){const t=JSON.parse(e),s=t.businessId||"",i=t.businessName||"",n=t.date?new Date(t.date):void 0,a=t.workerId||"",c=t.id||"",u=t.shopIcon?he.fromJsonStr(t.shopIcon):void 0;return new _n({businessId:s,date:n,id:c,workerId:a,businessName:i,shopIcon:u})}toJsonStr(){var t,s;const e={};return e.businessId=this.businessId,e.date=((t=this.date)==null?void 0:t.toISOString())||null,e.businessName=this.businessName,e.id=this.id,e.workerId=this.workerId,e.shopIcon=((s=this.shopIcon)==null?void 0:s.toJsonStr())||null,JSON.stringify(e)}toString(){return this.toJsonStr()}}class ci extends uc{constructor({id:t,price:s,createdAt:i,summary:n="",businessName:a,shopIcon:c,oneTime:u=!1,closeForAll:l=!1,workerName:h,workerId:d,businessId:f}){super();o(this,"id","");o(this,"summary","");o(this,"workerId","");o(this,"businessName","");o(this,"workerName","");o(this,"businessId");o(this,"multi",!1);o(this,"closeForAll",!0);o(this,"users",{});o(this,"oneTime",!0);o(this,"userPayments",{});o(this,"userDecline",!1);o(this,"canceled",!1);o(this,"bookingReference");o(this,"shopIcon",new he);this.id=t,this.price=s,this.createdAt=i,this.summary=n,this.workerId=d,this.businessId=f,this.businessName=a,this.workerName=h,this.users={},this.closeForAll=l,this.oneTime=u,this.bookingReference=void 0,this.shopIcon=new he}static empty(){return new ci({})}get link(){return`https://${ac}/${oc}`.replaceAll("PAYMENT_ID",this.id)}get payers(){let t=0;return Object.values(this.users).forEach(s=>{t+=Object.keys(s.payments).length}),t}get docId(){return vr(this.createdAt)}toPaymentRequest(t,s){const i=new Pn({id:this.id,price:this.price,oneTime:this.oneTime,shopIcon:this.shopIcon,multi:Object.keys(this.users).length>1,workerInfo:t,businessInfo:s,summary:this.summary,closeForAll:this.closeForAll});return i.createdAt=this.createdAt,i}get toPaymentRequestNotificationPayload(){return new _n({businessId:this.businessId,businessName:this.businessName,id:this.id,date:this.createdAt,workerId:this.workerId,shopIcon:this.shopIcon})}static fromJson(t,s){const i=new ci({});return i.id=s,t.price!=null&&(i.price=Fe.fromJson(t.price)),i.closeForAll=t.closeForAll??!0,i.summary=t.summary??"",t.shopIcon!=null&&(i.shopIcon=he.fromJson(t.shopIcon)),t.createdAt!=null&&(i.createdAt=new Date(t.createdAt)??new Date(0)),i.oneTime=t.oneTime??!0,i.businessName=t.businessName??"",i.workerId=t.workerId??"",i.businessId=t.businessId??"",i.workerName=t.workerName??"",i.users={},t.users!=null&&Object.entries(t.users).forEach(([n,a])=>{i.users[n]=Hr.fromJson(a,n)}),t.bookingReference!=null&&(i.bookingReference=En.fromJson(t.bookingReference)),i}toJson(){const t={};return this.createdAt!=new Date(0)&&(t.createdAt=this.createdAt.toString()),this.summary!==""&&(t.summary=this.summary),this.oneTime||(t.oneTime=this.oneTime),this.closeForAll||(t.closeForAll=this.closeForAll),t.price=this.price.toJson(),t.workerId=this.workerId,t.businessName=this.businessName,t.businessId=this.businessId,t.workerName=this.workerName,Object.keys(this.users).length>0&&(t.users={},Object.entries(this.users).forEach(([s,i])=>{t.users[s]=i.toJson()})),this.bookingReference!=null&&(t.bookingReference=this.bookingReference.toJson()),t.shopIcon=this.shopIcon.toJson(),t}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class Pn extends uc{constructor({id:t,price:s,createdAt:i,summary:n="",multi:a=!1,userDecline:c=!1,canceled:u=!1,oneTime:l,shopIcon:h,closeForAll:d,workerInfo:f,businessInfo:p}){super();o(this,"id","");o(this,"summary","");o(this,"workerInfo",new InvoiceWorkerInfo);o(this,"businessInfo",new ys);o(this,"payers",0);o(this,"multi",!1);o(this,"closeForAll",!0);o(this,"users",{});o(this,"oneTime",!0);o(this,"userPayments",{});o(this,"userDecline",!1);o(this,"canceled",!1);o(this,"shopIcon",new he);this.price=s,this.createdAt=i,this.id=t,this.summary=n,this.multi=a,this.userDecline=c,this.canceled=u,this.oneTime=l,this.shopIcon=h,this.closeForAll=d,this.workerInfo=f,this.businessInfo=p}get link(){return`https://${ac}/${oc}`.replace("PAYMENT_ID",this.id)}get toPaymentRequestPreview(){const t=new ci({id:this.id,businessName:this.businessInfo.businessName,shopIcon:this.shopIcon,businessId:this.businessInfo.businessId,workerId:this.workerInfo.workerId,price:this.price,oneTime:this.oneTime,workerName:this.workerInfo.workerName,summary:this.summary,closeForAll:this.closeForAll});return t.users=this.users,t.createdAt=this.createdAt,t}get toPaymentRequestNotificationPayload(){const t=new _n({businessId:this.businessInfo.businessId,id:this.id,businessName:this.businessInfo.businessName,date:this.createdAt,workerId:this.workerInfo.workerId,shopIcon:this.shopIcon});return t.shopIcon=this.shopIcon,t}get businessPayloadData(){return new ms({businessName:this.businessInfo.businessName,businessId:this.businessInfo.businessId,shopIcon:this.shopIcon})}get docId(){return vr(this.createdAt)}get toBookingPaymentRequestData(){const t=new Cn({});return t.createdAt=this.createdAt,t.id=this.id,t.workerId=this.workerInfo.workerId,t}get userPay(){return Object.keys(this.userPayments).length>0}static fromJson(t,s){const i=new Pn({});return i.id=s,t.businessInfo!=null&&(i.businessInfo=ys.fromJson(t.businessInfo)),i.closeForAll=t.closeForAll??!0,t.workerInfo!=null&&(i.workerInfo=InvoiceWorkerInfo.fromJson(t.workerInfo)),t.shopIcon!=null&&(i.shopIcon=he.fromJson(t.shopIcon)),i.canceled=t.canceled??!1,i.oneTime=t.oneTime??!0,t.price!=null&&(i.price=Fe.fromJson(t.price)),i.multi=t.multi??!1,i.userDecline=t.userDecline??!1,t.userPayments!=null&&typeof t.userPayments=="object"&&Object.entries(t.userPayments).forEach(([n,a])=>{i.userPayments[n]=a!=null?new Date(a):new Date(0)}),i.summary=t.summary??"",t.createdAt!=null&&(i.createdAt=t.createdAt!=null?new Date(t.createdAt):new Date(0)),i.payers=t.payers??0,i}toJson(){const t={};return this.createdAt!=null&&this.createdAt.getTime()!==new Date(0).getTime()&&(t.createdAt=this.createdAt.toISOString()),this.oneTime||(t.oneTime=this.oneTime),this.canceled&&(t.canceled=this.canceled),this.summary!==""&&(t.summary=this.summary),this.closeForAll||(t.closeForAll=this.closeForAll),Object.keys(this.userPayments).length>0&&(t.userPayments={},Object.entries(this.userPayments).forEach(([s,i])=>{t.userPayments[s]=i.toISOString()})),this.payers>0&&(t.payers=this.payers),this.userDecline&&(t.userDecline=this.userDecline),this.multi&&(t.multi=this.multi),t.price=this.price.toJson(),t.workerInfo=this.workerInfo.toJson(),t.businessInfo=this.businessInfo.toJson(),t.shopIcon=this.shopIcon.toJson(),t}toString(){return JSON.stringify(this,null,"  ")}}class rv{constructor(){o(this,"bookings",{});o(this,"invoices",{});o(this,"paymentsRequests",{});o(this,"clientAt",{})}get isEmpty(){return this.bookingCount===0&&this.invoicesCount===0&&this.paymentsRequestCount===0}get bookingCount(){let e=0;for(const t of Object.values(this.bookings))e+=Object.keys(t).length;return e}get invoicesCount(){let e=0;for(const t of Object.values(this.invoices))e+=Object.keys(t).length;return e}get paymentsRequestCount(){let e=0;for(const t of Object.values(this.paymentsRequests))e+=Object.keys(t).length;return e}get clientAtJson(){const e={};for(const[t,s]of Object.entries(this.clientAt)){e[t]={};for(const i of s)e[t][i]=""}return e}get bookingsJson(){const e={};for(const[t,s]of Object.entries(this.bookings)){e[t]={};for(const[i,n]of Object.entries(s))e[t][i]=n.toJson()}return e}get invoicesJson(){const e={};for(const[t,s]of Object.entries(this.invoices)){e[t]={};for(const[i,n]of Object.entries(s))e[t][i]=n.toJson()}return e}get paymentRequestJson(){const e={};for(const[t,s]of Object.entries(this.paymentsRequests)){e[t]={};for(const[i,n]of Object.entries(s))e[t][i]=n.toJson()}return e}get bookingsPreviewsJson(){const e={};for(const[t,s]of Object.entries(this.bookings)){const i=new pn({});for(const[n,a]of Object.entries(s))a.cancelDate===null&&(i.bookingCount=i.bookingCount+1);i.lastUpdateTime=new Date,e[t]=i.toJson()}return e}get whatWeFoundStr(){let e=W("weFound");const t=[];return this.bookingCount>0&&t.push(W("foundBookings").replace("COUNTER",this.bookingCount.toString())),this.invoicesCount>0&&t.push(W("foundInvoices").replace("COUNTER",this.invoicesCount.toString())),this.paymentsRequestCount>0&&t.push(W("foundPaymentsRequests").replace("COUNTER",this.paymentsRequestCount.toString())),t.forEach((s,i)=>{if(i===0){e+=s;return}if(i===t.length-1){e+=" ",e+=W("and")+s;return}e+=", "+s}),e+=", "+W("thatAutoMaticllyAdded"),e}}class sv{constructor(){o(this,"_db");po().length===0?go(vo):hn(),this._db=td()}async getChild({childPath:e}){try{const t=br(this._db,`${ve}/${e}`);return await rd(t)}catch(t){throw t}}async updateChild({childPath:e,data:t}){try{const s=br(this._db,`${ve}/${e}`);return await Ln(s,t),!0}catch{return!1}}async removeChild({childPath:e}){try{const t=br(this._db,`${ve}/${e}`);return await sd(t),!0}catch{return!1}}async incrementNumberChild({childPath:e,valueId:t,delta:s,command:i}){try{i===Vs.decrement&&(s=-s);const n={[t]:Mc(s)},a=br(this._db,`${ve}/${e}`);return await Ln(a,n),!0}catch{return!1}}async incrementMultipleNumberChild({childPath:e,data:t}){try{const s={};for(const[n,a]of Object.entries(t))s[n]=Mc(a);const i=br(this._db,`${ve}/${e}`);return await Ln(i,s),!0}catch{return!1}}listenToChild({childPath:e,callback:t}){const s=br(this._db,`${ve}/${e}`);return id(s,t)}async setChild({childPath:e,data:t}){try{const s=br(this._db,`${ve}/${e}`);return await nd(s,t),!0}catch{return!1}}}class iv extends sv{constructor(){po().length===0?go(vo):hn();super();o(this,"_firestore");this._firestore=ad()}get getBatch(){return od(this._firestore)}async getDocSRV({path:t,docId:s,insideEnviroments:i=!0}){try{const n=Me(this._firestore,i?`${ve}/${t}`:t),a=Ve(n,s);return await cd(a)}catch(n){throw n instanceof Error&&(K.error(n.message),re.GI().addError({error:G.serverError,details:n.message})),n}}async getAllDocsInsideCollection(t){try{const s=Me(this._firestore,`${ve}/${t}`);return(await Nc(s)).docs.map(n=>n.data())}catch(s){if(s instanceof Error)throw re.GI().addError({error:G.serverError,details:s.toString()}),s;return[]}}async commmitBatch(t){try{return await t.commit(),!0}catch(s){throw K.error("Error while commit batch -->",s),s instanceof Error&&re.GI().addError({error:G.serverError,details:s.toString()}),new Error(`Server Error: ${s}`)}}async runTransaction(t){try{return await ud(this._firestore,async i=>await t(i))}catch(s){throw console.error("Error while run transaction -->",s),s instanceof Error&&re.GI().addError({error:G.serverError,details:s.toString()}),new Error(`Server Error: ${s}`)}}async transactionGet(t,s,i){try{const n=Me(this._firestore,`${ve}/${s}`),a=Ve(n,i);return await t.get(a)}catch(n){throw console.error("Error while getting document in transaction -->",n),n instanceof Error&&re.GI().addError({error:G.serverError,details:n.toString()}),new Error(`Server Error: ${n}`)}}async transactionUpdateAsMap({transaction:t,path:s,docId:i,fieldName:n,value:a}){try{const c=Me(this._firestore,`${ve}/${s}`),u=Ve(c,i),l={[n]:a||Un()};t.update(u,l)}catch(c){throw K.error("Error while updating document in transaction -->",c),c instanceof Error&&re.GI().addError({error:G.serverError,details:c.toString()}),new Error(`Server Error: ${c}`)}}async setAsMap({batch:t,path:s,docId:i,data:n,insideEnviroments:a=!0}){try{const c=Me(this._firestore,a?`${ve}/${s}`:s),u=Ve(c,i);t.set(u,n,{merge:!0})}catch(c){throw c instanceof Error&&re.GI().addError({error:G.serverError,details:c.toString()}),c}}async getAllDocsAndIdsInsideCollection({path:t}){try{const s=Me(this._firestore,`$envKey/${t}`),i=await Nc(s),n={};return i.docs.forEach(a=>{n[a.id]=a.data()}),n}catch(s){throw s instanceof Error&&re.GI().addError({error:G.serverError,details:s.toString()}),s}}async transactionUpdateMultipleFieldsAsMap({transaction:t,path:s,docId:i,data:n,insideEnvironments:a=!0}){try{const c=Me(this._firestore,a?`${ve}/${s}`:s),u=Ve(c,i),l=this.organizeData(n);t.update(u,l)}catch(c){throw console.error("Error while updating multiple fields in transaction -->",c),c instanceof Error&&re.GI().addError({error:G.serverError,details:c.toString()}),new Error(`Server Error: ${c}`)}}async transactionCreateDoc({transaction:t,path:s,docId:i,value:n}){try{const a=Me(this._firestore,`${ve}/${s}`),c=Ve(a,i);t.set(c,n)}catch(a){throw K.error("Error while creating document in transaction -->",a),a instanceof Error&&re.GI().addError({error:G.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}async transactionSetAsMap({transaction:t,path:s,docId:i,data:n}){try{const a=Me(this._firestore,`${ve}/${s}`),c=Ve(a,i),u=this.organizeData(n);t.set(c,u,{merge:!0})}catch(a){throw K.error("Error while setting document as map in transaction -->",a),a instanceof Error&&re.GI().addError({error:G.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}async deleteDoc({batch:t,path:s,docId:i}){try{const n=Me(this._firestore,`${ve}/${s}`),a=Ve(n,i);t.delete(a)}catch(n){throw n instanceof Error&&re.GI().addError({error:G.serverError,details:n.toString()}),n}}async setDoc({batch:t,path:s,docId:i,valueToSet:n,insideEnviroments:a=!0}){try{const c=Me(this._firestore,a?`${ve}/${s}`:s),u=Ve(c,i);t.set(u,n)}catch(c){throw c instanceof Error&&re.GI().addError({error:G.serverError,details:c.toString()}),c}}async createDoc({batch:t,path:s,docId:i,valueAsJson:n,insideEnviroments:a=!0,mergeIfExist:c=!1}){try{const u=c?{merge:!0}:null,l=Me(this._firestore,a?`${ve}/${s}`:s),h=Ve(l,i);t.set(h,n,{merge:c})}catch(u){throw u instanceof Error&&re.GI().addError({error:G.serverError,details:u.toString()}),u}}async updateFieldInsideDocAsMap({batch:t,path:s,docId:i,value:n,fieldName:a,command:c,insideEnviroments:u=!0}){try{const l=Me(this._firestore,u?`${ve}/${s}`:s),h=Ve(l,i);c===null?t.update(h,{[a]:n??Un()}):t.update(h,{[a]:c===Vs.increment?Ai(1):Ai(-1)})}catch(l){throw l instanceof Error&&re.GI().addError({error:G.serverError,details:l.toString()}),l}}async updateMultipleFieldsInsideDocAsMap({batch:t,path:s,docId:i,data:n,insideEnviroments:a=!0}){try{const c=Me(this._firestore,a?`${ve}/${s}`:s),u=Ve(c,i);t.update(u,this.organizeData(n))}catch(c){throw K.error("Error while updating the batch -->",c),c instanceof Error&&re.GI().addError({error:G.serverError,details:c.toString()}),new Error(`Server Error: ${c}`)}}updateFieldInsideDocAsArray({batch:t,path:s,docId:i,fieldName:n,value:a,command:c=Ja.add}){try{const u=Me(this._firestore,`${ve}/${s}`),l=Ve(u,i);t.update(l,{[n]:c===Ja.remove?ld([a]):hd([a])})}catch(u){throw u instanceof Error&&re.GI().addError({error:G.serverError,details:u.toString()}),new Error(`Server Error: ${u}`)}}docListener({path:t,docId:s,onChanged:i}){try{const n=Me(this._firestore,`${ve}/${t}`),a=Ve(n,s);return dd(a,i)}catch(n){throw n instanceof Error&&re.GI().addError({error:G.serverError,details:n.message}),n}}organizeData(t){var s={};return Object.entries(t).forEach(([i,n])=>{let a=n;a===null&&(a=Un()),a===Vs.increment&&(a=Ai(1)),a===Vs.decrement&&(a=Ai(-1)),s[i]=a}),s}get currentTimestamp(){return pr.now()}}class oh extends iv{constructor(){super()}async getDocRepo({path:e,docId:t,insideEnviroments:s=!0}){return await super.getDocSRV({path:e,docId:t,insideEnviroments:s})}async createDocRepo({path:e,docId:t,valueAsJson:s,insideEnviroments:i=!0,mergeIfExist:n=!1}){const a=this.getBatch;return super.createDoc({batch:a,path:e,docId:t,valueAsJson:s,insideEnviroments:i,mergeIfExist:n}),await this.commmitBatch(a)}async updateFieldInsideDocAsArrayRepo({path:e,docId:t,fieldName:s,value:i,command:n}){const a=this.getBatch;return super.updateFieldInsideDocAsArray({batch:a,path:e,docId:t,fieldName:s,value:i,command:n}),await this.commmitBatch(a)}async updateFieldInsideDocAsMapRepo({path:e,docId:t,fieldName:s,value:i,insideEnviroments:n=!0,command:a=null}){const c=this.getBatch;return this.updateFieldInsideDocAsMap({batch:c,path:e,docId:t,fieldName:s,value:i,command:a,insideEnviroments:n}),await this.commmitBatch(c)}async updateMultipleFieldsInsideDocAsMapRepo({path:e,docId:t,data:s,insideEnviroments:i=!0}){const n=this.getBatch;return super.updateMultipleFieldsInsideDocAsMap({batch:n,path:e,docId:t,data:s,insideEnviroments:i}),await this.commmitBatch(n)}async deleteDocRepo({path:e,docId:t}){const s=this.getBatch;return super.deleteDoc({batch:s,path:e,docId:t}),await this.commmitBatch(s)}async setDocRepo({path:e,docId:t,valueAsJson:s,insideEnviroments:i=!0}){const n=this.getBatch;return super.setDoc({batch:n,path:e,docId:t,valueToSet:s,insideEnviroments:i}),await this.commmitBatch(n)}async setAsMapWithMergeRepo({path:e,docId:t,valueAsJson:s,insideEnviroments:i=!0}){const n=this.getBatch;return super.setAsMap({batch:n,path:e,docId:t,data:s,insideEnviroments:i}),await this.commmitBatch(n)}docListenerRepo({path:e,docId:t,onChanged:s}){return super.docListener({path:e,docId:t,onChanged:s})}toFormatedCustomerData({amountOfBookingsCommand:e,useUserFirstBookingsDate:t=!1,saveExtraData:s=!1}){return{}}async realTimeEventsCounterHandler({businessId:e,workerId:t,types:s,increment:i}){if(s.size===0)return!0;const n=js.GI().getWorkerCountersPath(e,t),a={};return s.forEach((c,u)=>{Jc[u]!==null&&c!==0&&(a[Jc[u]]=(i?1:-1)*c)}),Object.keys(a).length===0?!0:await this.incrementMultipleNumberChild({childPath:n,data:a})}}class nv extends oh{constructor(){super()}async updatePublicUserField({userId:e,businessesIds:t,fieldName:s,cangeUserDoc:i=!0,value:n}){const a=this.getBatch;return i&&this.updateFieldInsideDocAsMap({batch:a,path:"usersCollection",docId:e,fieldName:s,value:n}),this.updateFieldInsideDocAsMap({batch:a,path:`usersCollection/${e}/dataCollection`,docId:"dataDoc",fieldName:s,value:n}),t.forEach(c=>{this.updateFieldInsideDocAsMap({batch:a,path:`buisnessCollection/${c}/workersCollection`,docId:e,fieldName:s,value:n})}),await this.commmitBatch(a)}async updatePublicUserFields({userId:e,businessesIds:t,cangeUserDoc:s=!0,dataForWorker:i,data:n}){const a=this.getBatch;return s&&this.updateMultipleFieldsInsideDocAsMap({batch:a,path:rt,docId:e,data:n}),this.updateMultipleFieldsInsideDocAsMap({batch:a,path:`${rt}/${e}/${qe}`,docId:lt,data:n}),t.forEach(c=>{this.updateMultipleFieldsInsideDocAsMap({batch:a,path:`${Ge}/${c}/${ut}`,docId:e,data:i||n})}),await this.commmitBatch(a)}async createUser({user:e}){const t=this.getBatch;return this.createDoc({batch:t,path:rt,docId:e.id,valueAsJson:e.toUserDocJson()}),this.setAsMap({batch:t,path:`${rt}/${e.id}/${qe}`,docId:lt,data:e.userPublicData.toJson()}),await this.commmitBatch(t)}async mergePhoneDataWithUser({phone:e,userId:t,name:s}){const i=new rv,n=Lr(e),a=e.replaceAll("-",""),c=async u=>{const l=await this.transactionGet(u,gt,n);if(l.exists()&&l.data().userId!=t)return re.GI().error=G.alreadyExistPhone,!1;const h=await this.transactionGet(u,`${gt}/${n}/${a}`,Lc);h.exists()&&h.data()!=null&&Object.entries(h.data().clientAt).forEach(([m,w])=>{Object.keys(w).length!==0&&(i.clientAt[m]=new Set,Object.entries(w).forEach(([y,D])=>{i.clientAt[m].add(y)}))});const d=await this.getAllDocsAndIdsInsideCollection({path:`${gt}/${n}/${a}/${Gr}/${Ys}`});Object.entries(d).forEach(([m,w])=>{var y;(y=i.bookings)[m]??(y[m]={}),Object.entries(w).forEach(([D,g])=>{const x=Xe.fromJson(g,D);x.customerId=t,x.isUserExist=!0,i.bookings[m][D]=x})});const f=await this.getAllDocsAndIdsInsideCollection({path:`${gt}/${n}/${a}/${Gr}/${Vn}`});Object.entries(f).forEach(([m,w])=>{var y;(y=i.invoices)[m]??(y[m]={}),Object.entries(w).forEach(([D,g])=>{const x=lc.fromJson(g,D);i.invoices[m][D]=x})});const p=await this.getAllDocsAndIdsInsideCollection({path:`${gt}/${n}/${a}/${Gr}/${$n}`});return Object.entries(p).forEach(([m,w])=>{var y;(y=i.paymentsRequests)[m]??(y[m]={}),Object.entries(w).forEach(([D,g])=>{const x=Pn.fromJson(g,D);i.paymentsRequests[m][D]=x})}),(i.clientAt.isNotEmpty||i.bookingCount>0)&&this.transactionSetAsMap({transaction:u,path:`${rt}/${t}/${qe}`,docId:lt,data:{clientAt:i.clientAtJson,bookingsPreviews:i.bookingsPreviewsJson}}),this.transactionCreateDoc({transaction:u,path:gt,docId:Lr(e),value:{userId:t,name:s}}),Object.entries(i.bookingsJson).forEach(([m,w])=>{this.transactionSetAsMap({transaction:u,path:`${rt}/${t}/${qe}/${lt}/${Ys}`,docId:m,data:w})}),Object.entries(i.invoicesJson).forEach(([m,w])=>{this.transactionSetAsMap({transaction:u,path:`${rt}/${t}/${qe}/${lt}/${Vn}`,docId:m,data:w})}),Object.entries(i.paymentRequestJson).forEach(([m,w])=>{this.transactionSetAsMap({transaction:u,path:`${rt}/${t}/${qe}/${lt}/${$n}`,docId:m,data:w})}),!0};return await this.runTransaction(c).then(async u=>{if(u){const l=[];return i.clientAt.isNotEmpty&&l.push(this.deleteDoc({batch:this.getBatch,path:`${gt}/${n}/${a}`,docId:Lc})),Object.entries(i.invoices).forEach(([h,d])=>{l.push(this.deleteDoc({batch:this.getBatch,path:`${gt}/${n}/${a}/${Gr}/${Vn}`,docId:h}))}),Object.entries(i.paymentsRequests).forEach(([h,d])=>{l.push(this.deleteDoc({batch:this.getBatch,path:`${gt}/${n}/${a}/${Gr}/${$n}`,docId:h}))}),Object.entries(i.bookings).forEach(([h,d])=>{l.push(this.deleteDoc({batch:this.getBatch,path:`${gt}/${n}/${a}/${Gr}/${Ys}`,docId:h}))}),i.bookings.isNotEmpty&&Object.entries(i.bookings).forEach(([h,d])=>{Object.entries(d).forEach(([f,p])=>{})}),i.paymentsRequests.isNotEmpty&&Object.entries(i.paymentsRequests).forEach(([h,d])=>{Object.entries(d).forEach(([f,p])=>{l.push(new Promise(async()=>{const m=await this.getDocSRV({path:Xd,docId:f});if(m.data()===void 0||!m.exists())return;const y=ci.fromJson(m.data(),f).users[e];y!=null&&(y.isExist=!0,y.isVerifiedPhone=!0,y.userId=t)}))})}),l.length>0&&await Promise.all(l),i}})}}function ch(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const av=ch,uh=new xo("auth","Firebase",ch());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new yd("@firebase/auth");function ov(r,...e){an.logLevel<=Du.WARN&&an.warn(`Auth (${hi}): ${r}`,...e)}function Li(r,...e){an.logLevel<=Du.ERROR&&an.error(`Auth (${hi}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(r,...e){throw dc(r,...e)}function It(r,...e){return dc(r,...e)}function lh(r,e,t){const s=Object.assign(Object.assign({},av()),{[e]:t});return new xo("auth","Firebase",s).create(e,{appName:r.name})}function hc(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Et(r,"argument-error"),lh(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dc(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return uh.create(r,...e)}function $(r,e,...t){if(!r)throw dc(e,...t)}function Yt(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Li(e),new Error(e)}function Qt(r,e){r||Yt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function cv(){return ru()==="http:"||ru()==="https:"}function ru(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cv()||pd()||"connection"in navigator)?navigator.onLine:!0}function lv(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qt(t>e,"Short delay should be less than long delay!"),this.isMobile=fd()||md()}get(){return uv()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(r,e){Qt(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=new vi(3e4,6e4);function er(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function pt(r,e,t,s,i={}){return dh(r,i,async()=>{let n={},a={};s&&(e==="GET"?a=s:n={body:JSON.stringify(s)});const c=di(Object.assign({key:r.config.apiKey},a)).slice(1),u=await r._getAdditionalHeaders();return u["Content-Type"]="application/json",r.languageCode&&(u["X-Firebase-Locale"]=r.languageCode),hh.fetch()(fh(r,r.config.apiHost,t,c),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},n))})}async function dh(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},hv),e);try{const i=new fv(r),n=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await n.json();if("needConfirmation"in a)throw Hs(r,"account-exists-with-different-credential",a);if(n.ok&&!("errorMessage"in a))return a;{const c=n.ok?a.errorMessage:a.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hs(r,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Hs(r,"email-already-in-use",a);if(u==="USER_DISABLED")throw Hs(r,"user-disabled",a);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw lh(r,h,l);Et(r,h)}}catch(i){if(i instanceof yo)throw i;Et(r,"network-request-failed",{message:String(i)})}}async function Sn(r,e,t,s,i={}){const n=await pt(r,e,t,s,i);return"mfaPendingCredential"in n&&Et(r,"multi-factor-auth-required",{_serverResponse:n}),n}function fh(r,e,t,s){const i=`${e}${t}?${s}`;return r.config.emulator?fc(r.config,i):`${r.config.apiScheme}://${i}`}class fv{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(It(this.auth,"network-request-failed")),dv.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hs(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const i=It(r,e,s);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mv(r,e){return pt(r,"POST","/v1/accounts:delete",e)}async function pv(r,e){return pt(r,"POST","/v1/accounts:update",e)}async function gv(r,e){return pt(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xv(r,e=!1){const t=He(r),s=await t.getIdToken(e),i=mc(s);$(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const n=typeof i.firebase=="object"?i.firebase:void 0,a=n==null?void 0:n.sign_in_provider;return{claims:i,token:s,authTime:Js(Ua(i.auth_time)),issuedAtTime:Js(Ua(i.iat)),expirationTime:Js(Ua(i.exp)),signInProvider:a||null,signInSecondFactor:(n==null?void 0:n.sign_in_second_factor)||null}}function Ua(r){return Number(r)*1e3}function mc(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Li("JWT malformed, contained fewer than 3 sections"),null;try{const i=vd(t);return i?JSON.parse(i):(Li("Failed to decode base64 JWT payload"),null)}catch(i){return Li("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yv(r){const e=mc(r);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof yo&&wv(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function wv({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Js(this.lastLoginAt),this.creationTime=Js(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ui(r){var e;const t=r.auth,s=await r.getIdToken(),i=await ws(r,gv(t,{idToken:s}));$(i==null?void 0:i.users.length,t,"internal-error");const n=i.users[0];r._notifyReloadListener(n);const a=!((e=n.providerUserInfo)===null||e===void 0)&&e.length?kv(n.providerUserInfo):[],c=bv(r.providerData,a),u=r.isAnonymous,l=!(r.email&&n.passwordHash)&&!(c!=null&&c.length),h=u?l:!1,d={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:c,metadata:new mh(n.createdAt,n.lastLoginAt),isAnonymous:h};Object.assign(r,d)}async function Dv(r){const e=He(r);await ui(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bv(r,e){return[...r.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function kv(r){return r.map(e=>{var{providerId:t}=e,s=wo(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iv(r,e){const t=await dh(r,{},async()=>{const s=di({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:n}=r.config,a=fh(r,i,"/v1/token",`key=${n}`),c=await r._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",hh.fetch()(a,{method:"POST",headers:c,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Tv(r,e){return pt(r,"POST","/v2/accounts:revokeToken",er(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return $(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:i,expiresIn:n}=await Iv(e,t);this.updateTokensAndExpiration(s,i,Number(n))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:i,expirationTime:n}=t,a=new li;return s&&($(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),i&&($(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),n&&($(typeof n=="number","internal-error",{appName:e}),a.expirationTime=n),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new li,this.toJSON())}_performRefresh(){return Yt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(r,e){$(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Fr{constructor(e){var{uid:t,auth:s,stsTokenManager:i}=e,n=wo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=n.displayName||null,this.email=n.email||null,this.emailVerified=n.emailVerified||!1,this.phoneNumber=n.phoneNumber||null,this.photoURL=n.photoURL||null,this.isAnonymous=n.isAnonymous||!1,this.tenantId=n.tenantId||null,this.providerData=n.providerData?[...n.providerData]:[],this.metadata=new mh(n.createdAt||void 0,n.lastLoginAt||void 0)}async getIdToken(e){const t=await ws(this,this.stsTokenManager.getToken(this.auth,e));return $(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xv(this,e)}reload(){return Dv(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ui(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ws(this,mv(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,i,n,a,c,u,l,h;const d=(s=t.displayName)!==null&&s!==void 0?s:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,p=(n=t.phoneNumber)!==null&&n!==void 0?n:void 0,m=(a=t.photoURL)!==null&&a!==void 0?a:void 0,w=(c=t.tenantId)!==null&&c!==void 0?c:void 0,y=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,D=(l=t.createdAt)!==null&&l!==void 0?l:void 0,g=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:v,isAnonymous:I,providerData:T,stsTokenManager:b}=t;$(x&&b,e,"internal-error");const A=li.fromJSON(this.name,b);$(typeof x=="string",e,"internal-error"),nr(d,e.name),nr(f,e.name),$(typeof v=="boolean",e,"internal-error"),$(typeof I=="boolean",e,"internal-error"),nr(p,e.name),nr(m,e.name),nr(w,e.name),nr(y,e.name),nr(D,e.name),nr(g,e.name);const C=new Fr({uid:x,auth:e,email:f,emailVerified:v,displayName:d,isAnonymous:I,photoURL:m,phoneNumber:p,tenantId:w,stsTokenManager:A,createdAt:D,lastLoginAt:g});return T&&Array.isArray(T)&&(C.providerData=T.map(k=>Object.assign({},k))),y&&(C._redirectEventId=y),C}static async _fromIdTokenResponse(e,t,s=!1){const i=new li;i.updateFromServerResponse(t);const n=new Fr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await ui(n),n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=new Map;function Vt(r){Qt(r instanceof Function,"Expected a class definition");let e=su.get(r);return e?(Qt(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,su.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ph.type="NONE";const iu=ph;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(r,e,t){return`firebase:${r}:${e}:${t}`}class cs{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:i,name:n}=this.auth;this.fullUserKey=Ui(this.userKey,i.apiKey,n),this.fullPersistenceKey=Ui("persistence",i.apiKey,n),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new cs(Vt(iu),e,s);const i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let n=i[0]||Vt(iu);const a=Ui(s,e.config.apiKey,e.name);let c=null;for(const l of t)try{const h=await l._get(a);if(h){const d=Fr._fromJSON(e,h);l!==n&&(c=d),n=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!n._shouldAllowMigration||!u.length?new cs(n,e,s):(n=u[0],c&&await n._set(a,c.toJSON()),await Promise.all(t.map(async l=>{if(l!==n)try{await l._remove(a)}catch{}})),new cs(n,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yh(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gh(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vh(e))return"Blackberry";if(Dh(e))return"Webos";if(pc(e))return"Safari";if((e.includes("chrome/")||xh(e))&&!e.includes("edge/"))return"Chrome";if(wh(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function gh(r=Ze()){return/firefox\//i.test(r)}function pc(r=Ze()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xh(r=Ze()){return/crios\//i.test(r)}function yh(r=Ze()){return/iemobile/i.test(r)}function wh(r=Ze()){return/android/i.test(r)}function vh(r=Ze()){return/blackberry/i.test(r)}function Dh(r=Ze()){return/webos/i.test(r)}function Mn(r=Ze()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Av(r=Ze()){var e;return Mn(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ev(){return Dd()&&document.documentMode===10}function bh(r=Ze()){return Mn(r)||wh(r)||Dh(r)||vh(r)||/windows phone/i.test(r)||yh(r)}function Cv(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(r,e=[]){let t;switch(r){case"Browser":t=nu(Ze());break;case"Worker":t=`${nu(Ze())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=n=>new Promise((a,c)=>{try{const u=e(n);a(u)}catch(u){c(u)}});s.onAbort=t,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pv(r,e={}){return pt(r,"GET","/v2/passwordPolicy",er(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=6;class Mv{constructor(e){var t,s,i,n;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Sv,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(n=e.forceUpgradeOnSignin)!==null&&n!==void 0?n:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,i,n,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(s=u.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(n=u.containsUppercaseLetter)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,i,n){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t,s,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new au(this),this.idTokenSubscription=new au(this),this.beforeStateQueue=new _v(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vt(t)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await cs.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;const s=await this.assertedPersistence.getCurrentUser();let i=s,n=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(i=u.user,n=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(n)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ui(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lv()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?He(e):null;return t&&$(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Vt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Pv(this),t=new Mv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xo("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Tv(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vt(e)||this._popupRedirectResolver;$(t,this,"argument-error"),this.redirectPersistenceManager=await cs.create(this,[Vt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,i){if(this._deleted)return()=>{};const n=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if($(c,this,"internal-error"),c.then(()=>{a||n(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,s,i);return()=>{a=!0,u()}}else{const u=e.addObserver(t);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&ov(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function As(r){return He(r)}class au{constructor(e){this.auth=e,this.observer=null,this.addObserver=gd(t=>this.observer=t)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}function Bv(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=i=>{const n=It("internal-error");n.customData=i,t(n)},s.type="text/javascript",s.charset="UTF-8",Ov().appendChild(s)})}function Fv(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(r,e){const t=bu(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),n=t.getOptions();if(wd(n,e??{}))return i;Et(i,"already-initialized")}return t.initialize({options:e})}function Lv(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Vt);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Uv(r,e,t){const s=As(r);$(s._canInitEmulator,s,"emulator-config-failed"),$(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),n=Ih(e),{host:a,port:c}=Wv(e),u=c===null?"":`:${c}`;s.config.emulator={url:`${n}//${a}${u}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:a,port:c,protocol:n.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Hv()}function Ih(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Wv(r){const e=Ih(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const n=i[1];return{host:n,port:ou(s.substr(n.length+1))}}else{const[n,a]=s.split(":");return{host:n,port:ou(a)}}}function ou(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Hv(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yt("not implemented")}_getIdTokenResponse(e){return Yt("not implemented")}_linkToIdToken(e,t){return Yt("not implemented")}_getReauthenticationResolver(e){return Yt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function us(r,e){return Sn(r,"POST","/v1/accounts:signInWithIdp",er(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="http://localhost";class Kt extends gc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Kt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Et("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=t,n=wo(t,["providerId","signInMethod"]);if(!s||!i)return null;const a=new Kt(s,i);return a.idToken=n.idToken||void 0,a.accessToken=n.accessToken||void 0,a.secret=n.secret,a.nonce=n.nonce,a.pendingToken=n.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return us(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,us(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,us(e,t)}buildRequest(){const e={requestUri:Yv,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=di(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vv(r,e){return pt(r,"POST","/v1/accounts:sendVerificationCode",er(r,e))}async function $v(r,e){return Sn(r,"POST","/v1/accounts:signInWithPhoneNumber",er(r,e))}async function zv(r,e){const t=await Sn(r,"POST","/v1/accounts:signInWithPhoneNumber",er(r,e));if(t.temporaryProof)throw Hs(r,"account-exists-with-different-credential",t);return t}const Gv={USER_NOT_FOUND:"user-not-found"};async function qv(r,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Sn(r,"POST","/v1/accounts:signInWithPhoneNumber",er(r,t),Gv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends gc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ls({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ls({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return $v(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return zv(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return qv(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:i,temporaryProof:n}=e;return!s&&!t&&!i&&!n?null:new ls({verificationId:t,verificationCode:s,phoneNumber:i,temporaryProof:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Di{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zs extends Es{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return $("providerId"in t&&"signInMethod"in t,"argument-error"),Kt._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return $(e.idToken||e.accessToken,"argument-error"),Kt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Zs.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Zs.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s,oauthTokenSecret:i,pendingToken:n,nonce:a,providerId:c}=e;if(!s&&!i&&!t&&!n||!c)return null;try{return new Zs(c)._credential({idToken:t,accessToken:s,nonce:a,pendingToken:n})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt extends Es{constructor(){super("facebook.com")}static credential(e){return Kt._fromParams({providerId:Bt.PROVIDER_ID,signInMethod:Bt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bt.credentialFromTaggedObject(e)}static credentialFromError(e){return Bt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bt.credential(e.oauthAccessToken)}catch{return null}}}Bt.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bt.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft extends Es{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Kt._fromParams({providerId:Ft.PROVIDER_ID,signInMethod:Ft.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ft.credentialFromTaggedObject(e)}static credentialFromError(e){return Ft.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ft.credential(t,s)}catch{return null}}}Ft.GOOGLE_SIGN_IN_METHOD="google.com";Ft.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Es{constructor(){super("github.com")}static credential(e){return Kt._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Es{constructor(){super("twitter.com")}static credential(e,t){return Kt._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ur.credential(t,s)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,i=!1){const n=await Fr._fromIdTokenResponse(e,s,i),a=cu(s);return new vs({user:n,providerId:a,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const i=cu(s);return new vs({user:e,providerId:i,_tokenResponse:s,operationType:t})}}function cu(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on extends yo{constructor(e,t,s,i){var n;super(t.code,t.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,on.prototype),this.customData={appName:e.name,tenantId:(n=e.tenantId)!==null&&n!==void 0?n:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,i){return new on(e,t,s,i)}}function Th(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(n=>{throw n.code==="auth/multi-factor-auth-required"?on._fromErrorAndOperation(r,n,e,s):n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jv(r,e){const t=He(r);await Eh(!0,t,e);const{providerUserInfo:s}=await pv(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=Ah(s||[]);return t.providerData=t.providerData.filter(n=>i.has(n.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function xc(r,e,t=!1){const s=await ws(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return vs._forOperation(r,"link",s)}async function Eh(r,e,t){await ui(e);const s=Ah(e.providerData),i=r===!1?"provider-already-linked":"no-such-provider";$(s.has(t)===r,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(r,e,t=!1){const{auth:s}=r,i="reauthenticate";try{const n=await ws(r,Th(s,i,e,r),t);$(n.idToken,s,"internal-error");const a=mc(n.idToken);$(a,s,"internal-error");const{sub:c}=a;return $(r.uid===c,s,"user-mismatch"),vs._forOperation(r,i,n)}catch(n){throw(n==null?void 0:n.code)==="auth/user-not-found"&&Et(s,"user-mismatch"),n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(r,e,t=!1){const s="signIn",i=await Th(r,s,e),n=await vs._fromIdTokenResponse(r,s,i);return t||await r._updateCurrentUser(n.user),n}async function Zv(r,e){return _h(As(r),e)}async function Qv(r,e){const t=He(r);return await Eh(!1,t,e.providerId),xc(t,e)}async function Kv(r,e){return Ch(He(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xv(r,e){return pt(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jv(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=He(r),n={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await ws(s,Xv(s.auth,n));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const c=s.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=s.displayName,c.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}function eD(r,e,t,s){return He(r).onIdTokenChanged(e,t,s)}function tD(r,e,t){return He(r).beforeAuthStateChanged(e,t)}function rD(r,e,t,s){return He(r).onAuthStateChanged(e,t,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(r,e){return pt(r,"POST","/v2/accounts/mfaEnrollment:start",er(r,e))}const cn="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cn,"1"),this.storage.removeItem(cn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(){const r=Ze();return pc(r)||Mn(r)}const nD=1e3,aD=10;class Sh extends Ph{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=iD()&&Cv(),this.fallbackToPolling=bh(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),i=this.localCache[t];s!==i&&e(t,i,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const s=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(s);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(s,e.newValue):this.storage.removeItem(s);else if(this.localCache[s]===e.newValue&&!t)return}const i=()=>{const a=this.storage.getItem(s);!t&&this.localCache[s]===a||this.notifyListeners(s,a)},n=this.storage.getItem(s);Ev()&&n!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,aD):i()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},nD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Sh.type="LOCAL";const oD=Sh;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends Ph{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Mh.type="SESSION";const Nh=Mh;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const s=new Nn(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:i,data:n}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const c=Array.from(a).map(async l=>l(t.origin,n)),u=await cD(c);t.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nn.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let n,a;return new Promise((c,u)=>{const l=yc("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);a={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(h),n=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(n),c(f.data.response);break;default:clearTimeout(h),clearTimeout(n),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return window}function lD(r){Tt().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(){return typeof Tt().WorkerGlobalScope<"u"&&typeof Tt().importScripts=="function"}async function hD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dD(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function fD(){return Oh()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="firebaseLocalStorageDb",mD=1,un="firebaseLocalStorage",Fh="fbase_key";class bi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function On(r,e){return r.transaction([un],e?"readwrite":"readonly").objectStore(un)}function pD(){const r=indexedDB.deleteDatabase(Bh);return new bi(r).toPromise()}function fo(){const r=indexedDB.open(Bh,mD);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(un,{keyPath:Fh})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(un)?e(s):(s.close(),await pD(),e(await fo()))})})}async function uu(r,e,t){const s=On(r,!0).put({[Fh]:e,value:t});return new bi(s).toPromise()}async function gD(r,e){const t=On(r,!1).get(e),s=await new bi(t).toPromise();return s===void 0?null:s.value}function lu(r,e){const t=On(r,!0).delete(e);return new bi(t).toPromise()}const xD=800,yD=3;class Rh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fo(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>yD)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Oh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nn._getInstance(fD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await hD(),!this.activeServiceWorker)return;this.sender=new uD(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fo();return await uu(e,cn,"1"),await lu(e,cn),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>uu(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>gD(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lu(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const n=On(i,!1).getAll();return new bi(n).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:n}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(n)&&(this.notifyListeners(i,n),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Rh.type="LOCAL";const wD=Rh;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(r,e){return pt(r,"POST","/v2/accounts/mfaSignIn:start",er(r,e))}new vi(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="recaptcha";async function bD(r,e,t){var s;const i=await t.verify();try{$(typeof i=="string",r,"argument-error"),$(t.type===DD,r,"argument-error");let n;if(typeof e=="string"?n={phoneNumber:e}:n=e,"session"in n){const a=n.session;if("phoneNumber"in n)return $(a.type==="enroll",r,"internal-error"),(await sD(r,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:n.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{$(a.type==="signin",r,"internal-error");const c=((s=n.multiFactorHint)===null||s===void 0?void 0:s.uid)||n.multiFactorUid;return $(c,r,"missing-multi-factor-info"),(await vD(r,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await Vv(r,{phoneNumber:n.phoneNumber,recaptchaToken:i});return a}}finally{t._reset()}}async function kD(r,e){await xc(He(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.providerId=Rr.PROVIDER_ID,this.auth=As(e)}verifyPhoneNumber(e,t){return bD(this.auth,e,He(t))}static credential(e,t){return ls._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Rr.credentialFromTaggedObject(t)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:s}=e;return t&&s?ls._fromTokenResponse(t,s):null}}Rr.PROVIDER_ID="phone";Rr.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(r,e){return e?Vt(e):($(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends gc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return us(e,this._buildIdpRequest())}_linkToIdToken(e,t){return us(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return us(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ID(r){return _h(r.auth,new wc(r),r.bypassAuthState)}function TD(r){const{auth:e,user:t}=r;return $(t,e,"internal-error"),Ch(t,new wc(r),r.bypassAuthState)}async function AD(r){const{auth:e,user:t}=r;return $(t,e,"internal-error"),xc(t,new wc(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t,s,i,n=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=n,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:i,tenantId:n,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:t,sessionId:s,tenantId:n||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ID;case"linkViaPopup":case"linkViaRedirect":return AD;case"reauthViaPopup":case"reauthViaRedirect":return TD;default:Et(this.auth,"internal-error")}}resolve(e){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new vi(2e3,1e4);async function Wa(r,e,t){const s=As(r);hc(r,e,Di);const i=Bn(s,t);return new $t(s,"signInViaPopup",e,i).executeNotNull()}async function Ha(r,e,t){const s=He(r);hc(s.auth,e,Di);const i=Bn(s.auth,t);return new $t(s.auth,"reauthViaPopup",e,i,s).executeNotNull()}async function Ya(r,e,t){const s=He(r);hc(s.auth,e,Di);const i=Bn(s.auth,t);return new $t(s.auth,"linkViaPopup",e,i,s).executeNotNull()}class $t extends Lh{constructor(e,t,s,i,n){super(e,t,i,n),this.provider=s,this.authWindow=null,this.pollId=null,$t.currentPopupAction&&$t.currentPopupAction.cancel(),$t.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $(e,this.auth,"internal-error"),e}async onExecution(){Qt(this.filter.length===1,"Popup operations only handle one event");const e=yc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(It(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(It(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$t.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(It(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ED.get())};e()}}$t.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="pendingRedirect",Wi=new Map;class _D extends Lh{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Wi.get(this.auth._key());if(!e){try{const s=await PD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Wi.set(this.auth._key(),e)}return this.bypassAuthState||Wi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PD(r,e){const t=ND(e),s=MD(r);if(!await s._isAvailable())return!1;const i=await s._get(t)==="true";return await s._remove(t),i}function SD(r,e){Wi.set(r._key(),e)}function MD(r){return Vt(r._redirectPersistence)}function ND(r){return Ui(CD,r.config.apiKey,r.name)}async function OD(r,e,t=!1){const s=As(r),i=Bn(s,e),a=await new _D(s,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=10*60*1e3;class FD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Uh(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(It(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BD&&this.cachedEventUids.clear(),this.cachedEventUids.has(hu(e))}saveEventToCache(e){this.cachedEventUids.add(hu(e)),this.lastProcessedEventTime=Date.now()}}function hu(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Uh({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RD(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uh(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(r,e={}){return pt(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WD=/^https?/;async function HD(r){if(r.config.emulator)return;const{authorizedDomains:e}=await LD(r);for(const t of e)try{if(YD(t))return}catch{}Et(r,"unauthorized-domain")}function YD(r){const e=ho(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===s}if(!WD.test(t))return!1;if(UD.test(r))return s===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=new vi(3e4,6e4);function du(){const r=Tt().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function $D(r){return new Promise((e,t)=>{var s,i,n;function a(){du(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{du(),t(It(r,"network-request-failed"))},timeout:VD.get()})}if(!((i=(s=Tt().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((n=Tt().gapi)===null||n===void 0)&&n.load)a();else{const c=Fv("iframefcb");return Tt()[c]=()=>{gapi.load?a():t(It(r,"network-request-failed"))},Bv(`https://apis.google.com/js/api.js?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Hi=null,e})}let Hi=null;function zD(r){return Hi=Hi||$D(r),Hi}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=new vi(5e3,15e3),qD="__/auth/iframe",JD="emulator/auth/iframe",ZD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KD(r){const e=r.config;$(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?fc(e,JD):`https://${r.config.authDomain}/${qD}`,s={apiKey:e.apiKey,appName:r.name,v:hi},i=QD.get(r.config.apiHost);i&&(s.eid=i);const n=r._getFrameworks();return n.length&&(s.fw=n.join(",")),`${t}?${di(s).slice(1)}`}async function XD(r){const e=await zD(r),t=Tt().gapi;return $(t,r,"internal-error"),e.open({where:document.body,url:KD(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZD,dontclear:!0},s=>new Promise(async(i,n)=>{await s.restyle({setHideOnLeave:!1});const a=It(r,"network-request-failed"),c=Tt().setTimeout(()=>{n(a)},GD.get());function u(){Tt().clearTimeout(c),i(s)}s.ping(u).then(u,()=>{n(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eb=500,tb=600,rb="_blank",sb="http://localhost";class fu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ib(r,e,t,s=eb,i=tb){const n=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const u=Object.assign(Object.assign({},jD),{width:s.toString(),height:i.toString(),top:n,left:a}),l=Ze().toLowerCase();t&&(c=xh(l)?rb:t),gh(l)&&(e=e||sb,u.scrollbars="yes");const h=Object.entries(u).reduce((f,[p,m])=>`${f}${p}=${m},`,"");if(Av(l)&&c!=="_self")return nb(e||"",c),new fu(null);const d=window.open(e||"",c,h);$(d,r,"popup-blocked");try{d.focus()}catch{}return new fu(d)}function nb(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="__/auth/handler",ob="emulator/auth/handler",cb=encodeURIComponent("fac");async function mu(r,e,t,s,i,n){$(r.config.authDomain,r,"auth-domain-config-required"),$(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:hi,eventId:i};if(e instanceof Di){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",bd(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(n||{}))a[h]=d}if(e instanceof Es){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}r.tenantId&&(a.tid=r.tenantId);const c=a;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await r._getAppCheckToken(),l=u?`#${cb}=${encodeURIComponent(u)}`:"";return`${ub(r)}?${di(c).slice(1)}${l}`}function ub({config:r}){return r.emulator?fc(r,ob):`https://${r.authDomain}/${ab}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="webStorageSupport";class lb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nh,this._completeRedirectFn=OD,this._overrideRedirectResult=SD}async _openPopup(e,t,s,i){var n;Qt((n=this.eventManagers[e._key()])===null||n===void 0?void 0:n.manager,"_initialize() not called before _openPopup()");const a=await mu(e,t,s,ho(),i);return ib(e,a,yc())}async _openRedirect(e,t,s,i){await this._originValidation(e);const n=await mu(e,t,s,ho(),i);return lD(n),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:n}=this.eventManagers[t];return i?Promise.resolve(i):(Qt(n,"If manager is not set, promise should be"),n)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await XD(e),s=new FD(e);return t.register("authEvent",i=>($(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Va,{type:Va},i=>{var n;const a=(n=i==null?void 0:i[0])===null||n===void 0?void 0:n[Va];a!==void 0&&t(!!a),Et(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=HD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bh()||pc()||Mn()}}const hb=lb;var pu="@firebase/auth",gu="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function mb(r){Oc(new Bc("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),n=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=s.options;$(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:a,authDomain:c,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kh(r)},l=new Nv(s,i,n,u);return Lv(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Oc(new Bc("auth-internal",e=>{const t=As(e.getProvider("auth").getImmediate());return(s=>new db(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$a(pu,gu,fb(r)),$a(pu,gu,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=5*60,gb=vu("authIdTokenMaxAge")||pb;let xu=null;const xb=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>gb)return;const i=t==null?void 0:t.token;xu!==i&&(xu=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function yb(r=hn()){const e=bu(r,"auth");if(e.isInitialized())return e.getImmediate();const t=Rv(r,{popupRedirectResolver:hb,persistence:[wD,oD,Nh]}),s=vu("authTokenSyncURL");if(s){const n=xb(s);tD(t,n,()=>n(t.currentUser)),eD(t,a=>n(a))}const i=xd("auth");return i&&Uv(t,`http://${i}`),t}mb("Browser");const Si={"operation-not-allowed":G.providerNotAllowed,"user-disabled":G.userDisable,"provider-already-linked":G.providerAlreadyLinked,"credential-already-in-use":G.credentialAlreadyInUse,"invalid-verification-code":G.wrongOptCode,"invalid-verification-id":G.verification,"invalid-credential":G.invalidCredential,"user-mismatch":G.userMissmatch,"user-not-found":G.userNotFound,"no-such-provider":G.noSuchProvider,canceled:G.userExitManually,"too-many-requests":G.tooManyAttempts,"too-many-attempts":G.tooManyAttempts,"expired-code":G.expiredCode,"account-exists-with-different-credential":G.credentialAlreadyInUse,"invalid-phone-number":G.invalidPhoneNumber};var wb=(r=>(r[r.login=0]="login",r[r.link=1]="link",r[r.reauthenticate=2]="reauthenticate",r[r.phoneUpdate=3]="phoneUpdate",r))(wb||{});class vb{constructor(){o(this,"_auth");po().length===0?go(vo):hn(),this._auth=yb()}async signInWithFacebookSRV(e){try{return await this.signInWithFacebookWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),K.error(`it was an error the error is --> ${t}`),K.error(t.name),re.GI().details=t.name,re.GI().error=Si[t.name]??G.unknown),!1}}async signInWithFacebookWebSRV(e){const t=new Bt;switch(t.addScope("email"),t.setCustomParameters({display:"popup"}),e){case 0:await Wa(this._auth,t);break;case 1:await Ya(this._auth.currentUser,t);break;case 2:await Ha(this._auth.currentUser,t);break}}async signInWithGoogleSRV(e){try{return await this.signInWithGoogleWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),K.error(`it was an error the error is --> ${t}`),K.error(t.name),re.GI().details=t.name,re.GI().error=Si[t.name]??G.unknown),!1}}async signInWithGoogleWebSRV(e){const t=new Ft;switch(t.addScope("email"),t.addScope("profile"),t.setCustomParameters({login_hint:"user@example.com"}),e){case 0:await Wa(this._auth,t);break;case 1:await Ya(this._auth.currentUser,t);break;case 2:await Ha(this._auth.currentUser,t);break}}async signInWithAppleSRV(e){try{return await this.signInWithAppleWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),K.error(`it was an error the error is --> ${t}`),K.error(t.name),re.GI().details=t.name,re.GI().error=Si[t.name]??G.unknown),!1}}async signInWithAppleWebSRV(e){const t=new Zs("apple.com");switch(t.addScope("email"),t.addScope("name"),e){case 0:await Wa(this._auth,t);break;case 1:await Ya(this._auth.currentUser,t);break;case 2:await Ha(this._auth.currentUser,t);break}}async signInWithOtpSRV({loginType:e,verificationId:t,otp:s,autocredential:i}){const n=i??Rr.credential(t,s);try{switch(e){case 0:await Zv(this._auth,n);break;case 1:await Qv(this._auth.currentUser,n);break;case 2:await Kv(this._auth.currentUser,n);break;case 3:await kD(this._auth.currentUser,n);break}return!0}catch(a){return console.error(`Error: ${a}`),a instanceof Error&&(console.error(`Error: ${a}`),K.error(`it was an error the error is --> ${a}`),K.error(a.name),re.GI().details=a.name,re.GI().error=Si[a.name]??G.unknown),!1}}get isLoggedInSRV(){return this._auth.currentUser!=null}onAuthUserStateChangedSRV(e){return rD(this._auth,e)}async updateUserNameSRV(e){try{await jv(this._auth.currentUser,{displayName:e}),await this._auth.currentUser.reload()}catch(t){throw t instanceof Error&&re.GI().addError({error:G.updateDisplayName,details:t.toString()}),t}}userConnectedOnlyLocallySRV(){return this.isLoggedInSRV&&this._auth.currentUser.displayName===null}get lastLoginDateSRV(){var e;return(e=this._auth.currentUser)==null?void 0:e.metadata.lastSignInTime}get userIdSRV(){if(this._auth.currentUser!=null){const e=this._auth.currentUser.displayName;return e!==null&&e.includes("&&")&&e.includes("+")?this.userPhoneSRV:this._auth.currentUser.uid}return""}get userDataSRV(){return this._auth.currentUser}async userClaimsSRV(){return this._auth.currentUser===null?null:(await this._auth.currentUser.getIdToken(!0),(await this._auth.currentUser.getIdTokenResult()).claims)}get userPhoneSRV(){if(this._auth.currentUser!==null){const t=this._auth.currentUser.displayName.split("&&")[1];return this._auth.currentUser.phoneNumber.replace(t,`${t}-`)}return""}get existsProvidersSRV(){if(this._auth.currentUser===null)return new Set;const e=new Set;return this._auth.currentUser.providerData.forEach(t=>{e.add(t.providerId)}),e}async deleteUserSRV(){if(this._auth.currentUser===null)return!1;try{return await this._auth.currentUser.delete(),!0}catch{return!1}}async unlinkProviderSRV({providerId:e}){try{return Jv(this._auth.currentUser,e),!0}catch{return!1}}async reloadUserSRV(){this._auth.currentUser!==null&&await this._auth.currentUser.reload()}async logoutSRV(){try{return await this._auth.signOut(),!this.isLoggedInSRV}catch{return!1}}}class Db extends vb{constructor(){super()}async signInWithGoogle(e){return await this.signInWithGoogleSRV(e)}async signInWithApple(e){return await this.signInWithAppleSRV(e)}async signInWithFacebook(e){return await this.signInWithFacebookSRV(e)}onAuthUserStateChanged(e){return this.onAuthUserStateChangedSRV(e)}async signInWithOtp({loginType:e,verificationId:t,otp:s,autocredential:i}){return await this.signInWithOtpSRV({loginType:e,verificationId:t,otp:s,autocredential:i})}async logout(){return await this.logoutSRV()}async unlinkProvider({providerId:e}){return await this.unlinkProviderSRV({providerId:e})}async deleteUser(){return await this.deleteUserSRV()}async reloadUser(){await this.reloadUserSRV()}userConnectedOnlyLocally(){return this.userConnectedOnlyLocallySRV()}async updateUserName({name:e}){try{return await this.updateUserNameSRV(e),!0}catch(t){return console.error(`Error occurred while saving user name --> ${t}`),!1}}get isLoggedIn(){return this.isLoggedInSRV}get existsProviders(){return this.existsProvidersSRV}get userData(){return this.userDataSRV}get userId(){return this.userIdSRV}get lastLoginDate(){return this.lastLoginDateSRV}async userClaims(){return await this.userClaimsSRV}}async function bb(){var i,n;if(We.currentBusinesssId!==""){let a=0;for(;De.GI().workers.isEmpty&&a<10;)a++,await new Promise(c=>setTimeout(c,100))}const r={},e=zt.GI().user,t=new Map,s=e.bookings.recurrence||{};for(const a of Object.values(e.bookings.futureBookings))for(const[c,u]of Object.entries(a))t.set(c,u);for(const[a,c]of Object.entries(s)){if(c.buisnessId!==De.GI().business.businessId||c.status!==Be.approved||c.recurrenceEvent==null)continue;const u=De.GI().workers[c.workerId];if(u==null)continue;const l=u.notifications.remindersTypes.size===0?0:Math.max(...Object.values(u.notifications.remindersTypes));let h=new Date(new Date().getFullYear(),new Date().getMonth(),new Date().getDay(),c.bookingDate.getHours(),c.bookingDate.getMinutes());for(;h<se(new Date,new Y({minutes:l}));){if(h<new Date){h=new Date(h.getTime()+24*60*60*1e3);continue}if(!c.recurrenceEvent.isAccureInDate({date:h})){h=new Date(h.getTime()+24*60*60*1e3);continue}const d=Xe.fromBooking(c);d.bookingDate=h;let f=!1;Sr(h,Vc)<new Date&&(f=!0,r[i=Ue.regular]??(r[i]=[]),r[Ue.regular].push(d));for(const[p,m]of c.remindersTypes)Ue.regular===p&&f||u.notifications.remindersTypes.get(p)!=null&&(Sr(h,new Y({minutes:u.notifications.remindersTypes.get(p)}))<new Date||(r[p]||(r[p]=[]),r[p].push(d)));h=se(h,new Y({days:1}))}}for(const[a,c]of t){if(c.buisnessId!==De.GI().business.businessId||c.status!==Be.approved)continue;const u=De.GI().workers[c.workerId];if(u==null||c.bookingDate<new Date)continue;let l=!1;Sr(c.bookingDate,Vc)<new Date&&(l=!0,r[n=Ue.regular]||(r[n]=[]),r[Ue.regular].push(c));for(const[h,d]of c.remindersTypes)u.notifications.remindersTypes.get(h)!=null&&(Ue.regular===h&&l||Sr(c.bookingDate,new Y({minutes:u.notifications.remindersTypes.get(h)}))>=new Date)}return r}const Cr=class Cr{constructor(){o(this,"user",new ss({}));o(this,"verificationRepo",new Db);o(this,"userRepo",new nv);o(this,"userDoc")}static GI(){return Cr.instance||(Cr.instance=new Cr),Cr.instance}get getPermission(){return 0}isDeveloper(){return this.isConnected?We.developers.hasOwnProperty(this.user.id.replace("+","")):!1}get isConnected(){return this.verificationRepo.isLoggedIn}get userId(){try{return this.verificationRepo.userId}catch{return""}}async setupUser({newUserId:e="",logoutIfDosentExist:t=!1}){var s;try{return Pa.set(!1),K.info(`The user id is -> ${e}`),e.length<5?(await this.verificationRepo.logout(),!0):(this.userDoc===void 0&&(this.userDoc=await this.userRepo.getDocSRV({path:rt,docId:e})),!t&&(this.userDoc===void 0||!this.userDoc.exists())?(this.userDoc=void 0,!0):(this.user=ss.fromUserDocJson((s=this.userDoc)==null?void 0:s.data()),this.startPublicDataListening(),to.set(this.user),Pa.set(!0),!0))}catch(i){return this.userDoc=void 0,i instanceof Error&&(K.error(`Error while setting up the user --> ${i}`),re.GI().addError({details:i.toString()})),!1}}async startPublicDataListening(){this.isConnected&&(this.user.userPublicDataListener=this.userRepo.docListener({path:`${rt}/${this.user.id}/${qe}`,docId:lt,onChanged:async e=>{try{e.exists()&&(this.user.setUserPublicData(e.data()),await this.loadBookingsDocs(this.user.userPublicData.bookingsDocsToLoad),K.info("Getting new user data from database"),this.user.userPublicData.reminders={},We.currentBusinesssId!==""&&(this.user.userPublicData.reminders=await bb()))}catch(t){console.error(`Error in startPublicDataListening: ${t}`)}}}))}async loadBookingsDocs(e){const t=[];e.forEach(s=>{t.push(this.loadBookingDoc(s))}),await Promise.all(t)}async logout(){return this.verificationRepo.logout().then(async e=>(e&&(this.user=new ss({}),to.set(this.user),Pa.set(!1)),e))}async loadBookingDoc(e){try{const t=await this.userRepo.getDocSRV({path:js.GI().userBookingsPathByUser(this.user.id),docId:e});e===Bu?this.user.bookings.setRecurrence((t==null?void 0:t.data())||{}):this.user.bookings.setMonth((t==null?void 0:t.data())||{},e)}catch(t){K.error(`Error loading booking doc ${e}: ${t}`)}}};o(Cr,"instance");let zt=Cr;const Ne=fi(),_r=class _r{static initializeBookingMaker({isUpdate:e=!1}){const t={workerId:void 0,showVerificationAlert:!1,services:{},date:void 0,isUpdate:e,currentPaymentType:void 0,currentCurrencyCode:void 0,pickMultipleServices:!1,hasMultiTreatment:!1,isBookingWithPaymentUpdate:!1,currentStep:1,isMultiEvent:!1};Ne.set(t)}static get worker(){const e=xt(Ne);return De.GI().workers[e.workerId??""]??new ri({})}static setWorkerId(e){const t=xt(Ne);if(e===t.workerId){t.currentStep+=1,Ne.set(t);return}De.GI().cancelAllWorkersRegularListenings();const s=De.GI().workers[e];s!=null&&De.GI().startWorkerListening(s);const i=De.GI().workers[e];i!=null&&(t.showVerificationAlert=yu(i)),t.workerId=e,t.currentStep+=1,Ne.set(t)}static updateWorkerData(e){const t=xt(Ne);K.debug("Getting new data for the worker");const s={...t.services};Object.keys(s).forEach(n=>{e.hasTreatemnt(n)||delete t.services[n]}),e.treatmentsSubjects.forEach((n,a)=>{n.treatments.forEach((c,u)=>{if(t.services.hasOwnProperty(c.id)){const l=t.services[c.id].count,h=Re.fromTreatment(c);h.count=l,t.services[c.id]=h}})});const i=De.GI().workers[t.workerId];i!==null&&(t.showVerificationAlert=yu(i)),Ne.set(t)}static get bookingFromValues(){const e=xt(Ne),t=new Xe({workerId:e.workerId});t.bookingDate=e.date??new Date(0);const s=De.GI().workers[e.workerId??""];if(s==null)return t;const i=new Map;let n=0;return Object.entries(e.services).forEach(([a,c])=>{i.set(n.toString(),c),n+=1}),t.treatments=i,t}static onTapService(e){const t=xt(Ne);if(t.isBookingWithPaymentUpdate&&!t.services.hasOwnProperty(e.id)){sr({text:W("cantEditTreatmentOnPaymentBooking"),status:"warning"});return}if(t.isUpdate&&e.amountInAdvance>0){sr({text:W("cantChoosePaymentServiceOnBookingUpdate"),status:"warning"});return}t.services.hasOwnProperty(e.id)?t.pickMultipleServices&&this.removeService(t,e):e.isMulti?this.addMultiService(t,e):this.addService(t,e)}static addMultiService(e,t){if(e.pickMultipleServices&&Object.keys(e.services).length>0){sr({text:W(e.hasMultiTreatment?"noMultiWithMulti":"noMultiWithRegular",!1),status:"warning"});return}e.services={[t.id]:t};const s=De.GI().workers[e.workerId??""];s!==void 0&&(De.GI().startTimesListening(s,t.isMulti,t.amountInAdvance>0),e.currentStep+=1,Ne.set(e))}static removeService(e,t){Object.keys(e.services).length===1&&(e.currentCurrencyCode=void 0,e.currentPaymentType=void 0),e.services[t.id].count=1,delete e.services[t.id],Ne.set(e)}static addService(e,t){let s=0;Object.values(e.services).forEach(n=>{s+=n.count});const i=De.GI().workers[e.workerId??""];if(i!==void 0){if(e.pickMultipleServices&&e.hasMultiTreatment){sr({text:W("noMultiWithRegular"),status:"warning"});return}if(s>=i.maxTreatments){sr({text:W("userMaxTreatments").replace("AMOUNT",i.maxTreatments.toString()),status:"warning"});return}if(e.pickMultipleServices&&t.amountInAdvance>0&&t.paymentType!=null&&t.paymentType!=e.currentPaymentType&&e.currentPaymentType!=null){sr({text:W("cantPickDiffrentPaymentType"),status:"warning"});return}if(e.pickMultipleServices&&t.price.currency.code!=e.currentCurrencyCode&&e.currentCurrencyCode!=null){sr({text:W("cantPickDiffrentCurrencies"),status:"warning"});return}De.GI().startTimesListening(i,t.isMulti,t.amountInAdvance>0),e.currentCurrencyCode=t.price.currency.code,t.amountInAdvance>0&&(e.currentPaymentType=t.paymentType),e.pickMultipleServices?e.services[t.id]=t:(e.services={[t.id]:t},e.currentStep+=1),Ne.set(e)}}static onRemoveTreatmentCount(e){var s;const t=xt(Ne);t.services[e.id]!==void 0&&(((s=t.services[e.id])==null?void 0:s.count)===1?this.removeService(t,e):(t.services[e.id].count=-1,Ne.set(t)))}static onAddTreatmentCount(e){const t=xt(Ne);if(t.services[e.id]!=null)return;let s=0;if(Object.entries(t.services).forEach(([i,n])=>{if(t.services.value.hasOwnProperty(i)){const a=t.services[i];s+=a.count}}),s>=_r.worker.maxTreatments){sr({text:W("userMaxTreatments").replaceAll("AMOUNT",_r.worker.maxTreatments.toString()),status:"warning"});return}Ne.set(t)}};o(_r,"timePickerObjects",[]),o(_r,"visibleDates",[]),o(_r,"firstDateToShow");let Xr=_r;function yu(r){const e=new Xe({});return e.userFcms=zt.GI().user.fcmsTokens,e.isVerifiedPhone=!0,(cl({booking:e,worker:r})==z.message||r.mustVerifyPhone)&&!zt.GI().user.isVerifiedPhone}const Xs=class Xs{constructor(){o(this,"defaultTheme","darkIos");o(this,"currentKeyTheme",null);o(this,"themeCauseMainBuilt",!1);o(this,"currentThemes",{...tl});o(this,"currentBusinessTheme",null)}static GI(){return Xs._singleton}async changeTheme(e,{needOverlayHandling:t=!0,ovveride:s=!1,needWaitOverlay:i=!1}={}){var a;const n=this.currentThemes[e];if(n==null||this.currentBusinessTheme==null||!n.isEqual(this.currentBusinessTheme)||s){switch((a=this.currentThemes[e])==null?void 0:a.brightness){case Ka.light:De.GI().businessIcon="darkShopIcon";break;case Ka.dark:De.GI().businessIcon="lightShopIcon";break;default:De.GI().businessIcon="lightShopIcon";break}return this.themeCauseMainBuilt=!0,this.currentKeyTheme=e,this.currentThemes.hasOwnProperty(e)&&(this.currentBusinessTheme=this.currentThemes[e]),!0}return!1}};o(Xs,"_singleton",new Xs);let mo=Xs,kb=fi();function Ib(r,e){const t=e.split("--")[0];return We.developers.hasOwnProperty(t)&&(r=We.developers[t].businessProductId),r.includes("basic")?Ar.basic:r.includes("landing")?Ar.landingPage:r.includes("advanced")?Ar.advanced:r.includes("golden")?Ar.golden:Ar.trial}const Nt=class Nt{constructor(){o(this,"generalRepo",new oh);o(this,"business",new ps({businessId:"",design:new Ut}));o(this,"workers",{});o(this,"businessIcon","");o(this,"businessSubtype",Ar.trial)}static GI(){return Nt.instance||(Nt.instance=new Nt),Nt.instance}async initSettings(e,{fromLoading:t=!1}={}){try{this.workers={},We.currentBusinesssId=e;const s=await Promise.all([this._loadSettingsDoc(e),this._loadBusinessWorkers(e)]);return this.businessSubtype=Ib(this.business.productId,e),s.length>0&&s[0]===!1?!1:(this.makeBusinessDataListener(),!0)}catch(s){return K.error(`Error while initializing settings --> ${s}`),!1}}async loadBusiness(e,t,{fromLoading:s=!1,fromSearch:i=!1}={}){try{const n=await this.initSettings(e,{fromLoading:s});return mo.GI().themeCauseMainBuilt,kb.set(Nt.GI().workers),kd.set(Nt.GI().business),!0}catch{return!1}}async _loadSettingsDoc(e){try{const t=await this.generalRepo.getDocRepo({path:Ge,docId:e});return t===void 0||!t.exists||t.data()===null?(re.GI().error=G.notFoundBusiness,!1):(this.business=ps.fromJson(t.data(),e),!0)}catch{return!1}}async _loadBusinessWorkers(e){try{const t=`${Ge}/${e}/${ut}`,s=await this.generalRepo.getAllDocsInsideCollection(t);return s!==null&&s.forEach(i=>{const n=ri.fromWorkerDocJson(i);zt.GI().getPermission>1||(n.id,zt.GI().user.id),this.workers[n.id]=n}),!0}catch(t){return t instanceof Error&&(K.error(`Error while loading the business workers docs --> ${t}`),K.error(t.stack)),!0}}async makeBusinessDataListener(){const e=js.GI().getBusinessDataPath(We.currentBusinesssId);this.business.businessData.listener=this.generalRepo.listenToChild({childPath:e,callback:t=>{t.exists()&&this.business.businessData.setBusinessData(t)}})}startWorkerListening(e){try{e.workerDocListner||(e.workerDocListner=this.generalRepo.docListenerRepo({path:`${Ge}/${this.business.businessId}/${ut}`,docId:e.id,onChanged:t=>{this.updateWorkerObj(t,e.id)}})),e.publicCustomers.publicCustomersData===null&&this.generalRepo.getDocRepo({path:`${Ge}/${We.currentBusinesssId}/${ut}/${e.id}/${qe}`,docId:jd}).then(t=>{t.exists()&&t.data()!==null&&e.publicCustomers.setPublicCustomersDataJson(t.data())})}catch(t){console.error(`Error while resuming the Worker listener --> ${t}`)}}updateWorkerObj(e,t){if(e.exists()){if(!Object.keys(this.workers).includes(t))return;this.workers[t].setFromWorkerDoc(e.data()),Xr.updateWorkerData(this.workers[t])}else{delete this.workers[t];return}K.info(`Get new worker for the current worker updateWorkerObj--> ${t}`)}cancelAllWorkersRegularListenings(e=!1){Object.values(this.workers).map(async t=>{try{(e||t.id!==zt.GI().user.id&&zt.GI().getPermission<2)&&(t.workerDocListner!=null&&(t.workerDocListner(),t.workerDocListner=void 0),t.recurrence.listener!=null&&(t.recurrence.listener(),t.recurrence.listener=void 0)),t.workerPublicData.listener!=null&&(t.workerPublicData.listener(),t.workerPublicData.listener=void 0),t.multiEventsTimes.listener!=null&&(t.multiEventsTimes.listener(),t.multiEventsTimes.listener=void 0),K.info("Workers Listenings have canceled")}catch{console.error("Error while canceling the Workers listeners")}})}startTimesListening(e,t,s){e.workerPublicData.listener===void 0&&(e.workerPublicData.listener=this.generalRepo.docListenerRepo({path:`${Ge}/${this.business.businessId}/${ut}/${e.id}/${qe}`,docId:lt,onChanged:i=>{this.updateWorkerPublicData(i,e.id)}})),e.recurrence.listener===void 0&&e.hasRecurrenceEvents&&e.isCustomersNeedRecurrence&&(e.recurrence.listener=this.generalRepo.docListenerRepo({path:`${Ge}/${this.business.businessId}/${ut}/${e.id}/${qe}`,docId:tf,onChanged:i=>{this.updateReccurenceEvents(i,e.id)}})),e.multiEventsTimes.listener===void 0&&t&&(e.multiEventsTimes.listener=this.generalRepo.docListenerRepo({path:`${Ge}/${this.business.businessId}/${ut}/${e.id}/${qe}`,docId:rf,onChanged:i=>{this.updateMultiEventsTimes(i,e.id)}}))}updateWorkerPublicData(e,t){this.workers[t]!==void 0&&(!e.exists()||e.data()===void 0||(this.workers[t].workerPublicData.setWorkerPublicData(e.data()),Xr.updateWorkerData(this.workers[t]),K.debug(`Get new workerData for the current worker updateWorkerPublicData--> ${t}`)))}updateReccurenceEvents(e,t){this.workers[t]!==void 0&&(!e.exists()||e.data()===void 0||(this.workers[t].recurrence.setRecurrenceEvents(e.data()??{},t,this.business),Xr.updateWorkerData(this.workers[t]),K.debug(`Get new workerData for the current worker updateReccurenceEvents --> ${t}`)))}updateMultiEventsTimes(e,t){this.workers[t]!==void 0&&(!e.exists()||e.data()===void 0||(this.workers[t].multiEventsTimes.setData(e.data()),Xr.updateWorkerData(this.workers[t]),K.debug(`Get new workerData for the current worker updateReccurenceEvents --> ${t}`)))}};o(Nt,"instance");let De=Nt;export{zb as $,el as A,De as B,yp as C,Y as D,G as E,Fc as F,te as G,oh as H,Sb as I,Gs as J,Nb as K,wb as L,Mb as M,Vs as N,Pb as O,rv as P,vr as Q,Ob as R,sr as S,mo as T,zt as U,Db as V,Yb as W,K as X,qd as Y,vo as Z,Be as _,Rb as a,Jb as a0,or as a1,Zb as a2,$b as a3,Ce as a4,mf as a5,Us as a6,tl as a7,ac as a8,Kb as a9,kb as aa,Hb as ab,Ne as ac,Xr as ad,Yw as ae,Gb as af,qb as ag,Xe as ah,dr as ai,Hw as aj,yg as ak,xs as al,Qb as am,uf as an,zc as ao,Tp as ap,Ub as b,Wb as c,Bb as d,Fb as e,nv as f,Lb as g,Lr as h,Pa as i,re as j,ss as k,rt as l,Vb as m,se as n,qe as o,gt as p,lt as q,hs as r,Ge as s,W as t,to as u,We as v,Ja as w,js as x,ev as y,Je as z};
