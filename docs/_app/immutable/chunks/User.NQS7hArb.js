var ec=Object.defineProperty;var tc=(i,e,t)=>e in i?ec(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var o=(i,e,t)=>(tc(i,typeof e!="symbol"?e+"":e,t),t);import{w as rc}from"./index.-wxy4CfO.js";import{T as dt,r as Nn,b as lo,c as ic,d as nc,_ as Os,C as Rs,e as sc,S as Nr,f as ge,E as qn,h as ac,L as fo,j as De,k as mo,l as oc,a as gi,m as cc,F as Gn,n as uc,q as Sr,o as hc,p as lc,s as dc,g as Yn,i as Jn,t as fc,u as xt,v as mc,w as Bi,x as pc,y as Ls,z as xc,A as gc,B as wc,D as vc,G as pe,H as ve,I as yc,J as Us,K as Dc,M as _i,N as Hr,O as bc,P as kc,Q as Ic}from"./index.esm2017.uYy6jfro.js";import{b as Kn,d as Cc,e as z,g as po}from"./_commonjsHelpers.Y1uXSML9.js";const Qn={apiKey:"AIzaSyCSIQHCC23Z7ul639fD8JLMHu4yN77_0VA",authDomain:"managementsystemapp-c1fda.firebaseapp.com",databaseURL:"https://managementsystemapp-c1fda-default-rtdb.europe-west1.firebasedatabase.app",projectId:"managementsystemapp-c1fda",storageBucket:"managementsystemapp-c1fda.appspot.com",messagingSenderId:"670820779934",appId:"1:670820779934:web:fdcf77a952b59c3090788f",measurementId:"G-WP8J044JN9"},Sn={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function Fn(i,e,t,r=!1){const n=String(e),s=(c,h)=>`\x1B[${h[0]}m${c}\x1B[${h[1]}m`,a=(c,h)=>h!=null&&typeof h=="string"?s(c,Sn[h]):h!=null&&Array.isArray(h)?h.reduce((l,d)=>a(l,d),c):h!=null&&h[c.trim()]!=null?a(c,h[c.trim()]):h!=null&&h["*"]!=null?a(c,h["*"]):c,u=null;return n.replace(/{{(.+?)}}/g,(c,h)=>{var d;const l=t[h]!=null?String(t[h]):r?"":c;return i.stylePrettyLogs?a(l,((d=i==null?void 0:i.prettyLogStyles)==null?void 0:d[h])??u)+s("",Sn.reset):l})}function Ee(i,e=2,t=0){return i!=null&&isNaN(i)?"":(i=i!=null?i+t:i,e===2?i==null?"--":i<10?"0"+i:i.toString():i==null?"---":i<10?"00"+i:i<100?"0"+i:i.toString())}function Ac(i){return{href:i.href,protocol:i.protocol,username:i.username,password:i.password,host:i.host,hostname:i.hostname,port:i.port,pathname:i.pathname,search:i.search,searchParams:[...i.searchParams].map(([e,t])=>({key:e,value:t})),hash:i.hash,origin:i.origin}}function xo(i){const e=new Set;return JSON.stringify(i,(t,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return r})}function xe(i,e){const t={seen:[],stylize:go};return e!=null&&Do(t,e),Lt(t.showHidden)&&(t.showHidden=!1),Lt(t.depth)&&(t.depth=2),Lt(t.colors)&&(t.colors=!0),Lt(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=Tc),ei(t,i,t.depth)}xe.colors=Sn;xe.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Ec(i){return typeof i=="boolean"}function Lt(i){return i===void 0}function go(i){return i}function Tc(i,e){var r,n,s,a;const t=xe.styles[e];return t!=null&&((n=(r=xe==null?void 0:xe.colors)==null?void 0:r[t])==null?void 0:n[0])!=null&&((a=(s=xe==null?void 0:xe.colors)==null?void 0:s[t])==null?void 0:a[1])!=null?"\x1B["+xe.colors[t][0]+"m"+i+"\x1B["+xe.colors[t][1]+"m":i}function Vr(i){return typeof i=="function"}function wo(i){return typeof i=="string"}function Pc(i){return typeof i=="number"}function vo(i){return i===null}function yo(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function Ni(i){return wi(i)&&Xn(i)==="[object RegExp]"}function wi(i){return typeof i=="object"&&i!==null}function Si(i){return wi(i)&&(Xn(i)==="[object Error]"||i instanceof Error)}function Ws(i){return wi(i)&&Xn(i)==="[object Date]"}function Xn(i){return Object.prototype.toString.call(i)}function Bc(i){const e={};return i.forEach(t=>{e[t]=!0}),e}function _c(i,e,t,r,n){const s=[];for(let a=0,u=e.length;a<u;++a)yo(e,String(a))?s.push(Mn(i,e,t,r,String(a),!0)):s.push("");return n.forEach(a=>{a.match(/^\d+$/)||s.push(Mn(i,e,t,r,a,!0))}),s}function Fi(i){return"["+Error.prototype.toString.call(i)+"]"}function ei(i,e,t=0){if(i.customInspect&&e!=null&&Vr(e)&&(e==null?void 0:e.inspect)!==xe&&!(e!=null&&e.constructor&&(e==null?void 0:e.constructor.prototype)===e)){if(typeof e.inspect!="function"&&e.toString!=null)return e.toString();let l=e==null?void 0:e.inspect(t,i);return wo(l)||(l=ei(i,l,t)),l}const r=ct(i,e);if(r)return r;let n=Object.keys(e);const s=Bc(n);try{i.showHidden&&Object.getOwnPropertyNames&&(n=Object.getOwnPropertyNames(e))}catch{}if(Si(e)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return Fi(e);if(n.length===0)if(Vr(i.stylize)){if(Vr(e)){const l=e.name?": "+e.name:"";return i.stylize("[Function"+l+"]","special")}if(Ni(e))return i.stylize(RegExp.prototype.toString.call(e),"regexp");if(Ws(e))return i.stylize(Date.prototype.toISOString.call(e),"date");if(Si(e))return Fi(e)}else return e;let a="",u=!1,c=[`{
`,`
}`];if(Array.isArray(e)&&(u=!0,c=[`[
`,`
]`]),Vr(e)&&(a=" [Function"+(e.name?": "+e.name:"")+"]"),Ni(e)&&(a=" "+RegExp.prototype.toString.call(e)),Ws(e)&&(a=" "+Date.prototype.toUTCString.call(e)),Si(e)&&(a=" "+Fi(e)),n.length===0&&(!u||e.length==0))return c[0]+a+c[1];if(t<0)return Ni(e)?i.stylize(RegExp.prototype.toString.call(e),"regexp"):i.stylize("[Object]","special");i.seen.push(e);let h;return u?h=_c(i,e,t,s,n):h=n.map(l=>Mn(i,e,t,s,l,u)),i.seen.pop(),Nc(h,a,c)}function Mn(i,e,t,r,n,s){let a,u,c={value:void 0};try{c.value=e[n]}catch{}try{Object.getOwnPropertyDescriptor&&(c=Object.getOwnPropertyDescriptor(e,n)||c)}catch{}if(c.get?c.set?u=i.stylize("[Getter/Setter]","special"):u=i.stylize("[Getter]","special"):c.set&&(u=i.stylize("[Setter]","special")),yo(r,n)||(a="["+n+"]"),u||(i.seen.indexOf(c.value)<0?(vo(t)?u=ei(i,c.value,void 0):u=ei(i,c.value,t-1),u.indexOf(`
`)>-1&&(s?u=u.split(`
`).map(h=>"  "+h).join(`
`).substr(2):u=`
`+u.split(`
`).map(h=>"   "+h).join(`
`))):u=i.stylize("[Circular]","special")),Lt(a)){if(s&&n.match(/^\d+$/))return u;a=JSON.stringify(""+n),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=i.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,"\\'").replace(/(^"|"$)/g,"'"),a=i.stylize(a,"string"))}return a+": "+u}function ct(i,e){if(Lt(e))return i.stylize("undefined","undefined");if(wo(e)){const t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\\'")+"'";return i.stylize(t,"string")}if(Pc(e))return i.stylize(""+e,"number");if(Ec(e))return i.stylize(""+e,"boolean");if(vo(e))return i.stylize("null","null")}function Nc(i,e,t){return t[0]+(e===""?"":e+`
`)+"  "+i.join(`,
  `)+" "+t[1]}function Do(i,e){if(!e||!wi(e))return i;const t={...i},r={...e},n=Object.keys(e);let s=n.length;for(;s--;)t[n[s]]=r[n[s]];return i}function Sc(i,...e){const t={seen:[],stylize:go};i!=null&&Do(t,i);const r=e[0];let n=0,s="",a="";if(typeof r=="string"){if(e.length===1)return r;let u,c=0;for(let h=0;h<r.length-1;h++)if(r.charCodeAt(h)===37){const l=r.charCodeAt(++h);if(n+1!==e.length){switch(l){case 115:{const d=e[++n];typeof d=="number"||typeof d=="bigint"?u=ct(t,d):typeof d!="object"||d===null?u=String(d):u=xe(d,{...i,compact:3,colors:!1,depth:0});break}case 106:u=xo(e[++n]);break;case 100:{const d=e[++n];typeof d=="bigint"?u=ct(t,d):typeof d=="symbol"?u="NaN":u=ct(t,d);break}case 79:u=xe(e[++n],i);break;case 111:u=xe(e[++n],{...i,showHidden:!0,showProxy:!0,depth:4});break;case 105:{const d=e[++n];typeof d=="bigint"?u=ct(t,d):typeof d=="symbol"?u="NaN":u=ct(t,parseInt(u));break}case 102:{const d=e[++n];typeof d=="symbol"?u="NaN":u=ct(t,parseInt(d));break}case 99:n+=1,u="";break;case 37:s+=r.slice(c,h),c=h+1;continue;default:continue}c!==h-1&&(s+=r.slice(c,h-1)),s+=u,c=h+1}else l===37&&(s+=r.slice(c,h),c=h+1)}c!==0&&(n++,a=" ",c<r.length&&(s+=r.slice(c)))}for(;n<e.length;){const u=e[n];s+=a,s+=typeof u!="string"?xe(u,i):u,a=" ",n++}return s}const Fc={getCallerStackFrame:bo,getErrorTrace:ko,getMeta:Rc,transportJSON:Wc,transportFormatted:Uc,isBuffer:Hc,isError:Co,prettyFormatLogObj:Lc,prettyFormatErrorObj:Ao};var ho;const Mc={runtime:[typeof window,typeof document].includes("undefined")?"Generic":"Browser",browser:(ho=globalThis==null?void 0:globalThis.navigator)==null?void 0:ho.userAgent},Oc=/(?:(?:file|https?|global code|[^@]+)@)?(?:file:)?((?:\/[^:/]+){2,})(?::(\d+))?(?::(\d+))?/;function Rc(i,e,t,r,n,s){return Object.assign({},Mc,{name:n,parentNames:s,date:new Date,logLevelId:i,logLevelName:e,path:r?void 0:bo(t)})}function bo(i,e=Error()){var t,r,n;return Io((n=(r=(t=e==null?void 0:e.stack)==null?void 0:t.split(`
`))==null?void 0:r.filter(s=>!s.includes("Error: ")))==null?void 0:n[i])}function ko(i){var e,t,r;return(r=(t=(e=i==null?void 0:i.stack)==null?void 0:e.split(`
`))==null?void 0:t.filter(n=>!n.includes("Error: ")))==null?void 0:r.reduce((n,s)=>(n.push(Io(s)),n),[])}function Io(i){var r;const e=(r=globalThis==null?void 0:globalThis.location)==null?void 0:r.origin,t={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(i!=null){const n=i.match(Oc);if(n){t.filePath=n[1].replace(/\?.*$/,""),t.fullFilePath=`${e}${t.filePath}`;const s=t.filePath.split("/");t.fileName=s[s.length-1],t.fileLine=n[2],t.fileColumn=n[3],t.filePathWithLine=`${t.filePath}:${t.fileLine}`,t.fileNameWithLine=`${t.fileName}:${t.fileLine}`}}return t}function Co(i){return i instanceof Error}function Lc(i,e){return i.reduce((t,r)=>(Co(r)?t.errors.push(Ao(r,e)):t.args.push(r),t),{args:[],errors:[]})}function Ao(i,e){const t=ko(i).map(n=>Fn(e,e.prettyErrorStackTemplate,{...n},!0)),r={errorName:` ${i.name} `,errorMessage:Object.getOwnPropertyNames(i).reduce((n,s)=>(s!=="stack"&&n.push(i[s]),n),[]).join(", "),errorStack:t.join(`
`)};return Fn(e,e.prettyErrorTemplate,r)}function Uc(i,e,t,r){const n=(t.length>0&&e.length>0?`
`:"")+t.join(`
`);r.prettyInspectOptions.colors=r.stylePrettyLogs,console.log(i+Sc(r.prettyInspectOptions,...e)+n)}function Wc(i){console.log(xo(i))}function Hc(i){return!1}class Vc{constructor(e,t,r=4){var n,s,a,u,c,h,l,d;this.logObj=t,this.stackDepthLevel=r,this.runtime=Fc,this.settings={type:(e==null?void 0:e.type)??"pretty",name:e==null?void 0:e.name,parentNames:e==null?void 0:e.parentNames,minLevel:(e==null?void 0:e.minLevel)??0,argumentsArrayName:e==null?void 0:e.argumentsArrayName,hideLogPositionForProduction:(e==null?void 0:e.hideLogPositionForProduction)??!1,prettyLogTemplate:(e==null?void 0:e.prettyLogTemplate)??"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	{{filePathWithLine}}{{nameWithDelimiterPrefix}}	",prettyErrorTemplate:(e==null?void 0:e.prettyErrorTemplate)??`
{{errorName}} {{errorMessage}}
error stack:
{{errorStack}}`,prettyErrorStackTemplate:(e==null?void 0:e.prettyErrorStackTemplate)??`  â€¢ {{fileName}}	{{method}}
	{{filePathWithLine}}`,prettyErrorParentNamesSeparator:(e==null?void 0:e.prettyErrorParentNamesSeparator)??":",prettyErrorLoggerNameDelimiter:(e==null?void 0:e.prettyErrorLoggerNameDelimiter)??"	",stylePrettyLogs:(e==null?void 0:e.stylePrettyLogs)??!0,prettyLogTimeZone:(e==null?void 0:e.prettyLogTimeZone)??"UTC",prettyLogStyles:(e==null?void 0:e.prettyLogStyles)??{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:(e==null?void 0:e.prettyInspectOptions)??{colors:!0,compact:!1,depth:1/0},metaProperty:(e==null?void 0:e.metaProperty)??"_meta",maskPlaceholder:(e==null?void 0:e.maskPlaceholder)??"[***]",maskValuesOfKeys:(e==null?void 0:e.maskValuesOfKeys)??["password"],maskValuesOfKeysCaseInsensitive:(e==null?void 0:e.maskValuesOfKeysCaseInsensitive)??!1,maskValuesRegEx:e==null?void 0:e.maskValuesRegEx,prefix:[...(e==null?void 0:e.prefix)??[]],attachedTransports:[...(e==null?void 0:e.attachedTransports)??[]],overwrite:{mask:(n=e==null?void 0:e.overwrite)==null?void 0:n.mask,toLogObj:(s=e==null?void 0:e.overwrite)==null?void 0:s.toLogObj,addMeta:(a=e==null?void 0:e.overwrite)==null?void 0:a.addMeta,addPlaceholders:(u=e==null?void 0:e.overwrite)==null?void 0:u.addPlaceholders,formatMeta:(c=e==null?void 0:e.overwrite)==null?void 0:c.formatMeta,formatLogObj:(h=e==null?void 0:e.overwrite)==null?void 0:h.formatLogObj,transportFormatted:(l=e==null?void 0:e.overwrite)==null?void 0:l.transportFormatted,transportJSON:(d=e==null?void 0:e.overwrite)==null?void 0:d.transportJSON}}}log(e,t,...r){var d,f,x,g,y,w,k,m,p,v,C,I,D,A;if(e<this.settings.minLevel)return;const n=[...this.settings.prefix,...r],s=((d=this.settings.overwrite)==null?void 0:d.mask)!=null?(f=this.settings.overwrite)==null?void 0:f.mask(n):this.settings.maskValuesOfKeys!=null&&this.settings.maskValuesOfKeys.length>0?this._mask(n):n,a=this.logObj!=null?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,u=((x=this.settings.overwrite)==null?void 0:x.toLogObj)!=null?(g=this.settings.overwrite)==null?void 0:g.toLogObj(s,a):this._toLogObj(s,a),c=((y=this.settings.overwrite)==null?void 0:y.addMeta)!=null?(w=this.settings.overwrite)==null?void 0:w.addMeta(u,e,t):this._addMetaToLogObj(u,e,t);let h,l;return((k=this.settings.overwrite)==null?void 0:k.formatMeta)!=null&&(h=(m=this.settings.overwrite)==null?void 0:m.formatMeta(c==null?void 0:c[this.settings.metaProperty])),((p=this.settings.overwrite)==null?void 0:p.formatLogObj)!=null&&(l=(v=this.settings.overwrite)==null?void 0:v.formatLogObj(s,this.settings)),this.settings.type==="pretty"&&(h=h??this._prettyFormatLogObjMeta(c==null?void 0:c[this.settings.metaProperty]),l=l??this.runtime.prettyFormatLogObj(s,this.settings)),h!=null&&l!=null?((C=this.settings.overwrite)==null?void 0:C.transportFormatted)!=null?(I=this.settings.overwrite)==null||I.transportFormatted(h,l.args,l.errors,this.settings):this.runtime.transportFormatted(h,l.args,l.errors,this.settings):((D=this.settings.overwrite)==null?void 0:D.transportJSON)!=null?(A=this.settings.overwrite)==null||A.transportJSON(c):this.settings.type!=="hidden"&&this.runtime.transportJSON(c),this.settings.attachedTransports!=null&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach(_=>{_(c)}),c}attachTransport(e){this.settings.attachedTransports.push(e)}getSubLogger(e,t){var s,a,u;const r={...this.settings,...e,parentNames:((s=this.settings)==null?void 0:s.parentNames)!=null&&((a=this.settings)==null?void 0:a.name)!=null?[...this.settings.parentNames,this.settings.name]:((u=this.settings)==null?void 0:u.name)!=null?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...(e==null?void 0:e.prefix)??[]]};return new this.constructor(r,t??this.logObj,this.stackDepthLevel)}_mask(e){const t=this.settings.maskValuesOfKeysCaseInsensitive!==!0?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map(r=>r.toLowerCase());return e==null?void 0:e.map(r=>this._recursiveCloneAndMaskValuesOfKeys(r,t))}_recursiveCloneAndMaskValuesOfKeys(e,t,r=[]){var n,s;if(r.includes(e))return{...e};if(typeof e=="object"&&e!==null&&r.push(e),this.runtime.isError(e)||this.runtime.isBuffer(e))return e;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Array.isArray(e))return e.map(a=>this._recursiveCloneAndMaskValuesOfKeys(a,t,r));if(e instanceof Date)return new Date(e.getTime());if(e instanceof URL)return Ac(e);if(e!==null&&typeof e=="object"){const a=this.runtime.isError(e)?this._cloneError(e):Object.create(Object.getPrototypeOf(e));return Object.getOwnPropertyNames(e).reduce((u,c)=>{var h;return u[c]=t.includes(((h=this.settings)==null?void 0:h.maskValuesOfKeysCaseInsensitive)!==!0?c:c.toLowerCase())?this.settings.maskPlaceholder:this._recursiveCloneAndMaskValuesOfKeys(e[c],t,r),u},a)}else{if(typeof e=="string"){let a=e;for(const u of((n=this.settings)==null?void 0:n.maskValuesRegEx)||[])a=a.replace(u,((s=this.settings)==null?void 0:s.maskPlaceholder)||"");return a}return e}}_recursiveCloneAndExecuteFunctions(e,t=[]){return this.isObjectOrArray(e)&&t.includes(e)?this.shallowCopy(e):(this.isObjectOrArray(e)&&t.push(e),Array.isArray(e)?e.map(r=>this._recursiveCloneAndExecuteFunctions(r,t)):e instanceof Date?new Date(e.getTime()):this.isObject(e)?Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=Object.getOwnPropertyDescriptor(e,n);if(s){Object.defineProperty(r,n,s);const a=e[n];r[n]=typeof a=="function"?a():this._recursiveCloneAndExecuteFunctions(a,t)}return r},Object.create(Object.getPrototypeOf(e))):e)}isObjectOrArray(e){return typeof e=="object"&&e!==null}isObject(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}shallowCopy(e){return Array.isArray(e)?[...e]:{...e}}_toLogObj(e,t={}){return e=e==null?void 0:e.map(r=>this.runtime.isError(r)?this._toErrorObject(r):r),this.settings.argumentsArrayName==null?e.length===1&&!Array.isArray(e[0])&&this.runtime.isBuffer(e[0])!==!0&&!(e[0]instanceof Date)?t=typeof e[0]=="object"&&e[0]!=null?{...e[0],...t}:{0:e[0],...t}:t={...t,...e}:t={...t,[this.settings.argumentsArrayName]:e},t}_cloneError(e){const t=new e.constructor;return Object.getOwnPropertyNames(e).forEach(r=>{t[r]=e[r]}),t}_toErrorObject(e){return{nativeError:e,name:e.name??"Error",message:e.message,stack:this.runtime.getErrorTrace(e)}}_addMetaToLogObj(e,t,r){return{...e,[this.settings.metaProperty]:this.runtime.getMeta(t,r,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(e){var a,u,c,h,l,d,f,x,g,y,w,k,m,p,v,C,I,D,A,_,b,E;if(e==null)return"";let t=this.settings.prettyLogTemplate;const r={};t.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?t=t.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):this.settings.prettyLogTimeZone==="UTC"?(r.yyyy=((a=e==null?void 0:e.date)==null?void 0:a.getUTCFullYear())??"----",r.mm=Ee((u=e==null?void 0:e.date)==null?void 0:u.getUTCMonth(),2,1),r.dd=Ee((c=e==null?void 0:e.date)==null?void 0:c.getUTCDate(),2),r.hh=Ee((h=e==null?void 0:e.date)==null?void 0:h.getUTCHours(),2),r.MM=Ee((l=e==null?void 0:e.date)==null?void 0:l.getUTCMinutes(),2),r.ss=Ee((d=e==null?void 0:e.date)==null?void 0:d.getUTCSeconds(),2),r.ms=Ee((f=e==null?void 0:e.date)==null?void 0:f.getUTCMilliseconds(),3)):(r.yyyy=((x=e==null?void 0:e.date)==null?void 0:x.getFullYear())??"----",r.mm=Ee((g=e==null?void 0:e.date)==null?void 0:g.getMonth(),2,1),r.dd=Ee((y=e==null?void 0:e.date)==null?void 0:y.getDate(),2),r.hh=Ee((w=e==null?void 0:e.date)==null?void 0:w.getHours(),2),r.MM=Ee((k=e==null?void 0:e.date)==null?void 0:k.getMinutes(),2),r.ss=Ee((m=e==null?void 0:e.date)==null?void 0:m.getSeconds(),2),r.ms=Ee((p=e==null?void 0:e.date)==null?void 0:p.getMilliseconds(),3));const n=this.settings.prettyLogTimeZone==="UTC"?e==null?void 0:e.date:new Date(((v=e==null?void 0:e.date)==null?void 0:v.getTime())-((C=e==null?void 0:e.date)==null?void 0:C.getTimezoneOffset())*6e4);r.rawIsoStr=n==null?void 0:n.toISOString(),r.dateIsoStr=n==null?void 0:n.toISOString().replace("T"," ").replace("Z",""),r.logLevelName=e==null?void 0:e.logLevelName,r.fileNameWithLine=((I=e==null?void 0:e.path)==null?void 0:I.fileNameWithLine)??"",r.filePathWithLine=((D=e==null?void 0:e.path)==null?void 0:D.filePathWithLine)??"",r.fullFilePath=((A=e==null?void 0:e.path)==null?void 0:A.fullFilePath)??"";let s=(_=this.settings.parentNames)==null?void 0:_.join(this.settings.prettyErrorParentNamesSeparator);return s=s!=null&&(e==null?void 0:e.name)!=null?s+this.settings.prettyErrorParentNamesSeparator:void 0,r.name=(e==null?void 0:e.name)!=null||s!=null?(s??"")+(e==null?void 0:e.name):"",r.nameWithDelimiterPrefix=r.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+r.name:"",r.nameWithDelimiterSuffix=r.name.length>0?r.name+this.settings.prettyErrorLoggerNameDelimiter:"",((b=this.settings.overwrite)==null?void 0:b.addPlaceholders)!=null&&((E=this.settings.overwrite)==null||E.addPlaceholders(e,r)),Fn(this.settings,t,r)}}class zc extends Vc{constructor(e,t){const r=typeof window<"u"&&typeof document<"u",n=r?window.chrome!==void 0&&window.CSS!==void 0&&window.CSS.supports("color","green"):!1,s=r?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1;e=e||{},e.stylePrettyLogs=e.stylePrettyLogs&&r&&!n?!1:e.stylePrettyLogs,super(e,t,s?4:5)}log(e,t,...r){return super.log(e,t,...r)}silly(...e){return super.log(0,"SILLY",...e)}trace(...e){return super.log(1,"TRACE",...e)}debug(...e){return super.log(2,"DEBUG",...e)}info(...e){return super.log(3,"INFO",...e)}warn(...e){return super.log(4,"WARN",...e)}error(...e){return super.log(5,"ERROR",...e)}fatal(...e){return super.log(6,"FATAL",...e)}getSubLogger(e,t){return super.getSubLogger(e,t)}}const he=new zc({minLevel:4});var $c=(i=>(i.login="login",i.enter="enter",i))($c||{});const hp={login:"login",enter:"enter"},lp=["+972-504040624","+972-525656377"],qc=new Date(2024,0,9,20,0),Gc="production",ne=`enviroments/${Gc}`,Hs="Users",Yc="BookingsObjects",Jc="Notifications",dp="Errors",fp="Helpers",Wt="PublicData",Ut="Workers",Vs="Bookings",ze="Businesses",mp="Reports",Gr="publicData",Kc="scheduleNotifications",Qc="recurrenceEvents",Xc="recurrenceBookings",Zc="multiEventsTimes",zs="LikesCollection",$s="BusinessData",jc="Counters",eu="sasimple",tu="phone",qs="^&8@^",Gs="^&9@^";var On=(i=>(i[i.add=0]="add",i[i.remove=1]="remove",i))(On||{}),Eo=(i=>(i[i.increment=0]="increment",i[i.decrement=1]="decrement",i))(Eo||{}),vt=(i=>(i[i.basic=0]="basic",i[i.advanced=1]="advanced",i[i.trial=2]="trial",i[i.landingPage=3]="landingPage",i[i.golden=4]="golden",i))(vt||{}),W=(i=>(i[i.sendSms=0]="sendSms",i[i.updateDisplayName=1]="updateDisplayName",i[i.logout=2]="logout",i[i.serverError=3]="serverError",i[i.storageError=4]="storageError",i[i.listener=5]="listener",i[i.notLogedIn=6]="notLogedIn",i[i.illegalFields=7]="illegalFields",i[i.passedLimit=8]="passedLimit",i[i.notFoundItem=9]="notFoundItem",i[i.takenBooking=10]="takenBooking",i[i.overlapWithOntherItem=11]="overlapWithOntherItem",i[i.takenMultiBooking=12]="takenMultiBooking",i[i.alreadyWorker=13]="alreadyWorker",i[i.userNotFound=14]="userNotFound",i[i.verification=15]="verification",i[i.network=16]="network",i[i.emptyField=17]="emptyField",i[i.alreadyExistItem=18]="alreadyExistItem",i[i.uploadImages=19]="uploadImages",i[i.notSelectedImages=20]="notSelectedImages",i[i.wrongOptCode=21]="wrongOptCode",i[i.expiredOpt=22]="expiredOpt",i[i.unknown=23]="unknown",i[i.timeout=24]="timeout",i[i.purchaseError=25]="purchaseError",i[i.anonymouslySignIn=26]="anonymouslySignIn",i[i.lowSubType=27]="lowSubType",i[i.coincidingEvent=28]="coincidingEvent",i[i.coincidingHoliday=29]="coincidingHoliday",i[i.realTimeServerError=30]="realTimeServerError",i[i.blockedUser=31]="blockedUser",i[i.noPermission=32]="noPermission",i[i.paymentProblem=33]="paymentProblem",i[i.currentlyOrderingForTime=34]="currentlyOrderingForTime",i[i.notFoundBusiness=35]="notFoundBusiness",i[i.savePaymentDataError=36]="savePaymentDataError",i[i.redeemDepositError=37]="redeemDepositError",i[i.saveDepositDataError=38]="saveDepositDataError",i[i.endOfWork=39]="endOfWork",i[i.invoiceCreation=40]="invoiceCreation",i[i.cantBookRecurrenceOnDates=41]="cantBookRecurrenceOnDates",i[i.cantBookRecurrenceOnEndlessDates=42]="cantBookRecurrenceOnEndlessDates",i[i.eventHasNoAccurances=43]="eventHasNoAccurances",i[i.workerDeleteTheBookingMeanwhile=44]="workerDeleteTheBookingMeanwhile",i[i.workerUpdatedTheBookingMeanwhile=45]="workerUpdatedTheBookingMeanwhile",i[i.workerDeleteEventMeanwhile=46]="workerDeleteEventMeanwhile",i[i.workerUpdatedTheBookingWhilePayment=47]="workerUpdatedTheBookingWhilePayment",i[i.blockCard=48]="blockCard",i[i.stolenCard=49]="stolenCard",i[i.callCreditCompany=50]="callCreditCompany",i[i.transactionNotConfirmed=51]="transactionNotConfirmed",i[i.fakeCard=52]="fakeCard",i[i.wrongCVV=53]="wrongCVV",i[i.worngCAVVUCAF=54]="worngCAVVUCAF",i[i.worngAvs=55]="worngAvs",i[i.networkDisconnect=56]="networkDisconnect",i[i.partlyConfirm=57]="partlyConfirm",i[i.lackOfPointsStarsMilesOtherBenefit=58]="lackOfPointsStarsMilesOtherBenefit",i[i.unauthorizedCardAtTheTerminal=59]="unauthorizedCardAtTheTerminal",i[i.invalidBalanceCode=60]="invalidBalanceCode",i[i.cardNotAssociatedWithTheNetwork=61]="cardNotAssociatedWithTheNetwork",i[i.cardIsNotValid=62]="cardIsNotValid",i[i.currencyTypeIsNotAllowed=63]="currencyTypeIsNotAllowed",i[i.thereIsNoAuthorizationForACreditTypeInTheTransaction=64]="thereIsNoAuthorizationForACreditTypeInTheTransaction",i[i.invalidId=65]="invalidId",i[i.noTreatment=66]="noTreatment",i[i.terminalNotAuthorizedToWorkWithThisMethodTheTerminalIsNotAuthorized=67]="terminalNotAuthorizedToWorkWithThisMethodTheTerminalIsNotAuthorized",i[i.authenticationErrorTerminalReference=68]="authenticationErrorTerminalReference",i[i.exceedingTheNumberOfPayments=69]="exceedingTheNumberOfPayments",i[i.communicationError=70]="communicationError",i[i.canceledTransaction=71]="canceledTransaction",i[i.invalidToken=72]="invalidToken",i[i.terminalNotAuthorizedToUseTheToken=73]="terminalNotAuthorizedToUseTheToken",i[i.deferredCharge=74]="deferredCharge",i[i.approvalWithoutCharge=75]="approvalWithoutCharge",i[i.receivingTransactionDetails=76]="receivingTransactionDetails",i[i.theCardDetailsWereNotReadInFull=77]="theCardDetailsWereNotReadInFull",i[i.theAmountOfTheItemsDoesNotMatch=78]="theAmountOfTheItemsDoesNotMatch",i[i.YouMustEnterAFirstOrLastName=79]="YouMustEnterAFirstOrLastName",i[i.transactionDescriptionMustBeEntered=80]="transactionDescriptionMustBeEntered",i[i.youCanCreditTheEntireTransactionOrASmallAmount=81]="youCanCreditTheEntireTransactionOrASmallAmount",i[i.bigDiffrentBetweenLoginAndDelete=82]="bigDiffrentBetweenLoginAndDelete",i[i.providerNotAllowed=83]="providerNotAllowed",i[i.userDisable=84]="userDisable",i[i.providerAlreadyLinked=85]="providerAlreadyLinked",i[i.credentialAlreadyInUse=86]="credentialAlreadyInUse",i[i.accountAlreadyExists=87]="accountAlreadyExists",i[i.invalidCredential=88]="invalidCredential",i[i.userMissmatch=89]="userMissmatch",i[i.noSuchProvider=90]="noSuchProvider",i[i.duplicateBusinesssName=91]="duplicateBusinesssName",i[i.alreadyExistPhone=92]="alreadyExistPhone",i[i.userExitManually=93]="userExitManually",i[i.tooManyAttempts=94]="tooManyAttempts",i[i.expiredCode=95]="expiredCode",i[i.cantUpdateEmailTooShortTimeBetween=96]="cantUpdateEmailTooShortTimeBetween",i[i.cantUpdatePhonelTooShortTimeBetween=97]="cantUpdatePhonelTooShortTimeBetween",i[i.invalidPhoneNumber=98]="invalidPhoneNumber",i))(W||{});const xi=class xi{constructor(){o(this,"errorCode",100);o(this,"error",W.unknown);o(this,"details","")}static GI(){return this._singleton}addError({code:e,error:t,details:r}){this.error=t||this.error,this.errorCode=e||this.errorCode,this.details=r||this.details}};o(xi,"_singleton",new xi);let Y=xi;class Fr{constructor({code:e="",name:t="",symbol:r=""}={}){o(this,"code","");o(this,"name","");o(this,"symbol","");this.code=e,this.name=t,this.symbol=r}static fromJson(e){return new Fr({code:e.code||"",name:e.name||"",symbol:e.symbol||""})}toJson(){return{code:this.code,name:this.name,symbol:this.symbol}}isEqual(e){return e.code===this.code}toString(){return JSON.stringify(this.toJson(),null,2)}}const Cr=new Fr({code:"USD",name:"US Dollar",symbol:"$"}),Yr=5;class Ce{}o(Ce,"currentBusinesssId",""),o(Ce,"hasPaddingFromTop",!1),o(Ce,"paddingFromTop",0),o(Ce,"attemptsLeftForCardPassword",Yr),o(Ce,"productionVersion",!0),o(Ce,"developers",{});const br=class br{constructor(){}static GI(){return br._singleton}getLisksChildPath(e){const t=`${ze}/${Ce.currentBusinesssId}/${Ut}`,r=`${e}/${zs}`;return`${t}/${r}`}getImageStorageName(e,t){const r=e.toUpperCase(),n=t.split(r);return`${r}${n[1].split(".jpg")[0]}`}getLikesChildPath(e,t,r){const n=`${ze}/${t}/${Ut}`,s=`${e}/${zs}`;return`${n}/${s}/${r}`}getBusinessDataPath(e){return`${ze}/${e}/${$s}`}getWorkerCountersPath(e,t){return`${ze}/${e}/${Ut}/${t}/${jc}`}getMessageCounterPath(e){return`${ze}/${e}/${$s}/messagesCounter`}userBookingsPathByBooking(e){return`${Hs}/${e.customerId}/${Wt}/${Gr}/${Vs}`}userBookingsPathByUser(e){return`${Hs}/${e}/${Wt}/${Gr}/${Vs}`}workerBookingsPath(e){return`${ze}/${e.buisnessId}/${Ut}/${e.workerId}/${Wt}/${Gr}/${Yc}`}};o(br,"_singleton",new br);let ti=br;const ru={0:"muslim",1:"christian",2:"jewish"},iu={muslim:0,christian:1,jewish:2};var It=(i=>(i[i.onHold=0]="onHold",i[i.needCancel=1]="needCancel",i[i.waitingList=2]="waitingList",i[i.withDebts=3]="withDebts",i[i.withOutRecipts=4]="withOutRecipts",i[i.withOnlinePayment=5]="withOnlinePayment",i[i.withoutConfirmArrival=6]="withoutConfirmArrival",i))(It||{});const Ys={0:"waitingsForApproval",1:"waitingsForCancel",2:"waitingList",4:"withOutRecipts",3:"withDebts",5:"withOnlinePayment",6:"withoutConfirmArrival"};class de{constructor(e){o(this,"id","");o(this,"token","");e&&(this.id=e.I||"",this.token=e.T||"")}static fromShopIconUrl(e){const t=new de;try{const r=e.split("SHOPICON");t.id=r[1].split("?alt")[0];const n=e.split("&token=");return t.token=n[1],t}catch{return new de}}static fromJson(e){const t=new de;return t.id=e.I||"",t.token=e.T||"",t}static fromJsonStr(e){const t=JSON.parse(e),r=new de;return r.id=t.I||"",r.token=t.T||"",r}get isEmpty(){return this.token===""||this.id===""}get isNotEmpty(){return this.token!==""&&this.id!==""}isEqual(e){return e.id==this.id&&e.token==this.token}getShopIconPath(e){return this.token===""||this.id===""?"":`https://firebasestorage.googleapis.com/v0/b/managementsystemapp-c1fda.appspot.com/o/enviroments%2F${ne.replace("enviroments/","")}%2F${e}%2Fimages%2Flogos%2FSHOPICON${this.id}?alt=media&token=${this.token}`}toJsonStr(){const e={I:this.id,T:this.token};return JSON.stringify(e)}toJson(){return{I:this.id,T:this.token}}}class Ar{constructor({businessId:e="",businessName:t="",shopIcon:r=new de}={}){o(this,"businessId","");o(this,"shopIcon",new de);o(this,"businessName","");this.businessId=e,this.shopIcon=r,this.businessName=t}static empty(){return new Ar}static fromJsonStr(e){const t=JSON.parse(e),r=Ar.empty();return r.businessId=t.businessId,r.businessName=t.businessName,t.shopIcon&&(r.shopIcon=de.fromJsonStr(t.shopIcon)),r}toJsonStr(){const e={businessId:this.businessId,shopIcon:this.shopIcon.toJsonStr(),businessName:this.businessName};return JSON.stringify(e)}}var Ht=(i=>(i[i.Barber=0]="Barber",i[i.Polish=1]="Polish",i[i.Beautician=2]="Beautician",i[i.ManicurePedicure=3]="ManicurePedicure",i[i.Eyelashes=4]="Eyelashes",i[i.Eyebrows=5]="Eyebrows",i[i.Braids=6]="Braids",i[i.MakeUpArtist=7]="MakeUpArtist",i[i.TattooArtist=8]="TattooArtist",i[i.HairRemoval=9]="HairRemoval",i[i.Masseur=10]="Masseur",i[i.Physiotherapy=11]="Physiotherapy",i[i.Cobblers=12]="Cobblers",i[i.Clown=13]="Clown",i[i.SocialWorker=14]="SocialWorker",i[i.Magician=15]="Magician",i[i.Doctor=16]="Doctor",i[i.Veterinarian=17]="Veterinarian",i[i.CommunicationTherapist=18]="CommunicationTherapist",i[i.DogGroomer=19]="DogGroomer",i[i.DJ=20]="DJ",i[i.Psychologist=21]="Psychologist",i[i.Tutor=22]="Tutor",i[i.WeddingDresses=23]="WeddingDresses",i[i.DanceTeacher=24]="DanceTeacher",i[i.Babysitter=25]="Babysitter",i[i.Reflexologist=26]="Reflexologist",i[i.Dietitian=27]="Dietitian",i[i.CarWash=28]="CarWash",i[i.Photographer=29]="Photographer",i[i.SwimmingTeacher=30]="SwimmingTeacher",i[i.Counselor=31]="Counselor",i[i.Mentor=32]="Mentor",i[i.TennisCoach=33]="TennisCoach",i[i.PrivateChef=34]="PrivateChef",i[i.PersonalTrainer=35]="PersonalTrainer",i[i.Lawyer=36]="Lawyer",i[i.Sales=37]="Sales",i[i.RealEstate=38]="RealEstate",i[i.DrivingTeacher=39]="DrivingTeacher",i[i.InvestmentAdvice=40]="InvestmentAdvice",i[i.Library=41]="Library",i[i.Tailor=42]="Tailor",i[i.Restaurant=43]="Restaurant",i[i.NailConstruction=44]="NailConstruction",i[i.Dentist=45]="Dentist",i[i.BeautysSalon=46]="BeautysSalon",i[i.Washer=47]="Washer",i[i.CleaningSofas=48]="CleaningSofas",i[i.Other=49]="Other",i))(Ht||{});const nu={0:"barber",1:"polish",48:"cleaningSofas",2:"beautician",3:"manicurePedicure",4:"eyelashes",5:"eyebrows",25:"babysitter",6:"braids",7:"makeUpArtist",8:"tattooArtist",9:"hairRemoval",10:"masseur",12:"cobblers",13:"clown",14:"socialWorker",15:"magician",16:"doctor",20:"dj",17:"veterinarian",18:"communicationTherapist",19:"dogGroomer",21:"psychologist",11:"physiotherapy",22:"Tutor",23:"weddingDresses",24:"danceTeacher",26:"reflexologist",27:"dietitian",28:"carWash",29:"photographer",30:"swimmingTeacher",31:"counselor",32:"mentor",33:"tennisCoach",34:"privateChef",35:"personalTrainer",36:"lawyer",37:"sales",38:"realEstate",39:"drivingTeacher",40:"investmentAdvice",41:"library",49:"other",42:"tailor",43:"restaurant",44:"nailConstruction",45:"dentist",46:"beautysSalon",47:"washer"},To={barber:0,cleaningSofas:48,polish:1,beautician:2,manicurePedicure:3,eyelashes:4,eyebrows:5,babysitter:25,braids:6,makeUpArtist:7,tattooArtist:8,hairRemoval:9,masseur:10,cobblers:12,clown:13,socialWorker:14,magician:15,doctor:16,veterinarian:17,communicationTherapist:18,dogGroomer:19,psychologist:21,physiotherapy:11,Tutor:22,weddingDresses:23,danceTeacher:24,reflexologist:26,dietitian:27,carWash:28,photographer:29,swimmingTeacher:30,counselor:31,mentor:32,dj:20,tennisCoach:33,privateChef:34,personalTrainer:35,lawyer:36,sales:37,realEstate:38,drivingTeacher:39,investmentAdvice:40,library:41,other:49,restaurant:43,tailor:42,nailConstruction:44,dentist:45,beautysSalon:46,washer:47},su={noPayNoPayment:0,noPayNoPaymentWithReceipts:1,pay100For30WithReceipts:2,pay70For700Actiions:3},au=15,ou=20,cu={simpletor_golden_business_month_1:1e3,simpletor_advanced_business_month_1:200,simpletor_basic_business_month_1:0,simpletor_landing_business_month_1:0},uu={simpletor_golden_business_month_1:100,simpletor_advanced_business_month_1:20,simpletor_basic_business_month_1:10,simpletor_landing_business_month_1:10};class ri{constructor(e=0,t=0){o(this,"messagesCounter",0);o(this,"paymentRequestCounter",0);o(this,"listener");this.messagesCounter=e,this.paymentRequestCounter=t}static forNewBusiness(){return new ri(ou,au)}static fromProductId(e){return new ri(cu[e]||0,uu[e]||0)}setBusinessData(e){this.messagesCounter=parseInt(e.val().messagesCounter.toString())||0,this.paymentRequestCounter=parseInt(e.val().paymentRequestCounter.toString())||0}toJson(){const e={};return e.messagesCounter=this.messagesCounter,e.paymentRequestCounter=this.paymentRequestCounter,e}}function hu(i){const e=i.toString(),t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16);return(t*299+r*587+n*114)/1e3>155}function Js(i,e){if(i===null)return e===null;if(e===null||i.size!==e.size)return!1;if(i===e)return!0;for(const t of i)if(!e.has(t))return!1;return!0}async function pp(){return!0}async function xp(i){return new Promise(e=>setTimeout(e,i))}var Rn=(i=>(i[i.light=0]="light",i[i.dark=1]="dark",i))(Rn||{});class Ye{constructor({background:e=0,primary:t=0,surface:r=0,inverseSurface:n=0,tertiary:s=0,id:a,fontName:u="",themeName:c=""}){o(this,"background",0);o(this,"primary",0);o(this,"surface",0);o(this,"inverseSurface",0);o(this,"tertiary",0);o(this,"id","");o(this,"fontName","");o(this,"themeName","");this.background=e,this.primary=t,this.surface=r,this.inverseSurface=n,this.tertiary=s,this.id=a,this.fontName=u,this.themeName=c}static fromJson(e,t){return new Ye({background:e.background||0,primary:e.primary||0,id:t,themeName:e.themeName||"",surface:e.surface||0,tertiary:e.tertiary||0,inverseSurface:e.inverseSurface||0,fontName:e.fontName||""})}static fromBusinessTheme(e){return new Ye({themeName:e.themeName,background:e.background,primary:e.primary,tertiary:e.tertiary,id:e.id,surface:e.surface,inverseSurface:e.inverseSurface,fontName:e.fontName})}isEqual(e,t=!0){const r=e.toJson();t&&(r.id=e.id);const n=this.toJson();return t&&(n.id=this.id),JSON.stringify(r)===JSON.stringify(n)}get brightness(){return hu(this.background)?1:0}toJson(){const e={};return this.fontName!==""&&(e.fontName=this.fontName),this.surface!==0&&(e.surface=this.surface),this.inverseSurface!==0&&(e.inverseSurface=this.inverseSurface),e.tertiary=this.tertiary,e.themeName=this.themeName,this.background!==0&&(e.background=this.background),this.primary!==0&&(e.primary=this.primary),e}}var Ve=(i=>(i[i.Grid=0]="Grid",i[i.Carousel=1]="Carousel",i[i.EndlessCarousel=2]="EndlessCarousel",i))(Ve||{});const Ks={0:"grid",1:"carousel",2:"endlessCarousel"},Qs={grid:0,carousel:1,endlessCarousel:2},Po={dark:new Ye({fontName:"Varela Round",themeName:"Original",id:"dark",inverseSurface:4279637532,background:4280229673,surface:4280690225,tertiary:4279834916,primary:4294940672}),darkIos:new Ye({fontName:"Varela Round",themeName:"Dark",id:"darkIos",inverseSurface:4281084974,background:4279637528,surface:4280361252,tertiary:4278190080,primary:4278225100}),light:new Ye({fontName:"Varela Round",themeName:"Pink",id:"light",inverseSurface:4294831859,background:4294375158,surface:4294967295,tertiary:4294243315,primary:4294936498}),lightIos:new Ye({fontName:"Varela Round",themeName:"Light",id:"lightIos",inverseSurface:4292664541,background:4294111991,surface:4294967295,tertiary:4293322471,primary:4278221567})};class Oe{constructor({amount:e,currency:t}){o(this,"amount",0);o(this,"currency",Cr);const r=parseFloat(e)||0;this.amount=parseFloat(r.toFixed(2)),this.currency=t}static fromJson(e){const t=new Oe({amount:"0.0",currency:Fr.fromJson(e.currency)});return e.amount!=null&&(t.amount=typeof e.amount=="number"?e.amount:parseFloat(e.amount)),t}add(e){e.currency.code===this.currency.code&&(this.amount+=e.amount)}isEqual(e){return this.amount===e.amount&&this.currency.code===e.currency.code}toString(){return new Intl.NumberFormat("en-US",{style:"currency",currency:this.currency.code}).format(this.amount)}toJson(){return{amount:this.amount,currency:this.currency.toJson()}}}class Jt{constructor({name:e="",description:t="",id:r="",price:n,imageUrl:s=""}={}){o(this,"description","");o(this,"price");o(this,"imageUrl","");o(this,"id","");o(this,"name","");o(this,"createdAt",new Date);this.name=e||"",this.description=t||"",this.id=r||"",this.price=n,this.imageUrl=s||""}static fromProduct(e){const t=new Jt({id:e.id,description:e.description,price:e.price,imageUrl:e.imageUrl,name:e.name});return t.createdAt=e.createdAt,t}static fromJson(e,t){const r=new Jt({id:t,description:e.description,price:Oe.fromJson(e.price),imageUrl:e.imageUrl,name:e.name});return r.createdAt=e.createdAt,r}toJson(){return{description:this.description,price:this.price?this.price.toJson():null,imageUrl:this.imageUrl,name:this.name,createdAt:this.createdAt}}toString(){return JSON.stringify(this.toJson())}}class Kt{constructor(e,t,r,n,s,a=!1){o(this,"title","");o(this,"content","");o(this,"lastModified","");o(this,"index","");o(this,"id","");o(this,"popOnEnter",!1);this.title=e,this.content=t,this.id=r,this.lastModified=n,this.index=s,this.popOnEnter=a}static fromJson(e,t){return new Kt(e.title??"",e.content??"",e.id??"",e.lastModified??"",t,e.popOnEnter??!1)}static fromUpdate(e){return new Kt(e.title,e.content,e.id,e.lastModified,e.index,e.popOnEnter)}toJson(){const e={};return e.title=this.title,e.id=this.id,e.content=this.content,this.lastModified!==""&&(e.lastModified=this.lastModified),this.popOnEnter&&(e.popOnEnter=this.popOnEnter),e}isValid(){return this.title!==""&&this.content!==""}toString(){return JSON.stringify(this,null,2)}}class Je{constructor({storyView:e=Ve.Grid,productView:t=Ve.Grid,changingImagesSwapSeconds:r=6,shopIconUrl:n="",pickedThemeKey:s="darkIos"}={}){o(this,"storyView",Ve.Grid);o(this,"productView",Ve.Grid);o(this,"changingImages",[]);o(this,"products",new Map);o(this,"updates",new Map);o(this,"storyTitle","");o(this,"shopIconUrl","");o(this,"productsTitle","");o(this,"bottomIcons",!1);o(this,"changingImagesSwapSeconds",6);o(this,"pickedThemeKey","darkIos");o(this,"lastTimeToUpdateTerm",new Date(0));o(this,"businessThemes",new Map);o(this,"term","");o(this,"mustConfirmTerm",!1);o(this,"popTermOnFirstEneter",!1);o(this,"isPrivateTheme",!1);this.changingImagesSwapSeconds=r,this.shopIconUrl=n,this.pickedThemeKey=s}static fromJson(e){const t=new Je;return Object.entries(e.products).forEach(([r,n])=>{t.products.set(r,Jt.fromJson(n,r))}),e.changingImages&&(t.changingImages=e.changingImages.map(r=>r)),e.updates&&Object.entries(e.updates).forEach(([r,n])=>{t.updates.set(r,Kt.fromJson(n,r))}),e.storyView&&(t.storyView=Qs[e.storyView]||Ve.EndlessCarousel),e.productView&&(t.productView=Qs[e.productView]||Ve.Grid),e.businessThemes&&Object.entries(e.businessThemes).forEach(([r,n])=>{t.businessThemes.set(r,Ye.fromJson(n,r))}),e.lastTimeToUpdateTerm&&(t.lastTimeToUpdateTerm=new Date(e.lastTimeToUpdateTerm)||new Date(0)),t.pickedThemeKey=e.pickedThemeKey||"darkIoss",t.term=e.term||"",t.bottomIcons=e.bottomIcons||!1,t.changingImagesSwapSeconds=e.changingImagesSwapSeconds||6,t.productsTitle=e.productsTitle||"",t.storyTitle=e.storyTitle||"",t.shopIconUrl=e.shopIcon||"",t.mustConfirmTerm=e.mustConfirmTerm||!1,t.popTermOnFirstEneter=e.popTermOnFirstEneter||!1,t.isPrivateTheme=e.isPrivateTheme||!1,t}get shopIconData(){return de.fromShopIconUrl(this.shopIconUrl)}static fromBusinessDesign(e){const t=new Je;return e.products.forEach((r,n)=>{t.products.set(n,Jt.fromProduct(r))}),t.changingImages=[...e.changingImages],e.updates.forEach((r,n)=>{t.updates.set(n,Kt.fromUpdate(r))}),t.storyView=e.storyView,e.businessThemes.forEach((r,n)=>{t.businessThemes.set(n,Ye.fromBusinessTheme(r))}),t.shopIconUrl=e.shopIconUrl,t.pickedThemeKey=e.pickedThemeKey,t.lastTimeToUpdateTerm=e.lastTimeToUpdateTerm,t.changingImagesSwapSeconds=e.changingImagesSwapSeconds,t.term=e.term,t.bottomIcons=e.bottomIcons,t.productsTitle=e.productsTitle,t.productView=e.productView,t.storyTitle=e.storyTitle,t.mustConfirmTerm=e.mustConfirmTerm,t.popTermOnFirstEneter=e.popTermOnFirstEneter,t.isPrivateTheme=e.isPrivateTheme,t}toJson(){const e={};return this.storyView!==Ve.EndlessCarousel&&(e.storyView=Ks[this.storyView]),this.productView!==Ve.Grid&&(e.productView=Ks[this.storyView]),e.changingImages=this.changingImages,e.products={},this.products.forEach((t,r)=>{e.products[r]=t.toJson()}),e.updates={},this.updates.forEach((t,r)=>{e.updates[r]=t.toJson()}),this.mustConfirmTerm&&(e.mustConfirmTerm=this.mustConfirmTerm),this.popTermOnFirstEneter&&(e.popTermOnFirstEneter=this.popTermOnFirstEneter),this.term!==""&&(e.term=this.term),this.lastTimeToUpdateTerm!==new Date(0)&&(e.lastTimeToUpdateTerm=this.lastTimeToUpdateTerm.toISOString()),e.bottomIcons=this.bottomIcons,e.changingImagesSwapSeconds=this.changingImagesSwapSeconds,e.storyTitle=this.storyTitle,e.productsTitle=this.productsTitle,e.businessThemes={},this.businessThemes.forEach((t,r)=>{Po.hasOwnProperty(r)||(e.businessThemes[r]=t.toJson())}),e.pickedThemeKey=this.pickedThemeKey,e.shopIcon=this.shopIconUrl,e.isPrivateTheme=this.isPrivateTheme,e}}class Bt{constructor({shopName:e="",businessId:t,productId:r="",adress:n="",dynamicLink:s="",revenueCatId:a="",ownersName:u="",instagramAccount:c="",shopPhone:h="",design:l}){o(this,"businesseType",Ht.Other);o(this,"currency",Cr);o(this,"notifyOnNewCustomer",!0);o(this,"searchable",!0);o(this,"billingIssue",new Map);o(this,"isLandingPageMode",!1);o(this,"allWorkersIds",new Map);o(this,"workersIds",new Map);o(this,"hypPath");o(this,"expiredDate",new Date);o(this,"shopPhone","");o(this,"ownersName","");o(this,"companyNumber","");o(this,"ownersPhone","");o(this,"masofNumber","");o(this,"previewDoc","");o(this,"instagramAccount","");o(this,"revenueCatId","");o(this,"pendingWorkersProductsId","");o(this,"adress","");o(this,"workersProductsId","");o(this,"pendingProductId","");o(this,"dynamicLink","");o(this,"shopName","");o(this,"productId","");o(this,"businessId","");o(this,"createdAt",new Date);o(this,"blockedUsersTemp",new Map);o(this,"lastTimeConnected",new Date);o(this,"businessData",new ri);o(this,"design",new Je);this.shopName=e,this.businessId=t,this.productId=r,this.adress=n,this.dynamicLink=s,this.revenueCatId=a,this.ownersName=u,this.instagramAccount=c,this.shopPhone=h,this.design=l}static empty(){return new Bt({design:new Je,businessId:""})}get businessPayLoadData(){return new Ar({businessId:this.businessId,businessName:this.shopName,shopIcon:this.design.shopIconData})}static fromJson(e,t){const r=new Bt({businessId:t,design:new Je});return r.setData(e,t),r}setData(e,t){if(this.businessId=t,e.currency&&(this.currency=Fr.fromJson(e.currency)),e.design)this.design=Je.fromJson(e.design);else{const n=e.theme;this.design.pickedThemeKey=n,Object.entries(e.products).forEach(([s,a])=>{this.design.products.set(s,Jt.fromJson(a,s))}),e.changingImages&&(this.design.changingImages=e.changingImages.map(s=>s)),e.updates&&e.updates.forEach((s,a)=>{this.design.updates.set(a.toString(),Kt.fromJson(s,a.toString()))}),this.design.bottomIcons=e.bottomIcons??!1,this.design.storyTitle=e.storyTitle??"",this.design.changingImagesSwapSeconds=e.changingImagesSwapSeconds??6,this.design.shopIconUrl=e.shopIcon??""}this.previewDoc=e.previewDoc??"",this.workersProductsId=e.workersProductsId??"",this.pendingWorkersProductsId=e.pendingWorkersProductsId??"",this.shopName=e.shopName??"",this.isLandingPageMode=e.isLandingPageMode??!1,this.searchable=e.searchable??!0,e.expiredDate!=null&&(this.expiredDate=new Date(e.expiredDate)),this.notifyOnNewCustomer=e.notifyOnNewCustomer??!0,this.companyNumber=e.companyNumber??"",e.hypPath!=null&&(this.hypPath=su[e.hypPath]),this.allWorkersIds=new Map,e.allWorkersIds!=null&&Object.entries(e.allWorkersIds).forEach(([n,s])=>{this.allWorkersIds.set(n,s)});const r=this.businessId.split("--")[0];this.allWorkersIds.hasOwnProperty("+"+r)||this.allWorkersIds.set("+"+r,""),this.workersIds=new Map,e.workersIds!=null&&Object.entries(e.workersIds).forEach(([n,s])=>{this.workersIds.set(n,s)}),this.workersIds.hasOwnProperty(r)||this.workersIds.set(r,""),this.dynamicLink=e.dynamicLink??"",this.masofNumber=e.masofNumber??"",this.ownersName=e.ownersName??"",this.revenueCatId=e.revenueCatId??"",this.productId=e.productId??"",this.pendingProductId=e.pendingProductId??"",this.businesseType=To[e.businesseType]??Ht.Other,this.instagramAccount=e.instagramAccount??"",this.adress=e.adress??"",this.shopPhone=e.shopPhone??"";try{e.billingIssue!=null&&Object.entries(e.billingIssue).forEach(([n,s])=>{this.billingIssue.set(n,s.toDate())})}catch{}e.createdAt instanceof dt?this.createdAt=e.createdAt.toDate():typeof e.createdAt=="string"&&(this.createdAt=new Date(e.createdAt)||new Date),e.lastTimeConnected!=null&&(this.lastTimeConnected=new Date(e.lastTimeConnected)||new Date)}toJson(){const e={};return e.notifyOnNewCustomer=this.notifyOnNewCustomer,e.currency=this.currency.toJson(),e.searchable=this.searchable,e.workersProductsId=this.workersProductsId,e.pendingWorkersProductsId=this.pendingWorkersProductsId,e.previewDoc=this.previewDoc,e.masofNumber=this.masofNumber,e.revenueCatId=this.revenueCatId,e.pendingProductId=this.pendingProductId,e.productId=this.productId,e.shopName=this.shopName,this.hypPath&&(e.hypPath=this.hypPath),this.billingIssue.size>0&&(e.billingIssue={},this.billingIssue.forEach((t,r)=>{e.billingIssue[r]=dt.fromDate(t)})),this.dynamicLink!==""&&(e.dynamicLink=this.dynamicLink),e.companyNumber=this.companyNumber,e.expiredDate=this.expiredDate,e.businesseType=this.businesseType,e.ownersName=this.ownersName,e.instagramAccount=this.instagramAccount,e.adress=this.adress,e.shopPhone=this.shopPhone,e.workersIds=this.workersIds,e.createdAt=this.createdAt,e.lastTimeConnected=this.lastTimeConnected,this.isLandingPageMode&&(e.isLandingPageMode=this.isLandingPageMode),e.design=this.design.toJson(),e}toString(){return JSON.stringify(this.toJson())}}const O=class O{constructor({days:e=0,hours:t=0,minutes:r=0,seconds:n=0,milliseconds:s=0,microseconds:a=0}){o(this,"_duration");o(this,"days",0);o(this,"hours",0);o(this,"minutes",0);o(this,"seconds",0);o(this,"milliseconds",0);o(this,"microseconds",0);this._duration=a+O.microsecondsPerMillisecond*s+O.microsecondsPerSecond*n+O.microsecondsPerMinute*r+O.microsecondsPerHour*t+O.microsecondsPerDay*e}static _microseconds(e){return new O({microseconds:e})}add(e){return O._microseconds(this._duration+e._duration)}subtract(e){return O._microseconds(this._duration-e._duration)}multiply(e){return O._microseconds(Math.round(this._duration*e))}divide(e){if(e===0)throw new Error("IntegerDivisionByZeroException");return O._microseconds(Math.floor(this._duration/e))}lessThan(e){return this._duration<e._duration}greaterThan(e){return this._duration>e._duration}lessThanOrEqual(e){return this._duration<=e._duration}greaterThanOrEqual(e){return this._duration>=e._duration}get inDays(){return Math.floor(this._duration/O.microsecondsPerDay)}get inHours(){return Math.floor(this._duration/O.microsecondsPerHour)}get inMinutes(){return Math.floor(this._duration/O.microsecondsPerMinute)}get inSeconds(){return Math.floor(this._duration/O.microsecondsPerSecond)}get inMilliseconds(){return Math.floor(this._duration)}get inMicroseconds(){return this._duration}equals(e){return e instanceof O&&this._duration===e.inMicroseconds}compareTo(e){return this._duration-e._duration}};o(O,"microsecondsPerMillisecond",1e3),o(O,"millisecondsPerSecond",1e3),o(O,"secondsPerMinute",60),o(O,"minutesPerHour",60),o(O,"hoursPerDay",24),o(O,"microsecondsPerSecond",O.microsecondsPerMillisecond*O.millisecondsPerSecond),o(O,"microsecondsPerMinute",O.microsecondsPerSecond*O.secondsPerMinute),o(O,"microsecondsPerHour",O.microsecondsPerMinute*O.minutesPerHour),o(O,"microsecondsPerDay",O.microsecondsPerHour*O.hoursPerDay),o(O,"millisecondsPerMinute",O.millisecondsPerSecond*O.secondsPerMinute),o(O,"millisecondsPerHour",O.millisecondsPerMinute*O.minutesPerHour),o(O,"millisecondsPerDay",O.millisecondsPerHour*O.hoursPerDay),o(O,"secondsPerHour",O.secondsPerMinute*O.minutesPerHour),o(O,"secondsPerDay",O.secondsPerHour*O.hoursPerDay),o(O,"minutesPerDay",O.minutesPerHour*O.hoursPerDay),o(O,"zero",new O({seconds:0}));let H=O;var ye=(i=>(i.waiting="waiting",i.approved="approved",i))(ye||{});const Bo={waiting:"waiting",approved:"approved"},_o={waiting:"waiting",approved:"approved"};var Te=(i=>(i.app="app",i.web="web",i.byWorker="byWorker",i))(Te||{});const No={app:"app",web:"web",byWorker:"byWorker"},So={app:"app",web:"web",byWorker:"byWorker"};var je=(i=>(i.regular="regular",i.confirmArrival="confirmArrival",i))(je||{});const Jr={regular:"regular",confirmArrival:"confirmArrival"},kt={regular:"regular",confirmArrival:"confirmArrival"};var U=(i=>(i[i.message=0]="message",i[i.push=1]="push",i[i.none=2]="none",i[i.whatsapp=3]="whatsapp",i))(U||{});const lu={0:"message",1:"push",2:"none",3:"whatsapp"},Fo={message:0,push:1,whatsapp:3,none:2};new H({hours:3});new H({minutes:5});var J=(i=>(i[i.male=0]="male",i[i.female=1]="female",i[i.anonymous=2]="anonymous",i))(J||{});const Qt={0:"male",1:"female",2:"anonymous"},et={male:0,female:1,anonymous:2};var te=(i=>(i[i.SMS=0]="SMS",i[i.SMSOrPush=1]="SMSOrPush",i[i.WhatsAppOrPush=2]="WhatsAppOrPush",i[i.WhatsApp=3]="WhatsApp",i[i.SMSOnly=4]="SMSOnly",i[i.WhatAppOnly=5]="WhatAppOnly",i[i.Push=6]="Push",i[i.PushOrWhatsApp=7]="PushOrWhatsApp",i[i.PushOrSMS=8]="PushOrSMS",i[i.OnlyPush=9]="OnlyPush",i))(te||{});const du={0:"SMS",4:"SMSOnly",5:"WhatAppOnly",1:"SMSOrPush",2:"WhatsAppOrPush",3:"WhatsApp",9:"OnlyPush",7:"PushOrWhatsApp",8:"PushOrSMS",6:"Push"},vi={SMS:0,SMSOrPush:1,WhatAppOnly:5,SMSOnly:4,WhatsAppOrPush:2,WhatsApp:3,OnlyPush:9,PushOrWhatsApp:7,PushOrSMS:8,Push:6},fu=/^[a-zA-Z0-9-_.~%]{1,900}$/;var Kr=(i=>(i[i.shortestTreatment=0]="shortestTreatment",i[i.longestTreatment=1]="longestTreatment",i[i.custom=2]="custom",i[i.first=3]="first",i[i.last=4]="last",i[i.edges=5]="edges",i))(Kr||{});const mu={3:"first",4:"last",5:"edges",0:"shortestTreatment",1:"longestTreatment",2:"custom"},pu={first:3,last:4,edges:5,shortestTreatment:0,longestTreatment:1,custom:2};function Mo(i,e,t,r){const n=t<i&&!(r>i),s=!(t<e)&&r>e;return n?"BEFORE":s?"AFTER":"STRIKE"}function le(i,e){return new Date(i.getTime()+e.inMilliseconds)}function Mi(i,e){return new Date(i.getTime()-e.inMilliseconds)}function Oi(i,e){return new H({milliseconds:new Date(i.getTime()-e.getTime()).getTime()})}class Oo{constructor({start:e,end:t}){o(this,"start");o(this,"end");this.start=e,this.end=t}}function fe(i){const e=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&e==="[object Date]"?new i.constructor(+i):typeof i=="number"||e==="[object Number]"||typeof i=="string"||e==="[object String]"?new Date(i):new Date(NaN)}function ae(i,e){return i instanceof Date?new i.constructor(e):new Date(e)}function Ro(i,e){const t=fe(i);return isNaN(e)?ae(i,NaN):(e&&t.setDate(t.getDate()+e),t)}const Lo=6048e5,xu=864e5,gu=6e4,wu=36e5,vu=1e3;let yu={};function rr(){return yu}function ft(i,e){var u,c,h,l;const t=rr(),r=(e==null?void 0:e.weekStartsOn)??((c=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((l=(h=t.locale)==null?void 0:h.options)==null?void 0:l.weekStartsOn)??0,n=fe(i),s=n.getDay(),a=(s<r?7:0)+s-r;return n.setDate(n.getDate()-a),n.setHours(0,0,0,0),n}function Xt(i){return ft(i,{weekStartsOn:1})}function Uo(i){const e=fe(i),t=e.getFullYear(),r=ae(i,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const n=Xt(r),s=ae(i,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const a=Xt(s);return e.getTime()>=n.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Xs(i){const e=fe(i);return e.setHours(0,0,0,0),e}function ii(i){const e=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return e.setUTCFullYear(i.getFullYear()),i.getTime()-e.getTime()}function Du(i,e){const t=Xs(i),r=Xs(e),n=t.getTime()-ii(t),s=r.getTime()-ii(r);return Math.round((n-s)/xu)}function bu(i){const e=Uo(i),t=ae(i,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Xt(t)}function ku(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function Iu(i){if(!ku(i)&&typeof i!="number")return!1;const e=fe(i);return!isNaN(Number(e))}function Cu(i){const e=fe(i),t=ae(i,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Au={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Eu=(i,e,t)=>{let r;const n=Au[i];return typeof n=="string"?r=n:e===1?r=n.one:r=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Ri(i){return(e={})=>{const t=e.width?String(e.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const Tu={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Pu={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Bu={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_u={date:Ri({formats:Tu,defaultWidth:"full"}),time:Ri({formats:Pu,defaultWidth:"full"}),dateTime:Ri({formats:Bu,defaultWidth:"full"})},Nu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Su=(i,e,t,r)=>Nu[i];function fr(i){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let n;if(r==="formatting"&&i.formattingValues){const a=i.defaultFormattingWidth||i.defaultWidth,u=t!=null&&t.width?String(t.width):a;n=i.formattingValues[u]||i.formattingValues[a]}else{const a=i.defaultWidth,u=t!=null&&t.width?String(t.width):i.defaultWidth;n=i.values[u]||i.values[a]}const s=i.argumentCallback?i.argumentCallback(e):e;return n[s]}}const Fu={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Mu={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ou={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ru={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Lu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Uu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wu=(i,e)=>{const t=Number(i),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Hu={ordinalNumber:Wu,era:fr({values:Fu,defaultWidth:"wide"}),quarter:fr({values:Mu,defaultWidth:"wide",argumentCallback:i=>i-1}),month:fr({values:Ou,defaultWidth:"wide"}),day:fr({values:Ru,defaultWidth:"wide"}),dayPeriod:fr({values:Lu,defaultWidth:"wide",formattingValues:Uu,defaultFormattingWidth:"wide"})};function mr(i){return(e,t={})=>{const r=t.width,n=r&&i.matchPatterns[r]||i.matchPatterns[i.defaultMatchWidth],s=e.match(n);if(!s)return null;const a=s[0],u=r&&i.parsePatterns[r]||i.parsePatterns[i.defaultParseWidth],c=Array.isArray(u)?zu(u,d=>d.test(a)):Vu(u,d=>d.test(a));let h;h=i.valueCallback?i.valueCallback(c):c,h=t.valueCallback?t.valueCallback(h):h;const l=e.slice(a.length);return{value:h,rest:l}}}function Vu(i,e){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&e(i[t]))return t}function zu(i,e){for(let t=0;t<i.length;t++)if(e(i[t]))return t}function $u(i){return(e,t={})=>{const r=e.match(i.matchPattern);if(!r)return null;const n=r[0],s=e.match(i.parsePattern);if(!s)return null;let a=i.valueCallback?i.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;const u=e.slice(n.length);return{value:a,rest:u}}}const qu=/^(\d+)(th|st|nd|rd)?/i,Gu=/\d+/i,Yu={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ju={any:[/^b/i,/^(a|c)/i]},Ku={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qu={any:[/1/i,/2/i,/3/i,/4/i]},Xu={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zu={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ju={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},eh={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},th={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rh={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ih={ordinalNumber:$u({matchPattern:qu,parsePattern:Gu,valueCallback:i=>parseInt(i,10)}),era:mr({matchPatterns:Yu,defaultMatchWidth:"wide",parsePatterns:Ju,defaultParseWidth:"any"}),quarter:mr({matchPatterns:Ku,defaultMatchWidth:"wide",parsePatterns:Qu,defaultParseWidth:"any",valueCallback:i=>i+1}),month:mr({matchPatterns:Xu,defaultMatchWidth:"wide",parsePatterns:Zu,defaultParseWidth:"any"}),day:mr({matchPatterns:ju,defaultMatchWidth:"wide",parsePatterns:eh,defaultParseWidth:"any"}),dayPeriod:mr({matchPatterns:th,defaultMatchWidth:"any",parsePatterns:rh,defaultParseWidth:"any"})},Wo={code:"en-US",formatDistance:Eu,formatLong:_u,formatRelative:Su,localize:Hu,match:ih,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nh(i){const e=fe(i);return Du(e,Cu(e))+1}function Ho(i){const e=fe(i),t=Xt(e).getTime()-bu(e).getTime();return Math.round(t/Lo)+1}function Zn(i,e){var l,d,f,x;const t=fe(i),r=t.getFullYear(),n=rr(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(f=n.locale)==null?void 0:f.options)==null?void 0:x.firstWeekContainsDate)??1,a=ae(i,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const u=ft(a,e),c=ae(i,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const h=ft(c,e);return t.getTime()>=u.getTime()?r+1:t.getTime()>=h.getTime()?r:r-1}function sh(i,e){var u,c,h,l;const t=rr(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((l=(h=t.locale)==null?void 0:h.options)==null?void 0:l.firstWeekContainsDate)??1,n=Zn(i,e),s=ae(i,0);return s.setFullYear(n,0,r),s.setHours(0,0,0,0),ft(s,e)}function Vo(i,e){const t=fe(i),r=ft(t,e).getTime()-sh(t,e).getTime();return Math.round(r/Lo)+1}function X(i,e){const t=i<0?"-":"",r=Math.abs(i).toString().padStart(e,"0");return t+r}const at={y(i,e){const t=i.getFullYear(),r=t>0?t:1-t;return X(e==="yy"?r%100:r,e.length)},M(i,e){const t=i.getMonth();return e==="M"?String(t+1):X(t+1,2)},d(i,e){return X(i.getDate(),e.length)},a(i,e){const t=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(i,e){return X(i.getHours()%12||12,e.length)},H(i,e){return X(i.getHours(),e.length)},m(i,e){return X(i.getMinutes(),e.length)},s(i,e){return X(i.getSeconds(),e.length)},S(i,e){const t=e.length,r=i.getMilliseconds(),n=Math.floor(r*Math.pow(10,t-3));return X(n,e.length)}},Ot={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ah={G:function(i,e,t){const r=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(i,e,t){if(e==="yo"){const r=i.getFullYear(),n=r>0?r:1-r;return t.ordinalNumber(n,{unit:"year"})}return at.y(i,e)},Y:function(i,e,t,r){const n=Zn(i,r),s=n>0?n:1-n;if(e==="YY"){const a=s%100;return X(a,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):X(s,e.length)},R:function(i,e){const t=Uo(i);return X(t,e.length)},u:function(i,e){const t=i.getFullYear();return X(t,e.length)},Q:function(i,e,t){const r=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return X(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(i,e,t){const r=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return X(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(i,e,t){const r=i.getMonth();switch(e){case"M":case"MM":return at.M(i,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(i,e,t){const r=i.getMonth();switch(e){case"L":return String(r+1);case"LL":return X(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(i,e,t,r){const n=Vo(i,r);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):X(n,e.length)},I:function(i,e,t){const r=Ho(i);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):X(r,e.length)},d:function(i,e,t){return e==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):at.d(i,e)},D:function(i,e,t){const r=nh(i);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):X(r,e.length)},E:function(i,e,t){const r=i.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(i,e,t,r){const n=i.getDay(),s=(n-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return X(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(i,e,t,r){const n=i.getDay(),s=(n-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return X(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(i,e,t){const r=i.getDay(),n=r===0?7:r;switch(e){case"i":return String(n);case"ii":return X(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(i,e,t){const n=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(i,e,t){const r=i.getHours();let n;switch(r===12?n=Ot.noon:r===0?n=Ot.midnight:n=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(i,e,t){const r=i.getHours();let n;switch(r>=17?n=Ot.evening:r>=12?n=Ot.afternoon:r>=4?n=Ot.morning:n=Ot.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(i,e,t){if(e==="ho"){let r=i.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return at.h(i,e)},H:function(i,e,t){return e==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):at.H(i,e)},K:function(i,e,t){const r=i.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):X(r,e.length)},k:function(i,e,t){let r=i.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):X(r,e.length)},m:function(i,e,t){return e==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):at.m(i,e)},s:function(i,e,t){return e==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):at.s(i,e)},S:function(i,e){return at.S(i,e)},X:function(i,e,t,r){const s=(r._originalDate||i).getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return js(s);case"XXXX":case"XX":return wt(s);case"XXXXX":case"XXX":default:return wt(s,":")}},x:function(i,e,t,r){const s=(r._originalDate||i).getTimezoneOffset();switch(e){case"x":return js(s);case"xxxx":case"xx":return wt(s);case"xxxxx":case"xxx":default:return wt(s,":")}},O:function(i,e,t,r){const s=(r._originalDate||i).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Zs(s,":");case"OOOO":default:return"GMT"+wt(s,":")}},z:function(i,e,t,r){const s=(r._originalDate||i).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Zs(s,":");case"zzzz":default:return"GMT"+wt(s,":")}},t:function(i,e,t,r){const n=r._originalDate||i,s=Math.floor(n.getTime()/1e3);return X(s,e.length)},T:function(i,e,t,r){const s=(r._originalDate||i).getTime();return X(s,e.length)}};function Zs(i,e=""){const t=i>0?"-":"+",r=Math.abs(i),n=Math.floor(r/60),s=r%60;return s===0?t+String(n):t+String(n)+e+X(s,2)}function js(i,e){return i%60===0?(i>0?"-":"+")+X(Math.abs(i)/60,2):wt(i,e)}function wt(i,e=""){const t=i>0?"-":"+",r=Math.abs(i),n=X(Math.floor(r/60),2),s=X(r%60,2);return t+n+e+s}const ea=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},zo=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},oh=(i,e)=>{const t=i.match(/(P+)(p+)?/)||[],r=t[1],n=t[2];if(!n)return ea(i,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",ea(r,e)).replace("{{time}}",zo(n,e))},Ln={p:zo,P:oh},ch=/^D+$/,uh=/^Y+$/,hh=["D","DD","YY","YYYY"];function $o(i){return ch.test(i)}function qo(i){return uh.test(i)}function ni(i,e,t){const r=lh(i,e,t);if(console.warn(r),hh.includes(i))throw new RangeError(r)}function lh(i,e,t){const r=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const dh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mh=/^'([^]*?)'?$/,ph=/''/g,xh=/[a-zA-Z]/;function Ne(i,e,t){var l,d,f,x,g,y,w,k;const r=rr(),n=(t==null?void 0:t.locale)??r.locale??Wo,s=(t==null?void 0:t.firstWeekContainsDate)??((d=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(f=r.locale)==null?void 0:f.options)==null?void 0:x.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((y=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((k=(w=r.locale)==null?void 0:w.options)==null?void 0:k.weekStartsOn)??0,u=fe(i);if(!Iu(u))throw new RangeError("Invalid time value");const c={firstWeekContainsDate:s,weekStartsOn:a,locale:n,_originalDate:u};return e.match(fh).map(function(m){const p=m[0];if(p==="p"||p==="P"){const v=Ln[p];return v(m,n.formatLong)}return m}).join("").match(dh).map(function(m){if(m==="''")return"'";const p=m[0];if(p==="'")return gh(m);const v=ah[p];if(v)return!(t!=null&&t.useAdditionalWeekYearTokens)&&qo(m)&&ni(m,e,String(i)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&$o(m)&&ni(m,e,String(i)),v(u,m,n.localize,c);if(p.match(xh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return m}).join("")}function gh(i){const e=i.match(mh);return e?e[1].replace(ph,"'"):i}function wh(){return Object.assign({},rr())}function vh(i){let t=fe(i).getDay();return t===0&&(t=7),t}function yh(i,e){const t=e instanceof Date?ae(e,0):new e(0);return t.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),t.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t}const Dh=10;class Go{constructor(){o(this,"subPriority",0)}validate(e,t){return!0}}class bh extends Go{constructor(e,t,r,n,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class kh extends Go{constructor(){super(...arguments);o(this,"priority",Dh);o(this,"subPriority",-1)}set(t,r){return r.timestampIsSet?t:ae(t,yh(t,Date))}}class K{run(e,t,r,n){const s=this.parse(e,t,r,n);return s?{setter:new bh(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}class Ih extends K{constructor(){super(...arguments);o(this,"priority",140);o(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,n){switch(r){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}}set(t,r,n){return r.era=n,t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}}const ce={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Fe={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ue(i,e){return i&&{value:e(i.value),rest:i.rest}}function se(i,e){const t=e.match(i);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Me(i,e){const t=e.match(i);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,n=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(n*wu+s*gu+a*vu),rest:e.slice(t[0].length)}}function Yo(i){return se(ce.anyDigitsSigned,i)}function oe(i,e){switch(i){case 1:return se(ce.singleDigit,e);case 2:return se(ce.twoDigits,e);case 3:return se(ce.threeDigits,e);case 4:return se(ce.fourDigits,e);default:return se(new RegExp("^\\d{1,"+i+"}"),e)}}function si(i,e){switch(i){case 1:return se(ce.singleDigitSigned,e);case 2:return se(ce.twoDigitsSigned,e);case 3:return se(ce.threeDigitsSigned,e);case 4:return se(ce.fourDigitsSigned,e);default:return se(new RegExp("^-?\\d{1,"+i+"}"),e)}}function jn(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Jo(i,e){const t=e>0,r=t?e:1-e;let n;if(r<=50)n=i||100;else{const s=r+50,a=Math.floor(s/100)*100,u=i>=s%100;n=i+a-(u?100:0)}return t?n:1-n}function Ko(i){return i%400===0||i%4===0&&i%100!==0}class Ch extends K{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,n){const s=a=>({year:a,isTwoDigitYear:r==="yy"});switch(r){case"y":return ue(oe(4,t),s);case"yo":return ue(n.ordinalNumber(t,{unit:"year"}),s);default:return ue(oe(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n){const s=t.getFullYear();if(n.isTwoDigitYear){const u=Jo(n.year,s);return t.setFullYear(u,0,1),t.setHours(0,0,0,0),t}const a=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}}class Ah extends K{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,n){const s=a=>({year:a,isTwoDigitYear:r==="YY"});switch(r){case"Y":return ue(oe(4,t),s);case"Yo":return ue(n.ordinalNumber(t,{unit:"year"}),s);default:return ue(oe(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n,s){const a=Zn(t,s);if(n.isTwoDigitYear){const c=Jo(n.year,a);return t.setFullYear(c,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),ft(t,s)}const u=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(u,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),ft(t,s)}}class Eh extends K{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return si(r==="R"?4:r.length,t)}set(t,r,n){const s=ae(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),Xt(s)}}class Th extends K{constructor(){super(...arguments);o(this,"priority",130);o(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return si(r==="u"?4:r.length,t)}set(t,r,n){return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}}class Ph extends K{constructor(){super(...arguments);o(this,"priority",120);o(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"Q":case"QQ":return oe(r.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}}class Bh extends K{constructor(){super(...arguments);o(this,"priority",120);o(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"q":case"qq":return oe(r.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}}class _h extends K{constructor(){super(...arguments);o(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);o(this,"priority",110)}parse(t,r,n){const s=a=>a-1;switch(r){case"M":return ue(se(ce.month,t),s);case"MM":return ue(oe(2,t),s);case"Mo":return ue(n.ordinalNumber(t,{unit:"month"}),s);case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}class Nh extends K{constructor(){super(...arguments);o(this,"priority",110);o(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,n){const s=a=>a-1;switch(r){case"L":return ue(se(ce.month,t),s);case"LL":return ue(oe(2,t),s);case"Lo":return ue(n.ordinalNumber(t,{unit:"month"}),s);case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}function Sh(i,e,t){const r=fe(i),n=Vo(r,t)-e;return r.setDate(r.getDate()-n*7),r}class Fh extends K{constructor(){super(...arguments);o(this,"priority",100);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,n){switch(r){case"w":return se(ce.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return oe(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n,s){return ft(Sh(t,n,s),s)}}function Mh(i,e){const t=fe(i),r=Ho(t)-e;return t.setDate(t.getDate()-r*7),t}class Oh extends K{constructor(){super(...arguments);o(this,"priority",100);o(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,n){switch(r){case"I":return se(ce.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return oe(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n){return Xt(Mh(t,n))}}const Rh=[31,28,31,30,31,30,31,31,30,31,30,31],Lh=[31,29,31,30,31,30,31,31,30,31,30,31];class Uh extends K{constructor(){super(...arguments);o(this,"priority",90);o(this,"subPriority",1);o(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"d":return se(ce.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return oe(r.length,t)}}validate(t,r){const n=t.getFullYear(),s=Ko(n),a=t.getMonth();return s?r>=1&&r<=Lh[a]:r>=1&&r<=Rh[a]}set(t,r,n){return t.setDate(n),t.setHours(0,0,0,0),t}}class Wh extends K{constructor(){super(...arguments);o(this,"priority",90);o(this,"subpriority",1);o(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,n){switch(r){case"D":case"DD":return se(ce.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return oe(r.length,t)}}validate(t,r){const n=t.getFullYear();return Ko(n)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,n){return t.setMonth(0,n),t.setHours(0,0,0,0),t}}function es(i,e,t){var d,f,x,g;const r=rr(),n=(t==null?void 0:t.weekStartsOn)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((g=(x=r.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??0,s=fe(i),a=s.getDay(),c=(e%7+7)%7,h=7-n,l=e<0||e>6?e-(a+h)%7:(c+h)%7-(a+h)%7;return Ro(s,l)}class Hh extends K{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=es(t,n,s),t.setHours(0,0,0,0),t}}class Vh extends K{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,n,s){const a=u=>{const c=Math.floor((u-1)/7)*7;return(u+s.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return ue(oe(r.length,t),a);case"eo":return ue(n.ordinalNumber(t,{unit:"day"}),a);case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=es(t,n,s),t.setHours(0,0,0,0),t}}class zh extends K{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,n,s){const a=u=>{const c=Math.floor((u-1)/7)*7;return(u+s.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return ue(oe(r.length,t),a);case"co":return ue(n.ordinalNumber(t,{unit:"day"}),a);case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=es(t,n,s),t.setHours(0,0,0,0),t}}function $h(i,e){const t=fe(i),r=vh(t),n=e-r;return Ro(t,n)}class qh extends K{constructor(){super(...arguments);o(this,"priority",90);o(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,n){const s=a=>a===0?7:a;switch(r){case"i":case"ii":return oe(r.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return ue(n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return ue(n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return ue(n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return ue(n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,r){return r>=1&&r<=7}set(t,r,n){return t=$h(t,n),t.setHours(0,0,0,0),t}}class Gh extends K{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,n){switch(r){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jn(n),0,0,0),t}}class Yh extends K{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,n){switch(r){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jn(n),0,0,0),t}}class Jh extends K{constructor(){super(...arguments);o(this,"priority",80);o(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,n){switch(r){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jn(n),0,0,0),t}}class Kh extends K{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,n){switch(r){case"h":return se(ce.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return oe(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,n){const s=t.getHours()>=12;return s&&n<12?t.setHours(n+12,0,0,0):!s&&n===12?t.setHours(0,0,0,0):t.setHours(n,0,0,0),t}}class Qh extends K{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,n){switch(r){case"H":return se(ce.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return oe(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,n){return t.setHours(n,0,0,0),t}}class Xh extends K{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,n){switch(r){case"K":return se(ce.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return oe(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.getHours()>=12&&n<12?t.setHours(n+12,0,0,0):t.setHours(n,0,0,0),t}}class Zh extends K{constructor(){super(...arguments);o(this,"priority",70);o(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,n){switch(r){case"k":return se(ce.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return oe(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,n){const s=n<=24?n%24:n;return t.setHours(s,0,0,0),t}}class jh extends K{constructor(){super(...arguments);o(this,"priority",60);o(this,"incompatibleTokens",["t","T"])}parse(t,r,n){switch(r){case"m":return se(ce.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return oe(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setMinutes(n,0,0),t}}class el extends K{constructor(){super(...arguments);o(this,"priority",50);o(this,"incompatibleTokens",["t","T"])}parse(t,r,n){switch(r){case"s":return se(ce.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return oe(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setSeconds(n,0),t}}class tl extends K{constructor(){super(...arguments);o(this,"priority",30);o(this,"incompatibleTokens",["t","T"])}parse(t,r){const n=s=>Math.floor(s*Math.pow(10,-r.length+3));return ue(oe(r.length,t),n)}set(t,r,n){return t.setMilliseconds(n),t}}class rl extends K{constructor(){super(...arguments);o(this,"priority",10);o(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return Me(Fe.basicOptionalMinutes,t);case"XX":return Me(Fe.basic,t);case"XXXX":return Me(Fe.basicOptionalSeconds,t);case"XXXXX":return Me(Fe.extendedOptionalSeconds,t);case"XXX":default:return Me(Fe.extended,t)}}set(t,r,n){return r.timestampIsSet?t:ae(t,t.getTime()-ii(t)-n)}}class il extends K{constructor(){super(...arguments);o(this,"priority",10);o(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return Me(Fe.basicOptionalMinutes,t);case"xx":return Me(Fe.basic,t);case"xxxx":return Me(Fe.basicOptionalSeconds,t);case"xxxxx":return Me(Fe.extendedOptionalSeconds,t);case"xxx":default:return Me(Fe.extended,t)}}set(t,r,n){return r.timestampIsSet?t:ae(t,t.getTime()-ii(t)-n)}}class nl extends K{constructor(){super(...arguments);o(this,"priority",40);o(this,"incompatibleTokens","*")}parse(t){return Yo(t)}set(t,r,n){return[ae(t,n*1e3),{timestampIsSet:!0}]}}class sl extends K{constructor(){super(...arguments);o(this,"priority",20);o(this,"incompatibleTokens","*")}parse(t){return Yo(t)}set(t,r,n){return[ae(t,n),{timestampIsSet:!0}]}}const al={G:new Ih,y:new Ch,Y:new Ah,R:new Eh,u:new Th,Q:new Ph,q:new Bh,M:new _h,L:new Nh,w:new Fh,I:new Oh,d:new Uh,D:new Wh,E:new Hh,e:new Vh,c:new zh,i:new qh,a:new Gh,b:new Yh,B:new Jh,h:new Kh,H:new Qh,K:new Xh,k:new Zh,m:new jh,s:new el,S:new tl,X:new rl,x:new il,t:new nl,T:new sl},ol=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cl=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ul=/^'([^]*?)'?$/,hl=/''/g,ll=/\S/,dl=/[a-zA-Z]/;function fl(i,e,t,r){var y,w,k,m,p,v,C,I;const n=wh(),s=(r==null?void 0:r.locale)??n.locale??Wo,a=(r==null?void 0:r.firstWeekContainsDate)??((w=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:w.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(k=n.locale)==null?void 0:k.options)==null?void 0:m.firstWeekContainsDate)??1,u=(r==null?void 0:r.weekStartsOn)??((v=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??n.weekStartsOn??((I=(C=n.locale)==null?void 0:C.options)==null?void 0:I.weekStartsOn)??0;if(e==="")return i===""?fe(t):ae(t,NaN);const c={firstWeekContainsDate:a,weekStartsOn:u,locale:s},h=[new kh],l=e.match(cl).map(D=>{const A=D[0];if(A in Ln){const _=Ln[A];return _(D,s.formatLong)}return D}).join("").match(ol),d=[];for(let D of l){!(r!=null&&r.useAdditionalWeekYearTokens)&&qo(D)&&ni(D,e,i),!(r!=null&&r.useAdditionalDayOfYearTokens)&&$o(D)&&ni(D,e,i);const A=D[0],_=al[A];if(_){const{incompatibleTokens:b}=_;if(Array.isArray(b)){const P=d.find(B=>b.includes(B.token)||B.token===A);if(P)throw new RangeError(`The format string mustn't contain \`${P.fullToken}\` and \`${D}\` at the same time`)}else if(_.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${D}\` and any other token at the same time`);d.push({token:A,fullToken:D});const E=_.run(i,D,s.match,c);if(!E)return ae(t,NaN);h.push(E.setter),i=E.rest}else{if(A.match(dl))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");if(D==="''"?D="'":A==="'"&&(D=ml(D)),i.indexOf(D)===0)i=i.slice(D.length);else return ae(t,NaN)}}if(i.length>0&&ll.test(i))return ae(t,NaN);const f=h.map(D=>D.priority).sort((D,A)=>A-D).filter((D,A,_)=>_.indexOf(D)===A).map(D=>h.filter(A=>A.priority===D).sort((A,_)=>_.subPriority-A.subPriority)).map(D=>D[0]);let x=fe(t);if(isNaN(x.getTime()))return ae(t,NaN);const g={};for(const D of f){if(!D.validate(x,c))return ae(t,NaN);const A=D.set(x,g,c);Array.isArray(A)?(x=A[0],Object.assign(g,A[1])):x=A}return ae(t,x)}function ml(i){return i.match(ul)[1].replace(hl,"'")}function zr(i){const e=new Date(i);return e.setFullYear(1970),e.setMonth(0),e.setDate(1),e}function Qo(i){i.sort((n,s)=>n.start.getTime()-s.start.getTime());const e=[];let t=0;for(let n=0;n<i.length;n=t){const s=i[n];for(e.push(s),t=n+1;t<i.length;t++){const a=i[t],u=Mo(zr(s.start),zr(s.end),zr(a.start),zr(a.end));if(u==="AFTER")if(s.end.toUTCString()===a.start.toUTCString())s.end=a.end;else break;u==="STRIKE"&&(a.start.getTime()<s.start.getTime()&&(s.start=a.start),a.end.getTime()>s.end.getTime()&&(s.end=a.end))}}const r=[];return e.forEach(n=>{r.push(Ne(n.start,"HH:mm")),r.push(Ne(n.end,"HH:mm"))}),r}function pl(i){const e=[];for(let t=0;t<i.length;t+=2){const r=new Date(i[t]),n=new Date(i[t+1]);e.push(new Oo({start:r,end:n}))}return e}function ta(i,e){for(let t=0;t<e.length;t+=2){const r=new Date(e[t]),n=new Date(e[t+1]);i.push(new Oo({start:r,end:n}))}}var xl="firebase",gl="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn(xl,gl,"app");function Xo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wl=Xo,Zo=new qn("auth","Firebase",Xo());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new cc("@firebase/auth");function vl(i,...e){ai.logLevel<=fo.WARN&&ai.warn(`Auth (${Nr}): ${i}`,...e)}function Qr(i,...e){ai.logLevel<=fo.ERROR&&ai.error(`Auth (${Nr}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(i,...e){throw rs(i,...e)}function Re(i,...e){return rs(i,...e)}function jo(i,e,t){const r=Object.assign(Object.assign({},wl()),{[e]:t});return new qn("auth","Firebase",r).create(e,{appName:i.name})}function ts(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&He(i,"argument-error"),jo(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rs(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return Zo.create(i,...e)}function R(i,e,...t){if(!i)throw rs(e,...t)}function Ke(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Qr(e),new Error(e)}function tt(i,e){i||Ke(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function yl(){return ra()==="http:"||ra()==="https:"}function ra(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yl()||sc()||"connection"in navigator)?navigator.onLine:!0}function bl(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t){this.shortDelay=e,this.longDelay=t,tt(t>e,"Short delay should be less than long delay!"),this.isMobile=ic()||nc()}get(){return Dl()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(i,e){tt(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new Mr(3e4,6e4);function it(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Se(i,e,t,r,n={}){return t0(i,n,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=Sr(Object.assign({key:i.config.apiKey},a)).slice(1),c=await i._getAdditionalHeaders();return c["Content-Type"]="application/json",i.languageCode&&(c["X-Firebase-Locale"]=i.languageCode),e0.fetch()(r0(i,i.config.apiHost,t,u),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function t0(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},kl),e);try{const n=new Cl(i),s=await Promise.race([t(),n.promise]);n.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw pr(i,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw pr(i,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw pr(i,"email-already-in-use",a);if(c==="USER_DISABLED")throw pr(i,"user-disabled",a);const l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw jo(i,l,h);He(i,l)}}catch(n){if(n instanceof Gn)throw n;He(i,"network-request-failed",{message:String(n)})}}async function yi(i,e,t,r,n={}){const s=await Se(i,e,t,r,n);return"mfaPendingCredential"in s&&He(i,"multi-factor-auth-required",{_serverResponse:s}),s}function r0(i,e,t,r){const n=`${e}${t}?${r}`;return i.config.emulator?is(i.config,n):`${i.config.apiScheme}://${n}`}class Cl{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Re(this.auth,"network-request-failed")),Il.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pr(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const n=Re(i,e,r);return n.customData._tokenResponse=t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(i,e){return Se(i,"POST","/v1/accounts:delete",e)}async function El(i,e){return Se(i,"POST","/v1/accounts:update",e)}async function Tl(i,e){return Se(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Pl(i,e=!1){const t=ge(i),r=await t.getIdToken(e),n=ns(r);R(n&&n.exp&&n.auth_time&&n.iat,t.auth,"internal-error");const s=typeof n.firebase=="object"?n.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:n,token:r,authTime:gr(Li(n.auth_time)),issuedAtTime:gr(Li(n.iat)),expirationTime:gr(Li(n.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Li(i){return Number(i)*1e3}function ns(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Qr("JWT malformed, contained fewer than 3 sections"),null;try{const n=hc(t);return n?JSON.parse(n):(Qr("Failed to decode base64 JWT payload"),null)}catch(n){return Qr("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function Bl(i){const e=ns(i);return R(e,"internal-error"),R(typeof e.exp<"u","internal-error"),R(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zt(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Gn&&_l(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function _l({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gr(this.lastLoginAt),this.creationTime=gr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Er(i){var e;const t=i.auth,r=await i.getIdToken(),n=await Zt(i,Tl(t,{idToken:r}));R(n==null?void 0:n.users.length,t,"internal-error");const s=n.users[0];i._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Ml(s.providerUserInfo):[],u=Fl(i.providerData,a),c=i.isAnonymous,h=!(i.email&&s.passwordHash)&&!(u!=null&&u.length),l=c?h:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new i0(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(i,d)}async function Sl(i){const e=ge(i);await Er(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Fl(i,e){return[...i.filter(r=>!e.some(n=>n.providerId===r.providerId)),...e]}function Ml(i){return i.map(e=>{var{providerId:t}=e,r=Kn(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(i,e){const t=await t0(i,{},async()=>{const r=Sr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:n,apiKey:s}=i.config,a=r0(i,n,"/v1/token",`key=${s}`),u=await i._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",e0.fetch()(a,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Rl(i,e){return Se(i,"POST","/v2/accounts:revokeToken",it(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(typeof e.idToken<"u","internal-error"),R(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bl(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return R(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:n,expiresIn:s}=await Ol(e,t);this.updateTokensAndExpiration(r,n,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:n,expirationTime:s}=t,a=new Tr;return r&&(R(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),n&&(R(typeof n=="string","internal-error",{appName:e}),a.accessToken=n),s&&(R(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tr,this.toJSON())}_performRefresh(){return Ke("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(i,e){R(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ct{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,s=Kn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new i0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Zt(this,this.stsTokenManager.getToken(this.auth,e));return R(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Pl(this,e)}reload(){return Sl(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ct(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Er(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Zt(this,Al(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,s,a,u,c,h,l;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(n=t.email)!==null&&n!==void 0?n:void 0,x=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,g=(a=t.photoURL)!==null&&a!==void 0?a:void 0,y=(u=t.tenantId)!==null&&u!==void 0?u:void 0,w=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,k=(h=t.createdAt)!==null&&h!==void 0?h:void 0,m=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:p,emailVerified:v,isAnonymous:C,providerData:I,stsTokenManager:D}=t;R(p&&D,e,"internal-error");const A=Tr.fromJSON(this.name,D);R(typeof p=="string",e,"internal-error"),ot(d,e.name),ot(f,e.name),R(typeof v=="boolean",e,"internal-error"),R(typeof C=="boolean",e,"internal-error"),ot(x,e.name),ot(g,e.name),ot(y,e.name),ot(w,e.name),ot(k,e.name),ot(m,e.name);const _=new Ct({uid:p,auth:e,email:f,emailVerified:v,displayName:d,isAnonymous:C,photoURL:g,phoneNumber:x,tenantId:y,stsTokenManager:A,createdAt:k,lastLoginAt:m});return I&&Array.isArray(I)&&(_.providerData=I.map(b=>Object.assign({},b))),w&&(_._redirectEventId=w),_}static async _fromIdTokenResponse(e,t,r=!1){const n=new Tr;n.updateFromServerResponse(t);const s=new Ct({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await Er(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new Map;function Qe(i){tt(i instanceof Function,"Expected a class definition");let e=ia.get(i);return e?(tt(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,ia.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}n0.type="NONE";const na=n0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(i,e,t){return`firebase:${i}:${e}:${t}`}class Vt{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:n,name:s}=this.auth;this.fullUserKey=Xr(this.userKey,n.apiKey,s),this.fullPersistenceKey=Xr("persistence",n.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ct._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Vt(Qe(na),e,r);const n=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=n[0]||Qe(na);const a=Xr(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const l=await h._get(a);if(l){const d=Ct._fromJSON(e,l);h!==s&&(u=d),s=h;break}}catch{}const c=n.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Vt(s,e,r):(s=c[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Vt(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(o0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(s0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u0(e))return"Blackberry";if(h0(e))return"Webos";if(ss(e))return"Safari";if((e.includes("chrome/")||a0(e))&&!e.includes("edge/"))return"Chrome";if(c0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function s0(i=De()){return/firefox\//i.test(i)}function ss(i=De()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function a0(i=De()){return/crios\//i.test(i)}function o0(i=De()){return/iemobile/i.test(i)}function c0(i=De()){return/android/i.test(i)}function u0(i=De()){return/blackberry/i.test(i)}function h0(i=De()){return/webos/i.test(i)}function Di(i=De()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function Ll(i=De()){var e;return Di(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ul(){return lc()&&document.documentMode===10}function l0(i=De()){return Di(i)||c0(i)||h0(i)||u0(i)||/windows phone/i.test(i)||o0(i)}function Wl(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(i,e=[]){let t;switch(i){case"Browser":t=sa(De());break;case"Worker":t=`${sa(De())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const c=e(s);a(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const n of t)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(i,e={}){return Se(i,"GET","/v2/passwordPolicy",it(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=6;class $l{constructor(e){var t,r,n,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:zl,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,n,s,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.containsLowercaseLetter)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,n,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aa(this),this.idTokenSubscription=new aa(this),this.beforeStateQueue=new Hl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zo,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qe(t)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await Vt.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((n=this.currentUser)===null||n===void 0?void 0:n.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(n=c.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return R(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Er(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bl()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?ge(e):null;return t&&R(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&R(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Qe(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Vl(this),t=new $l(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Rl(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qe(e)||this._popupRedirectResolver;R(t,this,"argument-error"),this.redirectPersistenceManager=await Vt.create(this,[Qe(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(R(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,n);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=d0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&vl(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ir(i){return ge(i)}class aa{constructor(e){this.auth=e,this.observer=null,this.addObserver=ac(t=>this.observer=t)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}function Yl(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=n=>{const s=Re("internal-error");s.customData=n,t(s)},r.type="text/javascript",r.charset="UTF-8",Gl().appendChild(r)})}function Jl(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(i,e){const t=mo(i,"auth");if(t.isInitialized()){const n=t.getImmediate(),s=t.getOptions();if(uc(s,e??{}))return n;He(n,"already-initialized")}return t.initialize({options:e})}function Ql(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Qe);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Xl(i,e,t){const r=ir(i);R(r._canInitEmulator,r,"emulator-config-failed"),R(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const n=!!(t!=null&&t.disableWarnings),s=f0(e),{host:a,port:u}=Zl(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${s}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:n})}),n||jl()}function f0(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function Zl(i){const e=f0(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const s=n[1];return{host:s,port:oa(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:oa(a)}}}function oa(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function jl(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ke("not implemented")}_getIdTokenResponse(e){return Ke("not implemented")}_linkToIdToken(e,t){return Ke("not implemented")}_getReauthenticationResolver(e){return Ke("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zt(i,e){return yi(i,"POST","/v1/accounts:signInWithIdp",it(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="http://localhost";class rt extends as{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):He("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,s=Kn(t,["providerId","signInMethod"]);if(!r||!n)return null;const a=new rt(r,n);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return zt(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,zt(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zt(e,t)}buildRequest(){const e={requestUri:ed,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sr(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(i,e){return Se(i,"POST","/v1/accounts:sendVerificationCode",it(i,e))}async function rd(i,e){return yi(i,"POST","/v1/accounts:signInWithPhoneNumber",it(i,e))}async function id(i,e){const t=await yi(i,"POST","/v1/accounts:signInWithPhoneNumber",it(i,e));if(t.temporaryProof)throw pr(i,"account-exists-with-different-credential",t);return t}const nd={USER_NOT_FOUND:"user-not-found"};async function sd(i,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return yi(i,"POST","/v1/accounts:signInWithPhoneNumber",it(i,t),nd)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t extends as{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new $t({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new $t({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return rd(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return id(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return sd(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:s}=e;return!r&&!t&&!n&&!s?null:new $t({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Or{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class wr extends nr{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return R("providerId"in t&&"signInMethod"in t,"argument-error"),rt._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return R(e.idToken||e.accessToken,"argument-error"),rt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return wr.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return wr.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:n,pendingToken:s,nonce:a,providerId:u}=e;if(!r&&!n&&!t&&!s||!u)return null;try{return new wr(u)._credential({idToken:t,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e extends nr{constructor(){super("facebook.com")}static credential(e){return rt._fromParams({providerId:$e.PROVIDER_ID,signInMethod:$e.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $e.credentialFromTaggedObject(e)}static credentialFromError(e){return $e.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $e.credential(e.oauthAccessToken)}catch{return null}}}$e.FACEBOOK_SIGN_IN_METHOD="facebook.com";$e.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe extends nr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rt._fromParams({providerId:qe.PROVIDER_ID,signInMethod:qe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return qe.credentialFromTaggedObject(e)}static credentialFromError(e){return qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return qe.credential(t,r)}catch{return null}}}qe.GOOGLE_SIGN_IN_METHOD="google.com";qe.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut extends nr{constructor(){super("github.com")}static credential(e){return rt._fromParams({providerId:ut.PROVIDER_ID,signInMethod:ut.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ut.credentialFromTaggedObject(e)}static credentialFromError(e){return ut.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ut.credential(e.oauthAccessToken)}catch{return null}}}ut.GITHUB_SIGN_IN_METHOD="github.com";ut.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht extends nr{constructor(){super("twitter.com")}static credential(e,t){return rt._fromParams({providerId:ht.PROVIDER_ID,signInMethod:ht.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ht.credentialFromTaggedObject(e)}static credentialFromError(e){return ht.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ht.credential(t,r)}catch{return null}}}ht.TWITTER_SIGN_IN_METHOD="twitter.com";ht.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){const s=await Ct._fromIdTokenResponse(e,r,n),a=ca(r);return new jt({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const n=ca(r);return new jt({user:e,providerId:n,_tokenResponse:r,operationType:t})}}function ca(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Gn{constructor(e,t,r,n){var s;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,oi.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new oi(e,t,r,n)}}function m0(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?oi._fromErrorAndOperation(i,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(i){return new Set(i.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(i,e){const t=ge(i);await x0(!0,t,e);const{providerUserInfo:r}=await El(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),n=p0(r||[]);return t.providerData=t.providerData.filter(s=>n.has(s.providerId)),n.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function os(i,e,t=!1){const r=await Zt(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return jt._forOperation(i,"link",r)}async function x0(i,e,t){await Er(e);const r=p0(e.providerData),n=i===!1?"provider-already-linked":"no-such-provider";R(r.has(t)===i,e.auth,n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g0(i,e,t=!1){const{auth:r}=i,n="reauthenticate";try{const s=await Zt(i,m0(r,n,e,i),t);R(s.idToken,r,"internal-error");const a=ns(s.idToken);R(a,r,"internal-error");const{sub:u}=a;return R(i.uid===u,r,"user-mismatch"),jt._forOperation(i,n,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&He(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w0(i,e,t=!1){const r="signIn",n=await m0(i,r,e),s=await jt._fromIdTokenResponse(i,r,n);return t||await i._updateCurrentUser(s.user),s}async function od(i,e){return w0(ir(i),e)}async function cd(i,e){const t=ge(i);return await x0(!1,t,e.providerId),os(t,e)}async function ud(i,e){return g0(ge(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(i,e){return Se(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ld(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ge(i),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Zt(r,hd(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function dd(i,e,t,r){return ge(i).onIdTokenChanged(e,t,r)}function fd(i,e,t){return ge(i).beforeAuthStateChanged(e,t)}function md(i,e,t,r){return ge(i).onAuthStateChanged(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(i,e){return Se(i,"POST","/v2/accounts/mfaEnrollment:start",it(i,e))}const ci="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ci,"1"),this.storage.removeItem(ci),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(){const i=De();return ss(i)||Di(i)}const gd=1e3,wd=10;class y0 extends v0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=xd()&&Wl(),this.fallbackToPolling=l0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}const n=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);Ul()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,wd):n()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},gd)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}y0.type="LOCAL";const vd=y0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends v0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}D0.type="SESSION";const b0=D0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(n=>n.isListeningto(e));if(t)return t;const r=new bi(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:n,data:s}=t.data,a=this.handlersMap[n];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const u=Array.from(a).map(async h=>h(t.origin,s)),c=await yd(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bi.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const h=cs("",20);n.port1.start();const l=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:n,onMessage(d){const f=d;if(f.data.eventId===h)switch(f.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(f.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),n.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[n.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(){return window}function bd(i){Le().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(){return typeof Le().WorkerGlobalScope<"u"&&typeof Le().importScripts=="function"}async function kd(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Id(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function Cd(){return k0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="firebaseLocalStorageDb",Ad=1,ui="firebaseLocalStorage",C0="fbase_key";class Rr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ki(i,e){return i.transaction([ui],e?"readwrite":"readonly").objectStore(ui)}function Ed(){const i=indexedDB.deleteDatabase(I0);return new Rr(i).toPromise()}function Wn(){const i=indexedDB.open(I0,Ad);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(ui,{keyPath:C0})}catch(n){t(n)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(ui)?e(r):(r.close(),await Ed(),e(await Wn()))})})}async function ua(i,e,t){const r=ki(i,!0).put({[C0]:e,value:t});return new Rr(r).toPromise()}async function Td(i,e){const t=ki(i,!1).get(e),r=await new Rr(t).toPromise();return r===void 0?null:r.value}function ha(i,e){const t=ki(i,!0).delete(e);return new Rr(t).toPromise()}const Pd=800,Bd=3;class A0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wn(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Bd)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return k0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bi._getInstance(Cd()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await kd(),!this.activeServiceWorker)return;this.sender=new Dd(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Id()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wn();return await ua(e,ci,"1"),await ha(e,ci),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ua(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Td(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ha(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(n=>{const s=ki(n,!1).getAll();return new Rr(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:n,value:s}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(s)&&(this.notifyListeners(n,s),t.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),t.push(n));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Pd)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A0.type="LOCAL";const _d=A0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(i,e){return Se(i,"POST","/v2/accounts/mfaSignIn:start",it(i,e))}new Mr(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="recaptcha";async function Fd(i,e,t){var r;const n=await t.verify();try{R(typeof n=="string",i,"argument-error"),R(t.type===Sd,i,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return R(a.type==="enroll",i,"internal-error"),(await pd(i,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:n}})).phoneSessionInfo.sessionInfo;{R(a.type==="signin",i,"internal-error");const u=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return R(u,i,"missing-multi-factor-info"),(await Nd(i,{mfaPendingCredential:a.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:n}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await td(i,{phoneNumber:s.phoneNumber,recaptchaToken:n});return a}}finally{t._reset()}}async function Md(i,e){await os(ge(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.providerId=At.PROVIDER_ID,this.auth=ir(e)}verifyPhoneNumber(e,t){return Fd(this.auth,e,ge(t))}static credential(e,t){return $t._fromVerification(e,t)}static credentialFromResult(e){const t=e;return At.credentialFromTaggedObject(t)}static credentialFromError(e){return At.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?$t._fromTokenResponse(t,r):null}}At.PROVIDER_ID="phone";At.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(i,e){return e?Qe(e):(R(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends as{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Od(i){return w0(i.auth,new us(i),i.bypassAuthState)}function Rd(i){const{auth:e,user:t}=i;return R(t,e,"internal-error"),g0(t,new us(i),i.bypassAuthState)}async function Ld(i){const{auth:e,user:t}=i;return R(t,e,"internal-error"),os(t,new us(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,t,r,n,s=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:n,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Od;case"linkViaPopup":case"linkViaRedirect":return Ld;case"reauthViaPopup":case"reauthViaRedirect":return Rd;default:He(this.auth,"internal-error")}}resolve(e){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new Mr(2e3,1e4);async function Ui(i,e,t){const r=ir(i);ts(i,e,Or);const n=Ii(r,t);return new Xe(r,"signInViaPopup",e,n).executeNotNull()}async function Wi(i,e,t){const r=ge(i);ts(r.auth,e,Or);const n=Ii(r.auth,t);return new Xe(r.auth,"reauthViaPopup",e,n,r).executeNotNull()}async function Hi(i,e,t){const r=ge(i);ts(r.auth,e,Or);const n=Ii(r.auth,t);return new Xe(r.auth,"linkViaPopup",e,n,r).executeNotNull()}class Xe extends E0{constructor(e,t,r,n,s){super(e,t,n,s),this.provider=r,this.authWindow=null,this.pollId=null,Xe.currentPopupAction&&Xe.currentPopupAction.cancel(),Xe.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return R(e,this.auth,"internal-error"),e}async onExecution(){tt(this.filter.length===1,"Popup operations only handle one event");const e=cs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Re(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xe.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ud.get())};e()}}Xe.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="pendingRedirect",Zr=new Map;class Hd extends E0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zr.get(this.auth._key());if(!e){try{const r=await Vd(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zr.set(this.auth._key(),e)}return this.bypassAuthState||Zr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vd(i,e){const t=qd(e),r=$d(i);if(!await r._isAvailable())return!1;const n=await r._get(t)==="true";return await r._remove(t),n}function zd(i,e){Zr.set(i._key(),e)}function $d(i){return Qe(i._redirectPersistence)}function qd(i){return Xr(Wd,i.config.apiKey,i.name)}async function Gd(i,e,t=!1){const r=ir(i),n=Ii(r,e),a=await new Hd(r,n,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=10*60*1e3;class Jd{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kd(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!T0(e)){const n=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Re(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Yd&&this.cachedEventUids.clear(),this.cachedEventUids.has(la(e))}saveEventToCache(e){this.cachedEventUids.add(la(e)),this.lastProcessedEventTime=Date.now()}}function la(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function T0({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Kd(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T0(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qd(i,e={}){return Se(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zd=/^https?/;async function jd(i){if(i.config.emulator)return;const{authorizedDomains:e}=await Qd(i);for(const t of e)try{if(ef(t))return}catch{}He(i,"unauthorized-domain")}function ef(i){const e=Un(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const a=new URL(i);return a.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Zd.test(t))return!1;if(Xd.test(i))return r===i;const n=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=new Mr(3e4,6e4);function da(){const i=Le().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function rf(i){return new Promise((e,t)=>{var r,n,s;function a(){da(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{da(),t(Re(i,"network-request-failed"))},timeout:tf.get()})}if(!((n=(r=Le().gapi)===null||r===void 0?void 0:r.iframes)===null||n===void 0)&&n.Iframe)e(gapi.iframes.getContext());else if(!((s=Le().gapi)===null||s===void 0)&&s.load)a();else{const u=Jl("iframefcb");return Le()[u]=()=>{gapi.load?a():t(Re(i,"network-request-failed"))},Yl(`https://apis.google.com/js/api.js?onload=${u}`).catch(c=>t(c))}}).catch(e=>{throw jr=null,e})}let jr=null;function nf(i){return jr=jr||rf(i),jr}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new Mr(5e3,15e3),af="__/auth/iframe",of="emulator/auth/iframe",cf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hf(i){const e=i.config;R(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?is(e,of):`https://${i.config.authDomain}/${af}`,r={apiKey:e.apiKey,appName:i.name,v:Nr},n=uf.get(i.config.apiHost);n&&(r.eid=n);const s=i._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Sr(r).slice(1)}`}async function lf(i){const e=await nf(i),t=Le().gapi;return R(t,i,"internal-error"),e.open({where:document.body,url:hf(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cf,dontclear:!0},r=>new Promise(async(n,s)=>{await r.restyle({setHideOnLeave:!1});const a=Re(i,"network-request-failed"),u=Le().setTimeout(()=>{s(a)},sf.get());function c(){Le().clearTimeout(u),n(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ff=500,mf=600,pf="_blank",xf="http://localhost";class fa{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gf(i,e,t,r=ff,n=mf){const s=Math.max((window.screen.availHeight-n)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},df),{width:r.toString(),height:n.toString(),top:s,left:a}),h=De().toLowerCase();t&&(u=a0(h)?pf:t),s0(h)&&(e=e||xf,c.scrollbars="yes");const l=Object.entries(c).reduce((f,[x,g])=>`${f}${x}=${g},`,"");if(Ll(h)&&u!=="_self")return wf(e||"",u),new fa(null);const d=window.open(e||"",u,l);R(d,i,"popup-blocked");try{d.focus()}catch{}return new fa(d)}function wf(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="__/auth/handler",yf="emulator/auth/handler",Df=encodeURIComponent("fac");async function ma(i,e,t,r,n,s){R(i.config.authDomain,i,"auth-domain-config-required"),R(i.config.apiKey,i,"invalid-api-key");const a={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Nr,eventId:n};if(e instanceof Or){e.setDefaultLanguage(i.languageCode),a.providerId=e.providerId||"",dc(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(s||{}))a[l]=d}if(e instanceof nr){const l=e.getScopes().filter(d=>d!=="");l.length>0&&(a.scopes=l.join(","))}i.tenantId&&(a.tid=i.tenantId);const u=a;for(const l of Object.keys(u))u[l]===void 0&&delete u[l];const c=await i._getAppCheckToken(),h=c?`#${Df}=${encodeURIComponent(c)}`:"";return`${bf(i)}?${Sr(u).slice(1)}${h}`}function bf({config:i}){return i.emulator?is(i,yf):`https://${i.authDomain}/${vf}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="webStorageSupport";class kf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b0,this._completeRedirectFn=Gd,this._overrideRedirectResult=zd}async _openPopup(e,t,r,n){var s;tt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await ma(e,t,r,Un(),n);return gf(e,a,cs())}async _openRedirect(e,t,r,n){await this._originValidation(e);const s=await ma(e,t,r,Un(),n);return bd(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:n,promise:s}=this.eventManagers[t];return n?Promise.resolve(n):(tt(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await lf(e),r=new Jd(e);return t.register("authEvent",n=>(R(n==null?void 0:n.authEvent,e,"invalid-auth-event"),{status:r.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vi,{type:Vi},n=>{var s;const a=(s=n==null?void 0:n[0])===null||s===void 0?void 0:s[Vi];a!==void 0&&t(!!a),He(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jd(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return l0()||ss()||Di()}}const If=kf;var pa="@firebase/auth",xa="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Ef(i){Os(new Rs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;R(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:u,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:d0(i)},h=new ql(r,n,s,c);return Ql(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Os(new Rs("auth-internal",e=>{const t=ir(e.getProvider("auth").getImmediate());return(r=>new Cf(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(pa,xa,Af(i)),Nn(pa,xa,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=5*60,Pf=lo("authIdTokenMaxAge")||Tf;let ga=null;const Bf=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Pf)return;const n=t==null?void 0:t.token;ga!==n&&(ga=n,await fetch(i,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function _f(i=gi()){const e=mo(i,"auth");if(e.isInitialized())return e.getImmediate();const t=Kl(i,{popupRedirectResolver:If,persistence:[_d,vd,b0]}),r=lo("authTokenSyncURL");if(r){const s=Bf(r);fd(t,s,()=>s(t.currentUser)),dd(t,a=>s(a))}const n=oc("auth");return n&&Xl(t,`http://${n}`),t}Ef("Browser");const $r={"operation-not-allowed":W.providerNotAllowed,"user-disabled":W.userDisable,"provider-already-linked":W.providerAlreadyLinked,"credential-already-in-use":W.credentialAlreadyInUse,"invalid-verification-code":W.wrongOptCode,"invalid-verification-id":W.verification,"invalid-credential":W.invalidCredential,"user-mismatch":W.userMissmatch,"user-not-found":W.userNotFound,"no-such-provider":W.noSuchProvider,canceled:W.userExitManually,"too-many-requests":W.tooManyAttempts,"too-many-attempts":W.tooManyAttempts,"expired-code":W.expiredCode,"account-exists-with-different-credential":W.credentialAlreadyInUse,"invalid-phone-number":W.invalidPhoneNumber};var Nf=(i=>(i[i.login=0]="login",i[i.link=1]="link",i[i.reauthenticate=2]="reauthenticate",i[i.phoneUpdate=3]="phoneUpdate",i))(Nf||{});class Sf{constructor(){o(this,"_auth");Yn().length===0?Jn(Qn):gi(),this._auth=_f()}async signInWithFacebookSRV(e){try{return await this.signInWithFacebookWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),he.error(`it was an error the error is --> ${t}`),he.error(t.name),Y.GI().details=t.name,Y.GI().error=$r[t.name]??W.unknown),!1}}async signInWithFacebookWebSRV(e){const t=new $e;switch(t.addScope("email"),t.setCustomParameters({display:"popup"}),e){case 0:await Ui(this._auth,t);break;case 1:await Hi(this._auth.currentUser,t);break;case 2:await Wi(this._auth.currentUser,t);break}}async signInWithGoogleSRV(e){try{return await this.signInWithGoogleWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),he.error(`it was an error the error is --> ${t}`),he.error(t.name),Y.GI().details=t.name,Y.GI().error=$r[t.name]??W.unknown),!1}}async signInWithGoogleWebSRV(e){const t=new qe;switch(t.addScope("email"),t.addScope("profile"),t.setCustomParameters({login_hint:"user@example.com"}),e){case 0:await Ui(this._auth,t);break;case 1:await Hi(this._auth.currentUser,t);break;case 2:await Wi(this._auth.currentUser,t);break}}async signInWithAppleSRV(e){try{return await this.signInWithAppleWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),he.error(`it was an error the error is --> ${t}`),he.error(t.name),Y.GI().details=t.name,Y.GI().error=$r[t.name]??W.unknown),!1}}async signInWithAppleWebSRV(e){const t=new wr("apple.com");switch(t.addScope("email"),t.addScope("name"),e){case 0:await Ui(this._auth,t);break;case 1:await Hi(this._auth.currentUser,t);break;case 2:await Wi(this._auth.currentUser,t);break}}async signInWithOtpSRV({loginType:e,verificationId:t,otp:r,autocredential:n}){const s=n??At.credential(t,r);try{switch(e){case 0:await od(this._auth,s);break;case 1:await cd(this._auth.currentUser,s);break;case 2:await ud(this._auth.currentUser,s);break;case 3:await Md(this._auth.currentUser,s);break}return!0}catch(a){return console.error(`Error: ${a}`),a instanceof Error&&(console.error(`Error: ${a}`),he.error(`it was an error the error is --> ${a}`),he.error(a.name),Y.GI().details=a.name,Y.GI().error=$r[a.name]??W.unknown),!1}}get isLoggedInSRV(){var e;return console.log("5555555555555555555555555555555555555555555555555555"+((e=this._auth.currentUser)==null?void 0:e.displayName)),this._auth.currentUser!=null}onAuthUserStateChangedSRV(e){return md(this._auth,e)}async updateUserNameSRV(e){try{await ld(this._auth.currentUser,{displayName:e}),await this._auth.currentUser.reload()}catch(t){throw t instanceof Error&&Y.GI().addError({error:W.updateDisplayName,details:t.toString()}),t}}userConnectedOnlyLocallySRV(){return this.isLoggedInSRV&&this._auth.currentUser.displayName===null}get lastLoginDateSRV(){var e;return(e=this._auth.currentUser)==null?void 0:e.metadata.lastSignInTime}get userIdSRV(){if(console.log("111111111111111111111111111111111111111111111111111111111111111"),this._auth.currentUser!=null){console.log("eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee");const e=this._auth.currentUser.displayName;return e!==null&&e.includes("&&")&&e.includes("+")?this.userPhoneSRV:this._auth.currentUser.uid}return""}get userDataSRV(){return this._auth.currentUser}async userClaimsSRV(){return this._auth.currentUser===null?null:(await this._auth.currentUser.getIdToken(!0),(await this._auth.currentUser.getIdTokenResult()).claims)}get userPhoneSRV(){if(this._auth.currentUser!==null){const t=this._auth.currentUser.displayName.split("&&")[1];return this._auth.currentUser.phoneNumber.replace(t,`${t}-`)}return""}get existsProvidersSRV(){if(this._auth.currentUser===null)return new Set;const e=new Set;return this._auth.currentUser.providerData.forEach(t=>{e.add(t.providerId)}),e}async deleteUserSRV(){if(this._auth.currentUser===null)return!1;try{return await this._auth.currentUser.delete(),!0}catch{return!1}}async unlinkProviderSRV({providerId:e}){try{return ad(this._auth.currentUser,e),!0}catch{return!1}}async reloadUserSRV(){this._auth.currentUser!==null&&await this._auth.currentUser.reload()}async logoutSRV(){try{return await this._auth.signOut(),!this.isLoggedInSRV}catch{return!1}}}class Ff extends Sf{constructor(){super()}async signInWithGoogle(e){return await this.signInWithGoogleSRV(e)}async signInWithApple(e){return await this.signInWithAppleSRV(e)}async signInWithFacebook(e){return await this.signInWithFacebookSRV(e)}onAuthUserStateChanged(e){return this.onAuthUserStateChangedSRV(e)}async signInWithOtp({loginType:e,verificationId:t,otp:r,autocredential:n}){return await this.signInWithOtpSRV({loginType:e,verificationId:t,otp:r,autocredential:n})}async logout(){return await this.logoutSRV()}async unlinkProvider({providerId:e}){return await this.unlinkProviderSRV({providerId:e})}async deleteUser(){return await this.deleteUserSRV()}async reloadUser(){await this.reloadUserSRV()}userConnectedOnlyLocally(){return this.userConnectedOnlyLocallySRV()}async updateUserName({name:e}){try{return await this.updateUserNameSRV(e),!0}catch(t){return console.error(`Error occurred while saving user name --> ${t}`),!1}}get isLoggedIn(){return this.isLoggedInSRV}get existsProviders(){return this.existsProvidersSRV}get userData(){return this.userDataSRV}get userId(){return this.userIdSRV}get lastLoginDate(){return this.lastLoginDateSRV}async userClaims(){return await this.userClaimsSRV}}const Mf="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU2LjY5MyA1Ni42OTMiIGhlaWdodD0iNTYuNjkzcHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA1Ni42OTMgNTYuNjkzIiB3aWR0aD0iNTYuNjkzcHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik00MS43NzcsMzAuNTE3Yy0wLjA2Mi02LjIzMiw1LjA4Mi05LjIyMSw1LjMxMi05LjM3MmMtMi44OTEtNC4yMjctNy4zOTUtNC44MDctOC45OTgtNC44NzMgICBjLTMuODMtMC4zODktNy40NzcsMi4yNTYtOS40MiwyLjI1NmMtMS45MzksMC00Ljk0MS0yLjE5OS04LjExNy0yLjE0M2MtNC4xNzgsMC4wNjItOC4wMjksMi40My0xMC4xNzksNi4xNyAgIGMtNC4zMzksNy41MjctMS4xMSwxOC42ODIsMy4xMTgsMjQuNzkxYzIuMDY3LDIuOTg2LDQuNTMyLDYuMzQ2LDcuNzY2LDYuMjIzYzMuMTE3LTAuMTIzLDQuMjkzLTIuMDE2LDguMDYxLTIuMDE2ICAgczQuODI2LDIuMDE2LDguMTIzLDEuOTUzYzMuMzUyLTAuMDYxLDUuNDc3LTMuMDQzLDcuNTI3LTYuMDQxYzIuMzczLTMuNDY5LDMuMzUtNi44MjgsMy40MDgtNi45OTggICBDNDguMzA1LDQwLjQzMyw0MS44NDQsMzcuOTU4LDQxLjc3NywzMC41MTd6Ii8+PHBhdGggZD0iTTM1LjU4MiwxMi4yMjljMS43MTUtMi4wODIsMi44NzctNC45NzUsMi41NjEtNy44NTVjLTIuNDc1LDAuMS01LjQ3MSwxLjY0NS03LjI0OCwzLjcyNSAgIGMtMS41OTIsMS44NDYtMi45ODQsNC43ODUtMi42MTEsNy42MTNDMzEuMDQ1LDE1LjkyNiwzMy44NjEsMTQuMzA3LDM1LjU4MiwxMi4yMjl6Ii8+PC9nPjwvc3ZnPg==",Of="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20id='Layer_1'%20style='enable-background:new%200%200%201000%201000;'%20version='1.1'%20viewBox='0%200%201000%201000'%20xml:space='preserve'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%233B579D;}%20.st1{fill:%23FFFFFF;}%20%3c/style%3e%3ctitle/%3e%3cg%3e%3cpath%20class='st0'%20d='M500,1000L500,1000C223.9,1000,0,776.1,0,500v0C0,223.9,223.9,0,500,0h0c276.1,0,500,223.9,500,500v0%20C1000,776.1,776.1,1000,500,1000z'/%3e%3cpath%20class='st1'%20d='M630,1000V612.7h130l19.5-150.9H630v-96.4c0-43.7,12.1-73.5,74.8-73.5l79.9,0V157%20c-13.8-1.8-61.3-5.9-116.5-5.9c-115.2,0-194.1,70.3-194.1,199.5v111.3H343.8v150.9h130.3V1000H630z'%20id='f'/%3e%3c/g%3e%3c/svg%3e",Rf="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEyOCAxMjgiIGlkPSJTb2NpYWxfSWNvbnMiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnIGlkPSJfeDMxX19zdHJva2UiPjxnIGlkPSJHb29nbGUiPjxyZWN0IGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBoZWlnaHQ9IjEyOCIgd2lkdGg9IjEyOCIvPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI3LjU4NSw2NGMwLTQuMTU3LDAuNjktOC4xNDMsMS45MjMtMTEuODgxTDcuOTM4LDM1LjY0OCAgICBDMy43MzQsNDQuMTgzLDEuMzY2LDUzLjgwMSwxLjM2Niw2NGMwLDEwLjE5MSwyLjM2NiwxOS44MDIsNi41NjMsMjguMzMybDIxLjU1OC0xNi41MDNDMjguMjY2LDcyLjEwOCwyNy41ODUsNjguMTM3LDI3LjU4NSw2NCIgZmlsbD0iI0ZCQkMwNSIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNjUuNDU3LDI2LjE4MmM5LjAzMSwwLDE3LjE4OCwzLjIsMjMuNTk3LDguNDM2TDEwNy42OTgsMTYgICAgQzk2LjMzNyw2LjEwOSw4MS43NzEsMCw2NS40NTcsMEM0MC4xMjksMCwxOC4zNjEsMTQuNDg0LDcuOTM4LDM1LjY0OGwyMS41NjksMTYuNDcxQzM0LjQ3NywzNy4wMzMsNDguNjQ0LDI2LjE4Miw2NS40NTcsMjYuMTgyIiBmaWxsPSIjRUE0MzM1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02NS40NTcsMTAxLjgxOGMtMTYuODEyLDAtMzAuOTc5LTEwLjg1MS0zNS45NDktMjUuOTM3ICAgIEw3LjkzOCw5Mi4zNDlDMTguMzYxLDExMy41MTYsNDAuMTI5LDEyOCw2NS40NTcsMTI4YzE1LjYzMiwwLDMwLjU1Ny01LjU1MSw0MS43NTgtMTUuOTUxTDg2Ljc0MSw5Ni4yMjEgICAgQzgwLjk2NCw5OS44Niw3My42ODksMTAxLjgxOCw2NS40NTcsMTAxLjgxOCIgZmlsbD0iIzM0QTg1MyIgZmlsbC1ydWxlPSJldmVub2RkIi8+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTI2LjYzNCw2NGMwLTMuNzgyLTAuNTgzLTcuODU1LTEuNDU3LTExLjYzNkg2NS40NTd2MjQuNzI3ICAgIGgzNC4zNzZjLTEuNzE5LDguNDMxLTYuMzk3LDE0LjkxMi0xMy4wOTIsMTkuMTNsMjAuNDc0LDE1LjgyOEMxMTguOTgxLDEwMS4xMjksMTI2LjYzNCw4NC44NjEsMTI2LjYzNCw2NCIgZmlsbD0iIzQyODVGNCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9nPjwvZz48L3N2Zz4=";var P0=(i=>(i[i.Apple=0]="Apple",i[i.Google=1]="Google",i[i.Facebook=2]="Facebook",i[i.Phone=3]="Phone",i))(P0||{});const gp={0:"Apple",1:"Google",2:"Facebook",3:"Phone"},wp=[1,2,0,3],wa={Apple:0,Google:1,Facebook:2,Phone:3},vp={0:Mf,1:Rf,2:Of,3:"Phone"},yp={0:"apple.com",1:"google.com",2:"facebook.com",3:"phone"};class vr{constructor({businessId:e,shopPhone:t,type:r,adress:n,ownerName:s,iconUrl:a,businessName:u}){o(this,"businessName","");o(this,"iconUrl","");o(this,"businessId","");o(this,"type",Ht.Other);o(this,"adress","");o(this,"ownerName","");o(this,"shopPhone","");this.businessId=e,this.shopPhone=t,this.type=r,this.adress=n,this.ownerName=s,this.iconUrl=a,this.businessName=u}static empty(){return new vr({businessId:"",shopPhone:"",type:Ht.Other,adress:"",ownerName:"",iconUrl:"",businessName:""})}static fromJson(e,t){const r=e.businessName||"",n=e.iconUrl||"",s=To[e.T]||Ht.Other,a=e.ON||"",u=e.SP||"",c=e.A||"";return new vr({businessId:t,shopPhone:u,type:s,adress:c,ownerName:a,iconUrl:n,businessName:r})}get toBusinessModel(){const e=new Bt({businessId:this.businessId,design:new Je({shopIconUrl:this.iconUrl})});return e.ownersName=this.ownerName,e.shopPhone=this.shopPhone,e.shopName=this.businessName,e.adress=this.adress,e.businesseType=this.type,e}static fromBusinessInfo(e){return new vr({businessId:e.businessId,shopPhone:e.shopPhone,type:e.type,adress:e.adress,ownerName:e.ownerName,iconUrl:e.iconUrl,businessName:e.businessName})}toJson(){const e={};return e.businessName=this.businessName,e.iconUrl=this.iconUrl,e.ON=this.ownerName,e.SP=this.shopPhone,e.A=this.adress,e.T=nu[this.type],e}isTheSame(e){return e.iconUrl===this.iconUrl&&e.ownerName===this.ownerName&&e.shopPhone===this.shopPhone&&e.adress===this.adress&&e.type===this.type&&e.businessName===this.businessName}toString(){return JSON.stringify(this.toJson())}}function Lf({booking:i,worker:e,notificationOption:t,customHsEnoughMessages:r}){if(t=t||(e==null?void 0:e.notifications.notificationOption),!t)return U.none;const n=r||Ze.GI().business.businessData.messagesCounter>1;switch(t){case te.OnlyPush:return Object.values(i.userFcms).length===0?U.none:U.push;case te.SMSOnly:return!i.canSendMessage||!n?U.none:U.message;case te.WhatAppOnly:return!i.canSendMessage||!n?U.none:U.whatsapp;case te.PushOrSMS:return Object.values(i.userFcms).length>0?U.push:!i.canSendMessage||!n?U.none:U.message;case te.PushOrWhatsApp:return Object.values(i.userFcms).length>0?U.push:!i.canSendMessage||!n?U.none:U.whatsapp;case te.SMSOrPush:return i.canSendMessage&&n?U.message:Object.values(i.userFcms).length>0?U.push:U.none;case te.WhatsAppOrPush:return i.canSendMessage&&n?U.whatsapp:Object.values(i.userFcms).length>0?U.push:U.none;default:return U.none}}function Uf(i,e){const t=Ze.GI().business.businessData.messagesCounter>1;switch(e.notifications.notificationOption){case te.OnlyPush:return Object.keys(i.userFcms).length===0?U.none:U.push;case te.SMSOnly:return!i.canSendMessage||!t?U.none:U.message;case te.WhatAppOnly:return!i.canSendMessage||!t?U.none:U.whatsapp;case te.PushOrSMS:return Object.values(i.userFcms).length>0?U.push:!i.canSendMessage||!t?U.none:U.message;case te.PushOrWhatsApp:return Object.values(i.userFcms).length>0?U.push:!i.canSendMessage||!t?U.none:U.whatsapp;case te.SMSOrPush:return i.canSendMessage&&t?U.message:Object.values(i.userFcms).length>0?U.push:U.none;case te.WhatsAppOrPush:return i.canSendMessage&&t?U.whatsapp:Object.values(i.userFcms).length>0?U.push:U.none;default:return U.none}}var B0={exports:{}};function Wf(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zi={exports:{}};const Hf={},Vf=Object.freeze(Object.defineProperty({__proto__:null,default:Hf},Symbol.toStringTag,{value:"Module"})),zf=Cc(Vf);var va;function q(){return va||(va=1,function(i,e){(function(t,r){i.exports=r()})(z,function(){var t=t||function(r,n){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof z<"u"&&z.crypto&&(s=z.crypto),!s&&typeof Wf=="function")try{s=zf}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},u=Object.create||function(){function m(){}return function(p){var v;return m.prototype=p,v=new m,m.prototype=null,v}}(),c={},h=c.lib={},l=h.Base=function(){return{extend:function(m){var p=u(this);return m&&p.mixIn(m),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var p in m)m.hasOwnProperty(p)&&(this[p]=m[p]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=h.WordArray=l.extend({init:function(m,p){m=this.words=m||[],p!=n?this.sigBytes=p:this.sigBytes=m.length*4},toString:function(m){return(m||x).stringify(this)},concat:function(m){var p=this.words,v=m.words,C=this.sigBytes,I=m.sigBytes;if(this.clamp(),C%4)for(var D=0;D<I;D++){var A=v[D>>>2]>>>24-D%4*8&255;p[C+D>>>2]|=A<<24-(C+D)%4*8}else for(var _=0;_<I;_+=4)p[C+_>>>2]=v[_>>>2];return this.sigBytes+=I,this},clamp:function(){var m=this.words,p=this.sigBytes;m[p>>>2]&=4294967295<<32-p%4*8,m.length=r.ceil(p/4)},clone:function(){var m=l.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var p=[],v=0;v<m;v+=4)p.push(a());return new d.init(p,m)}}),f=c.enc={},x=f.Hex={stringify:function(m){for(var p=m.words,v=m.sigBytes,C=[],I=0;I<v;I++){var D=p[I>>>2]>>>24-I%4*8&255;C.push((D>>>4).toString(16)),C.push((D&15).toString(16))}return C.join("")},parse:function(m){for(var p=m.length,v=[],C=0;C<p;C+=2)v[C>>>3]|=parseInt(m.substr(C,2),16)<<24-C%8*4;return new d.init(v,p/2)}},g=f.Latin1={stringify:function(m){for(var p=m.words,v=m.sigBytes,C=[],I=0;I<v;I++){var D=p[I>>>2]>>>24-I%4*8&255;C.push(String.fromCharCode(D))}return C.join("")},parse:function(m){for(var p=m.length,v=[],C=0;C<p;C++)v[C>>>2]|=(m.charCodeAt(C)&255)<<24-C%4*8;return new d.init(v,p)}},y=f.Utf8={stringify:function(m){try{return decodeURIComponent(escape(g.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return g.parse(unescape(encodeURIComponent(m)))}},w=h.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=y.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var p,v=this._data,C=v.words,I=v.sigBytes,D=this.blockSize,A=D*4,_=I/A;m?_=r.ceil(_):_=r.max((_|0)-this._minBufferSize,0);var b=_*D,E=r.min(b*4,I);if(b){for(var P=0;P<b;P+=D)this._doProcessBlock(C,P);p=C.splice(0,b),v.sigBytes-=E}return new d.init(p,E)},clone:function(){var m=l.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0});h.Hasher=w.extend({cfg:l.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var p=this._doFinalize();return p},blockSize:16,_createHelper:function(m){return function(p,v){return new m.init(v).finalize(p)}},_createHmacHelper:function(m){return function(p,v){return new k.HMAC.init(m,v).finalize(p)}}});var k=c.algo={};return c}(Math);return t})}(zi)),zi.exports}var $i={exports:{}},ya;function Ci(){return ya||(ya=1,function(i,e){(function(t,r){i.exports=r(q())})(z,function(t){return function(r){var n=t,s=n.lib,a=s.Base,u=s.WordArray,c=n.x64={};c.Word=a.extend({init:function(h,l){this.high=h,this.low=l}}),c.WordArray=a.extend({init:function(h,l){h=this.words=h||[],l!=r?this.sigBytes=l:this.sigBytes=h.length*8},toX32:function(){for(var h=this.words,l=h.length,d=[],f=0;f<l;f++){var x=h[f];d.push(x.high),d.push(x.low)}return u.create(d,this.sigBytes)},clone:function(){for(var h=a.clone.call(this),l=h.words=this.words.slice(0),d=l.length,f=0;f<d;f++)l[f]=l[f].clone();return h}})}(),t})}($i)),$i.exports}var qi={exports:{}},Da;function $f(){return Da||(Da=1,function(i,e){(function(t,r){i.exports=r(q())})(z,function(t){return function(){if(typeof ArrayBuffer=="function"){var r=t,n=r.lib,s=n.WordArray,a=s.init,u=s.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var h=c.byteLength,l=[],d=0;d<h;d++)l[d>>>2]|=c[d]<<24-d%4*8;a.call(this,l,h)}else a.apply(this,arguments)};u.prototype=s}}(),t.lib.WordArray})}(qi)),qi.exports}var Gi={exports:{}},ba;function qf(){return ba||(ba=1,function(i,e){(function(t,r){i.exports=r(q())})(z,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=r.enc;a.Utf16=a.Utf16BE={stringify:function(c){for(var h=c.words,l=c.sigBytes,d=[],f=0;f<l;f+=2){var x=h[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(x))}return d.join("")},parse:function(c){for(var h=c.length,l=[],d=0;d<h;d++)l[d>>>1]|=c.charCodeAt(d)<<16-d%2*16;return s.create(l,h*2)}},a.Utf16LE={stringify:function(c){for(var h=c.words,l=c.sigBytes,d=[],f=0;f<l;f+=2){var x=u(h[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(x))}return d.join("")},parse:function(c){for(var h=c.length,l=[],d=0;d<h;d++)l[d>>>1]|=u(c.charCodeAt(d)<<16-d%2*16);return s.create(l,h*2)}};function u(c){return c<<8&4278255360|c>>>8&16711935}}(),t.enc.Utf16})}(Gi)),Gi.exports}var Yi={exports:{}},ka;function _t(){return ka||(ka=1,function(i,e){(function(t,r){i.exports=r(q())})(z,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=r.enc;a.Base64={stringify:function(c){var h=c.words,l=c.sigBytes,d=this._map;c.clamp();for(var f=[],x=0;x<l;x+=3)for(var g=h[x>>>2]>>>24-x%4*8&255,y=h[x+1>>>2]>>>24-(x+1)%4*8&255,w=h[x+2>>>2]>>>24-(x+2)%4*8&255,k=g<<16|y<<8|w,m=0;m<4&&x+m*.75<l;m++)f.push(d.charAt(k>>>6*(3-m)&63));var p=d.charAt(64);if(p)for(;f.length%4;)f.push(p);return f.join("")},parse:function(c){var h=c.length,l=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<l.length;f++)d[l.charCodeAt(f)]=f}var x=l.charAt(64);if(x){var g=c.indexOf(x);g!==-1&&(h=g)}return u(c,h,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function u(c,h,l){for(var d=[],f=0,x=0;x<h;x++)if(x%4){var g=l[c.charCodeAt(x-1)]<<x%4*2,y=l[c.charCodeAt(x)]>>>6-x%4*2,w=g|y;d[f>>>2]|=w<<24-f%4*8,f++}return s.create(d,f)}}(),t.enc.Base64})}(Yi)),Yi.exports}var Ji={exports:{}},Ia;function Gf(){return Ia||(Ia=1,function(i,e){(function(t,r){i.exports=r(q())})(z,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=r.enc;a.Base64url={stringify:function(c,h){h===void 0&&(h=!0);var l=c.words,d=c.sigBytes,f=h?this._safe_map:this._map;c.clamp();for(var x=[],g=0;g<d;g+=3)for(var y=l[g>>>2]>>>24-g%4*8&255,w=l[g+1>>>2]>>>24-(g+1)%4*8&255,k=l[g+2>>>2]>>>24-(g+2)%4*8&255,m=y<<16|w<<8|k,p=0;p<4&&g+p*.75<d;p++)x.push(f.charAt(m>>>6*(3-p)&63));var v=f.charAt(64);if(v)for(;x.length%4;)x.push(v);return x.join("")},parse:function(c,h){h===void 0&&(h=!0);var l=c.length,d=h?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var x=0;x<d.length;x++)f[d.charCodeAt(x)]=x}var g=d.charAt(64);if(g){var y=c.indexOf(g);y!==-1&&(l=y)}return u(c,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function u(c,h,l){for(var d=[],f=0,x=0;x<h;x++)if(x%4){var g=l[c.charCodeAt(x-1)]<<x%4*2,y=l[c.charCodeAt(x)]>>>6-x%4*2,w=g|y;d[f>>>2]|=w<<24-f%4*8,f++}return s.create(d,f)}}(),t.enc.Base64url})}(Ji)),Ji.exports}var Ki={exports:{}},Ca;function Nt(){return Ca||(Ca=1,function(i,e){(function(t,r){i.exports=r(q())})(z,function(t){return function(r){var n=t,s=n.lib,a=s.WordArray,u=s.Hasher,c=n.algo,h=[];(function(){for(var y=0;y<64;y++)h[y]=r.abs(r.sin(y+1))*4294967296|0})();var l=c.MD5=u.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(y,w){for(var k=0;k<16;k++){var m=w+k,p=y[m];y[m]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360}var v=this._hash.words,C=y[w+0],I=y[w+1],D=y[w+2],A=y[w+3],_=y[w+4],b=y[w+5],E=y[w+6],P=y[w+7],B=y[w+8],M=y[w+9],L=y[w+10],V=y[w+11],re=y[w+12],Q=y[w+13],j=y[w+14],Z=y[w+15],T=v[0],S=v[1],F=v[2],N=v[3];T=d(T,S,F,N,C,7,h[0]),N=d(N,T,S,F,I,12,h[1]),F=d(F,N,T,S,D,17,h[2]),S=d(S,F,N,T,A,22,h[3]),T=d(T,S,F,N,_,7,h[4]),N=d(N,T,S,F,b,12,h[5]),F=d(F,N,T,S,E,17,h[6]),S=d(S,F,N,T,P,22,h[7]),T=d(T,S,F,N,B,7,h[8]),N=d(N,T,S,F,M,12,h[9]),F=d(F,N,T,S,L,17,h[10]),S=d(S,F,N,T,V,22,h[11]),T=d(T,S,F,N,re,7,h[12]),N=d(N,T,S,F,Q,12,h[13]),F=d(F,N,T,S,j,17,h[14]),S=d(S,F,N,T,Z,22,h[15]),T=f(T,S,F,N,I,5,h[16]),N=f(N,T,S,F,E,9,h[17]),F=f(F,N,T,S,V,14,h[18]),S=f(S,F,N,T,C,20,h[19]),T=f(T,S,F,N,b,5,h[20]),N=f(N,T,S,F,L,9,h[21]),F=f(F,N,T,S,Z,14,h[22]),S=f(S,F,N,T,_,20,h[23]),T=f(T,S,F,N,M,5,h[24]),N=f(N,T,S,F,j,9,h[25]),F=f(F,N,T,S,A,14,h[26]),S=f(S,F,N,T,B,20,h[27]),T=f(T,S,F,N,Q,5,h[28]),N=f(N,T,S,F,D,9,h[29]),F=f(F,N,T,S,P,14,h[30]),S=f(S,F,N,T,re,20,h[31]),T=x(T,S,F,N,b,4,h[32]),N=x(N,T,S,F,B,11,h[33]),F=x(F,N,T,S,V,16,h[34]),S=x(S,F,N,T,j,23,h[35]),T=x(T,S,F,N,I,4,h[36]),N=x(N,T,S,F,_,11,h[37]),F=x(F,N,T,S,P,16,h[38]),S=x(S,F,N,T,L,23,h[39]),T=x(T,S,F,N,Q,4,h[40]),N=x(N,T,S,F,C,11,h[41]),F=x(F,N,T,S,A,16,h[42]),S=x(S,F,N,T,E,23,h[43]),T=x(T,S,F,N,M,4,h[44]),N=x(N,T,S,F,re,11,h[45]),F=x(F,N,T,S,Z,16,h[46]),S=x(S,F,N,T,D,23,h[47]),T=g(T,S,F,N,C,6,h[48]),N=g(N,T,S,F,P,10,h[49]),F=g(F,N,T,S,j,15,h[50]),S=g(S,F,N,T,b,21,h[51]),T=g(T,S,F,N,re,6,h[52]),N=g(N,T,S,F,A,10,h[53]),F=g(F,N,T,S,L,15,h[54]),S=g(S,F,N,T,I,21,h[55]),T=g(T,S,F,N,B,6,h[56]),N=g(N,T,S,F,Z,10,h[57]),F=g(F,N,T,S,E,15,h[58]),S=g(S,F,N,T,Q,21,h[59]),T=g(T,S,F,N,_,6,h[60]),N=g(N,T,S,F,V,10,h[61]),F=g(F,N,T,S,D,15,h[62]),S=g(S,F,N,T,M,21,h[63]),v[0]=v[0]+T|0,v[1]=v[1]+S|0,v[2]=v[2]+F|0,v[3]=v[3]+N|0},_doFinalize:function(){var y=this._data,w=y.words,k=this._nDataBytes*8,m=y.sigBytes*8;w[m>>>5]|=128<<24-m%32;var p=r.floor(k/4294967296),v=k;w[(m+64>>>9<<4)+15]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,w[(m+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,y.sigBytes=(w.length+1)*4,this._process();for(var C=this._hash,I=C.words,D=0;D<4;D++){var A=I[D];I[D]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return C},clone:function(){var y=u.clone.call(this);return y._hash=this._hash.clone(),y}});function d(y,w,k,m,p,v,C){var I=y+(w&k|~w&m)+p+C;return(I<<v|I>>>32-v)+w}function f(y,w,k,m,p,v,C){var I=y+(w&m|k&~m)+p+C;return(I<<v|I>>>32-v)+w}function x(y,w,k,m,p,v,C){var I=y+(w^k^m)+p+C;return(I<<v|I>>>32-v)+w}function g(y,w,k,m,p,v,C){var I=y+(k^(w|~m))+p+C;return(I<<v|I>>>32-v)+w}n.MD5=u._createHelper(l),n.HmacMD5=u._createHmacHelper(l)}(Math),t.MD5})}(Ki)),Ki.exports}var Qi={exports:{}},Aa;function _0(){return Aa||(Aa=1,function(i,e){(function(t,r){i.exports=r(q())})(z,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=n.Hasher,u=r.algo,c=[],h=u.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(l,d){for(var f=this._hash.words,x=f[0],g=f[1],y=f[2],w=f[3],k=f[4],m=0;m<80;m++){if(m<16)c[m]=l[d+m]|0;else{var p=c[m-3]^c[m-8]^c[m-14]^c[m-16];c[m]=p<<1|p>>>31}var v=(x<<5|x>>>27)+k+c[m];m<20?v+=(g&y|~g&w)+1518500249:m<40?v+=(g^y^w)+1859775393:m<60?v+=(g&y|g&w|y&w)-1894007588:v+=(g^y^w)-899497514,k=w,w=y,y=g<<30|g>>>2,g=x,x=v}f[0]=f[0]+x|0,f[1]=f[1]+g|0,f[2]=f[2]+y|0,f[3]=f[3]+w|0,f[4]=f[4]+k|0},_doFinalize:function(){var l=this._data,d=l.words,f=this._nDataBytes*8,x=l.sigBytes*8;return d[x>>>5]|=128<<24-x%32,d[(x+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(x+64>>>9<<4)+15]=f,l.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var l=a.clone.call(this);return l._hash=this._hash.clone(),l}});r.SHA1=a._createHelper(h),r.HmacSHA1=a._createHmacHelper(h)}(),t.SHA1})}(Qi)),Qi.exports}var Xi={exports:{}},Ea;function hs(){return Ea||(Ea=1,function(i,e){(function(t,r){i.exports=r(q())})(z,function(t){return function(r){var n=t,s=n.lib,a=s.WordArray,u=s.Hasher,c=n.algo,h=[],l=[];(function(){function x(k){for(var m=r.sqrt(k),p=2;p<=m;p++)if(!(k%p))return!1;return!0}function g(k){return(k-(k|0))*4294967296|0}for(var y=2,w=0;w<64;)x(y)&&(w<8&&(h[w]=g(r.pow(y,1/2))),l[w]=g(r.pow(y,1/3)),w++),y++})();var d=[],f=c.SHA256=u.extend({_doReset:function(){this._hash=new a.init(h.slice(0))},_doProcessBlock:function(x,g){for(var y=this._hash.words,w=y[0],k=y[1],m=y[2],p=y[3],v=y[4],C=y[5],I=y[6],D=y[7],A=0;A<64;A++){if(A<16)d[A]=x[g+A]|0;else{var _=d[A-15],b=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,E=d[A-2],P=(E<<15|E>>>17)^(E<<13|E>>>19)^E>>>10;d[A]=b+d[A-7]+P+d[A-16]}var B=v&C^~v&I,M=w&k^w&m^k&m,L=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),V=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),re=D+V+B+l[A]+d[A],Q=L+M;D=I,I=C,C=v,v=p+re|0,p=m,m=k,k=w,w=re+Q|0}y[0]=y[0]+w|0,y[1]=y[1]+k|0,y[2]=y[2]+m|0,y[3]=y[3]+p|0,y[4]=y[4]+v|0,y[5]=y[5]+C|0,y[6]=y[6]+I|0,y[7]=y[7]+D|0},_doFinalize:function(){var x=this._data,g=x.words,y=this._nDataBytes*8,w=x.sigBytes*8;return g[w>>>5]|=128<<24-w%32,g[(w+64>>>9<<4)+14]=r.floor(y/4294967296),g[(w+64>>>9<<4)+15]=y,x.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var x=u.clone.call(this);return x._hash=this._hash.clone(),x}});n.SHA256=u._createHelper(f),n.HmacSHA256=u._createHmacHelper(f)}(Math),t.SHA256})}(Xi)),Xi.exports}var Zi={exports:{}},Ta;function Yf(){return Ta||(Ta=1,function(i,e){(function(t,r,n){i.exports=r(q(),hs())})(z,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=r.algo,u=a.SHA256,c=a.SHA224=u.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var h=u._doFinalize.call(this);return h.sigBytes-=4,h}});r.SHA224=u._createHelper(c),r.HmacSHA224=u._createHmacHelper(c)}(),t.SHA224})}(Zi)),Zi.exports}var ji={exports:{}},Pa;function N0(){return Pa||(Pa=1,function(i,e){(function(t,r,n){i.exports=r(q(),Ci())})(z,function(t){return function(){var r=t,n=r.lib,s=n.Hasher,a=r.x64,u=a.Word,c=a.WordArray,h=r.algo;function l(){return u.create.apply(u,arguments)}var d=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],f=[];(function(){for(var g=0;g<80;g++)f[g]=l()})();var x=h.SHA512=s.extend({_doReset:function(){this._hash=new c.init([new u.init(1779033703,4089235720),new u.init(3144134277,2227873595),new u.init(1013904242,4271175723),new u.init(2773480762,1595750129),new u.init(1359893119,2917565137),new u.init(2600822924,725511199),new u.init(528734635,4215389547),new u.init(1541459225,327033209)])},_doProcessBlock:function(g,y){for(var w=this._hash.words,k=w[0],m=w[1],p=w[2],v=w[3],C=w[4],I=w[5],D=w[6],A=w[7],_=k.high,b=k.low,E=m.high,P=m.low,B=p.high,M=p.low,L=v.high,V=v.low,re=C.high,Q=C.low,j=I.high,Z=I.low,T=D.high,S=D.low,F=A.high,N=A.low,ie=_,ee=b,we=E,$=P,ar=B,St=M,Ti=L,or=V,Pe=re,be=Q,Lr=j,cr=Z,Ur=T,ur=S,Pi=F,hr=N,Be=0;Be<80;Be++){var Ae,nt,Wr=f[Be];if(Be<16)nt=Wr.high=g[y+Be*2]|0,Ae=Wr.low=g[y+Be*2+1]|0;else{var Is=f[Be-15],Ft=Is.high,lr=Is.low,H0=(Ft>>>1|lr<<31)^(Ft>>>8|lr<<24)^Ft>>>7,Cs=(lr>>>1|Ft<<31)^(lr>>>8|Ft<<24)^(lr>>>7|Ft<<25),As=f[Be-2],Mt=As.high,dr=As.low,V0=(Mt>>>19|dr<<13)^(Mt<<3|dr>>>29)^Mt>>>6,Es=(dr>>>19|Mt<<13)^(dr<<3|Mt>>>29)^(dr>>>6|Mt<<26),Ts=f[Be-7],z0=Ts.high,$0=Ts.low,Ps=f[Be-16],q0=Ps.high,Bs=Ps.low;Ae=Cs+$0,nt=H0+z0+(Ae>>>0<Cs>>>0?1:0),Ae=Ae+Es,nt=nt+V0+(Ae>>>0<Es>>>0?1:0),Ae=Ae+Bs,nt=nt+q0+(Ae>>>0<Bs>>>0?1:0),Wr.high=nt,Wr.low=Ae}var G0=Pe&Lr^~Pe&Ur,_s=be&cr^~be&ur,Y0=ie&we^ie&ar^we&ar,J0=ee&$^ee&St^$&St,K0=(ie>>>28|ee<<4)^(ie<<30|ee>>>2)^(ie<<25|ee>>>7),Ns=(ee>>>28|ie<<4)^(ee<<30|ie>>>2)^(ee<<25|ie>>>7),Q0=(Pe>>>14|be<<18)^(Pe>>>18|be<<14)^(Pe<<23|be>>>9),X0=(be>>>14|Pe<<18)^(be>>>18|Pe<<14)^(be<<23|Pe>>>9),Ss=d[Be],Z0=Ss.high,Fs=Ss.low,ke=hr+X0,st=Pi+Q0+(ke>>>0<hr>>>0?1:0),ke=ke+_s,st=st+G0+(ke>>>0<_s>>>0?1:0),ke=ke+Fs,st=st+Z0+(ke>>>0<Fs>>>0?1:0),ke=ke+Ae,st=st+nt+(ke>>>0<Ae>>>0?1:0),Ms=Ns+J0,j0=K0+Y0+(Ms>>>0<Ns>>>0?1:0);Pi=Ur,hr=ur,Ur=Lr,ur=cr,Lr=Pe,cr=be,be=or+ke|0,Pe=Ti+st+(be>>>0<or>>>0?1:0)|0,Ti=ar,or=St,ar=we,St=$,we=ie,$=ee,ee=ke+Ms|0,ie=st+j0+(ee>>>0<ke>>>0?1:0)|0}b=k.low=b+ee,k.high=_+ie+(b>>>0<ee>>>0?1:0),P=m.low=P+$,m.high=E+we+(P>>>0<$>>>0?1:0),M=p.low=M+St,p.high=B+ar+(M>>>0<St>>>0?1:0),V=v.low=V+or,v.high=L+Ti+(V>>>0<or>>>0?1:0),Q=C.low=Q+be,C.high=re+Pe+(Q>>>0<be>>>0?1:0),Z=I.low=Z+cr,I.high=j+Lr+(Z>>>0<cr>>>0?1:0),S=D.low=S+ur,D.high=T+Ur+(S>>>0<ur>>>0?1:0),N=A.low=N+hr,A.high=F+Pi+(N>>>0<hr>>>0?1:0)},_doFinalize:function(){var g=this._data,y=g.words,w=this._nDataBytes*8,k=g.sigBytes*8;y[k>>>5]|=128<<24-k%32,y[(k+128>>>10<<5)+30]=Math.floor(w/4294967296),y[(k+128>>>10<<5)+31]=w,g.sigBytes=y.length*4,this._process();var m=this._hash.toX32();return m},clone:function(){var g=s.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:1024/32});r.SHA512=s._createHelper(x),r.HmacSHA512=s._createHmacHelper(x)}(),t.SHA512})}(ji)),ji.exports}var en={exports:{}},Ba;function Jf(){return Ba||(Ba=1,function(i,e){(function(t,r,n){i.exports=r(q(),Ci(),N0())})(z,function(t){return function(){var r=t,n=r.x64,s=n.Word,a=n.WordArray,u=r.algo,c=u.SHA512,h=u.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var l=c._doFinalize.call(this);return l.sigBytes-=16,l}});r.SHA384=c._createHelper(h),r.HmacSHA384=c._createHmacHelper(h)}(),t.SHA384})}(en)),en.exports}var tn={exports:{}},_a;function Kf(){return _a||(_a=1,function(i,e){(function(t,r,n){i.exports=r(q(),Ci())})(z,function(t){return function(r){var n=t,s=n.lib,a=s.WordArray,u=s.Hasher,c=n.x64,h=c.Word,l=n.algo,d=[],f=[],x=[];(function(){for(var w=1,k=0,m=0;m<24;m++){d[w+5*k]=(m+1)*(m+2)/2%64;var p=k%5,v=(2*w+3*k)%5;w=p,k=v}for(var w=0;w<5;w++)for(var k=0;k<5;k++)f[w+5*k]=k+(2*w+3*k)%5*5;for(var C=1,I=0;I<24;I++){for(var D=0,A=0,_=0;_<7;_++){if(C&1){var b=(1<<_)-1;b<32?A^=1<<b:D^=1<<b-32}C&128?C=C<<1^113:C<<=1}x[I]=h.create(D,A)}})();var g=[];(function(){for(var w=0;w<25;w++)g[w]=h.create()})();var y=l.SHA3=u.extend({cfg:u.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],k=0;k<25;k++)w[k]=new h.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,k){for(var m=this._state,p=this.blockSize/2,v=0;v<p;v++){var C=w[k+2*v],I=w[k+2*v+1];C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360;var D=m[v];D.high^=I,D.low^=C}for(var A=0;A<24;A++){for(var _=0;_<5;_++){for(var b=0,E=0,P=0;P<5;P++){var D=m[_+5*P];b^=D.high,E^=D.low}var B=g[_];B.high=b,B.low=E}for(var _=0;_<5;_++)for(var M=g[(_+4)%5],L=g[(_+1)%5],V=L.high,re=L.low,b=M.high^(V<<1|re>>>31),E=M.low^(re<<1|V>>>31),P=0;P<5;P++){var D=m[_+5*P];D.high^=b,D.low^=E}for(var Q=1;Q<25;Q++){var b,E,D=m[Q],j=D.high,Z=D.low,T=d[Q];T<32?(b=j<<T|Z>>>32-T,E=Z<<T|j>>>32-T):(b=Z<<T-32|j>>>64-T,E=j<<T-32|Z>>>64-T);var S=g[f[Q]];S.high=b,S.low=E}var F=g[0],N=m[0];F.high=N.high,F.low=N.low;for(var _=0;_<5;_++)for(var P=0;P<5;P++){var Q=_+5*P,D=m[Q],ie=g[Q],ee=g[(_+1)%5+5*P],we=g[(_+2)%5+5*P];D.high=ie.high^~ee.high&we.high,D.low=ie.low^~ee.low&we.low}var D=m[0],$=x[A];D.high^=$.high,D.low^=$.low}},_doFinalize:function(){var w=this._data,k=w.words;this._nDataBytes*8;var m=w.sigBytes*8,p=this.blockSize*32;k[m>>>5]|=1<<24-m%32,k[(r.ceil((m+1)/p)*p>>>5)-1]|=128,w.sigBytes=k.length*4,this._process();for(var v=this._state,C=this.cfg.outputLength/8,I=C/8,D=[],A=0;A<I;A++){var _=v[A],b=_.high,E=_.low;b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,D.push(E),D.push(b)}return new a.init(D,C)},clone:function(){for(var w=u.clone.call(this),k=w._state=this._state.slice(0),m=0;m<25;m++)k[m]=k[m].clone();return w}});n.SHA3=u._createHelper(y),n.HmacSHA3=u._createHmacHelper(y)}(Math),t.SHA3})}(tn)),tn.exports}var rn={exports:{}},Na;function Qf(){return Na||(Na=1,function(i,e){(function(t,r){i.exports=r(q())})(z,function(t){/** @preserve
			(c) 2012 by CÃ©dric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var n=t,s=n.lib,a=s.WordArray,u=s.Hasher,c=n.algo,h=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),x=a.create([0,1518500249,1859775393,2400959708,2840853838]),g=a.create([1352829926,1548603684,1836072691,2053994217,0]),y=c.RIPEMD160=u.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(I,D){for(var A=0;A<16;A++){var _=D+A,b=I[_];I[_]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var E=this._hash.words,P=x.words,B=g.words,M=h.words,L=l.words,V=d.words,re=f.words,Q,j,Z,T,S,F,N,ie,ee,we;F=Q=E[0],N=j=E[1],ie=Z=E[2],ee=T=E[3],we=S=E[4];for(var $,A=0;A<80;A+=1)$=Q+I[D+M[A]]|0,A<16?$+=w(j,Z,T)+P[0]:A<32?$+=k(j,Z,T)+P[1]:A<48?$+=m(j,Z,T)+P[2]:A<64?$+=p(j,Z,T)+P[3]:$+=v(j,Z,T)+P[4],$=$|0,$=C($,V[A]),$=$+S|0,Q=S,S=T,T=C(Z,10),Z=j,j=$,$=F+I[D+L[A]]|0,A<16?$+=v(N,ie,ee)+B[0]:A<32?$+=p(N,ie,ee)+B[1]:A<48?$+=m(N,ie,ee)+B[2]:A<64?$+=k(N,ie,ee)+B[3]:$+=w(N,ie,ee)+B[4],$=$|0,$=C($,re[A]),$=$+we|0,F=we,we=ee,ee=C(ie,10),ie=N,N=$;$=E[1]+Z+ee|0,E[1]=E[2]+T+we|0,E[2]=E[3]+S+F|0,E[3]=E[4]+Q+N|0,E[4]=E[0]+j+ie|0,E[0]=$},_doFinalize:function(){var I=this._data,D=I.words,A=this._nDataBytes*8,_=I.sigBytes*8;D[_>>>5]|=128<<24-_%32,D[(_+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,I.sigBytes=(D.length+1)*4,this._process();for(var b=this._hash,E=b.words,P=0;P<5;P++){var B=E[P];E[P]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}return b},clone:function(){var I=u.clone.call(this);return I._hash=this._hash.clone(),I}});function w(I,D,A){return I^D^A}function k(I,D,A){return I&D|~I&A}function m(I,D,A){return(I|~D)^A}function p(I,D,A){return I&A|D&~A}function v(I,D,A){return I^(D|~A)}function C(I,D){return I<<D|I>>>32-D}n.RIPEMD160=u._createHelper(y),n.HmacRIPEMD160=u._createHmacHelper(y)}(),t.RIPEMD160})}(rn)),rn.exports}var nn={exports:{}},Sa;function ls(){return Sa||(Sa=1,function(i,e){(function(t,r){i.exports=r(q())})(z,function(t){(function(){var r=t,n=r.lib,s=n.Base,a=r.enc,u=a.Utf8,c=r.algo;c.HMAC=s.extend({init:function(h,l){h=this._hasher=new h.init,typeof l=="string"&&(l=u.parse(l));var d=h.blockSize,f=d*4;l.sigBytes>f&&(l=h.finalize(l)),l.clamp();for(var x=this._oKey=l.clone(),g=this._iKey=l.clone(),y=x.words,w=g.words,k=0;k<d;k++)y[k]^=1549556828,w[k]^=909522486;x.sigBytes=g.sigBytes=f,this.reset()},reset:function(){var h=this._hasher;h.reset(),h.update(this._iKey)},update:function(h){return this._hasher.update(h),this},finalize:function(h){var l=this._hasher,d=l.finalize(h);l.reset();var f=l.finalize(this._oKey.clone().concat(d));return f}})})()})}(nn)),nn.exports}var sn={exports:{}},Fa;function Xf(){return Fa||(Fa=1,function(i,e){(function(t,r,n){i.exports=r(q(),hs(),ls())})(z,function(t){return function(){var r=t,n=r.lib,s=n.Base,a=n.WordArray,u=r.algo,c=u.SHA256,h=u.HMAC,l=u.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var x=this.cfg,g=h.create(x.hasher,d),y=a.create(),w=a.create([1]),k=y.words,m=w.words,p=x.keySize,v=x.iterations;k.length<p;){var C=g.update(f).finalize(w);g.reset();for(var I=C.words,D=I.length,A=C,_=1;_<v;_++){A=g.finalize(A),g.reset();for(var b=A.words,E=0;E<D;E++)I[E]^=b[E]}y.concat(C),m[0]++}return y.sigBytes=p*4,y}});r.PBKDF2=function(d,f,x){return l.create(x).compute(d,f)}}(),t.PBKDF2})}(sn)),sn.exports}var an={exports:{}},Ma;function pt(){return Ma||(Ma=1,function(i,e){(function(t,r,n){i.exports=r(q(),_0(),ls())})(z,function(t){return function(){var r=t,n=r.lib,s=n.Base,a=n.WordArray,u=r.algo,c=u.MD5,h=u.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:1}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,d){for(var f,x=this.cfg,g=x.hasher.create(),y=a.create(),w=y.words,k=x.keySize,m=x.iterations;w.length<k;){f&&g.update(f),f=g.update(l).finalize(d),g.reset();for(var p=1;p<m;p++)f=g.finalize(f),g.reset();y.concat(f)}return y.sigBytes=k*4,y}});r.EvpKDF=function(l,d,f){return h.create(f).compute(l,d)}}(),t.EvpKDF})}(an)),an.exports}var on={exports:{}},Oa;function me(){return Oa||(Oa=1,function(i,e){(function(t,r,n){i.exports=r(q(),pt())})(z,function(t){t.lib.Cipher||function(r){var n=t,s=n.lib,a=s.Base,u=s.WordArray,c=s.BufferedBlockAlgorithm,h=n.enc;h.Utf8;var l=h.Base64,d=n.algo,f=d.EvpKDF,x=s.Cipher=c.extend({cfg:a.extend(),createEncryptor:function(b,E){return this.create(this._ENC_XFORM_MODE,b,E)},createDecryptor:function(b,E){return this.create(this._DEC_XFORM_MODE,b,E)},init:function(b,E,P){this.cfg=this.cfg.extend(P),this._xformMode=b,this._key=E,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(b){return this._append(b),this._process()},finalize:function(b){b&&this._append(b);var E=this._doFinalize();return E},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function b(E){return typeof E=="string"?_:I}return function(E){return{encrypt:function(P,B,M){return b(B).encrypt(E,P,B,M)},decrypt:function(P,B,M){return b(B).decrypt(E,P,B,M)}}}}()});s.StreamCipher=x.extend({_doFinalize:function(){var b=this._process(!0);return b},blockSize:1});var g=n.mode={},y=s.BlockCipherMode=a.extend({createEncryptor:function(b,E){return this.Encryptor.create(b,E)},createDecryptor:function(b,E){return this.Decryptor.create(b,E)},init:function(b,E){this._cipher=b,this._iv=E}}),w=g.CBC=function(){var b=y.extend();b.Encryptor=b.extend({processBlock:function(P,B){var M=this._cipher,L=M.blockSize;E.call(this,P,B,L),M.encryptBlock(P,B),this._prevBlock=P.slice(B,B+L)}}),b.Decryptor=b.extend({processBlock:function(P,B){var M=this._cipher,L=M.blockSize,V=P.slice(B,B+L);M.decryptBlock(P,B),E.call(this,P,B,L),this._prevBlock=V}});function E(P,B,M){var L,V=this._iv;V?(L=V,this._iv=r):L=this._prevBlock;for(var re=0;re<M;re++)P[B+re]^=L[re]}return b}(),k=n.pad={},m=k.Pkcs7={pad:function(b,E){for(var P=E*4,B=P-b.sigBytes%P,M=B<<24|B<<16|B<<8|B,L=[],V=0;V<B;V+=4)L.push(M);var re=u.create(L,B);b.concat(re)},unpad:function(b){var E=b.words[b.sigBytes-1>>>2]&255;b.sigBytes-=E}};s.BlockCipher=x.extend({cfg:x.cfg.extend({mode:w,padding:m}),reset:function(){var b;x.reset.call(this);var E=this.cfg,P=E.iv,B=E.mode;this._xformMode==this._ENC_XFORM_MODE?b=B.createEncryptor:(b=B.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==b?this._mode.init(this,P&&P.words):(this._mode=b.call(B,this,P&&P.words),this._mode.__creator=b)},_doProcessBlock:function(b,E){this._mode.processBlock(b,E)},_doFinalize:function(){var b,E=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(E.pad(this._data,this.blockSize),b=this._process(!0)):(b=this._process(!0),E.unpad(b)),b},blockSize:128/32});var p=s.CipherParams=a.extend({init:function(b){this.mixIn(b)},toString:function(b){return(b||this.formatter).stringify(this)}}),v=n.format={},C=v.OpenSSL={stringify:function(b){var E,P=b.ciphertext,B=b.salt;return B?E=u.create([1398893684,1701076831]).concat(B).concat(P):E=P,E.toString(l)},parse:function(b){var E,P=l.parse(b),B=P.words;return B[0]==1398893684&&B[1]==1701076831&&(E=u.create(B.slice(2,4)),B.splice(0,4),P.sigBytes-=16),p.create({ciphertext:P,salt:E})}},I=s.SerializableCipher=a.extend({cfg:a.extend({format:C}),encrypt:function(b,E,P,B){B=this.cfg.extend(B);var M=b.createEncryptor(P,B),L=M.finalize(E),V=M.cfg;return p.create({ciphertext:L,key:P,iv:V.iv,algorithm:b,mode:V.mode,padding:V.padding,blockSize:b.blockSize,formatter:B.format})},decrypt:function(b,E,P,B){B=this.cfg.extend(B),E=this._parse(E,B.format);var M=b.createDecryptor(P,B).finalize(E.ciphertext);return M},_parse:function(b,E){return typeof b=="string"?E.parse(b,this):b}}),D=n.kdf={},A=D.OpenSSL={execute:function(b,E,P,B,M){if(B||(B=u.random(64/8)),M)var L=f.create({keySize:E+P,hasher:M}).compute(b,B);else var L=f.create({keySize:E+P}).compute(b,B);var V=u.create(L.words.slice(E),P*4);return L.sigBytes=E*4,p.create({key:L,iv:V,salt:B})}},_=s.PasswordBasedCipher=I.extend({cfg:I.cfg.extend({kdf:A}),encrypt:function(b,E,P,B){B=this.cfg.extend(B);var M=B.kdf.execute(P,b.keySize,b.ivSize,B.salt,B.hasher);B.iv=M.iv;var L=I.encrypt.call(this,b,E,M.key,B);return L.mixIn(M),L},decrypt:function(b,E,P,B){B=this.cfg.extend(B),E=this._parse(E,B.format);var M=B.kdf.execute(P,b.keySize,b.ivSize,E.salt,B.hasher);B.iv=M.iv;var L=I.decrypt.call(this,b,E,M.key,B);return L}})}()})}(on)),on.exports}var cn={exports:{}},Ra;function Zf(){return Ra||(Ra=1,function(i,e){(function(t,r,n){i.exports=r(q(),me())})(z,function(t){return t.mode.CFB=function(){var r=t.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,a){var u=this._cipher,c=u.blockSize;n.call(this,s,a,c,u),this._prevBlock=s.slice(a,a+c)}}),r.Decryptor=r.extend({processBlock:function(s,a){var u=this._cipher,c=u.blockSize,h=s.slice(a,a+c);n.call(this,s,a,c,u),this._prevBlock=h}});function n(s,a,u,c){var h,l=this._iv;l?(h=l.slice(0),this._iv=void 0):h=this._prevBlock,c.encryptBlock(h,0);for(var d=0;d<u;d++)s[a+d]^=h[d]}return r}(),t.mode.CFB})}(cn)),cn.exports}var un={exports:{}},La;function jf(){return La||(La=1,function(i,e){(function(t,r,n){i.exports=r(q(),me())})(z,function(t){return t.mode.CTR=function(){var r=t.lib.BlockCipherMode.extend(),n=r.Encryptor=r.extend({processBlock:function(s,a){var u=this._cipher,c=u.blockSize,h=this._iv,l=this._counter;h&&(l=this._counter=h.slice(0),this._iv=void 0);var d=l.slice(0);u.encryptBlock(d,0),l[c-1]=l[c-1]+1|0;for(var f=0;f<c;f++)s[a+f]^=d[f]}});return r.Decryptor=n,r}(),t.mode.CTR})}(un)),un.exports}var hn={exports:{}},Ua;function em(){return Ua||(Ua=1,function(i,e){(function(t,r,n){i.exports=r(q(),me())})(z,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var r=t.lib.BlockCipherMode.extend();function n(u){if((u>>24&255)===255){var c=u>>16&255,h=u>>8&255,l=u&255;c===255?(c=0,h===255?(h=0,l===255?l=0:++l):++h):++c,u=0,u+=c<<16,u+=h<<8,u+=l}else u+=1<<24;return u}function s(u){return(u[0]=n(u[0]))===0&&(u[1]=n(u[1])),u}var a=r.Encryptor=r.extend({processBlock:function(u,c){var h=this._cipher,l=h.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),s(f);var x=f.slice(0);h.encryptBlock(x,0);for(var g=0;g<l;g++)u[c+g]^=x[g]}});return r.Decryptor=a,r}(),t.mode.CTRGladman})}(hn)),hn.exports}var ln={exports:{}},Wa;function tm(){return Wa||(Wa=1,function(i,e){(function(t,r,n){i.exports=r(q(),me())})(z,function(t){return t.mode.OFB=function(){var r=t.lib.BlockCipherMode.extend(),n=r.Encryptor=r.extend({processBlock:function(s,a){var u=this._cipher,c=u.blockSize,h=this._iv,l=this._keystream;h&&(l=this._keystream=h.slice(0),this._iv=void 0),u.encryptBlock(l,0);for(var d=0;d<c;d++)s[a+d]^=l[d]}});return r.Decryptor=n,r}(),t.mode.OFB})}(ln)),ln.exports}var dn={exports:{}},Ha;function rm(){return Ha||(Ha=1,function(i,e){(function(t,r,n){i.exports=r(q(),me())})(z,function(t){return t.mode.ECB=function(){var r=t.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(n,s){this._cipher.encryptBlock(n,s)}}),r.Decryptor=r.extend({processBlock:function(n,s){this._cipher.decryptBlock(n,s)}}),r}(),t.mode.ECB})}(dn)),dn.exports}var fn={exports:{}},Va;function im(){return Va||(Va=1,function(i,e){(function(t,r,n){i.exports=r(q(),me())})(z,function(t){return t.pad.AnsiX923={pad:function(r,n){var s=r.sigBytes,a=n*4,u=a-s%a,c=s+u-1;r.clamp(),r.words[c>>>2]|=u<<24-c%4*8,r.sigBytes+=u},unpad:function(r){var n=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=n}},t.pad.Ansix923})}(fn)),fn.exports}var mn={exports:{}},za;function nm(){return za||(za=1,function(i,e){(function(t,r,n){i.exports=r(q(),me())})(z,function(t){return t.pad.Iso10126={pad:function(r,n){var s=n*4,a=s-r.sigBytes%s;r.concat(t.lib.WordArray.random(a-1)).concat(t.lib.WordArray.create([a<<24],1))},unpad:function(r){var n=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=n}},t.pad.Iso10126})}(mn)),mn.exports}var pn={exports:{}},$a;function sm(){return $a||($a=1,function(i,e){(function(t,r,n){i.exports=r(q(),me())})(z,function(t){return t.pad.Iso97971={pad:function(r,n){r.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(r,n)},unpad:function(r){t.pad.ZeroPadding.unpad(r),r.sigBytes--}},t.pad.Iso97971})}(pn)),pn.exports}var xn={exports:{}},qa;function am(){return qa||(qa=1,function(i,e){(function(t,r,n){i.exports=r(q(),me())})(z,function(t){return t.pad.ZeroPadding={pad:function(r,n){var s=n*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var n=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(n[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},t.pad.ZeroPadding})}(xn)),xn.exports}var gn={exports:{}},Ga;function om(){return Ga||(Ga=1,function(i,e){(function(t,r,n){i.exports=r(q(),me())})(z,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(gn)),gn.exports}var wn={exports:{}},Ya;function cm(){return Ya||(Ya=1,function(i,e){(function(t,r,n){i.exports=r(q(),me())})(z,function(t){return function(r){var n=t,s=n.lib,a=s.CipherParams,u=n.enc,c=u.Hex,h=n.format;h.Hex={stringify:function(l){return l.ciphertext.toString(c)},parse:function(l){var d=c.parse(l);return a.create({ciphertext:d})}}}(),t.format.Hex})}(wn)),wn.exports}var vn={exports:{}},Ja;function um(){return Ja||(Ja=1,function(i,e){(function(t,r,n){i.exports=r(q(),_t(),Nt(),pt(),me())})(z,function(t){return function(){var r=t,n=r.lib,s=n.BlockCipher,a=r.algo,u=[],c=[],h=[],l=[],d=[],f=[],x=[],g=[],y=[],w=[];(function(){for(var p=[],v=0;v<256;v++)v<128?p[v]=v<<1:p[v]=v<<1^283;for(var C=0,I=0,v=0;v<256;v++){var D=I^I<<1^I<<2^I<<3^I<<4;D=D>>>8^D&255^99,u[C]=D,c[D]=C;var A=p[C],_=p[A],b=p[_],E=p[D]*257^D*16843008;h[C]=E<<24|E>>>8,l[C]=E<<16|E>>>16,d[C]=E<<8|E>>>24,f[C]=E;var E=b*16843009^_*65537^A*257^C*16843008;x[D]=E<<24|E>>>8,g[D]=E<<16|E>>>16,y[D]=E<<8|E>>>24,w[D]=E,C?(C=A^p[p[p[b^A]]],I^=p[p[I]]):C=I=1}})();var k=[0,1,2,4,8,16,32,64,128,27,54],m=a.AES=s.extend({_doReset:function(){var p;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var v=this._keyPriorReset=this._key,C=v.words,I=v.sigBytes/4,D=this._nRounds=I+6,A=(D+1)*4,_=this._keySchedule=[],b=0;b<A;b++)b<I?_[b]=C[b]:(p=_[b-1],b%I?I>6&&b%I==4&&(p=u[p>>>24]<<24|u[p>>>16&255]<<16|u[p>>>8&255]<<8|u[p&255]):(p=p<<8|p>>>24,p=u[p>>>24]<<24|u[p>>>16&255]<<16|u[p>>>8&255]<<8|u[p&255],p^=k[b/I|0]<<24),_[b]=_[b-I]^p);for(var E=this._invKeySchedule=[],P=0;P<A;P++){var b=A-P;if(P%4)var p=_[b];else var p=_[b-4];P<4||b<=4?E[P]=p:E[P]=x[u[p>>>24]]^g[u[p>>>16&255]]^y[u[p>>>8&255]]^w[u[p&255]]}}},encryptBlock:function(p,v){this._doCryptBlock(p,v,this._keySchedule,h,l,d,f,u)},decryptBlock:function(p,v){var C=p[v+1];p[v+1]=p[v+3],p[v+3]=C,this._doCryptBlock(p,v,this._invKeySchedule,x,g,y,w,c);var C=p[v+1];p[v+1]=p[v+3],p[v+3]=C},_doCryptBlock:function(p,v,C,I,D,A,_,b){for(var E=this._nRounds,P=p[v]^C[0],B=p[v+1]^C[1],M=p[v+2]^C[2],L=p[v+3]^C[3],V=4,re=1;re<E;re++){var Q=I[P>>>24]^D[B>>>16&255]^A[M>>>8&255]^_[L&255]^C[V++],j=I[B>>>24]^D[M>>>16&255]^A[L>>>8&255]^_[P&255]^C[V++],Z=I[M>>>24]^D[L>>>16&255]^A[P>>>8&255]^_[B&255]^C[V++],T=I[L>>>24]^D[P>>>16&255]^A[B>>>8&255]^_[M&255]^C[V++];P=Q,B=j,M=Z,L=T}var Q=(b[P>>>24]<<24|b[B>>>16&255]<<16|b[M>>>8&255]<<8|b[L&255])^C[V++],j=(b[B>>>24]<<24|b[M>>>16&255]<<16|b[L>>>8&255]<<8|b[P&255])^C[V++],Z=(b[M>>>24]<<24|b[L>>>16&255]<<16|b[P>>>8&255]<<8|b[B&255])^C[V++],T=(b[L>>>24]<<24|b[P>>>16&255]<<16|b[B>>>8&255]<<8|b[M&255])^C[V++];p[v]=Q,p[v+1]=j,p[v+2]=Z,p[v+3]=T},keySize:256/32});r.AES=s._createHelper(m)}(),t.AES})}(vn)),vn.exports}var yn={exports:{}},Ka;function hm(){return Ka||(Ka=1,function(i,e){(function(t,r,n){i.exports=r(q(),_t(),Nt(),pt(),me())})(z,function(t){return function(){var r=t,n=r.lib,s=n.WordArray,a=n.BlockCipher,u=r.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],x=u.DES=a.extend({_doReset:function(){for(var k=this._key,m=k.words,p=[],v=0;v<56;v++){var C=c[v]-1;p[v]=m[C>>>5]>>>31-C%32&1}for(var I=this._subKeys=[],D=0;D<16;D++){for(var A=I[D]=[],_=l[D],v=0;v<24;v++)A[v/6|0]|=p[(h[v]-1+_)%28]<<31-v%6,A[4+(v/6|0)]|=p[28+(h[v+24]-1+_)%28]<<31-v%6;A[0]=A[0]<<1|A[0]>>>31;for(var v=1;v<7;v++)A[v]=A[v]>>>(v-1)*4+3;A[7]=A[7]<<5|A[7]>>>27}for(var b=this._invSubKeys=[],v=0;v<16;v++)b[v]=I[15-v]},encryptBlock:function(k,m){this._doCryptBlock(k,m,this._subKeys)},decryptBlock:function(k,m){this._doCryptBlock(k,m,this._invSubKeys)},_doCryptBlock:function(k,m,p){this._lBlock=k[m],this._rBlock=k[m+1],g.call(this,4,252645135),g.call(this,16,65535),y.call(this,2,858993459),y.call(this,8,16711935),g.call(this,1,1431655765);for(var v=0;v<16;v++){for(var C=p[v],I=this._lBlock,D=this._rBlock,A=0,_=0;_<8;_++)A|=d[_][((D^C[_])&f[_])>>>0];this._lBlock=D,this._rBlock=I^A}var b=this._lBlock;this._lBlock=this._rBlock,this._rBlock=b,g.call(this,1,1431655765),y.call(this,8,16711935),y.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),k[m]=this._lBlock,k[m+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function g(k,m){var p=(this._lBlock>>>k^this._rBlock)&m;this._rBlock^=p,this._lBlock^=p<<k}function y(k,m){var p=(this._rBlock>>>k^this._lBlock)&m;this._lBlock^=p,this._rBlock^=p<<k}r.DES=a._createHelper(x);var w=u.TripleDES=a.extend({_doReset:function(){var k=this._key,m=k.words;if(m.length!==2&&m.length!==4&&m.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var p=m.slice(0,2),v=m.length<4?m.slice(0,2):m.slice(2,4),C=m.length<6?m.slice(0,2):m.slice(4,6);this._des1=x.createEncryptor(s.create(p)),this._des2=x.createEncryptor(s.create(v)),this._des3=x.createEncryptor(s.create(C))},encryptBlock:function(k,m){this._des1.encryptBlock(k,m),this._des2.decryptBlock(k,m),this._des3.encryptBlock(k,m)},decryptBlock:function(k,m){this._des3.decryptBlock(k,m),this._des2.encryptBlock(k,m),this._des1.decryptBlock(k,m)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=a._createHelper(w)}(),t.TripleDES})}(yn)),yn.exports}var Dn={exports:{}},Qa;function lm(){return Qa||(Qa=1,function(i,e){(function(t,r,n){i.exports=r(q(),_t(),Nt(),pt(),me())})(z,function(t){return function(){var r=t,n=r.lib,s=n.StreamCipher,a=r.algo,u=a.RC4=s.extend({_doReset:function(){for(var l=this._key,d=l.words,f=l.sigBytes,x=this._S=[],g=0;g<256;g++)x[g]=g;for(var g=0,y=0;g<256;g++){var w=g%f,k=d[w>>>2]>>>24-w%4*8&255;y=(y+x[g]+k)%256;var m=x[g];x[g]=x[y],x[y]=m}this._i=this._j=0},_doProcessBlock:function(l,d){l[d]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var l=this._S,d=this._i,f=this._j,x=0,g=0;g<4;g++){d=(d+1)%256,f=(f+l[d])%256;var y=l[d];l[d]=l[f],l[f]=y,x|=l[(l[d]+l[f])%256]<<24-g*8}return this._i=d,this._j=f,x}r.RC4=s._createHelper(u);var h=a.RC4Drop=u.extend({cfg:u.cfg.extend({drop:192}),_doReset:function(){u._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)c.call(this)}});r.RC4Drop=s._createHelper(h)}(),t.RC4})}(Dn)),Dn.exports}var bn={exports:{}},Xa;function dm(){return Xa||(Xa=1,function(i,e){(function(t,r,n){i.exports=r(q(),_t(),Nt(),pt(),me())})(z,function(t){return function(){var r=t,n=r.lib,s=n.StreamCipher,a=r.algo,u=[],c=[],h=[],l=a.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,x=this.cfg.iv,g=0;g<4;g++)f[g]=(f[g]<<8|f[g]>>>24)&16711935|(f[g]<<24|f[g]>>>8)&4278255360;var y=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],w=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)d.call(this);for(var g=0;g<8;g++)w[g]^=y[g+4&7];if(x){var k=x.words,m=k[0],p=k[1],v=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,C=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,I=v>>>16|C&4294901760,D=C<<16|v&65535;w[0]^=v,w[1]^=I,w[2]^=C,w[3]^=D,w[4]^=v,w[5]^=I,w[6]^=C,w[7]^=D;for(var g=0;g<4;g++)d.call(this)}},_doProcessBlock:function(f,x){var g=this._X;d.call(this),u[0]=g[0]^g[5]>>>16^g[3]<<16,u[1]=g[2]^g[7]>>>16^g[5]<<16,u[2]=g[4]^g[1]>>>16^g[7]<<16,u[3]=g[6]^g[3]>>>16^g[1]<<16;for(var y=0;y<4;y++)u[y]=(u[y]<<8|u[y]>>>24)&16711935|(u[y]<<24|u[y]>>>8)&4278255360,f[x+y]^=u[y]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,x=this._C,g=0;g<8;g++)c[g]=x[g];x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<c[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<c[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<c[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<c[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<c[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<c[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<c[6]>>>0?1:0)|0,this._b=x[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var y=f[g]+x[g],w=y&65535,k=y>>>16,m=((w*w>>>17)+w*k>>>15)+k*k,p=((y&4294901760)*y|0)+((y&65535)*y|0);h[g]=m^p}f[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,f[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,f[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,f[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,f[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,f[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,f[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,f[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}r.Rabbit=s._createHelper(l)}(),t.Rabbit})}(bn)),bn.exports}var kn={exports:{}},Za;function fm(){return Za||(Za=1,function(i,e){(function(t,r,n){i.exports=r(q(),_t(),Nt(),pt(),me())})(z,function(t){return function(){var r=t,n=r.lib,s=n.StreamCipher,a=r.algo,u=[],c=[],h=[],l=a.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,x=this.cfg.iv,g=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],y=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var w=0;w<4;w++)d.call(this);for(var w=0;w<8;w++)y[w]^=g[w+4&7];if(x){var k=x.words,m=k[0],p=k[1],v=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,C=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,I=v>>>16|C&4294901760,D=C<<16|v&65535;y[0]^=v,y[1]^=I,y[2]^=C,y[3]^=D,y[4]^=v,y[5]^=I,y[6]^=C,y[7]^=D;for(var w=0;w<4;w++)d.call(this)}},_doProcessBlock:function(f,x){var g=this._X;d.call(this),u[0]=g[0]^g[5]>>>16^g[3]<<16,u[1]=g[2]^g[7]>>>16^g[5]<<16,u[2]=g[4]^g[1]>>>16^g[7]<<16,u[3]=g[6]^g[3]>>>16^g[1]<<16;for(var y=0;y<4;y++)u[y]=(u[y]<<8|u[y]>>>24)&16711935|(u[y]<<24|u[y]>>>8)&4278255360,f[x+y]^=u[y]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,x=this._C,g=0;g<8;g++)c[g]=x[g];x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<c[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<c[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<c[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<c[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<c[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<c[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<c[6]>>>0?1:0)|0,this._b=x[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var y=f[g]+x[g],w=y&65535,k=y>>>16,m=((w*w>>>17)+w*k>>>15)+k*k,p=((y&4294901760)*y|0)+((y&65535)*y|0);h[g]=m^p}f[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,f[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,f[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,f[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,f[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,f[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,f[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,f[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}r.RabbitLegacy=s._createHelper(l)}(),t.RabbitLegacy})}(kn)),kn.exports}var In={exports:{}},ja;function mm(){return ja||(ja=1,function(i,e){(function(t,r,n){i.exports=r(q(),_t(),Nt(),pt(),me())})(z,function(t){return function(){var r=t,n=r.lib,s=n.BlockCipher,a=r.algo;const u=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],h=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function d(w,k){let m=k>>24&255,p=k>>16&255,v=k>>8&255,C=k&255,I=w.sbox[0][m]+w.sbox[1][p];return I=I^w.sbox[2][v],I=I+w.sbox[3][C],I}function f(w,k,m){let p=k,v=m,C;for(let I=0;I<u;++I)p=p^w.pbox[I],v=d(w,p)^v,C=p,p=v,v=C;return C=p,p=v,v=C,v=v^w.pbox[u],p=p^w.pbox[u+1],{left:p,right:v}}function x(w,k,m){let p=k,v=m,C;for(let I=u+1;I>1;--I)p=p^w.pbox[I],v=d(w,p)^v,C=p,p=v,v=C;return C=p,p=v,v=C,v=v^w.pbox[1],p=p^w.pbox[0],{left:p,right:v}}function g(w,k,m){for(let D=0;D<4;D++){w.sbox[D]=[];for(let A=0;A<256;A++)w.sbox[D][A]=h[D][A]}let p=0;for(let D=0;D<u+2;D++)w.pbox[D]=c[D]^k[p],p++,p>=m&&(p=0);let v=0,C=0,I=0;for(let D=0;D<u+2;D+=2)I=f(w,v,C),v=I.left,C=I.right,w.pbox[D]=v,w.pbox[D+1]=C;for(let D=0;D<4;D++)for(let A=0;A<256;A+=2)I=f(w,v,C),v=I.left,C=I.right,w.sbox[D][A]=v,w.sbox[D][A+1]=C;return!0}var y=a.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var w=this._keyPriorReset=this._key,k=w.words,m=w.sigBytes/4;g(l,k,m)}},encryptBlock:function(w,k){var m=f(l,w[k],w[k+1]);w[k]=m.left,w[k+1]=m.right},decryptBlock:function(w,k){var m=x(l,w[k],w[k+1]);w[k]=m.left,w[k+1]=m.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(y)}(),t.Blowfish})}(In)),In.exports}(function(i,e){(function(t,r,n){i.exports=r(q(),Ci(),$f(),qf(),_t(),Gf(),Nt(),_0(),hs(),Yf(),N0(),Jf(),Kf(),Qf(),ls(),Xf(),pt(),me(),Zf(),jf(),em(),tm(),rm(),im(),nm(),sm(),am(),om(),cm(),um(),hm(),lm(),dm(),fm(),mm())})(z,function(t){return t})})(B0);var pm=B0.exports;const xm=po(pm),{AES:gm,enc:hi,SHA256:S0}=xm,wm="16charactersiv!";function vm(i,e){const t=ym(e),r=hi.Utf8.parse(wm);return gm.encrypt(i,t,{iv:r}).toString()}function ym(i){let e="htr;lmn;rkmnkryemnkrmnbavsdbshtg6437";return e=S0(i+e).toString(hi.Hex).substring(0,32),hi.Utf8.parse(e)}function Dm({id:i}){if(i.length<7)return"";const e=i.substring(3,6),t=S0(i+e).toString(hi.Hex);return t.substring(0,Math.min(10,t.length)).replace(/[/.*]/g,"")}function Ai(i){return vm(i+tu,eu).replace("/","").replace("*","").replace(".","")}var Hn={exports:{}},eo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(eo){var to=new Uint8Array(16);Hn.exports=function(){return eo(to),to}}else{var ro=new Array(16);Hn.exports=function(){for(var e=0,t;e<16;e++)e&3||(t=Math.random()*4294967296),ro[e]=t>>>((e&3)<<3)&255;return ro}}var F0=Hn.exports,M0=[];for(var qr=0;qr<256;++qr)M0[qr]=(qr+256).toString(16).substr(1);function bm(i,e){var t=e||0,r=M0;return[r[i[t++]],r[i[t++]],r[i[t++]],r[i[t++]],"-",r[i[t++]],r[i[t++]],"-",r[i[t++]],r[i[t++]],"-",r[i[t++]],r[i[t++]],"-",r[i[t++]],r[i[t++]],r[i[t++]],r[i[t++]],r[i[t++]],r[i[t++]]].join("")}var O0=bm,km=F0,Im=O0,io,Cn,An=0,En=0;function Cm(i,e,t){var r=e&&t||0,n=e||[];i=i||{};var s=i.node||io,a=i.clockseq!==void 0?i.clockseq:Cn;if(s==null||a==null){var u=km();s==null&&(s=io=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),a==null&&(a=Cn=(u[6]<<8|u[7])&16383)}var c=i.msecs!==void 0?i.msecs:new Date().getTime(),h=i.nsecs!==void 0?i.nsecs:En+1,l=c-An+(h-En)/1e4;if(l<0&&i.clockseq===void 0&&(a=a+1&16383),(l<0||c>An)&&i.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");An=c,En=h,Cn=a,c+=122192928e5;var d=((c&268435455)*1e4+h)%4294967296;n[r++]=d>>>24&255,n[r++]=d>>>16&255,n[r++]=d>>>8&255,n[r++]=d&255;var f=c/4294967296*1e4&268435455;n[r++]=f>>>8&255,n[r++]=f&255,n[r++]=f>>>24&15|16,n[r++]=f>>>16&255,n[r++]=a>>>8|128,n[r++]=a&255;for(var x=0;x<6;++x)n[r+x]=s[x];return e||Im(n)}var Am=Cm,Em=F0,Tm=O0;function Pm(i,e,t){var r=e&&t||0;typeof i=="string"&&(e=i==="binary"?new Array(16):null,i=null),i=i||{};var n=i.random||(i.rng||Em)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e)for(var s=0;s<16;++s)e[r+s]=n[s];return e||Tm(n)}var Bm=Pm,_m=Am,R0=Bm,ds=R0;ds.v1=_m;ds.v4=R0;var Nm=ds;const Sm=po(Nm);var Ge=(i=>(i[i.deposit=0]="deposit",i[i.payment=1]="payment",i))(Ge||{});const Vn={0:"deposit",1:"payment"},zn={deposit:0,payment:1};class Et{constructor({type:e=1,amount:t=0,id:r="",hypId:n="",createdAt:s=new Date(0)}){o(this,"type",1);o(this,"amount",0);o(this,"createdAt",new Date(0));o(this,"id","");o(this,"hypId","");this.type=e,this.amount=parseFloat(t.toFixed(2)),this.id=r,this.hypId=n,this.createdAt=s}static fromJson(e,t){const r=new Et({});return e.amount!=null&&(r.amount=e.amount),r.hypId=e.hypId||"",r.id=t,r.type=zn[e.type]||1,r.createdAt=e.createdAt?new Date(e.createdAt):new Date(0),r}static fromTransaction(e){const t=new Et({});return t.type=e.type,t.amount=e.amount,t.id=e.id,t.hypId=e.hypId,t.createdAt=e.createdAt,t}toJson(){const e={};return e.amount=this.amount,e.hypId=this.hypId,e.type=Vn[this.type],e.createdAt=this.createdAt.toISOString(),e}toString(){return JSON.stringify(this.toJson(),null,2)}}class qt{constructor({workMinutes:e=0,breakMinutes:t=0,title:r=""}){o(this,"workMinutes",0);o(this,"breakMinutes",0);o(this,"title","");this.workMinutes=e,this.breakMinutes=t,this.title=r}get wholeMinutes(){return this.workMinutes+this.breakMinutes}static fromTreatmentTime(e){return new qt({breakMinutes:e.breakMinutes,workMinutes:e.workMinutes,title:e.title})}static fromJson(e){return new qt({breakMinutes:e.break||0,workMinutes:e.duration||0,title:e.title||""})}toJson(){const e={};return e.break=this.breakMinutes,e.duration=this.workMinutes,e.title=this.title,e}toString(){return JSON.stringify(this,null,2)}}class _e{constructor({times:e=new Map,id:t="",price:r,count:n=1,name:s="",isMulti:a=!1,maxTicketsForUser:u=1,index:c="",amountInAdvance:h=0,colorIndex:l=-2,hide:d=!1,paymentType:f,note:x="",maxParticipants:g=1,showPrice:y=!0,showParticipants:w=!0,showTime:k=!0}={}){o(this,"totalMinutes",0);o(this,"index","");o(this,"id","");o(this,"note","");o(this,"price");o(this,"amountInAdvance",0);o(this,"paymentType");o(this,"isMulti",!1);o(this,"showPrice",!0);o(this,"showTime",!0);o(this,"count",1);o(this,"name","");o(this,"colorIndex",-2);o(this,"maxParticipants",1);o(this,"maxTicketsForUser",1);o(this,"tempMaxParticipants");o(this,"hide",!1);o(this,"showParticipants",!0);o(this,"times",new Map);o(this,"priceChangingNote");this.times=e,this.id=t,this.price=r,this.count=n,this.name=s,this.isMulti=a,this.maxTicketsForUser=u,this.index=c,this.amountInAdvance=h,this.colorIndex=l,this.hide=d,this.paymentType=f,this.note=x,this.maxParticipants=g,this.showPrice=y,this.showParticipants=w,this.showTime=k,this.totalMinutes=this.totalTotalMinutes}isEqual(e){return!0}get totalTotalMinutes(){let e=0;return this.times.forEach((t,r)=>{e+=t.wholeMinutes}),e}get totalWorkMinutes(){let e=0;return this.times.forEach((t,r)=>{e+=t.workMinutes}),e}get totalMinutesForBooking(){return this.totalMinutes*this.count}get amountInAdvanceForBooking(){return this.amountInAdvance*this.count}get totalPriceForBooking(){return this.price.amount*this.count}get nameForBooking(){return this.count===1?this.name:`${this.name} X${this.count}`}static fromTreatment(e){const t=new _e({times:new Map,showTime:e.showTime,paymentType:e.paymentType,id:e.id,hide:e.hide,showPrice:e.showPrice,price:e.price,index:e.index,maxTicketsForUser:e.maxTicketsForUser,colorIndex:e.colorIndex,name:e.name,isMulti:e.isMulti,note:e.note,count:e.count,maxParticipants:e.maxParticipants,amountInAdvance:e.amountInAdvance});return t.priceChangingNote=e.priceChangingNote,t.tempMaxParticipants=e.tempMaxParticipants,t.totalMinutes=e.totalMinutes,e.times.forEach((r,n)=>{t.times.set(n,qt.fromTreatmentTime(r))}),t}static fromTreatmentsMap(e){let t=0;const r=new _e({price:new Oe({amount:"0",currency:Cr})});return e.forEach((n,s)=>{for(let a=0;a<n.count;a++)n.times.forEach((u,c)=>{r.times.set(t.toString(),u),t++}),n.price&&(r.price.amount+=n.price.amount,r.price.currency=n.price.currency),r.name===""?r.name=n.name:r.name+=` + ${n.name}`,r.showTime=r.showTime&&n.showTime,r.showPrice=r.showPrice&&n.showPrice,r.paymentType=n.paymentType,r.amountInAdvance+=n.amountInAdvance,r.totalMinutes+=n.totalMinutes}),r}get participants(){return this.tempMaxParticipants!==void 0?this.tempMaxParticipants:this.maxParticipants}priceToString(){return this.price.toString()}minutesToString(){return xr(new H({minutes:this.totalMinutes}))}static fromJson(e,t){const r=new _e({times:new Map,id:e.id||"",colorIndex:e.colorIndex||-2,maxTicketsForUser:e.maxTicketsForUser||1,index:t,hide:e.hide||!1,name:e.name||"",isMulti:e.isMulti||!1,note:e.note||"",count:e.count||1,price:e.price?Oe.fromJson(e.price):void 0,amountInAdvance:e.amountInAdvance!==void 0?typeof e.amountInAdvance=="number"?e.amountInAdvance:parseFloat(e.amountInAdvance):0,maxParticipants:e.maxParticipants||1,paymentType:zn[e.paymentType],showPrice:e.showPrice||!1,showTime:e.showTime||!1,showParticipants:e.showParticipants||!0});if(r.priceChangingNote=e.priceChangingNote,r.tempMaxParticipants=e.tempMaxParticipants,e.times)for(const n in e.times)r.times.set(n,qt.fromJson(e.times[n]));return r}toJson(){const e={};return e.times={},this.times.forEach((t,r)=>{e.times[r]=t.toJson()}),e.name=this.name,this.note!==""&&(e.note=this.note),this.id!==""&&(e.id=this.id),this.hide&&(e.hide=this.hide),this.maxTicketsForUser>1&&(e.maxTicketsForUser=this.maxTicketsForUser),this.colorIndex!==-2&&(e.colorIndex=this.colorIndex),this.priceChangingNote!==void 0&&(e.priceChangingNote=this.priceChangingNote),e.price=this.price?this.price.toJson():void 0,this.amountInAdvance!==0&&(e.amountInAdvance=this.amountInAdvance),this.paymentType!=null&&Vn[this.paymentType]!=null&&(e.paymentType=Vn[this.paymentType]),this.isMulti&&(e.isMulti=this.isMulti),this.tempMaxParticipants!==void 0&&(e.tempMaxParticipants=this.tempMaxParticipants),this.count!==1&&(e.count=this.count),this.maxParticipants!==1&&(e.maxParticipants=this.maxParticipants),this.showParticipants||(e.showParticipants=this.showParticipants),e.showPrice=this.showPrice,e.showTime=this.showTime,e}static fromOldJson(e,t,r,n){const s=new _e({});if(e.times)for(const a in e.times)e.times.hasOwnProperty(a)&&s.times.set(a,qt.fromJson(e.times[a]));return s.id="",s.colorIndex=n,s.index=t,s.name=s.parseNameFromDbField(r),e.price&&(s.price=Oe.fromJson(e.price)),e.amountInAdvance!==void 0&&(s.amountInAdvance=typeof e.amountInAdvance=="number"?e.amountInAdvance:parseFloat(e.amountInAdvance)),s.paymentType=zn[e.paymentType],s.showPrice=e.showPrice||!1,s.showTime=e.showTime||!1,s.totalMinutes=s.totalTotalMinutes,s}parseNameFromDbField(e){return e.replace(qs,"/").replace(Gs,"*")}parseNameToDbField(e){return e.replace("/",qs).replace("*",Gs)}toString(){return JSON.stringify(this,null,2)}}class fs{constructor({businessId:e="",date:t,id:r="",workerId:n="",businessName:s="",shopIcon:a=new de}={}){o(this,"businessId","");o(this,"businessName","");o(this,"date");o(this,"id","");o(this,"workerId","");o(this,"shopIcon",new de);this.businessId=e,this.date=t||null,this.id=r,this.workerId=n,this.businessName=s,this.shopIcon=a}static fromJsonStr(e){const t=JSON.parse(e),r=t.date?new Date(t.date):null,n=t.shopIcon?de.fromJsonStr(t.shopIcon):new de,s=new fs({businessId:t.businessId,date:r,id:t.id,workerId:t.workerId,businessName:t.businessName});return s.shopIcon=n,s}toJsonStr(){var t;const e={businessId:this.businessId,date:(t=this.date)==null?void 0:t.toString(),id:this.id,workerId:this.workerId,businessName:this.businessName,shopIcon:this.shopIcon.toJsonStr()};return JSON.stringify(e)}toString(){return this.toJsonStr()}}class ms extends fs{constructor({businessId:t,date:r,id:n,workerId:s,businessName:a,totalMinutes:u,isRecurrence:c,shopIcon:h}){super({businessId:t,date:r,id:n,workerId:s,businessName:a,shopIcon:h});o(this,"isRecurrence",!1);o(this,"totalMinutes",0);this.totalMinutes=u,this.isRecurrence=c}static fromJsonStr(t){const r=JSON.parse(t),n=r.businessId||"",s=r.businessName||"",a=r.date?new Date(r.date):void 0,u=r.workerId||"",c=r.id||"",h=r.isRecurrence||!1,l=r.totalMinutes||0,d=r.shopIcon?de.fromJsonStr(r.shopIcon):void 0;return new ms({businessId:n,date:a,id:c,workerId:u,businessName:s,totalMinutes:l,isRecurrence:h,shopIcon:d})}toJsonStr(){var r,n;const t={};return t.businessId=this.businessId,t.isRecurrence=this.isRecurrence,t.totalMinutes=this.totalMinutes,t.date=((r=this.date)==null?void 0:r.toISOString())||null,t.businessName=this.businessName,t.id=this.id,t.workerId=this.workerId,t.shopIcon=((n=this.shopIcon)==null?void 0:n.toJsonStr())||null,JSON.stringify(t)}toString(){return this.toJsonStr()}}class ps{constructor({businessId:e,id:t,businessName:r,type:n,dateToNotify:s,isMulti:a,minutesToAdd:u,address:c,phoneToContact:h,shopIcon:l,fcms:d,totalEventMinutes:f=0,isRecurrence:x=!1}){o(this,"id","");o(this,"businessId","");o(this,"shopIcon",new de);o(this,"businessName","");o(this,"dateToNotify",new Date(0));o(this,"fcms",new Set);o(this,"minutesToAdd",0);o(this,"address","");o(this,"phoneToContact","");o(this,"isMulti",!1);o(this,"isRecurrence",!1);o(this,"totalEventMinutes",0);o(this,"type","");this.businessId=e,this.id=t,this.businessName=r,this.type=n,this.dateToNotify=s,this.isMulti=a,this.minutesToAdd=u,this.address=c,this.phoneToContact=h,this.shopIcon=l,this.fcms=d,this.totalEventMinutes=f,this.isRecurrence=x}isEqual(e){return e.businessId===this.businessId&&e.businessName===this.businessName&&JSON.stringify([...e.fcms])===JSON.stringify([...this.fcms])&&e.shopIcon.isEqual(this.shopIcon)&&e.totalEventMinutes===this.totalEventMinutes&&e.isMulti===this.isMulti&&e.minutesToAdd===this.minutesToAdd&&e.isRecurrence===this.isRecurrence&&e.type===this.type}static fromJson(e){const t=de.fromJson(e.SI),r=new Set(e.FS||[]),n=new Date(e.dateToNotify);return new ps({businessId:e.I,id:e.ID,businessName:e.B,type:e.T,dateToNotify:n,isMulti:e.IM,minutesToAdd:e.MTA,address:e.A,phoneToContact:e.P,shopIcon:t,fcms:r,totalEventMinutes:e.TEM,isRecurrence:e.IR})}get dbPath(){return`/${Jc}/${Kc}/1/${this.dateToNotify.getFullYear()}/${this.dateToNotify.getMonth()}/${this.dateToNotify.getDay()}/${this.dateToNotify.getHours()}`}toJson(){const e={};return this.phoneToContact!==""&&(e.P=this.phoneToContact),this.address!==""&&(e.A=this.address),this.type!==""&&(e.T=this.type),this.businessName!==""&&(e.B=this.businessName),this.fcms.size>0&&(e.FS=Array.from(this.fcms)),this.businessId!==""&&(e.I=this.businessId),this.isMulti&&(e.IM=this.isMulti),this.minutesToAdd!==3&&(e.MTA=this.minutesToAdd),this.isRecurrence&&(e.IR=this.isRecurrence),this.totalEventMinutes>0&&(e.TEM=this.totalEventMinutes),e.SI=this.shopIcon.toJson(),e}toString(){return JSON.stringify(this.toJson(),null,2)}}const no="~.9.~",Fm="..",Tn="_";class Pr{constructor({workerName:e="",date:t="",workerId:r="",timeStr:n="",treatmentId:s="",treatmentName:a="",businessId:u=""}){o(this,"id","");o(this,"businessId","");o(this,"workerName","");o(this,"date","");o(this,"workerId","");o(this,"timeStr","");o(this,"treatmentId","");o(this,"treatmentName","");this.workerName=e,this.date=t,this.workerId=r,this.timeStr=n,this.treatmentId=s,this.treatmentName=a,this.businessId=u}fixEmptyAttributes(){this.workerName=this.workerName===""?"E":this.workerName,this.date=this.date===""?"E":this.date,this.businessId=this.businessId===""?"E":this.businessId,this.workerId=this.workerId===""?"E":this.workerId}static fromJson(e,t){const r=new Pr({});return r.id=t,r.workerName=e.workerName??"",r.date=e.date??"",r.timeStr=e.timeStr??"",r.treatmentId=e.treatmentId??"",r.treatmentName=e.treatmentName??"",r.businessId=e.businessId??"",r.workerId=e.workerId??"",r}get isMulti(){return this.timeStr!==""}static fromTopicStr(e){const t=new Pr({}),r=e.split(Fm),n=r[0].split(Tn),s=r[1].split(Tn);return t.businessId=n[0],t.workerId=n[1].replaceAll(no,"+"),t.date=n[2],t.workerName=s[1],t}isEqual(e){return JSON.stringify(e.toJson())===JSON.stringify(this.toJson())}toTopicStr(){this.fixEmptyAttributes();const e=this.workerId.replaceAll("+",no);return[this.businessId,e,this.date,this.timeStr,this.treatmentId].join(Tn).split("").filter(n=>fu.test(n)).join("")}get dateTime(){const e=Ei(this.date),t=this.timeStr===""?new Date(0):Vm(this.timeStr);return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes())}toJson(){const e={};return e.businessId=this.businessId,this.workerName!==""&&(e.workerName=this.workerName),this.workerId!==""&&(e.workerId=this.workerId),this.date!==""&&(e.date=this.date),this.timeStr!==""&&(e.timeStr=this.timeStr),this.treatmentName!==""&&(e.treatmentName=this.treatmentName),this.treatmentId!==""&&(e.treatmentId=this.treatmentId),e}toString(){return JSON.stringify(this.toJson())}}class xs{constructor({id:e,date:t,isMultiBooking:r,workerId:n,signNewMultiBookingUsers:s=!1}){o(this,"id","");o(this,"date",new Date(0));o(this,"isMultiBooking",!1);o(this,"workerId","");o(this,"signNewMultiBookingUsers",!1);this.id=e,this.date=t,this.isMultiBooking=r,this.workerId=n,this.signNewMultiBookingUsers=s}toJson(){const e={};return e.I=this.id,e.D=this.date.toISOString(),e.WI=this.workerId,this.isMultiBooking&&(e.IMB=this.isMultiBooking),this.signNewMultiBookingUsers&&(e.SNMBU=this.signNewMultiBookingUsers),e}static fromJson(e){const t=e.D?new Date(e.D):new Date(0),r=e.I||"",n=e.IMB||!1,s=e.WI||"",a=e.SNMBU||!1;return new xs({id:r,date:t,isMultiBooking:n,workerId:s,signNewMultiBookingUsers:a})}toString(){return JSON.stringify(this,null,2)}}class sr{constructor({userId:e="",name:t="",gender:r=J.male,isVerifiedPhone:n=!1,phone:s="",isExist:a=!0,userDecline:u=!1}){o(this,"userId","");o(this,"name","");o(this,"gender",J.male);o(this,"phone","");o(this,"payments",{});o(this,"isExist",!1);o(this,"fcmTokens");o(this,"isVerifiedPhone",!1);o(this,"userDecline",!1);this.userId=e,this.name=t,this.gender=r,this.isVerifiedPhone=n,this.phone=s,this.isExist=a,this.userDecline=u}get customerHashPhone(){return Ai(this.phone)}get customerPhoneAsCollection(){return this.phone.replaceAll("-","")}get isPaid(){return Object.keys(this.payments).length>0}static fromJson(e,t){const r=new sr({userId:t,name:e.N??"",gender:e.G?et[e.G]:J.male,isVerifiedPhone:e.IVP??!1,phone:e.P??"",isExist:e.IE??!0,userDecline:e.UD??!1});return e.PY!=null&&typeof e.PY=="object"&&Object.entries(e.PY).forEach(([n,s])=>{r.payments[n]=s?new Date(s):new Date(0)}),r}toJson(){const e={};return e.N=this.name,this.isVerifiedPhone&&(e.IVP=this.isVerifiedPhone),this.isExist||(e.IE=this.isExist),e.P=this.phone,this.gender!==J.male&&(e.G=J[this.gender]),Object.keys(this.payments).length>0&&(e.PY={},Object.entries(this.payments).forEach(([t,r])=>{e.PY[t]=r.toString()})),this.userDecline&&(e.UD=this.userDecline),e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class yt extends Set{constructor(e,t){super(e),t&&this.sort(t)}sort(e){this.clear(),Array.from(this).sort(e).forEach(t=>this.add(t))}get last(){if(this.size===0)return;const e=Array.from(this);return e[e.length-1]}get isEmpty(){return this.size===0}elementAt(e){if(!(e<0||e>=this.size))return Array.from(this)[e]}intersection(e){const t=new yt;return this.forEach(r=>{e.has(r)&&t.add(r)}),t}}const Mm={0:"years",1:"months",2:"weeks",3:"days"},Om={years:0,months:1,weeks:2,days:3},Rm={0:"YEARLY",1:"MONTHLY",2:"WEEKLY",3:"DAILY"};var L0=(i=>(i[i.endless=0]="endless",i[i.date=1]="date",i[i.repeats=2]="repeats",i))(L0||{});const Pn=["SU","MO","TU","WE","TH","FR","SA"],Bn={0:new H({days:365}),1:new H({days:30}),2:new H({days:7}),3:new H({days:1})};class mt{constructor({start:e,endOption:t=2,endDate:r,repeats:n=10,interval:s=1,weekDays:a=new yt,customEndDate:u,freqRecurrence:c=3,exceptionDates:h=new Set}){o(this,"start");o(this,"endDate");o(this,"repeats",10);o(this,"interval",1);o(this,"freqRecurrence",3);o(this,"weekDays",new yt);o(this,"endOption",2);o(this,"exceptionDates",new Set);o(this,"customEndDate");this.start=e,this.weekDays=a,this.endOption=t,this.endDate=r,this.repeats=n,this.interval=s,this.customEndDate=u,this.freqRecurrence=c,this.exceptionDates=h}static fromJson(e,t){const r=new mt({});return r.start=t,r.endDate=e.ED?new Date(e.ED):void 0,r.repeats=e.R||10,r.interval=e.I||1,r.weekDays=new yt(e.WD||[]),r.exceptionDates=new Set(Object.keys(e.EDA||{}).map(Ei)),r.freqRecurrence=Om[e.FR]||3,r}toJson({saveStartDate:e=!1,saveEnd:t=!0,saveException:r=!0}){const n={};return t&&this.endDate&&this.endOption===1&&(n.ED=Ue(this.endDate)),t&&this.endOption===2&&(n.R=this.repeats),this.interval!==1&&(n.I=this.interval),this.weekDays.size>0&&this.freqRecurrence===2&&(n.WD=[...this.weekDays]),r&&this.exceptionDates.size>0&&(n.EDA={},this.exceptionDates.forEach(s=>{n.EDA[Ue(s)]=""})),e&&this.start&&(n.SD=this.start.toISOString()),n.FR=Mm[this.freqRecurrence],n}static fromRecurrenceEvent(e){return new mt({start:e.start,endDate:e.endDate,repeats:e.repeats,interval:e.interval,freqRecurrence:e.freqRecurrence,weekDays:new yt(e.weekDays),endOption:e.endOption,exceptionDates:new Set(e.exceptionDates)})}isEqual(e){var t,r;return!this.start||!e.start||this.start.getTime()!==e.start.getTime()||(((t=this.endDate)==null?void 0:t.getTime())||0)!==(((r=e.endDate)==null?void 0:r.getTime())||0)?!1:this.repeats===e.repeats&&this.interval===e.interval&&this.freqRecurrence===e.freqRecurrence&&Js(e.weekDays,this.weekDays)&&Js(e.exceptionDates,this.exceptionDates)&&this.endOption===e.endOption}get syncfuString(){var t,r,n,s;let e=`FREQ=${Rm[this.freqRecurrence]};`;if(this.freqRecurrence===1&&this.start&&(e+=`BYMONTHDAY=${this.start.getDate()};`),this.freqRecurrence===0&&this.start&&(e+=`BYMONTHDAY=${this.start.getDate()};BYMONTH=${this.start.getMonth()+1};`),e+=`INTERVAL=${this.interval};`,this.freqRecurrence===2&&this.weekDays.size>0&&(e+="BYDAY=",this.weekDays.forEach(a=>{a<Pn.length&&(e+=Pn[a]+",")}),e=e.slice(0,-1)+";"),this.customEndDate&&(this.endOption===0||this.endOfTheEvent&&this.endOfTheEvent>new Date)){const a=new Date(this.customEndDate.getFullYear(),this.customEndDate.getMonth(),this.customEndDate.getDate(),((t=this.start)==null?void 0:t.getHours())??0,((r=this.start)==null?void 0:r.getMinutes())??0);e+=`UNTIL=${Ne(a,"yyyyMMdd'T'HHmmss'Z'")}`}else switch(this.endOption){case 0:break;case 1:if(this.endDate){const a=new Date(this.endDate.getFullYear(),this.endDate.getMonth(),this.endDate.getDate(),((n=this.start)==null?void 0:n.getHours())??0,((s=this.start)==null?void 0:s.getMinutes())??0);e+=`UNTIL=${Ne(a,"yyyyMMdd'T'HHmmss'Z'")}`}break;case 2:e+=`COUNT=${this.repeats}`;break}return e}get accurances(){if(!this.start||this.endOption===0)return null;if(this.endOption===2)return this.repeats-this.exceptionDates.size;if(this.endOption===1&&this.endDate){let e=0;if(this.exceptionDates.forEach(t=>{t<=this.endDate&&e++}),this.freqRecurrence===2){let t=0;const r=gt(this.start);this.weekDays.forEach(h=>{this.isAccureInDate({date:le(r,new H({days:h})),considerException:!1})&&t++});const n=Math.abs(le(r,new H({days:6})).getTime()-gt(this.endDate).getTime()),s=Math.floor(n/this.rangeBetweenInterval.inMilliseconds),a=gt(this.endDate);let u=0;return Ie(a).getTime()!==Ie(r).getTime()&&this.weekDays.forEach(h=>{this.isAccureInDate({date:le(a,new H({days:h})),considerException:!1})&&u++}),s*this.weekDays.size+u+t-e}else if(this.freqRecurrence===1){const t=uo(this.start,this.endDate);return Math.floor(t/this.interval)-e}else{const t=this.start.getTime()-this.endDate.getTime();return Math.floor(Math.abs(t)/this.rangeBetweenInterval.inDays)-e}}return null}get rangeBetweenInterval(){return new H({minutes:Bn[this.freqRecurrence].inMinutes*this.interval})}get endOfTheEvent(){const e=this.rangeBetweenInterval;if(this.endOption===1&&this.endDate!==null)return this.endDate??null;if(this.endOption===2)if(this.freqRecurrence===2){let t=0;const r=this.start.getDay()===7?0:this.start.getDay();this.weekDays.forEach(h=>{h>=r&&t++});const n=this.repeats-t,s=Math.ceil(n/this.weekDays.size),a=n%this.weekDays.size,u=new Date(this.start.getTime()+new H({minutes:e.inMinutes*s}).milliseconds),c=gt(u);this.weekDays=new yt(this.weekDays,(h,l)=>h-l);try{return new Date(c.getTime()+new H({days:a-1<0?this.weekDays.last:this.weekDays.elementAt(a-1)}).inMilliseconds)}catch{return null}}else return this.freqRecurrence===1?co(this.start,(this.repeats-1)*this.interval):new Date(this.start.getTime()+new H({minutes:e.inMinutes*(this.repeats-1)}).inMilliseconds);return null}get explainText(){if(this.start===null)return"";let e="";const t=new H({minutes:Bn[this.freqRecurrence].inMinutes*this.interval});switch(this.freqRecurrence){case 0:e+=G("yearTamplate").replaceAll("DURATION",xr(t)).replaceAll("DATE",Ne(this.start,"dd/MM"));break;case 1:e+=G("monthTemplate").replaceAll("DURATION",xr(t)).replaceAll("DATE",this.start.getDate().toString());break;case 2:let n="";this.weekDays.forEach(s=>{n+=G(Pn[s])+", "}),n=n.substring(0,n.length-2),e+=G("weekTemplate").replaceAll("DURATION",xr(t)).replaceAll("DAYS",n).replaceAll("AMOUNT",G(Object.keys(this.weekDays).length===1?"onDay":"onDays"));break;case 3:e+=G("dayTemplate").replaceAll("DURATION",xr(t));break}const r=this.endOfTheEvent;return r!==null&&(e+=` ${G("until")} ${Ue(r)}`),e}isAccureInDate({date:e,considerException:t=!0}){if(this.start===null||Ie(this.start)>e)return!1;const r=this.endOfTheEvent;if(r!==null&&r<Ie(e)||t&&this.exceptionDates.has(Ie(e)))return!1;const n=new H({minutes:Bn[this.freqRecurrence].inMinutes*this.interval}),s=new H({milliseconds:e.getTime()-Ie(this.start).getTime()}),a=this.start.getDay()===7?0:this.start.getDay(),u=e.getDay()===7?0:e.getDay();if(this.freqRecurrence===2){const c=7-a,h=n.inDays-a,l=(s.inDays+n.inDays)%n.inDays;return(l<c||l>=h)&&this.weekDays.has(u)}if(this.freqRecurrence===1){const c=uo(this.start,e);return this.start.getDate()===e.getDate()&&c%this.interval===0}return s.inDays%n.inDays===0}addRangeBetween(e){const t=new Date(e.getUTCDate());return this.freqRecurrence===1?co(t,this.interval):le(t,new H({minutes:this.rangeBetweenInterval.inMinutes}))}overlapingDatesWith(e){if(this.start===null||e.start===null)return new Set([new Date(0)]);if(this.endOfTheEvent===null&&e.endOfTheEvent===null)return new Set([new Date(0)]);const t=new Set,r=this._getOptimalEventToPassOver(this,e),n=r[0],s=r[1];let a=n.start;for(;Ie(a)<=Ie(n.endOfTheEvent);){if(n.freqRecurrence===2){const u=gt(a);n.weekDays.forEach(c=>{const h=le(u,new H({days:c}));s.isAccureInDate({date:h})&&n.isAccureInDate({date:h})&&t.add(Ie(h))})}else s.isAccureInDate({date:a})&&n.isAccureInDate({date:a})&&t.add(Ie(a));a=this.addRangeBetween(a)}return t}get isRelevant(){return this.endOfTheEvent===null||this.endOfTheEvent>new Date}nearestFutureAccurenceDate(e,{needToBeAfterStart:t=!0}={}){if(this.endOfTheEvent!==null&&e>this.endOfTheEvent)return null;if(this.start===null||e<this.start&&t&&this.isAccureInDate({date:this.start}))return this.start??null;const r=new H({milliseconds:e.getTime()-this.start.getTime()}).inDays;if(this.freqRecurrence===2){const u=Math.floor(r/this.rangeBetweenInterval.inDays);let c=le(this.start,new H({days:u*this.rangeBetweenInterval.inDays})),h=gt(c);for(const l of this.weekDays){const d=new Date(h.getTime()+new H({days:l}).inMilliseconds);if(d>=e&&(this.endOfTheEvent===null||c<=this.endOfTheEvent))return d}c=le(c,this.rangeBetweenInterval),h=gt(c);for(const l of this.weekDays){const d=le(h,new H({days:l}));if(d>=e&&(this.endOfTheEvent===null||c<=this.endOfTheEvent))return d}return null}const n=Math.ceil(r/this.rangeBetweenInterval.inDays);let s=le(this.start,new H({days:n*this.rangeBetweenInterval.inDays}));s<e&&(s=this.addRangeBetween(s));const a=this.endOfTheEvent;for(;!this.isAccureInDate({date:s})&&(a===null||s<a);)s=this.addRangeBetween(s);return a===null||s<=a?s:null}_getOptimalEventToPassOver(e,t){return e.endOfTheEvent===null&&t.endOfTheEvent!==null?[t,e]:e.endOfTheEvent!==null&&t.endOfTheEvent===null?[e,t]:(t.jumps??99999)<(e.jumps??99999)?[t,e]:[e,t]}get jumps(){if(this.start===null||this.endOfTheEvent===null)return null;const t=new H({milliseconds:this.start.getTime()-this.endOfTheEvent.getTime()}).inMinutes/this.rangeBetweenInterval.inMinutes;return Math.ceil(t*Math.max(this.weekDays.size,1))}toString(){return JSON.stringify(this,null,2)}}class Br{constructor(){o(this,"eventName","");o(this,"from",new Date(0));o(this,"to",new Date(0));o(this,"colorIndex",-1);o(this,"isBreak",!1);o(this,"eventIndex",0);o(this,"eventsBelong",1);o(this,"partOfRecurrence",!1);o(this,"treatmentName","");o(this,"transactionCounter",0);o(this,"wantDelete",!1);o(this,"onHold",!1);o(this,"hasInvoice",!1);o(this,"durationMinutes",0);o(this,"breakNotificaiton",!1);o(this,"minutesBreakNotification",60);o(this,"extraData");o(this,"note",null);o(this,"ids",[]);o(this,"recurrenceEvent");o(this,"timeId");o(this,"hasDebt",!1);o(this,"confirmArrival",!1);o(this,"treatmentId");o(this,"isMulti",!1);o(this,"currentParticipants",0);o(this,"debtCounter",0);o(this,"onHoldCounter",0);o(this,"invoiceCoverCounter",0);o(this,"transactionsPerUser",0);o(this,"wantDeleteCounter",0);o(this,"confirmedArrivalAmount",0);o(this,"recurrenceFatherBookingId");o(this,"recurrenceBreakFatherDate");o(this,"blockSchedule",!0);o(this,"recurrenceBreakRefInfo");o(this,"breakIconData");o(this,"breakBusinessName");o(this,"breakFatherRecurrenceId");o(this,"breakBusinessId");o(this,"breakAddedToDeviceCalendar",!1);o(this,"breakId","");o(this,"vacationId","");o(this,"belongTreatments",1);o(this,"vacationCreatedAt");o(this,"isVacation",!1);o(this,"vacationAddedToDeviceCalendar",!1);o(this,"vacationEndTemp");o(this,"isHoliday",!1);o(this,"holidayReligion");o(this,"subTreatmentName","");o(this,"totalBookingMinutes",0);o(this,"waitingListCounter",1);o(this,"isWaitingList",!1);o(this,"waitingListCustomerGender",J.male);o(this,"customerPhoneWaitingList","")}static fromJson({json:e,timeStr:t,dayString:r,monthString:n,workerId:s,businessModel:a,newTimeId:u}){const c=new Br;c.eventName=e.p??"",c.eventIndex=e.i??0,c.onHold=e.oH??!1,c.eventsBelong=e.EB??1,c.wantDelete=e.wD??!1,c.isVacation=e.IV??!1,c.isVacation&&c.eventName===""&&(c.eventName=G("Vacation")),c.vacationId=u??"",c.breakFatherRecurrenceId=e.BFRI??"",c.vacationAddedToDeviceCalendar=e.VATDC??!1,c.blockSchedule=e.BS??!0,c.transactionCounter=e.TC??0,c.transactionsPerUser=e.TPU??0,c.hasDebt=e.HD??!1,c.debtCounter=e.DC??0,c.treatmentId=e.TID,c.confirmArrival=e.CA??!1,c.confirmedArrivalAmount=e.CAA??0,c.durationMinutes=e.d??0,c.treatmentName=e.TN??"",c.hasInvoice=e.Hi??!1,c.invoiceCoverCounter=e.ICC??0,c.note=e.N,c.recurrenceFatherBookingId=e.RFBI,c.wantDeleteCounter=e.WDC??0,c.onHoldCounter=e.OHC??0,c.isMulti=e.IM??!1,c.currentParticipants=e.CP??0,c.breakNotificaiton=e.BN??!1,c.partOfRecurrence=e.POR??!1,c.minutesBreakNotification=e.MBN??60,c.recurrenceBreakRefInfo=e.RBRI?mt.fromJson(e.RBRI):void 0,c.recurrenceBreakFatherDate=e.RBFD;const h=e.IB??!1,l=new Date(t),d=new Date(`${r}-${n}`),f=new Date(d.getFullYear(),d.getMonth(),d.getDate(),l.getHours(),l.getMinutes());return new Date(f.getTime()+c.durationMinutes*6e4),e.RE&&mt.fromJson(e.RE,f),c.colorIndex=e.c??(c.isVacation?1:0),c.ids=[s],c.isHoliday=!1,c.subTreatmentName="",c.totalBookingMinutes=0,c.waitingListCounter=1,c.isWaitingList=!1,c.waitingListCustomerGender=J.male,c.customerPhoneWaitingList="",h&&(c.breakIconData=a==null?void 0:a.design.shopIconData,c.breakBusinessName=a==null?void 0:a.shopName,c.breakBusinessId=a==null?void 0:a.businessId),e.VE&&(c.vacationEndTemp=Ei(e.VE)),c}get endOfBooking(){return new Date(this.from.getTime()+this.totalBookingMinutes*6e4)}toJson(){const e={};return e.p=this.eventName,e.d=this.durationMinutes,e.c=this.colorIndex,this.minutesBreakNotification!==60&&(e.MBN=this.minutesBreakNotification),this.breakNotificaiton&&(e.BN=this.breakNotificaiton),this.onHoldCounter>0&&(e.OHC=this.onHoldCounter),this.confirmArrival&&(e.CA=this.confirmArrival),this.confirmedArrivalAmount>0&&(e.CAA=this.confirmedArrivalAmount),this.blockSchedule||(e.BS=this.blockSchedule),this.treatmentId!==null&&(e.TID=this.treatmentId),this.wantDeleteCounter>0&&(e.WDC=this.wantDeleteCounter),this.hasDebt&&(e.HD=this.hasDebt),this.transactionCounter>0&&(e.TC=this.transactionCounter),this.transactionsPerUser>0&&(e.TPU=this.transactionsPerUser),this.debtCounter>0&&(e.DC=this.debtCounter),this.invoiceCoverCounter>0&&(e.ICC=this.invoiceCoverCounter),this.eventsBelong!==1&&(e.EB=this.eventsBelong),this.isBreak&&(e.IB=this.isBreak),this.breakId!==""&&(e.BI=this.breakId),this.eventIndex!==0&&(e.i=this.eventIndex),this.treatmentName!==""&&(e.TN=this.treatmentName),this.onHold&&(e.oH=this.onHold),this.isMulti&&(e.IM=this.isMulti),this.currentParticipants>0&&(e.CP=this.currentParticipants),this.wantDelete&&(e.wD=this.wantDelete),this.hasInvoice&&(e.Hi=this.hasInvoice),this.recurrenceEvent!=null&&(e.RE=this.recurrenceEvent.toJson({})),this.note!==null&&this.note!==""&&(e.N=this.note),this.partOfRecurrence&&(e.POR=this.partOfRecurrence),this.recurrenceFatherBookingId!=null&&(e.RFBI=this.recurrenceFatherBookingId),this.isVacation&&(e.IV=this.isVacation),this.breakFatherRecurrenceId!=null&&(e.BFRI=this.breakFatherRecurrenceId),this.vacationAddedToDeviceCalendar&&(e.VATDC=this.vacationAddedToDeviceCalendar),this.vacationCreatedAt!=null&&(e.VCA=this.vacationCreatedAt.toString()),this.breakAddedToDeviceCalendar&&(e.BATDC=this.breakAddedToDeviceCalendar),this.timeId!==null&&this.recurrenceEvent===null&&(e.RTI=this.timeId),this.recurrenceBreakFatherDate!==null&&(e.RBFD=this.recurrenceBreakFatherDate),this.recurrenceBreakRefInfo!=null&&(e.RBRI=this.recurrenceBreakRefInfo.toJson({saveStartDate:!1,saveEnd:!0,saveException:!1})),this.subTreatmentName!==""&&(e.STN=this.subTreatmentName),this.totalBookingMinutes!==this.durationMinutes&&(e.TBM=this.totalBookingMinutes),this.belongTreatments>1&&(e.BTR=this.belongTreatments),e}toString(){return JSON.stringify(this,null,2)}}class er{constructor({createdAt:e,amount:t,id:r,showUser:n,description:s=""}){o(this,"createdAt",new Date(0));o(this,"id","");o(this,"amount",0);o(this,"description","");o(this,"showUser",!1);this.createdAt=e,this.amount=t,this.id=r,this.showUser=n,this.description=s}static fromJson(e,t){return new er({createdAt:e.createdAt?new Date(e.createdAt):new Date(0),amount:e.amount!=null?typeof e.amount=="number"?e.amount:parseFloat(e.amount):0,id:t,showUser:e.showUser??!1,description:e.description??""})}static fromDebt(e){return new er({createdAt:e.createdAt,amount:e.amount,id:e.id,showUser:e.showUser,description:e.description})}isEqual(e){return e.id===this.id&&e.description===this.description&&e.showUser===this.showUser&&e.createdAt.toString()===this.createdAt.toString()&&this.amount===e.amount}toJson(){const e={};return e.createdAt=this.createdAt.toISOString(),e.amount=this.amount,this.showUser&&(e.showUser=this.showUser),this.description!==""&&(e.description=this.description),e}}class Lm{constructor({workerId:e="",workerName:t="",businessName:r="",buisnessId:n="",workerPhone:s=""}={}){o(this,"date",new Date(0));o(this,"workerId","");o(this,"workerName","");o(this,"workerPhone","");o(this,"buisnessId","");o(this,"businessName","");o(this,"recurrenceEvent");o(this,"recurrenceRef");o(this,"recurrenceFatherDate");o(this,"recurrenceEventRefInfo");o(this,"recurrenceNotificationsLastDate");o(this,"recurrenceChildDate");this.workerId=e,this.workerName=t,this.businessName=r,this.buisnessId=n,this.workerPhone=s}}class tr{constructor({monthStr:e,invoiceId:t,docId:r,amount:n,issuedBy:s}){o(this,"invoiceId","");o(this,"docId","");o(this,"monthStr","");o(this,"issuedBy","");o(this,"amount",0);this.monthStr=e,this.invoiceId=t,this.docId=r,this.amount=n,this.issuedBy=s}toJson(){const e={};return e.monthStr=this.monthStr,e.docId=this.docId,e.issuedBy=this.issuedBy,e.amount=this.amount,e}static fromJson(e,t,r){const n=new tr({});return n.invoiceId=t,n.docId=e.docId??"",n.monthStr=e.monthStr??"",n.issuedBy=e.issuedBy??r,e.amount!=null&&(n.amount=typeof e.amount=="number"?e.amount:parseFloat(e.amount)),n}static fromBookingInvoiceData(e){const t=new tr({});return t.invoiceId=e.invoiceId,t.docId=e.docId,t.monthStr=e.monthStr,t.issuedBy=e.issuedBy,t.amount=e.amount,t}toString(){return JSON.stringify(this.toJson(),null,2)}}const Um="simpletor.officialsimplecode.com",Wm="?PaymentId=PAYMENT_ID";class gs{constructor({id:e,workerId:t}){o(this,"id","");o(this,"workerId","");o(this,"createdAt",new Date(0));o(this,"signNewMultiBookingUsers",!0);this.id=e,this.workerId=t}get link(){return`https://${Um}/${Wm}`.replace("PAYMENT_ID",this.id)}static fromJson(e){const t=new gs({});return t.id=e.id??"",e.createdAt!=null&&(t.createdAt=new Date(e.createdAt)||new Date(0)),t.workerId=e.workerId??"",t.signNewMultiBookingUsers=e.signNewMultiBookingUsers??!0,t}toJson(){const e={};return this.createdAt.getTime()!==new Date(0).getTime()&&(e.createdAt=this.createdAt.toISOString()),this.signNewMultiBookingUsers||(e.signNewMultiBookingUsers=this.signNewMultiBookingUsers),e.id=this.id,e.workerId=this.workerId,e}toString(){return JSON.stringify(this.toJson(),null,2)}}const{v4:so}=Sm;class lt extends Lm{constructor({workerId:t,workerName:r,businessName:n,buisnessId:s,workerPhone:a}){super({workerId:t,workerName:r,businessName:n,buisnessId:s,workerPhone:a});o(this,"customerName","");o(this,"customerPhone","");o(this,"customerId","");o(this,"orderingOptions",Te.app);o(this,"isVerifiedPhone",!1);o(this,"isUserExist",!0);o(this,"notificationType",U.none);o(this,"workerNotificationOption",te.PushOrSMS);o(this,"workerRemindersTypes",new Map);o(this,"workerDeleted",!1);o(this,"clientMail","");o(this,"showAdressAlert",!1);o(this,"showPhoneAlert",!1);o(this,"signOnDeviceCalendar",!1);o(this,"isMultiRef",!1);o(this,"cancelDate");o(this,"lastTimeNotifyOnDebt");o(this,"adress","");o(this,"wasWaiting",!1);o(this,"bookingDate",new Date(0));o(this,"note","");o(this,"needCancel",!1);o(this,"treatments",new Map);o(this,"userGender",J.anonymous);o(this,"workerGender",J.anonymous);o(this,"status",ye.approved);o(this,"confirmedArrival",!1);o(this,"bookingId","");o(this,"userFcms",new Set);o(this,"clientNote","");o(this,"shopIcon",new de);o(this,"remindersTypes",new Map);o(this,"createdAt",new Date);o(this,"finishInvoices",!1);o(this,"invoices",new Map);o(this,"transactions",new Map);o(this,"recurrenceTimeId");o(this,"recurreneFatherDate");o(this,"debts",new Map);o(this,"addToClientAt",!1);o(this,"paymentRequest");o(this,"userDeleted",!1);o(this,"fatherMultiBooking");o(this,"fatherRecurrenceBooking")}static empty(){return new lt({})}static fromBooking(t){const r=new lt({});return r.customerName=t.customerName,r.customerPhone=t.customerPhone,r.customerId=t.customerId,r.workerPhone=t.workerPhone,r.workerGender=t.workerGender,r.userGender=t.userGender,r.businessName=t.businessName,r.buisnessId=t.buisnessId,r.bookingId=t.bookingId,r.workerGender=t.workerGender,r.shopIcon=t.shopIcon,r.recurrenceTimeId=t.recurrenceTimeId,r.note=t.note,r.workerRemindersTypes={...t.workerRemindersTypes},r.signOnDeviceCalendar=t.signOnDeviceCalendar,r.userDeleted=t.userDeleted,r.workerNotificationOption=t.workerNotificationOption,r.paymentRequest=t.paymentRequest,r.remindersTypes={...t.remindersTypes},r.isVerifiedPhone=t.isVerifiedPhone,r.workerDeleted=t.workerDeleted,r.finishInvoices=t.finishInvoices,r.adress=t.adress,r.addToClientAt=t.addToClientAt,r.showAdressAlert=t.showAdressAlert,r.showPhoneAlert=t.showPhoneAlert,r.orderingOptions=t.orderingOptions,r.isUserExist=t.isUserExist,r.isMultiRef=t.isMultiRef,r.needCancel=t.needCancel,r.userGender=t.userGender,r.bookingDate=t.bookingDate,r.recurrenceNotificationsLastDate=t.recurrenceNotificationsLastDate,r.cancelDate=t.cancelDate,r.customerId=t.customerId,r.workerPhone=t.workerPhone,r.lastTimeNotifyOnDebt=t.lastTimeNotifyOnDebt,t.debts.forEach((n,s)=>{r.debts.set(s,er.fromDebt(n))}),r.treatments=new Map,t.treatments.forEach((n,s)=>{const a=_e.fromTreatment(n);a.index=s,r.treatments.set(s,n)}),r.invoices=new Map,t.invoices.forEach((n,s)=>{r.invoices.set(s,tr.fromBookingInvoiceData(n))}),r.clientNote=t.clientNote,r.status=t.status,r.confirmedArrival=t.confirmedArrival,r.createdAt=t.createdAt,r.clientMail=t.clientMail,r.workerName=t.workerName,r.buisnessId=t.buisnessId,r.notificationType=t.notificationType,r.userFcms=new Set(t.userFcms),r.recurreneFatherDate=t.recurreneFatherDate,r.recurrenceRef=t.recurrenceRef,r.transactions=new Map,t.transactions.forEach((n,s)=>{r.transactions.set(s,Et.fromTransaction(n))}),r}static fromJson(t,r){try{const n=new lt({});if(n.workerGender=et[t.workerGender]||J.anonymous,n.customerName=t.customerName||"",n.note=t.note||"",n.bookingId=r,n.signOnDeviceCalendar=t.signOnDeviceCalendar||!1,n.userDeleted=t.userDeleted||!1,n.workerDeleted=t.workerDeleted||!1,n.customerId=t.customerId||t.customerPhone||"",n.workerPhone=t.workerPhone||"",n.customerPhone=t.customerPhone||"",n.recurrenceTimeId=t.recurrenceTimeId,n.workerId=t.workerId||t.workerPhone||"",n.adress=t.adress||"",t.shopIcon!=null&&(n.shopIcon=de.fromJson(t.shopIcon)),n.isVerifiedPhone=t.isVerifiedPhone||!1,n.customerId==n.customerPhone&&n.customerId.length==14&&(n.isVerifiedPhone=!0),n.isMultiRef=t.isMultiRef||!1,n.needCancel=t.needCancel||!1,t.lastTimeNotifyOnDebt!=null&&(n.lastTimeNotifyOnDebt=new Date(t.lastTimeNotifyOnDebt)),n.finishInvoices=t.finishInvoices||!1,t.remindersTypes!=null?Object.entries(t.remindersTypes).forEach(([s,a])=>{kt[s]!=null&&n.remindersTypes.set(kt[s],a)}):n.remindersTypes=new Map([je.regular,t.minutesBeforeNotify||60]),t.workerRemindersTypes!=null&&Object.entries(t.workerRemindersTypes).forEach(([s,a])=>{kt[s]!=null&&n.workerRemindersTypes.set(kt[s],a)}),n.clientMail=t.clientMail||"",t.recurrenceNotificationsLastDate!=null&&(n.recurrenceNotificationsLastDate=new Date(t.recurrenceNotificationsLastDate)),n.clientNote=t.clientNote||"",n.recurreneFatherDate=t.recurreneFatherDate,n.recurrenceRef=t.recurrenceRef,t.orderingOptions!=null&&(n.orderingOptions=So[t.orderingOptions]||Te.app),t.debts!=null&&Object.entries(t.debts).forEach(([s,a])=>{n.debts.set(s,er.fromJson(a,s))}),t.cancelDate!=null&&(n.cancelDate=new Date(t.cancelDate)),n.wasWaiting=t.wasWaiting||!1,n.isUserExist=t.isUserExist||!0,t.invoices!=null&&Object.entries(t.invoices).forEach(([s,a])=>{n.invoices.set(s,tr.fromJson(a,s,n.workerId))}),t.userGender!=null&&(n.userGender=et[t.userGender]||J.anonymous),n.status=_o[t.status.toString()]||ye.approved,n.confirmedArrival=t.confirmedArrival||!1,t.bookingDate!=null&&(n.bookingDate=new Date(t.bookingDate)||new Date(0)),t.treatments!=null){n.treatments=new Map;let s=0;Object.entries(t.treatments).forEach(([a,u])=>{const c=t.treatments[s.toString()];n.treatments.set(s.toString(),_e.fromJson(c,s.toString())),s+=1})}else if(t.treatment!=null){const s=_e.fromJson(t.treatment,"0");n.treatments.set("0",s)}return n.showAdressAlert=t.showAdressAlert||!1,n.showPhoneAlert=t.showPhoneAlert||!1,n.workerName=t.workerName||"",n.businessName=t.businessName||"",n.buisnessId=t.buisnessId||"",t.notificationType!=null?n.notificationType=Fo[t.notificationType]||U.push:t.withMessage?n.notificationType=U.message:n.notificationType=U.push,t.workerNotificationOption!=null&&(n.workerNotificationOption=vi[t.workerNotificationOption]||te.PushOrSMS),t.userFcms!=null?t.userFcms.forEach(s=>{n.userFcms.add(s)}):t.deviceFCM!=null&&t.deviceFCM!=""&&(n.userFcms=new Set([t.deviceFCM])),t.createdAt!=null&&(n.createdAt=new Date(t.createdAt)||new Date(0)),t.RE!=null&&(n.recurrenceEvent=mt.fromJson(t.RE,n.bookingDate)),t.RERI!=null&&(n.recurrenceEventRefInfo=mt.fromJson(t.RERI)),n.transactions=new Map,t.transactions!=null&&Object.entries(t.transactions).forEach(([s,a])=>{n.transactions.set(s,Et.fromJson(a,s))}),t.paymentRequest!=null&&(n.paymentRequest=gs.fromJson(t.paymentRequest)),n}catch(n){return he.error(`Error loading booking doc ${r}: ${n}`),new lt({})}}get treatmentLength(){return Array.from(this.treatments.values()).reduce((t,r)=>r.count+t,0)}get canSendMessage(){return this.isVerifiedPhone||this.orderingOptions===Te.byWorker}get treatmentsToStringNotDetailed(){return this.treatmentLength===1?this.treatments.values().next().value.name:this.treatments.size===1?`${this.treatments.values().next().value.name}x${this.treatmentLength}`:`${this.treatments.values().next().value.name}+${this.treatmentLength-1}`}get isPassed(){if(this.recurrenceEvent!=null){if(this.recurrenceChildDate!=null)return le(this.recurrenceChildDate,new H({minutes:this.totalMinutes+2}))<new Date;const t=this.recurrenceEvent.endOfTheEvent;return t!==null&&t<zm(new Date)}else return le(this.bookingDate,new H({minutes:this.totalMinutes+2}))<new Date}get totalMinutes(){let t=0;return this.treatments.forEach((r,n)=>{t+=r.totalMinutesForBooking}),t}get customerHashPhone(){return Ai(this.customerPhone)}get bookingWorkTimes(){const t=new Map;let r=this.bookingDate;return Object.values(this.treatments).forEach(n=>{Array.from({length:n.count}).forEach(()=>{Object.values(n.times).forEach(s=>{r=le(r,new H({minutes:s.breakMinutes})),t.set(Rt(r),s.workMinutes),r=le(r,new H({minutes:s.workMinutes}))})})}),t}get totalEventsCount(){let t=0;return Object.values(this.treatments).forEach(r=>{t+=r.times.length*r.count}),t}get invoicesCoverPrice(){const t=Object.values(this.invoices).reduce((r,n)=>r+n.amount,0);return this.finishInvoices||this.invoices.size>0&&t>=this.totalPrice.amount}get totalPrice(){let t=new Oe({amount:"0",currency:Cr});return Object.values(this.treatments).forEach(r=>{t.amount+=r.totalPriceForBooking,t.currency=r.price.currency}),t}get typesOfEvents(){const t=new Map;return this.recurrenceEvent!==null?new Map:(this.needCancel&&t.set(It.needCancel,1),this.debts.size>0&&t.set(It.withDebts,1),this.status===ye.waiting&&t.set(It.onHold,1),t)}get remindersToFutureNotifications(){const t=[];for(const[r,n]of this.remindersTypes){const s=this.reminder(r);s!==null&&t.push(s)}return t}reminder(t){if(this.notificationType!==U.push)return null;const r=this.remindersTypes.get(t);if(r===void 0||r===0)return null;const n=_n(this,r);return n<new Date||this.userFcms.size===0?null:new ps({businessName:this.businessName,shopIcon:this.shopIcon,address:this.showAdressAlert?this.adress:"",isMulti:this.isMultiRef,isRecurrence:this.recurrenceEvent!==null||this.recurrenceRef!==null,id:this.reminderId(t),dateToNotify:n,phoneToContact:this.showPhoneAlert?Xm(this.workerPhone):"",businessId:this.buisnessId,type:this.treatmentsToStringNotDetailed,minutesToAdd:this.utcDeltaMinutes()+r,totalEventMinutes:this.totalMinutes,fcms:{...this.userFcms}})}utcDeltaMinutes(){const t=new Date,r=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes());return Math.floor((Date.now()-r.getTime())/(60*1e3))}get remindersOnBooking(){const t={};return this.cancelDate!==null?{}:this.userFcms.size===0?{}:this.notificationType===U.message?{}:(this.remindersTypes.forEach((r,n)=>{var a;if(r<=0)return;const s=_n(this,r);s>=new Date&&(t[a=s.toISOString()]??(t[a]={}),t[s.toISOString()]={[this.reminderId(n)]:null})}),t)}get bookingsEventsAsJson(){const t=new Map;let r=this.bookingDate,n=this.totalEventsCount,s=0;return this.invoicesCoverPrice,this.treatments.forEach((a,u)=>{Array.from({length:a.count}).forEach(()=>{a.times.forEach((c,h)=>{r=le(r,new H({minutes:c.breakMinutes}));const l=this.recurrenceTimeId!=null&&this.recurrenceEvent!=null?`${Rt(r)}_${this.recurrenceTimeId}`:Rt(r),d=new Br;d.eventIndex=s,d.treatmentId=a.id,d.subTreatmentName=c.title,d.totalBookingMinutes=this.totalMinutes,d.belongTreatments=this.treatmentLength,d.onHold=this.status==="waiting",d.wantDelete=this.needCancel,d.ids=[this.workerId],d.confirmArrival=this.confirmedArrival,d.hasDebt=this.debts.size>0,d.timeId=this.recurrenceEvent!=null?this.recurrenceTimeId:void 0,d.treatmentName=a.name,d.transactionCounter=this.transactions.size,d.eventsBelong=n,d.isBreak=!1,d.partOfRecurrence=this.recurrenceRef!=null,d.hasInvoice,d.recurrenceEvent=this.recurrenceEvent,d.eventName=this.customerId,d.from=r,d.durationMinutes=c.workMinutes,d.colorIndex=a.colorIndex,t.set(l,d.toJson()),r=le(r,new H({minutes:c.workMinutes})),s+=1})})}),t}get monthStr(){return li(this.bookingDate)}get toBookingReferencePaymentObj(){return new xs({id:this.bookingId,isMultiBooking:!1,date:this.bookingDate,workerId:this.workerId})}async copyDataToOrder({user:t,worker:r,needToHoldOn:n,business:s,noteText:a="",clientNoteText:u=""}){var h;this.customerName=t.name,this.customerId=t.id,this.customerPhone=t.phoneNumber,this.userGender=t.gender,this.isVerifiedPhone=t.isVerifiedPhone,this.clientMail=t.userPublicData.email;const c=t.userPublicData.clientAt;this.addToClientAt=!c.hasOwnProperty(s.businessId)||!((h=c.get(s.businessId))!=null&&h.has(r.id)),this.orderingOptions=Te.web,this.adress=s.adress,this.clientNote=u,this.wasWaiting=!1,this.note=a,this.shopIcon=s.design.shopIconData,this.userFcms=t.fcmsTokens,Oi(this.bookingDate,new Date).inMinutes<60&&!n&&(this.confirmedArrival=!0),this.workerNotificationOption=r.notifications.notificationOption,this.workerRemindersTypes={...r.notifications.remindersTypes};for(const[l,d]of r.notifications.remindersTypes)this.isPassed||l===je.confirmArrival&&this.confirmedArrival||(Mi(this.bookingDate,new H({minutes:d}))<le(new Date,new H({seconds:1}))&&this.recurrenceEvent===void 0?(this.remindersTypes.set(l,this.remindersTypes.get(l)-this.remindersTypes.get(l)%5),this.remindersTypes.get(l)<10&&this.remindersTypes.delete(l)):this.remindersTypes.set(l,d));this.workerId=r.id,this.workerPhone=r.phone,this.workerName=r.name,this.workerGender=r.gender,this.showPhoneAlert=r.notifications.showPhoneAlert,this.showAdressAlert=r.notifications.showAdressAlert,this.businessName=s.shopName,this.bookingId=this.bookingId===""?so():this.bookingId,this.buisnessId=s.businessId,n?this.status=ye.waiting:this.status=ye.approved,this.isVerifiedPhone=t.isVerifiedPhone,this.notificationType=Lf({booking:this,worker:r})}updateBookingByBooking({oldBooking:t,worker:r,needToHoldOn:n,business:s,newClientNote:a,keepRecurrence:u=!1}){if(this.customerName=t.customerName,this.customerPhone=t.customerPhone,this.userGender=t.userGender,this.clientMail=t.clientMail,this.customerId=t.customerId,this.note=t.note,t.treatments.size>this.treatments.size){const h=new Map;let l=0;for(const[d,f]of Object.entries(this.treatments))h.set(l.toString(),f),l+=1;this.treatments=h}const c=new Map([...t.treatments.entries()].sort((h,l)=>h[0].localeCompare(l[0])));t.treatments=c,t.customerPhone!=this.customerPhone?this.orderingOptions=Te.byWorker:this.orderingOptions=t.orderingOptions,a!=null?this.clientNote=a:this.clientNote=t.clientNote,this.workerNotificationOption=r.notifications.notificationOption,this.workerRemindersTypes={...r.notifications.remindersTypes},r.notifications.remindersTypes.forEach((h,l)=>{Mi(this.bookingDate,new H({minutes:h}))<le(new Date,new H({minutes:1}))&&(this.remindersTypes.set(l,Math.abs(Math.floor(Oi(new Date,this.bookingDate).inMinutes/2))),this.remindersTypes.set(l,this.remindersTypes.get(l)-this.remindersTypes.get(l)%5),this.remindersTypes.get(l)<10&&this.remindersTypes.delete(l))}),this.debts={...t.debts},this.isUserExist=t.isUserExist,this.createdAt=t.createdAt,this.lastTimeNotifyOnDebt=t.lastTimeNotifyOnDebt,this.cancelDate=t.cancelDate,this.wasWaiting=t.wasWaiting,this.signOnDeviceCalendar=t.signOnDeviceCalendar,this.recurrenceEvent=void 0,this.recurrenceNotificationsLastDate=void 0,this.recurrenceTimeId=void 0,u||(this.recurrenceRef=void 0,this.recurreneFatherDate=void 0,this.recurrenceEventRefInfo=void 0),this.userDeleted=t.userDeleted,this.paymentRequest=t.paymentRequest,this.shopIcon=s.design.shopIconData,this.workerName=r.name,this.workerGender=r.gender,this.workerId=r.id,this.workerPhone=r.phone,this.showPhoneAlert=r.notifications.showPhoneAlert,this.showAdressAlert=r.notifications.showAdressAlert,this.adress=s.adress,this.invoices={...t.invoices},this.businessName=s.shopName,this.bookingId=t.bookingId===""||t.recurrenceEvent!=null?so():t.bookingId,this.buisnessId=t.buisnessId,this.notificationType=t.notificationType,this.bookingDate===t.bookingDate?this.status=t.status:this.status=n?ye.waiting:ye.approved,this.confirmedArrival=!1,n||Oi(this.bookingDate,new Date).inMinutes<60&&(this.confirmedArrival=!0),this.needCancel=t.needCancel,this.finishInvoices=t.finishInvoices,this.transactions=new Map;for(const[h,l]of Object.entries(t.transactions))this.transactions.set(h,Et.fromTransaction(l))}sameTreatments(t){let r=!0;return this.treatmentLength!==t.treatmentLength?!1:(Object.entries(this.treatments).forEach(([n,s])=>{let a=!1;Object.entries(t.treatments).forEach(([u,c])=>{s.id===c.id&&s.count===c.count&&(a=!0)}),r=r&&a}),r)}get businessPayloadData(){return new Ar({businessName:this.businessName,businessId:this.buisnessId,shopIcon:this.shopIcon})}get notificationTopic(){return new Pr({date:Ue(this.bookingDate),businessId:this.buisnessId,workerId:this.workerId,workerName:this.workerName})}get remindersToScheduleMessages(){const t=[];return this.remindersTypes.forEach((r,n)=>{const s=this.reminderMessage(n);s!=null&&t.push(s)}),t}reminderMessage(t){const r=this.remindersTypes.get(t);r==null||r===0||Mi(this.bookingDate,new H({minutes:r}))<new Date}get toBookingNotificationPayload(){return new ms({businessId:this.buisnessId,id:this.bookingId,businessName:this.businessName,totalMinutes:this.totalMinutes,isRecurrence:this.recurrenceEvent!=null,date:this.bookingDate,workerId:this.workerId,shopIcon:this.shopIcon})}get transactionsTotalPaymentPrice(){let t=new Oe({amount:"0",currency:this.totalPrice.currency});for(const r of Object.values(this.transactions))r.type===Ge.payment&&(t.amount+=r.amount);return t}get isDepositTransaction(){return Object.keys(this.transactions).length===1?Object.values(this.transactions)[0].type===Ge.deposit:!1}get totalDebtAmount(){let t=0;for(const r of Object.values(this.debts))t+=r.amount;return t}get treatmentsToStringDetailed(){let t="";for(const r of Object.values(this.treatments))t+=r.nameForBooking+" + ";return t.length>0?t.substring(0,t.length-3):""}get priceInAdvance(){const t=new Oe({amount:"0",currency:Cr});for(const r of Object.values(this.treatments))t.amount+=r.amountInAdvanceForBooking,t.currency=r.price.currency;return t}get messageRemindersOnBooking(){const t=[];if(this.cancelDate!==null||this.userFcms.size===0||this.notificationType===U.push)return t;for(const[r,n]of this.remindersTypes){if(n<=0)continue;_n(this,n).toUTCString()>=new Date().toUTCString()&&t.push(this.reminderId(r))}return t}get invoiceItem(){return new InvoiceItem({code:0,information:this.treatmentsToStringDetailed,amountPerItem:this.totalPrice.amount,quantity:1})}get toPaymentRequestUser(){return new sr({name:this.customerName,userId:this.customerId,gender:this.userGender,isVerifiedPhone:this.isVerifiedPhone,isExist:this.isUserExist,phone:this.customerPhone})}get invoiceItems(){const t=new Map;let r=0;for(const n of Object.values(this.treatments)){let s=n.name;n.priceChangingNote!==null&&n.priceChangingNote!==""&&(s+=`: ${n.priceChangingNote}.`),Array.from({length:n.count},a=>{t.set(r,new InvoiceItem({code:r,information:s,amountPerItem:n.price.amount,quantity:1})),r++})}return t}get transactionsTotalDepositPrice(){let t=new Oe({amount:"0",currency:this.totalPrice.currency});for(const r of Object.values(this.transactions))r.type===Ge.deposit&&(t.amount+=r.amount);return t}get transactionDepositLength(){let t=0;for(const r of Object.values(this.transactions))r.type===Ge.deposit&&(t+=1);return t}get transactionPaymentLength(){let t=0;for(const r of Object.values(this.transactions))r.type===Ge.payment&&(t+=1);return t}reminderId(t){return this.createdAt<qc?this.bookingId:`${this.bookingId}__${Jr[t]}`}get bookingsEventsAsEvents(){const t=new Map;let r=this.bookingDate,n=this.totalEventsCount,s=0;return this.invoicesCoverPrice,this.treatments.forEach((a,u)=>{Array.from({length:a.count}).forEach(()=>{a.times.forEach((c,h)=>{r=le(r,new H({minutes:c.breakMinutes}));const l=this.recurrenceTimeId!=null&&this.recurrenceEvent!=null?`${Rt(r)}_${this.recurrenceTimeId}`:Rt(r),d=new Br;d.eventIndex=s,d.treatmentId=a.id,d.subTreatmentName=c.title,d.totalBookingMinutes=this.totalMinutes,d.belongTreatments=this.treatmentLength,d.onHold=this.status==="waiting",d.wantDelete=this.needCancel,d.ids=[this.workerId],d.confirmArrival=this.confirmedArrival,d.hasDebt=this.debts.size>0,d.timeId=this.recurrenceEvent!=null?this.recurrenceTimeId:void 0,d.treatmentName=a.name,d.transactionCounter=this.transactions.size,d.eventsBelong=n,d.isBreak=!1,d.partOfRecurrence=this.recurrenceRef!=null,d.hasInvoice,d.recurrenceEvent=this.recurrenceEvent,d.eventName=this.customerId,d.from=r,d.durationMinutes=c.workMinutes,d.colorIndex=a.colorIndex,t.set(l,d),r=le(r,new H({minutes:c.workMinutes})),s+=1})})}),t}isTheSameAs({booking:t,customerId:r,note:n}){var a,u;let s=!0;if(this.treatments.size!==t.treatments.size)return!1;for(const[c,h]of this.treatments)if(((a=t.treatments.get(c))==null?void 0:a.id)!=h.id||((u=t.treatments.get(c))==null?void 0:u.count)!=h.count){s=!1;break}return s&&t.customerId===r&&t.clientNote===this.clientNote&&t.note===n&&this.bookingDate.getTime()===t.bookingDate.getTime()&&this.workerId===t.workerId}toJson(){const t={};return t.workerGender=Qt[this.workerGender],t.customerName=this.customerName,t.note=this.note,t.customerId=this.customerId,this.wasWaiting&&(t.wasWaiting=this.wasWaiting),this.workerDeleted&&(t.workerDeleted=this.workerDeleted),this.cancelDate!=null&&(t.cancelDate=this.cancelDate.toString()),t.remindersTypes={},this.clientNote!=""&&(t.clientNote=this.clientNote),this.finishInvoices&&(t.finishInvoices=this.finishInvoices),this.debts.size>0&&(t.debts={},this.debts.forEach((r,n)=>{t.debts[n]=r.toJson()})),this.lastTimeNotifyOnDebt!=null&&(t.lastTimeNotifyOnDebt=this.lastTimeNotifyOnDebt.toString()),this.isVerifiedPhone&&(t.isVerifiedPhone=this.isVerifiedPhone),this.userDeleted&&(t.userDeleted=this.userDeleted),t.bookingId=this.bookingId,t.needCancel=this.needCancel,t.userGender=Qt[this.userGender],t.businessName=this.businessName,this.signOnDeviceCalendar&&(t.signOnDeviceCalendar=this.signOnDeviceCalendar),this.recurrenceTimeId!=null&&(t.recurrenceTimeId=this.recurrenceTimeId),t.treatments={},this.recurrenceRef!=null&&(t.recurrenceRef=this.recurrenceRef),this.recurreneFatherDate!=null&&(t.recurreneFatherDate=this.recurreneFatherDate),this.treatments.forEach((r,n)=>{t.treatments[n.toString()]=r.toJson()}),t.invoices={},this.invoices.forEach((r,n)=>{t.invoices[n]=r.toJson()}),this.isMultiRef&&(t.isMultiRef=this.isMultiRef),this.isUserExist||(t.isUserExist=this.isUserExist),this.orderingOptions!=Te.app&&(t.orderingOptions=No[this.orderingOptions]),this.showAdressAlert&&(t.showAdressAlert=this.showAdressAlert),this.showPhoneAlert&&(t.showPhoneAlert=this.showPhoneAlert),this.adress!=""&&(t.adress=this.adress),this.clientMail!=""&&(t.clientMail=this.clientMail),t.customerPhone=this.customerPhone,t.status=Bo[this.status],t.confirmedArrival=this.confirmedArrival,t.bookingDate=this.bookingDate.toISOString(),t.workerId=this.workerId.toString(),t.workerName=this.workerName,t.buisnessId=this.buisnessId,t.shopIcon=this.shopIcon.toJson(),this.recurrenceNotificationsLastDate!=null&&(t.recurrenceNotificationsLastDate=this.recurrenceNotificationsLastDate.toString()),t.notificationType=lu[this.notificationType],t.workerNotificationOption=du[this.workerNotificationOption],t.userFcms=Array.from(this.userFcms),t.createdAt=this.createdAt.toISOString(),t.transactions={},this.transactions.forEach((r,n)=>{t.transactions[n]=r.toJson()}),this.paymentRequest!=null&&(t.paymentRequest=this.paymentRequest.toJson()),t}}const kr=class kr{constructor(){o(this,"errorCode",100);o(this,"error",W.unknown);o(this,"details","")}static GI(){return kr._singleton}addError({code:e,error:t,details:r}){this.error=t!==void 0?t:this.error,this.errorCode=e!==void 0?e:this.errorCode,this.details=r!==void 0?r:this.details}};o(kr,"_singleton",new kr);let ao=kr;function Rt(i){return Ne(i,"HH:mm")}function Hm(i){return Ne(i,"dd")}function li(i){return Ne(i,"MM-yyyy")}function Ue(i){return Ne(i,"dd-MM-yyyy")}function Vm(i){return new Date(`1970-01-01T${i}`)}function Ei(i){return new Date(i)}function U0(i){return new Date(`01-${i}`)}function oo(i,e){return i===null&&e===null?null:i===null?e:e===null||i<e?i:e}function W0(i){return new Date(i.getFullYear(),i.getMonth(),1)}function Ie(i){return new Date(i.getFullYear(),i.getMonth(),i.getDate())}function co(i,e){return new Date(i.getFullYear(),i.getMonth()+e,i.getDate(),i.getHours(),i.getMinutes())}function gt(i){const e=i.getDay(),t=i.getDate()-e+(e===0?-6:1);return new Date(i.setDate(t))}function zm(i){return fl(Ne(i,"dd-MM-yyyy"),"dd-MM-yyyy",new Date)}function uo(i,e){let t=i.getFullYear()-e.getFullYear(),r=i.getMonth()-e.getMonth();return r<0&&(t-=1,r+=12),Math.abs(t*12+r)}function $m(i,e){return i===null&&e===null?null:i===null?e:e===null?i:e>i?e:i}function _n(i,e){return new Date(i.bookingDate.getTime()-e*6e4)}class ws{constructor(){o(this,"customerName","");o(this,"customerPhone","");o(this,"isVerifiedPhone",!1);o(this,"notificationType",U.none);o(this,"workerNotificationOption",te.PushOrSMS);o(this,"workerRemindersTypes",new Map);o(this,"customerId","");o(this,"orderingOptions",Te.app);o(this,"remindersTypes",new Map);o(this,"isUserExist",!0);o(this,"signOnDeviceCalendar",!1);o(this,"lastTimeNotifyOnDebt",null);o(this,"clientMail","");o(this,"finishInvoices",!1);o(this,"showAdressAlert",!1);o(this,"userBookingId","");o(this,"showPhoneAlert",!1);o(this,"cancelDate",null);o(this,"wasWaiting",!1);o(this,"createdAt",new Date(0));o(this,"needCancel",!1);o(this,"userGender",J.anonymous);o(this,"status",ye.approved);o(this,"confirmedArrival",!1);o(this,"userFcms",new Set);o(this,"clientNote","");o(this,"invoices",new Map);o(this,"transactions",new Map);o(this,"debts",new Map);o(this,"addToClientAt",!1);o(this,"userDeleted",!1)}copyDataToOrder(e){const{worker:t,needToHoldOn:r,workerAction:n,bookingDate:s,addToCalendar:a,noteText:u=""}=e;this.clientNote=u,r?this.status=ye.waiting:this.status=ye.approved,this.showAdressAlert=t.notifications.showAdressAlert,this.showPhoneAlert=t.notifications.showPhoneAlert,!n&&!r&&s.getTime()-Date.now()<60*60*1e3&&(this.confirmedArrival=!0),this.signOnDeviceCalendar=a,this.workerNotificationOption=t.notifications.notificationOption,this.workerRemindersTypes=new Map(t.notifications.remindersTypes),t.notifications.remindersTypes.forEach((h,l)=>{s.getTime()<Date.now()||l===je.confirmArrival&&this.confirmedArrival||(s.getTime()-h*60*1e3<Date.now()+1e3?(this.remindersTypes.set(l,Math.abs(Math.floor((Date.now()-s.getTime())/1e3/60/2))-Math.abs(Math.floor((Date.now()-s.getTime())/1e3/60/2))%5),this.remindersTypes.get(l)<10&&this.remindersTypes.delete(l)):this.remindersTypes.set(l,h))}),this.orderingOptions=Te.web,this.isUserExist=!0,this.userFcms=new Set(Pt.GI().user.userPublicData.fcmsTokens),this.isVerifiedPhone=Pt.GI().user.isVerifiedPhone;const c=Pt.GI().user.userPublicData.clientAt;this.addToClientAt=!c.has(Ze.GI().business.businessId)||!c.get(Ze.GI().business.businessId).has(t.id),this.createdAt.getTime()===new Date(0).getTime()&&(this.createdAt=new Date),this.userBookingId,this.notificationType=Uf(this,t)}get toCustomerData(){return new Tt({name:this.customerName,phoneNumber:this.customerPhone,isVerifiedPhone:this.isVerifiedPhone,email:this.clientMail,customerUuid:this.customerId,gender:this.userGender})}get isDepositTransaction(){let e=!1;return this.transactions.forEach((t,r)=>{e=t.type===Ge.deposit}),e}get transactionsTotalPaymentAmount(){let e=0;return this.transactions.forEach((t,r)=>{t.type===Ge.payment&&(e+=t.amount)}),e}get canSendMessage(){return this.isVerifiedPhone||this.orderingOptions===Te.byWorker}get totalDebtAmount(){let e=0;return this.debts.forEach((t,r)=>{e+=t.amount}),e}get invoicePriceAmount(){return Array.from(this.invoices.values()).reduce((e,t)=>e+t.amount,0)}invoicesCoverPrice(e){const{totalAmount:t}=e;return this.finishInvoices||this.invoices.size>0&&Array.from(this.invoices.values()).reduce((r,n)=>r+n.amount,0)>=t}get transactionsTotalDepositAmount(){let e=0;return this.transactions.forEach((t,r)=>{t.type===Ge.deposit&&(e+=t.amount)}),e}get customerHashPhone(){return Ai(this.customerPhone)}get customerPhoneAsCollection(){return this.customerPhone.replace(/-/g,"")}reminderId(e){return this.userBookingId+"__"+Jr[e]}get toPaymentRequestUser(){return new sr({name:this.customerName,userId:this.customerId,gender:this.userGender,isExist:this.isUserExist,isVerifiedPhone:this.isVerifiedPhone,phone:this.customerPhone})}get typesOfEvents(){const e=new Map;return this.needCancel&&e.set(It.needCancel,1),this.debts.size>0&&e.set(It.withDebts,1),this.status===ye.waiting&&e.set(It.onHold,1),e}static fromJson(e,t,r){const n=new ws;return n.customerName=e.customerName||"",n.customerId=e.customerId||"",n.customerPhone=e.customerPhone||n.customerId,n.needCancel=e.needCancel||!1,n.remindersTypes=e.remindersTypes?new Map(Object.entries(e.remindersTypes).map(([s,a])=>[kt[s],a])):new Map([[je.regular,e.minutesBeforeNotify||60]]),n.workerRemindersTypes=e.workerRemindersTypes?new Map(Object.entries(e.workerRemindersTypes).map(([s,a])=>[kt[s],a])):new Map,n.signOnDeviceCalendar=e.signOnDeviceCalendar||!1,n.userDeleted=e.userDeleted||!1,n.isVerifiedPhone=e.isVerifiedPhone||!1,n.clientMail=e.clientMail||"",n.clientNote=e.clientNote||"",n.userBookingId=t,n.orderingOptions=So[e.orderingOptions]||Te.app,n.debts=e.debts?new Map(Object.entries(e.debts).map(([s,a])=>[s,er.fromJson(a,s)])):new Map,n.finishInvoices=e.finishInvoices||!1,n.cancelDate=e.cancelDate?new Date(e.cancelDate):null,n.wasWaiting=e.wasWaiting||!1,n.isUserExist=e.isUserExist||!0,n.lastTimeNotifyOnDebt=e.lastTimeNotifyOnDebt?new Date(e.lastTimeNotifyOnDebt):null,n.invoices=e.invoices?new Map(Object.entries(e.invoices).map(([s,a])=>[s,tr.fromJson(a,s,r)])):new Map,n.userGender=et[e.userGender]||J.anonymous,n.status=_o[e.status.toString()]||ye.approved,n.confirmedArrival=e.confirmedArrival||!1,n.showAdressAlert=e.showAdressAlert||!1,n.showPhoneAlert=e.showPhoneAlert||!1,n.notificationType=Fo[e.notificationType]||U.none,n.workerNotificationOption=vi[e.workerNotificationOption]||te.PushOrSMS,n.userFcms=e.userFcms?new Set(e.userFcms):e.deviceFCM&&e.deviceFCM!==""?new Set([e.deviceFCM]):new Set,n.createdAt=e.createdAt?new Date(e.createdAt):new Date(0),n.transactions=e.transactions?new Map(Object.entries(e.transactions).map(([s,a])=>[s,Et.fromJson(a,s)])):new Map,n}toJson(){const e={};return e.customerName=this.customerName,e.customerId=this.customerId,this.wasWaiting&&(e.wasWaiting=this.wasWaiting),this.cancelDate&&(e.cancelDate=this.cancelDate.toISOString()),e.remindersTypes={},this.remindersTypes.forEach((t,r)=>{e.remindersTypes[Jr[r]]=t}),e.workerRemindersTypes={},this.workerRemindersTypes.forEach((t,r)=>{e.workerRemindersTypes[Jr[r]]=t}),this.userDeleted&&(e.userDeleted=this.userDeleted),this.signOnDeviceCalendar&&(e.signOnDeviceCalendar=this.signOnDeviceCalendar),this.clientNote!==""&&(e.clientNote=this.clientNote),this.needCancel&&(e.needCancel=this.needCancel),this.finishInvoices&&(e.finishInvoices=this.finishInvoices),e.userGender=Qt[this.userGender],this.invoices.size>0&&(e.invoices={},this.invoices.forEach((t,r)=>{e.invoices[r]=t.toJson()})),this.debts.size>0&&(e.debts={},this.debts.forEach((t,r)=>{e.debts[r]=t.toJson()})),this.lastTimeNotifyOnDebt&&(e.lastTimeNotifyOnDebt=this.lastTimeNotifyOnDebt.toISOString()),this.isUserExist||(e.isUserExist=this.isUserExist),this.orderingOptions!==Te.app&&(e.orderingOptions=No[this.orderingOptions]),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.clientMail!==""&&(e.clientMail=this.clientMail),e.customerPhone=this.customerPhone,this.status!==ye.approved&&(e.status=Bo[this.status]),this.confirmedArrival&&(e.confirmedArrival=this.confirmedArrival),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.userFcms.size>0&&(e.userFcms=Array.from(this.userFcms)),e.createdAt=this.createdAt.toISOString(),this.transactions.size>0&&(e.transactions={},this.transactions.forEach((t,r)=>{e.transactions[r]=t.toJson()})),e}toString(){return JSON.stringify(this,null,"  ")}}class Gt{constructor({freeFromPayments:e=!1,hashNumber:t="",blocked:r=!1}={}){o(this,"freeFromPayments");o(this,"hashNumber");o(this,"blocked");this.freeFromPayments=e,this.hashNumber=t,this.blocked=r}static fromJson(e,t){return new Gt({freeFromPayments:e.freeFromPayments,hashNumber:t})}static fromMinimalJson(e,t){return new Gt({blocked:e.B??!1,freeFromPayments:e.FP,hashNumber:t})}static fromCustomerData(e){return new Gt({blocked:e.blocked,freeFromPayments:e.freeFromPayments,hashNumber:e.hashNumber})}toJson(){const e={};return e.freeFromPayments=this.freeFromPayments,e.blocked=this.blocked,e}toMinimalJson(){const e={};return e.FP=this.freeFromPayments,e.B=this.blocked,e}toString(){return JSON.stringify(this.toJson(),null,2)}}const qm=3;class Tt{constructor({name:e="",amoutOfBookings:t=0,gender:r=J.male,email:n="",id:s="",freeFromPayments:a=!1,addedManually:u=!1,customerUuid:c="",isVerifiedPhone:h=!1,workerNaming:l="",blocked:d=!1,phoneNumber:f="",firstBookingsDate:x,userFirstBookingsDate:g,lastBookingsDate:y}){o(this,"name","");o(this,"workerNaming","");o(this,"phoneNumber","");o(this,"freeFromPayments",!1);o(this,"isExapmle",!1);o(this,"id","");o(this,"customerUuid","");o(this,"blocked",!1);o(this,"isVerifiedPhone",!1);o(this,"email","");o(this,"addedManually",!1);o(this,"gender",J.male);o(this,"amoutOfBookings",0);o(this,"firstBookingsDate");o(this,"userFirstBookingsDate");o(this,"lastBookingsDate");o(this,"belongings",new Set);o(this,"isDeleted",!1);this.name=e,this.amoutOfBookings=t,this.gender=r,this.email=n,this.id=s,this.freeFromPayments=a,this.addedManually=u,this.customerUuid=c,this.isVerifiedPhone=h,this.workerNaming=l,this.blocked=d,this.phoneNumber=f,this.firstBookingsDate=x,this.userFirstBookingsDate=g,this.lastBookingsDate=y}static fromJson(e,t){const r=new Tt({});return r.name=e.name??"",e.gender!=null&&(r.gender=r.getGenderFromStr(e.gender)),r.isVerifiedPhone=e.isVerifiedPhone??!1,r.freeFromPayments=e.freeFromPayments??!1,r.customerUuid=t,r.phoneNumber=e.phoneNumber??(t.length<20&&t.includes("-")?t:""),e.firstBookingsDate!=""&&e.firstBookingsDate!=null&&(r.firstBookingsDate=new Date(e.firstBookingsDate)),e.userFirstBookingsDate!=""&&e.userFirstBookingsDate!=null&&(r.userFirstBookingsDate=new Date(e.userFirstBookingsDate),(r.firstBookingsDate==null||r.userFirstBookingsDate<r.firstBookingsDate)&&(r.firstBookingsDate=r.userFirstBookingsDate)),e.lastBookingsDate!=null&&(r.lastBookingsDate=new Date(e.lastBookingsDate)),r.workerNaming=e.workerNaming??"",r.amoutOfBookings=e.amoutOfBookings??0,r.blocked=e.blocked??!1,r.email=e.email??"",r.id=e.id??"",r.addedManually=e.AM??!1,r}fromCustomerData(e){return this.name=e.name,this.gender=e.gender,this.isVerifiedPhone=e.isVerifiedPhone,this.phoneNumber=e.phoneNumber,this.belongings=e.belongings,this.email=e.email,this.isDeleted=e.isDeleted,this.blocked=e.blocked,this.id=e.id,this.addedManually=e.addedManually,this.freeFromPayments=e.freeFromPayments,this.customerUuid=e.customerUuid,this.workerNaming=e.workerNaming,this.firstBookingsDate=e.firstBookingsDate,this.lastBookingsDate=e.lastBookingsDate,this.amoutOfBookings=e.amoutOfBookings,this.userFirstBookingsDate=e.userFirstBookingsDate,this}get nameForWorker(){return this.workerNaming==""?this.name:this.workerNaming}get getFirstDate(){return this.firstBookingsDate==null||this.userFirstBookingsDate!=null&&this.userFirstBookingsDate<this.firstBookingsDate?this.userFirstBookingsDate:this.firstBookingsDate}get customerHashPhone(){return Ai(this.phoneNumber)}get customerPhoneAsCollection(){return this.phoneNumber.replaceAll("-","")}isTheSameAs(e,{withId:t=!1}={}){const r=this.toJson();t&&(r.id=e.customerUuid);const n=e.toJson();return t&&(n.id=this.customerUuid),JSON.stringify(n)===JSON.stringify(r)}getType({bookingInMonthForRegularClient:e,worker:t}){return t.id===this.customerUuid?5:this.isDeleted?7:this.amoutOfBookings<=qm?2:this.amountOfBookingsInMonth()<e?1:0}getGenderFromStr(e){return e==null||e=="A"?J.anonymous:e=="F"?J.female:J.male}getStrFromGender(e){return{[J.anonymous]:"A",[J.male]:"M",[J.female]:"F"}[e]||"A"}get toMultiBookingUser(){const e=new ws;return e.customerName=this.name!=""?this.name:this.workerNaming,e.customerPhone=this.phoneNumber,e.customerId=this.customerUuid,e.userGender=this.gender,e}get toPaymentRequestUser(){return new sr({userId:this.customerUuid,name:this.nameForWorker,gender:this.gender,isExist:!this.addedManually,isVerifiedPhone:this.isVerifiedPhone,phone:this.phoneNumber})}isMissing(e){return this.lastBookingsDate==null?!1:(new Date().getTime()-this.lastBookingsDate.getTime())/(1e3*3600*24)>e}amountOfBookingsInMonth(){if(this.firstBookingsDate==null)return-1;if(this.lastBookingsDate==null)return 0;const e=this.lastBookingsDate>new Date?new Date:this.lastBookingsDate,t=Math.max((e.getTime()-this.firstBookingsDate.getTime())/(1e3*3600*24),1);return this.amoutOfBookings/t*30}toJson(){const e={};return this.name!==""&&(e.name=this.name),this.gender!==J.male&&(e.gender=this.getStrFromGender(this.gender)),this.phoneNumber!==this.id&&(e.phoneNumber=this.phoneNumber),this.firstBookingsDate!=null&&(e.firstBookingsDate=this.firstBookingsDate.toISOString()),this.userFirstBookingsDate!=null&&(e.userFirstBookingsDate=this.userFirstBookingsDate.toISOString()),this.lastBookingsDate!=null&&(e.lastBookingsDate=this.lastBookingsDate.toISOString()),this.amoutOfBookings!==0&&(e.amoutOfBookings=this.amoutOfBookings),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.freeFromPayments=this.freeFromPayments,this.email!==""&&(e.email=this.email),e.blocked=this.blocked,this.id!==""&&(e.id=this.id),this.addedManually&&(e.AM=this.addedManually),this.workerNaming!==""&&(e.workerNaming=this.workerNaming),e}toMinimalJson(){const e={};return e.N=this.name!==""?this.name:this.workerNaming,e.G=this.getStrFromGender(this.gender),e.P=this.phoneNumber,this.phoneNumber!==this.customerUuid&&(e.CU=this.customerUuid),this.email!==""&&(e.E=this.email),this.id!==""&&(e.ID=this.id),e}merge(e){return!e.addedManually&&this.addedManually&&(this.email=e.email!==""?e.email:this.email,this.name=e.name!==""?e.name:this.name,this.addedManually=!1,this.customerUuid=e.customerUuid),this.workerNaming===""&&(this.workerNaming=e.workerNaming),this.isVerifiedPhone=e.isVerifiedPhone||this.isVerifiedPhone,this.gender=this.gender,this.blocked=e.blocked||this.blocked,this.lastBookingsDate=$m(e.lastBookingsDate,this.lastBookingsDate),this.firstBookingsDate=oo(e.firstBookingsDate,this.firstBookingsDate),this.userFirstBookingsDate=oo(e.userFirstBookingsDate,this.userFirstBookingsDate),this.amoutOfBookings+=e.amoutOfBookings,this}static fromMinimalJson(e){const t=new Tt({});return t.workerNaming=e.N??"",t.name=e.N??"",e.G!=null&&(t.gender=t.getGenderFromStr(e.gender)),t.addedManually=e.AM??!1,t.phoneNumber=e.P??"",t.customerUuid=e.CU??e.P??"",t.email=e.E??"",t.id=e.ID??"",t}get publicCustomer(){return new Gt({freeFromPayments:this.freeFromPayments,blocked:this.blocked,hashNumber:Dm({id:this.customerUuid})})}belongingsNames(e){return Array.from(this.belongings).map(t=>{var r;return((r=e.get(t))==null?void 0:r.name)??""}).join(", ")}get forUpdate(){const e=new Tt({});return e.name=this.name,e.gender=this.gender,e.isVerifiedPhone=this.isVerifiedPhone,e.phoneNumber=this.phoneNumber,e.belongings=this.belongings,e.email=this.email,e.isDeleted=this.isDeleted,e.blocked=this.blocked,e.id=this.id,e.addedManually=this.addedManually,e.freeFromPayments=this.freeFromPayments,e.customerUuid=this.customerUuid,e.workerNaming=this.workerNaming,e.firstBookingsDate=null,e.userFirstBookingsDate=null,e.amoutOfBookings=0,e.lastBookingsDate=null,e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class We{constructor({token:e="",joinDate:t,id:r="",activeNotifications:n=!0}){o(this,"token");o(this,"joinDate");o(this,"id");o(this,"activeNotifications");this.token=e,this.joinDate=t,this.id=r,this.activeNotifications=n}static fromJson(e,t){const r=new We({joinDate:new Date(0)});return r.id=t,r.activeNotifications=e.activeNotifications??!0,r.token=e.token??"",r}toJson(){const e={};return this.activeNotifications||(e.activeNotifications=this.activeNotifications),e.token=this.token,e.joinDate=Ue(this.joinDate),e}static fromDevice(e){return new We({joinDate:e.joinDate,id:e.id,activeNotifications:e.activeNotifications,token:e.token})}}const Gm={1:"PL",2:"MasterCard",3:"Visa",4:"Maestro",5:"Isracard"},Ym={PL:"1",MasterCard:"2",Visa:"3",Maestro:"4",Isracard:"5"},Jm={1:"Isracard",2:"Visa Cal",3:"Diners",4:"Amex",6:"Leumi Card"},Km={Isracard:"1","Visa Cal":"2",Diners:"3",Amex:"4","Leumi Card":"6"};class yr{constructor({brand:e="",token:t="",validityMonth:r="",validityYear:n="",name:s="",userId:a="",bankName:u="",l4Digits:c="",cardId:h="",businessId:l="",attemptsLeft:d=Yr}={}){o(this,"brand","");o(this,"token","");o(this,"validityMonth","");o(this,"validityYear","");o(this,"name","");o(this,"bankName","");o(this,"l4Digits","");o(this,"userId","");o(this,"attemptsLeft",Yr);o(this,"cardId","");o(this,"businessId","");this.brand=e,this.token=t,this.validityMonth=r,this.validityYear=n,this.name=s,this.userId=a,this.bankName=u,this.l4Digits=c,this.cardId=h,this.businessId=l,this.attemptsLeft=d}static fromJson(e,t,r){const n=new yr;return n.cardId=t,n.brand=Gm[e.brand]||"Card",n.token=e.token||"",n.userId=e.userId||"",n.attemptsLeft=e.attemptsLeft||Yr,n.validityMonth=e.validityMonth||"",n.validityYear=e.validityYear||"",n.businessId=r,n.name=e.name||"",n.bankName=e.bankName||"",n.bankName=Jm[e.bankName]||"Bank",n.l4Digits=e.l4Digits||"",n}fromPaymentCard(e){this.brand=e.brand,this.token=e.token,this.userId=e.userId,this.businessId=e.businessId,this.cardId=e.cardId,this.attemptsLeft=e.attemptsLeft,this.validityMonth=e.validityMonth,this.validityYear=e.validityYear,this.name=e.name,this.bankName=e.bankName,this.l4Digits=e.l4Digits}toJson(){const e={};return e.brand=Ym[this.brand]||"",e.token=this.token,e.userId=this.userId,e.attemptsLeft=this.attemptsLeft,e.validityMonth=this.validityMonth,e.validityYear=this.validityYear,e.name=this.name,e.bankName=this.bankName,e.bankName=Km[this.bankName]||"",e.l4Digits=this.l4Digits,e}decryptCard(e){return new yr({cardId:this.cardId,brand:this.brand,token:decryptText({encryption:this.token,password:e}),validityMonth:decryptText({encryption:this.validityMonth,password:e}),validityYear:decryptText({encryption:this.validityYear,password:e}),name:this.name,userId:this.userId,bankName:this.bankName,businessId:this.businessId,l4Digits:this.l4Digits})}encryptCard(e){return new yr({cardId:this.cardId,brand:this.brand,token:encryptText({text:this.token,password:e}),validityMonth:encryptText({text:this.validityMonth,password:e}),validityYear:encryptText({text:this.validityYear,password:e}),name:this.name,userId:this.userId,bankName:this.bankName,businessId:this.businessId,l4Digits:this.l4Digits})}isTheSameAs(e){return this.bankName===e.bankName&&this.brand===e.brand&&this.name===e.name&&this.l4Digits===e.l4Digits&&this.userId===e.userId&&this.validityMonth===e.validityMonth&&this.validityYear===e.validityYear}toString(){return JSON.stringify(this,null,"  ")}}class Qm{constructor(){o(this,"futureBookings",{});o(this,"passedBookings",{});o(this,"recurrence")}setMonth(e,t){const r=U0(t),n=W0(new Date);r.getTime()===n.getTime()?(this.passedBookings[t]={},this.futureBookings[t]={}):r.getTime()>n.getTime()?this.futureBookings[t]={}:r.getTime()<n.getTime()&&(this.passedBookings[t]={}),Object.entries(e).forEach(([s,a])=>{const u=lt.fromJson(a,s);u.cancelDate==null&&(u.isPassed?this.passedBookings[t][s]=u:this.futureBookings[t][s]=u)})}setRecurrence(e){this.recurrence={},Object.entries(e).forEach(([t,r])=>{const n=lt.fromJson(r,t);n.cancelDate===null&&(this.recurrence[t]=n)})}get all(){const e={};return Object.values(this.futureBookings).forEach(t=>{Object.entries(t).forEach(([r,n])=>{e[n.bookingId]=n})}),Object.values(this.passedBookings).forEach(t=>{Object.entries(t).forEach(([r,n])=>{e[n.bookingId]=n})}),this.recurrence!==void 0&&Object.entries(this.recurrence).forEach(([t,r])=>{e[t]=r}),e}addBooking(e){var t,r;if(e.recurrenceEvent!==null)this.recurrence??(this.recurrence={}),this.recurrence[e.bookingId]=e;else{const n=li(e.bookingDate);e.isPassed?((t=this.passedBookings)[n]??(t[n]={}),this.passedBookings[n][e.bookingId]=e):((r=this.futureBookings)[n]??(r[n]={}),this.futureBookings[n][e.bookingId]=e)}}deleteBooking(e){var t,r,n;if(e.recurrenceEvent!==null)(t=this.recurrence)==null||delete t[e.bookingId];else{const s=li(e.bookingDate);(r=this.passedBookings[s])==null||delete r[e.bookingId],(n=this.futureBookings[s])==null||delete n[e.bookingId]}}lastBookingForBusiness({businessId:e,workerId:t,includePast:r=!1,initDate:n,exclude:s}){let a=n;return Object.entries(this.futureBookings).forEach(([u,c])=>{Object.entries(c).forEach(([h,l])=>{e!==l.buisnessId||t!==l.workerId||s!=null&&s.getTime()===l.bookingDate.getTime()||(a===void 0||l.bookingDate.getTime()>a.getTime())&&(a=l.bookingDate)})}),a}firstBookingForBusiness({businessId:e,workerId:t,includePast:r,initDate:n,exclude:s}){let a=n;for(const[u,c]of Object.entries(this.futureBookings))for(const[h,l]of Object.entries(c))e!==l.buisnessId||t!==l.workerId||s!=null&&s.getTime()===l.bookingDate.getTime()||(a===void 0||l.bookingDate.getTime()<a.getTime())&&(a=l.bookingDate);if(a===void 0&&r)for(const[u,c]of Object.entries(this.passedBookings))for(const[h,l]of Object.entries(c))e!==l.buisnessId||t!==l.workerId||s!==void 0&&s.getTime()===l.bookingDate.getTime()||(a===void 0||l.bookingDate.getTime()<a.getTime())&&(a=l.bookingDate);return a}}class vs{constructor(e,t){o(this,"docId","");o(this,"path","");this.docId=e,this.path=t}toJson(){const e={};return e.docId=this.docId,e.path=this.path,e}static fromJson(e){const t=new vs("","");return t.docId=e.docId||"",t.path=e.path||"",t}toString(){return JSON.stringify(this,null,2)}}class ys{constructor({docId:e=""}){o(this,"bookingCount",0);o(this,"lastUpdateTime",new Date(0));o(this,"docId","");this.docId=e}static fromJson(e,t){const r=new ys({});return e!==void 0&&t!==void 0&&(r.docId=t,r.bookingCount=e.bookingCount??0,r.lastUpdateTime=e.lastUpdateTime?new Date(e.lastUpdateTime):new Date(0)),r}toJson(){const e={};return this.lastUpdateTime.getTime()!==new Date(0).getTime()&&(e.lastUpdateTime=this.lastUpdateTime.toISOString()),this.bookingCount>0&&(e.bookingCount=this.bookingCount),e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class Dr{constructor({email:e="",isVerifiedPhone:t=!1,isVerifiedEmail:r=!1,name:n="",phoneNumber:s="",id:a="",gender:u=J.anonymous,devices:c=new Map}){o(this,"email","");o(this,"name","");o(this,"phoneNumber","");o(this,"id","");o(this,"devices",new Map);o(this,"gender",J.anonymous);o(this,"myBuisnessesIds",[]);o(this,"reminders");o(this,"clientAt",new Map);o(this,"hasNotificationPermission",!0);o(this,"permission",new Map);o(this,"tempFcm");o(this,"allowAppNotification",!0);o(this,"isVerifiedPhone",!1);o(this,"isVerifiedEmail",!1);o(this,"invoiceCounter");o(this,"newWorkerWelcomes",new Set);o(this,"bookings",new Map);o(this,"bookingsPreviews",new Map);o(this,"bookingsDocsToLoad",new Set);o(this,"localDocsToDelete",new Set);this.email=e,this.isVerifiedPhone=t,this.isVerifiedEmail=r,this.name=n,this.phoneNumber=s,this.id=a,this.gender=u,this.devices=c}static fromJson(e,t){const r=new Dr({email:e.email,isVerifiedPhone:e.isVerifiedPhone,isVerifiedEmail:e.isVerifiedEmail,name:e.name,phoneNumber:e.phoneNumber,id:e.id,gender:e.gender});return r.setUserPublicData(e,t),r}get customerData(){return new Tt({customerUuid:this.id,name:this.name,email:this.email,isVerifiedPhone:this.isVerifiedPhone,gender:this.gender,phoneNumber:this.phoneNumber})}setUserPublicData(e,t){if(this.permission=new Map,this.myBuisnessesIds=[],this.isVerifiedEmail=e.isVerifiedEmail||!1,this.email=e.email||"",this.allowAppNotification=e.allowAppNotification||!0,this.email=e.email||"",this.name=e.name||"",this.clientAt=new Map,e.clientAt&&Object.entries(e.clientAt).forEach(([r,n])=>{Object.keys(n).length!==0&&(this.clientAt.set(r,new Set),Object.keys(n).forEach(s=>{this.clientAt.set(r,this.clientAt.get(r).add(s))}))}),e.localDocsToDelete&&(this.localDocsToDelete=new Set,e.localDocsToDelete.forEach(r=>{this.localDocsToDelete.add(vs.fromJson(r))})),this.invoiceCounter=e.invoiceCounter,this.devices=new Map,e.devices&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,n])=>{this.devices.set(r,We.fromJson(n,r))}):e.currentFcm&&e.currentFcm!==""&&(this.tempFcm=e.currentFcm),this.hasNotificationPermission=e.hasNotificationPermission||!0,e.gender&&(this.gender=et[e.gender]||J.anonymous),this.phoneNumber=e.phoneNumber||"",this.id=e.id||e.phoneNumber||"",e.permission&&Object.entries(e.permission).forEach(([r,n])=>{n===2&&this.myBuisnessesIds.push(r),this.permission.set(r,n)}),e.bookings&&(this.bookings=new Map,Object.entries(e.bookings).forEach(([r,n])=>{const s=lt.fromJson(n,r);s.cancelDate||this.bookings.set(r,s)})),this.bookingsDocsToLoad=new Set,e.bookingsPreviews){const r=new Map;Object.entries(e.bookingsPreviews).forEach(([n,s])=>{r.set(n,ys.fromJson(s,n))}),r.forEach((n,s)=>{var a,u;((a=this.bookingsPreviews.get(s))==null?void 0:a.lastUpdateTime)!==n.lastUpdateTime&&(s===Xc||U0(s)>=W0(new Date)||(((u=t==null?void 0:t.bookings.passedBookings)==null?void 0:u.hasOwnProperty(s))??!1))&&this.bookingsDocsToLoad.add(s)}),this.bookingsPreviews=r}this.id===this.phoneNumber?this.isVerifiedPhone=!0:this.isVerifiedPhone=e.isVerifiedPhone||!1,this.newWorkerWelcomes=new Set,e.newWorkerWelcomes&&Object.keys(e.newWorkerWelcomes).forEach(r=>{this.newWorkerWelcomes.add(r)})}get fcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm)return new Set(this.tempFcm);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}getDevicesByToken(e){const t=[];return Object.values(this.devices).forEach(r=>{r.token===e&&t.push(We.fromDevice(r))}),t}toJson(){const e={};return this.hasNotificationPermission||(e.hasNotificationPermission=this.hasNotificationPermission),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.isVerifiedEmail&&(e.isVerifiedEmail=this.isVerifiedEmail),this.email!==""&&(e.email=this.email),Object.keys(this.bookingsPreviews).length>0&&(e.bookingsPreviews={},Object.entries(this.bookingsPreviews).forEach(([t,r])=>{e.bookingsPreviews[t]=r.toJson()})),this.allowAppNotification||(e.allowAppNotification=this.allowAppNotification),e.permission={},Object.entries(this.permission).forEach(([t,r])=>{e.permission[t]=r}),this.localDocsToDelete.size>0&&(e.localDocsToDelete=[],this.localDocsToDelete.forEach(t=>{e.localDocsToDelete.push(t.toJson())})),e.email=this.email,e.name=this.name,e.devices={},this.devices.forEach((t,r)=>{e.devices[r]=t.toJson()}),e.clientAt={},this.clientAt.forEach((t,r)=>{e.clientAt[r]={},t.forEach(n=>{e.clientAt[r][n]=""})}),e.gender=Qt[this.gender],e.phoneNumber=this.phoneNumber,e.id=this.id,this.newWorkerWelcomes.size>0&&(e.newWorkerWelcomes={},this.newWorkerWelcomes.forEach(t=>{e.newWorkerWelcomes[t]=""})),e}}class Ds{constructor(e,t,r){o(this,"businessId","");o(this,"date");o(this,"productId","");this.businessId=e,this.date=t,this.productId=r}static fromJson(e,t){const r=new Ds(t,null,"");return r.businessId=e.businessId||"",e.date instanceof dt&&(r.date=e.date),r}toJson(){const e={};return e.businessId=this.businessId,this.date!==null&&this.date!==void 0&&(e.date=this.date),e}}class di{constructor({name:e="",phoneNumber:t="",id:r="",productsIds:n={},myBuisnessesIds:s=[],revenueCatId:a="",limitOfBuisnesses:u=1,gender:c=J.anonymous,lastVisitedBuisnesses:h=[],lastVisitedBuisnessesRemoved:l=[],paymentCards:d={},isVerifiedPhone:f=!1,isVerifiedEmail:x=!1,email:g="",lastCleanDate:y=dt.fromDate(new Date),createdAt:w=new Date}){o(this,"productsIds",{});o(this,"pendingProductsIds",{});o(this,"id","");o(this,"revenueCatId","");o(this,"limitOfBuisnesses",1);o(this,"preferdTipPercentage",0);o(this,"cardPaymentsPass","");o(this,"lastTimeUpdatePhone",new Date(0));o(this,"lastTimeUpdateEmail",new Date(0));o(this,"authProviders",new Map);o(this,"businessesInfo",{});o(this,"storyLikes",[]);o(this,"paymentCards",{});o(this,"lastVisitedBuisnesses",[]);o(this,"lastVisitedBuisnessesRemoved",[]);o(this,"lastCleanDate",dt.fromDate(new Date));o(this,"businessTopics",new Set);o(this,"waitingListTopics",{});o(this,"tempFcm");o(this,"termsApprovals",{});o(this,"seenUpdates",{});o(this,"createdAt",new Date);o(this,"userPublicData",new Dr({}));o(this,"name","");o(this,"isVerifiedPhone",!1);o(this,"phoneNumber","");o(this,"gender",J.anonymous);o(this,"lastTimeConnect",new Date);o(this,"userPublicDataListener");o(this,"connectedGoogleEmail","");o(this,"currentMonthInvoices");o(this,"currentMonthPaymentRequest");o(this,"currentMonthPayments");o(this,"existInvoicesDocs",new Set);o(this,"existPaymentsDocs",new Set);o(this,"existPaymentRequestsDocs",new Set);o(this,"invoices",{});o(this,"devices",{});o(this,"bookings",new Qm);o(this,"hasOldNotification",!1);this.userPublicData=new Dr({email:g,isVerifiedEmail:x,isVerifiedPhone:f,name:e,phoneNumber:t,id:r,gender:c}),this.name=e,this.phoneNumber=t,this.id=r,this.productsIds=n,this.revenueCatId=a,this.limitOfBuisnesses=u,this.gender=c,this.lastVisitedBuisnesses=h,this.lastVisitedBuisnessesRemoved=l,this.paymentCards=d,this.isVerifiedPhone=f,this.cardPaymentsPass="",this.lastCleanDate=y,this.createdAt=w}get toPaymentRequestUser(){return new sr({userId:this.id,name:this.name,gender:this.gender,isVerifiedPhone:this.isVerifiedPhone,isExist:!0,phone:this.phoneNumber,userDecline:!1})}customerDataFromBooking({booking:e,exclude:t,needDelete:r=!1,initDate:n}){return new Tt({name:this.name,email:this.userPublicData.email,gender:this.gender,customerUuid:this.id,phoneNumber:this.phoneNumber,isVerifiedPhone:this.isVerifiedPhone,userFirstBookingsDate:this.bookings.firstBookingForBusiness({businessId:e.buisnessId,workerId:e.workerId,exclude:r?e.bookingDate:t,initDate:r?n:e.bookingDate}),lastBookingsDate:this.bookings.lastBookingForBusiness({businessId:e.buisnessId,workerId:e.workerId,exclude:r?e.bookingDate:t,initDate:r?n:e.bookingDate})})}get fcmsTokens(){if(!this.userPublicData.allowAppNotification)return new Set;if(this.tempFcm)return new Set([this.tempFcm]);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}getDeviceByToken(e){let t;return Object.values(this.devices).forEach(r=>{r.token===e&&(t=We.fromDevice(r))}),t}static fromUserDocJson(e){const t=new di({name:e.name,phoneNumber:e.phoneNumber,id:e.id,productsIds:{},myBuisnessesIds:[],revenueCatId:e.revenueCatId,limitOfBuisnesses:e.limitOfBuisnesses,gender:et[e.gender],lastVisitedBuisnesses:e.lastVisitedBuisnesses,lastVisitedBuisnessesRemoved:e.lastVisitedBuisnessesRemoved,paymentCards:{},isVerifiedPhone:e.isVerifiedPhone,isVerifiedEmail:!1,email:"",lastCleanDate:e.lastCleanDate,createdAt:new Date(e.createdAt)});return e.devices&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,n])=>{t.devices[r]=We.fromJson(n,r)}):e.currentFcm&&e.currentFcm!==""&&(t.tempFcm=e.currentFcm),e.termsApprovals&&Object.entries(e.termsApprovals).forEach(([r,n])=>{t.termsApprovals[r]=new Date(n)||new Date(0)}),t.seenUpdates={},e.seenUpdates&&Object.entries(e.seenUpdates).forEach(([r,n])=>{t.seenUpdates[r]=new Set(n)}),t.phoneNumber=e.phoneNumber||"0",t.id=e.id||e.phoneNumber,t.preferdTipPercentage=0,e.preferdTipPercentage&&(t.preferdTipPercentage=Number.isInteger(e.preferdTipPercentage)?e.preferdTipPercentage:Math.floor(e.preferdTipPercentage)),t.cardPaymentsPass=e.cardPaymentsPass||"",e.storyLikes&&e.storyLikes.forEach(r=>t.storyLikes.push(r)),e.lastTimeUpdatePhone&&(t.lastTimeUpdatePhone=new Date(e.lastTimeUpdatePhone)||new Date(0)),e.lastTimeUpdateEmail&&(t.lastTimeUpdateEmail=new Date(e.lastTimeUpdateEmail)||new Date(0)),t.productsIds={},e.productsIds&&Object.entries(e.productsIds).forEach(([r,n])=>{t.productsIds[r]=Ds.fromJson(n,r)}),e.pendingProductsIds&&Object.entries(e.pendingProductsIds).forEach(([r,n])=>{t.pendingProductsIds[r]=n}),t.revenueCatId=e.revenueCatId||"",t.lastCleanDate=e.lastCleanDate,e.lastVisitedBuisnesses.forEach(r=>t.lastVisitedBuisnesses.push(r)),e.lastVisitedBuisnessesRemoved&&e.lastVisitedBuisnessesRemoved.forEach(r=>t.lastVisitedBuisnessesRemoved.push(r)),t.businessesInfo={},e.businessesInfo&&Object.entries(e.businessesInfo).forEach(([r,n])=>{t.businessesInfo[r]=vr.fromJson(n,r)}),e.businessTopics&&e.businessTopics.forEach(r=>{t.businessTopics.add(r)}),e.waitingListTopics&&(t.waitingListTopics={},Object.entries(e.waitingListTopics).forEach(([r,n])=>{const s=Pr.fromJson(n,r);s.date===""?t.businessTopics.add(r):t.waitingListTopics[r]=s})),t.paymentCards={},e.paymentCards&&Object.entries(e.paymentCards).forEach(([r,n])=>{t.paymentCards[r]={},Object.entries(n).forEach(([s,a])=>{t.paymentCards[r][s]=yr.fromJson(a,s,r)})}),t.createdAt=new Date(e.createdAt),t.limitOfBuisnesses=e.limitOfBuisnesses||1,e.authProviders?Object.entries(e.authProviders).forEach(([r,n])=>{if(wa[r]){const s=wa[r];t.authProviders.set(s,new Date(n)||new Date(2023))}}):t.authProviders=new Map([[P0.Phone,t.createdAt]]),t.id===t.phoneNumber?t.isVerifiedPhone=!0:t.isVerifiedPhone=e.isVerifiedPhone||!1,e.lastTimeConnect&&(t.lastTimeConnect=new Date(e.lastTimeConnect)||new Date),t.userPublicData=new Dr({isVerifiedPhone:t.isVerifiedPhone,phoneNumber:t.phoneNumber}),t}setUserPublicData(e){this.name=e.name||"",e.devices&&typeof e.devices=="object"&&Object.entries(e.devices).forEach(([t,r])=>{this.devices[t]=We.fromJson(r,t)}),this.gender=et[e.gender],this.phoneNumber=e.phoneNumber,this.id=e.id||e.phoneNumber,this.userPublicData.setUserPublicData(e,this)}firstEnterance(e){return!new Set([...this.lastVisitedBuisnesses,...this.lastVisitedBuisnessesRemoved]).has(e)}toUserDocJson(){const e={};return e.name=this.name,e.devices={},Object.entries(this.devices).forEach(([t,r])=>{e.devices[t]=r.toJson()}),this.lastTimeUpdateEmail.getTime()!==new Date(0).getTime()&&(e.lastTimeUpdateEmail=this.lastTimeUpdateEmail.toISOString()),this.lastTimeUpdatePhone.getTime()!==new Date(0).getTime()&&(e.lastTimeUpdatePhone=this.lastTimeUpdatePhone.toISOString()),e.gender=Qt[this.gender],e.phoneNumber=this.phoneNumber,e.id=this.id,Object.keys(this.termsApprovals).length>0&&(e.termsApprovals={},Object.entries(this.termsApprovals).forEach(([t,r])=>{e.termsApprovals[t]=r.toISOString()})),Object.keys(this.seenUpdates).length>0&&(e.seenUpdates={},Object.entries(this.seenUpdates).forEach(([t,r])=>{e.seenUpdates[t]=Array.from(r)})),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.preferdTipPercentage=this.preferdTipPercentage,e.revenueCatId=this.revenueCatId,Object.keys(this.productsIds).length>0&&(e.productsIds={},Object.entries(this.productsIds).forEach(([t,r])=>{e.productsIds[t]=r.toJson()})),e.pendingProductsIds=this.pendingProductsIds,e.lastCleanDate=this.lastCleanDate,e.limitOfBuisnesses=this.limitOfBuisnesses,e.lastVisitedBuisnesses=this.lastVisitedBuisnesses,e.lastVisitedBuisnessesRemoved=this.lastVisitedBuisnessesRemoved,e.businessesInfo={},this.cardPaymentsPass!==""&&(e.cardPaymentsPass=this.cardPaymentsPass),Object.entries(this.businessesInfo).forEach(([t,r])=>{e.businessesInfo[t]=r.toJson()}),e.storyLikes=this.storyLikes,e.waitingListTopics={},Object.entries(this.waitingListTopics).forEach(([t,r])=>{e.waitingListTopics[t]=r.toJson()}),e.businessTopics=Array.from(this.businessTopics),e.authProviders={},this.authProviders.forEach((t,r)=>{e.authProviders[r]=t.toISOString()}),e.paymentCards={},Object.entries(this.paymentCards).forEach(([t,r])=>{e.paymentCards[t]={},Object.entries(r).forEach(([n,s])=>{e.paymentCards[t][n]=s.toJson()})}),e.createdAt=this.createdAt.toISOString(),e}get developerId(){return this.id.replace("+","")}toString(){return JSON.stringify(this.toUserDocJson())+JSON.stringify(this.userPublicData.toJson())}}const Dt=class Dt{constructor(){o(this,"user",new di({}));o(this,"verificationRepo",new Ff);o(this,"userDoc")}static GI(){return Dt.instance||(Dt.instance=new Dt),Dt.instance}get getPermission(){return 0}isDeveloper(){return this.isConnected?Ce.developers.hasOwnProperty(this.user.id.replace("+","")):!1}get isConnected(){return this.verificationRepo.isLoggedIn}get userId(){try{return this.verificationRepo.userId}catch{return""}}async setupUser({newUserId:e="",logoutIfDosentExist:t=!1}){var r;try{return he.info(`The user id is -> ${e}`),e.length<5?(await this.verificationRepo.logout(),!0):!t&&(this.userDoc==null||!this.userDoc.exists())?(this.userDoc=void 0,!0):(this.user=di.fromUserDocJson((r=this.userDoc)==null?void 0:r.data()),this.startPublicDataListening(),!0)}catch(n){return this.userDoc=void 0,n instanceof Error&&(he.error(`Error while setting up the user --> ${n}`),Y.GI().addError({details:n.toString()})),!1}}async startPublicDataListening(){this.isConnected}async loadBookingsDocs(e){const t=[];e.forEach(r=>{t.push(this.loadBookingDoc(r))}),await Promise.all(t)}async loadBookingDoc(e){}};o(Dt,"instance");let Pt=Dt;function xr(i,e=-1){let t="",r="",n="",s="",a="",u="",c=i.days;Math.floor(c/30)>0&&(Math.floor(c/30)===1&&(u=G("month")),Math.floor(c/30)===2&&(u=G("twoMonths")),Math.floor(c/30)>2&&(u=`${Math.floor(c/30)} `+G("months"))),c-=Math.floor(c/30)*30,Math.floor(c/7)>0&&(Math.floor(c/7)===1&&(a=G("week")),Math.floor(c/7)===2&&(a=G("twoWeeks")),Math.floor(c/7)>2&&(a=`${Math.floor(c/7)} `+G("weeks"))),c-=Math.floor(c/7)*7,c===1&&(s=G("day")),c===2&&(s=G("twoDays")),c>2&&(s=`${c} `+G("days"));let h=i.hours-i.days*24;h===1&&(t=G("hour")),h===2&&(t=G("twoHours")),h>2&&(t=`${h}`+G("hoursChar"));let l=i.minutes-i.hours*60;r=l>0?`${l}`+G("minutesChar"):"";let d=i.seconds-i.minutes*60;d===1&&(n=G("second",!1)),d>1&&(n=`${d} `+G("seconds"));let f="";return i.days===365?f=G("year"):i.days%365===0&&i.days>365?f=(i.days/365).toFixed(0)+" "+G("years"):a===""&&u!==""&&s===""?f=u:a!==""&&u===""&&s===""?f=a:a!==""&&u!==""&&s===""?f=u+" "+G("and")+a:a!==""&&u===""&&s!==""?f=a+" "+G("and")+s:a===""&&u!==""&&s!==""?f=u+" "+G("and")+s:a!==""&&u!==""&&s!==""?f=u+" ,"+a+" "+G("and")+s:r===""&&t===""&&s!==""?f=s:r!==""&&t===""&&s===""?f=r:r===""&&t!==""&&s===""?f=t:r!==""&&t!==""&&s===""?f=t+" "+G("and")+r:r!==""&&t===""&&s!==""?f=s+" "+G("and")+r:r===""&&t!==""&&s!==""?f=s+" "+G("and")+t:r!==""&&t!==""&&s!==""?f=s+" ,"+t+" "+G("and")+r:n!==""&&(f=n),f.length===0?"":e===-1||e>f.length?f:f.slice(0,e)+".."+f.slice(e)}function G(i,e=!0){return i}function Xm(i){try{const e=i.indexOf("-");let t=i.substring(e+1,i.length);return t="0"+t,t.substring(0,3)+"-"+t.substring(3,t.length)}catch{return i}}class bs{constructor(){o(this,"times",{});o(this,"duringPaymentsTimes",{});o(this,"listener");o(this,"lastBookingTimeDate")}static fromJson(e){const t=new bs;return t.setData(e),t}setData(e,t=!0){this.times={},e.eventsTimes!==null&&Object.entries(e.eventsTimes).forEach(([r,n])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&n instanceof Object&&Object.keys(n).length>0&&(this.times[r]={},Object.entries(n).forEach(([u,c])=>{this.times[r][u]=MultiBookingTime.fromJson(c)}))}),e.eventsTimeDuringPayment!==null&&t&&Object.entries(e.eventsTimeDuringPayment).forEach(([r,n])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.entries(n).forEach(([u,c])=>{var l,d;const h=MultiBookingTime.fromJson(c);if(h.expiredDate!==null&&h.expiredDate.getTime()>Date.now()){if((l=this.times)[r]??(l[r]={}),this.times[r][u]===null){const f=MultiBookingTime.fromMultiBookingTime(h);f.expiredDate=void 0,this.times[r][u]=f}else this.times[r][u].currentParticipants+=h.currentParticipants;s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s),(d=this.duringPaymentsTimes)[r]??(d[r]={}),this.duringPaymentsTimes[r][u]=h}})})}toJson(){const e={};return e.eventsTimes={},Object.entries(this.times).forEach(([t,r])=>{e.eventsTimes[t]={},Object.entries(r).forEach(([n,s])=>{e.eventsTimes[t][n]=s.toJson()})}),e}}class Yt{constructor(){o(this,"showAdressAlert",!1);o(this,"showAdressMessage",!1);o(this,"showPhoneAlert",!1);o(this,"showPhoneMessage",!1);o(this,"recurrenceNotificationsLastDate");o(this,"notifyOnPayments",!0);o(this,"notifyOnWaitingListEvents",!0);o(this,"notifyAboutCancelNearDeadline",!0);o(this,"notifyOnClientConfirmArrival",!0);o(this,"notifyAboutOrderNearDeadline",!0);o(this,"notificationOption",te.PushOrSMS);o(this,"notifyWhenGettingBooking",!0);o(this,"remindersTypes",new Map)}static fromJson(e){const t=new Yt;if(t.notifyOnWaitingListEvents=e.notifyOnWaitingListEvents??!0,e.notificationOption!=null&&(t.notificationOption=vi[e.notificationOption]??te.PushOrSMS),t.recurrenceNotificationsLastDate=e.recurrenceNotificationsLastDate?new Date(e.recurrenceNotificationsLastDate):void 0,t.remindersTypes=new Map,e.remindersTypes!=null)for(const[r,n]of Object.entries(e.remindersTypes)){const s=kt[r];s!=null&&t.remindersTypes.set(s,n)}else t.remindersTypes.set(je.regular,e.minutesBeforeNotify??60);return t.notifyOnClientConfirmArrival=e.notifyOnClientConfirmArrival??!0,t.showAdressAlert=e.showAdressAlert??!1,t.showAdressMessage=e.showAdressMessage??!1,t.showPhoneAlert=e.showPhoneAlert??!1,t.showPhoneMessage=e.showPhoneMessage??!1,t.notifyOnPayments=e.notifyOnPayments??!0,t.notifyAboutCancelNearDeadline=e.notifyAboutCancelNearDeadline??!0,t.notifyAboutOrderNearDeadline=e.notifyAboutOrderNearDeadline??!0,t.notifyWhenGettingBooking=e.notifyWhenGettingBooking??!0,t}isEqual(e){return JSON.stringify(e.toJson())===JSON.stringify(this.toJson())}static fromWorkerNotificatiosSettings(e){return Yt.fromJson(e.toJson())}toJson(){const e={};return this.notifyOnWaitingListEvents||(e.notifyOnWaitingListEvents=this.notifyOnWaitingListEvents),this.notificationOption!==te.PushOrSMS&&(e.notificationOption=te[this.notificationOption]),this.recurrenceNotificationsLastDate!=null&&(e.recurrenceNotificationsLastDate=this.recurrenceNotificationsLastDate.toISOString()),this.notifyOnClientConfirmArrival||(e.notifyOnClientConfirmArrival=this.notifyOnClientConfirmArrival),this.notifyOnPayments||(e.notifyOnPayments=this.notifyOnPayments),e.remindersTypes={},this.remindersTypes.forEach((t,r)=>{e.remindersTypes[je[r]]=t}),this.notifyAboutCancelNearDeadline||(e.notifyAboutCancelNearDeadline=this.notifyAboutCancelNearDeadline),this.notifyAboutOrderNearDeadline||(e.notifyAboutOrderNearDeadline=this.notifyAboutOrderNearDeadline),this.notifyWhenGettingBooking||(e.notifyWhenGettingBooking=this.notifyWhenGettingBooking),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showAdressMessage&&(e.showAdressMessage=this.showAdressMessage),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.showPhoneMessage&&(e.showPhoneMessage=this.showPhoneMessage),e}toString(){return JSON.stringify(this.toJson())}}class ks{constructor({publicCustomersData:e}={}){o(this,"publicCustomersData");this.publicCustomersData=e}static fromJson(e){return new ks().setPublicCustomersDataJson(e)}setPublicCustomersDataJson(e){return e.data??(e.data={}),this.publicCustomersData={},Object.entries(e.data).forEach(([t,r])=>{const n=Gt.fromMinimalJson(r,t);this.publicCustomersData[t]=n}),this}toMinimalJson(){const e={};return e.data={},this.publicCustomersData??(this.publicCustomersData={}),Object.entries(this.publicCustomersData).forEach(([t,r])=>{e.data[t]=r.toMinimalJson()}),e}}class fi{constructor({end:e,start:t,title:r="",id:n="",workerId:s=""}){o(this,"start",new Date(0));o(this,"end",new Date(0));o(this,"id","");o(this,"createdAt");o(this,"workerId","");o(this,"addedToDeviceCalendar",!1);o(this,"colorIndex",1);o(this,"title","");o(this,"recurrenceObj");this.start=t,this.end=e,this.title=r,this.id=n,this.workerId=s,this.recurrenceObj=new mt({start:t,endDate:e,endOption:L0.date})}isOneDay(){return Ue(this.end)===Ue(this.start)}static fromEvent(e){var r;const t=new fi({});return t.start=e.from,(r=e.recurrenceEvent)!=null&&r.endDate&&(t.end=e.recurrenceEvent.endDate),t.title=e.eventName,t.createdAt=e.vacationCreatedAt,t.id=e.vacationId,t.recurrenceObj=e.recurrenceEvent,t.addedToDeviceCalendar=e.vacationAddedToDeviceCalendar,t.colorIndex=e.colorIndex,t.workerId=e.ids.length>0?e.ids[0]:"",t}static fromVacation(e){const t=new fi({});return t.start=e.start,t.end=e.end,t.addedToDeviceCalendar=e.addedToDeviceCalendar,t.id=e.id,t.createdAt=e.createdAt,t.workerId=e.workerId,t.title=e.title,t.colorIndex=e.colorIndex,t}}class Zm{constructor(){o(this,"listener");o(this,"recurrenceEvents",{});o(this,"vacationsEvents",{})}get recurrenceEventsList(){const e=[];return Object.entries(this.recurrenceEvents).forEach(([t,r])=>{e.push(...Object.values(r))}),e}get recurrenceEventsListWithOutVacations(){const e=[];return Object.entries(this.recurrenceEvents).forEach(([t,r])=>{Object.entries(r).forEach(([n,s])=>{s.isVacation||e.push(s)})}),e}setRecurrenceEvents(e,t,r,{putBreaks:n=!0}={}){this.recurrenceEvents={},this.vacationsEvents={},Object.entries(e).forEach(([s,a])=>{this.recurrenceEvents[s]={};const u=new Date(s);Object.entries(a).forEach(([c,h])=>{let l="",d="";if(typeof c=="string"){const x=c.split("_");x.length===2&&(l=x[1]),d=x[0]}const f=Br.fromJson({json:h,timeStr:d,businessModel:r,newTimeId:l,dayString:Hm(u),monthString:li(u),workerId:t});f.isVacation&&(this.vacationsEvents[Ue(f.from)]=f),!(!n&&f.isBreak)&&(this.recurrenceEvents[s][c]=f)})})}vacationInDate(e){var t;for(const r of Object.values(this.vacationsEvents))if((t=r.recurrenceEvent)!=null&&t.isAccureInDate({date:e}))return fi.fromEvent(r);return null}}const jm={R:"R",A:"A"},ep={R:"R",A:"A"};class mi{constructor({start:e,end:t,operation:r,shifts:n}){o(this,"start",new Date(0));o(this,"end",new Date(0));o(this,"operation","R");o(this,"shifts",[]);this.start=e,this.end=t,this.operation=r,this.shifts=n}static fromJson(e,t){const r=t.split("&"),n=new Date(r[0]),s=new Date(r[1]),a=ep[e.operation]||"R",u=e.shifts.map(c=>c);return new mi({start:n,end:s,operation:a,shifts:u})}static fromShiftChangeRange(e){const{start:t,end:r,operation:n,shifts:s}=e;return new mi({start:t,end:r,operation:n,shifts:[...s]})}isSameAs(e){return this.start.getTime()===e.start.getTime()&&this.end.getTime()===e.end.getTime()&&this.operation===e.operation&&this.shifts.toString()===e.shifts.toString()}toJson(){return{operation:jm[this.operation],shifts:this.shifts}}combineShifts(e){if(this.operation==="R")return this.shifts;const t=[];return ta(t,e),ta(t,this.shifts),Qo(t)}getKey(){const e=this.formatDate(this.start),t=this.formatDate(this.end);return`${e}&${t}`}formatDate(e){return e.toISOString().split("T")[0]}toString(){return JSON.stringify(this.toJson())}}class pi{constructor({name:e,treatments:t,index:r}){o(this,"name","");o(this,"index","");o(this,"treatments",new Map);this.name=e,this.treatments=t,this.index=r}static fromJson(e,t,{pointerShortBookingTime:r,pointerLognestBookingTime:n}={}){const s=e.name||"",a=t,u=new Map;return e.treatments&&Object.entries(e.treatments).forEach(([c,h])=>{u.set(c,_e.fromJson(h,c)),r&&(u.get(c).totalMinutes<r[0]&&(r[0]=Math.max(u.get(c).times.get("0").workMinutes,5)),u.get(c).totalMinutes===r[0]&&(r[0]=Math.min(Math.max(u.get(c).times.get("0").workMinutes,5),r[0]))),n&&u.get(c).totalMinutes>n[0]&&(n[0]=Math.max(u.get(c).totalMinutes,5))}),new pi({name:s,treatments:u,index:a})}containTreatment(e){for(const t of Object.values(this.treatments))if(t.id===e)return!0;return!1}toJson(){const e={};return e.name=this.name,e.treatments={},Object.entries(this.treatments).forEach(([t,r])=>{e.treatments[t]=r.toJson()}),e}fromTreatmentSubject(e){return this.name=e.name,this.index=e.index,this.treatments=new Map,e.treatments.forEach((t,r)=>{this.treatments.set(r,_e.fromTreatment(t))}),this}toString(){return JSON.stringify(this.toJson(),null,2)}}class tp{constructor(){o(this,"bookingsTimes",{});o(this,"lastBookingTimeDate");o(this,"duringPaymentBookingsTime",{});o(this,"listener")}findLastBookingsTimesDate(){let e;return Object.entries(this.bookingsTimes).forEach(([t,r])=>{const n=new Date(t);Object.keys(r).length>0&&(!e||n>e)&&(e=n)}),e}setWorkerPublicData(e,t=!0){this.duringPaymentBookingsTime={},this.bookingsTimes={},dayLightSavingTimes.forEach(r=>{r=new Date(r.getTime()+60*60*1e3),this.bookingsTimes[Ue(r)]={[Rt(r)]:60}}),e.bookingsTimes!=null&&Object.entries(e.bookingsTimes).forEach(([r,n])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.keys(n).length!=0&&(this.bookingsTimes[r]={},Object.entries(n).forEach(([u,c])=>{u.includes("00:00v")?t&&(this.bookingsTimes[r]={"00:00":1439}):(u!=="00:00"||this.bookingsTimes[r]["00:00"]!=1439)&&(this.bookingsTimes[r][u]=c)}),Object.keys(n).length>0&&s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s))}),e.duringPaymentBookingsTime!==null&&Object.entries(e.duringPaymentBookingsTime).forEach(([r,n])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.entries(n).forEach(([u,c])=>{c.length===2&&c[0]instanceof dt&&c[0].toDate().getTime()>Date.now()&&typeof c[1]=="number"&&(r in this.bookingsTimes?this.bookingsTimes[r][u]=c[1]:this.bookingsTimes[r]={[u]:c[1]},s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s),r in this.duringPaymentBookingsTime?this.duringPaymentBookingsTime[r][u]=c:this.duringPaymentBookingsTime[r]={[u]:c})})})}emptyBookingTimesDatesInMonth(e){Object.entries(this.bookingsTimes).forEach(([t,r])=>{t.includes(e)&&(this.bookingsTimes[t]={})})}toWorkerPublicDataJson(){const e={};return e.bookingsTimes={},Object.entries(this.bookingsTimes).forEach(([t,r])=>{e.bookingsTimes[t]={},Object.entries(r).forEach(([n,s])=>{e.bookingsTimes[t][n]=s})}),e.duringPaymentBookingsTime={},Object.entries(this.duringPaymentBookingsTime).forEach(([t,r])=>{e.duringPaymentBookingsTime[t]={},Object.entries(r).forEach(([n,s])=>{e.duringPaymentBookingsTime[t][n]=s})}),e}}class _r{constructor({}){o(this,"daysToAllowBookings",7);o(this,"name","");o(this,"phone","");o(this,"id","");o(this,"profileImg","");o(this,"about","");o(this,"maxTreatments",5);o(this,"allowAppNotification",!0);o(this,"religions",[]);o(this,"waitingListExceptionDays",new Set);o(this,"closeScheduleOnHolidays",!1);o(this,"weekendDays",[5,6]);o(this,"onHoldMinutes",0);o(this,"cancelMinutes",0);o(this,"minutesBeforeBookingToConfirm",1440);o(this,"tempFcm");o(this,"hasRecurrenceEvents",!1);o(this,"windowSpaces",Kr.shortestTreatment);o(this,"customWindowMinute",30);o(this,"showWaitingListWhenThereIsChoises",!0);o(this,"isVerifiedPhone",!1);o(this,"lastCleanDate",new Date);o(this,"gender",J.anonymous);o(this,"deleteNeerDedlineBookingMessage");o(this,"orderNeerDedlineBookingMessage");o(this,"generalBookingMessage");o(this,"closeCalendarDate");o(this,"minDateForShowinData",new Date(0));o(this,"openCalendar",!0);o(this,"maxFutureBookings",4);o(this,"currentClientCount",0);o(this,"showVacations",!0);o(this,"mustVerifyPhone",!0);o(this,"allowBookingConfirmations",!0);o(this,"devices",new Map);o(this,"storyImages",new Map);o(this,"createdAt",new Date(0));o(this,"workTime",new Map([["sunday",[]],["monday",[]],["tuesday",[]],["wednesday",[]],["thursday",[]],["friday",[]],["saturday",[]]]));o(this,"isCustomersNeedRecurrence",!1);o(this,"specificRangeChanges",new Map);o(this,"treatmentsSubjects",new Map);o(this,"workerPublicData",new tp);o(this,"publicCustomers",new ks);o(this,"storylikesAmount",{});o(this,"multiEventsTimes",new bs);o(this,"generalBookingsCount",0);o(this,"passedBookingsCount",0);o(this,"shortBookingTime",999);o(this,"longestBookingTime",0);o(this,"recurrence",new Zm);o(this,"notifications",new Yt);o(this,"workerDocListner")}static fromUserPublicData(e){const t=new _r({});return t.phone=e.phoneNumber||"",t.currentClientCount=e.currentClientCount||0,t.id=e.id||t.phone,t.name=e.name||"",e.devices!=null&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,n])=>{t.devices.set(r,We.fromJson(n,r))}):e.currentFcm!=null&&e.currentFcm!==""&&(t.tempFcm=e.currentFcm),t.gender=et[e.gender]||J.anonymous,t.lastCleanDate=new Date,t.createdAt=new Date,t.notifications.remindersTypes=new Map([[je.regular,60]]),t}static fromWorkerDocJson(e){const t=new _r({});return t.setFromWorkerDoc(e),t}get treatmentsLength(){let e=0;return Object.values(this.treatmentsSubjects).forEach(t=>{e+=Object.values(t.treatments).length}),e}shiftsFor({day:e}){const t=this.workTime.get(Ne(e,"EEEE").toLowerCase())||[];for(const r of Object.values(this.specificRangeChanges))if(Mo(r.start,new Date(r.end.getTime()+23*60*60*1e3+59*60*1e3),e,e)==="STRIKE")return r.combineShifts(t);return Qo(pl(t))}get fcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm!=null)return new Set([this.tempFcm]);const e=new Set;for(const t of Object.values(this.devices))t.activeNotifications&&e.add(t.token);return e}isClosingDate(e){return!this.openCalendar||this.closeCalendarDate!=null&&Ie(this.closeCalendarDate).getTime()===Ie(e).getTime()}hasTreatemnt(e){for(const t of Object.values(this.treatmentsSubjects))if(t.containTreatment(e))return!0;return!1}get useWhatsApp(){return this.notifications.notificationOption===te.WhatsApp||this.notifications.notificationOption===te.PushOrWhatsApp}setFromWorkerDoc(e){if(this.daysToAllowBookings=e.daysToAllowBookings||7,this.profileImg=e.profileImg||"",this.about=e.about||"",e.lastCleanDate instanceof dt?this.lastCleanDate=e.lastCleanDate.toDate():typeof e.lastCleanDate=="string"&&(this.lastCleanDate=new Date(e.lastCleanDate)||new Date),e.religions&&(this.religions=e.religions.map(t=>iu[t])),e.windowSpaces&&(this.windowSpaces=pu[e.windowSpaces]||Kr.shortestTreatment),this.isCustomersNeedRecurrence=e.isCustomersNeedRecurrence||!1,this.showWaitingListWhenThereIsChoises=e.showWaitingListWhenThereIsChoises||!0,this.customWindowMinute=e.customWindowMinute||30,this.closeScheduleOnHolidays=e.closeScheduleOnHolidays||!1,this.weekendDays=e.weekendDays||[5,6],this.mustVerifyPhone=e.mustVerifyPhone||!0,this.showVacations=e.showVacations||!0,this.gender=et[e.gender]||J.anonymous,this.allowAppNotification=e.allowAppNotification||!0,this.name=e.name||"",this.maxTreatments=e.maxTreatments||3,this.phone=e.phone||"",this.hasRecurrenceEvents=e.hasRecurrenceEvents||!1,this.id=e.id||e.phone||"",this.minutesBeforeBookingToConfirm=e.minutesBeforeBookingToConfirm||1440,this.maxFutureBookings=e.maxFutureBookings||4,this.treatmentsSubjects=new Map,this.shortBookingTime=999,e.treatmentsSubjects){let t=[this.shortBookingTime],r=[this.longestBookingTime];Object.entries(e.treatmentsSubjects).forEach(([n,s])=>{const a=pi.fromJson(s,n,{pointerShortBookingTime:t,pointerLognestBookingTime:r});this.treatmentsSubjects.set(n,a)}),this.shortBookingTime=t[0],this.longestBookingTime=r[0]}else if(e.treatments){const t=new Map;let r=0;Object.entries(e.treatments).forEach(([n,s])=>{const a=_e.fromOldJson(s,r.toString(),n,r+4);t.set(r.toString(),a),a.totalMinutes<this.shortBookingTime&&(this.shortBookingTime=Math.max(a.times.get("0").workMinutes,5)),a.totalMinutes===this.shortBookingTime&&(this.shortBookingTime=Math.min(Math.max(a.times.get("0").workMinutes,5),this.shortBookingTime)),r+=1}),this.treatmentsSubjects=new Map([["0",new pi({name:G("general"),treatments:t,index:"0"})]])}this.onHoldMinutes=e.onHoldMinutes||0,this.cancelMinutes=e.cancelMinutes||0,e.devices!=null&&typeof e.devices=="object"&&Object.entries(e.devices).forEach(([t,r])=>{this.devices.set(t,We.fromJson(r,t))}),this.deleteNeerDedlineBookingMessage=e.deleteNeerDedlineBookingMessage,this.orderNeerDedlineBookingMessage=e.orderNeerDedlineBookingMessage,this.generalBookingMessage=e.generalBookingMessage,this.workTime=new Map,e.workTime&&Object.entries(e.workTime).forEach(([t,r])=>{this.workTime.set(t,r.map(n=>n))}),this.waitingListExceptionDays=new Set,e.waitingListExceptionDays&&e.waitingListExceptionDays.forEach(t=>{this.waitingListExceptionDays.add(t)}),e.notifications?this.notifications=Yt.fromJson(e.notifications):(this.notifications=new Yt,this.notifications.notifyOnWaitingListEvents=e.notifyOnWaitingListEvents||!0,this.notifications.showAdressAlert=e.showAdressAlert||!1,this.notifications.showAdressMessage=e.showAdressMessage||!1,this.notifications.showPhoneAlert=e.showPhoneAlert||!1,this.notifications.showPhoneMessage=e.showPhoneMessage||!1,this.notifications.remindersTypes=new Map([[je.regular,e.minutesBeforeNotify||60]]),this.notifications.notifyOnPayments=e.notifyOnPayments||!0,this.notifications.notifyAboutCancelNearDeadline=e.notifyAboutCancelNearDeadline||!0,this.notifications.notifyAboutOrderNearDeadline=e.notifyAboutOrderNearDeadline||!0,this.notifications.notifyWhenGettingBooking=e.notifyWhenGettingBooking||!0,e.notificationOption&&(this.notifications.notificationOption=vi[e.notificationOption]||te.OnlyPush),e.recurrenceNotificationsLastDate?this.notifications.recurrenceNotificationsLastDate=new Date(e.recurrenceNotificationsLastDate):this.notifications.recurrenceNotificationsLastDate=new Date),this.specificRangeChanges=new Map,e.specificRangeChanges&&Object.entries(e.specificRangeChanges).forEach(([t,r])=>{const n=mi.fromJson(r,t);n.end>=Ie(new Date)&&this.specificRangeChanges.set(t,n)}),this.storyImages=new Map,e.storyImages&&Object.entries(e.storyImages).forEach(([t,r])=>{this.storyImages.set(t,r)}),e.closeCalendarDate&&(this.closeCalendarDate=new Date(e.closeCalendarDate)),e.minDateForShowinData&&(this.minDateForShowinData=Ei(e.minDateForShowinData)),this.openCalendar=e.openCalendar||!0,this.allowBookingConfirmations=e.allowBookingConfirmations||!0,e.createdAt?this.createdAt=new Date(e.createdAt):this.createdAt=new Date(2023,0,1),this.id===this.phone?this.isVerifiedPhone=!0:this.isVerifiedPhone=e.isVerifiedPhone||!1}getInvoiceWorkerInfo(){return new InvoiceWorkerInfo({workerId:this.id,workerName:this.name})}getFcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm!=null)return new Set([this.tempFcm]);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}toWorkerDocJson(){const e={};return e.workTime={},Object.entries(this.workTime).forEach(([t,r])=>{e.workTime[t]=r}),e.specificRangeChanges={},Object.entries(this.specificRangeChanges).forEach(([t,r])=>{e.specificRangeChanges[t]=r.toJson()}),e.religions=[],this.religions.forEach(t=>{e.religions.push(ru[t])}),this.closeCalendarDate!=null&&(e.closeCalendarDate=new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}).format(this.closeCalendarDate)),this.minDateForShowinData.getFullYear()!=new Date(0).getFullYear()&&(e.minDateForShowinData=Ue(this.minDateForShowinData)),this.openCalendar||(e.openCalendar=this.openCalendar),e.allowBookingConfirmations=this.allowBookingConfirmations,this.mustVerifyPhone||(e.mustVerifyPhone=this.mustVerifyPhone),this.isCustomersNeedRecurrence&&(e.isCustomersNeedRecurrence=this.isCustomersNeedRecurrence),e.weekendDays=this.weekendDays,e.maxTreatments=this.maxTreatments,e.gender=Qt[this.gender],e.onHoldMinutes=this.onHoldMinutes,e.cancelMinutes=this.cancelMinutes,this.hasRecurrenceEvents&&(e.hasRecurrenceEvents=this.hasRecurrenceEvents),this.showVacations||(e.showVacations=this.showVacations),e.devices={},Object.entries(this.devices).forEach(([t,r])=>{e.devices[t]=r.toJson()}),e.deleteNeerDedlineBookingMessage=this.deleteNeerDedlineBookingMessage,e.orderNeerDedlineBookingMessage=this.orderNeerDedlineBookingMessage,e.generalBookingMessage=this.generalBookingMessage,e.closeScheduleOnHolidays=this.closeScheduleOnHolidays,this.customWindowMinute!=30&&(e.customWindowMinute=this.customWindowMinute),this.windowSpaces!=Kr.shortestTreatment&&(e.windowSpaces=mu[this.windowSpaces]),this.minutesBeforeBookingToConfirm!=1440&&(e.minutesBeforeBookingToConfirm=this.minutesBeforeBookingToConfirm),e.bookingDaysToDeleteLocal=[],e.notifications=this.notifications.toJson(),e.lastCleanDate=this.lastCleanDate.toString(),e.daysToAllowBookings=this.daysToAllowBookings,this.maxFutureBookings!=4&&(e.maxFutureBookings=this.maxFutureBookings),this.currentClientCount!=0&&(e.currentClientCount=this.currentClientCount),this.allowAppNotification||(e.allowAppNotification=this.allowAppNotification),this.waitingListExceptionDays.entries.length>0&&(e.waitingListExceptionDays=Array.from(this.waitingListExceptionDays)),e.treatmentsSubjects={},Object.entries(this.treatmentsSubjects).forEach(([t,r])=>{e.treatmentsSubjects[t]=r.toJson()}),this.showWaitingListWhenThereIsChoises||(e.showWaitingListWhenThereIsChoises=this.showWaitingListWhenThereIsChoises),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.profileImg=this.profileImg,e.about=this.about,e.name=name,e.phone=this.phone,e.id=this.id,e.storyImages={},Object.entries(this.storyImages).forEach(([t,r])=>{e.storyImages[t]=r}),e.createdAt=this.createdAt.toString(),e}toString(){return JSON.stringify(this.toWorkerDocJson())+this.workerPublicData.toWorkerPublicDataJson().toString()}}class rp{constructor(){o(this,"_db");Yn().length===0?Jn(Qn):gi(),this._db=fc()}async getChild({childPath:e}){try{const t=xt(this._db,`${ne}/${e}`);return await mc(t)}catch(t){throw t}}async updateChild({childPath:e,data:t}){try{const r=xt(this._db,`${ne}/${e}`);return await Bi(r,t),!0}catch{return!1}}async removeChild({childPath:e}){try{const t=xt(this._db,`${ne}/${e}`);return await pc(t),!0}catch{return!1}}async incrementNumberChild({childPath:e,valueId:t,delta:r,command:n}){try{n===Eo.decrement&&(r=-r);const s={[t]:Ls(r)},a=xt(this._db,`${ne}/${e}`);return await Bi(a,s),!0}catch{return!1}}async incrementMultipleNumberChild({childPath:e,data:t}){try{const r={};for(const[s,a]of Object.entries(t))r[s]=Ls(a);const n=xt(this._db,`${ne}/${e}`);return await Bi(n,r),!0}catch{return!1}}listenToChild({childPath:e,callback:t}){const r=xt(this._db,`${ne}/${e}`);return xc(r,t)}async setChild({childPath:e,data:t}){try{const r=xt(this._db,`${ne}/${e}`);return await gc(r,t),!0}catch{return!1}}}class ip extends rp{constructor(){Yn().length===0?Jn(Qn):gi();super();o(this,"_firestore");this._firestore=wc()}get getBatch(){return vc(this._firestore)}async getDocSRV({path:t,docId:r,insideEnviroments:n=!0}){try{const s=pe(this._firestore,n?`${ne}/${t}`:t),a=ve(s,r);return await yc(a)}catch(s){throw s instanceof Error&&(he.error(s.message),Y.GI().addError({error:W.serverError,details:s.message})),s}}async getAllDocsInsideCollection(t){try{const r=pe(this._firestore,`${ne}/${t}`);return(await Us(r)).docs.map(s=>s.data())}catch(r){if(r instanceof Error)throw Y.GI().addError({error:W.serverError,details:r.toString()}),r;return[]}}async commmitBatch(t){try{return await t.commit(),!0}catch(r){throw he.error("Error while commit batch -->",r),r instanceof Error&&Y.GI().addError({error:W.serverError,details:r.toString()}),new Error(`Server Error: ${r}`)}}async runTransaction(t){try{return await Dc(this._firestore,async n=>await t(n))}catch(r){throw console.error("Error while run transaction -->",r),r instanceof Error&&Y.GI().addError({error:W.serverError,details:r.toString()}),new Error(`Server Error: ${r}`)}}async transactionGet(t,r,n){try{const s=pe(this._firestore,`${ne}/${r}`),a=ve(s,n);return await t.get(a)}catch(s){throw console.error("Error while getting document in transaction -->",s),s instanceof Error&&Y.GI().addError({error:W.serverError,details:s.toString()}),new Error(`Server Error: ${s}`)}}async transactionUpdateAsMap({transaction:t,path:r,docId:n,fieldName:s,value:a}){try{const u=pe(this._firestore,`${ne}/${r}`),c=ve(u,n),h={[s]:a||_i()};t.update(c,h)}catch(u){throw he.error("Error while updating document in transaction -->",u),u instanceof Error&&Y.GI().addError({error:W.serverError,details:u.toString()}),new Error(`Server Error: ${u}`)}}async setAsMap({batch:t,path:r,docId:n,data:s,insideEnviroments:a=!0}){try{const u=pe(this._firestore,a?`${ne}/${r}`:r),c=ve(u,n);t.set(c,s,{merge:!0})}catch(u){throw u instanceof Error&&Y.GI().addError({error:W.serverError,details:u.toString()}),u}}async getAllDocsAndIdsInsideCollection({path:t}){try{const r=pe(this._firestore,`$envKey/${t}`),n=await Us(r),s={};return n.docs.forEach(a=>{s[a.id]=a.data()}),s}catch(r){throw r instanceof Error&&Y.GI().addError({error:W.serverError,details:r.toString()}),r}}async transactionUpdateMultipleFieldsAsMap({transaction:t,path:r,docId:n,data:s,insideEnvironments:a=!0}){try{const u=pe(this._firestore,a?`${ne}/${r}`:r),c=ve(u,n),h=this.organizeData(s);t.update(c,h)}catch(u){throw console.error("Error while updating multiple fields in transaction -->",u),u instanceof Error&&Y.GI().addError({error:W.serverError,details:u.toString()}),new Error(`Server Error: ${u}`)}}async transactionCreateDoc({transaction:t,path:r,docId:n,value:s}){try{const a=pe(this._firestore,`${ne}/${r}`),u=ve(a,n);t.set(u,s)}catch(a){throw he.error("Error while creating document in transaction -->",a),a instanceof Error&&Y.GI().addError({error:W.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}async transactionSetAsMap({transaction:t,path:r,docId:n,data:s}){try{const a=pe(this._firestore,`${ne}/${r}`),u=ve(a,n),c=this.organizeData(s);t.set(u,c,{merge:!0})}catch(a){throw he.error("Error while setting document as map in transaction -->",a),a instanceof Error&&Y.GI().addError({error:W.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}async deleteDoc({batch:t,path:r,docId:n}){try{const s=pe(this._firestore,`${ne}/${r}`),a=ve(s,n);t.delete(a)}catch(s){throw s instanceof Error&&Y.GI().addError({error:W.serverError,details:s.toString()}),s}}async setDoc({batch:t,path:r,docId:n,valueToSet:s,insideEnviroments:a=!0}){try{const u=pe(this._firestore,a?`${ne}/${r}`:r),c=ve(u,n);t.set(c,s)}catch(u){throw u instanceof Error&&Y.GI().addError({error:W.serverError,details:u.toString()}),u}}async createDoc({batch:t,path:r,docId:n,valueAsJson:s,insideEnviroments:a=!0,mergeIfExist:u=!1}){try{const c=u?{merge:!0}:null,h=pe(this._firestore,a?`${ne}/${r}`:r),l=ve(h,n);t.set(l,s,{merge:u})}catch(c){throw c instanceof Error&&Y.GI().addError({error:W.serverError,details:c.toString()}),c}}async updateFieldInsideDocAsMap({batch:t,path:r,docId:n,value:s,fieldName:a,command:u,insideEnviroments:c=!0}){try{const h=pe(this._firestore,c?`${ne}/${r}`:r),l=ve(h,n);u===null?t.update(l,{[a]:s??_i()}):t.update(l,{[a]:u===1?Hr(1):Hr(-1)})}catch(h){throw h instanceof Error&&Y.GI().addError({error:W.serverError,details:h.toString()}),h}}async updateMultipleFieldsInsideDocAsMap({batch:t,path:r,docId:n,data:s,insideEnviroments:a=!0}){try{const u=pe(this._firestore,a?`${ne}/${r}`:r),c=ve(u,n);t.update(c,this.organizeData(s))}catch(u){throw he.error("Error while updating the batch -->",u),u instanceof Error&&Y.GI().addError({error:W.serverError,details:u.toString()}),new Error(`Server Error: ${u}`)}}updateFieldInsideDocAsArray({batch:t,path:r,docId:n,fieldName:s,value:a,command:u=On.add}){try{const c=pe(this._firestore,`${ne}/${r}`),h=ve(c,n);t.update(h,{[s]:u===On.remove?bc([a]):kc([a])})}catch(c){throw c instanceof Error&&Y.GI().addError({error:W.serverError,details:c.toString()}),new Error(`Server Error: ${c}`)}}docListener({path:t,docId:r,onChanged:n}){try{const s=pe(this._firestore,`${ne}/${t}`),a=ve(s,r);return Ic(a,n)}catch(s){throw s instanceof Error&&Y.GI().addError({error:W.serverError,details:s.message}),s}}organizeData(t){var r={};return Object.entries(t).forEach(([n,s])=>{let a=s;a===null&&(a=_i()),a===1&&(a=Hr(1)),a===0&&(a=Hr(-1)),r[n]=a}),r}get currentTimestamp(){return dt.now()}}class np extends ip{constructor(){super()}async getDocRepo({path:e,docId:t,insideEnviroments:r=!0}){return await super.getDocSRV({path:e,docId:t,insideEnviroments:r})}async createDocRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:n=!0,mergeIfExist:s=!1}){const a=this.getBatch;return super.createDoc({batch:a,path:e,docId:t,valueAsJson:r,insideEnviroments:n,mergeIfExist:s}),await this.commmitBatch(a)}async updateFieldInsideDocAsArrayRepo({path:e,docId:t,fieldName:r,value:n,command:s}){const a=this.getBatch;return super.updateFieldInsideDocAsArray({batch:a,path:e,docId:t,fieldName:r,value:n,command:s}),await this.commmitBatch(a)}async updateFieldInsideDocAsMapRepo({path:e,docId:t,fieldName:r,value:n,insideEnviroments:s=!0,command:a=null}){const u=this.getBatch;return this.updateFieldInsideDocAsMap({batch:u,path:e,docId:t,fieldName:r,value:n,command:a,insideEnviroments:s}),await this.commmitBatch(u)}async updateMultipleFieldsInsideDocAsMapRepo({path:e,docId:t,data:r,insideEnviroments:n=!0}){const s=this.getBatch;return super.updateMultipleFieldsInsideDocAsMap({batch:s,path:e,docId:t,data:r,insideEnviroments:n}),await this.commmitBatch(s)}async deleteDocRepo({path:e,docId:t}){const r=this.getBatch;return super.deleteDoc({batch:r,path:e,docId:t}),await this.commmitBatch(r)}async setDocRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:n=!0}){const s=this.getBatch;return super.setDoc({batch:s,path:e,docId:t,valueToSet:r,insideEnviroments:n}),await this.commmitBatch(s)}async setAsMapWithMergeRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:n=!0}){const s=this.getBatch;return super.setAsMap({batch:s,path:e,docId:t,data:r,insideEnviroments:n}),await this.commmitBatch(s)}docListenerRepo({path:e,docId:t,onChanged:r}){return super.docListener({path:e,docId:t,onChanged:r})}async getWorkerFromTransactionRepo({transaction:e,workerId:t,businessModel:r,needMultiDoc:n=!1}){const s=`${ze}/${Ce.currentBusinesssId}/${Ut}`,a=await this.transactionGet(e,s,t);if(!a.exists())return;const u=_r.fromWorkerDocJson(a.data());return await super.transactionGet(e,`${s}/${t}/${Wt}`,Gr).then(c=>{c.exists()&&u.workerPublicData.setWorkerPublicData(c.data())}),u.hasRecurrenceEvents&&u.isCustomersNeedRecurrence&&await super.transactionGet(e,`${s}/${t}/${Wt}`,Qc).then(c=>{c.exists()&&c.data()!=null&&u.recurrence.setRecurrenceEvents(c.data(),t,r??Bt.empty())}),n&&await super.transactionGet(e,`${s}/${t}/${Wt}`,Zc).then(c=>{c.exists()&&u.multiEventsTimes.setData(c.data())}),u}toFormatedCustomerData({customerData:e,amountOfBookingsCommand:t,useUserFirstBookingsDate:r=!1,saveExtraData:n=!1}){const s=e.toJson();s.amoutOfBookings=t;const a={};return a[`data.${e.customerUuid}.amoutOfBookings`]=s.amoutOfBookings,s.lastBookingsDate!=null&&(a[`data.${e.customerUuid}.lastBookingsDate`]=s.lastBookingsDate),r?s.userFirstBookingsDate!=null&&(a[`data.${e.customerUuid}.userFirstBookingsDate`]=s.userFirstBookingsDate):s.firstBookingsDate!=null&&(a[`data.${e.customerUuid}.firstBookingsDate`]=s.firstBookingsDate),n&&(s.gender!=null&&(a[`data.${e.customerUuid}.gender`]=s.gender),s.name!=null&&(a[`data.${e.customerUuid}.name`]=s.name),s.workerNaming!=null&&(a[`data.${e.customerUuid}.name`]=s.workerNaming),s.email!=null&&(a[`data.${e.customerUuid}.email`]=s.email),s.id!=null&&(a[`data.${e.customerUuid}.id`]=s.id)),a}async realTimeEventsCounterHandler({businessId:e,workerId:t,types:r,increment:n}){if(r.size===0)return!0;const s=ti.GI().getWorkerCountersPath(e,t),a={};return r.forEach((u,c)=>{Ys[c]!==null&&u!==0&&(a[Ys[c]]=(n?1:-1)*u)}),Object.keys(a).length===0?!0:await this.incrementMultipleNumberChild({childPath:s,data:a})}}const Ir=class Ir{constructor(){o(this,"defaultTheme","darkIos");o(this,"currentKeyTheme",null);o(this,"themeCauseMainBuilt",!1);o(this,"currentThemes",{...Po});o(this,"currentBusinessTheme",null)}static GI(){return Ir._singleton}async changeTheme(e,{needOverlayHandling:t=!0,ovveride:r=!1,needWaitOverlay:n=!1}={}){var a;const s=this.currentThemes[e];if(s==null||this.currentBusinessTheme==null||!s.isEqual(this.currentBusinessTheme)||r){switch((a=this.currentThemes[e])==null?void 0:a.brightness){case Rn.light:Ze.GI().businessIcon="darkShopIcon";break;case Rn.dark:Ze.GI().businessIcon="lightShopIcon";break;default:Ze.GI().businessIcon="lightShopIcon";break}return this.themeCauseMainBuilt=!0,this.currentKeyTheme=e,this.currentThemes.hasOwnProperty(e)&&(this.currentBusinessTheme=this.currentThemes[e]),!0}return!1}};o(Ir,"_singleton",new Ir);let $n=Ir;function sp(i,e){const t=e.split("--")[0];return Ce.developers.hasOwnProperty(t)&&(i=Ce.developers[t].businessProductId),i.includes("basic")?vt.basic:i.includes("landing")?vt.landingPage:i.includes("advanced")?vt.advanced:i.includes("golden")?vt.golden:vt.trial}const bt=class bt{constructor(){o(this,"generalRepo",new np);o(this,"business",new Bt({businessId:"",design:new Je}));o(this,"workers",{});o(this,"businessIcon","");o(this,"businessSubtype",vt.trial)}static GI(){return bt.instance||(bt.instance=new bt),bt.instance}async initSettings(e,{fromLoading:t=!1}={}){try{this.workers={},Ce.currentBusinesssId=e,console.log("222222222222223333333333333");const r=await Promise.all([this._loadSettingsDoc(e),this._loadBusinessWorkers(e)]);return console.log("22222222222222222"),this.businessSubtype=sp(this.business.productId,e),r.length>0&&r[0]===!1?!1:(this.makeBusinessDataListener(),!0)}catch(r){return he.error(`Error while initializing settings --> ${r}`),!1}}async loadBusiness(e,t,{fromLoading:r=!1,fromSearch:n=!1}={}){console.log("1111111111111111111");try{const s=await this.initSettings(e,{fromLoading:r});return console.log("33333333333333333322222222222222222"),$n.GI().themeCauseMainBuilt,!0}catch{return!1}}async _loadSettingsDoc(e){try{console.log("eeeeeeedddddddddddddd");const t=await this.generalRepo.getDocRepo({path:ze,docId:e});return t===void 0||!t.exists||t.data()===null?(Y.GI().error=W.notFoundBusiness,!1):(this.business=Bt.fromJson(t.data(),e),!0)}catch{return!1}}async _loadBusinessWorkers(e){try{const t=`${ze}/${e}/${Ut}`;console.log("eewwwwwwwww");const r=await this.generalRepo.getAllDocsInsideCollection(t);return r!==null&&r.forEach(n=>{const s=_r.fromWorkerDocJson(n);Pt.GI().getPermission>1||(s.id,Pt.GI().user.id),this.workers[s.id]=s}),!0}catch(t){return t instanceof Error&&(he.error(`Error while loading the business workers docs --> ${t}`),he.error(t.stack)),!0}}async makeBusinessDataListener(){const e=ti.GI().getBusinessDataPath(Ce.currentBusinesssId);this.business.businessData.listener=this.generalRepo.listenToChild({childPath:e,callback:t=>{t.exists()&&(this.business.businessData.setBusinessData(t),console.log(this.business.businessData))}})}};o(bt,"instance");let Ze=bt,Dp=rc();export{P0 as A,Ze as B,H as D,$c as E,J as G,Nf as L,$n as T,Pt as U,Ff as V,yp as a,gp as b,vp as c,Ue as d,Rf as e,np as f,wp as g,lp as h,Hs as i,Wt as j,Gr as k,Dr as l,ze as m,Ce as n,fp as o,dp as p,hp as q,li as r,mp as s,pp as t,Dp as u,Y as v,xp as w,he as x,Qn as y};
