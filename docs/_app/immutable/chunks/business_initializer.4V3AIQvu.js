import{T as lt,r as Ai,g as Ri,i as Li,a as fn,b as q0,c as pt,d as z0,u as In,e as G0,f as Es,o as Y0,s as J0,h as K0,w as Q0,j as xe,k as be,l as X0,m as Z0,n as j0,p as En,q as Rr,t as ec,v as ja,x as tc,y as rc,_ as Ts,C as Ps,z as nc,S as Tr,A as we,E as Ui,B as ic,L as eo,D as ve,F as to,G as sc,H as ac,I as Wi,J as oc,K as Pr,M as cc,N as uc,O as hc}from"./index.esm2017.RxPtKGj5.js";import{b as Hi,d as lc,e as H,g as ro}from"./_commonjsHelpers.Y1uXSML9.js";import{G as dc}from"./google.u_99fliv.js";const Vi={apiKey:"AIzaSyCSIQHCC23Z7ul639fD8JLMHu4yN77_0VA",authDomain:"managementsystemapp-c1fda.firebaseapp.com",databaseURL:"https://managementsystemapp-c1fda-default-rtdb.europe-west1.firebasedatabase.app",projectId:"managementsystemapp-c1fda",storageBucket:"managementsystemapp-c1fda.appspot.com",messagingSenderId:"670820779934",appId:"1:670820779934:web:fdcf77a952b59c3090788f",measurementId:"G-WP8J044JN9"},Ii={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function Ei(n,e,t,r=!1){const i=String(e),s=(o,u)=>`\x1B[${u[0]}m${o}\x1B[${u[1]}m`,a=(o,u)=>u!=null&&typeof u=="string"?s(o,Ii[u]):u!=null&&Array.isArray(u)?u.reduce((h,d)=>a(h,d),o):u!=null&&u[o.trim()]!=null?a(o,u[o.trim()]):u!=null&&u["*"]!=null?a(o,u["*"]):o,c=null;return i.replace(/{{(.+?)}}/g,(o,u)=>{const h=t[u]!=null?String(t[u]):r?"":o;return n.stylePrettyLogs?a(h,n?.prettyLogStyles?.[u]??c)+s("",Ii.reset):h})}function Ae(n,e=2,t=0){return n!=null&&isNaN(n)?"":(n=n!=null?n+t:n,e===2?n==null?"--":n<10?"0"+n:n.toString():n==null?"---":n<10?"00"+n:n<100?"0"+n:n.toString())}function fc(n){return{href:n.href,protocol:n.protocol,username:n.username,password:n.password,host:n.host,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search,searchParams:[...n.searchParams].map(([e,t])=>({key:e,value:t})),hash:n.hash,origin:n.origin}}function no(n){const e=new Set;return JSON.stringify(n,(t,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return r})}function Ee(n,e){const t={seen:[],stylize:io};return e!=null&&co(t,e),Nt(t.showHidden)&&(t.showHidden=!1),Nt(t.depth)&&(t.depth=2),Nt(t.colors)&&(t.colors=!0),Nt(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=pc),Kr(t,n,t.depth)}Ee.colors=Ii;Ee.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function mc(n){return typeof n=="boolean"}function Nt(n){return n===void 0}function io(n){return n}function pc(n,e){const t=Ee.styles[e];return t!=null&&Ee?.colors?.[t]?.[0]!=null&&Ee?.colors?.[t]?.[1]!=null?"\x1B["+Ee.colors[t][0]+"m"+n+"\x1B["+Ee.colors[t][1]+"m":n}function Lr(n){return typeof n=="function"}function so(n){return typeof n=="string"}function gc(n){return typeof n=="number"}function ao(n){return n===null}function oo(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Tn(n){return mn(n)&&$i(n)==="[object RegExp]"}function mn(n){return typeof n=="object"&&n!==null}function Pn(n){return mn(n)&&($i(n)==="[object Error]"||n instanceof Error)}function _s(n){return mn(n)&&$i(n)==="[object Date]"}function $i(n){return Object.prototype.toString.call(n)}function xc(n){const e={};return n.forEach(t=>{e[t]=!0}),e}function vc(n,e,t,r,i){const s=[];for(let a=0,c=e.length;a<c;++a)oo(e,String(a))?s.push(Ti(n,e,t,r,String(a),!0)):s.push("");return i.forEach(a=>{a.match(/^\d+$/)||s.push(Ti(n,e,t,r,a,!0))}),s}function _n(n){return"["+Error.prototype.toString.call(n)+"]"}function Kr(n,e,t=0){if(n.customInspect&&e!=null&&Lr(e)&&e?.inspect!==Ee&&!(e?.constructor&&e?.constructor.prototype===e)){if(typeof e.inspect!="function"&&e.toString!=null)return e.toString();let h=e?.inspect(t,n);return so(h)||(h=Kr(n,h,t)),h}const r=ct(n,e);if(r)return r;let i=Object.keys(e);const s=xc(i);try{n.showHidden&&Object.getOwnPropertyNames&&(i=Object.getOwnPropertyNames(e))}catch{}if(Pn(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return _n(e);if(i.length===0)if(Lr(n.stylize)){if(Lr(e)){const h=e.name?": "+e.name:"";return n.stylize("[Function"+h+"]","special")}if(Tn(e))return n.stylize(RegExp.prototype.toString.call(e),"regexp");if(_s(e))return n.stylize(Date.prototype.toISOString.call(e),"date");if(Pn(e))return _n(e)}else return e;let a="",c=!1,o=[`{
`,`
}`];if(Array.isArray(e)&&(c=!0,o=[`[
`,`
]`]),Lr(e)&&(a=" [Function"+(e.name?": "+e.name:"")+"]"),Tn(e)&&(a=" "+RegExp.prototype.toString.call(e)),_s(e)&&(a=" "+Date.prototype.toUTCString.call(e)),Pn(e)&&(a=" "+_n(e)),i.length===0&&(!c||e.length==0))return o[0]+a+o[1];if(t<0)return Tn(e)?n.stylize(RegExp.prototype.toString.call(e),"regexp"):n.stylize("[Object]","special");n.seen.push(e);let u;return c?u=vc(n,e,t,s,i):u=i.map(h=>Ti(n,e,t,s,h,c)),n.seen.pop(),wc(u,a,o)}function Ti(n,e,t,r,i,s){let a,c,o={value:void 0};try{o.value=e[i]}catch{}try{Object.getOwnPropertyDescriptor&&(o=Object.getOwnPropertyDescriptor(e,i)||o)}catch{}if(o.get?o.set?c=n.stylize("[Getter/Setter]","special"):c=n.stylize("[Getter]","special"):o.set&&(c=n.stylize("[Setter]","special")),oo(r,i)||(a="["+i+"]"),c||(n.seen.indexOf(o.value)<0?(ao(t)?c=Kr(n,o.value,void 0):c=Kr(n,o.value,t-1),c.indexOf(`
`)>-1&&(s?c=c.split(`
`).map(u=>"  "+u).join(`
`).substr(2):c=`
`+c.split(`
`).map(u=>"   "+u).join(`
`))):c=n.stylize("[Circular]","special")),Nt(a)){if(s&&i.match(/^\d+$/))return c;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=n.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,"\\'").replace(/(^"|"$)/g,"'"),a=n.stylize(a,"string"))}return a+": "+c}function ct(n,e){if(Nt(e))return n.stylize("undefined","undefined");if(so(e)){const t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\\'")+"'";return n.stylize(t,"string")}if(gc(e))return n.stylize(""+e,"number");if(mc(e))return n.stylize(""+e,"boolean");if(ao(e))return n.stylize("null","null")}function wc(n,e,t){return t[0]+(e===""?"":e+`
`)+"  "+n.join(`,
  `)+" "+t[1]}function co(n,e){if(!e||!mn(e))return n;const t={...n},r={...e},i=Object.keys(e);let s=i.length;for(;s--;)t[i[s]]=r[i[s]];return n}function yc(n,...e){const t={seen:[],stylize:io};n!=null&&co(t,n);const r=e[0];let i=0,s="",a="";if(typeof r=="string"){if(e.length===1)return r;let c,o=0;for(let u=0;u<r.length-1;u++)if(r.charCodeAt(u)===37){const h=r.charCodeAt(++u);if(i+1!==e.length){switch(h){case 115:{const d=e[++i];typeof d=="number"||typeof d=="bigint"?c=ct(t,d):typeof d!="object"||d===null?c=String(d):c=Ee(d,{...n,compact:3,colors:!1,depth:0});break}case 106:c=no(e[++i]);break;case 100:{const d=e[++i];typeof d=="bigint"?c=ct(t,d):typeof d=="symbol"?c="NaN":c=ct(t,d);break}case 79:c=Ee(e[++i],n);break;case 111:c=Ee(e[++i],{...n,showHidden:!0,showProxy:!0,depth:4});break;case 105:{const d=e[++i];typeof d=="bigint"?c=ct(t,d):typeof d=="symbol"?c="NaN":c=ct(t,parseInt(c));break}case 102:{const d=e[++i];typeof d=="symbol"?c="NaN":c=ct(t,parseInt(d));break}case 99:i+=1,c="";break;case 37:s+=r.slice(o,u),o=u+1;continue;default:continue}o!==u-1&&(s+=r.slice(o,u-1)),s+=c,o=u+1}else h===37&&(s+=r.slice(o,u),o=u+1)}o!==0&&(i++,a=" ",o<r.length&&(s+=r.slice(o)))}for(;i<e.length;){const c=e[i];s+=a,s+=typeof c!="string"?Ee(c,n):c,a=" ",i++}return s}const Dc={getCallerStackFrame:uo,getErrorTrace:ho,getMeta:Cc,transportJSON:Ec,transportFormatted:Ic,isBuffer:Tc,isError:fo,prettyFormatLogObj:Ac,prettyFormatErrorObj:mo},bc={runtime:[typeof window,typeof document].includes("undefined")?"Generic":"Browser",browser:globalThis?.navigator?.userAgent},kc=/(?:(?:file|https?|global code|[^@]+)@)?(?:file:)?((?:\/[^:/]+){2,})(?::(\d+))?(?::(\d+))?/;function Cc(n,e,t,r,i,s){return Object.assign({},bc,{name:i,parentNames:s,date:new Date,logLevelId:n,logLevelName:e,path:r?void 0:uo(t)})}function uo(n,e=Error()){return lo(e?.stack?.split(`
`)?.filter(t=>!t.includes("Error: "))?.[n])}function ho(n){return n?.stack?.split(`
`)?.filter(e=>!e.includes("Error: "))?.reduce((e,t)=>(e.push(lo(t)),e),[])}function lo(n){const e=globalThis?.location?.origin,t={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(n!=null){const r=n.match(kc);if(r){t.filePath=r[1].replace(/\?.*$/,""),t.fullFilePath=`${e}${t.filePath}`;const i=t.filePath.split("/");t.fileName=i[i.length-1],t.fileLine=r[2],t.fileColumn=r[3],t.filePathWithLine=`${t.filePath}:${t.fileLine}`,t.fileNameWithLine=`${t.fileName}:${t.fileLine}`}}return t}function fo(n){return n instanceof Error}function Ac(n,e){return n.reduce((t,r)=>(fo(r)?t.errors.push(mo(r,e)):t.args.push(r),t),{args:[],errors:[]})}function mo(n,e){const t=ho(n).map(i=>Ei(e,e.prettyErrorStackTemplate,{...i},!0)),r={errorName:` ${n.name} `,errorMessage:Object.getOwnPropertyNames(n).reduce((i,s)=>(s!=="stack"&&i.push(n[s]),i),[]).join(", "),errorStack:t.join(`
`)};return Ei(e,e.prettyErrorTemplate,r)}function Ic(n,e,t,r){const i=(t.length>0&&e.length>0?`
`:"")+t.join(`
`);r.prettyInspectOptions.colors=r.stylePrettyLogs,console.log(n+yc(r.prettyInspectOptions,...e)+i)}function Ec(n){console.log(no(n))}function Tc(n){return!1}class Pc{constructor(e,t,r=4){this.logObj=t,this.stackDepthLevel=r,this.runtime=Dc,this.settings={type:e?.type??"pretty",name:e?.name,parentNames:e?.parentNames,minLevel:e?.minLevel??0,argumentsArrayName:e?.argumentsArrayName,hideLogPositionForProduction:e?.hideLogPositionForProduction??!1,prettyLogTemplate:e?.prettyLogTemplate??"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	{{filePathWithLine}}{{nameWithDelimiterPrefix}}	",prettyErrorTemplate:e?.prettyErrorTemplate??`
{{errorName}} {{errorMessage}}
error stack:
{{errorStack}}`,prettyErrorStackTemplate:e?.prettyErrorStackTemplate??`  • {{fileName}}	{{method}}
	{{filePathWithLine}}`,prettyErrorParentNamesSeparator:e?.prettyErrorParentNamesSeparator??":",prettyErrorLoggerNameDelimiter:e?.prettyErrorLoggerNameDelimiter??"	",stylePrettyLogs:e?.stylePrettyLogs??!0,prettyLogTimeZone:e?.prettyLogTimeZone??"UTC",prettyLogStyles:e?.prettyLogStyles??{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:e?.prettyInspectOptions??{colors:!0,compact:!1,depth:1/0},metaProperty:e?.metaProperty??"_meta",maskPlaceholder:e?.maskPlaceholder??"[***]",maskValuesOfKeys:e?.maskValuesOfKeys??["password"],maskValuesOfKeysCaseInsensitive:e?.maskValuesOfKeysCaseInsensitive??!1,maskValuesRegEx:e?.maskValuesRegEx,prefix:[...e?.prefix??[]],attachedTransports:[...e?.attachedTransports??[]],overwrite:{mask:e?.overwrite?.mask,toLogObj:e?.overwrite?.toLogObj,addMeta:e?.overwrite?.addMeta,addPlaceholders:e?.overwrite?.addPlaceholders,formatMeta:e?.overwrite?.formatMeta,formatLogObj:e?.overwrite?.formatLogObj,transportFormatted:e?.overwrite?.transportFormatted,transportJSON:e?.overwrite?.transportJSON}}}log(e,t,...r){if(e<this.settings.minLevel)return;const i=[...this.settings.prefix,...r],s=this.settings.overwrite?.mask!=null?this.settings.overwrite?.mask(i):this.settings.maskValuesOfKeys!=null&&this.settings.maskValuesOfKeys.length>0?this._mask(i):i,a=this.logObj!=null?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,c=this.settings.overwrite?.toLogObj!=null?this.settings.overwrite?.toLogObj(s,a):this._toLogObj(s,a),o=this.settings.overwrite?.addMeta!=null?this.settings.overwrite?.addMeta(c,e,t):this._addMetaToLogObj(c,e,t);let u,h;return this.settings.overwrite?.formatMeta!=null&&(u=this.settings.overwrite?.formatMeta(o?.[this.settings.metaProperty])),this.settings.overwrite?.formatLogObj!=null&&(h=this.settings.overwrite?.formatLogObj(s,this.settings)),this.settings.type==="pretty"&&(u=u??this._prettyFormatLogObjMeta(o?.[this.settings.metaProperty]),h=h??this.runtime.prettyFormatLogObj(s,this.settings)),u!=null&&h!=null?this.settings.overwrite?.transportFormatted!=null?this.settings.overwrite?.transportFormatted(u,h.args,h.errors,this.settings):this.runtime.transportFormatted(u,h.args,h.errors,this.settings):this.settings.overwrite?.transportJSON!=null?this.settings.overwrite?.transportJSON(o):this.settings.type!=="hidden"&&this.runtime.transportJSON(o),this.settings.attachedTransports!=null&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach(d=>{d(o)}),o}attachTransport(e){this.settings.attachedTransports.push(e)}getSubLogger(e,t){const r={...this.settings,...e,parentNames:this.settings?.parentNames!=null&&this.settings?.name!=null?[...this.settings.parentNames,this.settings.name]:this.settings?.name!=null?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...e?.prefix??[]]};return new this.constructor(r,t??this.logObj,this.stackDepthLevel)}_mask(e){const t=this.settings.maskValuesOfKeysCaseInsensitive!==!0?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map(r=>r.toLowerCase());return e?.map(r=>this._recursiveCloneAndMaskValuesOfKeys(r,t))}_recursiveCloneAndMaskValuesOfKeys(e,t,r=[]){if(r.includes(e))return{...e};if(typeof e=="object"&&e!==null&&r.push(e),this.runtime.isError(e)||this.runtime.isBuffer(e))return e;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Array.isArray(e))return e.map(i=>this._recursiveCloneAndMaskValuesOfKeys(i,t,r));if(e instanceof Date)return new Date(e.getTime());if(e instanceof URL)return fc(e);if(e!==null&&typeof e=="object"){const i=this.runtime.isError(e)?this._cloneError(e):Object.create(Object.getPrototypeOf(e));return Object.getOwnPropertyNames(e).reduce((s,a)=>(s[a]=t.includes(this.settings?.maskValuesOfKeysCaseInsensitive!==!0?a:a.toLowerCase())?this.settings.maskPlaceholder:this._recursiveCloneAndMaskValuesOfKeys(e[a],t,r),s),i)}else{if(typeof e=="string"){let i=e;for(const s of this.settings?.maskValuesRegEx||[])i=i.replace(s,this.settings?.maskPlaceholder||"");return i}return e}}_recursiveCloneAndExecuteFunctions(e,t=[]){return this.isObjectOrArray(e)&&t.includes(e)?this.shallowCopy(e):(this.isObjectOrArray(e)&&t.push(e),Array.isArray(e)?e.map(r=>this._recursiveCloneAndExecuteFunctions(r,t)):e instanceof Date?new Date(e.getTime()):this.isObject(e)?Object.getOwnPropertyNames(e).reduce((r,i)=>{const s=Object.getOwnPropertyDescriptor(e,i);if(s){Object.defineProperty(r,i,s);const a=e[i];r[i]=typeof a=="function"?a():this._recursiveCloneAndExecuteFunctions(a,t)}return r},Object.create(Object.getPrototypeOf(e))):e)}isObjectOrArray(e){return typeof e=="object"&&e!==null}isObject(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}shallowCopy(e){return Array.isArray(e)?[...e]:{...e}}_toLogObj(e,t={}){return e=e?.map(r=>this.runtime.isError(r)?this._toErrorObject(r):r),this.settings.argumentsArrayName==null?e.length===1&&!Array.isArray(e[0])&&this.runtime.isBuffer(e[0])!==!0&&!(e[0]instanceof Date)?t=typeof e[0]=="object"&&e[0]!=null?{...e[0],...t}:{0:e[0],...t}:t={...t,...e}:t={...t,[this.settings.argumentsArrayName]:e},t}_cloneError(e){const t=new e.constructor;return Object.getOwnPropertyNames(e).forEach(r=>{t[r]=e[r]}),t}_toErrorObject(e){return{nativeError:e,name:e.name??"Error",message:e.message,stack:this.runtime.getErrorTrace(e)}}_addMetaToLogObj(e,t,r){return{...e,[this.settings.metaProperty]:this.runtime.getMeta(t,r,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(e){if(e==null)return"";let t=this.settings.prettyLogTemplate;const r={};t.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?t=t.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):this.settings.prettyLogTimeZone==="UTC"?(r.yyyy=e?.date?.getUTCFullYear()??"----",r.mm=Ae(e?.date?.getUTCMonth(),2,1),r.dd=Ae(e?.date?.getUTCDate(),2),r.hh=Ae(e?.date?.getUTCHours(),2),r.MM=Ae(e?.date?.getUTCMinutes(),2),r.ss=Ae(e?.date?.getUTCSeconds(),2),r.ms=Ae(e?.date?.getUTCMilliseconds(),3)):(r.yyyy=e?.date?.getFullYear()??"----",r.mm=Ae(e?.date?.getMonth(),2,1),r.dd=Ae(e?.date?.getDate(),2),r.hh=Ae(e?.date?.getHours(),2),r.MM=Ae(e?.date?.getMinutes(),2),r.ss=Ae(e?.date?.getSeconds(),2),r.ms=Ae(e?.date?.getMilliseconds(),3));const i=this.settings.prettyLogTimeZone==="UTC"?e?.date:new Date(e?.date?.getTime()-e?.date?.getTimezoneOffset()*6e4);r.rawIsoStr=i?.toISOString(),r.dateIsoStr=i?.toISOString().replace("T"," ").replace("Z",""),r.logLevelName=e?.logLevelName,r.fileNameWithLine=e?.path?.fileNameWithLine??"",r.filePathWithLine=e?.path?.filePathWithLine??"",r.fullFilePath=e?.path?.fullFilePath??"";let s=this.settings.parentNames?.join(this.settings.prettyErrorParentNamesSeparator);return s=s!=null&&e?.name!=null?s+this.settings.prettyErrorParentNamesSeparator:void 0,r.name=e?.name!=null||s!=null?(s??"")+e?.name:"",r.nameWithDelimiterPrefix=r.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+r.name:"",r.nameWithDelimiterSuffix=r.name.length>0?r.name+this.settings.prettyErrorLoggerNameDelimiter:"",this.settings.overwrite?.addPlaceholders!=null&&this.settings.overwrite?.addPlaceholders(e,r),Ei(this.settings,t,r)}}class _c extends Pc{constructor(e,t){const r=typeof window<"u"&&typeof document<"u",i=r?window.chrome!==void 0&&window.CSS!==void 0&&window.CSS.supports("color","green"):!1,s=r?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1;e=e||{},e.stylePrettyLogs=e.stylePrettyLogs&&r&&!i?!1:e.stylePrettyLogs,super(e,t,s?4:5)}log(e,t,...r){return super.log(e,t,...r)}silly(...e){return super.log(0,"SILLY",...e)}trace(...e){return super.log(1,"TRACE",...e)}debug(...e){return super.log(2,"DEBUG",...e)}info(...e){return super.log(3,"INFO",...e)}warn(...e){return super.log(4,"WARN",...e)}error(...e){return super.log(5,"ERROR",...e)}fatal(...e){return super.log(6,"FATAL",...e)}getSubLogger(e,t){return super.getSubLogger(e,t)}}const oe=new _c({minLevel:4});var Bc=(n=>(n.login="login",n.enter="enter",n))(Bc||{});const Gm={login:"login",enter:"enter"},Ym=["+972-504040624","+972-525656377"],Oc=new Date(2024,0,9,20,0),Sc="production",ne=`enviroments/${Sc}`,Qr="Users",Fc="BookingsObjects",Jm="Errors",Km="Helpers",bt="PublicData",Mt="Workers",Bs="Bookings",$e="Businesses",Qm="Reports",pr="publicData",Nc="recurrenceEvents",po="recurrenceBookings",Mc="multiEventsTimes",Os="LikesCollection",Ss="BusinessData",Rc="Counters",Lc="sasimple",Uc="phone",Fs="^&8@^",Ns="^&9@^";var go=(n=>(n[n.increment=0]="increment",n[n.decrement=1]="decrement",n))(go||{}),vt=(n=>(n[n.basic=0]="basic",n[n.advanced=1]="advanced",n[n.trial=2]="trial",n[n.landingPage=3]="landingPage",n[n.golden=4]="golden",n))(vt||{}),U=(n=>(n[n.sendSms=0]="sendSms",n[n.updateDisplayName=1]="updateDisplayName",n[n.logout=2]="logout",n[n.serverError=3]="serverError",n[n.storageError=4]="storageError",n[n.listener=5]="listener",n[n.notLogedIn=6]="notLogedIn",n[n.illegalFields=7]="illegalFields",n[n.passedLimit=8]="passedLimit",n[n.notFoundItem=9]="notFoundItem",n[n.takenBooking=10]="takenBooking",n[n.overlapWithOntherItem=11]="overlapWithOntherItem",n[n.takenMultiBooking=12]="takenMultiBooking",n[n.alreadyWorker=13]="alreadyWorker",n[n.userNotFound=14]="userNotFound",n[n.verification=15]="verification",n[n.network=16]="network",n[n.emptyField=17]="emptyField",n[n.alreadyExistItem=18]="alreadyExistItem",n[n.uploadImages=19]="uploadImages",n[n.notSelectedImages=20]="notSelectedImages",n[n.wrongOptCode=21]="wrongOptCode",n[n.expiredOpt=22]="expiredOpt",n[n.unknown=23]="unknown",n[n.timeout=24]="timeout",n[n.purchaseError=25]="purchaseError",n[n.anonymouslySignIn=26]="anonymouslySignIn",n[n.lowSubType=27]="lowSubType",n[n.coincidingEvent=28]="coincidingEvent",n[n.coincidingHoliday=29]="coincidingHoliday",n[n.realTimeServerError=30]="realTimeServerError",n[n.blockedUser=31]="blockedUser",n[n.noPermission=32]="noPermission",n[n.paymentProblem=33]="paymentProblem",n[n.currentlyOrderingForTime=34]="currentlyOrderingForTime",n[n.notFoundBusiness=35]="notFoundBusiness",n[n.savePaymentDataError=36]="savePaymentDataError",n[n.redeemDepositError=37]="redeemDepositError",n[n.saveDepositDataError=38]="saveDepositDataError",n[n.endOfWork=39]="endOfWork",n[n.invoiceCreation=40]="invoiceCreation",n[n.cantBookRecurrenceOnDates=41]="cantBookRecurrenceOnDates",n[n.cantBookRecurrenceOnEndlessDates=42]="cantBookRecurrenceOnEndlessDates",n[n.eventHasNoAccurances=43]="eventHasNoAccurances",n[n.workerDeleteTheBookingMeanwhile=44]="workerDeleteTheBookingMeanwhile",n[n.workerUpdatedTheBookingMeanwhile=45]="workerUpdatedTheBookingMeanwhile",n[n.workerDeleteEventMeanwhile=46]="workerDeleteEventMeanwhile",n[n.workerUpdatedTheBookingWhilePayment=47]="workerUpdatedTheBookingWhilePayment",n[n.blockCard=48]="blockCard",n[n.stolenCard=49]="stolenCard",n[n.callCreditCompany=50]="callCreditCompany",n[n.transactionNotConfirmed=51]="transactionNotConfirmed",n[n.fakeCard=52]="fakeCard",n[n.wrongCVV=53]="wrongCVV",n[n.worngCAVVUCAF=54]="worngCAVVUCAF",n[n.worngAvs=55]="worngAvs",n[n.networkDisconnect=56]="networkDisconnect",n[n.partlyConfirm=57]="partlyConfirm",n[n.lackOfPointsStarsMilesOtherBenefit=58]="lackOfPointsStarsMilesOtherBenefit",n[n.unauthorizedCardAtTheTerminal=59]="unauthorizedCardAtTheTerminal",n[n.invalidBalanceCode=60]="invalidBalanceCode",n[n.cardNotAssociatedWithTheNetwork=61]="cardNotAssociatedWithTheNetwork",n[n.cardIsNotValid=62]="cardIsNotValid",n[n.currencyTypeIsNotAllowed=63]="currencyTypeIsNotAllowed",n[n.thereIsNoAuthorizationForACreditTypeInTheTransaction=64]="thereIsNoAuthorizationForACreditTypeInTheTransaction",n[n.invalidId=65]="invalidId",n[n.noTreatment=66]="noTreatment",n[n.terminalNotAuthorizedToWorkWithThisMethodTheTerminalIsNotAuthorized=67]="terminalNotAuthorizedToWorkWithThisMethodTheTerminalIsNotAuthorized",n[n.authenticationErrorTerminalReference=68]="authenticationErrorTerminalReference",n[n.exceedingTheNumberOfPayments=69]="exceedingTheNumberOfPayments",n[n.communicationError=70]="communicationError",n[n.canceledTransaction=71]="canceledTransaction",n[n.invalidToken=72]="invalidToken",n[n.terminalNotAuthorizedToUseTheToken=73]="terminalNotAuthorizedToUseTheToken",n[n.deferredCharge=74]="deferredCharge",n[n.approvalWithoutCharge=75]="approvalWithoutCharge",n[n.receivingTransactionDetails=76]="receivingTransactionDetails",n[n.theCardDetailsWereNotReadInFull=77]="theCardDetailsWereNotReadInFull",n[n.theAmountOfTheItemsDoesNotMatch=78]="theAmountOfTheItemsDoesNotMatch",n[n.YouMustEnterAFirstOrLastName=79]="YouMustEnterAFirstOrLastName",n[n.transactionDescriptionMustBeEntered=80]="transactionDescriptionMustBeEntered",n[n.youCanCreditTheEntireTransactionOrASmallAmount=81]="youCanCreditTheEntireTransactionOrASmallAmount",n[n.bigDiffrentBetweenLoginAndDelete=82]="bigDiffrentBetweenLoginAndDelete",n[n.providerNotAllowed=83]="providerNotAllowed",n[n.userDisable=84]="userDisable",n[n.providerAlreadyLinked=85]="providerAlreadyLinked",n[n.credentialAlreadyInUse=86]="credentialAlreadyInUse",n[n.accountAlreadyExists=87]="accountAlreadyExists",n[n.invalidCredential=88]="invalidCredential",n[n.userMissmatch=89]="userMissmatch",n[n.noSuchProvider=90]="noSuchProvider",n[n.duplicateBusinesssName=91]="duplicateBusinesssName",n[n.alreadyExistPhone=92]="alreadyExistPhone",n[n.userExitManually=93]="userExitManually",n[n.tooManyAttempts=94]="tooManyAttempts",n[n.expiredCode=95]="expiredCode",n[n.cantUpdateEmailTooShortTimeBetween=96]="cantUpdateEmailTooShortTimeBetween",n[n.cantUpdatePhonelTooShortTimeBetween=97]="cantUpdatePhonelTooShortTimeBetween",n[n.invalidPhoneNumber=98]="invalidPhoneNumber",n))(U||{});class Q{static _singleton=new Q;constructor(){}static GI(){return this._singleton}errorCode=100;error=U.unknown;details="";addError({code:e,error:t,details:r}){this.error=t||this.error,this.errorCode=e||this.errorCode,this.details=r||this.details}}class _r{code="";name="";symbol="";constructor({code:e="",name:t="",symbol:r=""}={}){this.code=e,this.name=t,this.symbol=r}static fromJson(e){return new _r({code:e.code||"",name:e.name||"",symbol:e.symbol||""})}toJson(){return{code:this.code,name:this.name,symbol:this.symbol}}isEqual(e){return e.code===this.code}toString(){return JSON.stringify(this.toJson(),null,2)}}const Dr=new _r({code:"USD",name:"US Dollar",symbol:"$"}),Vr=5;class je{static currentBusinesssId="";static hasPaddingFromTop=!1;static paddingFromTop=0;static attemptsLeftForCardPassword=Vr;static productionVersion=!0;static developers={}}class qt{static _singleton=new qt;constructor(){}static GI(){return qt._singleton}getLisksChildPath(e){const t=`${$e}/${je.currentBusinesssId}/${Mt}`,r=`${e}/${Os}`;return`${t}/${r}`}getImageStorageName(e,t){const r=e.toUpperCase(),i=t.split(r);return`${r}${i[1].split(".jpg")[0]}`}getLikesChildPath(e,t,r){const i=`${$e}/${t}/${Mt}`,s=`${e}/${Os}`;return`${i}/${s}/${r}`}getBusinessDataPath(e){return`${$e}/${e}/${Ss}`}getWorkerCountersPath(e,t){return`${$e}/${e}/${Mt}/${t}/${Rc}`}getMessageCounterPath(e){return`${$e}/${e}/${Ss}/messagesCounter`}userBookingsPathByBooking(e){return`${Qr}/${e.customerId}/${bt}/${pr}/${Bs}`}userBookingsPathByUser(e){return`${Qr}/${e}/${bt}/${pr}/${Bs}`}workerBookingsPath(e){return`${$e}/${e.buisnessId}/${Mt}/${e.workerId}/${bt}/${pr}/${Fc}`}}const Wc={0:"muslim",1:"christian",2:"jewish"},Hc={muslim:0,christian:1,jewish:2};var kt=(n=>(n[n.onHold=0]="onHold",n[n.needCancel=1]="needCancel",n[n.waitingList=2]="waitingList",n[n.withDebts=3]="withDebts",n[n.withOutRecipts=4]="withOutRecipts",n[n.withOnlinePayment=5]="withOnlinePayment",n[n.withoutConfirmArrival=6]="withoutConfirmArrival",n))(kt||{});const Ms={0:"waitingsForApproval",1:"waitingsForCancel",2:"waitingList",4:"withOutRecipts",3:"withDebts",5:"withOnlinePayment",6:"withoutConfirmArrival"};class me{id="";token="";constructor(e){e&&(this.id=e.I||"",this.token=e.T||"")}static fromShopIconUrl(e){const t=new me;try{const r=e.split("SHOPICON");t.id=r[1].split("?alt")[0];const i=e.split("&token=");return t.token=i[1],t}catch{return new me}}static fromJson(e){const t=new me;return t.id=e.I||"",t.token=e.T||"",t}static fromJsonStr(e){const t=JSON.parse(e),r=new me;return r.id=t.I||"",r.token=t.T||"",r}get isEmpty(){return this.token===""||this.id===""}get isNotEmpty(){return this.token!==""&&this.id!==""}isEqual(e){return e.id==this.id&&e.token==this.token}getShopIconPath(e){return this.token===""||this.id===""?"":`https://firebasestorage.googleapis.com/v0/b/managementsystemapp-c1fda.appspot.com/o/enviroments%2F${ne.replace("enviroments/","")}%2F${e}%2Fimages%2Flogos%2FSHOPICON${this.id}?alt=media&token=${this.token}`}toJsonStr(){const e={I:this.id,T:this.token};return JSON.stringify(e)}toJson(){return{I:this.id,T:this.token}}}class br{businessId="";shopIcon=new me;businessName="";constructor({businessId:e="",businessName:t="",shopIcon:r=new me}={}){this.businessId=e,this.shopIcon=r,this.businessName=t}static empty(){return new br}static fromJsonStr(e){const t=JSON.parse(e),r=br.empty();return r.businessId=t.businessId,r.businessName=t.businessName,t.shopIcon&&(r.shopIcon=me.fromJsonStr(t.shopIcon)),r}toJsonStr(){const e={businessId:this.businessId,shopIcon:this.shopIcon.toJsonStr(),businessName:this.businessName};return JSON.stringify(e)}}var Rt=(n=>(n[n.Barber=0]="Barber",n[n.Polish=1]="Polish",n[n.Beautician=2]="Beautician",n[n.ManicurePedicure=3]="ManicurePedicure",n[n.Eyelashes=4]="Eyelashes",n[n.Eyebrows=5]="Eyebrows",n[n.Braids=6]="Braids",n[n.MakeUpArtist=7]="MakeUpArtist",n[n.TattooArtist=8]="TattooArtist",n[n.HairRemoval=9]="HairRemoval",n[n.Masseur=10]="Masseur",n[n.Physiotherapy=11]="Physiotherapy",n[n.Cobblers=12]="Cobblers",n[n.Clown=13]="Clown",n[n.SocialWorker=14]="SocialWorker",n[n.Magician=15]="Magician",n[n.Doctor=16]="Doctor",n[n.Veterinarian=17]="Veterinarian",n[n.CommunicationTherapist=18]="CommunicationTherapist",n[n.DogGroomer=19]="DogGroomer",n[n.DJ=20]="DJ",n[n.Psychologist=21]="Psychologist",n[n.Tutor=22]="Tutor",n[n.WeddingDresses=23]="WeddingDresses",n[n.DanceTeacher=24]="DanceTeacher",n[n.Babysitter=25]="Babysitter",n[n.Reflexologist=26]="Reflexologist",n[n.Dietitian=27]="Dietitian",n[n.CarWash=28]="CarWash",n[n.Photographer=29]="Photographer",n[n.SwimmingTeacher=30]="SwimmingTeacher",n[n.Counselor=31]="Counselor",n[n.Mentor=32]="Mentor",n[n.TennisCoach=33]="TennisCoach",n[n.PrivateChef=34]="PrivateChef",n[n.PersonalTrainer=35]="PersonalTrainer",n[n.Lawyer=36]="Lawyer",n[n.Sales=37]="Sales",n[n.RealEstate=38]="RealEstate",n[n.DrivingTeacher=39]="DrivingTeacher",n[n.InvestmentAdvice=40]="InvestmentAdvice",n[n.Library=41]="Library",n[n.Tailor=42]="Tailor",n[n.Restaurant=43]="Restaurant",n[n.NailConstruction=44]="NailConstruction",n[n.Dentist=45]="Dentist",n[n.BeautysSalon=46]="BeautysSalon",n[n.Washer=47]="Washer",n[n.CleaningSofas=48]="CleaningSofas",n[n.Other=49]="Other",n))(Rt||{});const Vc={0:"barber",1:"polish",48:"cleaningSofas",2:"beautician",3:"manicurePedicure",4:"eyelashes",5:"eyebrows",25:"babysitter",6:"braids",7:"makeUpArtist",8:"tattooArtist",9:"hairRemoval",10:"masseur",12:"cobblers",13:"clown",14:"socialWorker",15:"magician",16:"doctor",20:"dj",17:"veterinarian",18:"communicationTherapist",19:"dogGroomer",21:"psychologist",11:"physiotherapy",22:"Tutor",23:"weddingDresses",24:"danceTeacher",26:"reflexologist",27:"dietitian",28:"carWash",29:"photographer",30:"swimmingTeacher",31:"counselor",32:"mentor",33:"tennisCoach",34:"privateChef",35:"personalTrainer",36:"lawyer",37:"sales",38:"realEstate",39:"drivingTeacher",40:"investmentAdvice",41:"library",49:"other",42:"tailor",43:"restaurant",44:"nailConstruction",45:"dentist",46:"beautysSalon",47:"washer"},xo={barber:0,cleaningSofas:48,polish:1,beautician:2,manicurePedicure:3,eyelashes:4,eyebrows:5,babysitter:25,braids:6,makeUpArtist:7,tattooArtist:8,hairRemoval:9,masseur:10,cobblers:12,clown:13,socialWorker:14,magician:15,doctor:16,veterinarian:17,communicationTherapist:18,dogGroomer:19,psychologist:21,physiotherapy:11,Tutor:22,weddingDresses:23,danceTeacher:24,reflexologist:26,dietitian:27,carWash:28,photographer:29,swimmingTeacher:30,counselor:31,mentor:32,dj:20,tennisCoach:33,privateChef:34,personalTrainer:35,lawyer:36,sales:37,realEstate:38,drivingTeacher:39,investmentAdvice:40,library:41,other:49,restaurant:43,tailor:42,nailConstruction:44,dentist:45,beautysSalon:46,washer:47},$c={noPayNoPayment:0,noPayNoPaymentWithReceipts:1,pay100For30WithReceipts:2,pay70For700Actiions:3},qc=15,zc=20,Gc={simpletor_golden_business_month_1:1e3,simpletor_advanced_business_month_1:200,simpletor_basic_business_month_1:0,simpletor_landing_business_month_1:0},Yc={simpletor_golden_business_month_1:100,simpletor_advanced_business_month_1:20,simpletor_basic_business_month_1:10,simpletor_landing_business_month_1:10};class Xr{messagesCounter=0;paymentRequestCounter=0;listener;constructor(e=0,t=0){this.messagesCounter=e,this.paymentRequestCounter=t}static forNewBusiness(){return new Xr(zc,qc)}static fromProductId(e){return new Xr(Gc[e]||0,Yc[e]||0)}setBusinessData(e){this.messagesCounter=parseInt(e.val().messagesCounter.toString())||0,this.paymentRequestCounter=parseInt(e.val().paymentRequestCounter.toString())||0}toJson(){const e={};return e.messagesCounter=this.messagesCounter,e.paymentRequestCounter=this.paymentRequestCounter,e}}function Jc(n){const e=n.toString(),t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),i=parseInt(e.substr(4,2),16);return(t*299+r*587+i*114)/1e3>155}function Rs(n,e){if(n===null)return e===null;if(e===null||n.size!==e.size)return!1;if(n===e)return!0;for(const t of n)if(!e.has(t))return!1;return!0}async function Xm(){return!0}var Pi=(n=>(n[n.light=0]="light",n[n.dark=1]="dark",n))(Pi||{});class Ye{background=0;primary=0;surface=0;inverseSurface=0;tertiary=0;id="";fontName="";themeName="";constructor({background:e=0,primary:t=0,surface:r=0,inverseSurface:i=0,tertiary:s=0,id:a,fontName:c="",themeName:o=""}){this.background=e,this.primary=t,this.surface=r,this.inverseSurface=i,this.tertiary=s,this.id=a,this.fontName=c,this.themeName=o}static fromJson(e,t){return new Ye({background:e.background||0,primary:e.primary||0,id:t,themeName:e.themeName||"",surface:e.surface||0,tertiary:e.tertiary||0,inverseSurface:e.inverseSurface||0,fontName:e.fontName||""})}static fromBusinessTheme(e){return new Ye({themeName:e.themeName,background:e.background,primary:e.primary,tertiary:e.tertiary,id:e.id,surface:e.surface,inverseSurface:e.inverseSurface,fontName:e.fontName})}isEqual(e,t=!0){const r=e.toJson();t&&(r.id=e.id);const i=this.toJson();return t&&(i.id=this.id),JSON.stringify(r)===JSON.stringify(i)}get brightness(){return Jc(this.background)?1:0}toJson(){const e={};return this.fontName!==""&&(e.fontName=this.fontName),this.surface!==0&&(e.surface=this.surface),this.inverseSurface!==0&&(e.inverseSurface=this.inverseSurface),e.tertiary=this.tertiary,e.themeName=this.themeName,this.background!==0&&(e.background=this.background),this.primary!==0&&(e.primary=this.primary),e}}var Ve=(n=>(n[n.Grid=0]="Grid",n[n.Carousel=1]="Carousel",n[n.EndlessCarousel=2]="EndlessCarousel",n))(Ve||{});const Ls={0:"grid",1:"carousel",2:"endlessCarousel"},Us={grid:0,carousel:1,endlessCarousel:2},vo={dark:new Ye({fontName:"Varela Round",themeName:"Original",id:"dark",inverseSurface:4279637532,background:4280229673,surface:4280690225,tertiary:4279834916,primary:4294940672}),darkIos:new Ye({fontName:"Varela Round",themeName:"Dark",id:"darkIos",inverseSurface:4281084974,background:4279637528,surface:4280361252,tertiary:4278190080,primary:4278225100}),light:new Ye({fontName:"Varela Round",themeName:"Pink",id:"light",inverseSurface:4294831859,background:4294375158,surface:4294967295,tertiary:4294243315,primary:4294936498}),lightIos:new Ye({fontName:"Varela Round",themeName:"Light",id:"lightIos",inverseSurface:4292664541,background:4294111991,surface:4294967295,tertiary:4293322471,primary:4278221567})};class Me{amount=0;currency=Dr;constructor({amount:e,currency:t}){const r=parseFloat(e)||0;this.amount=parseFloat(r.toFixed(2)),this.currency=t}static fromJson(e){const t=new Me({amount:"0.0",currency:_r.fromJson(e.currency)});return e.amount!=null&&(t.amount=typeof e.amount=="number"?e.amount:parseFloat(e.amount)),t}add(e){e.currency.code===this.currency.code&&(this.amount+=e.amount)}isEqual(e){return this.amount===e.amount&&this.currency.code===e.currency.code}toString(){return new Intl.NumberFormat("en-US",{style:"currency",currency:this.currency.code}).format(this.amount)}toJson(){return{amount:this.amount,currency:this.currency.toJson()}}}class zt{description="";price;imageUrl="";id="";name="";createdAt=new Date;constructor({name:e="",description:t="",id:r="",price:i,imageUrl:s=""}={}){this.name=e||"",this.description=t||"",this.id=r||"",this.price=i,this.imageUrl=s||""}static fromProduct(e){const t=new zt({id:e.id,description:e.description,price:e.price,imageUrl:e.imageUrl,name:e.name});return t.createdAt=e.createdAt,t}static fromJson(e,t){const r=new zt({id:t,description:e.description,price:Me.fromJson(e.price),imageUrl:e.imageUrl,name:e.name});return r.createdAt=e.createdAt,r}toJson(){return{description:this.description,price:this.price?this.price.toJson():null,imageUrl:this.imageUrl,name:this.name,createdAt:this.createdAt}}toString(){return JSON.stringify(this.toJson())}}class Gt{title="";content="";lastModified="";index="";id="";popOnEnter=!1;constructor(e,t,r,i,s,a=!1){this.title=e,this.content=t,this.id=r,this.lastModified=i,this.index=s,this.popOnEnter=a}static fromJson(e,t){return new Gt(e.title??"",e.content??"",e.id??"",e.lastModified??"",t,e.popOnEnter??!1)}static fromUpdate(e){return new Gt(e.title,e.content,e.id,e.lastModified,e.index,e.popOnEnter)}toJson(){const e={};return e.title=this.title,e.id=this.id,e.content=this.content,this.lastModified!==""&&(e.lastModified=this.lastModified),this.popOnEnter&&(e.popOnEnter=this.popOnEnter),e}isValid(){return this.title!==""&&this.content!==""}toString(){return JSON.stringify(this,null,2)}}class Je{storyView=Ve.Grid;productView=Ve.Grid;changingImages=[];products=new Map;updates=new Map;storyTitle="";shopIconUrl="";productsTitle="";bottomIcons=!1;changingImagesSwapSeconds=6;pickedThemeKey="darkIos";lastTimeToUpdateTerm=new Date(0);businessThemes=new Map;term="";mustConfirmTerm=!1;popTermOnFirstEneter=!1;isPrivateTheme=!1;constructor({storyView:e=Ve.Grid,productView:t=Ve.Grid,changingImagesSwapSeconds:r=6,shopIconUrl:i="",pickedThemeKey:s="darkIos"}={}){this.changingImagesSwapSeconds=r,this.shopIconUrl=i,this.pickedThemeKey=s}static fromJson(e){const t=new Je;return Object.entries(e.products).forEach(([r,i])=>{t.products.set(r,zt.fromJson(i,r))}),e.changingImages&&(t.changingImages=e.changingImages.map(r=>r)),e.updates&&Object.entries(e.updates).forEach(([r,i])=>{t.updates.set(r,Gt.fromJson(i,r))}),e.storyView&&(t.storyView=Us[e.storyView]||Ve.EndlessCarousel),e.productView&&(t.productView=Us[e.productView]||Ve.Grid),e.businessThemes&&Object.entries(e.businessThemes).forEach(([r,i])=>{t.businessThemes.set(r,Ye.fromJson(i,r))}),e.lastTimeToUpdateTerm&&(t.lastTimeToUpdateTerm=new Date(e.lastTimeToUpdateTerm)||new Date(0)),t.pickedThemeKey=e.pickedThemeKey||"darkIoss",t.term=e.term||"",t.bottomIcons=e.bottomIcons||!1,t.changingImagesSwapSeconds=e.changingImagesSwapSeconds||6,t.productsTitle=e.productsTitle||"",t.storyTitle=e.storyTitle||"",t.shopIconUrl=e.shopIcon||"",t.mustConfirmTerm=e.mustConfirmTerm||!1,t.popTermOnFirstEneter=e.popTermOnFirstEneter||!1,t.isPrivateTheme=e.isPrivateTheme||!1,t}get shopIconData(){return me.fromShopIconUrl(this.shopIconUrl)}static fromBusinessDesign(e){const t=new Je;return e.products.forEach((r,i)=>{t.products.set(i,zt.fromProduct(r))}),t.changingImages=[...e.changingImages],e.updates.forEach((r,i)=>{t.updates.set(i,Gt.fromUpdate(r))}),t.storyView=e.storyView,e.businessThemes.forEach((r,i)=>{t.businessThemes.set(i,Ye.fromBusinessTheme(r))}),t.shopIconUrl=e.shopIconUrl,t.pickedThemeKey=e.pickedThemeKey,t.lastTimeToUpdateTerm=e.lastTimeToUpdateTerm,t.changingImagesSwapSeconds=e.changingImagesSwapSeconds,t.term=e.term,t.bottomIcons=e.bottomIcons,t.productsTitle=e.productsTitle,t.productView=e.productView,t.storyTitle=e.storyTitle,t.mustConfirmTerm=e.mustConfirmTerm,t.popTermOnFirstEneter=e.popTermOnFirstEneter,t.isPrivateTheme=e.isPrivateTheme,t}toJson(){const e={};return this.storyView!==Ve.EndlessCarousel&&(e.storyView=Ls[this.storyView]),this.productView!==Ve.Grid&&(e.productView=Ls[this.storyView]),e.changingImages=this.changingImages,e.products={},this.products.forEach((t,r)=>{e.products[r]=t.toJson()}),e.updates={},this.updates.forEach((t,r)=>{e.updates[r]=t.toJson()}),this.mustConfirmTerm&&(e.mustConfirmTerm=this.mustConfirmTerm),this.popTermOnFirstEneter&&(e.popTermOnFirstEneter=this.popTermOnFirstEneter),this.term!==""&&(e.term=this.term),this.lastTimeToUpdateTerm!==new Date(0)&&(e.lastTimeToUpdateTerm=this.lastTimeToUpdateTerm.toISOString()),e.bottomIcons=this.bottomIcons,e.changingImagesSwapSeconds=this.changingImagesSwapSeconds,e.storyTitle=this.storyTitle,e.productsTitle=this.productsTitle,e.businessThemes={},this.businessThemes.forEach((t,r)=>{vo.hasOwnProperty(r)||(e.businessThemes[r]=t.toJson())}),e.pickedThemeKey=this.pickedThemeKey,e.shopIcon=this.shopIconUrl,e.isPrivateTheme=this.isPrivateTheme,e}}class Et{businesseType=Rt.Other;currency=Dr;notifyOnNewCustomer=!0;searchable=!0;billingIssue=new Map;isLandingPageMode=!1;allWorkersIds=new Map;workersIds=new Map;hypPath;expiredDate=new Date;shopPhone="";ownersName="";companyNumber="";ownersPhone="";masofNumber="";previewDoc="";instagramAccount="";revenueCatId="";pendingWorkersProductsId="";adress="";workersProductsId="";pendingProductId="";dynamicLink="";shopName="";productId="";businessId="";createdAt=new Date;blockedUsersTemp=new Map;lastTimeConnected=new Date;businessData=new Xr;design=new Je;constructor({shopName:e="",businessId:t,productId:r="",adress:i="",dynamicLink:s="",revenueCatId:a="",ownersName:c="",instagramAccount:o="",shopPhone:u="",design:h}){this.shopName=e,this.businessId=t,this.productId=r,this.adress=i,this.dynamicLink=s,this.revenueCatId=a,this.ownersName=c,this.instagramAccount=o,this.shopPhone=u,this.design=h}static empty(){return new Et({design:new Je,businessId:""})}get businessPayLoadData(){return new br({businessId:this.businessId,businessName:this.shopName,shopIcon:this.design.shopIconData})}static fromJson(e,t){const r=new Et({businessId:t,design:new Je});return r.setData(e,t),r}setData(e,t){if(this.businessId=t,e.currency&&(this.currency=_r.fromJson(e.currency)),e.design)this.design=Je.fromJson(e.design);else{const i=e.theme;this.design.pickedThemeKey=i,Object.entries(e.products).forEach(([s,a])=>{this.design.products.set(s,zt.fromJson(a,s))}),e.changingImages&&(this.design.changingImages=e.changingImages.map(s=>s)),e.updates&&e.updates.forEach((s,a)=>{this.design.updates.set(a.toString(),Gt.fromJson(s,a.toString()))}),this.design.bottomIcons=e.bottomIcons??!1,this.design.storyTitle=e.storyTitle??"",this.design.changingImagesSwapSeconds=e.changingImagesSwapSeconds??6,this.design.shopIconUrl=e.shopIcon??""}this.previewDoc=e.previewDoc??"",this.workersProductsId=e.workersProductsId??"",this.pendingWorkersProductsId=e.pendingWorkersProductsId??"",this.shopName=e.shopName??"",this.isLandingPageMode=e.isLandingPageMode??!1,this.searchable=e.searchable??!0,e.expiredDate!=null&&(this.expiredDate=new Date(e.expiredDate)),this.notifyOnNewCustomer=e.notifyOnNewCustomer??!0,this.companyNumber=e.companyNumber??"",e.hypPath!=null&&(this.hypPath=$c[e.hypPath]),this.allWorkersIds=new Map,e.allWorkersIds!=null&&Object.entries(e.allWorkersIds).forEach(([i,s])=>{this.allWorkersIds.set(i,s)});const r=this.businessId.split("--")[0];this.allWorkersIds.hasOwnProperty("+"+r)||this.allWorkersIds.set("+"+r,""),this.workersIds=new Map,e.workersIds!=null&&Object.entries(e.workersIds).forEach(([i,s])=>{this.workersIds.set(i,s)}),this.workersIds.hasOwnProperty(r)||this.workersIds.set(r,""),this.dynamicLink=e.dynamicLink??"",this.masofNumber=e.masofNumber??"",this.ownersName=e.ownersName??"",this.revenueCatId=e.revenueCatId??"",this.productId=e.productId??"",this.pendingProductId=e.pendingProductId??"",this.businesseType=xo[e.businesseType]??Rt.Other,this.instagramAccount=e.instagramAccount??"",this.adress=e.adress??"",this.shopPhone=e.shopPhone??"";try{e.billingIssue!=null&&Object.entries(e.billingIssue).forEach(([i,s])=>{this.billingIssue.set(i,s.toDate())})}catch{}e.createdAt instanceof lt?this.createdAt=e.createdAt.toDate():typeof e.createdAt=="string"&&(this.createdAt=new Date(e.createdAt)||new Date),e.lastTimeConnected!=null&&(this.lastTimeConnected=new Date(e.lastTimeConnected)||new Date)}toJson(){const e={};return e.notifyOnNewCustomer=this.notifyOnNewCustomer,e.currency=this.currency.toJson(),e.searchable=this.searchable,e.workersProductsId=this.workersProductsId,e.pendingWorkersProductsId=this.pendingWorkersProductsId,e.previewDoc=this.previewDoc,e.masofNumber=this.masofNumber,e.revenueCatId=this.revenueCatId,e.pendingProductId=this.pendingProductId,e.productId=this.productId,e.shopName=this.shopName,this.hypPath&&(e.hypPath=this.hypPath),this.billingIssue.size>0&&(e.billingIssue={},this.billingIssue.forEach((t,r)=>{e.billingIssue[r]=lt.fromDate(t)})),this.dynamicLink!==""&&(e.dynamicLink=this.dynamicLink),e.companyNumber=this.companyNumber,e.expiredDate=this.expiredDate,e.businesseType=this.businesseType,e.ownersName=this.ownersName,e.instagramAccount=this.instagramAccount,e.adress=this.adress,e.shopPhone=this.shopPhone,e.workersIds=this.workersIds,e.createdAt=this.createdAt,e.lastTimeConnected=this.lastTimeConnected,this.isLandingPageMode&&(e.isLandingPageMode=this.isLandingPageMode),e.design=this.design.toJson(),e}toString(){return JSON.stringify(this.toJson())}}class F{static microsecondsPerMillisecond=1e3;static millisecondsPerSecond=1e3;static secondsPerMinute=60;static minutesPerHour=60;static hoursPerDay=24;static microsecondsPerSecond=F.microsecondsPerMillisecond*F.millisecondsPerSecond;static microsecondsPerMinute=F.microsecondsPerSecond*F.secondsPerMinute;static microsecondsPerHour=F.microsecondsPerMinute*F.minutesPerHour;static microsecondsPerDay=F.microsecondsPerHour*F.hoursPerDay;static millisecondsPerMinute=F.millisecondsPerSecond*F.secondsPerMinute;static millisecondsPerHour=F.millisecondsPerMinute*F.minutesPerHour;static millisecondsPerDay=F.millisecondsPerHour*F.hoursPerDay;static secondsPerHour=F.secondsPerMinute*F.minutesPerHour;static secondsPerDay=F.secondsPerHour*F.hoursPerDay;static minutesPerDay=F.minutesPerHour*F.hoursPerDay;static zero=new F({seconds:0});_duration;days=0;hours=0;minutes=0;seconds=0;milliseconds=0;microseconds=0;constructor({days:e=0,hours:t=0,minutes:r=0,seconds:i=0,milliseconds:s=0,microseconds:a=0}){this._duration=a+F.microsecondsPerMillisecond*s+F.microsecondsPerSecond*i+F.microsecondsPerMinute*r+F.microsecondsPerHour*t+F.microsecondsPerDay*e}static _microseconds(e){return new F({microseconds:e})}add(e){return F._microseconds(this._duration+e._duration)}subtract(e){return F._microseconds(this._duration-e._duration)}multiply(e){return F._microseconds(Math.round(this._duration*e))}divide(e){if(e===0)throw new Error("IntegerDivisionByZeroException");return F._microseconds(Math.floor(this._duration/e))}lessThan(e){return this._duration<e._duration}greaterThan(e){return this._duration>e._duration}lessThanOrEqual(e){return this._duration<=e._duration}greaterThanOrEqual(e){return this._duration>=e._duration}get inDays(){return Math.floor(this._duration/F.microsecondsPerDay)}get inHours(){return Math.floor(this._duration/F.microsecondsPerHour)}get inMinutes(){return Math.floor(this._duration/F.microsecondsPerMinute)}get inSeconds(){return Math.floor(this._duration/F.microsecondsPerSecond)}get inMilliseconds(){return Math.floor(this._duration)}get inMicroseconds(){return this._duration}equals(e){return e instanceof F&&this._duration===e.inMicroseconds}compareTo(e){return this._duration-e._duration}}var fe=(n=>(n.waiting="waiting",n.approved="approved",n))(fe||{});const wo={waiting:"waiting",approved:"approved"},yo={waiting:"waiting",approved:"approved"};var Ie=(n=>(n.app="app",n.web="web",n.byWorker="byWorker",n))(Ie||{});const Do={app:"app",web:"web",byWorker:"byWorker"},bo={app:"app",web:"web",byWorker:"byWorker"};var pe=(n=>(n.regular="regular",n.confirmArrival="confirmArrival",n))(pe||{});const $r={regular:"regular",confirmArrival:"confirmArrival"},yt={regular:"regular",confirmArrival:"confirmArrival"};var L=(n=>(n[n.message=0]="message",n[n.push=1]="push",n[n.none=2]="none",n[n.whatsapp=3]="whatsapp",n))(L||{});const Kc={0:"message",1:"push",2:"none",3:"whatsapp"},ko={message:0,push:1,whatsapp:3,none:2},Ws=new F({hours:3});new F({minutes:5});var z=(n=>(n[n.male=0]="male",n[n.female=1]="female",n[n.anonymous=2]="anonymous",n))(z||{});const Yt={0:"male",1:"female",2:"anonymous"},et={male:0,female:1,anonymous:2};var j=(n=>(n[n.SMS=0]="SMS",n[n.SMSOrPush=1]="SMSOrPush",n[n.WhatsAppOrPush=2]="WhatsAppOrPush",n[n.WhatsApp=3]="WhatsApp",n[n.SMSOnly=4]="SMSOnly",n[n.WhatAppOnly=5]="WhatAppOnly",n[n.Push=6]="Push",n[n.PushOrWhatsApp=7]="PushOrWhatsApp",n[n.PushOrSMS=8]="PushOrSMS",n[n.OnlyPush=9]="OnlyPush",n))(j||{});const Qc={0:"SMS",4:"SMSOnly",5:"WhatAppOnly",1:"SMSOrPush",2:"WhatsAppOrPush",3:"WhatsApp",9:"OnlyPush",7:"PushOrWhatsApp",8:"PushOrSMS",6:"Push"},pn={SMS:0,SMSOrPush:1,WhatAppOnly:5,SMSOnly:4,WhatsAppOrPush:2,WhatsApp:3,OnlyPush:9,PushOrWhatsApp:7,PushOrSMS:8,Push:6},Xc=/^[a-zA-Z0-9-_.~%]{1,900}$/;var qr=(n=>(n[n.shortestTreatment=0]="shortestTreatment",n[n.longestTreatment=1]="longestTreatment",n[n.custom=2]="custom",n[n.first=3]="first",n[n.last=4]="last",n[n.edges=5]="edges",n))(qr||{});const Zc={3:"first",4:"last",5:"edges",0:"shortestTreatment",1:"longestTreatment",2:"custom"},jc={first:3,last:4,edges:5,shortestTreatment:0,longestTreatment:1,custom:2};function Co(n,e,t,r){const i=t<n&&!(r>n),s=!(t<e)&&r>e;return i?"BEFORE":s?"AFTER":"STRIKE"}function ae(n,e){return new Date(n.getTime()+e.inMilliseconds)}function Dt(n,e){return new Date(n.getTime()-e.inMilliseconds)}function Bn(n,e){return new F({milliseconds:new Date(n.getTime()-e.getTime()).getTime()})}class Ao{start;end;constructor({start:e,end:t}){this.start=e,this.end=t}}function he(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function ie(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Io(n,e){const t=he(n);return isNaN(e)?ie(n,NaN):(e&&t.setDate(t.getDate()+e),t)}const Eo=6048e5,eu=864e5,tu=6e4,ru=36e5,nu=1e3;let iu={};function er(){return iu}function dt(n,e){const t=er(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=he(n),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Jt(n){return dt(n,{weekStartsOn:1})}function To(n){const e=he(n),t=e.getFullYear(),r=ie(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=Jt(r),s=ie(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const a=Jt(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Hs(n){const e=he(n);return e.setHours(0,0,0,0),e}function Zr(n){const e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function su(n,e){const t=Hs(n),r=Hs(e),i=t.getTime()-Zr(t),s=r.getTime()-Zr(r);return Math.round((i-s)/eu)}function au(n){const e=To(n),t=ie(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Jt(t)}function ou(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function cu(n){if(!ou(n)&&typeof n!="number")return!1;const e=he(n);return!isNaN(Number(e))}function uu(n){const e=he(n),t=ie(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const hu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lu=(n,e,t)=>{let r;const i=hu[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function On(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const du={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fu={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mu={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pu={date:On({formats:du,defaultWidth:"full"}),time:On({formats:fu,defaultWidth:"full"}),dateTime:On({formats:mu,defaultWidth:"full"})},gu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},xu=(n,e,t,r)=>gu[n];function lr(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,c=t?.width?String(t.width):a;i=n.formattingValues[c]||n.formattingValues[a]}else{const a=n.defaultWidth,c=t?.width?String(t.width):n.defaultWidth;i=n.values[c]||n.values[a]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const vu={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wu={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yu={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Du={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ku={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Cu=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Au={ordinalNumber:Cu,era:lr({values:vu,defaultWidth:"wide"}),quarter:lr({values:wu,defaultWidth:"wide",argumentCallback:n=>n-1}),month:lr({values:yu,defaultWidth:"wide"}),day:lr({values:Du,defaultWidth:"wide"}),dayPeriod:lr({values:bu,defaultWidth:"wide",formattingValues:ku,defaultFormattingWidth:"wide"})};function dr(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],c=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],o=Array.isArray(c)?Eu(c,d=>d.test(a)):Iu(c,d=>d.test(a));let u;u=n.valueCallback?n.valueCallback(o):o,u=t.valueCallback?t.valueCallback(u):u;const h=e.slice(a.length);return{value:u,rest:h}}}function Iu(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Eu(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Tu(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;const c=e.slice(i.length);return{value:a,rest:c}}}const Pu=/^(\d+)(th|st|nd|rd)?/i,_u=/\d+/i,Bu={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ou={any:[/^b/i,/^(a|c)/i]},Su={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Fu={any:[/1/i,/2/i,/3/i,/4/i]},Nu={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Mu={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ru={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Lu={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Uu={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Wu={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Hu={ordinalNumber:Tu({matchPattern:Pu,parsePattern:_u,valueCallback:n=>parseInt(n,10)}),era:dr({matchPatterns:Bu,defaultMatchWidth:"wide",parsePatterns:Ou,defaultParseWidth:"any"}),quarter:dr({matchPatterns:Su,defaultMatchWidth:"wide",parsePatterns:Fu,defaultParseWidth:"any",valueCallback:n=>n+1}),month:dr({matchPatterns:Nu,defaultMatchWidth:"wide",parsePatterns:Mu,defaultParseWidth:"any"}),day:dr({matchPatterns:Ru,defaultMatchWidth:"wide",parsePatterns:Lu,defaultParseWidth:"any"}),dayPeriod:dr({matchPatterns:Uu,defaultMatchWidth:"any",parsePatterns:Wu,defaultParseWidth:"any"})},Po={code:"en-US",formatDistance:lu,formatLong:pu,formatRelative:xu,localize:Au,match:Hu,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Vu(n){const e=he(n);return su(e,uu(e))+1}function _o(n){const e=he(n),t=Jt(e).getTime()-au(e).getTime();return Math.round(t/Eo)+1}function qi(n,e){const t=he(n),r=t.getFullYear(),i=er(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=ie(n,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const c=dt(a,e),o=ie(n,0);o.setFullYear(r,0,s),o.setHours(0,0,0,0);const u=dt(o,e);return t.getTime()>=c.getTime()?r+1:t.getTime()>=u.getTime()?r:r-1}function $u(n,e){const t=er(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=qi(n,e),s=ie(n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),dt(s,e)}function Bo(n,e){const t=he(n),r=dt(t,e).getTime()-$u(t,e).getTime();return Math.round(r/Eo)+1}function J(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const at={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return J(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):J(t+1,2)},d(n,e){return J(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return J(n.getHours()%12||12,e.length)},H(n,e){return J(n.getHours(),e.length)},m(n,e){return J(n.getMinutes(),e.length)},s(n,e){return J(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.floor(r*Math.pow(10,t-3));return J(i,e.length)}},St={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qu={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return at.y(n,e)},Y:function(n,e,t,r){const i=qi(n,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return J(a,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):J(s,e.length)},R:function(n,e){const t=To(n);return J(t,e.length)},u:function(n,e){const t=n.getFullYear();return J(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return J(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return J(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return at.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return J(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=Bo(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):J(i,e.length)},I:function(n,e,t){const r=_o(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):J(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):at.d(n,e)},D:function(n,e,t){const r=Vu(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):J(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return J(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return J(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return J(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=St.noon:r===0?i=St.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=St.evening:r>=12?i=St.afternoon:r>=4?i=St.morning:i=St.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return at.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):at.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):J(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):J(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):at.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):at.s(n,e)},S:function(n,e){return at.S(n,e)},X:function(n,e,t,r){const s=(r._originalDate||n).getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return $s(s);case"XXXX":case"XX":return xt(s);case"XXXXX":case"XXX":default:return xt(s,":")}},x:function(n,e,t,r){const s=(r._originalDate||n).getTimezoneOffset();switch(e){case"x":return $s(s);case"xxxx":case"xx":return xt(s);case"xxxxx":case"xxx":default:return xt(s,":")}},O:function(n,e,t,r){const s=(r._originalDate||n).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Vs(s,":");case"OOOO":default:return"GMT"+xt(s,":")}},z:function(n,e,t,r){const s=(r._originalDate||n).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Vs(s,":");case"zzzz":default:return"GMT"+xt(s,":")}},t:function(n,e,t,r){const i=r._originalDate||n,s=Math.floor(i.getTime()/1e3);return J(s,e.length)},T:function(n,e,t,r){const s=(r._originalDate||n).getTime();return J(s,e.length)}};function Vs(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+J(s,2)}function $s(n,e){return n%60===0?(n>0?"-":"+")+J(Math.abs(n)/60,2):xt(n,e)}function xt(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=J(Math.floor(r/60),2),s=J(r%60,2);return t+i+e+s}const qs=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Oo=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},zu=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return qs(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",qs(r,e)).replace("{{time}}",Oo(i,e))},_i={p:Oo,P:zu},Gu=/^D+$/,Yu=/^Y+$/,Ju=["D","DD","YY","YYYY"];function So(n){return Gu.test(n)}function Fo(n){return Yu.test(n)}function jr(n,e,t){const r=Ku(n,e,t);if(console.warn(r),Ju.includes(n))throw new RangeError(r)}function Ku(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Qu=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zu=/^'([^]*?)'?$/,ju=/''/g,eh=/[a-zA-Z]/;function Oe(n,e,t){const r=er(),i=t?.locale??r.locale??Po,s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=he(n);if(!cu(c))throw new RangeError("Invalid time value");const o={firstWeekContainsDate:s,weekStartsOn:a,locale:i,_originalDate:c};return e.match(Xu).map(function(h){const d=h[0];if(d==="p"||d==="P"){const l=_i[d];return l(h,i.formatLong)}return h}).join("").match(Qu).map(function(h){if(h==="''")return"'";const d=h[0];if(d==="'")return th(h);const l=qu[d];if(l)return!t?.useAdditionalWeekYearTokens&&Fo(h)&&jr(h,e,String(n)),!t?.useAdditionalDayOfYearTokens&&So(h)&&jr(h,e,String(n)),l(c,h,i.localize,o);if(d.match(eh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return h}).join("")}function th(n){const e=n.match(Zu);return e?e[1].replace(ju,"'"):n}function rh(){return Object.assign({},er())}function nh(n){let t=he(n).getDay();return t===0&&(t=7),t}function ih(n,e){const t=e instanceof Date?ie(e,0):new e(0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}const sh=10;class No{subPriority=0;validate(e,t){return!0}}class ah extends No{constructor(e,t,r,i,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class oh extends No{priority=sh;subPriority=-1;set(e,t){return t.timestampIsSet?e:ie(e,ih(e,Date))}}class G{run(e,t,r,i){const s=this.parse(e,t,r,i);return s?{setter:new ah(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}class ch extends G{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const ce={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Fe={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ue(n,e){return n&&{value:e(n.value),rest:n.rest}}function re(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Ne(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(i*ru+s*tu+a*nu),rest:e.slice(t[0].length)}}function Mo(n){return re(ce.anyDigitsSigned,n)}function se(n,e){switch(n){case 1:return re(ce.singleDigit,e);case 2:return re(ce.twoDigits,e);case 3:return re(ce.threeDigits,e);case 4:return re(ce.fourDigits,e);default:return re(new RegExp("^\\d{1,"+n+"}"),e)}}function en(n,e){switch(n){case 1:return re(ce.singleDigitSigned,e);case 2:return re(ce.twoDigitsSigned,e);case 3:return re(ce.threeDigitsSigned,e);case 4:return re(ce.fourDigitsSigned,e);default:return re(new RegExp("^-?\\d{1,"+n+"}"),e)}}function zi(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Ro(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const s=r+50,a=Math.floor(s/100)*100,c=n>=s%100;i=n+a-(c?100:0)}return t?i:1-i}function Lo(n){return n%400===0||n%4===0&&n%100!==0}class uh extends G{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const i=s=>({year:s,isTwoDigitYear:t==="yy"});switch(t){case"y":return ue(se(4,e),i);case"yo":return ue(r.ordinalNumber(e,{unit:"year"}),i);default:return ue(se(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const i=e.getFullYear();if(r.isTwoDigitYear){const a=Ro(r.year,i);return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}const s=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}class hh extends G{priority=130;parse(e,t,r){const i=s=>({year:s,isTwoDigitYear:t==="YY"});switch(t){case"Y":return ue(se(4,e),i);case"Yo":return ue(r.ordinalNumber(e,{unit:"year"}),i);default:return ue(se(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,i){const s=qi(e,i);if(r.isTwoDigitYear){const c=Ro(r.year,s);return e.setFullYear(c,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),dt(e,i)}const a=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(a,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),dt(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class lh extends G{priority=130;parse(e,t){return en(t==="R"?4:t.length,e)}set(e,t,r){const i=ie(e,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),Jt(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class dh extends G{priority=130;parse(e,t){return en(t==="u"?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class fh extends G{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return se(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class mh extends G{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return se(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class ph extends G{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const i=s=>s-1;switch(t){case"M":return ue(re(ce.month,e),i);case"MM":return ue(se(2,e),i);case"Mo":return ue(r.ordinalNumber(e,{unit:"month"}),i);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class gh extends G{priority=110;parse(e,t,r){const i=s=>s-1;switch(t){case"L":return ue(re(ce.month,e),i);case"LL":return ue(se(2,e),i);case"Lo":return ue(r.ordinalNumber(e,{unit:"month"}),i);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function xh(n,e,t){const r=he(n),i=Bo(r,t)-e;return r.setDate(r.getDate()-i*7),r}class vh extends G{priority=100;parse(e,t,r){switch(t){case"w":return re(ce.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return se(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,i){return dt(xh(e,r,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function wh(n,e){const t=he(n),r=_o(t)-e;return t.setDate(t.getDate()-r*7),t}class yh extends G{priority=100;parse(e,t,r){switch(t){case"I":return re(ce.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return se(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return Jt(wh(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Dh=[31,28,31,30,31,30,31,31,30,31,30,31],bh=[31,29,31,30,31,30,31,31,30,31,30,31];class kh extends G{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return re(ce.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return se(t.length,e)}}validate(e,t){const r=e.getFullYear(),i=Lo(r),s=e.getMonth();return i?t>=1&&t<=bh[s]:t>=1&&t<=Dh[s]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Ch extends G{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return re(ce.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return se(t.length,e)}}validate(e,t){const r=e.getFullYear();return Lo(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Gi(n,e,t){const r=er(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=he(n),a=s.getDay(),o=(e%7+7)%7,u=7-i,h=e<0||e>6?e-(a+u)%7:(o+u)%7-(a+u)%7;return Io(s,h)}class Ah extends G{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=Gi(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class Ih extends G{priority=90;parse(e,t,r,i){const s=a=>{const c=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+c};switch(t){case"e":case"ee":return ue(se(t.length,e),s);case"eo":return ue(r.ordinalNumber(e,{unit:"day"}),s);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=Gi(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Eh extends G{priority=90;parse(e,t,r,i){const s=a=>{const c=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+c};switch(t){case"c":case"cc":return ue(se(t.length,e),s);case"co":return ue(r.ordinalNumber(e,{unit:"day"}),s);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=Gi(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Th(n,e){const t=he(n),r=nh(t),i=e-r;return Io(t,i)}class Ph extends G{priority=90;parse(e,t,r){const i=s=>s===0?7:s;switch(t){case"i":case"ii":return se(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return ue(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return ue(r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return ue(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return ue(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return e=Th(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class _h extends G{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(zi(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Bh extends G{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(zi(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Oh extends G{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(zi(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Sh extends G{priority=70;parse(e,t,r){switch(t){case"h":return re(ce.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return se(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const i=e.getHours()>=12;return i&&r<12?e.setHours(r+12,0,0,0):!i&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Fh extends G{priority=70;parse(e,t,r){switch(t){case"H":return re(ce.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return se(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Nh extends G{priority=70;parse(e,t,r){switch(t){case"K":return re(ce.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return se(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Mh extends G{priority=70;parse(e,t,r){switch(t){case"k":return re(ce.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return se(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const i=r<=24?r%24:r;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Rh extends G{priority=60;parse(e,t,r){switch(t){case"m":return re(ce.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return se(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class Lh extends G{priority=50;parse(e,t,r){switch(t){case"s":return re(ce.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return se(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class Uh extends G{priority=30;parse(e,t){const r=i=>Math.floor(i*Math.pow(10,-t.length+3));return ue(se(t.length,e),r)}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class Wh extends G{priority=10;parse(e,t){switch(t){case"X":return Ne(Fe.basicOptionalMinutes,e);case"XX":return Ne(Fe.basic,e);case"XXXX":return Ne(Fe.basicOptionalSeconds,e);case"XXXXX":return Ne(Fe.extendedOptionalSeconds,e);case"XXX":default:return Ne(Fe.extended,e)}}set(e,t,r){return t.timestampIsSet?e:ie(e,e.getTime()-Zr(e)-r)}incompatibleTokens=["t","T","x"]}class Hh extends G{priority=10;parse(e,t){switch(t){case"x":return Ne(Fe.basicOptionalMinutes,e);case"xx":return Ne(Fe.basic,e);case"xxxx":return Ne(Fe.basicOptionalSeconds,e);case"xxxxx":return Ne(Fe.extendedOptionalSeconds,e);case"xxx":default:return Ne(Fe.extended,e)}}set(e,t,r){return t.timestampIsSet?e:ie(e,e.getTime()-Zr(e)-r)}incompatibleTokens=["t","T","X"]}class Vh extends G{priority=40;parse(e){return Mo(e)}set(e,t,r){return[ie(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class $h extends G{priority=20;parse(e){return Mo(e)}set(e,t,r){return[ie(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const qh={G:new ch,y:new uh,Y:new hh,R:new lh,u:new dh,Q:new fh,q:new mh,M:new ph,L:new gh,w:new vh,I:new yh,d:new kh,D:new Ch,E:new Ah,e:new Ih,c:new Eh,i:new Ph,a:new _h,b:new Bh,B:new Oh,h:new Sh,H:new Fh,K:new Nh,k:new Mh,m:new Rh,s:new Lh,S:new Uh,X:new Wh,x:new Hh,t:new Vh,T:new $h},zh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Gh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Yh=/^'([^]*?)'?$/,Jh=/''/g,Kh=/\S/,Qh=/[a-zA-Z]/;function Xh(n,e,t,r){const i=rh(),s=r?.locale??i.locale??Po,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(e==="")return n===""?he(t):ie(t,NaN);const o={firstWeekContainsDate:a,weekStartsOn:c,locale:s},u=[new oh],h=e.match(Gh).map(x=>{const f=x[0];if(f in _i){const y=_i[f];return y(x,s.formatLong)}return x}).join("").match(zh),d=[];for(let x of h){!r?.useAdditionalWeekYearTokens&&Fo(x)&&jr(x,e,n),!r?.useAdditionalDayOfYearTokens&&So(x)&&jr(x,e,n);const f=x[0],y=qh[f];if(y){const{incompatibleTokens:m}=y;if(Array.isArray(m)){const w=d.find(b=>m.includes(b.token)||b.token===f);if(w)throw new RangeError(`The format string mustn't contain \`${w.fullToken}\` and \`${x}\` at the same time`)}else if(y.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${x}\` and any other token at the same time`);d.push({token:f,fullToken:x});const p=y.run(n,x,s.match,o);if(!p)return ie(t,NaN);u.push(p.setter),n=p.rest}else{if(f.match(Qh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");if(x==="''"?x="'":f==="'"&&(x=Zh(x)),n.indexOf(x)===0)n=n.slice(x.length);else return ie(t,NaN)}}if(n.length>0&&Kh.test(n))return ie(t,NaN);const l=u.map(x=>x.priority).sort((x,f)=>f-x).filter((x,f,y)=>y.indexOf(x)===f).map(x=>u.filter(f=>f.priority===x).sort((f,y)=>y.subPriority-f.subPriority)).map(x=>x[0]);let g=he(t);if(isNaN(g.getTime()))return ie(t,NaN);const v={};for(const x of l){if(!x.validate(g,o))return ie(t,NaN);const f=x.set(g,v,o);Array.isArray(f)?(g=f[0],Object.assign(v,f[1])):g=f}return ie(t,g)}function Zh(n){return n.match(Yh)[1].replace(Jh,"'")}function Ur(n){const e=new Date(n);return e.setFullYear(1970),e.setMonth(0),e.setDate(1),e}function Uo(n){n.sort((i,s)=>i.start.getTime()-s.start.getTime());const e=[];let t=0;for(let i=0;i<n.length;i=t){const s=n[i];for(e.push(s),t=i+1;t<n.length;t++){const a=n[t],c=Co(Ur(s.start),Ur(s.end),Ur(a.start),Ur(a.end));if(c==="AFTER")if(s.end.toUTCString()===a.start.toUTCString())s.end=a.end;else break;c==="STRIKE"&&(a.start.getTime()<s.start.getTime()&&(s.start=a.start),a.end.getTime()>s.end.getTime()&&(s.end=a.end))}}const r=[];return e.forEach(i=>{r.push(Oe(i.start,"HH:mm")),r.push(Oe(i.end,"HH:mm"))}),r}function jh(n){const e=[];for(let t=0;t<n.length;t+=2){const r=new Date(n[t]),i=new Date(n[t+1]);e.push(new Ao({start:r,end:i}))}return e}function zs(n,e){for(let t=0;t<e.length;t+=2){const r=new Date(e[t]),i=new Date(e[t+1]);n.push(new Ao({start:r,end:i}))}}var el="firebase",tl="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai(el,tl,"app");class rl{_db;constructor(){Ri().length===0?Li(Vi):fn(),this._db=q0()}async getChild({childPath:e}){try{const t=pt(this._db,`${ne}/${e}`);return await z0(t)}catch(t){throw t}}async updateChild({childPath:e,data:t}){try{const r=pt(this._db,`${ne}/${e}`);return await In(r,t),!0}catch{return!1}}async removeChild({childPath:e}){try{const t=pt(this._db,`${ne}/${e}`);return await G0(t),!0}catch{return!1}}async incrementNumberChild({childPath:e,valueId:t,delta:r,command:i}){try{i===go.decrement&&(r=-r);const s={[t]:Es(r)},a=pt(this._db,`${ne}/${e}`);return await In(a,s),!0}catch{return!1}}async incrementMultipleNumberChild({childPath:e,data:t}){try{const r={};for(const[s,a]of Object.entries(t))r[s]=Es(a);const i=pt(this._db,`${ne}/${e}`);return await In(i,r),!0}catch{return!1}}listenToChild({childPath:e,callback:t}){const r=pt(this._db,`${ne}/${e}`);return Y0(r,t)}async setChild({childPath:e,data:t}){try{const r=pt(this._db,`${ne}/${e}`);return await J0(r,t),!0}catch{return!1}}}class Wo extends rl{_firestore;constructor(){Ri().length===0?Li(Vi):fn(),super(),this._firestore=K0()}get getBatch(){return Q0(this._firestore)}async getDocSRV({path:e,docId:t,insideEnviroments:r=!0}){try{const i=xe(this._firestore,r?`${ne}/${e}`:e),s=be(i,t);return await X0(s)}catch(i){if(i instanceof Error)throw oe.error(i.message),Q.GI().addError({error:U.serverError,details:i.message}),i}}async getAllDocsInsideCollection(e){try{const t=xe(this._firestore,`${ne}/${e}`);return(await Z0(t)).docs.map(i=>i.data())}catch(t){if(t instanceof Error)throw Q.GI().addError({error:U.serverError,details:t.toString()}),t;return[]}}async commmitBatch(e){try{return await e.commit(),!0}catch(t){throw oe.error("Error while commit batch -->",t),t instanceof Error&&Q.GI().addError({error:U.serverError,details:t.toString()}),new Error(`Server Error: ${t}`)}}async runTransaction(e){try{return await j0(this._firestore,async r=>await e(r))}catch(t){throw console.error("Error while run transaction -->",t),t instanceof Error&&Q.GI().addError({error:U.serverError,details:t.toString()}),new Error(`Server Error: ${t}`)}}async transactionGet(e,t,r){try{const i=xe(this._firestore,`${ne}/${t}`),s=be(i,r);return await e.get(s)}catch(i){throw console.error("Error while getting document in transaction -->",i),i instanceof Error&&Q.GI().addError({error:U.serverError,details:i.toString()}),new Error(`Server Error: ${i}`)}}async transactionUpdateAsMap({transaction:e,path:t,docId:r,fieldName:i,value:s}){try{const a=xe(this._firestore,`${ne}/${t}`),c=be(a,r),o={[i]:s||En()};e.update(c,o)}catch(a){throw oe.error("Error while updating document in transaction -->",a),a instanceof Error&&Q.GI().addError({error:U.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}async setAsMap({batch:e,path:t,docId:r,data:i,insideEnviroments:s=!0}){try{const a=xe(this._firestore,s?`${ne}/${t}`:t),c=be(a,r);e.set(c,i,{merge:!0})}catch(a){throw a instanceof Error&&Q.GI().addError({error:U.serverError,details:a.toString()}),a}}async transactionUpdateMultipleFieldsAsMap({transaction:e,path:t,docId:r,data:i,insideEnvironments:s=!0}){try{const a=xe(this._firestore,s?`${ne}/${t}`:t),c=be(a,r),o=this.organizeData(i);e.update(c,o)}catch(a){throw console.error("Error while updating multiple fields in transaction -->",a),a instanceof Error&&Q.GI().addError({error:U.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}async transactionCreateDoc({transaction:e,path:t,docId:r,value:i}){try{const s=xe(this._firestore,`${ne}/${t}`),a=be(s,r);e.set(a,i)}catch(s){throw oe.error("Error while creating document in transaction -->",s),s instanceof Error&&Q.GI().addError({error:U.serverError,details:s.toString()}),new Error(`Server Error: ${s}`)}}async transactionSetAsMap({transaction:e,path:t,docId:r,data:i}){try{const s=xe(this._firestore,`${ne}/${t}`),a=be(s,r),c=this.organizeData(i);e.set(a,c,{merge:!0})}catch(s){throw oe.error("Error while setting document as map in transaction -->",s),s instanceof Error&&Q.GI().addError({error:U.serverError,details:s.toString()}),new Error(`Server Error: ${s}`)}}async deleteDoc({batch:e,path:t,docId:r}){try{const i=xe(this._firestore,`${ne}/${t}`),s=be(i,r);e.delete(s)}catch(i){throw i instanceof Error&&Q.GI().addError({error:U.serverError,details:i.toString()}),i}}async setDoc({batch:e,path:t,docId:r,valueToSet:i,insideEnviroments:s=!0}){try{const a=xe(this._firestore,s?`${ne}/${t}`:t),c=be(a,r);e.set(c,i)}catch(a){throw a instanceof Error&&Q.GI().addError({error:U.serverError,details:a.toString()}),a}}async createDoc({batch:e,path:t,docId:r,valueAsJson:i,insideEnviroments:s=!0,mergeIfExist:a=!1}){try{const c=a?{merge:!0}:null,o=xe(this._firestore,s?`${ne}/${t}`:t),u=be(o,r);e.set(u,i,{merge:a})}catch(c){throw c instanceof Error&&Q.GI().addError({error:U.serverError,details:c.toString()}),c}}async updateFieldInsideDocAsMap({batch:e,path:t,docId:r,value:i,fieldName:s,command:a,insideEnviroments:c=!0}){try{const o=xe(this._firestore,c?`${ne}/${t}`:t),u=be(o,r);a===null?e.update(u,{[s]:i??En()}):e.update(u,{[s]:a===1?Rr(1):Rr(-1)})}catch(o){throw o instanceof Error&&Q.GI().addError({error:U.serverError,details:o.toString()}),o}}async updateMultipleFieldsInsideDocAsMap({batch:e,path:t,docId:r,data:i,insideEnviroments:s=!0}){try{const a=xe(this._firestore,s?`${ne}/${t}`:t),c=be(a,r);e.update(c,this.organizeData(i))}catch(a){throw oe.error("Error while updating the batch -->",a),a instanceof Error&&Q.GI().addError({error:U.serverError,details:a.toString()}),new Error(`Server Error: ${a}`)}}docListener({path:e,docId:t,onChanged:r}){try{const i=xe(this._firestore,`${ne}/${e}`),s=be(i,t);return ec(s,r)}catch(i){throw i instanceof Error&&Q.GI().addError({error:U.serverError,details:i.message}),i}}organizeData(e){var t={};return Object.entries(e).forEach(([r,i])=>{let s=i;s===null&&(s=En()),s===1&&(s=Rr(1)),s===0&&(s=Rr(-1)),t[r]=s}),t}get currentTimestamp(){return lt.now()}}class nl extends Wo{constructor(){super()}}function Ho(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const il=Ho,Vo=new Ui("auth","Firebase",Ho());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=new ac("@firebase/auth");function sl(n,...e){tn.logLevel<=eo.WARN&&tn.warn(`Auth (${Tr}): ${n}`,...e)}function zr(n,...e){tn.logLevel<=eo.ERROR&&tn.error(`Auth (${Tr}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(n,...e){throw Ji(n,...e)}function Re(n,...e){return Ji(n,...e)}function $o(n,e,t){const r=Object.assign(Object.assign({},il()),{[e]:t});return new Ui("auth","Firebase",r).create(e,{appName:n.name})}function Yi(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&He(n,"argument-error"),$o(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ji(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Vo.create(n,...e)}function M(n,e,...t){if(!n)throw Ji(e,...t)}function Ke(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zr(e),new Error(e)}function tt(n,e){n||Ke(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function al(){return Gs()==="http:"||Gs()==="https:"}function Gs(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(al()||nc()||"connection"in navigator)?navigator.onLine:!0}function cl(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){this.shortDelay=e,this.longDelay=t,tt(t>e,"Short delay should be less than long delay!"),this.isMobile=tc()||rc()}get(){return ol()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(n,e){tt(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new Br(3e4,6e4);function nt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Se(n,e,t,r,i={}){return zo(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=Pr(Object.assign({key:n.config.apiKey},a)).slice(1),o=await n._getAdditionalHeaders();return o["Content-Type"]="application/json",n.languageCode&&(o["X-Firebase-Locale"]=n.languageCode),qo.fetch()(Go(n,n.config.apiHost,t,c),Object.assign({method:e,headers:o,referrerPolicy:"no-referrer"},s))})}async function zo(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ul),e);try{const i=new ll(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw fr(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[o,u]=c.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw fr(n,"credential-already-in-use",a);if(o==="EMAIL_EXISTS")throw fr(n,"email-already-in-use",a);if(o==="USER_DISABLED")throw fr(n,"user-disabled",a);const h=r[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw $o(n,h,u);He(n,h)}}catch(i){if(i instanceof Wi)throw i;He(n,"network-request-failed",{message:String(i)})}}async function gn(n,e,t,r,i={}){const s=await Se(n,e,t,r,i);return"mfaPendingCredential"in s&&He(n,"multi-factor-auth-required",{_serverResponse:s}),s}function Go(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Ki(n.config,i):`${n.config.apiScheme}://${i}`}class ll{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Re(this.auth,"network-request-failed")),hl.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fr(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Re(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(n,e){return Se(n,"POST","/v1/accounts:delete",e)}async function fl(n,e){return Se(n,"POST","/v1/accounts:update",e)}async function ml(n,e){return Se(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pl(n,e=!1){const t=we(n),r=await t.getIdToken(e),i=Qi(r);M(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:gr(Sn(i.auth_time)),issuedAtTime:gr(Sn(i.iat)),expirationTime:gr(Sn(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Sn(n){return Number(n)*1e3}function Qi(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return zr("JWT malformed, contained fewer than 3 sections"),null;try{const i=cc(t);return i?JSON.parse(i):(zr("Failed to decode base64 JWT payload"),null)}catch(i){return zr("Caught error parsing JWT payload as JSON",i?.toString()),null}}function gl(n){const e=Qi(n);return M(e,"internal-error"),M(typeof e.exp<"u","internal-error"),M(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kt(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Wi&&xl(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function xl({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gr(this.lastLoginAt),this.creationTime=gr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kr(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Kt(n,ml(t,{idToken:r}));M(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Dl(s.providerUserInfo):[],c=yl(n.providerData,a),o=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!c?.length,h=o?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Yo(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function wl(n){const e=we(n);await kr(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yl(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Dl(n){return n.map(e=>{var{providerId:t}=e,r=Hi(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(n,e){const t=await zo(n,{},async()=>{const r=Pr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=Go(n,i,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",qo.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kl(n,e){return Se(n,"POST","/v2/accounts:revokeToken",nt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){M(e.idToken,"internal-error"),M(typeof e.idToken<"u","internal-error"),M(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gl(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return M(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await bl(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Cr;return r&&(M(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(M(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(M(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cr,this.toJSON())}_performRefresh(){return Ke("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(n,e){M(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ct{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Hi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yo(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Kt(this,this.stsTokenManager.getToken(this.auth,e));return M(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pl(this,e)}reload(){return wl(this)}_assign(e){this!==e&&(M(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ct(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){M(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await kr(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Kt(this,dl(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,o,u,h;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,l=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,v=(a=t.photoURL)!==null&&a!==void 0?a:void 0,x=(c=t.tenantId)!==null&&c!==void 0?c:void 0,f=(o=t._redirectEventId)!==null&&o!==void 0?o:void 0,y=(u=t.createdAt)!==null&&u!==void 0?u:void 0,m=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:p,emailVerified:w,isAnonymous:b,providerData:k,stsTokenManager:C}=t;M(p&&C,e,"internal-error");const I=Cr.fromJSON(this.name,C);M(typeof p=="string",e,"internal-error"),ot(d,e.name),ot(l,e.name),M(typeof w=="boolean",e,"internal-error"),M(typeof b=="boolean",e,"internal-error"),ot(g,e.name),ot(v,e.name),ot(x,e.name),ot(f,e.name),ot(y,e.name),ot(m,e.name);const S=new Ct({uid:p,auth:e,email:l,emailVerified:w,displayName:d,isAnonymous:b,photoURL:v,phoneNumber:g,tenantId:x,stsTokenManager:I,createdAt:y,lastLoginAt:m});return k&&Array.isArray(k)&&(S.providerData=k.map(D=>Object.assign({},D))),f&&(S._redirectEventId=f),S}static async _fromIdTokenResponse(e,t,r=!1){const i=new Cr;i.updateFromServerResponse(t);const s=new Ct({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await kr(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new Map;function Qe(n){tt(n instanceof Function,"Expected a class definition");let e=Ys.get(n);return e?(tt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ys.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Jo.type="NONE";const Js=Jo;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(n,e,t){return`firebase:${n}:${e}:${t}`}class Lt{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Gr(this.userKey,i.apiKey,s),this.fullPersistenceKey=Gr("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ct._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Lt(Qe(Js),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Qe(Js);const a=Gr(r,e.config.apiKey,e.name);let c=null;for(const u of t)try{const h=await u._get(a);if(h){const d=Ct._fromJSON(e,h);u!==s&&(c=d),s=u;break}}catch{}const o=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!o.length?new Lt(s,e,r):(s=o[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Lt(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xo(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ko(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jo(e))return"Blackberry";if(e0(e))return"Webos";if(Xi(e))return"Safari";if((e.includes("chrome/")||Qo(e))&&!e.includes("edge/"))return"Chrome";if(Zo(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Ko(n=ve()){return/firefox\//i.test(n)}function Xi(n=ve()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qo(n=ve()){return/crios\//i.test(n)}function Xo(n=ve()){return/iemobile/i.test(n)}function Zo(n=ve()){return/android/i.test(n)}function jo(n=ve()){return/blackberry/i.test(n)}function e0(n=ve()){return/webos/i.test(n)}function xn(n=ve()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Cl(n=ve()){var e;return xn(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Al(){return uc()&&document.documentMode===10}function t0(n=ve()){return xn(n)||Zo(n)||e0(n)||jo(n)||/windows phone/i.test(n)||Xo(n)}function Il(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n,e=[]){let t;switch(n){case"Browser":t=Ks(ve());break;case"Worker":t=`${Ks(ve())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Tr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,c)=>{try{const o=e(s);a(o)}catch(o){c(o)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(n,e={}){return Se(n,"GET","/v2/passwordPolicy",nt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=6;class _l{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Pl,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=(t=o.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),o.isValid&&(o.isValid=(r=o.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),o.isValid&&(o.isValid=(i=o.containsLowercaseLetter)!==null&&i!==void 0?i:!0),o.isValid&&(o.isValid=(s=o.containsUppercaseLetter)!==null&&s!==void 0?s:!0),o.isValid&&(o.isValid=(a=o.containsNumericCharacter)!==null&&a!==void 0?a:!0),o.isValid&&(o.isValid=(c=o.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),o}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new El(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vo,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qe(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Lt.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===c)&&o?.user&&(i=o.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return M(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kr(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cl()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?we(e):null;return t&&M(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&M(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Qe(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Tl(this),t=new _l(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ui("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kl(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qe(e)||this._popupRedirectResolver;M(t,this,"argument-error"),this.redirectPersistenceManager=await Lt.create(this,[Qe(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(M(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const o=e.addObserver(t,r,i);return()=>{a=!0,o()}}else{const o=e.addObserver(t);return()=>{a=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return M(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=r0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&sl(`Error while retrieving App Check token: ${t.error}`),t?.token}}function tr(n){return we(n)}class Qs{constructor(e){this.auth=e,this.observer=null,this.addObserver=ic(t=>this.observer=t)}get next(){return M(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}function Sl(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Re("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Ol().appendChild(r)})}function Fl(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(n,e){const t=to(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(oc(s,e??{}))return i;He(i,"already-initialized")}return t.initialize({options:e})}function Ml(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Qe);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Rl(n,e,t){const r=tr(n);M(r._canInitEmulator,r,"emulator-config-failed"),M(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=n0(e),{host:a,port:c}=Ll(e),o=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${o}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Ul()}function n0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ll(n){const e=n0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Xs(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Xs(a)}}}function Xs(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Ul(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ke("not implemented")}_getIdTokenResponse(e){return Ke("not implemented")}_linkToIdToken(e,t){return Ke("not implemented")}_getReauthenticationResolver(e){return Ke("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ut(n,e){return gn(n,"POST","/v1/accounts:signInWithIdp",nt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl="http://localhost";class rt extends Zi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):He("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Hi(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new rt(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Ut(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ut(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ut(e,t)}buildRequest(){const e={requestUri:Wl,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pr(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(n,e){return Se(n,"POST","/v1/accounts:sendVerificationCode",nt(n,e))}async function Vl(n,e){return gn(n,"POST","/v1/accounts:signInWithPhoneNumber",nt(n,e))}async function $l(n,e){const t=await gn(n,"POST","/v1/accounts:signInWithPhoneNumber",nt(n,e));if(t.temporaryProof)throw fr(n,"account-exists-with-different-credential",t);return t}const ql={USER_NOT_FOUND:"user-not-found"};async function zl(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return gn(n,"POST","/v1/accounts:signInWithPhoneNumber",nt(n,t),ql)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt extends Zi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Wt({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Wt({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Vl(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return $l(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return zl(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new Wt({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Or{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xr extends rr{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return M("providerId"in t&&"signInMethod"in t,"argument-error"),rt._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return M(e.idToken||e.accessToken,"argument-error"),rt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return xr.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return xr.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:c}=e;if(!r&&!i&&!t&&!s||!c)return null;try{return new xr(c)._credential({idToken:t,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe extends rr{constructor(){super("facebook.com")}static credential(e){return rt._fromParams({providerId:qe.PROVIDER_ID,signInMethod:qe.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qe.credentialFromTaggedObject(e)}static credentialFromError(e){return qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qe.credential(e.oauthAccessToken)}catch{return null}}}qe.FACEBOOK_SIGN_IN_METHOD="facebook.com";qe.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze extends rr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rt._fromParams({providerId:ze.PROVIDER_ID,signInMethod:ze.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ze.credentialFromTaggedObject(e)}static credentialFromError(e){return ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ze.credential(t,r)}catch{return null}}}ze.GOOGLE_SIGN_IN_METHOD="google.com";ze.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut extends rr{constructor(){super("github.com")}static credential(e){return rt._fromParams({providerId:ut.PROVIDER_ID,signInMethod:ut.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ut.credentialFromTaggedObject(e)}static credentialFromError(e){return ut.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ut.credential(e.oauthAccessToken)}catch{return null}}}ut.GITHUB_SIGN_IN_METHOD="github.com";ut.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht extends rr{constructor(){super("twitter.com")}static credential(e,t){return rt._fromParams({providerId:ht.PROVIDER_ID,signInMethod:ht.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ht.credentialFromTaggedObject(e)}static credentialFromError(e){return ht.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ht.credential(t,r)}catch{return null}}}ht.TWITTER_SIGN_IN_METHOD="twitter.com";ht.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ct._fromIdTokenResponse(e,r,i),a=Zs(r);return new Qt({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Zs(r);return new Qt({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Zs(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn extends Wi{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,rn.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new rn(e,t,r,i)}}function i0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?rn._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(n,e){const t=we(n);await a0(!0,t,e);const{providerUserInfo:r}=await fl(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=s0(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function ji(n,e,t=!1){const r=await Kt(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Qt._forOperation(n,"link",r)}async function a0(n,e,t){await kr(e);const r=s0(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";M(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o0(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=await Kt(n,i0(r,i,e,n),t);M(s.idToken,r,"internal-error");const a=Qi(s.idToken);M(a,r,"internal-error");const{sub:c}=a;return M(n.uid===c,r,"user-mismatch"),Qt._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&He(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c0(n,e,t=!1){const r="signIn",i=await i0(n,r,e),s=await Qt._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function Yl(n,e){return c0(tr(n),e)}async function Jl(n,e){const t=we(n);return await a0(!1,t,e.providerId),ji(t,e)}async function Kl(n,e){return o0(we(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(n,e){return Se(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=we(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Kt(r,Ql(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:o})=>o==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Zl(n,e,t,r){return we(n).onIdTokenChanged(e,t,r)}function jl(n,e,t){return we(n).beforeAuthStateChanged(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(n,e){return Se(n,"POST","/v2/accounts/mfaEnrollment:start",nt(n,e))}const nn="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nn,"1"),this.storage.removeItem(nn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(){const n=ve();return Xi(n)||xn(n)}const rd=1e3,nd=10;class h0 extends u0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=td()&&Il(),this.fallbackToPolling=t0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,o)=>{this.notifyListeners(a,o)});return}const r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);Al()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,nd):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},rd)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}h0.type="LOCAL";const id=h0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0 extends u0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}l0.type="SESSION";const d0=l0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new vn(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async u=>u(t.origin,s)),o=await sd(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vn.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,o)=>{const u=es("",20);i.port1.start();const h=setTimeout(()=>{o(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(d){const l=d;if(l.data.eventId===u)switch(l.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(l.data.response);break;default:clearTimeout(h),clearTimeout(s),o(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(){return window}function od(n){Le().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(){return typeof Le().WorkerGlobalScope<"u"&&typeof Le().importScripts=="function"}async function cd(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ud(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function hd(){return f0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="firebaseLocalStorageDb",ld=1,sn="firebaseLocalStorage",p0="fbase_key";class Sr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wn(n,e){return n.transaction([sn],e?"readwrite":"readonly").objectStore(sn)}function dd(){const n=indexedDB.deleteDatabase(m0);return new Sr(n).toPromise()}function Oi(){const n=indexedDB.open(m0,ld);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(sn,{keyPath:p0})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(sn)?e(r):(r.close(),await dd(),e(await Oi()))})})}async function js(n,e,t){const r=wn(n,!0).put({[p0]:e,value:t});return new Sr(r).toPromise()}async function fd(n,e){const t=wn(n,!1).get(e),r=await new Sr(t).toPromise();return r===void 0?null:r.value}function ea(n,e){const t=wn(n,!0).delete(e);return new Sr(t).toPromise()}const md=800,pd=3;class g0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Oi(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>pd)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return f0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vn._getInstance(hd()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await cd(),!this.activeServiceWorker)return;this.sender=new ad(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ud()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Oi();return await js(e,nn,"1"),await ea(e,nn),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>js(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>fd(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ea(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=wn(i,!1).getAll();return new Sr(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),md)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}g0.type="LOCAL";const gd=g0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(n,e){return Se(n,"POST","/v2/accounts/mfaSignIn:start",nt(n,e))}new Br(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="recaptcha";async function wd(n,e,t){var r;const i=await t.verify();try{M(typeof i=="string",n,"argument-error"),M(t.type===vd,n,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return M(a.type==="enroll",n,"internal-error"),(await ed(n,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{M(a.type==="signin",n,"internal-error");const c=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return M(c,n,"missing-multi-factor-info"),(await xd(n,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await Hl(n,{phoneNumber:s.phoneNumber,recaptchaToken:i});return a}}finally{t._reset()}}async function yd(n,e){await ji(we(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.providerId=At.PROVIDER_ID,this.auth=tr(e)}verifyPhoneNumber(e,t){return wd(this.auth,e,we(t))}static credential(e,t){return Wt._fromVerification(e,t)}static credentialFromResult(e){const t=e;return At.credentialFromTaggedObject(t)}static credentialFromError(e){return At.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Wt._fromTokenResponse(t,r):null}}At.PROVIDER_ID="phone";At.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(n,e){return e?Qe(e):(M(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Zi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ut(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ut(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ut(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Dd(n){return c0(n.auth,new ts(n),n.bypassAuthState)}function bd(n){const{auth:e,user:t}=n;return M(t,e,"internal-error"),o0(t,new ts(n),n.bypassAuthState)}async function kd(n){const{auth:e,user:t}=n;return M(t,e,"internal-error"),ji(t,new ts(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const o={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(o))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dd;case"linkViaPopup":case"linkViaRedirect":return kd;case"reauthViaPopup":case"reauthViaRedirect":return bd;default:He(this.auth,"internal-error")}}resolve(e){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Br(2e3,1e4);async function Fn(n,e,t){const r=tr(n);Yi(n,e,Or);const i=yn(r,t);return new Xe(r,"signInViaPopup",e,i).executeNotNull()}async function Nn(n,e,t){const r=we(n);Yi(r.auth,e,Or);const i=yn(r.auth,t);return new Xe(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Mn(n,e,t){const r=we(n);Yi(r.auth,e,Or);const i=yn(r.auth,t);return new Xe(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Xe extends x0{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Xe.currentPopupAction&&Xe.currentPopupAction.cancel(),Xe.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return M(e,this.auth,"internal-error"),e}async onExecution(){tt(this.filter.length===1,"Popup operations only handle one event");const e=es();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Re(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xe.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Cd.get())};e()}}Xe.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="pendingRedirect",Yr=new Map;class Id extends x0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Yr.get(this.auth._key());if(!e){try{const r=await Ed(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yr.set(this.auth._key(),e)}return this.bypassAuthState||Yr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ed(n,e){const t=_d(e),r=Pd(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Td(n,e){Yr.set(n._key(),e)}function Pd(n){return Qe(n._redirectPersistence)}function _d(n){return Gr(Ad,n.config.apiKey,n.name)}async function Bd(n,e,t=!1){const r=tr(n),i=yn(r,e),a=await new Id(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=10*60*1e3;class Sd{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Fd(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!v0(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Re(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Od&&this.cachedEventUids.clear(),this.cachedEventUids.has(ta(e))}saveEventToCache(e){this.cachedEventUids.add(ta(e)),this.lastProcessedEventTime=Date.now()}}function ta(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function v0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Fd(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(n,e={}){return Se(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rd=/^https?/;async function Ld(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Nd(n);for(const t of e)try{if(Ud(t))return}catch{}He(n,"unauthorized-domain")}function Ud(n){const e=Bi(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Rd.test(t))return!1;if(Md.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new Br(3e4,6e4);function ra(){const n=Le().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Hd(n){return new Promise((e,t)=>{var r,i,s;function a(){ra(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ra(),t(Re(n,"network-request-failed"))},timeout:Wd.get()})}if(!((i=(r=Le().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Le().gapi)===null||s===void 0)&&s.load)a();else{const c=Fl("iframefcb");return Le()[c]=()=>{gapi.load?a():t(Re(n,"network-request-failed"))},Sl(`https://apis.google.com/js/api.js?onload=${c}`).catch(o=>t(o))}}).catch(e=>{throw Jr=null,e})}let Jr=null;function Vd(n){return Jr=Jr||Hd(n),Jr}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=new Br(5e3,15e3),qd="__/auth/iframe",zd="emulator/auth/iframe",Gd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jd(n){const e=n.config;M(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ki(e,zd):`https://${n.config.authDomain}/${qd}`,r={apiKey:e.apiKey,appName:n.name,v:Tr},i=Yd.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Pr(r).slice(1)}`}async function Kd(n){const e=await Vd(n),t=Le().gapi;return M(t,n,"internal-error"),e.open({where:document.body,url:Jd(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gd,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Re(n,"network-request-failed"),c=Le().setTimeout(()=>{s(a)},$d.get());function o(){Le().clearTimeout(c),i(r)}r.ping(o).then(o,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xd=500,Zd=600,jd="_blank",ef="http://localhost";class na{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tf(n,e,t,r=Xd,i=Zd){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const o=Object.assign(Object.assign({},Qd),{width:r.toString(),height:i.toString(),top:s,left:a}),u=ve().toLowerCase();t&&(c=Qo(u)?jd:t),Ko(u)&&(e=e||ef,o.scrollbars="yes");const h=Object.entries(o).reduce((l,[g,v])=>`${l}${g}=${v},`,"");if(Cl(u)&&c!=="_self")return rf(e||"",c),new na(null);const d=window.open(e||"",c,h);M(d,n,"popup-blocked");try{d.focus()}catch{}return new na(d)}function rf(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="__/auth/handler",sf="emulator/auth/handler",af=encodeURIComponent("fac");async function ia(n,e,t,r,i,s){M(n.config.authDomain,n,"auth-domain-config-required"),M(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Tr,eventId:i};if(e instanceof Or){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",hc(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))a[h]=d}if(e instanceof rr){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const o=await n._getAppCheckToken(),u=o?`#${af}=${encodeURIComponent(o)}`:"";return`${of(n)}?${Pr(c).slice(1)}${u}`}function of({config:n}){return n.emulator?Ki(n,sf):`https://${n.authDomain}/${nf}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="webStorageSupport";class cf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=d0,this._completeRedirectFn=Bd,this._overrideRedirectResult=Td}async _openPopup(e,t,r,i){var s;tt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await ia(e,t,r,Bi(),i);return tf(e,a,es())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await ia(e,t,r,Bi(),i);return od(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(tt(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Kd(e),r=new Sd(e);return t.register("authEvent",i=>(M(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rn,{type:Rn},i=>{var s;const a=(s=i?.[0])===null||s===void 0?void 0:s[Rn];a!==void 0&&t(!!a),He(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ld(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return t0()||Xi()||xn()}}const uf=cf;var sa="@firebase/auth",aa="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){M(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function df(n){Ts(new Ps("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;M(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const o={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:r0(n)},u=new Bl(r,i,s,o);return Ml(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ts(new Ps("auth-internal",e=>{const t=tr(e.getProvider("auth").getImmediate());return(r=>new hf(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(sa,aa,lf(n)),Ai(sa,aa,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=5*60,mf=ja("authIdTokenMaxAge")||ff;let oa=null;const pf=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>mf)return;const i=t?.token;oa!==i&&(oa=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function gf(n=fn()){const e=to(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Nl(n,{popupRedirectResolver:uf,persistence:[gd,id,d0]}),r=ja("authTokenSyncURL");if(r){const s=pf(r);jl(t,s,()=>s(t.currentUser)),Zl(t,a=>s(a))}const i=sc("auth");return i&&Rl(t,`http://${i}`),t}df("Browser");const Wr={"operation-not-allowed":U.providerNotAllowed,"user-disabled":U.userDisable,"provider-already-linked":U.providerAlreadyLinked,"credential-already-in-use":U.credentialAlreadyInUse,"invalid-verification-code":U.wrongOptCode,"invalid-verification-id":U.verification,"invalid-credential":U.invalidCredential,"user-mismatch":U.userMissmatch,"user-not-found":U.userNotFound,"no-such-provider":U.noSuchProvider,canceled:U.userExitManually,"too-many-requests":U.tooManyAttempts,"too-many-attempts":U.tooManyAttempts,"expired-code":U.expiredCode,"account-exists-with-different-credential":U.credentialAlreadyInUse,"invalid-phone-number":U.invalidPhoneNumber};var xf=(n=>(n[n.login=0]="login",n[n.link=1]="link",n[n.reauthenticate=2]="reauthenticate",n[n.phoneUpdate=3]="phoneUpdate",n))(xf||{});class vf{_auth;constructor(){Ri().length===0?Li(Vi):fn(),this._auth=gf()}async signInWithFacebookSRV(e){try{return await this.signInWithFacebookWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),oe.error(`it was an error the error is --> ${t}`),oe.error(t.name),Q.GI().details=t.name,Q.GI().error=Wr[t.name]??U.unknown),!1}}async signInWithFacebookWebSRV(e){const t=new qe;switch(t.addScope("email"),t.setCustomParameters({display:"popup"}),e){case 0:await Fn(this._auth,t);break;case 1:await Mn(this._auth.currentUser,t);break;case 2:await Nn(this._auth.currentUser,t);break}}async signInWithGoogleSRV(e){try{return await this.signInWithGoogleWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),oe.error(`it was an error the error is --> ${t}`),oe.error(t.name),Q.GI().details=t.name,Q.GI().error=Wr[t.name]??U.unknown),!1}}async signInWithGoogleWebSRV(e){const t=new ze;switch(t.addScope("email"),t.addScope("profile"),t.setCustomParameters({login_hint:"user@example.com"}),e){case 0:await Fn(this._auth,t);break;case 1:await Mn(this._auth.currentUser,t);break;case 2:await Nn(this._auth.currentUser,t);break}}async signInWithAppleSRV(e){try{return await this.signInWithAppleWebSRV(e),!0}catch(t){return t instanceof Error&&(console.error(`Error: ${t}`),oe.error(`it was an error the error is --> ${t}`),oe.error(t.name),Q.GI().details=t.name,Q.GI().error=Wr[t.name]??U.unknown),!1}}async signInWithAppleWebSRV(e){const t=new xr("apple.com");switch(t.addScope("email"),t.addScope("name"),e){case 0:await Fn(this._auth,t);break;case 1:await Mn(this._auth.currentUser,t);break;case 2:await Nn(this._auth.currentUser,t);break}}async signInWithOtpSRV({loginType:e,verificationId:t,otp:r,autocredential:i}){const s=i??At.credential(t,r);try{switch(e){case 0:await Yl(this._auth,s);break;case 1:await Jl(this._auth.currentUser,s);break;case 2:await Kl(this._auth.currentUser,s);break;case 3:await yd(this._auth.currentUser,s);break}return!0}catch(a){return console.error(`Error: ${a}`),a instanceof Error&&(console.error(`Error: ${a}`),oe.error(`it was an error the error is --> ${a}`),oe.error(a.name),Q.GI().details=a.name,Q.GI().error=Wr[a.name]??U.unknown),!1}}get isLoggedInSRV(){return this._auth.currentUser!=null}async updateUserNameSRV(e){try{await Xl(this._auth.currentUser,{displayName:e}),await this._auth.currentUser.reload()}catch(t){throw t}}userConnectedOnlyLocallySRV(){return this.isLoggedInSRV&&this._auth.currentUser.displayName===null}get lastLoginDateSRV(){return this._auth.currentUser?.metadata.lastSignInTime}get userIdSRV(){if(this._auth.currentUser!==null){const e=this._auth.currentUser.displayName;return e!==null&&e.includes("&&")&&e.includes("+")?this.userPhoneSRV:this._auth.currentUser.uid}return""}get userDataSRV(){return this._auth.currentUser}async userClaimsSRV(){return this._auth.currentUser===null?null:(await this._auth.currentUser.getIdToken(!0),(await this._auth.currentUser.getIdTokenResult()).claims)}get userPhoneSRV(){if(this._auth.currentUser!==null){const t=this._auth.currentUser.displayName.split("&&")[1];return this._auth.currentUser.phoneNumber.replace(t,`${t}-`)}return""}get existsProvidersSRV(){if(this._auth.currentUser===null)return new Set;const e=new Set;return this._auth.currentUser.providerData.forEach(t=>{e.add(t.providerId)}),e}async deleteUserSRV(){if(this._auth.currentUser===null)return!1;try{return await this._auth.currentUser.delete(),!0}catch{return!1}}async unlinkProviderSRV({providerId:e}){try{return Gl(this._auth.currentUser,e),!0}catch{return!1}}async reloadUserSRV(){this._auth.currentUser!==null&&await this._auth.currentUser.reload()}async logoutSRV(){try{return await this._auth.signOut(),!this.isLoggedInSRV}catch{return!1}}}class wf extends vf{constructor(){super()}async signInWithGoogle(e){return await this.signInWithGoogleSRV(e)}async signInWithApple(e){return await this.signInWithAppleSRV(e)}async signInWithFacebook(e){return await this.signInWithFacebookSRV(e)}async signInWithOtp({loginType:e,verificationId:t,otp:r,autocredential:i}){return await this.signInWithOtpSRV({loginType:e,verificationId:t,otp:r,autocredential:i})}async logout(){return await this.logoutSRV()}async unlinkProvider({providerId:e}){return await this.unlinkProviderSRV({providerId:e})}async deleteUser(){return await this.deleteUserSRV()}async reloadUser(){await this.reloadUserSRV()}userConnectedOnlyLocally(){return this.userConnectedOnlyLocallySRV()}async updateUserName({name:e}){try{return await this.updateUserNameSRV(e),!0}catch(t){return console.error(`Error occurred while saving user name --> ${t}`),!1}}get isLoggedIn(){return this.isLoggedInSRV}get existsProviders(){return this.existsProvidersSRV}get userData(){return this.userDataSRV}get userId(){return this.userIdSRV}get lastLoginDate(){return this.lastLoginDateSRV}async userClaims(){return await this.userClaimsSRV}}const yf="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDU2LjY5MyA1Ni42OTMiIGhlaWdodD0iNTYuNjkzcHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA1Ni42OTMgNTYuNjkzIiB3aWR0aD0iNTYuNjkzcHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik00MS43NzcsMzAuNTE3Yy0wLjA2Mi02LjIzMiw1LjA4Mi05LjIyMSw1LjMxMi05LjM3MmMtMi44OTEtNC4yMjctNy4zOTUtNC44MDctOC45OTgtNC44NzMgICBjLTMuODMtMC4zODktNy40NzcsMi4yNTYtOS40MiwyLjI1NmMtMS45MzksMC00Ljk0MS0yLjE5OS04LjExNy0yLjE0M2MtNC4xNzgsMC4wNjItOC4wMjksMi40My0xMC4xNzksNi4xNyAgIGMtNC4zMzksNy41MjctMS4xMSwxOC42ODIsMy4xMTgsMjQuNzkxYzIuMDY3LDIuOTg2LDQuNTMyLDYuMzQ2LDcuNzY2LDYuMjIzYzMuMTE3LTAuMTIzLDQuMjkzLTIuMDE2LDguMDYxLTIuMDE2ICAgczQuODI2LDIuMDE2LDguMTIzLDEuOTUzYzMuMzUyLTAuMDYxLDUuNDc3LTMuMDQzLDcuNTI3LTYuMDQxYzIuMzczLTMuNDY5LDMuMzUtNi44MjgsMy40MDgtNi45OTggICBDNDguMzA1LDQwLjQzMyw0MS44NDQsMzcuOTU4LDQxLjc3NywzMC41MTd6Ii8+PHBhdGggZD0iTTM1LjU4MiwxMi4yMjljMS43MTUtMi4wODIsMi44NzctNC45NzUsMi41NjEtNy44NTVjLTIuNDc1LDAuMS01LjQ3MSwxLjY0NS03LjI0OCwzLjcyNSAgIGMtMS41OTIsMS44NDYtMi45ODQsNC43ODUtMi42MTEsNy42MTNDMzEuMDQ1LDE1LjkyNiwzMy44NjEsMTQuMzA3LDM1LjU4MiwxMi4yMjl6Ii8+PC9nPjwvc3ZnPg==",Df="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3csvg%20id='Layer_1'%20style='enable-background:new%200%200%201000%201000;'%20version='1.1'%20viewBox='0%200%201000%201000'%20xml:space='preserve'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%233B579D;}%20.st1{fill:%23FFFFFF;}%20%3c/style%3e%3ctitle/%3e%3cg%3e%3cpath%20class='st0'%20d='M500,1000L500,1000C223.9,1000,0,776.1,0,500v0C0,223.9,223.9,0,500,0h0c276.1,0,500,223.9,500,500v0%20C1000,776.1,776.1,1000,500,1000z'/%3e%3cpath%20class='st1'%20d='M630,1000V612.7h130l19.5-150.9H630v-96.4c0-43.7,12.1-73.5,74.8-73.5l79.9,0V157%20c-13.8-1.8-61.3-5.9-116.5-5.9c-115.2,0-194.1,70.3-194.1,199.5v111.3H343.8v150.9h130.3V1000H630z'%20id='f'/%3e%3c/g%3e%3c/svg%3e";var w0=(n=>(n[n.Apple=0]="Apple",n[n.Google=1]="Google",n[n.Facebook=2]="Facebook",n[n.Phone=3]="Phone",n))(w0||{});const Zm={0:"Apple",1:"Google",2:"Facebook",3:"Phone"},jm=[1,2,0,3],ca={Apple:0,Google:1,Facebook:2,Phone:3},ep={0:yf,1:dc,2:Df,3:"Phone"},tp={0:"apple.com",1:"google.com",2:"facebook.com",3:"phone"};class vr{businessName="";iconUrl="";businessId="";type=Rt.Other;adress="";ownerName="";shopPhone="";constructor({businessId:e,shopPhone:t,type:r,adress:i,ownerName:s,iconUrl:a,businessName:c}){this.businessId=e,this.shopPhone=t,this.type=r,this.adress=i,this.ownerName=s,this.iconUrl=a,this.businessName=c}static empty(){return new vr({businessId:"",shopPhone:"",type:Rt.Other,adress:"",ownerName:"",iconUrl:"",businessName:""})}static fromJson(e,t){const r=e.businessName||"",i=e.iconUrl||"",s=xo[e.T]||Rt.Other,a=e.ON||"",c=e.SP||"",o=e.A||"";return new vr({businessId:t,shopPhone:c,type:s,adress:o,ownerName:a,iconUrl:i,businessName:r})}get toBusinessModel(){const e=new Et({businessId:this.businessId,design:new Je({shopIconUrl:this.iconUrl})});return e.ownersName=this.ownerName,e.shopPhone=this.shopPhone,e.shopName=this.businessName,e.adress=this.adress,e.businesseType=this.type,e}static fromBusinessInfo(e){return new vr({businessId:e.businessId,shopPhone:e.shopPhone,type:e.type,adress:e.adress,ownerName:e.ownerName,iconUrl:e.iconUrl,businessName:e.businessName})}toJson(){const e={};return e.businessName=this.businessName,e.iconUrl=this.iconUrl,e.ON=this.ownerName,e.SP=this.shopPhone,e.A=this.adress,e.T=Vc[this.type],e}isTheSame(e){return e.iconUrl===this.iconUrl&&e.ownerName===this.ownerName&&e.shopPhone===this.shopPhone&&e.adress===this.adress&&e.type===this.type&&e.businessName===this.businessName}toString(){return JSON.stringify(this.toJson())}}function bf({booking:n,worker:e,notificationOption:t,customHsEnoughMessages:r}){if(t=t||e?.notifications.notificationOption,!t)return L.none;const i=r||de.GI().business.businessData.messagesCounter>1;switch(t){case j.OnlyPush:return Object.values(n.userFcms).length===0?L.none:L.push;case j.SMSOnly:return!n.canSendMessage||!i?L.none:L.message;case j.WhatAppOnly:return!n.canSendMessage||!i?L.none:L.whatsapp;case j.PushOrSMS:return Object.values(n.userFcms).length>0?L.push:!n.canSendMessage||!i?L.none:L.message;case j.PushOrWhatsApp:return Object.values(n.userFcms).length>0?L.push:!n.canSendMessage||!i?L.none:L.whatsapp;case j.SMSOrPush:return n.canSendMessage&&i?L.message:Object.values(n.userFcms).length>0?L.push:L.none;case j.WhatsAppOrPush:return n.canSendMessage&&i?L.whatsapp:Object.values(n.userFcms).length>0?L.push:L.none;default:return L.none}}function kf(n,e){const t=de.GI().business.businessData.messagesCounter>1;switch(e.notifications.notificationOption){case j.OnlyPush:return Object.keys(n.userFcms).length===0?L.none:L.push;case j.SMSOnly:return!n.canSendMessage||!t?L.none:L.message;case j.WhatAppOnly:return!n.canSendMessage||!t?L.none:L.whatsapp;case j.PushOrSMS:return Object.values(n.userFcms).length>0?L.push:!n.canSendMessage||!t?L.none:L.message;case j.PushOrWhatsApp:return Object.values(n.userFcms).length>0?L.push:!n.canSendMessage||!t?L.none:L.whatsapp;case j.SMSOrPush:return n.canSendMessage&&t?L.message:Object.values(n.userFcms).length>0?L.push:L.none;case j.WhatsAppOrPush:return n.canSendMessage&&t?L.whatsapp:Object.values(n.userFcms).length>0?L.push:L.none;default:return L.none}}var y0={exports:{}};function Cf(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ln={exports:{}};const Af={},If=Object.freeze(Object.defineProperty({__proto__:null,default:Af},Symbol.toStringTag,{value:"Module"})),Ef=lc(If);var ua;function $(){return ua||(ua=1,function(n,e){(function(t,r){n.exports=r()})(H,function(){var t=t||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof H<"u"&&H.crypto&&(s=H.crypto),!s&&typeof Cf=="function")try{s=Ef}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function m(){}return function(p){var w;return m.prototype=p,w=new m,m.prototype=null,w}}(),o={},u=o.lib={},h=u.Base=function(){return{extend:function(m){var p=c(this);return m&&p.mixIn(m),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var p in m)m.hasOwnProperty(p)&&(this[p]=m[p]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=u.WordArray=h.extend({init:function(m,p){m=this.words=m||[],p!=i?this.sigBytes=p:this.sigBytes=m.length*4},toString:function(m){return(m||g).stringify(this)},concat:function(m){var p=this.words,w=m.words,b=this.sigBytes,k=m.sigBytes;if(this.clamp(),b%4)for(var C=0;C<k;C++){var I=w[C>>>2]>>>24-C%4*8&255;p[b+C>>>2]|=I<<24-(b+C)%4*8}else for(var S=0;S<k;S+=4)p[b+S>>>2]=w[S>>>2];return this.sigBytes+=k,this},clamp:function(){var m=this.words,p=this.sigBytes;m[p>>>2]&=4294967295<<32-p%4*8,m.length=r.ceil(p/4)},clone:function(){var m=h.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var p=[],w=0;w<m;w+=4)p.push(a());return new d.init(p,m)}}),l=o.enc={},g=l.Hex={stringify:function(m){for(var p=m.words,w=m.sigBytes,b=[],k=0;k<w;k++){var C=p[k>>>2]>>>24-k%4*8&255;b.push((C>>>4).toString(16)),b.push((C&15).toString(16))}return b.join("")},parse:function(m){for(var p=m.length,w=[],b=0;b<p;b+=2)w[b>>>3]|=parseInt(m.substr(b,2),16)<<24-b%8*4;return new d.init(w,p/2)}},v=l.Latin1={stringify:function(m){for(var p=m.words,w=m.sigBytes,b=[],k=0;k<w;k++){var C=p[k>>>2]>>>24-k%4*8&255;b.push(String.fromCharCode(C))}return b.join("")},parse:function(m){for(var p=m.length,w=[],b=0;b<p;b++)w[b>>>2]|=(m.charCodeAt(b)&255)<<24-b%4*8;return new d.init(w,p)}},x=l.Utf8={stringify:function(m){try{return decodeURIComponent(escape(v.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return v.parse(unescape(encodeURIComponent(m)))}},f=u.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=x.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var p,w=this._data,b=w.words,k=w.sigBytes,C=this.blockSize,I=C*4,S=k/I;m?S=r.ceil(S):S=r.max((S|0)-this._minBufferSize,0);var D=S*C,A=r.min(D*4,k);if(D){for(var T=0;T<D;T+=C)this._doProcessBlock(b,T);p=b.splice(0,D),w.sigBytes-=A}return new d.init(p,A)},clone:function(){var m=h.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0});u.Hasher=f.extend({cfg:h.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var p=this._doFinalize();return p},blockSize:16,_createHelper:function(m){return function(p,w){return new m.init(w).finalize(p)}},_createHmacHelper:function(m){return function(p,w){return new y.HMAC.init(m,w).finalize(p)}}});var y=o.algo={};return o}(Math);return t})}(Ln)),Ln.exports}var Un={exports:{}},ha;function Dn(){return ha||(ha=1,function(n,e){(function(t,r){n.exports=r($())})(H,function(t){return function(r){var i=t,s=i.lib,a=s.Base,c=s.WordArray,o=i.x64={};o.Word=a.extend({init:function(u,h){this.high=u,this.low=h}}),o.WordArray=a.extend({init:function(u,h){u=this.words=u||[],h!=r?this.sigBytes=h:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,h=u.length,d=[],l=0;l<h;l++){var g=u[l];d.push(g.high),d.push(g.low)}return c.create(d,this.sigBytes)},clone:function(){for(var u=a.clone.call(this),h=u.words=this.words.slice(0),d=h.length,l=0;l<d;l++)h[l]=h[l].clone();return u}})}(),t})}(Un)),Un.exports}var Wn={exports:{}},la;function Tf(){return la||(la=1,function(n,e){(function(t,r){n.exports=r($())})(H,function(t){return function(){if(typeof ArrayBuffer=="function"){var r=t,i=r.lib,s=i.WordArray,a=s.init,c=s.init=function(o){if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),(o instanceof Int8Array||typeof Uint8ClampedArray<"u"&&o instanceof Uint8ClampedArray||o instanceof Int16Array||o instanceof Uint16Array||o instanceof Int32Array||o instanceof Uint32Array||o instanceof Float32Array||o instanceof Float64Array)&&(o=new Uint8Array(o.buffer,o.byteOffset,o.byteLength)),o instanceof Uint8Array){for(var u=o.byteLength,h=[],d=0;d<u;d++)h[d>>>2]|=o[d]<<24-d%4*8;a.call(this,h,u)}else a.apply(this,arguments)};c.prototype=s}}(),t.lib.WordArray})}(Wn)),Wn.exports}var Hn={exports:{}},da;function Pf(){return da||(da=1,function(n,e){(function(t,r){n.exports=r($())})(H,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=r.enc;a.Utf16=a.Utf16BE={stringify:function(o){for(var u=o.words,h=o.sigBytes,d=[],l=0;l<h;l+=2){var g=u[l>>>2]>>>16-l%4*8&65535;d.push(String.fromCharCode(g))}return d.join("")},parse:function(o){for(var u=o.length,h=[],d=0;d<u;d++)h[d>>>1]|=o.charCodeAt(d)<<16-d%2*16;return s.create(h,u*2)}},a.Utf16LE={stringify:function(o){for(var u=o.words,h=o.sigBytes,d=[],l=0;l<h;l+=2){var g=c(u[l>>>2]>>>16-l%4*8&65535);d.push(String.fromCharCode(g))}return d.join("")},parse:function(o){for(var u=o.length,h=[],d=0;d<u;d++)h[d>>>1]|=c(o.charCodeAt(d)<<16-d%2*16);return s.create(h,u*2)}};function c(o){return o<<8&4278255360|o>>>8&16711935}}(),t.enc.Utf16})}(Hn)),Hn.exports}var Vn={exports:{}},fa;function Tt(){return fa||(fa=1,function(n,e){(function(t,r){n.exports=r($())})(H,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=r.enc;a.Base64={stringify:function(o){var u=o.words,h=o.sigBytes,d=this._map;o.clamp();for(var l=[],g=0;g<h;g+=3)for(var v=u[g>>>2]>>>24-g%4*8&255,x=u[g+1>>>2]>>>24-(g+1)%4*8&255,f=u[g+2>>>2]>>>24-(g+2)%4*8&255,y=v<<16|x<<8|f,m=0;m<4&&g+m*.75<h;m++)l.push(d.charAt(y>>>6*(3-m)&63));var p=d.charAt(64);if(p)for(;l.length%4;)l.push(p);return l.join("")},parse:function(o){var u=o.length,h=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var l=0;l<h.length;l++)d[h.charCodeAt(l)]=l}var g=h.charAt(64);if(g){var v=o.indexOf(g);v!==-1&&(u=v)}return c(o,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function c(o,u,h){for(var d=[],l=0,g=0;g<u;g++)if(g%4){var v=h[o.charCodeAt(g-1)]<<g%4*2,x=h[o.charCodeAt(g)]>>>6-g%4*2,f=v|x;d[l>>>2]|=f<<24-l%4*8,l++}return s.create(d,l)}}(),t.enc.Base64})}(Vn)),Vn.exports}var $n={exports:{}},ma;function _f(){return ma||(ma=1,function(n,e){(function(t,r){n.exports=r($())})(H,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=r.enc;a.Base64url={stringify:function(o,u){u===void 0&&(u=!0);var h=o.words,d=o.sigBytes,l=u?this._safe_map:this._map;o.clamp();for(var g=[],v=0;v<d;v+=3)for(var x=h[v>>>2]>>>24-v%4*8&255,f=h[v+1>>>2]>>>24-(v+1)%4*8&255,y=h[v+2>>>2]>>>24-(v+2)%4*8&255,m=x<<16|f<<8|y,p=0;p<4&&v+p*.75<d;p++)g.push(l.charAt(m>>>6*(3-p)&63));var w=l.charAt(64);if(w)for(;g.length%4;)g.push(w);return g.join("")},parse:function(o,u){u===void 0&&(u=!0);var h=o.length,d=u?this._safe_map:this._map,l=this._reverseMap;if(!l){l=this._reverseMap=[];for(var g=0;g<d.length;g++)l[d.charCodeAt(g)]=g}var v=d.charAt(64);if(v){var x=o.indexOf(v);x!==-1&&(h=x)}return c(o,h,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function c(o,u,h){for(var d=[],l=0,g=0;g<u;g++)if(g%4){var v=h[o.charCodeAt(g-1)]<<g%4*2,x=h[o.charCodeAt(g)]>>>6-g%4*2,f=v|x;d[l>>>2]|=f<<24-l%4*8,l++}return s.create(d,l)}}(),t.enc.Base64url})}($n)),$n.exports}var qn={exports:{}},pa;function Pt(){return pa||(pa=1,function(n,e){(function(t,r){n.exports=r($())})(H,function(t){return function(r){var i=t,s=i.lib,a=s.WordArray,c=s.Hasher,o=i.algo,u=[];(function(){for(var x=0;x<64;x++)u[x]=r.abs(r.sin(x+1))*4294967296|0})();var h=o.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(x,f){for(var y=0;y<16;y++){var m=f+y,p=x[m];x[m]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360}var w=this._hash.words,b=x[f+0],k=x[f+1],C=x[f+2],I=x[f+3],S=x[f+4],D=x[f+5],A=x[f+6],T=x[f+7],P=x[f+8],N=x[f+9],R=x[f+10],W=x[f+11],ee=x[f+12],Y=x[f+13],X=x[f+14],K=x[f+15],E=w[0],B=w[1],O=w[2],_=w[3];E=d(E,B,O,_,b,7,u[0]),_=d(_,E,B,O,k,12,u[1]),O=d(O,_,E,B,C,17,u[2]),B=d(B,O,_,E,I,22,u[3]),E=d(E,B,O,_,S,7,u[4]),_=d(_,E,B,O,D,12,u[5]),O=d(O,_,E,B,A,17,u[6]),B=d(B,O,_,E,T,22,u[7]),E=d(E,B,O,_,P,7,u[8]),_=d(_,E,B,O,N,12,u[9]),O=d(O,_,E,B,R,17,u[10]),B=d(B,O,_,E,W,22,u[11]),E=d(E,B,O,_,ee,7,u[12]),_=d(_,E,B,O,Y,12,u[13]),O=d(O,_,E,B,X,17,u[14]),B=d(B,O,_,E,K,22,u[15]),E=l(E,B,O,_,k,5,u[16]),_=l(_,E,B,O,A,9,u[17]),O=l(O,_,E,B,W,14,u[18]),B=l(B,O,_,E,b,20,u[19]),E=l(E,B,O,_,D,5,u[20]),_=l(_,E,B,O,R,9,u[21]),O=l(O,_,E,B,K,14,u[22]),B=l(B,O,_,E,S,20,u[23]),E=l(E,B,O,_,N,5,u[24]),_=l(_,E,B,O,X,9,u[25]),O=l(O,_,E,B,I,14,u[26]),B=l(B,O,_,E,P,20,u[27]),E=l(E,B,O,_,Y,5,u[28]),_=l(_,E,B,O,C,9,u[29]),O=l(O,_,E,B,T,14,u[30]),B=l(B,O,_,E,ee,20,u[31]),E=g(E,B,O,_,D,4,u[32]),_=g(_,E,B,O,P,11,u[33]),O=g(O,_,E,B,W,16,u[34]),B=g(B,O,_,E,X,23,u[35]),E=g(E,B,O,_,k,4,u[36]),_=g(_,E,B,O,S,11,u[37]),O=g(O,_,E,B,T,16,u[38]),B=g(B,O,_,E,R,23,u[39]),E=g(E,B,O,_,Y,4,u[40]),_=g(_,E,B,O,b,11,u[41]),O=g(O,_,E,B,I,16,u[42]),B=g(B,O,_,E,A,23,u[43]),E=g(E,B,O,_,N,4,u[44]),_=g(_,E,B,O,ee,11,u[45]),O=g(O,_,E,B,K,16,u[46]),B=g(B,O,_,E,C,23,u[47]),E=v(E,B,O,_,b,6,u[48]),_=v(_,E,B,O,T,10,u[49]),O=v(O,_,E,B,X,15,u[50]),B=v(B,O,_,E,D,21,u[51]),E=v(E,B,O,_,ee,6,u[52]),_=v(_,E,B,O,I,10,u[53]),O=v(O,_,E,B,R,15,u[54]),B=v(B,O,_,E,k,21,u[55]),E=v(E,B,O,_,P,6,u[56]),_=v(_,E,B,O,K,10,u[57]),O=v(O,_,E,B,A,15,u[58]),B=v(B,O,_,E,Y,21,u[59]),E=v(E,B,O,_,S,6,u[60]),_=v(_,E,B,O,W,10,u[61]),O=v(O,_,E,B,C,15,u[62]),B=v(B,O,_,E,N,21,u[63]),w[0]=w[0]+E|0,w[1]=w[1]+B|0,w[2]=w[2]+O|0,w[3]=w[3]+_|0},_doFinalize:function(){var x=this._data,f=x.words,y=this._nDataBytes*8,m=x.sigBytes*8;f[m>>>5]|=128<<24-m%32;var p=r.floor(y/4294967296),w=y;f[(m+64>>>9<<4)+15]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,f[(m+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,x.sigBytes=(f.length+1)*4,this._process();for(var b=this._hash,k=b.words,C=0;C<4;C++){var I=k[C];k[C]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}return b},clone:function(){var x=c.clone.call(this);return x._hash=this._hash.clone(),x}});function d(x,f,y,m,p,w,b){var k=x+(f&y|~f&m)+p+b;return(k<<w|k>>>32-w)+f}function l(x,f,y,m,p,w,b){var k=x+(f&m|y&~m)+p+b;return(k<<w|k>>>32-w)+f}function g(x,f,y,m,p,w,b){var k=x+(f^y^m)+p+b;return(k<<w|k>>>32-w)+f}function v(x,f,y,m,p,w,b){var k=x+(y^(f|~m))+p+b;return(k<<w|k>>>32-w)+f}i.MD5=c._createHelper(h),i.HmacMD5=c._createHmacHelper(h)}(Math),t.MD5})}(qn)),qn.exports}var zn={exports:{}},ga;function D0(){return ga||(ga=1,function(n,e){(function(t,r){n.exports=r($())})(H,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=i.Hasher,c=r.algo,o=[],u=c.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(h,d){for(var l=this._hash.words,g=l[0],v=l[1],x=l[2],f=l[3],y=l[4],m=0;m<80;m++){if(m<16)o[m]=h[d+m]|0;else{var p=o[m-3]^o[m-8]^o[m-14]^o[m-16];o[m]=p<<1|p>>>31}var w=(g<<5|g>>>27)+y+o[m];m<20?w+=(v&x|~v&f)+1518500249:m<40?w+=(v^x^f)+1859775393:m<60?w+=(v&x|v&f|x&f)-1894007588:w+=(v^x^f)-899497514,y=f,f=x,x=v<<30|v>>>2,v=g,g=w}l[0]=l[0]+g|0,l[1]=l[1]+v|0,l[2]=l[2]+x|0,l[3]=l[3]+f|0,l[4]=l[4]+y|0},_doFinalize:function(){var h=this._data,d=h.words,l=this._nDataBytes*8,g=h.sigBytes*8;return d[g>>>5]|=128<<24-g%32,d[(g+64>>>9<<4)+14]=Math.floor(l/4294967296),d[(g+64>>>9<<4)+15]=l,h.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});r.SHA1=a._createHelper(u),r.HmacSHA1=a._createHmacHelper(u)}(),t.SHA1})}(zn)),zn.exports}var Gn={exports:{}},xa;function rs(){return xa||(xa=1,function(n,e){(function(t,r){n.exports=r($())})(H,function(t){return function(r){var i=t,s=i.lib,a=s.WordArray,c=s.Hasher,o=i.algo,u=[],h=[];(function(){function g(y){for(var m=r.sqrt(y),p=2;p<=m;p++)if(!(y%p))return!1;return!0}function v(y){return(y-(y|0))*4294967296|0}for(var x=2,f=0;f<64;)g(x)&&(f<8&&(u[f]=v(r.pow(x,1/2))),h[f]=v(r.pow(x,1/3)),f++),x++})();var d=[],l=o.SHA256=c.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(g,v){for(var x=this._hash.words,f=x[0],y=x[1],m=x[2],p=x[3],w=x[4],b=x[5],k=x[6],C=x[7],I=0;I<64;I++){if(I<16)d[I]=g[v+I]|0;else{var S=d[I-15],D=(S<<25|S>>>7)^(S<<14|S>>>18)^S>>>3,A=d[I-2],T=(A<<15|A>>>17)^(A<<13|A>>>19)^A>>>10;d[I]=D+d[I-7]+T+d[I-16]}var P=w&b^~w&k,N=f&y^f&m^y&m,R=(f<<30|f>>>2)^(f<<19|f>>>13)^(f<<10|f>>>22),W=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),ee=C+W+P+h[I]+d[I],Y=R+N;C=k,k=b,b=w,w=p+ee|0,p=m,m=y,y=f,f=ee+Y|0}x[0]=x[0]+f|0,x[1]=x[1]+y|0,x[2]=x[2]+m|0,x[3]=x[3]+p|0,x[4]=x[4]+w|0,x[5]=x[5]+b|0,x[6]=x[6]+k|0,x[7]=x[7]+C|0},_doFinalize:function(){var g=this._data,v=g.words,x=this._nDataBytes*8,f=g.sigBytes*8;return v[f>>>5]|=128<<24-f%32,v[(f+64>>>9<<4)+14]=r.floor(x/4294967296),v[(f+64>>>9<<4)+15]=x,g.sigBytes=v.length*4,this._process(),this._hash},clone:function(){var g=c.clone.call(this);return g._hash=this._hash.clone(),g}});i.SHA256=c._createHelper(l),i.HmacSHA256=c._createHmacHelper(l)}(Math),t.SHA256})}(Gn)),Gn.exports}var Yn={exports:{}},va;function Bf(){return va||(va=1,function(n,e){(function(t,r,i){n.exports=r($(),rs())})(H,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=r.algo,c=a.SHA256,o=a.SHA224=c.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=c._doFinalize.call(this);return u.sigBytes-=4,u}});r.SHA224=c._createHelper(o),r.HmacSHA224=c._createHmacHelper(o)}(),t.SHA224})}(Yn)),Yn.exports}var Jn={exports:{}},wa;function b0(){return wa||(wa=1,function(n,e){(function(t,r,i){n.exports=r($(),Dn())})(H,function(t){return function(){var r=t,i=r.lib,s=i.Hasher,a=r.x64,c=a.Word,o=a.WordArray,u=r.algo;function h(){return c.create.apply(c,arguments)}var d=[h(1116352408,3609767458),h(1899447441,602891725),h(3049323471,3964484399),h(3921009573,2173295548),h(961987163,4081628472),h(1508970993,3053834265),h(2453635748,2937671579),h(2870763221,3664609560),h(3624381080,2734883394),h(310598401,1164996542),h(607225278,1323610764),h(1426881987,3590304994),h(1925078388,4068182383),h(2162078206,991336113),h(2614888103,633803317),h(3248222580,3479774868),h(3835390401,2666613458),h(4022224774,944711139),h(264347078,2341262773),h(604807628,2007800933),h(770255983,1495990901),h(1249150122,1856431235),h(1555081692,3175218132),h(1996064986,2198950837),h(2554220882,3999719339),h(2821834349,766784016),h(2952996808,2566594879),h(3210313671,3203337956),h(3336571891,1034457026),h(3584528711,2466948901),h(113926993,3758326383),h(338241895,168717936),h(666307205,1188179964),h(773529912,1546045734),h(1294757372,1522805485),h(1396182291,2643833823),h(1695183700,2343527390),h(1986661051,1014477480),h(2177026350,1206759142),h(2456956037,344077627),h(2730485921,1290863460),h(2820302411,3158454273),h(3259730800,3505952657),h(3345764771,106217008),h(3516065817,3606008344),h(3600352804,1432725776),h(4094571909,1467031594),h(275423344,851169720),h(430227734,3100823752),h(506948616,1363258195),h(659060556,3750685593),h(883997877,3785050280),h(958139571,3318307427),h(1322822218,3812723403),h(1537002063,2003034995),h(1747873779,3602036899),h(1955562222,1575990012),h(2024104815,1125592928),h(2227730452,2716904306),h(2361852424,442776044),h(2428436474,593698344),h(2756734187,3733110249),h(3204031479,2999351573),h(3329325298,3815920427),h(3391569614,3928383900),h(3515267271,566280711),h(3940187606,3454069534),h(4118630271,4000239992),h(116418474,1914138554),h(174292421,2731055270),h(289380356,3203993006),h(460393269,320620315),h(685471733,587496836),h(852142971,1086792851),h(1017036298,365543100),h(1126000580,2618297676),h(1288033470,3409855158),h(1501505948,4234509866),h(1607167915,987167468),h(1816402316,1246189591)],l=[];(function(){for(var v=0;v<80;v++)l[v]=h()})();var g=u.SHA512=s.extend({_doReset:function(){this._hash=new o.init([new c.init(1779033703,4089235720),new c.init(3144134277,2227873595),new c.init(1013904242,4271175723),new c.init(2773480762,1595750129),new c.init(1359893119,2917565137),new c.init(2600822924,725511199),new c.init(528734635,4215389547),new c.init(1541459225,327033209)])},_doProcessBlock:function(v,x){for(var f=this._hash.words,y=f[0],m=f[1],p=f[2],w=f[3],b=f[4],k=f[5],C=f[6],I=f[7],S=y.high,D=y.low,A=m.high,T=m.low,P=p.high,N=p.low,R=w.high,W=w.low,ee=b.high,Y=b.low,X=k.high,K=k.low,E=C.high,B=C.low,O=I.high,_=I.low,te=S,Z=D,ge=A,V=T,ir=P,_t=N,Cn=R,sr=W,Te=ee,ye=Y,Fr=X,ar=K,Nr=E,or=B,An=O,cr=_,Pe=0;Pe<80;Pe++){var Ce,it,Mr=l[Pe];if(Pe<16)it=Mr.high=v[x+Pe*2]|0,Ce=Mr.low=v[x+Pe*2+1]|0;else{var ps=l[Pe-15],Bt=ps.high,ur=ps.low,B0=(Bt>>>1|ur<<31)^(Bt>>>8|ur<<24)^Bt>>>7,gs=(ur>>>1|Bt<<31)^(ur>>>8|Bt<<24)^(ur>>>7|Bt<<25),xs=l[Pe-2],Ot=xs.high,hr=xs.low,O0=(Ot>>>19|hr<<13)^(Ot<<3|hr>>>29)^Ot>>>6,vs=(hr>>>19|Ot<<13)^(hr<<3|Ot>>>29)^(hr>>>6|Ot<<26),ws=l[Pe-7],S0=ws.high,F0=ws.low,ys=l[Pe-16],N0=ys.high,Ds=ys.low;Ce=gs+F0,it=B0+S0+(Ce>>>0<gs>>>0?1:0),Ce=Ce+vs,it=it+O0+(Ce>>>0<vs>>>0?1:0),Ce=Ce+Ds,it=it+N0+(Ce>>>0<Ds>>>0?1:0),Mr.high=it,Mr.low=Ce}var M0=Te&Fr^~Te&Nr,bs=ye&ar^~ye&or,R0=te&ge^te&ir^ge&ir,L0=Z&V^Z&_t^V&_t,U0=(te>>>28|Z<<4)^(te<<30|Z>>>2)^(te<<25|Z>>>7),ks=(Z>>>28|te<<4)^(Z<<30|te>>>2)^(Z<<25|te>>>7),W0=(Te>>>14|ye<<18)^(Te>>>18|ye<<14)^(Te<<23|ye>>>9),H0=(ye>>>14|Te<<18)^(ye>>>18|Te<<14)^(ye<<23|Te>>>9),Cs=d[Pe],V0=Cs.high,As=Cs.low,De=cr+H0,st=An+W0+(De>>>0<cr>>>0?1:0),De=De+bs,st=st+M0+(De>>>0<bs>>>0?1:0),De=De+As,st=st+V0+(De>>>0<As>>>0?1:0),De=De+Ce,st=st+it+(De>>>0<Ce>>>0?1:0),Is=ks+L0,$0=U0+R0+(Is>>>0<ks>>>0?1:0);An=Nr,cr=or,Nr=Fr,or=ar,Fr=Te,ar=ye,ye=sr+De|0,Te=Cn+st+(ye>>>0<sr>>>0?1:0)|0,Cn=ir,sr=_t,ir=ge,_t=V,ge=te,V=Z,Z=De+Is|0,te=st+$0+(Z>>>0<De>>>0?1:0)|0}D=y.low=D+Z,y.high=S+te+(D>>>0<Z>>>0?1:0),T=m.low=T+V,m.high=A+ge+(T>>>0<V>>>0?1:0),N=p.low=N+_t,p.high=P+ir+(N>>>0<_t>>>0?1:0),W=w.low=W+sr,w.high=R+Cn+(W>>>0<sr>>>0?1:0),Y=b.low=Y+ye,b.high=ee+Te+(Y>>>0<ye>>>0?1:0),K=k.low=K+ar,k.high=X+Fr+(K>>>0<ar>>>0?1:0),B=C.low=B+or,C.high=E+Nr+(B>>>0<or>>>0?1:0),_=I.low=_+cr,I.high=O+An+(_>>>0<cr>>>0?1:0)},_doFinalize:function(){var v=this._data,x=v.words,f=this._nDataBytes*8,y=v.sigBytes*8;x[y>>>5]|=128<<24-y%32,x[(y+128>>>10<<5)+30]=Math.floor(f/4294967296),x[(y+128>>>10<<5)+31]=f,v.sigBytes=x.length*4,this._process();var m=this._hash.toX32();return m},clone:function(){var v=s.clone.call(this);return v._hash=this._hash.clone(),v},blockSize:1024/32});r.SHA512=s._createHelper(g),r.HmacSHA512=s._createHmacHelper(g)}(),t.SHA512})}(Jn)),Jn.exports}var Kn={exports:{}},ya;function Of(){return ya||(ya=1,function(n,e){(function(t,r,i){n.exports=r($(),Dn(),b0())})(H,function(t){return function(){var r=t,i=r.x64,s=i.Word,a=i.WordArray,c=r.algo,o=c.SHA512,u=c.SHA384=o.extend({_doReset:function(){this._hash=new a.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var h=o._doFinalize.call(this);return h.sigBytes-=16,h}});r.SHA384=o._createHelper(u),r.HmacSHA384=o._createHmacHelper(u)}(),t.SHA384})}(Kn)),Kn.exports}var Qn={exports:{}},Da;function Sf(){return Da||(Da=1,function(n,e){(function(t,r,i){n.exports=r($(),Dn())})(H,function(t){return function(r){var i=t,s=i.lib,a=s.WordArray,c=s.Hasher,o=i.x64,u=o.Word,h=i.algo,d=[],l=[],g=[];(function(){for(var f=1,y=0,m=0;m<24;m++){d[f+5*y]=(m+1)*(m+2)/2%64;var p=y%5,w=(2*f+3*y)%5;f=p,y=w}for(var f=0;f<5;f++)for(var y=0;y<5;y++)l[f+5*y]=y+(2*f+3*y)%5*5;for(var b=1,k=0;k<24;k++){for(var C=0,I=0,S=0;S<7;S++){if(b&1){var D=(1<<S)-1;D<32?I^=1<<D:C^=1<<D-32}b&128?b=b<<1^113:b<<=1}g[k]=u.create(C,I)}})();var v=[];(function(){for(var f=0;f<25;f++)v[f]=u.create()})();var x=h.SHA3=c.extend({cfg:c.cfg.extend({outputLength:512}),_doReset:function(){for(var f=this._state=[],y=0;y<25;y++)f[y]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(f,y){for(var m=this._state,p=this.blockSize/2,w=0;w<p;w++){var b=f[y+2*w],k=f[y+2*w+1];b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var C=m[w];C.high^=k,C.low^=b}for(var I=0;I<24;I++){for(var S=0;S<5;S++){for(var D=0,A=0,T=0;T<5;T++){var C=m[S+5*T];D^=C.high,A^=C.low}var P=v[S];P.high=D,P.low=A}for(var S=0;S<5;S++)for(var N=v[(S+4)%5],R=v[(S+1)%5],W=R.high,ee=R.low,D=N.high^(W<<1|ee>>>31),A=N.low^(ee<<1|W>>>31),T=0;T<5;T++){var C=m[S+5*T];C.high^=D,C.low^=A}for(var Y=1;Y<25;Y++){var D,A,C=m[Y],X=C.high,K=C.low,E=d[Y];E<32?(D=X<<E|K>>>32-E,A=K<<E|X>>>32-E):(D=K<<E-32|X>>>64-E,A=X<<E-32|K>>>64-E);var B=v[l[Y]];B.high=D,B.low=A}var O=v[0],_=m[0];O.high=_.high,O.low=_.low;for(var S=0;S<5;S++)for(var T=0;T<5;T++){var Y=S+5*T,C=m[Y],te=v[Y],Z=v[(S+1)%5+5*T],ge=v[(S+2)%5+5*T];C.high=te.high^~Z.high&ge.high,C.low=te.low^~Z.low&ge.low}var C=m[0],V=g[I];C.high^=V.high,C.low^=V.low}},_doFinalize:function(){var f=this._data,y=f.words;this._nDataBytes*8;var m=f.sigBytes*8,p=this.blockSize*32;y[m>>>5]|=1<<24-m%32,y[(r.ceil((m+1)/p)*p>>>5)-1]|=128,f.sigBytes=y.length*4,this._process();for(var w=this._state,b=this.cfg.outputLength/8,k=b/8,C=[],I=0;I<k;I++){var S=w[I],D=S.high,A=S.low;D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,C.push(A),C.push(D)}return new a.init(C,b)},clone:function(){for(var f=c.clone.call(this),y=f._state=this._state.slice(0),m=0;m<25;m++)y[m]=y[m].clone();return f}});i.SHA3=c._createHelper(x),i.HmacSHA3=c._createHmacHelper(x)}(Math),t.SHA3})}(Qn)),Qn.exports}var Xn={exports:{}},ba;function Ff(){return ba||(ba=1,function(n,e){(function(t,r){n.exports=r($())})(H,function(t){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=t,s=i.lib,a=s.WordArray,c=s.Hasher,o=i.algo,u=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),h=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=a.create([0,1518500249,1859775393,2400959708,2840853838]),v=a.create([1352829926,1548603684,1836072691,2053994217,0]),x=o.RIPEMD160=c.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,C){for(var I=0;I<16;I++){var S=C+I,D=k[S];k[S]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}var A=this._hash.words,T=g.words,P=v.words,N=u.words,R=h.words,W=d.words,ee=l.words,Y,X,K,E,B,O,_,te,Z,ge;O=Y=A[0],_=X=A[1],te=K=A[2],Z=E=A[3],ge=B=A[4];for(var V,I=0;I<80;I+=1)V=Y+k[C+N[I]]|0,I<16?V+=f(X,K,E)+T[0]:I<32?V+=y(X,K,E)+T[1]:I<48?V+=m(X,K,E)+T[2]:I<64?V+=p(X,K,E)+T[3]:V+=w(X,K,E)+T[4],V=V|0,V=b(V,W[I]),V=V+B|0,Y=B,B=E,E=b(K,10),K=X,X=V,V=O+k[C+R[I]]|0,I<16?V+=w(_,te,Z)+P[0]:I<32?V+=p(_,te,Z)+P[1]:I<48?V+=m(_,te,Z)+P[2]:I<64?V+=y(_,te,Z)+P[3]:V+=f(_,te,Z)+P[4],V=V|0,V=b(V,ee[I]),V=V+ge|0,O=ge,ge=Z,Z=b(te,10),te=_,_=V;V=A[1]+K+Z|0,A[1]=A[2]+E+ge|0,A[2]=A[3]+B+O|0,A[3]=A[4]+Y+_|0,A[4]=A[0]+X+te|0,A[0]=V},_doFinalize:function(){var k=this._data,C=k.words,I=this._nDataBytes*8,S=k.sigBytes*8;C[S>>>5]|=128<<24-S%32,C[(S+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,k.sigBytes=(C.length+1)*4,this._process();for(var D=this._hash,A=D.words,T=0;T<5;T++){var P=A[T];A[T]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return D},clone:function(){var k=c.clone.call(this);return k._hash=this._hash.clone(),k}});function f(k,C,I){return k^C^I}function y(k,C,I){return k&C|~k&I}function m(k,C,I){return(k|~C)^I}function p(k,C,I){return k&I|C&~I}function w(k,C,I){return k^(C|~I)}function b(k,C){return k<<C|k>>>32-C}i.RIPEMD160=c._createHelper(x),i.HmacRIPEMD160=c._createHmacHelper(x)}(),t.RIPEMD160})}(Xn)),Xn.exports}var Zn={exports:{}},ka;function ns(){return ka||(ka=1,function(n,e){(function(t,r){n.exports=r($())})(H,function(t){(function(){var r=t,i=r.lib,s=i.Base,a=r.enc,c=a.Utf8,o=r.algo;o.HMAC=s.extend({init:function(u,h){u=this._hasher=new u.init,typeof h=="string"&&(h=c.parse(h));var d=u.blockSize,l=d*4;h.sigBytes>l&&(h=u.finalize(h)),h.clamp();for(var g=this._oKey=h.clone(),v=this._iKey=h.clone(),x=g.words,f=v.words,y=0;y<d;y++)x[y]^=1549556828,f[y]^=909522486;g.sigBytes=v.sigBytes=l,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var h=this._hasher,d=h.finalize(u);h.reset();var l=h.finalize(this._oKey.clone().concat(d));return l}})})()})}(Zn)),Zn.exports}var jn={exports:{}},Ca;function Nf(){return Ca||(Ca=1,function(n,e){(function(t,r,i){n.exports=r($(),rs(),ns())})(H,function(t){return function(){var r=t,i=r.lib,s=i.Base,a=i.WordArray,c=r.algo,o=c.SHA256,u=c.HMAC,h=c.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:o,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,l){for(var g=this.cfg,v=u.create(g.hasher,d),x=a.create(),f=a.create([1]),y=x.words,m=f.words,p=g.keySize,w=g.iterations;y.length<p;){var b=v.update(l).finalize(f);v.reset();for(var k=b.words,C=k.length,I=b,S=1;S<w;S++){I=v.finalize(I),v.reset();for(var D=I.words,A=0;A<C;A++)k[A]^=D[A]}x.concat(b),m[0]++}return x.sigBytes=p*4,x}});r.PBKDF2=function(d,l,g){return h.create(g).compute(d,l)}}(),t.PBKDF2})}(jn)),jn.exports}var ei={exports:{}},Aa;function mt(){return Aa||(Aa=1,function(n,e){(function(t,r,i){n.exports=r($(),D0(),ns())})(H,function(t){return function(){var r=t,i=r.lib,s=i.Base,a=i.WordArray,c=r.algo,o=c.MD5,u=c.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:o,iterations:1}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,d){for(var l,g=this.cfg,v=g.hasher.create(),x=a.create(),f=x.words,y=g.keySize,m=g.iterations;f.length<y;){l&&v.update(l),l=v.update(h).finalize(d),v.reset();for(var p=1;p<m;p++)l=v.finalize(l),v.reset();x.concat(l)}return x.sigBytes=y*4,x}});r.EvpKDF=function(h,d,l){return u.create(l).compute(h,d)}}(),t.EvpKDF})}(ei)),ei.exports}var ti={exports:{}},Ia;function le(){return Ia||(Ia=1,function(n,e){(function(t,r,i){n.exports=r($(),mt())})(H,function(t){t.lib.Cipher||function(r){var i=t,s=i.lib,a=s.Base,c=s.WordArray,o=s.BufferedBlockAlgorithm,u=i.enc;u.Utf8;var h=u.Base64,d=i.algo,l=d.EvpKDF,g=s.Cipher=o.extend({cfg:a.extend(),createEncryptor:function(D,A){return this.create(this._ENC_XFORM_MODE,D,A)},createDecryptor:function(D,A){return this.create(this._DEC_XFORM_MODE,D,A)},init:function(D,A,T){this.cfg=this.cfg.extend(T),this._xformMode=D,this._key=A,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(D){return this._append(D),this._process()},finalize:function(D){D&&this._append(D);var A=this._doFinalize();return A},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function D(A){return typeof A=="string"?S:k}return function(A){return{encrypt:function(T,P,N){return D(P).encrypt(A,T,P,N)},decrypt:function(T,P,N){return D(P).decrypt(A,T,P,N)}}}}()});s.StreamCipher=g.extend({_doFinalize:function(){var D=this._process(!0);return D},blockSize:1});var v=i.mode={},x=s.BlockCipherMode=a.extend({createEncryptor:function(D,A){return this.Encryptor.create(D,A)},createDecryptor:function(D,A){return this.Decryptor.create(D,A)},init:function(D,A){this._cipher=D,this._iv=A}}),f=v.CBC=function(){var D=x.extend();D.Encryptor=D.extend({processBlock:function(T,P){var N=this._cipher,R=N.blockSize;A.call(this,T,P,R),N.encryptBlock(T,P),this._prevBlock=T.slice(P,P+R)}}),D.Decryptor=D.extend({processBlock:function(T,P){var N=this._cipher,R=N.blockSize,W=T.slice(P,P+R);N.decryptBlock(T,P),A.call(this,T,P,R),this._prevBlock=W}});function A(T,P,N){var R,W=this._iv;W?(R=W,this._iv=r):R=this._prevBlock;for(var ee=0;ee<N;ee++)T[P+ee]^=R[ee]}return D}(),y=i.pad={},m=y.Pkcs7={pad:function(D,A){for(var T=A*4,P=T-D.sigBytes%T,N=P<<24|P<<16|P<<8|P,R=[],W=0;W<P;W+=4)R.push(N);var ee=c.create(R,P);D.concat(ee)},unpad:function(D){var A=D.words[D.sigBytes-1>>>2]&255;D.sigBytes-=A}};s.BlockCipher=g.extend({cfg:g.cfg.extend({mode:f,padding:m}),reset:function(){var D;g.reset.call(this);var A=this.cfg,T=A.iv,P=A.mode;this._xformMode==this._ENC_XFORM_MODE?D=P.createEncryptor:(D=P.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==D?this._mode.init(this,T&&T.words):(this._mode=D.call(P,this,T&&T.words),this._mode.__creator=D)},_doProcessBlock:function(D,A){this._mode.processBlock(D,A)},_doFinalize:function(){var D,A=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(A.pad(this._data,this.blockSize),D=this._process(!0)):(D=this._process(!0),A.unpad(D)),D},blockSize:128/32});var p=s.CipherParams=a.extend({init:function(D){this.mixIn(D)},toString:function(D){return(D||this.formatter).stringify(this)}}),w=i.format={},b=w.OpenSSL={stringify:function(D){var A,T=D.ciphertext,P=D.salt;return P?A=c.create([1398893684,1701076831]).concat(P).concat(T):A=T,A.toString(h)},parse:function(D){var A,T=h.parse(D),P=T.words;return P[0]==1398893684&&P[1]==1701076831&&(A=c.create(P.slice(2,4)),P.splice(0,4),T.sigBytes-=16),p.create({ciphertext:T,salt:A})}},k=s.SerializableCipher=a.extend({cfg:a.extend({format:b}),encrypt:function(D,A,T,P){P=this.cfg.extend(P);var N=D.createEncryptor(T,P),R=N.finalize(A),W=N.cfg;return p.create({ciphertext:R,key:T,iv:W.iv,algorithm:D,mode:W.mode,padding:W.padding,blockSize:D.blockSize,formatter:P.format})},decrypt:function(D,A,T,P){P=this.cfg.extend(P),A=this._parse(A,P.format);var N=D.createDecryptor(T,P).finalize(A.ciphertext);return N},_parse:function(D,A){return typeof D=="string"?A.parse(D,this):D}}),C=i.kdf={},I=C.OpenSSL={execute:function(D,A,T,P,N){if(P||(P=c.random(64/8)),N)var R=l.create({keySize:A+T,hasher:N}).compute(D,P);else var R=l.create({keySize:A+T}).compute(D,P);var W=c.create(R.words.slice(A),T*4);return R.sigBytes=A*4,p.create({key:R,iv:W,salt:P})}},S=s.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:I}),encrypt:function(D,A,T,P){P=this.cfg.extend(P);var N=P.kdf.execute(T,D.keySize,D.ivSize,P.salt,P.hasher);P.iv=N.iv;var R=k.encrypt.call(this,D,A,N.key,P);return R.mixIn(N),R},decrypt:function(D,A,T,P){P=this.cfg.extend(P),A=this._parse(A,P.format);var N=P.kdf.execute(T,D.keySize,D.ivSize,A.salt,P.hasher);P.iv=N.iv;var R=k.decrypt.call(this,D,A,N.key,P);return R}})}()})}(ti)),ti.exports}var ri={exports:{}},Ea;function Mf(){return Ea||(Ea=1,function(n,e){(function(t,r,i){n.exports=r($(),le())})(H,function(t){return t.mode.CFB=function(){var r=t.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize;i.call(this,s,a,o,c),this._prevBlock=s.slice(a,a+o)}}),r.Decryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize,u=s.slice(a,a+o);i.call(this,s,a,o,c),this._prevBlock=u}});function i(s,a,c,o){var u,h=this._iv;h?(u=h.slice(0),this._iv=void 0):u=this._prevBlock,o.encryptBlock(u,0);for(var d=0;d<c;d++)s[a+d]^=u[d]}return r}(),t.mode.CFB})}(ri)),ri.exports}var ni={exports:{}},Ta;function Rf(){return Ta||(Ta=1,function(n,e){(function(t,r,i){n.exports=r($(),le())})(H,function(t){return t.mode.CTR=function(){var r=t.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize,u=this._iv,h=this._counter;u&&(h=this._counter=u.slice(0),this._iv=void 0);var d=h.slice(0);c.encryptBlock(d,0),h[o-1]=h[o-1]+1|0;for(var l=0;l<o;l++)s[a+l]^=d[l]}});return r.Decryptor=i,r}(),t.mode.CTR})}(ni)),ni.exports}var ii={exports:{}},Pa;function Lf(){return Pa||(Pa=1,function(n,e){(function(t,r,i){n.exports=r($(),le())})(H,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var r=t.lib.BlockCipherMode.extend();function i(c){if((c>>24&255)===255){var o=c>>16&255,u=c>>8&255,h=c&255;o===255?(o=0,u===255?(u=0,h===255?h=0:++h):++u):++o,c=0,c+=o<<16,c+=u<<8,c+=h}else c+=1<<24;return c}function s(c){return(c[0]=i(c[0]))===0&&(c[1]=i(c[1])),c}var a=r.Encryptor=r.extend({processBlock:function(c,o){var u=this._cipher,h=u.blockSize,d=this._iv,l=this._counter;d&&(l=this._counter=d.slice(0),this._iv=void 0),s(l);var g=l.slice(0);u.encryptBlock(g,0);for(var v=0;v<h;v++)c[o+v]^=g[v]}});return r.Decryptor=a,r}(),t.mode.CTRGladman})}(ii)),ii.exports}var si={exports:{}},_a;function Uf(){return _a||(_a=1,function(n,e){(function(t,r,i){n.exports=r($(),le())})(H,function(t){return t.mode.OFB=function(){var r=t.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,a){var c=this._cipher,o=c.blockSize,u=this._iv,h=this._keystream;u&&(h=this._keystream=u.slice(0),this._iv=void 0),c.encryptBlock(h,0);for(var d=0;d<o;d++)s[a+d]^=h[d]}});return r.Decryptor=i,r}(),t.mode.OFB})}(si)),si.exports}var ai={exports:{}},Ba;function Wf(){return Ba||(Ba=1,function(n,e){(function(t,r,i){n.exports=r($(),le())})(H,function(t){return t.mode.ECB=function(){var r=t.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),t.mode.ECB})}(ai)),ai.exports}var oi={exports:{}},Oa;function Hf(){return Oa||(Oa=1,function(n,e){(function(t,r,i){n.exports=r($(),le())})(H,function(t){return t.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,a=i*4,c=a-s%a,o=s+c-1;r.clamp(),r.words[o>>>2]|=c<<24-o%4*8,r.sigBytes+=c},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},t.pad.Ansix923})}(oi)),oi.exports}var ci={exports:{}},Sa;function Vf(){return Sa||(Sa=1,function(n,e){(function(t,r,i){n.exports=r($(),le())})(H,function(t){return t.pad.Iso10126={pad:function(r,i){var s=i*4,a=s-r.sigBytes%s;r.concat(t.lib.WordArray.random(a-1)).concat(t.lib.WordArray.create([a<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},t.pad.Iso10126})}(ci)),ci.exports}var ui={exports:{}},Fa;function $f(){return Fa||(Fa=1,function(n,e){(function(t,r,i){n.exports=r($(),le())})(H,function(t){return t.pad.Iso97971={pad:function(r,i){r.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(r,i)},unpad:function(r){t.pad.ZeroPadding.unpad(r),r.sigBytes--}},t.pad.Iso97971})}(ui)),ui.exports}var hi={exports:{}},Na;function qf(){return Na||(Na=1,function(n,e){(function(t,r,i){n.exports=r($(),le())})(H,function(t){return t.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},t.pad.ZeroPadding})}(hi)),hi.exports}var li={exports:{}},Ma;function zf(){return Ma||(Ma=1,function(n,e){(function(t,r,i){n.exports=r($(),le())})(H,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(li)),li.exports}var di={exports:{}},Ra;function Gf(){return Ra||(Ra=1,function(n,e){(function(t,r,i){n.exports=r($(),le())})(H,function(t){return function(r){var i=t,s=i.lib,a=s.CipherParams,c=i.enc,o=c.Hex,u=i.format;u.Hex={stringify:function(h){return h.ciphertext.toString(o)},parse:function(h){var d=o.parse(h);return a.create({ciphertext:d})}}}(),t.format.Hex})}(di)),di.exports}var fi={exports:{}},La;function Yf(){return La||(La=1,function(n,e){(function(t,r,i){n.exports=r($(),Tt(),Pt(),mt(),le())})(H,function(t){return function(){var r=t,i=r.lib,s=i.BlockCipher,a=r.algo,c=[],o=[],u=[],h=[],d=[],l=[],g=[],v=[],x=[],f=[];(function(){for(var p=[],w=0;w<256;w++)w<128?p[w]=w<<1:p[w]=w<<1^283;for(var b=0,k=0,w=0;w<256;w++){var C=k^k<<1^k<<2^k<<3^k<<4;C=C>>>8^C&255^99,c[b]=C,o[C]=b;var I=p[b],S=p[I],D=p[S],A=p[C]*257^C*16843008;u[b]=A<<24|A>>>8,h[b]=A<<16|A>>>16,d[b]=A<<8|A>>>24,l[b]=A;var A=D*16843009^S*65537^I*257^b*16843008;g[C]=A<<24|A>>>8,v[C]=A<<16|A>>>16,x[C]=A<<8|A>>>24,f[C]=A,b?(b=I^p[p[p[D^I]]],k^=p[p[k]]):b=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],m=a.AES=s.extend({_doReset:function(){var p;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,b=w.words,k=w.sigBytes/4,C=this._nRounds=k+6,I=(C+1)*4,S=this._keySchedule=[],D=0;D<I;D++)D<k?S[D]=b[D]:(p=S[D-1],D%k?k>6&&D%k==4&&(p=c[p>>>24]<<24|c[p>>>16&255]<<16|c[p>>>8&255]<<8|c[p&255]):(p=p<<8|p>>>24,p=c[p>>>24]<<24|c[p>>>16&255]<<16|c[p>>>8&255]<<8|c[p&255],p^=y[D/k|0]<<24),S[D]=S[D-k]^p);for(var A=this._invKeySchedule=[],T=0;T<I;T++){var D=I-T;if(T%4)var p=S[D];else var p=S[D-4];T<4||D<=4?A[T]=p:A[T]=g[c[p>>>24]]^v[c[p>>>16&255]]^x[c[p>>>8&255]]^f[c[p&255]]}}},encryptBlock:function(p,w){this._doCryptBlock(p,w,this._keySchedule,u,h,d,l,c)},decryptBlock:function(p,w){var b=p[w+1];p[w+1]=p[w+3],p[w+3]=b,this._doCryptBlock(p,w,this._invKeySchedule,g,v,x,f,o);var b=p[w+1];p[w+1]=p[w+3],p[w+3]=b},_doCryptBlock:function(p,w,b,k,C,I,S,D){for(var A=this._nRounds,T=p[w]^b[0],P=p[w+1]^b[1],N=p[w+2]^b[2],R=p[w+3]^b[3],W=4,ee=1;ee<A;ee++){var Y=k[T>>>24]^C[P>>>16&255]^I[N>>>8&255]^S[R&255]^b[W++],X=k[P>>>24]^C[N>>>16&255]^I[R>>>8&255]^S[T&255]^b[W++],K=k[N>>>24]^C[R>>>16&255]^I[T>>>8&255]^S[P&255]^b[W++],E=k[R>>>24]^C[T>>>16&255]^I[P>>>8&255]^S[N&255]^b[W++];T=Y,P=X,N=K,R=E}var Y=(D[T>>>24]<<24|D[P>>>16&255]<<16|D[N>>>8&255]<<8|D[R&255])^b[W++],X=(D[P>>>24]<<24|D[N>>>16&255]<<16|D[R>>>8&255]<<8|D[T&255])^b[W++],K=(D[N>>>24]<<24|D[R>>>16&255]<<16|D[T>>>8&255]<<8|D[P&255])^b[W++],E=(D[R>>>24]<<24|D[T>>>16&255]<<16|D[P>>>8&255]<<8|D[N&255])^b[W++];p[w]=Y,p[w+1]=X,p[w+2]=K,p[w+3]=E},keySize:256/32});r.AES=s._createHelper(m)}(),t.AES})}(fi)),fi.exports}var mi={exports:{}},Ua;function Jf(){return Ua||(Ua=1,function(n,e){(function(t,r,i){n.exports=r($(),Tt(),Pt(),mt(),le())})(H,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,a=i.BlockCipher,c=r.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=c.DES=a.extend({_doReset:function(){for(var y=this._key,m=y.words,p=[],w=0;w<56;w++){var b=o[w]-1;p[w]=m[b>>>5]>>>31-b%32&1}for(var k=this._subKeys=[],C=0;C<16;C++){for(var I=k[C]=[],S=h[C],w=0;w<24;w++)I[w/6|0]|=p[(u[w]-1+S)%28]<<31-w%6,I[4+(w/6|0)]|=p[28+(u[w+24]-1+S)%28]<<31-w%6;I[0]=I[0]<<1|I[0]>>>31;for(var w=1;w<7;w++)I[w]=I[w]>>>(w-1)*4+3;I[7]=I[7]<<5|I[7]>>>27}for(var D=this._invSubKeys=[],w=0;w<16;w++)D[w]=k[15-w]},encryptBlock:function(y,m){this._doCryptBlock(y,m,this._subKeys)},decryptBlock:function(y,m){this._doCryptBlock(y,m,this._invSubKeys)},_doCryptBlock:function(y,m,p){this._lBlock=y[m],this._rBlock=y[m+1],v.call(this,4,252645135),v.call(this,16,65535),x.call(this,2,858993459),x.call(this,8,16711935),v.call(this,1,1431655765);for(var w=0;w<16;w++){for(var b=p[w],k=this._lBlock,C=this._rBlock,I=0,S=0;S<8;S++)I|=d[S][((C^b[S])&l[S])>>>0];this._lBlock=C,this._rBlock=k^I}var D=this._lBlock;this._lBlock=this._rBlock,this._rBlock=D,v.call(this,1,1431655765),x.call(this,8,16711935),x.call(this,2,858993459),v.call(this,16,65535),v.call(this,4,252645135),y[m]=this._lBlock,y[m+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function v(y,m){var p=(this._lBlock>>>y^this._rBlock)&m;this._rBlock^=p,this._lBlock^=p<<y}function x(y,m){var p=(this._rBlock>>>y^this._lBlock)&m;this._lBlock^=p,this._rBlock^=p<<y}r.DES=a._createHelper(g);var f=c.TripleDES=a.extend({_doReset:function(){var y=this._key,m=y.words;if(m.length!==2&&m.length!==4&&m.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var p=m.slice(0,2),w=m.length<4?m.slice(0,2):m.slice(2,4),b=m.length<6?m.slice(0,2):m.slice(4,6);this._des1=g.createEncryptor(s.create(p)),this._des2=g.createEncryptor(s.create(w)),this._des3=g.createEncryptor(s.create(b))},encryptBlock:function(y,m){this._des1.encryptBlock(y,m),this._des2.decryptBlock(y,m),this._des3.encryptBlock(y,m)},decryptBlock:function(y,m){this._des3.decryptBlock(y,m),this._des2.encryptBlock(y,m),this._des1.decryptBlock(y,m)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=a._createHelper(f)}(),t.TripleDES})}(mi)),mi.exports}var pi={exports:{}},Wa;function Kf(){return Wa||(Wa=1,function(n,e){(function(t,r,i){n.exports=r($(),Tt(),Pt(),mt(),le())})(H,function(t){return function(){var r=t,i=r.lib,s=i.StreamCipher,a=r.algo,c=a.RC4=s.extend({_doReset:function(){for(var h=this._key,d=h.words,l=h.sigBytes,g=this._S=[],v=0;v<256;v++)g[v]=v;for(var v=0,x=0;v<256;v++){var f=v%l,y=d[f>>>2]>>>24-f%4*8&255;x=(x+g[v]+y)%256;var m=g[v];g[v]=g[x],g[x]=m}this._i=this._j=0},_doProcessBlock:function(h,d){h[d]^=o.call(this)},keySize:256/32,ivSize:0});function o(){for(var h=this._S,d=this._i,l=this._j,g=0,v=0;v<4;v++){d=(d+1)%256,l=(l+h[d])%256;var x=h[d];h[d]=h[l],h[l]=x,g|=h[(h[d]+h[l])%256]<<24-v*8}return this._i=d,this._j=l,g}r.RC4=s._createHelper(c);var u=a.RC4Drop=c.extend({cfg:c.cfg.extend({drop:192}),_doReset:function(){c._doReset.call(this);for(var h=this.cfg.drop;h>0;h--)o.call(this)}});r.RC4Drop=s._createHelper(u)}(),t.RC4})}(pi)),pi.exports}var gi={exports:{}},Ha;function Qf(){return Ha||(Ha=1,function(n,e){(function(t,r,i){n.exports=r($(),Tt(),Pt(),mt(),le())})(H,function(t){return function(){var r=t,i=r.lib,s=i.StreamCipher,a=r.algo,c=[],o=[],u=[],h=a.Rabbit=s.extend({_doReset:function(){for(var l=this._key.words,g=this.cfg.iv,v=0;v<4;v++)l[v]=(l[v]<<8|l[v]>>>24)&16711935|(l[v]<<24|l[v]>>>8)&4278255360;var x=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],f=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var v=0;v<4;v++)d.call(this);for(var v=0;v<8;v++)f[v]^=x[v+4&7];if(g){var y=g.words,m=y[0],p=y[1],w=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,b=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,k=w>>>16|b&4294901760,C=b<<16|w&65535;f[0]^=w,f[1]^=k,f[2]^=b,f[3]^=C,f[4]^=w,f[5]^=k,f[6]^=b,f[7]^=C;for(var v=0;v<4;v++)d.call(this)}},_doProcessBlock:function(l,g){var v=this._X;d.call(this),c[0]=v[0]^v[5]>>>16^v[3]<<16,c[1]=v[2]^v[7]>>>16^v[5]<<16,c[2]=v[4]^v[1]>>>16^v[7]<<16,c[3]=v[6]^v[3]>>>16^v[1]<<16;for(var x=0;x<4;x++)c[x]=(c[x]<<8|c[x]>>>24)&16711935|(c[x]<<24|c[x]>>>8)&4278255360,l[g+x]^=c[x]},blockSize:128/32,ivSize:64/32});function d(){for(var l=this._X,g=this._C,v=0;v<8;v++)o[v]=g[v];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<o[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<o[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<o[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<o[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<o[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<o[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<o[6]>>>0?1:0)|0,this._b=g[7]>>>0<o[7]>>>0?1:0;for(var v=0;v<8;v++){var x=l[v]+g[v],f=x&65535,y=x>>>16,m=((f*f>>>17)+f*y>>>15)+y*y,p=((x&4294901760)*x|0)+((x&65535)*x|0);u[v]=m^p}l[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,l[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,l[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,l[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,l[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,l[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,l[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,l[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.Rabbit=s._createHelper(h)}(),t.Rabbit})}(gi)),gi.exports}var xi={exports:{}},Va;function Xf(){return Va||(Va=1,function(n,e){(function(t,r,i){n.exports=r($(),Tt(),Pt(),mt(),le())})(H,function(t){return function(){var r=t,i=r.lib,s=i.StreamCipher,a=r.algo,c=[],o=[],u=[],h=a.RabbitLegacy=s.extend({_doReset:function(){var l=this._key.words,g=this.cfg.iv,v=this._X=[l[0],l[3]<<16|l[2]>>>16,l[1],l[0]<<16|l[3]>>>16,l[2],l[1]<<16|l[0]>>>16,l[3],l[2]<<16|l[1]>>>16],x=this._C=[l[2]<<16|l[2]>>>16,l[0]&4294901760|l[1]&65535,l[3]<<16|l[3]>>>16,l[1]&4294901760|l[2]&65535,l[0]<<16|l[0]>>>16,l[2]&4294901760|l[3]&65535,l[1]<<16|l[1]>>>16,l[3]&4294901760|l[0]&65535];this._b=0;for(var f=0;f<4;f++)d.call(this);for(var f=0;f<8;f++)x[f]^=v[f+4&7];if(g){var y=g.words,m=y[0],p=y[1],w=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,b=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,k=w>>>16|b&4294901760,C=b<<16|w&65535;x[0]^=w,x[1]^=k,x[2]^=b,x[3]^=C,x[4]^=w,x[5]^=k,x[6]^=b,x[7]^=C;for(var f=0;f<4;f++)d.call(this)}},_doProcessBlock:function(l,g){var v=this._X;d.call(this),c[0]=v[0]^v[5]>>>16^v[3]<<16,c[1]=v[2]^v[7]>>>16^v[5]<<16,c[2]=v[4]^v[1]>>>16^v[7]<<16,c[3]=v[6]^v[3]>>>16^v[1]<<16;for(var x=0;x<4;x++)c[x]=(c[x]<<8|c[x]>>>24)&16711935|(c[x]<<24|c[x]>>>8)&4278255360,l[g+x]^=c[x]},blockSize:128/32,ivSize:64/32});function d(){for(var l=this._X,g=this._C,v=0;v<8;v++)o[v]=g[v];g[0]=g[0]+1295307597+this._b|0,g[1]=g[1]+3545052371+(g[0]>>>0<o[0]>>>0?1:0)|0,g[2]=g[2]+886263092+(g[1]>>>0<o[1]>>>0?1:0)|0,g[3]=g[3]+1295307597+(g[2]>>>0<o[2]>>>0?1:0)|0,g[4]=g[4]+3545052371+(g[3]>>>0<o[3]>>>0?1:0)|0,g[5]=g[5]+886263092+(g[4]>>>0<o[4]>>>0?1:0)|0,g[6]=g[6]+1295307597+(g[5]>>>0<o[5]>>>0?1:0)|0,g[7]=g[7]+3545052371+(g[6]>>>0<o[6]>>>0?1:0)|0,this._b=g[7]>>>0<o[7]>>>0?1:0;for(var v=0;v<8;v++){var x=l[v]+g[v],f=x&65535,y=x>>>16,m=((f*f>>>17)+f*y>>>15)+y*y,p=((x&4294901760)*x|0)+((x&65535)*x|0);u[v]=m^p}l[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,l[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,l[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,l[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,l[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,l[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,l[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,l[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.RabbitLegacy=s._createHelper(h)}(),t.RabbitLegacy})}(xi)),xi.exports}var vi={exports:{}},$a;function Zf(){return $a||($a=1,function(n,e){(function(t,r,i){n.exports=r($(),Tt(),Pt(),mt(),le())})(H,function(t){return function(){var r=t,i=r.lib,s=i.BlockCipher,a=r.algo;const c=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var h={pbox:[],sbox:[]};function d(f,y){let m=y>>24&255,p=y>>16&255,w=y>>8&255,b=y&255,k=f.sbox[0][m]+f.sbox[1][p];return k=k^f.sbox[2][w],k=k+f.sbox[3][b],k}function l(f,y,m){let p=y,w=m,b;for(let k=0;k<c;++k)p=p^f.pbox[k],w=d(f,p)^w,b=p,p=w,w=b;return b=p,p=w,w=b,w=w^f.pbox[c],p=p^f.pbox[c+1],{left:p,right:w}}function g(f,y,m){let p=y,w=m,b;for(let k=c+1;k>1;--k)p=p^f.pbox[k],w=d(f,p)^w,b=p,p=w,w=b;return b=p,p=w,w=b,w=w^f.pbox[1],p=p^f.pbox[0],{left:p,right:w}}function v(f,y,m){for(let C=0;C<4;C++){f.sbox[C]=[];for(let I=0;I<256;I++)f.sbox[C][I]=u[C][I]}let p=0;for(let C=0;C<c+2;C++)f.pbox[C]=o[C]^y[p],p++,p>=m&&(p=0);let w=0,b=0,k=0;for(let C=0;C<c+2;C+=2)k=l(f,w,b),w=k.left,b=k.right,f.pbox[C]=w,f.pbox[C+1]=b;for(let C=0;C<4;C++)for(let I=0;I<256;I+=2)k=l(f,w,b),w=k.left,b=k.right,f.sbox[C][I]=w,f.sbox[C][I+1]=b;return!0}var x=a.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var f=this._keyPriorReset=this._key,y=f.words,m=f.sigBytes/4;v(h,y,m)}},encryptBlock:function(f,y){var m=l(h,f[y],f[y+1]);f[y]=m.left,f[y+1]=m.right},decryptBlock:function(f,y){var m=g(h,f[y],f[y+1]);f[y]=m.left,f[y+1]=m.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(x)}(),t.Blowfish})}(vi)),vi.exports}(function(n,e){(function(t,r,i){n.exports=r($(),Dn(),Tf(),Pf(),Tt(),_f(),Pt(),D0(),rs(),Bf(),b0(),Of(),Sf(),Ff(),ns(),Nf(),mt(),le(),Mf(),Rf(),Lf(),Uf(),Wf(),Hf(),Vf(),$f(),qf(),zf(),Gf(),Yf(),Jf(),Kf(),Qf(),Xf(),Zf())})(H,function(t){return t})})(y0);var jf=y0.exports;const em=ro(jf),{AES:tm,enc:an,SHA256:k0}=em,rm="16charactersiv!";function nm(n,e){const t=im(e),r=an.Utf8.parse(rm);return tm.encrypt(n,t,{iv:r}).toString()}function im(n){let e="htr;lmn;rkmnkryemnkrmnbavsdbshtg6437";return e=k0(n+e).toString(an.Hex).substring(0,32),an.Utf8.parse(e)}function sm({id:n}){if(n.length<7)return"";const e=n.substring(3,6),t=k0(n+e).toString(an.Hex);return t.substring(0,Math.min(10,t.length)).replace(/[/.*]/g,"")}function bn(n){return nm(n+Uc,Lc).replace("/","").replace("*","").replace(".","")}var Si={exports:{}},qa=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(qa){var za=new Uint8Array(16);Si.exports=function(){return qa(za),za}}else{var Ga=new Array(16);Si.exports=function(){for(var e=0,t;e<16;e++)e&3||(t=Math.random()*4294967296),Ga[e]=t>>>((e&3)<<3)&255;return Ga}}var C0=Si.exports,A0=[];for(var Hr=0;Hr<256;++Hr)A0[Hr]=(Hr+256).toString(16).substr(1);function am(n,e){var t=e||0,r=A0;return[r[n[t++]],r[n[t++]],r[n[t++]],r[n[t++]],"-",r[n[t++]],r[n[t++]],"-",r[n[t++]],r[n[t++]],"-",r[n[t++]],r[n[t++]],"-",r[n[t++]],r[n[t++]],r[n[t++]],r[n[t++]],r[n[t++]],r[n[t++]]].join("")}var I0=am,om=C0,cm=I0,Ya,wi,yi=0,Di=0;function um(n,e,t){var r=e&&t||0,i=e||[];n=n||{};var s=n.node||Ya,a=n.clockseq!==void 0?n.clockseq:wi;if(s==null||a==null){var c=om();s==null&&(s=Ya=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),a==null&&(a=wi=(c[6]<<8|c[7])&16383)}var o=n.msecs!==void 0?n.msecs:new Date().getTime(),u=n.nsecs!==void 0?n.nsecs:Di+1,h=o-yi+(u-Di)/1e4;if(h<0&&n.clockseq===void 0&&(a=a+1&16383),(h<0||o>yi)&&n.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");yi=o,Di=u,wi=a,o+=122192928e5;var d=((o&268435455)*1e4+u)%4294967296;i[r++]=d>>>24&255,i[r++]=d>>>16&255,i[r++]=d>>>8&255,i[r++]=d&255;var l=o/4294967296*1e4&268435455;i[r++]=l>>>8&255,i[r++]=l&255,i[r++]=l>>>24&15|16,i[r++]=l>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(var g=0;g<6;++g)i[r+g]=s[g];return e||cm(i)}var hm=um,lm=C0,dm=I0;function fm(n,e,t){var r=e&&t||0;typeof n=="string"&&(e=n==="binary"?new Array(16):null,n=null),n=n||{};var i=n.random||(n.rng||lm)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e)for(var s=0;s<16;++s)e[r+s]=i[s];return e||dm(i)}var mm=fm,pm=hm,E0=mm,is=E0;is.v1=pm;is.v4=E0;var gm=is;const xm=ro(gm);var Ge=(n=>(n[n.deposit=0]="deposit",n[n.payment=1]="payment",n))(Ge||{});const Fi={0:"deposit",1:"payment"},Ni={deposit:0,payment:1};class It{type=1;amount=0;createdAt=new Date(0);id="";hypId="";constructor({type:e=1,amount:t=0,id:r="",hypId:i="",createdAt:s=new Date(0)}){this.type=e,this.amount=parseFloat(t.toFixed(2)),this.id=r,this.hypId=i,this.createdAt=s}static fromJson(e,t){const r=new It({});return e.amount!=null&&(r.amount=e.amount),r.hypId=e.hypId||"",r.id=t,r.type=Ni[e.type]||1,r.createdAt=e.createdAt?new Date(e.createdAt):new Date(0),r}static fromTransaction(e){const t=new It({});return t.type=e.type,t.amount=e.amount,t.id=e.id,t.hypId=e.hypId,t.createdAt=e.createdAt,t}toJson(){const e={};return e.amount=this.amount,e.hypId=this.hypId,e.type=Fi[this.type],e.createdAt=this.createdAt.toISOString(),e}toString(){return JSON.stringify(this.toJson(),null,2)}}class Ht{workMinutes=0;breakMinutes=0;title="";constructor({workMinutes:e=0,breakMinutes:t=0,title:r=""}){this.workMinutes=e,this.breakMinutes=t,this.title=r}get wholeMinutes(){return this.workMinutes+this.breakMinutes}static fromTreatmentTime(e){return new Ht({breakMinutes:e.breakMinutes,workMinutes:e.workMinutes,title:e.title})}static fromJson(e){return new Ht({breakMinutes:e.break||0,workMinutes:e.duration||0,title:e.title||""})}toJson(){const e={};return e.break=this.breakMinutes,e.duration=this.workMinutes,e.title=this.title,e}toString(){return JSON.stringify(this,null,2)}}class _e{totalMinutes=0;index="";id="";note="";price;amountInAdvance=0;paymentType;isMulti=!1;showPrice=!0;showTime=!0;count=1;name="";colorIndex=-2;maxParticipants=1;maxTicketsForUser=1;tempMaxParticipants;hide=!1;showParticipants=!0;times=new Map;priceChangingNote;constructor({times:e=new Map,id:t="",price:r,count:i=1,name:s="",isMulti:a=!1,maxTicketsForUser:c=1,index:o="",amountInAdvance:u=0,colorIndex:h=-2,hide:d=!1,paymentType:l,note:g="",maxParticipants:v=1,showPrice:x=!0,showParticipants:f=!0,showTime:y=!0}={}){this.times=e,this.id=t,this.price=r,this.count=i,this.name=s,this.isMulti=a,this.maxTicketsForUser=c,this.index=o,this.amountInAdvance=u,this.colorIndex=h,this.hide=d,this.paymentType=l,this.note=g,this.maxParticipants=v,this.showPrice=x,this.showParticipants=f,this.showTime=y,this.totalMinutes=this.totalTotalMinutes}isEqual(e){return!0}get totalTotalMinutes(){let e=0;return this.times.forEach((t,r)=>{e+=t.wholeMinutes}),e}get totalWorkMinutes(){let e=0;return this.times.forEach((t,r)=>{e+=t.workMinutes}),e}get totalMinutesForBooking(){return this.totalMinutes*this.count}get amountInAdvanceForBooking(){return this.amountInAdvance*this.count}get totalPriceForBooking(){return this.price.amount*this.count}get nameForBooking(){return this.count===1?this.name:`${this.name} X${this.count}`}static fromTreatment(e){const t=new _e({times:new Map,showTime:e.showTime,paymentType:e.paymentType,id:e.id,hide:e.hide,showPrice:e.showPrice,price:e.price,index:e.index,maxTicketsForUser:e.maxTicketsForUser,colorIndex:e.colorIndex,name:e.name,isMulti:e.isMulti,note:e.note,count:e.count,maxParticipants:e.maxParticipants,amountInAdvance:e.amountInAdvance});return t.priceChangingNote=e.priceChangingNote,t.tempMaxParticipants=e.tempMaxParticipants,t.totalMinutes=e.totalMinutes,e.times.forEach((r,i)=>{t.times.set(i,Ht.fromTreatmentTime(r))}),t}static fromTreatmentsMap(e){let t=0;const r=new _e({price:new Me({amount:"0",currency:Dr})});return e.forEach((i,s)=>{for(let a=0;a<i.count;a++)i.times.forEach((c,o)=>{r.times.set(t.toString(),c),t++}),i.price&&(r.price.amount+=i.price.amount,r.price.currency=i.price.currency),r.name===""?r.name=i.name:r.name+=` + ${i.name}`,r.showTime=r.showTime&&i.showTime,r.showPrice=r.showPrice&&i.showPrice,r.paymentType=i.paymentType,r.amountInAdvance+=i.amountInAdvance,r.totalMinutes+=i.totalMinutes}),r}get participants(){return this.tempMaxParticipants!==void 0?this.tempMaxParticipants:this.maxParticipants}priceToString(){return this.price.toString()}minutesToString(){return mr(new F({minutes:this.totalMinutes}))}static fromJson(e,t){const r=new _e({times:new Map,id:e.id||"",colorIndex:e.colorIndex||-2,maxTicketsForUser:e.maxTicketsForUser||1,index:t,hide:e.hide||!1,name:e.name||"",isMulti:e.isMulti||!1,note:e.note||"",count:e.count||1,price:e.price?Me.fromJson(e.price):void 0,amountInAdvance:e.amountInAdvance!==void 0?typeof e.amountInAdvance=="number"?e.amountInAdvance:parseFloat(e.amountInAdvance):0,maxParticipants:e.maxParticipants||1,paymentType:Ni[e.paymentType],showPrice:e.showPrice||!1,showTime:e.showTime||!1,showParticipants:e.showParticipants||!0});if(r.priceChangingNote=e.priceChangingNote,r.tempMaxParticipants=e.tempMaxParticipants,e.times)for(const i in e.times)r.times.set(i,Ht.fromJson(e.times[i]));return r}toJson(){const e={};return e.times={},this.times.forEach((t,r)=>{e.times[r]=t.toJson()}),e.name=this.name,this.note!==""&&(e.note=this.note),this.id!==""&&(e.id=this.id),this.hide&&(e.hide=this.hide),this.maxTicketsForUser>1&&(e.maxTicketsForUser=this.maxTicketsForUser),this.colorIndex!==-2&&(e.colorIndex=this.colorIndex),this.priceChangingNote!==void 0&&(e.priceChangingNote=this.priceChangingNote),e.price=this.price?this.price.toJson():void 0,this.amountInAdvance!==0&&(e.amountInAdvance=this.amountInAdvance),this.paymentType!=null&&Fi[this.paymentType]!=null&&(e.paymentType=Fi[this.paymentType]),this.isMulti&&(e.isMulti=this.isMulti),this.tempMaxParticipants!==void 0&&(e.tempMaxParticipants=this.tempMaxParticipants),this.count!==1&&(e.count=this.count),this.maxParticipants!==1&&(e.maxParticipants=this.maxParticipants),this.showParticipants||(e.showParticipants=this.showParticipants),e.showPrice=this.showPrice,e.showTime=this.showTime,e}static fromOldJson(e,t,r,i){const s=new _e({});if(e.times)for(const a in e.times)e.times.hasOwnProperty(a)&&s.times.set(a,Ht.fromJson(e.times[a]));return s.id="",s.colorIndex=i,s.index=t,s.name=s.parseNameFromDbField(r),e.price&&(s.price=Me.fromJson(e.price)),e.amountInAdvance!==void 0&&(s.amountInAdvance=typeof e.amountInAdvance=="number"?e.amountInAdvance:parseFloat(e.amountInAdvance)),s.paymentType=Ni[e.paymentType],s.showPrice=e.showPrice||!1,s.showTime=e.showTime||!1,s.totalMinutes=s.totalTotalMinutes,s}parseNameFromDbField(e){return e.replace(Fs,"/").replace(Ns,"*")}parseNameToDbField(e){return e.replace("/",Fs).replace("*",Ns)}toString(){return JSON.stringify(this,null,2)}}class ss{businessId="";businessName="";date;id="";workerId="";shopIcon=new me;constructor({businessId:e="",date:t,id:r="",workerId:i="",businessName:s="",shopIcon:a=new me}={}){this.businessId=e,this.date=t||null,this.id=r,this.workerId=i,this.businessName=s,this.shopIcon=a}static fromJsonStr(e){const t=JSON.parse(e),r=t.date?new Date(t.date):null,i=t.shopIcon?me.fromJsonStr(t.shopIcon):new me,s=new ss({businessId:t.businessId,date:r,id:t.id,workerId:t.workerId,businessName:t.businessName});return s.shopIcon=i,s}toJsonStr(){const e={businessId:this.businessId,date:this.date?.toString(),id:this.id,workerId:this.workerId,businessName:this.businessName,shopIcon:this.shopIcon.toJsonStr()};return JSON.stringify(e)}toString(){return this.toJsonStr()}}class as extends ss{isRecurrence=!1;totalMinutes=0;constructor({businessId:e,date:t,id:r,workerId:i,businessName:s,totalMinutes:a,isRecurrence:c,shopIcon:o}){super({businessId:e,date:t,id:r,workerId:i,businessName:s,shopIcon:o}),this.totalMinutes=a,this.isRecurrence=c}static fromJsonStr(e){const t=JSON.parse(e),r=t.businessId||"",i=t.businessName||"",s=t.date?new Date(t.date):void 0,a=t.workerId||"",c=t.id||"",o=t.isRecurrence||!1,u=t.totalMinutes||0,h=t.shopIcon?me.fromJsonStr(t.shopIcon):void 0;return new as({businessId:r,date:s,id:c,workerId:a,businessName:i,totalMinutes:u,isRecurrence:o,shopIcon:h})}toJsonStr(){const e={};return e.businessId=this.businessId,e.isRecurrence=this.isRecurrence,e.totalMinutes=this.totalMinutes,e.date=this.date?.toISOString()||null,e.businessName=this.businessName,e.id=this.id,e.workerId=this.workerId,e.shopIcon=this.shopIcon?.toJsonStr()||null,JSON.stringify(e)}toString(){return this.toJsonStr()}}const Ja="~.9.~",vm="..",bi="_";class Ar{id="";businessId="";workerName="";date="";workerId="";timeStr="";treatmentId="";treatmentName="";constructor({workerName:e="",date:t="",workerId:r="",timeStr:i="",treatmentId:s="",treatmentName:a="",businessId:c=""}){this.workerName=e,this.date=t,this.workerId=r,this.timeStr=i,this.treatmentId=s,this.treatmentName=a,this.businessId=c}fixEmptyAttributes(){this.workerName=this.workerName===""?"E":this.workerName,this.date=this.date===""?"E":this.date,this.businessId=this.businessId===""?"E":this.businessId,this.workerId=this.workerId===""?"E":this.workerId}static fromJson(e,t){const r=new Ar({});return r.id=t,r.workerName=e.workerName??"",r.date=e.date??"",r.timeStr=e.timeStr??"",r.treatmentId=e.treatmentId??"",r.treatmentName=e.treatmentName??"",r.businessId=e.businessId??"",r.workerId=e.workerId??"",r}get isMulti(){return this.timeStr!==""}static fromTopicStr(e){const t=new Ar({}),r=e.split(vm),i=r[0].split(bi),s=r[1].split(bi);return t.businessId=i[0],t.workerId=i[1].replaceAll(Ja,"+"),t.date=i[2],t.workerName=s[1],t}isEqual(e){return JSON.stringify(e.toJson())===JSON.stringify(this.toJson())}toTopicStr(){this.fixEmptyAttributes();const e=this.workerId.replaceAll("+",Ja);return[this.businessId,e,this.date,this.timeStr,this.treatmentId].join(bi).split("").filter(i=>Xc.test(i)).join("")}get dateTime(){const e=kn(this.date),t=this.timeStr===""?new Date(0):Im(this.timeStr);return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes())}toJson(){const e={};return e.businessId=this.businessId,this.workerName!==""&&(e.workerName=this.workerName),this.workerId!==""&&(e.workerId=this.workerId),this.date!==""&&(e.date=this.date),this.timeStr!==""&&(e.timeStr=this.timeStr),this.treatmentName!==""&&(e.treatmentName=this.treatmentName),this.treatmentId!==""&&(e.treatmentId=this.treatmentId),e}toString(){return JSON.stringify(this.toJson())}}class os{id="";date=new Date(0);isMultiBooking=!1;workerId="";signNewMultiBookingUsers=!1;constructor({id:e,date:t,isMultiBooking:r,workerId:i,signNewMultiBookingUsers:s=!1}){this.id=e,this.date=t,this.isMultiBooking=r,this.workerId=i,this.signNewMultiBookingUsers=s}toJson(){const e={};return e.I=this.id,e.D=this.date.toISOString(),e.WI=this.workerId,this.isMultiBooking&&(e.IMB=this.isMultiBooking),this.signNewMultiBookingUsers&&(e.SNMBU=this.signNewMultiBookingUsers),e}static fromJson(e){const t=e.D?new Date(e.D):new Date(0),r=e.I||"",i=e.IMB||!1,s=e.WI||"",a=e.SNMBU||!1;return new os({id:r,date:t,isMultiBooking:i,workerId:s,signNewMultiBookingUsers:a})}toString(){return JSON.stringify(this,null,2)}}class nr{userId="";name="";gender=z.male;phone="";payments={};isExist=!1;fcmTokens;isVerifiedPhone=!1;userDecline=!1;constructor({userId:e="",name:t="",gender:r=z.male,isVerifiedPhone:i=!1,phone:s="",isExist:a=!0,userDecline:c=!1}){this.userId=e,this.name=t,this.gender=r,this.isVerifiedPhone=i,this.phone=s,this.isExist=a,this.userDecline=c}get customerHashPhone(){return bn(this.phone)}get customerPhoneAsCollection(){return this.phone.replaceAll("-","")}get isPaid(){return Object.keys(this.payments).length>0}static fromJson(e,t){const r=new nr({userId:t,name:e.N??"",gender:e.G?et[e.G]:z.male,isVerifiedPhone:e.IVP??!1,phone:e.P??"",isExist:e.IE??!0,userDecline:e.UD??!1});return e.PY!=null&&typeof e.PY=="object"&&Object.entries(e.PY).forEach(([i,s])=>{r.payments[i]=s?new Date(s):new Date(0)}),r}toJson(){const e={};return e.N=this.name,this.isVerifiedPhone&&(e.IVP=this.isVerifiedPhone),this.isExist||(e.IE=this.isExist),e.P=this.phone,this.gender!==z.male&&(e.G=z[this.gender]),Object.keys(this.payments).length>0&&(e.PY={},Object.entries(this.payments).forEach(([t,r])=>{e.PY[t]=r.toString()})),this.userDecline&&(e.UD=this.userDecline),e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class wt extends Set{constructor(e,t){super(e),t&&this.sort(t)}sort(e){this.clear(),Array.from(this).sort(e).forEach(t=>this.add(t))}get last(){if(this.size===0)return;const e=Array.from(this);return e[e.length-1]}get isEmpty(){return this.size===0}elementAt(e){if(!(e<0||e>=this.size))return Array.from(this)[e]}intersection(e){const t=new wt;return this.forEach(r=>{e.has(r)&&t.add(r)}),t}}const wm={0:"years",1:"months",2:"weeks",3:"days"},ym={years:0,months:1,weeks:2,days:3},Dm={0:"YEARLY",1:"MONTHLY",2:"WEEKLY",3:"DAILY"};var T0=(n=>(n[n.endless=0]="endless",n[n.date=1]="date",n[n.repeats=2]="repeats",n))(T0||{});const ki=["SU","MO","TU","WE","TH","FR","SA"],Ci={0:new F({days:365}),1:new F({days:30}),2:new F({days:7}),3:new F({days:1})};class ft{start;endDate;repeats=10;interval=1;freqRecurrence=3;weekDays=new wt;endOption=2;exceptionDates=new Set;customEndDate;constructor({start:e,endOption:t=2,endDate:r,repeats:i=10,interval:s=1,weekDays:a=new wt,customEndDate:c,freqRecurrence:o=3,exceptionDates:u=new Set}){this.start=e,this.weekDays=a,this.endOption=t,this.endDate=r,this.repeats=i,this.interval=s,this.customEndDate=c,this.freqRecurrence=o,this.exceptionDates=u}static fromJson(e,t){const r=new ft({});return r.start=t,r.endDate=e.ED?new Date(e.ED):void 0,r.repeats=e.R||10,r.interval=e.I||1,r.weekDays=new wt(e.WD||[]),r.exceptionDates=new Set(Object.keys(e.EDA||{}).map(kn)),r.freqRecurrence=ym[e.FR]||3,r}toJson({saveStartDate:e=!1,saveEnd:t=!0,saveException:r=!0}){const i={};return t&&this.endDate&&this.endOption===1&&(i.ED=Ue(this.endDate)),t&&this.endOption===2&&(i.R=this.repeats),this.interval!==1&&(i.I=this.interval),this.weekDays.size>0&&this.freqRecurrence===2&&(i.WD=[...this.weekDays]),r&&this.exceptionDates.size>0&&(i.EDA={},this.exceptionDates.forEach(s=>{i.EDA[Ue(s)]=""})),e&&this.start&&(i.SD=this.start.toISOString()),i.FR=wm[this.freqRecurrence],i}static fromRecurrenceEvent(e){return new ft({start:e.start,endDate:e.endDate,repeats:e.repeats,interval:e.interval,freqRecurrence:e.freqRecurrence,weekDays:new wt(e.weekDays),endOption:e.endOption,exceptionDates:new Set(e.exceptionDates)})}isEqual(e){return!this.start||!e.start||this.start.getTime()!==e.start.getTime()||(this.endDate?.getTime()||0)!==(e.endDate?.getTime()||0)?!1:this.repeats===e.repeats&&this.interval===e.interval&&this.freqRecurrence===e.freqRecurrence&&Rs(e.weekDays,this.weekDays)&&Rs(e.exceptionDates,this.exceptionDates)&&this.endOption===e.endOption}get syncfuString(){let e=`FREQ=${Dm[this.freqRecurrence]};`;if(this.freqRecurrence===1&&this.start&&(e+=`BYMONTHDAY=${this.start.getDate()};`),this.freqRecurrence===0&&this.start&&(e+=`BYMONTHDAY=${this.start.getDate()};BYMONTH=${this.start.getMonth()+1};`),e+=`INTERVAL=${this.interval};`,this.freqRecurrence===2&&this.weekDays.size>0&&(e+="BYDAY=",this.weekDays.forEach(t=>{t<ki.length&&(e+=ki[t]+",")}),e=e.slice(0,-1)+";"),this.customEndDate&&(this.endOption===0||this.endOfTheEvent&&this.endOfTheEvent>new Date)){const t=new Date(this.customEndDate.getFullYear(),this.customEndDate.getMonth(),this.customEndDate.getDate(),this.start?.getHours()??0,this.start?.getMinutes()??0);e+=`UNTIL=${Oe(t,"yyyyMMdd'T'HHmmss'Z'")}`}else switch(this.endOption){case 0:break;case 1:if(this.endDate){const t=new Date(this.endDate.getFullYear(),this.endDate.getMonth(),this.endDate.getDate(),this.start?.getHours()??0,this.start?.getMinutes()??0);e+=`UNTIL=${Oe(t,"yyyyMMdd'T'HHmmss'Z'")}`}break;case 2:e+=`COUNT=${this.repeats}`;break}return e}get accurances(){if(!this.start||this.endOption===0)return null;if(this.endOption===2)return this.repeats-this.exceptionDates.size;if(this.endOption===1&&this.endDate){let e=0;if(this.exceptionDates.forEach(t=>{t<=this.endDate&&e++}),this.freqRecurrence===2){let t=0;const r=gt(this.start);this.weekDays.forEach(u=>{this.isAccureInDate({date:ae(r,new F({days:u})),considerException:!1})&&t++});const i=Math.abs(ae(r,new F({days:6})).getTime()-gt(this.endDate).getTime()),s=Math.floor(i/this.rangeBetweenInterval.inMilliseconds),a=gt(this.endDate);let c=0;return ke(a).getTime()!==ke(r).getTime()&&this.weekDays.forEach(u=>{this.isAccureInDate({date:ae(a,new F({days:u})),considerException:!1})&&c++}),s*this.weekDays.size+c+t-e}else if(this.freqRecurrence===1){const t=Za(this.start,this.endDate);return Math.floor(t/this.interval)-e}else{const t=this.start.getTime()-this.endDate.getTime();return Math.floor(Math.abs(t)/this.rangeBetweenInterval.inDays)-e}}return null}get rangeBetweenInterval(){return new F({minutes:Ci[this.freqRecurrence].inMinutes*this.interval})}get endOfTheEvent(){const e=this.rangeBetweenInterval;if(this.endOption===1&&this.endDate!==null)return this.endDate??null;if(this.endOption===2)if(this.freqRecurrence===2){let t=0;const r=this.start.getDay()===7?0:this.start.getDay();this.weekDays.forEach(u=>{u>=r&&t++});const i=this.repeats-t,s=Math.ceil(i/this.weekDays.size),a=i%this.weekDays.size,c=new Date(this.start.getTime()+new F({minutes:e.inMinutes*s}).milliseconds),o=gt(c);this.weekDays=new wt(this.weekDays,(u,h)=>u-h);try{return new Date(o.getTime()+new F({days:a-1<0?this.weekDays.last:this.weekDays.elementAt(a-1)}).inMilliseconds)}catch{return null}}else return this.freqRecurrence===1?Xa(this.start,(this.repeats-1)*this.interval):new Date(this.start.getTime()+new F({minutes:e.inMinutes*(this.repeats-1)}).inMilliseconds);return null}get explainText(){if(this.start===null)return"";let e="";const t=new F({minutes:Ci[this.freqRecurrence].inMinutes*this.interval});switch(this.freqRecurrence){case 0:e+=q("yearTamplate").replaceAll("DURATION",mr(t)).replaceAll("DATE",Oe(this.start,"dd/MM"));break;case 1:e+=q("monthTemplate").replaceAll("DURATION",mr(t)).replaceAll("DATE",this.start.getDate().toString());break;case 2:let i="";this.weekDays.forEach(s=>{i+=q(ki[s])+", "}),i=i.substring(0,i.length-2),e+=q("weekTemplate").replaceAll("DURATION",mr(t)).replaceAll("DAYS",i).replaceAll("AMOUNT",q(Object.keys(this.weekDays).length===1?"onDay":"onDays"));break;case 3:e+=q("dayTemplate").replaceAll("DURATION",mr(t));break}const r=this.endOfTheEvent;return r!==null&&(e+=` ${q("until")} ${Ue(r)}`),e}isAccureInDate({date:e,considerException:t=!0}){if(this.start===null||ke(this.start)>e)return!1;const r=this.endOfTheEvent;if(r!==null&&r<ke(e)||t&&this.exceptionDates.has(ke(e)))return!1;const i=new F({minutes:Ci[this.freqRecurrence].inMinutes*this.interval}),s=new F({milliseconds:e.getTime()-ke(this.start).getTime()}),a=this.start.getDay()===7?0:this.start.getDay(),c=e.getDay()===7?0:e.getDay();if(this.freqRecurrence===2){const o=7-a,u=i.inDays-a,h=(s.inDays+i.inDays)%i.inDays;return(h<o||h>=u)&&this.weekDays.has(c)}if(this.freqRecurrence===1){const o=Za(this.start,e);return this.start.getDate()===e.getDate()&&o%this.interval===0}return s.inDays%i.inDays===0}addRangeBetween(e){const t=new Date(e.getUTCDate());return this.freqRecurrence===1?Xa(t,this.interval):ae(t,new F({minutes:this.rangeBetweenInterval.inMinutes}))}overlapingDatesWith(e){if(this.start===null||e.start===null)return new Set([new Date(0)]);if(this.endOfTheEvent===null&&e.endOfTheEvent===null)return new Set([new Date(0)]);const t=new Set,r=this._getOptimalEventToPassOver(this,e),i=r[0],s=r[1];let a=i.start;for(;ke(a)<=ke(i.endOfTheEvent);){if(i.freqRecurrence===2){const c=gt(a);i.weekDays.forEach(o=>{const u=ae(c,new F({days:o}));s.isAccureInDate({date:u})&&i.isAccureInDate({date:u})&&t.add(ke(u))})}else s.isAccureInDate({date:a})&&i.isAccureInDate({date:a})&&t.add(ke(a));a=this.addRangeBetween(a)}return t}get isRelevant(){return this.endOfTheEvent===null||this.endOfTheEvent>new Date}nearestFutureAccurenceDate(e,{needToBeAfterStart:t=!0}={}){if(this.endOfTheEvent!==null&&e>this.endOfTheEvent)return null;if(this.start===null||e<this.start&&t&&this.isAccureInDate({date:this.start}))return this.start??null;const r=new F({milliseconds:e.getTime()-this.start.getTime()}).inDays;if(this.freqRecurrence===2){const c=Math.floor(r/this.rangeBetweenInterval.inDays);let o=ae(this.start,new F({days:c*this.rangeBetweenInterval.inDays})),u=gt(o);for(const h of this.weekDays){const d=new Date(u.getTime()+new F({days:h}).inMilliseconds);if(d>=e&&(this.endOfTheEvent===null||o<=this.endOfTheEvent))return d}o=ae(o,this.rangeBetweenInterval),u=gt(o);for(const h of this.weekDays){const d=ae(u,new F({days:h}));if(d>=e&&(this.endOfTheEvent===null||o<=this.endOfTheEvent))return d}return null}const i=Math.ceil(r/this.rangeBetweenInterval.inDays);let s=ae(this.start,new F({days:i*this.rangeBetweenInterval.inDays}));s<e&&(s=this.addRangeBetween(s));const a=this.endOfTheEvent;for(;!this.isAccureInDate({date:s})&&(a===null||s<a);)s=this.addRangeBetween(s);return a===null||s<=a?s:null}_getOptimalEventToPassOver(e,t){return e.endOfTheEvent===null&&t.endOfTheEvent!==null?[t,e]:e.endOfTheEvent!==null&&t.endOfTheEvent===null?[e,t]:(t.jumps??99999)<(e.jumps??99999)?[t,e]:[e,t]}get jumps(){if(this.start===null||this.endOfTheEvent===null)return null;const t=new F({milliseconds:this.start.getTime()-this.endOfTheEvent.getTime()}).inMinutes/this.rangeBetweenInterval.inMinutes;return Math.ceil(t*Math.max(this.weekDays.size,1))}toString(){return JSON.stringify(this,null,2)}}class Ir{eventName="";from=new Date(0);to=new Date(0);colorIndex=-1;isBreak=!1;eventIndex=0;eventsBelong=1;partOfRecurrence=!1;treatmentName="";transactionCounter=0;wantDelete=!1;onHold=!1;hasInvoice=!1;durationMinutes=0;breakNotificaiton=!1;minutesBreakNotification=60;extraData;note=null;ids=[];recurrenceEvent;timeId;hasDebt=!1;confirmArrival=!1;treatmentId;isMulti=!1;currentParticipants=0;debtCounter=0;onHoldCounter=0;invoiceCoverCounter=0;transactionsPerUser=0;wantDeleteCounter=0;confirmedArrivalAmount=0;recurrenceFatherBookingId;recurrenceBreakFatherDate;blockSchedule=!0;recurrenceBreakRefInfo;breakIconData;breakBusinessName;breakFatherRecurrenceId;breakBusinessId;breakAddedToDeviceCalendar=!1;breakId="";vacationId="";belongTreatments=1;vacationCreatedAt=void 0;isVacation=!1;vacationAddedToDeviceCalendar=!1;vacationEndTemp;isHoliday=!1;holidayReligion;subTreatmentName="";totalBookingMinutes=0;waitingListCounter=1;isWaitingList=!1;waitingListCustomerGender=z.male;customerPhoneWaitingList="";constructor(){}static fromJson({json:e,timeStr:t,dayString:r,monthString:i,workerId:s,businessModel:a,newTimeId:c}){const o=new Ir;o.eventName=e.p??"",o.eventIndex=e.i??0,o.onHold=e.oH??!1,o.eventsBelong=e.EB??1,o.wantDelete=e.wD??!1,o.isVacation=e.IV??!1,o.isVacation&&o.eventName===""&&(o.eventName=q("Vacation")),o.vacationId=c??"",o.breakFatherRecurrenceId=e.BFRI??"",o.vacationAddedToDeviceCalendar=e.VATDC??!1,o.blockSchedule=e.BS??!0,o.transactionCounter=e.TC??0,o.transactionsPerUser=e.TPU??0,o.hasDebt=e.HD??!1,o.debtCounter=e.DC??0,o.treatmentId=e.TID,o.confirmArrival=e.CA??!1,o.confirmedArrivalAmount=e.CAA??0,o.durationMinutes=e.d??0,o.treatmentName=e.TN??"",o.hasInvoice=e.Hi??!1,o.invoiceCoverCounter=e.ICC??0,o.note=e.N,o.recurrenceFatherBookingId=e.RFBI,o.wantDeleteCounter=e.WDC??0,o.onHoldCounter=e.OHC??0,o.isMulti=e.IM??!1,o.currentParticipants=e.CP??0,o.breakNotificaiton=e.BN??!1,o.partOfRecurrence=e.POR??!1,o.minutesBreakNotification=e.MBN??60,o.recurrenceBreakRefInfo=e.RBRI?ft.fromJson(e.RBRI):void 0,o.recurrenceBreakFatherDate=e.RBFD;const u=e.IB??!1,h=new Date(t),d=new Date(`${r}-${i}`),l=new Date(d.getFullYear(),d.getMonth(),d.getDate(),h.getHours(),h.getMinutes());return new Date(l.getTime()+o.durationMinutes*6e4),e.RE&&ft.fromJson(e.RE,l),o.colorIndex=e.c??(o.isVacation?1:0),o.ids=[s],o.isHoliday=!1,o.subTreatmentName="",o.totalBookingMinutes=0,o.waitingListCounter=1,o.isWaitingList=!1,o.waitingListCustomerGender=z.male,o.customerPhoneWaitingList="",u&&(o.breakIconData=a?.design.shopIconData,o.breakBusinessName=a?.shopName,o.breakBusinessId=a?.businessId),e.VE&&(o.vacationEndTemp=kn(e.VE)),o}get endOfBooking(){return new Date(this.from.getTime()+this.totalBookingMinutes*6e4)}toJson(){const e={};return e.p=this.eventName,e.d=this.durationMinutes,e.c=this.colorIndex,this.minutesBreakNotification!==60&&(e.MBN=this.minutesBreakNotification),this.breakNotificaiton&&(e.BN=this.breakNotificaiton),this.onHoldCounter>0&&(e.OHC=this.onHoldCounter),this.confirmArrival&&(e.CA=this.confirmArrival),this.confirmedArrivalAmount>0&&(e.CAA=this.confirmedArrivalAmount),this.blockSchedule||(e.BS=this.blockSchedule),this.treatmentId!==null&&(e.TID=this.treatmentId),this.wantDeleteCounter>0&&(e.WDC=this.wantDeleteCounter),this.hasDebt&&(e.HD=this.hasDebt),this.transactionCounter>0&&(e.TC=this.transactionCounter),this.transactionsPerUser>0&&(e.TPU=this.transactionsPerUser),this.debtCounter>0&&(e.DC=this.debtCounter),this.invoiceCoverCounter>0&&(e.ICC=this.invoiceCoverCounter),this.eventsBelong!==1&&(e.EB=this.eventsBelong),this.isBreak&&(e.IB=this.isBreak),this.breakId!==""&&(e.BI=this.breakId),this.eventIndex!==0&&(e.i=this.eventIndex),this.treatmentName!==""&&(e.TN=this.treatmentName),this.onHold&&(e.oH=this.onHold),this.isMulti&&(e.IM=this.isMulti),this.currentParticipants>0&&(e.CP=this.currentParticipants),this.wantDelete&&(e.wD=this.wantDelete),this.hasInvoice&&(e.Hi=this.hasInvoice),this.recurrenceEvent!=null&&(e.RE=this.recurrenceEvent.toJson({})),this.note!==null&&this.note!==""&&(e.N=this.note),this.partOfRecurrence&&(e.POR=this.partOfRecurrence),this.recurrenceFatherBookingId!=null&&(e.RFBI=this.recurrenceFatherBookingId),this.isVacation&&(e.IV=this.isVacation),this.breakFatherRecurrenceId!=null&&(e.BFRI=this.breakFatherRecurrenceId),this.vacationAddedToDeviceCalendar&&(e.VATDC=this.vacationAddedToDeviceCalendar),this.vacationCreatedAt!=null&&(e.VCA=this.vacationCreatedAt.toString()),this.breakAddedToDeviceCalendar&&(e.BATDC=this.breakAddedToDeviceCalendar),this.timeId!==null&&this.recurrenceEvent===null&&(e.RTI=this.timeId),this.recurrenceBreakFatherDate!==null&&(e.RBFD=this.recurrenceBreakFatherDate),this.recurrenceBreakRefInfo!=null&&(e.RBRI=this.recurrenceBreakRefInfo.toJson({saveStartDate:!1,saveEnd:!0,saveException:!1})),this.subTreatmentName!==""&&(e.STN=this.subTreatmentName),this.totalBookingMinutes!==this.durationMinutes&&(e.TBM=this.totalBookingMinutes),this.belongTreatments>1&&(e.BTR=this.belongTreatments),e}toString(){return JSON.stringify(this,null,2)}}class Xt{createdAt=new Date(0);id="";amount=0;description="";showUser=!1;constructor({createdAt:e,amount:t,id:r,showUser:i,description:s=""}){this.createdAt=e,this.amount=t,this.id=r,this.showUser=i,this.description=s}static fromJson(e,t){return new Xt({createdAt:e.createdAt?new Date(e.createdAt):new Date(0),amount:e.amount!=null?typeof e.amount=="number"?e.amount:parseFloat(e.amount):0,id:t,showUser:e.showUser??!1,description:e.description??""})}static fromDebt(e){return new Xt({createdAt:e.createdAt,amount:e.amount,id:e.id,showUser:e.showUser,description:e.description})}isEqual(e){return e.id===this.id&&e.description===this.description&&e.showUser===this.showUser&&e.createdAt.toString()===this.createdAt.toString()&&this.amount===e.amount}toJson(){const e={};return e.createdAt=this.createdAt.toISOString(),e.amount=this.amount,this.showUser&&(e.showUser=this.showUser),this.description!==""&&(e.description=this.description),e}}class bm{date=new Date(0);workerId="";workerName="";workerPhone="";buisnessId="";businessName="";recurrenceEvent;recurrenceRef;recurrenceFatherDate;recurrenceEventRefInfo;recurrenceNotificationsLastDate;recurrenceChildDate;constructor({workerId:e="",workerName:t="",businessName:r="",buisnessId:i="",workerPhone:s=""}={}){this.workerId=e,this.workerName=t,this.businessName=r,this.buisnessId=i,this.workerPhone=s}}class Zt{invoiceId="";docId="";monthStr="";issuedBy="";amount=0;constructor({monthStr:e,invoiceId:t,docId:r,amount:i,issuedBy:s}){this.monthStr=e,this.invoiceId=t,this.docId=r,this.amount=i,this.issuedBy=s}toJson(){const e={};return e.monthStr=this.monthStr,e.docId=this.docId,e.issuedBy=this.issuedBy,e.amount=this.amount,e}static fromJson(e,t,r){const i=new Zt({});return i.invoiceId=t,i.docId=e.docId??"",i.monthStr=e.monthStr??"",i.issuedBy=e.issuedBy??r,e.amount!=null&&(i.amount=typeof e.amount=="number"?e.amount:parseFloat(e.amount)),i}static fromBookingInvoiceData(e){const t=new Zt({});return t.invoiceId=e.invoiceId,t.docId=e.docId,t.monthStr=e.monthStr,t.issuedBy=e.issuedBy,t.amount=e.amount,t}toString(){return JSON.stringify(this.toJson(),null,2)}}const km="simpletor.officialsimplecode.com",Cm="?PaymentId=PAYMENT_ID";class cs{id="";workerId="";createdAt=new Date(0);signNewMultiBookingUsers=!0;constructor({id:e,workerId:t}){this.id=e,this.workerId=t}get link(){return`https://${km}/${Cm}`.replace("PAYMENT_ID",this.id)}static fromJson(e){const t=new cs({});return t.id=e.id??"",e.createdAt!=null&&(t.createdAt=new Date(e.createdAt)||new Date(0)),t.workerId=e.workerId??"",t.signNewMultiBookingUsers=e.signNewMultiBookingUsers??!0,t}toJson(){const e={};return this.createdAt.getTime()!==new Date(0).getTime()&&(e.createdAt=this.createdAt.toISOString()),this.signNewMultiBookingUsers||(e.signNewMultiBookingUsers=this.signNewMultiBookingUsers),e.id=this.id,e.workerId=this.workerId,e}toString(){return JSON.stringify(this.toJson(),null,2)}}const{v4:Ka}=xm;class Ze extends bm{customerName="";customerPhone="";customerId="";orderingOptions=Ie.app;isVerifiedPhone=!1;isUserExist=!0;notificationType=L.none;workerNotificationOption=j.PushOrSMS;workerRemindersTypes=new Map;workerDeleted=!1;clientMail="";showAdressAlert=!1;showPhoneAlert=!1;signOnDeviceCalendar=!1;isMultiRef=!1;cancelDate;lastTimeNotifyOnDebt;adress="";wasWaiting=!1;bookingDate=new Date(0);note="";needCancel=!1;treatments=new Map;userGender=z.anonymous;workerGender=z.anonymous;status=fe.approved;confirmedArrival=!1;bookingId="";userFcms=new Set;clientNote="";shopIcon=new me;remindersTypes=new Map;createdAt=new Date;finishInvoices=!1;invoices=new Map;transactions=new Map;recurrenceTimeId;recurreneFatherDate;debts=new Map;addToClientAt=!1;paymentRequest;userDeleted=!1;fatherMultiBooking;fatherRecurrenceBooking;constructor({workerId:e,workerName:t,businessName:r,buisnessId:i,workerPhone:s}){super({workerId:e,workerName:t,businessName:r,buisnessId:i,workerPhone:s})}static empty(){return new Ze({})}static fromBooking(e){const t=new Ze({});return t.customerName=e.customerName,t.customerPhone=e.customerPhone,t.customerId=e.customerId,t.workerPhone=e.workerPhone,t.workerGender=e.workerGender,t.userGender=e.userGender,t.businessName=e.businessName,t.buisnessId=e.buisnessId,t.bookingId=e.bookingId,t.workerGender=e.workerGender,t.shopIcon=e.shopIcon,t.recurrenceTimeId=e.recurrenceTimeId,t.note=e.note,t.workerRemindersTypes={...e.workerRemindersTypes},t.signOnDeviceCalendar=e.signOnDeviceCalendar,t.userDeleted=e.userDeleted,t.workerNotificationOption=e.workerNotificationOption,t.paymentRequest=e.paymentRequest,t.remindersTypes={...e.remindersTypes},t.isVerifiedPhone=e.isVerifiedPhone,t.workerDeleted=e.workerDeleted,t.finishInvoices=e.finishInvoices,t.adress=e.adress,t.addToClientAt=e.addToClientAt,t.showAdressAlert=e.showAdressAlert,t.showPhoneAlert=e.showPhoneAlert,t.orderingOptions=e.orderingOptions,t.isUserExist=e.isUserExist,t.isMultiRef=e.isMultiRef,t.needCancel=e.needCancel,t.userGender=e.userGender,t.bookingDate=e.bookingDate,t.recurrenceNotificationsLastDate=e.recurrenceNotificationsLastDate,t.cancelDate=e.cancelDate,t.customerId=e.customerId,t.workerPhone=e.workerPhone,t.lastTimeNotifyOnDebt=e.lastTimeNotifyOnDebt,e.debts.forEach((r,i)=>{t.debts.set(i,Xt.fromDebt(r))}),t.treatments=new Map,e.treatments.forEach((r,i)=>{const s=_e.fromTreatment(r);s.index=i,t.treatments.set(i,r)}),t.invoices=new Map,e.invoices.forEach((r,i)=>{t.invoices.set(i,Zt.fromBookingInvoiceData(r))}),t.clientNote=e.clientNote,t.status=e.status,t.confirmedArrival=e.confirmedArrival,t.createdAt=e.createdAt,t.clientMail=e.clientMail,t.workerName=e.workerName,t.buisnessId=e.buisnessId,t.notificationType=e.notificationType,t.userFcms=new Set(e.userFcms),t.recurreneFatherDate=e.recurreneFatherDate,t.recurrenceRef=e.recurrenceRef,t.transactions=new Map,e.transactions.forEach((r,i)=>{t.transactions.set(i,It.fromTransaction(r))}),t}static fromJson(e,t){try{const r=new Ze({});if(r.workerGender=et[e.workerGender]||z.anonymous,r.customerName=e.customerName||"",r.note=e.note||"",r.bookingId=t,r.signOnDeviceCalendar=e.signOnDeviceCalendar||!1,r.userDeleted=e.userDeleted||!1,r.workerDeleted=e.workerDeleted||!1,r.customerId=e.customerId||e.customerPhone||"",r.workerPhone=e.workerPhone||"",r.customerPhone=e.customerPhone||"",r.recurrenceTimeId=e.recurrenceTimeId,r.workerId=e.workerId||e.workerPhone||"",r.adress=e.adress||"",e.shopIcon!=null&&(r.shopIcon=me.fromJson(e.shopIcon)),r.isVerifiedPhone=e.isVerifiedPhone||!1,r.customerId==r.customerPhone&&r.customerId.length==14&&(r.isVerifiedPhone=!0),r.isMultiRef=e.isMultiRef||!1,r.needCancel=e.needCancel||!1,e.lastTimeNotifyOnDebt!=null&&(r.lastTimeNotifyOnDebt=new Date(e.lastTimeNotifyOnDebt)),r.finishInvoices=e.finishInvoices||!1,e.remindersTypes!=null?Object.entries(e.remindersTypes).forEach(([i,s])=>{yt[i]!=null&&r.remindersTypes.set(yt[i],s)}):r.remindersTypes=new Map([pe.regular,e.minutesBeforeNotify||60]),e.workerRemindersTypes!=null&&Object.entries(e.workerRemindersTypes).forEach(([i,s])=>{yt[i]!=null&&r.workerRemindersTypes.set(yt[i],s)}),r.clientMail=e.clientMail||"",e.recurrenceNotificationsLastDate!=null&&(r.recurrenceNotificationsLastDate=new Date(e.recurrenceNotificationsLastDate)),r.clientNote=e.clientNote||"",r.recurreneFatherDate=e.recurreneFatherDate,r.recurrenceRef=e.recurrenceRef,e.orderingOptions!=null&&(r.orderingOptions=bo[e.orderingOptions]||Ie.app),e.debts!=null&&Object.entries(e.debts).forEach(([i,s])=>{r.debts.set(i,Xt.fromJson(s,i))}),e.cancelDate!=null&&(r.cancelDate=new Date(e.cancelDate)),r.wasWaiting=e.wasWaiting||!1,r.isUserExist=e.isUserExist||!0,e.invoices!=null&&Object.entries(e.invoices).forEach(([i,s])=>{r.invoices.set(i,Zt.fromJson(s,i,r.workerId))}),e.userGender!=null&&(r.userGender=et[e.userGender]||z.anonymous),r.status=yo[e.status.toString()]||fe.approved,r.confirmedArrival=e.confirmedArrival||!1,e.bookingDate!=null&&(r.bookingDate=new Date(e.bookingDate)||new Date(0)),e.treatments!=null){r.treatments=new Map;let i=0;Object.entries(e.treatments).forEach(([s,a])=>{const c=e.treatments[i.toString()];r.treatments.set(i.toString(),_e.fromJson(c,i.toString())),i+=1})}else if(e.treatment!=null){const i=_e.fromJson(e.treatment,"0");r.treatments.set("0",i)}return r.showAdressAlert=e.showAdressAlert||!1,r.showPhoneAlert=e.showPhoneAlert||!1,r.workerName=e.workerName||"",r.businessName=e.businessName||"",r.buisnessId=e.buisnessId||"",e.notificationType!=null?r.notificationType=ko[e.notificationType]||L.push:e.withMessage?r.notificationType=L.message:r.notificationType=L.push,e.workerNotificationOption!=null&&(r.workerNotificationOption=pn[e.workerNotificationOption]||j.PushOrSMS),e.userFcms!=null?e.userFcms.forEach(i=>{r.userFcms.add(i)}):e.deviceFCM!=null&&e.deviceFCM!=""&&(r.userFcms=new Set([e.deviceFCM])),e.createdAt!=null&&(r.createdAt=new Date(e.createdAt)||new Date(0)),e.RE!=null&&(r.recurrenceEvent=ft.fromJson(e.RE,r.bookingDate)),e.RERI!=null&&(r.recurrenceEventRefInfo=ft.fromJson(e.RERI)),r.transactions=new Map,e.transactions!=null&&Object.entries(e.transactions).forEach(([i,s])=>{r.transactions.set(i,It.fromJson(s,i))}),e.paymentRequest!=null&&(r.paymentRequest=cs.fromJson(e.paymentRequest)),r}catch(r){return oe.error(`Error loading booking doc ${t}: ${r}`),new Ze({})}}get treatmentLength(){return Array.from(this.treatments.values()).reduce((e,t)=>t.count+e,0)}get canSendMessage(){return this.isVerifiedPhone||this.orderingOptions===Ie.byWorker}get treatmentsToStringNotDetailed(){return this.treatmentLength===1?this.treatments.values().next().value.name:this.treatments.size===1?`${this.treatments.values().next().value.name}x${this.treatmentLength}`:`${this.treatments.values().next().value.name}+${this.treatmentLength-1}`}get isPassed(){if(this.recurrenceEvent!=null){if(this.recurrenceChildDate!=null)return ae(this.recurrenceChildDate,new F({minutes:this.totalMinutes+2}))<new Date;const e=this.recurrenceEvent.endOfTheEvent;return e!==null&&e<Em(new Date)}else return ae(this.bookingDate,new F({minutes:this.totalMinutes+2}))<new Date}get totalMinutes(){let e=0;return this.treatments.forEach((t,r)=>{e+=t.totalMinutesForBooking}),e}get customerHashPhone(){return bn(this.customerPhone)}get bookingWorkTimes(){const e=new Map;let t=this.bookingDate;return Object.values(this.treatments).forEach(r=>{Array.from({length:r.count}).forEach(()=>{Object.values(r.times).forEach(i=>{t=ae(t,new F({minutes:i.breakMinutes})),e.set(Ft(t),i.workMinutes),t=ae(t,new F({minutes:i.workMinutes}))})})}),e}get totalEventsCount(){let e=0;return Object.values(this.treatments).forEach(t=>{e+=t.times.length*t.count}),e}get invoicesCoverPrice(){const e=Object.values(this.invoices).reduce((t,r)=>t+r.amount,0);return this.finishInvoices||this.invoices.size>0&&e>=this.totalPrice.amount}get totalPrice(){let e=new Me({amount:"0",currency:Dr});return Object.values(this.treatments).forEach(t=>{e.amount+=t.totalPriceForBooking,e.currency=t.price.currency}),e}get typesOfEvents(){const e=new Map;return this.recurrenceEvent!==null?new Map:(this.needCancel&&e.set(kt.needCancel,1),this.debts.size>0&&e.set(kt.withDebts,1),this.status===fe.waiting&&e.set(kt.onHold,1),e)}get bookingsEventsAsJson(){const e=new Map;let t=this.bookingDate,r=this.totalEventsCount,i=0;return this.invoicesCoverPrice,this.treatments.forEach((s,a)=>{Array.from({length:s.count}).forEach(()=>{s.times.forEach((c,o)=>{t=ae(t,new F({minutes:c.breakMinutes}));const u=this.recurrenceTimeId!=null&&this.recurrenceEvent!=null?`${Ft(t)}_${this.recurrenceTimeId}`:Ft(t),h=new Ir;h.eventIndex=i,h.treatmentId=s.id,h.subTreatmentName=c.title,h.totalBookingMinutes=this.totalMinutes,h.belongTreatments=this.treatmentLength,h.onHold=this.status==="waiting",h.wantDelete=this.needCancel,h.ids=[this.workerId],h.confirmArrival=this.confirmedArrival,h.hasDebt=this.debts.size>0,h.timeId=this.recurrenceEvent!=null?this.recurrenceTimeId:void 0,h.treatmentName=s.name,h.transactionCounter=this.transactions.size,h.eventsBelong=r,h.isBreak=!1,h.partOfRecurrence=this.recurrenceRef!=null,h.hasInvoice,h.recurrenceEvent=this.recurrenceEvent,h.eventName=this.customerId,h.from=t,h.durationMinutes=c.workMinutes,h.colorIndex=s.colorIndex,e.set(u,h.toJson()),t=ae(t,new F({minutes:c.workMinutes})),i+=1})})}),e}get monthStr(){return on(this.bookingDate)}get toBookingReferencePaymentObj(){return new os({id:this.bookingId,isMultiBooking:!1,date:this.bookingDate,workerId:this.workerId})}async copyDataToOrder({user:e,worker:t,needToHoldOn:r,business:i,noteText:s="",clientNoteText:a=""}){this.customerName=e.name,this.customerId=e.id,this.customerPhone=e.phoneNumber,this.userGender=e.gender,this.isVerifiedPhone=e.isVerifiedPhone,this.clientMail=e.userPublicData.email;const c=e.userPublicData.clientAt;this.addToClientAt=!c.hasOwnProperty(i.businessId)||!c.get(i.businessId)?.has(t.id),this.orderingOptions=Ie.web,this.adress=i.adress,this.clientNote=a,this.wasWaiting=!1,this.note=s,this.shopIcon=i.design.shopIconData,this.userFcms=e.fcmsTokens,Bn(this.bookingDate,new Date).inMinutes<60&&!r&&(this.confirmedArrival=!0),this.workerNotificationOption=t.notifications.notificationOption,this.workerRemindersTypes={...t.notifications.remindersTypes};for(const[o,u]of t.notifications.remindersTypes)this.isPassed||o===pe.confirmArrival&&this.confirmedArrival||(Dt(this.bookingDate,new F({minutes:u}))<ae(new Date,new F({seconds:1}))&&this.recurrenceEvent===void 0?(this.remindersTypes.set(o,this.remindersTypes.get(o)-this.remindersTypes.get(o)%5),this.remindersTypes.get(o)<10&&this.remindersTypes.delete(o)):this.remindersTypes.set(o,u));this.workerId=t.id,this.workerPhone=t.phone,this.workerName=t.name,this.workerGender=t.gender,this.showPhoneAlert=t.notifications.showPhoneAlert,this.showAdressAlert=t.notifications.showAdressAlert,this.businessName=i.shopName,this.bookingId=this.bookingId===""?Ka():this.bookingId,this.buisnessId=i.businessId,r?this.status=fe.waiting:this.status=fe.approved,this.isVerifiedPhone=e.isVerifiedPhone,this.notificationType=bf({booking:this,worker:t})}updateBookingByBooking({oldBooking:e,worker:t,needToHoldOn:r,business:i,newClientNote:s,keepRecurrence:a=!1}){if(this.customerName=e.customerName,this.customerPhone=e.customerPhone,this.userGender=e.userGender,this.clientMail=e.clientMail,this.customerId=e.customerId,this.note=e.note,e.treatments.size>this.treatments.size){const o=new Map;let u=0;for(const[h,d]of Object.entries(this.treatments))o.set(u.toString(),d),u+=1;this.treatments=o}const c=new Map([...e.treatments.entries()].sort((o,u)=>o[0].localeCompare(u[0])));e.treatments=c,e.customerPhone!=this.customerPhone?this.orderingOptions=Ie.byWorker:this.orderingOptions=e.orderingOptions,s!=null?this.clientNote=s:this.clientNote=e.clientNote,this.workerNotificationOption=t.notifications.notificationOption,this.workerRemindersTypes={...t.notifications.remindersTypes},t.notifications.remindersTypes.forEach((o,u)=>{Dt(this.bookingDate,new F({minutes:o}))<ae(new Date,new F({minutes:1}))&&(this.remindersTypes.set(u,Math.abs(Math.floor(Bn(new Date,this.bookingDate).inMinutes/2))),this.remindersTypes.set(u,this.remindersTypes.get(u)-this.remindersTypes.get(u)%5),this.remindersTypes.get(u)<10&&this.remindersTypes.delete(u))}),this.debts={...e.debts},this.isUserExist=e.isUserExist,this.createdAt=e.createdAt,this.lastTimeNotifyOnDebt=e.lastTimeNotifyOnDebt,this.cancelDate=e.cancelDate,this.wasWaiting=e.wasWaiting,this.signOnDeviceCalendar=e.signOnDeviceCalendar,this.recurrenceEvent=void 0,this.recurrenceNotificationsLastDate=void 0,this.recurrenceTimeId=void 0,a||(this.recurrenceRef=void 0,this.recurreneFatherDate=void 0,this.recurrenceEventRefInfo=void 0),this.userDeleted=e.userDeleted,this.paymentRequest=e.paymentRequest,this.shopIcon=i.design.shopIconData,this.workerName=t.name,this.workerGender=t.gender,this.workerId=t.id,this.workerPhone=t.phone,this.showPhoneAlert=t.notifications.showPhoneAlert,this.showAdressAlert=t.notifications.showAdressAlert,this.adress=i.adress,this.invoices={...e.invoices},this.businessName=i.shopName,this.bookingId=e.bookingId===""||e.recurrenceEvent!=null?Ka():e.bookingId,this.buisnessId=e.buisnessId,this.notificationType=e.notificationType,this.bookingDate===e.bookingDate?this.status=e.status:this.status=r?fe.waiting:fe.approved,this.confirmedArrival=!1,r||Bn(this.bookingDate,new Date).inMinutes<60&&(this.confirmedArrival=!0),this.needCancel=e.needCancel,this.finishInvoices=e.finishInvoices,this.transactions=new Map;for(const[o,u]of Object.entries(e.transactions))this.transactions.set(o,It.fromTransaction(u))}sameTreatments(e){let t=!0;return this.treatmentLength!==e.treatmentLength?!1:(Object.entries(this.treatments).forEach(([r,i])=>{let s=!1;Object.entries(e.treatments).forEach(([a,c])=>{i.id===c.id&&i.count===c.count&&(s=!0)}),t=t&&s}),t)}get businessPayloadData(){return new br({businessName:this.businessName,businessId:this.buisnessId,shopIcon:this.shopIcon})}get notificationTopic(){return new Ar({date:Ue(this.bookingDate),businessId:this.buisnessId,workerId:this.workerId,workerName:this.workerName})}get remindersToScheduleMessages(){const e=[];return this.remindersTypes.forEach((t,r)=>{const i=this.reminderMessage(r);i!=null&&e.push(i)}),e}reminderMessage(e){const t=this.remindersTypes.get(e);t==null||t===0||Dt(this.bookingDate,new F({minutes:t}))<new Date}get toBookingNotificationPayload(){return new as({businessId:this.buisnessId,id:this.bookingId,businessName:this.businessName,totalMinutes:this.totalMinutes,isRecurrence:this.recurrenceEvent!=null,date:this.bookingDate,workerId:this.workerId,shopIcon:this.shopIcon})}get transactionsTotalPaymentPrice(){let e=new Me({amount:"0",currency:this.totalPrice.currency});for(const t of Object.values(this.transactions))t.type===Ge.payment&&(e.amount+=t.amount);return e}get isDepositTransaction(){return Object.keys(this.transactions).length===1?Object.values(this.transactions)[0].type===Ge.deposit:!1}get totalDebtAmount(){let e=0;for(const t of Object.values(this.debts))e+=t.amount;return e}get treatmentsToStringDetailed(){let e="";for(const t of Object.values(this.treatments))e+=t.nameForBooking+" + ";return e.length>0?e.substring(0,e.length-3):""}get priceInAdvance(){const e=new Me({amount:"0",currency:Dr});for(const t of Object.values(this.treatments))e.amount+=t.amountInAdvanceForBooking,e.currency=t.price.currency;return e}get messageRemindersOnBooking(){const e=[];if(this.cancelDate!==null||this.userFcms.size===0||this.notificationType===L.push)return e;for(const[t,r]of this.remindersTypes){if(r<=0)continue;Pm(this,r).toUTCString()>=new Date().toUTCString()&&e.push(this.reminderId(t))}return e}get invoiceItem(){return new InvoiceItem({code:0,information:this.treatmentsToStringDetailed,amountPerItem:this.totalPrice.amount,quantity:1})}get toPaymentRequestUser(){return new nr({name:this.customerName,userId:this.customerId,gender:this.userGender,isVerifiedPhone:this.isVerifiedPhone,isExist:this.isUserExist,phone:this.customerPhone})}get invoiceItems(){const e=new Map;let t=0;for(const r of Object.values(this.treatments)){let i=r.name;r.priceChangingNote!==null&&r.priceChangingNote!==""&&(i+=`: ${r.priceChangingNote}.`),Array.from({length:r.count},s=>{e.set(t,new InvoiceItem({code:t,information:i,amountPerItem:r.price.amount,quantity:1})),t++})}return e}get transactionsTotalDepositPrice(){let e=new Me({amount:"0",currency:this.totalPrice.currency});for(const t of Object.values(this.transactions))t.type===Ge.deposit&&(e.amount+=t.amount);return e}get transactionDepositLength(){let e=0;for(const t of Object.values(this.transactions))t.type===Ge.deposit&&(e+=1);return e}get transactionPaymentLength(){let e=0;for(const t of Object.values(this.transactions))t.type===Ge.payment&&(e+=1);return e}reminderId(e){return this.createdAt<Oc?this.bookingId:`${this.bookingId}__${$r[e]}`}get bookingsEventsAsEvents(){const e=new Map;let t=this.bookingDate,r=this.totalEventsCount,i=0;return this.invoicesCoverPrice,this.treatments.forEach((s,a)=>{Array.from({length:s.count}).forEach(()=>{s.times.forEach((c,o)=>{t=ae(t,new F({minutes:c.breakMinutes}));const u=this.recurrenceTimeId!=null&&this.recurrenceEvent!=null?`${Ft(t)}_${this.recurrenceTimeId}`:Ft(t),h=new Ir;h.eventIndex=i,h.treatmentId=s.id,h.subTreatmentName=c.title,h.totalBookingMinutes=this.totalMinutes,h.belongTreatments=this.treatmentLength,h.onHold=this.status==="waiting",h.wantDelete=this.needCancel,h.ids=[this.workerId],h.confirmArrival=this.confirmedArrival,h.hasDebt=this.debts.size>0,h.timeId=this.recurrenceEvent!=null?this.recurrenceTimeId:void 0,h.treatmentName=s.name,h.transactionCounter=this.transactions.size,h.eventsBelong=r,h.isBreak=!1,h.partOfRecurrence=this.recurrenceRef!=null,h.hasInvoice,h.recurrenceEvent=this.recurrenceEvent,h.eventName=this.customerId,h.from=t,h.durationMinutes=c.workMinutes,h.colorIndex=s.colorIndex,e.set(u,h),t=ae(t,new F({minutes:c.workMinutes})),i+=1})})}),e}isTheSameAs({booking:e,customerId:t,note:r}){let i=!0;if(this.treatments.size!==e.treatments.size)return!1;for(const[s,a]of this.treatments)if(e.treatments.get(s)?.id!=a.id||e.treatments.get(s)?.count!=a.count){i=!1;break}return i&&e.customerId===t&&e.clientNote===this.clientNote&&e.note===r&&this.bookingDate.getTime()===e.bookingDate.getTime()&&this.workerId===e.workerId}toJson(){const e={};return e.workerGender=Yt[this.workerGender],e.customerName=this.customerName,e.note=this.note,e.customerId=this.customerId,this.wasWaiting&&(e.wasWaiting=this.wasWaiting),this.workerDeleted&&(e.workerDeleted=this.workerDeleted),this.cancelDate!=null&&(e.cancelDate=this.cancelDate.toString()),e.remindersTypes={},this.clientNote!=""&&(e.clientNote=this.clientNote),this.finishInvoices&&(e.finishInvoices=this.finishInvoices),this.debts.size>0&&(e.debts={},this.debts.forEach((t,r)=>{e.debts[r]=t.toJson()})),this.lastTimeNotifyOnDebt!=null&&(e.lastTimeNotifyOnDebt=this.lastTimeNotifyOnDebt.toString()),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.userDeleted&&(e.userDeleted=this.userDeleted),e.bookingId=this.bookingId,e.needCancel=this.needCancel,e.userGender=Yt[this.userGender],e.businessName=this.businessName,this.signOnDeviceCalendar&&(e.signOnDeviceCalendar=this.signOnDeviceCalendar),this.recurrenceTimeId!=null&&(e.recurrenceTimeId=this.recurrenceTimeId),e.treatments={},this.recurrenceRef!=null&&(e.recurrenceRef=this.recurrenceRef),this.recurreneFatherDate!=null&&(e.recurreneFatherDate=this.recurreneFatherDate),this.treatments.forEach((t,r)=>{e.treatments[r.toString()]=t.toJson()}),e.invoices={},this.invoices.forEach((t,r)=>{e.invoices[r]=t.toJson()}),this.isMultiRef&&(e.isMultiRef=this.isMultiRef),this.isUserExist||(e.isUserExist=this.isUserExist),this.orderingOptions!=Ie.app&&(e.orderingOptions=Do[this.orderingOptions]),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.adress!=""&&(e.adress=this.adress),this.clientMail!=""&&(e.clientMail=this.clientMail),e.customerPhone=this.customerPhone,e.status=wo[this.status],e.confirmedArrival=this.confirmedArrival,e.bookingDate=this.bookingDate.toISOString(),e.workerId=this.workerId.toString(),e.workerName=this.workerName,e.buisnessId=this.buisnessId,e.shopIcon=this.shopIcon.toJson(),this.recurrenceNotificationsLastDate!=null&&(e.recurrenceNotificationsLastDate=this.recurrenceNotificationsLastDate.toString()),e.notificationType=Kc[this.notificationType],e.workerNotificationOption=Qc[this.workerNotificationOption],e.userFcms=Array.from(this.userFcms),e.createdAt=this.createdAt.toISOString(),e.transactions={},this.transactions.forEach((t,r)=>{e.transactions[r]=t.toJson()}),this.paymentRequest!=null&&(e.paymentRequest=this.paymentRequest.toJson()),e}}class Mi{static _singleton=new Mi;constructor(){}static GI(){return Mi._singleton}errorCode=100;error=U.unknown;details="";addError({code:e,error:t,details:r}){this.error=t!==void 0?t:this.error,this.errorCode=e!==void 0?e:this.errorCode,this.details=r!==void 0?r:this.details}}function Ft(n){return Oe(n,"HH:mm")}function Am(n){return Oe(n,"dd")}function on(n){return Oe(n,"MM-yyyy")}function Ue(n){return Oe(n,"dd-MM-yyyy")}function Im(n){return new Date(`1970-01-01T${n}`)}function kn(n){return new Date(n)}function P0(n){return new Date(`01-${n}`)}function Qa(n,e){return n===null&&e===null?null:n===null?e:e===null||n<e?n:e}function _0(n){return new Date(n.getFullYear(),n.getMonth(),1)}function ke(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function Xa(n,e){return new Date(n.getFullYear(),n.getMonth()+e,n.getDate(),n.getHours(),n.getMinutes())}function gt(n){const e=n.getDay(),t=n.getDate()-e+(e===0?-6:1);return new Date(n.setDate(t))}function Em(n){return Xh(Oe(n,"dd-MM-yyyy"),"dd-MM-yyyy",new Date)}function Za(n,e){let t=n.getFullYear()-e.getFullYear(),r=n.getMonth()-e.getMonth();return r<0&&(t-=1,r+=12),Math.abs(t*12+r)}function Tm(n,e){return n===null&&e===null?null:n===null?e:e===null?n:e>n?e:n}function Pm(n,e){return new Date(n.bookingDate.getTime()-e*6e4).toUTCString()}class us{customerName="";customerPhone="";isVerifiedPhone=!1;notificationType=L.none;workerNotificationOption=j.PushOrSMS;workerRemindersTypes=new Map;customerId="";orderingOptions=Ie.app;remindersTypes=new Map;isUserExist=!0;signOnDeviceCalendar=!1;lastTimeNotifyOnDebt=null;clientMail="";finishInvoices=!1;showAdressAlert=!1;userBookingId="";showPhoneAlert=!1;cancelDate=null;wasWaiting=!1;createdAt=new Date(0);needCancel=!1;userGender=z.anonymous;status=fe.approved;confirmedArrival=!1;userFcms=new Set;clientNote="";invoices=new Map;transactions=new Map;debts=new Map;addToClientAt=!1;userDeleted=!1;constructor(){}copyDataToOrder(e){const{worker:t,needToHoldOn:r,workerAction:i,bookingDate:s,addToCalendar:a,noteText:c=""}=e;this.clientNote=c,r?this.status=fe.waiting:this.status=fe.approved,this.showAdressAlert=t.notifications.showAdressAlert,this.showPhoneAlert=t.notifications.showPhoneAlert,!i&&!r&&s.getTime()-Date.now()<60*60*1e3&&(this.confirmedArrival=!0),this.signOnDeviceCalendar=a,this.workerNotificationOption=t.notifications.notificationOption,this.workerRemindersTypes=new Map(t.notifications.remindersTypes),t.notifications.remindersTypes.forEach((u,h)=>{s.getTime()<Date.now()||h===pe.confirmArrival&&this.confirmedArrival||(s.getTime()-u*60*1e3<Date.now()+1e3?(this.remindersTypes.set(h,Math.abs(Math.floor((Date.now()-s.getTime())/1e3/60/2))-Math.abs(Math.floor((Date.now()-s.getTime())/1e3/60/2))%5),this.remindersTypes.get(h)<10&&this.remindersTypes.delete(h)):this.remindersTypes.set(h,u))}),this.orderingOptions=Ie.web,this.isUserExist=!0,this.userFcms=new Set(Be.GI().user.userPublicData.fcmsTokens),this.isVerifiedPhone=Be.GI().user.isVerifiedPhone;const o=Be.GI().user.userPublicData.clientAt;this.addToClientAt=!o.has(de.GI().business.businessId)||!o.get(de.GI().business.businessId).has(t.id),this.createdAt.getTime()===new Date(0).getTime()&&(this.createdAt=new Date),this.userBookingId,this.notificationType=kf(this,t)}get toCustomerData(){return new jt({name:this.customerName,phoneNumber:this.customerPhone,isVerifiedPhone:this.isVerifiedPhone,email:this.clientMail,customerUuid:this.customerId,gender:this.userGender})}get isDepositTransaction(){let e=!1;return this.transactions.forEach((t,r)=>{e=t.type===Ge.deposit}),e}get transactionsTotalPaymentAmount(){let e=0;return this.transactions.forEach((t,r)=>{t.type===Ge.payment&&(e+=t.amount)}),e}get canSendMessage(){return this.isVerifiedPhone||this.orderingOptions===Ie.byWorker}get totalDebtAmount(){let e=0;return this.debts.forEach((t,r)=>{e+=t.amount}),e}get invoicePriceAmount(){return Array.from(this.invoices.values()).reduce((e,t)=>e+t.amount,0)}invoicesCoverPrice(e){const{totalAmount:t}=e;return this.finishInvoices||this.invoices.size>0&&Array.from(this.invoices.values()).reduce((r,i)=>r+i.amount,0)>=t}get transactionsTotalDepositAmount(){let e=0;return this.transactions.forEach((t,r)=>{t.type===Ge.deposit&&(e+=t.amount)}),e}get customerHashPhone(){return bn(this.customerPhone)}get customerPhoneAsCollection(){return this.customerPhone.replace(/-/g,"")}reminderId(e){return this.userBookingId+"__"+$r[e]}get toPaymentRequestUser(){return new nr({name:this.customerName,userId:this.customerId,gender:this.userGender,isExist:this.isUserExist,isVerifiedPhone:this.isVerifiedPhone,phone:this.customerPhone})}get typesOfEvents(){const e=new Map;return this.needCancel&&e.set(kt.needCancel,1),this.debts.size>0&&e.set(kt.withDebts,1),this.status===fe.waiting&&e.set(kt.onHold,1),e}static fromJson(e,t,r){const i=new us;return i.customerName=e.customerName||"",i.customerId=e.customerId||"",i.customerPhone=e.customerPhone||i.customerId,i.needCancel=e.needCancel||!1,i.remindersTypes=e.remindersTypes?new Map(Object.entries(e.remindersTypes).map(([s,a])=>[yt[s],a])):new Map([[pe.regular,e.minutesBeforeNotify||60]]),i.workerRemindersTypes=e.workerRemindersTypes?new Map(Object.entries(e.workerRemindersTypes).map(([s,a])=>[yt[s],a])):new Map,i.signOnDeviceCalendar=e.signOnDeviceCalendar||!1,i.userDeleted=e.userDeleted||!1,i.isVerifiedPhone=e.isVerifiedPhone||!1,i.clientMail=e.clientMail||"",i.clientNote=e.clientNote||"",i.userBookingId=t,i.orderingOptions=bo[e.orderingOptions]||Ie.app,i.debts=e.debts?new Map(Object.entries(e.debts).map(([s,a])=>[s,Xt.fromJson(a,s)])):new Map,i.finishInvoices=e.finishInvoices||!1,i.cancelDate=e.cancelDate?new Date(e.cancelDate):null,i.wasWaiting=e.wasWaiting||!1,i.isUserExist=e.isUserExist||!0,i.lastTimeNotifyOnDebt=e.lastTimeNotifyOnDebt?new Date(e.lastTimeNotifyOnDebt):null,i.invoices=e.invoices?new Map(Object.entries(e.invoices).map(([s,a])=>[s,Zt.fromJson(a,s,r)])):new Map,i.userGender=et[e.userGender]||z.anonymous,i.status=yo[e.status.toString()]||fe.approved,i.confirmedArrival=e.confirmedArrival||!1,i.showAdressAlert=e.showAdressAlert||!1,i.showPhoneAlert=e.showPhoneAlert||!1,i.notificationType=ko[e.notificationType]||L.none,i.workerNotificationOption=pn[e.workerNotificationOption]||j.PushOrSMS,i.userFcms=e.userFcms?new Set(e.userFcms):e.deviceFCM&&e.deviceFCM!==""?new Set([e.deviceFCM]):new Set,i.createdAt=e.createdAt?new Date(e.createdAt):new Date(0),i.transactions=e.transactions?new Map(Object.entries(e.transactions).map(([s,a])=>[s,It.fromJson(a,s)])):new Map,i}toJson(){const e={};return e.customerName=this.customerName,e.customerId=this.customerId,this.wasWaiting&&(e.wasWaiting=this.wasWaiting),this.cancelDate&&(e.cancelDate=this.cancelDate.toISOString()),e.remindersTypes={},this.remindersTypes.forEach((t,r)=>{e.remindersTypes[$r[r]]=t}),e.workerRemindersTypes={},this.workerRemindersTypes.forEach((t,r)=>{e.workerRemindersTypes[$r[r]]=t}),this.userDeleted&&(e.userDeleted=this.userDeleted),this.signOnDeviceCalendar&&(e.signOnDeviceCalendar=this.signOnDeviceCalendar),this.clientNote!==""&&(e.clientNote=this.clientNote),this.needCancel&&(e.needCancel=this.needCancel),this.finishInvoices&&(e.finishInvoices=this.finishInvoices),e.userGender=Yt[this.userGender],this.invoices.size>0&&(e.invoices={},this.invoices.forEach((t,r)=>{e.invoices[r]=t.toJson()})),this.debts.size>0&&(e.debts={},this.debts.forEach((t,r)=>{e.debts[r]=t.toJson()})),this.lastTimeNotifyOnDebt&&(e.lastTimeNotifyOnDebt=this.lastTimeNotifyOnDebt.toISOString()),this.isUserExist||(e.isUserExist=this.isUserExist),this.orderingOptions!==Ie.app&&(e.orderingOptions=Do[this.orderingOptions]),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.clientMail!==""&&(e.clientMail=this.clientMail),e.customerPhone=this.customerPhone,this.status!==fe.approved&&(e.status=wo[this.status]),this.confirmedArrival&&(e.confirmedArrival=this.confirmedArrival),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.userFcms.size>0&&(e.userFcms=Array.from(this.userFcms)),e.createdAt=this.createdAt.toISOString(),this.transactions.size>0&&(e.transactions={},this.transactions.forEach((t,r)=>{e.transactions[r]=t.toJson()})),e}toString(){return JSON.stringify(this,null,"  ")}}class Vt{freeFromPayments;hashNumber;blocked;constructor({freeFromPayments:e=!1,hashNumber:t="",blocked:r=!1}={}){this.freeFromPayments=e,this.hashNumber=t,this.blocked=r}static fromJson(e,t){return new Vt({freeFromPayments:e.freeFromPayments,hashNumber:t})}static fromMinimalJson(e,t){return new Vt({blocked:e.B??!1,freeFromPayments:e.FP,hashNumber:t})}static fromCustomerData(e){return new Vt({blocked:e.blocked,freeFromPayments:e.freeFromPayments,hashNumber:e.hashNumber})}toJson(){const e={};return e.freeFromPayments=this.freeFromPayments,e.blocked=this.blocked,e}toMinimalJson(){const e={};return e.FP=this.freeFromPayments,e.B=this.blocked,e}toString(){return JSON.stringify(this.toJson(),null,2)}}const _m=3;class jt{name="";workerNaming="";phoneNumber="";freeFromPayments=!1;isExapmle=!1;id="";customerUuid="";blocked=!1;isVerifiedPhone=!1;email="";addedManually=!1;gender=z.male;amoutOfBookings=0;firstBookingsDate;userFirstBookingsDate;lastBookingsDate;belongings=new Set;isDeleted=!1;constructor({name:e="",amoutOfBookings:t=0,gender:r=z.male,email:i="",id:s="",freeFromPayments:a=!1,addedManually:c=!1,customerUuid:o="",isVerifiedPhone:u=!1,workerNaming:h="",blocked:d=!1,phoneNumber:l="",firstBookingsDate:g,userFirstBookingsDate:v,lastBookingsDate:x}){this.name=e,this.amoutOfBookings=t,this.gender=r,this.email=i,this.id=s,this.freeFromPayments=a,this.addedManually=c,this.customerUuid=o,this.isVerifiedPhone=u,this.workerNaming=h,this.blocked=d,this.phoneNumber=l,this.firstBookingsDate=g,this.userFirstBookingsDate=v,this.lastBookingsDate=x}static fromJson(e,t){const r=new jt({});return r.name=e.name??"",e.gender!=null&&(r.gender=r.getGenderFromStr(e.gender)),r.isVerifiedPhone=e.isVerifiedPhone??!1,r.freeFromPayments=e.freeFromPayments??!1,r.customerUuid=t,r.phoneNumber=e.phoneNumber??(t.length<20&&t.includes("-")?t:""),e.firstBookingsDate!=""&&e.firstBookingsDate!=null&&(r.firstBookingsDate=new Date(e.firstBookingsDate)),e.userFirstBookingsDate!=""&&e.userFirstBookingsDate!=null&&(r.userFirstBookingsDate=new Date(e.userFirstBookingsDate),(r.firstBookingsDate==null||r.userFirstBookingsDate<r.firstBookingsDate)&&(r.firstBookingsDate=r.userFirstBookingsDate)),e.lastBookingsDate!=null&&(r.lastBookingsDate=new Date(e.lastBookingsDate)),r.workerNaming=e.workerNaming??"",r.amoutOfBookings=e.amoutOfBookings??0,r.blocked=e.blocked??!1,r.email=e.email??"",r.id=e.id??"",r.addedManually=e.AM??!1,r}fromCustomerData(e){return this.name=e.name,this.gender=e.gender,this.isVerifiedPhone=e.isVerifiedPhone,this.phoneNumber=e.phoneNumber,this.belongings=e.belongings,this.email=e.email,this.isDeleted=e.isDeleted,this.blocked=e.blocked,this.id=e.id,this.addedManually=e.addedManually,this.freeFromPayments=e.freeFromPayments,this.customerUuid=e.customerUuid,this.workerNaming=e.workerNaming,this.firstBookingsDate=e.firstBookingsDate,this.lastBookingsDate=e.lastBookingsDate,this.amoutOfBookings=e.amoutOfBookings,this.userFirstBookingsDate=e.userFirstBookingsDate,this}get nameForWorker(){return this.workerNaming==""?this.name:this.workerNaming}get getFirstDate(){return this.firstBookingsDate==null||this.userFirstBookingsDate!=null&&this.userFirstBookingsDate<this.firstBookingsDate?this.userFirstBookingsDate:this.firstBookingsDate}get customerHashPhone(){return bn(this.phoneNumber)}get customerPhoneAsCollection(){return this.phoneNumber.replaceAll("-","")}isTheSameAs(e,{withId:t=!1}={}){const r=this.toJson();t&&(r.id=e.customerUuid);const i=e.toJson();return t&&(i.id=this.customerUuid),JSON.stringify(i)===JSON.stringify(r)}getType({bookingInMonthForRegularClient:e,worker:t}){return t.id===this.customerUuid?5:this.isDeleted?7:this.amoutOfBookings<=_m?2:this.amountOfBookingsInMonth()<e?1:0}getGenderFromStr(e){return e==null||e=="A"?z.anonymous:e=="F"?z.female:z.male}getStrFromGender(e){return{[z.anonymous]:"A",[z.male]:"M",[z.female]:"F"}[e]||"A"}get toMultiBookingUser(){const e=new us;return e.customerName=this.name!=""?this.name:this.workerNaming,e.customerPhone=this.phoneNumber,e.customerId=this.customerUuid,e.userGender=this.gender,e}get toPaymentRequestUser(){return new nr({userId:this.customerUuid,name:this.nameForWorker,gender:this.gender,isExist:!this.addedManually,isVerifiedPhone:this.isVerifiedPhone,phone:this.phoneNumber})}isMissing(e){return this.lastBookingsDate==null?!1:(new Date().getTime()-this.lastBookingsDate.getTime())/(1e3*3600*24)>e}amountOfBookingsInMonth(){if(this.firstBookingsDate==null)return-1;if(this.lastBookingsDate==null)return 0;const e=this.lastBookingsDate>new Date?new Date:this.lastBookingsDate,t=Math.max((e.getTime()-this.firstBookingsDate.getTime())/(1e3*3600*24),1);return this.amoutOfBookings/t*30}toJson(){const e={};return this.name!==""&&(e.name=this.name),this.gender!==z.male&&(e.gender=this.getStrFromGender(this.gender)),this.phoneNumber!==this.id&&(e.phoneNumber=this.phoneNumber),this.firstBookingsDate!=null&&(e.firstBookingsDate=this.firstBookingsDate.toISOString()),this.userFirstBookingsDate!=null&&(e.userFirstBookingsDate=this.userFirstBookingsDate.toISOString()),this.lastBookingsDate!=null&&(e.lastBookingsDate=this.lastBookingsDate.toISOString()),this.amoutOfBookings!==0&&(e.amoutOfBookings=this.amoutOfBookings),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.freeFromPayments=this.freeFromPayments,this.email!==""&&(e.email=this.email),e.blocked=this.blocked,this.id!==""&&(e.id=this.id),this.addedManually&&(e.AM=this.addedManually),this.workerNaming!==""&&(e.workerNaming=this.workerNaming),e}toMinimalJson(){const e={};return e.N=this.name!==""?this.name:this.workerNaming,e.G=this.getStrFromGender(this.gender),e.P=this.phoneNumber,this.phoneNumber!==this.customerUuid&&(e.CU=this.customerUuid),this.email!==""&&(e.E=this.email),this.id!==""&&(e.ID=this.id),e}merge(e){return!e.addedManually&&this.addedManually&&(this.email=e.email!==""?e.email:this.email,this.name=e.name!==""?e.name:this.name,this.addedManually=!1,this.customerUuid=e.customerUuid),this.workerNaming===""&&(this.workerNaming=e.workerNaming),this.isVerifiedPhone=e.isVerifiedPhone||this.isVerifiedPhone,this.gender=this.gender,this.blocked=e.blocked||this.blocked,this.lastBookingsDate=Tm(e.lastBookingsDate,this.lastBookingsDate),this.firstBookingsDate=Qa(e.firstBookingsDate,this.firstBookingsDate),this.userFirstBookingsDate=Qa(e.userFirstBookingsDate,this.userFirstBookingsDate),this.amoutOfBookings+=e.amoutOfBookings,this}fromMinimalJson(e){return this.workerNaming=e.N??"",this.name=e.N??"",e.G!=null&&(this.gender=this.getGenderFromStr(e.gender)),this.addedManually=e.AM??!1,this.phoneNumber=e.P??"",this.customerUuid=e.CU??e.P??"",this.email=e.E??"",this.id=e.ID??"",this}get publicCustomer(){return new Vt({freeFromPayments:this.freeFromPayments,blocked:this.blocked,hashNumber:sm({id:this.customerUuid})})}belongingsNames(e){return Array.from(this.belongings).map(t=>e.get(t)?.name??"").join(", ")}get forUpdate(){const e=new jt({});return e.name=this.name,e.gender=this.gender,e.isVerifiedPhone=this.isVerifiedPhone,e.phoneNumber=this.phoneNumber,e.belongings=this.belongings,e.email=this.email,e.isDeleted=this.isDeleted,e.blocked=this.blocked,e.id=this.id,e.addedManually=this.addedManually,e.freeFromPayments=this.freeFromPayments,e.customerUuid=this.customerUuid,e.workerNaming=this.workerNaming,e.firstBookingsDate=null,e.userFirstBookingsDate=null,e.amoutOfBookings=0,e.lastBookingsDate=null,e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class We{token;joinDate;id;activeNotifications;constructor({token:e="",joinDate:t,id:r="",activeNotifications:i=!0}){this.token=e,this.joinDate=t,this.id=r,this.activeNotifications=i}static fromJson(e,t){const r=new We({joinDate:new Date(0)});return r.id=t,r.activeNotifications=e.activeNotifications??!0,r.token=e.token??"",r}toJson(){const e={};return this.activeNotifications||(e.activeNotifications=this.activeNotifications),e.token=this.token,e.joinDate=Ue(this.joinDate),e}static fromDevice(e){return new We({joinDate:e.joinDate,id:e.id,activeNotifications:e.activeNotifications,token:e.token})}}const Bm={1:"PL",2:"MasterCard",3:"Visa",4:"Maestro",5:"Isracard"},Om={PL:"1",MasterCard:"2",Visa:"3",Maestro:"4",Isracard:"5"},Sm={1:"Isracard",2:"Visa Cal",3:"Diners",4:"Amex",6:"Leumi Card"},Fm={Isracard:"1","Visa Cal":"2",Diners:"3",Amex:"4","Leumi Card":"6"};class wr{brand="";token="";validityMonth="";validityYear="";name="";bankName="";l4Digits="";userId="";attemptsLeft=Vr;cardId="";businessId="";constructor({brand:e="",token:t="",validityMonth:r="",validityYear:i="",name:s="",userId:a="",bankName:c="",l4Digits:o="",cardId:u="",businessId:h="",attemptsLeft:d=Vr}={}){this.brand=e,this.token=t,this.validityMonth=r,this.validityYear=i,this.name=s,this.userId=a,this.bankName=c,this.l4Digits=o,this.cardId=u,this.businessId=h,this.attemptsLeft=d}static fromJson(e,t,r){const i=new wr;return i.cardId=t,i.brand=Bm[e.brand]||"Card",i.token=e.token||"",i.userId=e.userId||"",i.attemptsLeft=e.attemptsLeft||Vr,i.validityMonth=e.validityMonth||"",i.validityYear=e.validityYear||"",i.businessId=r,i.name=e.name||"",i.bankName=e.bankName||"",i.bankName=Sm[e.bankName]||"Bank",i.l4Digits=e.l4Digits||"",i}fromPaymentCard(e){this.brand=e.brand,this.token=e.token,this.userId=e.userId,this.businessId=e.businessId,this.cardId=e.cardId,this.attemptsLeft=e.attemptsLeft,this.validityMonth=e.validityMonth,this.validityYear=e.validityYear,this.name=e.name,this.bankName=e.bankName,this.l4Digits=e.l4Digits}toJson(){const e={};return e.brand=Om[this.brand]||"",e.token=this.token,e.userId=this.userId,e.attemptsLeft=this.attemptsLeft,e.validityMonth=this.validityMonth,e.validityYear=this.validityYear,e.name=this.name,e.bankName=this.bankName,e.bankName=Fm[this.bankName]||"",e.l4Digits=this.l4Digits,e}decryptCard(e){return new wr({cardId:this.cardId,brand:this.brand,token:decryptText({encryption:this.token,password:e}),validityMonth:decryptText({encryption:this.validityMonth,password:e}),validityYear:decryptText({encryption:this.validityYear,password:e}),name:this.name,userId:this.userId,bankName:this.bankName,businessId:this.businessId,l4Digits:this.l4Digits})}encryptCard(e){return new wr({cardId:this.cardId,brand:this.brand,token:encryptText({text:this.token,password:e}),validityMonth:encryptText({text:this.validityMonth,password:e}),validityYear:encryptText({text:this.validityYear,password:e}),name:this.name,userId:this.userId,bankName:this.bankName,businessId:this.businessId,l4Digits:this.l4Digits})}isTheSameAs(e){return this.bankName===e.bankName&&this.brand===e.brand&&this.name===e.name&&this.l4Digits===e.l4Digits&&this.userId===e.userId&&this.validityMonth===e.validityMonth&&this.validityYear===e.validityYear}toString(){return JSON.stringify(this,null,"  ")}}class Nm{futureBookings={};passedBookings={};recurrence;setMonth(e,t){const r=P0(t),i=_0(new Date);r.getTime()===i.getTime()?(this.passedBookings[t]={},this.futureBookings[t]={}):r.getTime()>i.getTime()?this.futureBookings[t]={}:r.getTime()<i.getTime()&&(this.passedBookings[t]={}),Object.entries(e).forEach(([s,a])=>{const c=Ze.fromJson(a,s);c.cancelDate==null&&(c.isPassed?this.passedBookings[t][s]=c:this.futureBookings[t][s]=c)})}setRecurrence(e){this.recurrence={},Object.entries(e).forEach(([t,r])=>{const i=Ze.fromJson(r,t);i.cancelDate===null&&(this.recurrence[t]=i)})}get all(){const e={};return Object.values(this.futureBookings).forEach(t=>{Object.entries(t).forEach(([r,i])=>{e[i.bookingId]=i})}),Object.values(this.passedBookings).forEach(t=>{Object.entries(t).forEach(([r,i])=>{e[i.bookingId]=i})}),this.recurrence!==void 0&&Object.entries(this.recurrence).forEach(([t,r])=>{e[t]=r}),e}addBooking(e){if(e.recurrenceEvent!==null)this.recurrence??={},this.recurrence[e.bookingId]=e;else{const t=on(e.bookingDate);e.isPassed?(this.passedBookings[t]??={},this.passedBookings[t][e.bookingId]=e):(this.futureBookings[t]??={},this.futureBookings[t][e.bookingId]=e)}}deleteBooking(e){if(e.recurrenceEvent!==null)delete this.recurrence?.[e.bookingId];else{const t=on(e.bookingDate);delete this.passedBookings[t]?.[e.bookingId],delete this.futureBookings[t]?.[e.bookingId]}}lastBookingForBusiness(e,t,r=!1,i,s){let a=i;return Object.entries(this.futureBookings).forEach(([c,o])=>{Object.entries(o).forEach(([u,h])=>{e!==h.buisnessId||t!==h.workerId||s!=null&&s.getTime()===h.bookingDate.getTime()||(a===void 0||h.bookingDate.getTime()>a.getTime())&&(a=h.bookingDate)})}),a}}class hs{docId="";path="";constructor(e,t){this.docId=e,this.path=t}toJson(){const e={};return e.docId=this.docId,e.path=this.path,e}static fromJson(e){const t=new hs("","");return t.docId=e.docId||"",t.path=e.path||"",t}toString(){return JSON.stringify(this,null,2)}}class ls{bookingCount=0;lastUpdateTime=new Date(0);docId="";constructor({docId:e=""}){this.docId=e}static fromJson(e,t){const r=new ls({});return e!==void 0&&t!==void 0&&(r.docId=t,r.bookingCount=e.bookingCount??0,r.lastUpdateTime=e.lastUpdateTime?new Date(e.lastUpdateTime):new Date(0)),r}toJson(){const e={};return this.lastUpdateTime.getTime()!==new Date(0).getTime()&&(e.lastUpdateTime=this.lastUpdateTime.toISOString()),this.bookingCount>0&&(e.bookingCount=this.bookingCount),e}toString(){return JSON.stringify(this.toJson(),null,"  ")}}class yr{email="";name="";phoneNumber="";id="";devices=new Map;gender=z.anonymous;myBuisnessesIds=[];reminders;clientAt=new Map;hasNotificationPermission=!0;permission=new Map;tempFcm;allowAppNotification=!0;isVerifiedPhone=!1;isVerifiedEmail=!1;invoiceCounter;newWorkerWelcomes=new Set;bookings=new Map;bookingsPreviews=new Map;bookingsDocsToLoad=new Set;localDocsToDelete=new Set;constructor({email:e="",isVerifiedPhone:t=!1,isVerifiedEmail:r=!1,name:i="",phoneNumber:s="",id:a="",gender:c=z.anonymous,devices:o=new Map}){this.email=e,this.isVerifiedPhone=t,this.isVerifiedEmail=r,this.name=i,this.phoneNumber=s,this.id=a,this.gender=c,this.devices=o}static fromJson(e,t){const r=new yr({email:e.email,isVerifiedPhone:e.isVerifiedPhone,isVerifiedEmail:e.isVerifiedEmail,name:e.name,phoneNumber:e.phoneNumber,id:e.id,gender:e.gender});return r.setUserPublicData(e,t),r}get customerData(){return new jt({customerUuid:this.id,name:this.name,email:this.email,isVerifiedPhone:this.isVerifiedPhone,gender:this.gender,phoneNumber:this.phoneNumber})}setUserPublicData(e,t){if(this.permission=new Map,this.myBuisnessesIds=[],this.isVerifiedEmail=e.isVerifiedEmail||!1,this.email=e.email||"",this.allowAppNotification=e.allowAppNotification||!0,this.email=e.email||"",this.name=e.name||"",this.clientAt=new Map,e.clientAt&&Object.entries(e.clientAt).forEach(([r,i])=>{Object.keys(i).length!==0&&(this.clientAt.set(r,new Set),Object.keys(i).forEach(s=>{this.clientAt.set(r,this.clientAt.get(r).add(s))}))}),e.localDocsToDelete&&(this.localDocsToDelete=new Set,e.localDocsToDelete.forEach(r=>{this.localDocsToDelete.add(hs.fromJson(r))})),this.invoiceCounter=e.invoiceCounter,this.devices=new Map,e.devices&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,i])=>{this.devices.set(r,We.fromJson(i,r))}):e.currentFcm&&e.currentFcm!==""&&(this.tempFcm=e.currentFcm),this.hasNotificationPermission=e.hasNotificationPermission||!0,e.gender&&(this.gender=et[e.gender]||z.anonymous),this.phoneNumber=e.phoneNumber||"",this.id=e.id||e.phoneNumber||"",e.permission&&Object.entries(e.permission).forEach(([r,i])=>{i===2&&this.myBuisnessesIds.push(r),this.permission.set(r,i)}),e.bookings&&(this.bookings=new Map,Object.entries(e.bookings).forEach(([r,i])=>{const s=Ze.fromJson(i,r);s.cancelDate||this.bookings.set(r,s)})),this.bookingsDocsToLoad=new Set,e.bookingsPreviews){const r=new Map;Object.entries(e.bookingsPreviews).forEach(([i,s])=>{r.set(i,ls.fromJson(s,i))}),r.forEach((i,s)=>{this.bookingsPreviews.get(s)?.lastUpdateTime!==i.lastUpdateTime&&(s===po||P0(s)>=_0(new Date)||(t?.bookings.passedBookings?.hasOwnProperty(s)??!1))&&this.bookingsDocsToLoad.add(s)}),this.bookingsPreviews=r}this.id===this.phoneNumber?this.isVerifiedPhone=!0:this.isVerifiedPhone=e.isVerifiedPhone||!1,this.newWorkerWelcomes=new Set,e.newWorkerWelcomes&&Object.keys(e.newWorkerWelcomes).forEach(r=>{this.newWorkerWelcomes.add(r)})}get fcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm)return new Set(this.tempFcm);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}getDevicesByToken(e){const t=[];return Object.values(this.devices).forEach(r=>{r.token===e&&t.push(We.fromDevice(r))}),t}toJson(){const e={};return this.hasNotificationPermission||(e.hasNotificationPermission=this.hasNotificationPermission),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),this.isVerifiedEmail&&(e.isVerifiedEmail=this.isVerifiedEmail),this.email!==""&&(e.email=this.email),Object.keys(this.bookingsPreviews).length>0&&(e.bookingsPreviews={},Object.entries(this.bookingsPreviews).forEach(([t,r])=>{e.bookingsPreviews[t]=r.toJson()})),this.allowAppNotification||(e.allowAppNotification=this.allowAppNotification),e.permission={},Object.entries(this.permission).forEach(([t,r])=>{e.permission[t]=r}),this.localDocsToDelete.size>0&&(e.localDocsToDelete=[],this.localDocsToDelete.forEach(t=>{e.localDocsToDelete.push(t.toJson())})),e.email=this.email,e.name=this.name,e.devices={},this.devices.forEach((t,r)=>{e.devices[r]=t.toJson()}),e.clientAt={},this.clientAt.forEach((t,r)=>{e.clientAt[r]={},t.forEach(i=>{e.clientAt[r][i]=""})}),e.gender=Yt[this.gender],e.phoneNumber=this.phoneNumber,e.id=this.id,this.newWorkerWelcomes.size>0&&(e.newWorkerWelcomes={},this.newWorkerWelcomes.forEach(t=>{e.newWorkerWelcomes[t]=""})),e}}class ds{businessId="";date;productId="";constructor(e,t,r){this.businessId=e,this.date=t,this.productId=r}static fromJson(e,t){const r=new ds(t,null,"");return r.businessId=e.businessId||"",e.date instanceof lt&&(r.date=e.date),r}toJson(){const e={};return e.businessId=this.businessId,this.date!==null&&this.date!==void 0&&(e.date=this.date),e}}class cn{productsIds={};pendingProductsIds={};id="";revenueCatId="";limitOfBuisnesses=1;preferdTipPercentage=0;cardPaymentsPass="";lastTimeUpdatePhone=new Date(0);lastTimeUpdateEmail=new Date(0);authProviders={};businessesInfo={};storyLikes=[];paymentCards={};lastVisitedBuisnesses=[];lastVisitedBuisnessesRemoved=[];lastCleanDate=lt.fromDate(new Date);businessTopics=new Set;waitingListTopics={};tempFcm;termsApprovals={};seenUpdates={};createdAt=new Date;userPublicData=new yr({});name="";isVerifiedPhone=!1;phoneNumber="";gender=z.anonymous;lastTimeConnect=new Date;userPublicDataListener;connectedGoogleEmail="";currentMonthInvoices;currentMonthPaymentRequest;currentMonthPayments;existInvoicesDocs=new Set;existPaymentsDocs=new Set;existPaymentRequestsDocs=new Set;invoices={};devices={};bookings=new Nm;hasOldNotification=!1;constructor({name:e="",phoneNumber:t="",id:r="",productsIds:i={},myBuisnessesIds:s=[],revenueCatId:a="",limitOfBuisnesses:c=1,gender:o=z.anonymous,lastVisitedBuisnesses:u=[],lastVisitedBuisnessesRemoved:h=[],paymentCards:d={},isVerifiedPhone:l=!1,isVerifiedEmail:g=!1,email:v="",lastCleanDate:x=lt.fromDate(new Date),createdAt:f=new Date}){this.userPublicData=new yr({email:v,isVerifiedEmail:g,isVerifiedPhone:l,name:e,phoneNumber:t,id:r,gender:o}),this.name=e,this.phoneNumber=t,this.id=r,this.productsIds=i,this.revenueCatId=a,this.limitOfBuisnesses=c,this.gender=o,this.lastVisitedBuisnesses=u,this.lastVisitedBuisnessesRemoved=h,this.paymentCards=d,this.isVerifiedPhone=l,this.cardPaymentsPass="",this.lastCleanDate=x,this.createdAt=f}get toPaymentRequestUser(){return new nr({userId:this.id,name:this.name,gender:this.gender,isVerifiedPhone:this.isVerifiedPhone,isExist:!0,phone:this.phoneNumber,userDecline:!1})}customerDataFromBooking({booking:e,exclude:t,needDelete:r=!1,initDate:i}){return new jt({name:this.name,email:this.userPublicData.email,gender:this.gender,customerUuid:this.id,phoneNumber:this.phoneNumber,isVerifiedPhone:this.isVerifiedPhone,userFirstBookingsDate:this.bookings.firstBookingForBusiness(e.buisnessId,e.workerId,{exclude:r?e.bookingDate:t,initDate:r?i:e.bookingDate}),lastBookingsDate:this.bookings.lastBookingForBusiness({businessId:e.buisnessId,workerId:e.workerId,exclude:r?e.bookingDate:t,initDate:r?i:e.bookingDate})})}get fcmsTokens(){if(!this.userPublicData.allowAppNotification)return new Set;if(this.tempFcm)return new Set([this.tempFcm]);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}getDeviceByToken(e){let t;return Object.values(this.devices).forEach(r=>{r.token===e&&(t=We.fromDevice(r))}),t}static fromUserDocJson(e){const t=new cn({name:e.name,phoneNumber:e.phoneNumber,id:e.id,productsIds:{},myBuisnessesIds:[],revenueCatId:e.revenueCatId,limitOfBuisnesses:e.limitOfBuisnesses,gender:et[e.gender],lastVisitedBuisnesses:e.lastVisitedBuisnesses,lastVisitedBuisnessesRemoved:e.lastVisitedBuisnessesRemoved,paymentCards:{},isVerifiedPhone:e.isVerifiedPhone,isVerifiedEmail:!1,email:"",lastCleanDate:e.lastCleanDate,createdAt:new Date(e.createdAt)});return e.devices&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,i])=>{t.devices[r]=We.fromJson(i,r)}):e.currentFcm&&e.currentFcm!==""&&(t.tempFcm=e.currentFcm),e.termsApprovals&&Object.entries(e.termsApprovals).forEach(([r,i])=>{t.termsApprovals[r]=new Date(i)||new Date(0)}),t.seenUpdates={},e.seenUpdates&&Object.entries(e.seenUpdates).forEach(([r,i])=>{t.seenUpdates[r]=new Set(i)}),t.phoneNumber=e.phoneNumber||"0",t.id=e.id||e.phoneNumber,t.preferdTipPercentage=0,e.preferdTipPercentage&&(t.preferdTipPercentage=Number.isInteger(e.preferdTipPercentage)?e.preferdTipPercentage:Math.floor(e.preferdTipPercentage)),t.cardPaymentsPass=e.cardPaymentsPass||"",e.storyLikes&&e.storyLikes.forEach(r=>t.storyLikes.push(r)),e.lastTimeUpdatePhone&&(t.lastTimeUpdatePhone=new Date(e.lastTimeUpdatePhone)||new Date(0)),e.lastTimeUpdateEmail&&(t.lastTimeUpdateEmail=new Date(e.lastTimeUpdateEmail)||new Date(0)),t.productsIds={},e.productsIds&&Object.entries(e.productsIds).forEach(([r,i])=>{t.productsIds[r]=ds.fromJson(i,r)}),e.pendingProductsIds&&Object.entries(e.pendingProductsIds).forEach(([r,i])=>{t.pendingProductsIds[r]=i}),t.revenueCatId=e.revenueCatId||"",t.lastCleanDate=e.lastCleanDate,e.lastVisitedBuisnesses.forEach(r=>t.lastVisitedBuisnesses.push(r)),e.lastVisitedBuisnessesRemoved&&e.lastVisitedBuisnessesRemoved.forEach(r=>t.lastVisitedBuisnessesRemoved.push(r)),t.businessesInfo={},e.businessesInfo&&Object.entries(e.businessesInfo).forEach(([r,i])=>{t.businessesInfo[r]=vr.fromJson(i,r)}),e.businessTopics&&e.businessTopics.forEach(r=>{t.businessTopics.add(r)}),e.waitingListTopics&&(t.waitingListTopics={},Object.entries(e.waitingListTopics).forEach(([r,i])=>{const s=Ar.fromJson(i,r);s.date===""?t.businessTopics.add(r):t.waitingListTopics[r]=s})),t.paymentCards={},e.paymentCards&&Object.entries(e.paymentCards).forEach(([r,i])=>{t.paymentCards[r]={},Object.entries(i).forEach(([s,a])=>{t.paymentCards[r][s]=wr.fromJson(a,s,r)})}),t.createdAt=new Date(e.createdAt),t.limitOfBuisnesses=e.limitOfBuisnesses||1,e.authProviders?Object.entries(e.authProviders).forEach(([r,i])=>{if(ca[r]){const s=ca[r];t.authProviders[s]=new Date(i)||new Date(2023)}}):t.authProviders={[w0.Phone]:t.createdAt},t.id===t.phoneNumber?t.isVerifiedPhone=!0:t.isVerifiedPhone=e.isVerifiedPhone||!1,e.lastTimeConnect&&(t.lastTimeConnect=new Date(e.lastTimeConnect)||new Date),t.userPublicData=new yr({isVerifiedPhone:t.isVerifiedPhone,phoneNumber:t.phoneNumber}),t}setUserPublicData(e){this.name=e.name||"",e.devices&&typeof e.devices=="object"&&Object.entries(e.devices).forEach(([t,r])=>{this.devices[t]=We.fromJson(r,t)}),this.gender=et[e.gender],this.phoneNumber=e.phoneNumber,this.id=e.id||e.phoneNumber,this.userPublicData.setUserPublicData(e,this)}firstEnterance(e){return!new Set([...this.lastVisitedBuisnesses,...this.lastVisitedBuisnessesRemoved]).has(e)}toUserDocJson(){const e={};return e.name=this.name,e.devices={},Object.entries(this.devices).forEach(([t,r])=>{e.devices[t]=r.toJson()}),this.lastTimeUpdateEmail.getTime()!==new Date(0).getTime()&&(e.lastTimeUpdateEmail=this.lastTimeUpdateEmail.toISOString()),this.lastTimeUpdatePhone.getTime()!==new Date(0).getTime()&&(e.lastTimeUpdatePhone=this.lastTimeUpdatePhone.toISOString()),e.gender=Yt[this.gender],e.phoneNumber=this.phoneNumber,e.id=this.id,Object.keys(this.termsApprovals).length>0&&(e.termsApprovals={},Object.entries(this.termsApprovals).forEach(([t,r])=>{e.termsApprovals[t]=r.toISOString()})),Object.keys(this.seenUpdates).length>0&&(e.seenUpdates={},Object.entries(this.seenUpdates).forEach(([t,r])=>{e.seenUpdates[t]=Array.from(r)})),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.preferdTipPercentage=this.preferdTipPercentage,e.revenueCatId=this.revenueCatId,Object.keys(this.productsIds).length>0&&(e.productsIds={},Object.entries(this.productsIds).forEach(([t,r])=>{e.productsIds[t]=r.toJson()})),e.pendingProductsIds=this.pendingProductsIds,e.lastCleanDate=this.lastCleanDate,e.limitOfBuisnesses=this.limitOfBuisnesses,e.lastVisitedBuisnesses=this.lastVisitedBuisnesses,e.lastVisitedBuisnessesRemoved=this.lastVisitedBuisnessesRemoved,e.businessesInfo={},this.cardPaymentsPass!==""&&(e.cardPaymentsPass=this.cardPaymentsPass),Object.entries(this.businessesInfo).forEach(([t,r])=>{e.businessesInfo[t]=r.toJson()}),e.storyLikes=this.storyLikes,e.waitingListTopics={},Object.entries(this.waitingListTopics).forEach(([t,r])=>{e.waitingListTopics[t]=r.toJson()}),e.businessTopics=Array.from(this.businessTopics),e.authProviders={},Object.entries(this.authProviders).forEach(([t,r])=>{e.authProviders[t]=r.toISOString()}),e.paymentCards={},Object.entries(this.paymentCards).forEach(([t,r])=>{e.paymentCards[t]={},Object.entries(r).forEach(([i,s])=>{e.paymentCards[t][i]=s.toJson()})}),e.createdAt=this.createdAt.toISOString(),e}get developerId(){return this.id.replace("+","")}toString(){return JSON.stringify(this.toUserDocJson())+JSON.stringify(this.userPublicData.toJson())}}async function Mm(){if(je.currentBusinesssId!==""){let i=0;for(;de.GI().workers.isEmpty&&i<10;)i++,await new Promise(s=>setTimeout(s,100))}const n={},e=Be.GI().user,t=new Map,r=e.bookings.recurrence||{};for(const i of Object.values(e.bookings.futureBookings))for(const[s,a]of Object.entries(i))t.set(s,a);for(const[i,s]of Object.entries(r)){if(s.buisnessId!==de.GI().business.businessId||s.status!==fe.approved||s.recurrenceEvent==null)continue;const a=de.GI().workers[s.workerId];if(a==null)continue;const c=a.notifications.remindersTypes.size===0?0:Math.max(...Object.values(a.notifications.remindersTypes));let o=new Date(new Date().getFullYear(),new Date().getMonth(),new Date().getDay(),s.bookingDate.getHours(),s.bookingDate.getMinutes());for(;o<ae(new Date,new F({minutes:c}));){if(o<new Date){o=new Date(o.getTime()+24*60*60*1e3);continue}if(!s.recurrenceEvent.isAccureInDate({date:o})){o=new Date(o.getTime()+24*60*60*1e3);continue}const u=Ze.fromBooking(s);u.bookingDate=o;let h=!1;Dt(o,Ws)<new Date&&(h=!0,n[pe.regular]??=[],n[pe.regular].push(u));for(const[d,l]of s.remindersTypes)pe.regular===d&&h||a.notifications.remindersTypes.get(d)!=null&&(Dt(o,new F({minutes:a.notifications.remindersTypes.get(d)}))<new Date||(n[d]||=[],n[d].push(u)));o=ae(o,new F({days:1}))}}for(const[i,s]of t){if(s.buisnessId!==de.GI().business.businessId||s.status!==fe.approved)continue;const a=de.GI().workers[s.workerId];if(a==null||s.bookingDate<new Date)continue;let c=!1;Dt(s.bookingDate,Ws)<new Date&&(c=!0,n[pe.regular]||=[],n[pe.regular].push(s));for(const[o,u]of s.remindersTypes)a.notifications.remindersTypes.get(o)!=null&&(pe.regular===o&&c||Dt(s.bookingDate,new F({minutes:a.notifications.remindersTypes.get(o)}))>=new Date)}return n}class Be{static instance;constructor(){}static GI(){return Be.instance||(Be.instance=new Be),Be.instance}user=new cn({});verificationRepo=new wf;userRepo=new nl;userDoc;get getPermission(){return 0}isDeveloper(){return this.isConnected?je.developers.hasOwnProperty(this.user.id.replace("+","")):!1}get isConnected(){return this.verificationRepo.isLoggedIn}get userId(){try{return this.verificationRepo.userId}catch{return""}}async setupUser({newUserId:e="",logoutIfDosentExist:t=!1}){try{return oe.info(`The user id is -> ${e}`),e.length<5?(await this.verificationRepo.logout(),!0):(this.userDoc===void 0&&(this.userDoc=await this.userRepo.getDocSRV({path:Qr,docId:e})),!t&&(this.userDoc==null||!this.userDoc.exists())?(this.userDoc=void 0,!0):(this.user=cn.fromUserDocJson(this.userDoc?.data()),this.startPublicDataListening(),!0))}catch(r){return this.userDoc=void 0,r instanceof Error&&(oe.error(`Error while setting up the user --> ${r}`),Q.GI().addError({details:r.toString()})),!1}}async startPublicDataListening(){this.isConnected&&(this.user.userPublicDataListener=this.userRepo.docListener({path:`${Qr}/${this.user.id}/${bt}`,docId:pr,onChanged:async e=>{try{e.exists()&&(this.user.setUserPublicData(e.data()),console.log(`bookings to load ->  ${this.user.userPublicData.bookingsDocsToLoad}`),await this.loadBookingsDocs(this.user.userPublicData.bookingsDocsToLoad),console.log("Getting new user data from database"),this.user.userPublicData.reminders={},je.currentBusinesssId!==""&&(this.user.userPublicData.reminders=await Mm()),console.log(this.user))}catch(t){console.error(`Error in startPublicDataListening: ${t}`)}}}))}async loadBookingsDocs(e){const t=[];e.forEach(r=>{t.push(this.loadBookingDoc(r))}),await Promise.all(t)}async loadBookingDoc(e){try{const t=await this.userRepo.getDocSRV({path:qt.GI().userBookingsPathByUser(this.user.id),docId:e});e===po?this.user.bookings.setRecurrence(t?.data()||{}):this.user.bookings.setMonth(t?.data()||{},e)}catch(t){oe.error(`Error loading booking doc ${e}: ${t}`)}}}function mr(n,e=-1){let t="",r="",i="",s="",a="",c="",o=n.days;Math.floor(o/30)>0&&(Math.floor(o/30)===1&&(c=q("month")),Math.floor(o/30)===2&&(c=q("twoMonths")),Math.floor(o/30)>2&&(c=`${Math.floor(o/30)} `+q("months"))),o-=Math.floor(o/30)*30,Math.floor(o/7)>0&&(Math.floor(o/7)===1&&(a=q("week")),Math.floor(o/7)===2&&(a=q("twoWeeks")),Math.floor(o/7)>2&&(a=`${Math.floor(o/7)} `+q("weeks"))),o-=Math.floor(o/7)*7,o===1&&(s=q("day")),o===2&&(s=q("twoDays")),o>2&&(s=`${o} `+q("days"));let u=n.hours-n.days*24;u===1&&(t=q("hour")),u===2&&(t=q("twoHours")),u>2&&(t=`${u}`+q("hoursChar"));let h=n.minutes-n.hours*60;r=h>0?`${h}`+q("minutesChar"):"";let d=n.seconds-n.minutes*60;d===1&&(i=q("second",!1)),d>1&&(i=`${d} `+q("seconds"));let l="";return n.days===365?l=q("year"):n.days%365===0&&n.days>365?l=(n.days/365).toFixed(0)+" "+q("years"):a===""&&c!==""&&s===""?l=c:a!==""&&c===""&&s===""?l=a:a!==""&&c!==""&&s===""?l=c+" "+q("and")+a:a!==""&&c===""&&s!==""?l=a+" "+q("and")+s:a===""&&c!==""&&s!==""?l=c+" "+q("and")+s:a!==""&&c!==""&&s!==""?l=c+" ,"+a+" "+q("and")+s:r===""&&t===""&&s!==""?l=s:r!==""&&t===""&&s===""?l=r:r===""&&t!==""&&s===""?l=t:r!==""&&t!==""&&s===""?l=t+" "+q("and")+r:r!==""&&t===""&&s!==""?l=s+" "+q("and")+r:r===""&&t!==""&&s!==""?l=s+" "+q("and")+t:r!==""&&t!==""&&s!==""?l=s+" ,"+t+" "+q("and")+r:i!==""&&(l=i),l.length===0?"":e===-1||e>l.length?l:l.slice(0,e)+".."+l.slice(e)}function q(n,e=!0){return n}class fs{times={};duringPaymentsTimes={};listener;lastBookingTimeDate;constructor(){}static fromJson(e){const t=new fs;return t.setData(e),t}setData(e,t=!0){this.times={},e.eventsTimes!==null&&Object.entries(e.eventsTimes).forEach(([r,i])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&i instanceof Object&&Object.keys(i).length>0&&(this.times[r]={},Object.entries(i).forEach(([c,o])=>{this.times[r][c]=MultiBookingTime.fromJson(o)}))}),e.eventsTimeDuringPayment!==null&&t&&Object.entries(e.eventsTimeDuringPayment).forEach(([r,i])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.entries(i).forEach(([c,o])=>{const u=MultiBookingTime.fromJson(o);if(u.expiredDate!==null&&u.expiredDate.getTime()>Date.now()){if(this.times[r]??={},this.times[r][c]===null){const h=MultiBookingTime.fromMultiBookingTime(u);h.expiredDate=void 0,this.times[r][c]=h}else this.times[r][c].currentParticipants+=u.currentParticipants;s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s),this.duringPaymentsTimes[r]??={},this.duringPaymentsTimes[r][c]=u}})})}toJson(){const e={};return e.eventsTimes={},Object.entries(this.times).forEach(([t,r])=>{e.eventsTimes[t]={},Object.entries(r).forEach(([i,s])=>{e.eventsTimes[t][i]=s.toJson()})}),e}}class $t{showAdressAlert=!1;showAdressMessage=!1;showPhoneAlert=!1;showPhoneMessage=!1;recurrenceNotificationsLastDate;notifyOnPayments=!0;notifyOnWaitingListEvents=!0;notifyAboutCancelNearDeadline=!0;notifyOnClientConfirmArrival=!0;notifyAboutOrderNearDeadline=!0;notificationOption=j.PushOrSMS;notifyWhenGettingBooking=!0;remindersTypes=new Map;constructor(){}static fromJson(e){const t=new $t;if(t.notifyOnWaitingListEvents=e.notifyOnWaitingListEvents??!0,e.notificationOption!=null&&(t.notificationOption=pn[e.notificationOption]??j.PushOrSMS),t.recurrenceNotificationsLastDate=e.recurrenceNotificationsLastDate?new Date(e.recurrenceNotificationsLastDate):void 0,t.remindersTypes=new Map,e.remindersTypes!=null)for(const[r,i]of Object.entries(e.remindersTypes)){const s=yt[r];s!=null&&t.remindersTypes.set(s,i)}else t.remindersTypes.set(pe.regular,e.minutesBeforeNotify??60);return t.notifyOnClientConfirmArrival=e.notifyOnClientConfirmArrival??!0,t.showAdressAlert=e.showAdressAlert??!1,t.showAdressMessage=e.showAdressMessage??!1,t.showPhoneAlert=e.showPhoneAlert??!1,t.showPhoneMessage=e.showPhoneMessage??!1,t.notifyOnPayments=e.notifyOnPayments??!0,t.notifyAboutCancelNearDeadline=e.notifyAboutCancelNearDeadline??!0,t.notifyAboutOrderNearDeadline=e.notifyAboutOrderNearDeadline??!0,t.notifyWhenGettingBooking=e.notifyWhenGettingBooking??!0,t}isEqual(e){return JSON.stringify(e.toJson())===JSON.stringify(this.toJson())}static fromWorkerNotificatiosSettings(e){return $t.fromJson(e.toJson())}toJson(){const e={};return this.notifyOnWaitingListEvents||(e.notifyOnWaitingListEvents=this.notifyOnWaitingListEvents),this.notificationOption!==j.PushOrSMS&&(e.notificationOption=j[this.notificationOption]),this.recurrenceNotificationsLastDate!=null&&(e.recurrenceNotificationsLastDate=this.recurrenceNotificationsLastDate.toISOString()),this.notifyOnClientConfirmArrival||(e.notifyOnClientConfirmArrival=this.notifyOnClientConfirmArrival),this.notifyOnPayments||(e.notifyOnPayments=this.notifyOnPayments),e.remindersTypes={},this.remindersTypes.forEach((t,r)=>{e.remindersTypes[pe[r]]=t}),this.notifyAboutCancelNearDeadline||(e.notifyAboutCancelNearDeadline=this.notifyAboutCancelNearDeadline),this.notifyAboutOrderNearDeadline||(e.notifyAboutOrderNearDeadline=this.notifyAboutOrderNearDeadline),this.notifyWhenGettingBooking||(e.notifyWhenGettingBooking=this.notifyWhenGettingBooking),this.showAdressAlert&&(e.showAdressAlert=this.showAdressAlert),this.showAdressMessage&&(e.showAdressMessage=this.showAdressMessage),this.showPhoneAlert&&(e.showPhoneAlert=this.showPhoneAlert),this.showPhoneMessage&&(e.showPhoneMessage=this.showPhoneMessage),e}toString(){return JSON.stringify(this.toJson())}}class ms{publicCustomersData;constructor({publicCustomersData:e}={}){this.publicCustomersData=e}static fromJson(e){return new ms().setPublicCustomersDataJson(e)}setPublicCustomersDataJson(e){return e.data??={},this.publicCustomersData={},Object.entries(e.data).forEach(([t,r])=>{const i=Vt.fromMinimalJson(r,t);this.publicCustomersData[t]=i}),this}toMinimalJson(){const e={};return e.data={},this.publicCustomersData??={},Object.entries(this.publicCustomersData).forEach(([t,r])=>{e.data[t]=r.toMinimalJson()}),e}}class un{start=new Date(0);end=new Date(0);id="";createdAt;workerId="";addedToDeviceCalendar=!1;colorIndex=1;title="";recurrenceObj;constructor({end:e,start:t,title:r="",id:i="",workerId:s=""}){this.start=t,this.end=e,this.title=r,this.id=i,this.workerId=s,this.recurrenceObj=new ft({start:t,endDate:e,endOption:T0.date})}isOneDay(){return Ue(this.end)===Ue(this.start)}static fromEvent(e){const t=new un({});return t.start=e.from,e.recurrenceEvent?.endDate&&(t.end=e.recurrenceEvent.endDate),t.title=e.eventName,t.createdAt=e.vacationCreatedAt,t.id=e.vacationId,t.recurrenceObj=e.recurrenceEvent,t.addedToDeviceCalendar=e.vacationAddedToDeviceCalendar,t.colorIndex=e.colorIndex,t.workerId=e.ids.length>0?e.ids[0]:"",t}static fromVacation(e){const t=new un({});return t.start=e.start,t.end=e.end,t.addedToDeviceCalendar=e.addedToDeviceCalendar,t.id=e.id,t.createdAt=e.createdAt,t.workerId=e.workerId,t.title=e.title,t.colorIndex=e.colorIndex,t}}class Rm{listener;recurrenceEvents={};vacationsEvents={};constructor(){}get recurrenceEventsList(){const e=[];return Object.entries(this.recurrenceEvents).forEach(([t,r])=>{e.push(...Object.values(r))}),e}get recurrenceEventsListWithOutVacations(){const e=[];return Object.entries(this.recurrenceEvents).forEach(([t,r])=>{Object.entries(r).forEach(([i,s])=>{s.isVacation||e.push(s)})}),e}setRecurrenceEvents(e,t,r,{putBreaks:i=!0}={}){this.recurrenceEvents={},this.vacationsEvents={},Object.entries(e).forEach(([s,a])=>{this.recurrenceEvents[s]={};const c=new Date(s);Object.entries(a).forEach(([o,u])=>{let h="",d="";if(typeof o=="string"){const g=o.split("_");g.length===2&&(h=g[1]),d=g[0]}const l=Ir.fromJson({json:u,timeStr:d,businessModel:r,newTimeId:h,dayString:Am(c),monthString:on(c),workerId:t});l.isVacation&&(this.vacationsEvents[Ue(l.from)]=l),!(!i&&l.isBreak)&&(this.recurrenceEvents[s][o]=l)})})}vacationInDate(e){for(const t of Object.values(this.vacationsEvents))if(t.recurrenceEvent?.isAccureInDate({date:e}))return un.fromEvent(t);return null}}const Lm={R:"R",A:"A"},Um={R:"R",A:"A"};class hn{start=new Date(0);end=new Date(0);operation="R";shifts=[];constructor({start:e,end:t,operation:r,shifts:i}){this.start=e,this.end=t,this.operation=r,this.shifts=i}static fromJson(e,t){const r=t.split("&"),i=new Date(r[0]),s=new Date(r[1]),a=Um[e.operation]||"R",c=e.shifts.map(o=>o);return new hn({start:i,end:s,operation:a,shifts:c})}static fromShiftChangeRange(e){const{start:t,end:r,operation:i,shifts:s}=e;return new hn({start:t,end:r,operation:i,shifts:[...s]})}isSameAs(e){return this.start.getTime()===e.start.getTime()&&this.end.getTime()===e.end.getTime()&&this.operation===e.operation&&this.shifts.toString()===e.shifts.toString()}toJson(){return{operation:Lm[this.operation],shifts:this.shifts}}combineShifts(e){if(this.operation==="R")return this.shifts;const t=[];return zs(t,e),zs(t,this.shifts),Uo(t)}getKey(){const e=this.formatDate(this.start),t=this.formatDate(this.end);return`${e}&${t}`}formatDate(e){return e.toISOString().split("T")[0]}toString(){return JSON.stringify(this.toJson())}}class ln{name="";index="";treatments=new Map;constructor({name:e,treatments:t,index:r}){this.name=e,this.treatments=t,this.index=r}static fromJson(e,t,{pointerShortBookingTime:r,pointerLognestBookingTime:i}={}){const s=e.name||"",a=t,c=new Map;return e.treatments&&Object.entries(e.treatments).forEach(([o,u])=>{c.set(o,_e.fromJson(u,o)),r&&(c.get(o).totalMinutes<r[0]&&(r[0]=Math.max(c.get(o).times.get("0").workMinutes,5)),c.get(o).totalMinutes===r[0]&&(r[0]=Math.min(Math.max(c.get(o).times.get("0").workMinutes,5),r[0]))),i&&c.get(o).totalMinutes>i[0]&&(i[0]=Math.max(c.get(o).totalMinutes,5))}),new ln({name:s,treatments:c,index:a})}containTreatment(e){for(const t of Object.values(this.treatments))if(t.id===e)return!0;return!1}toJson(){const e={};return e.name=this.name,e.treatments={},Object.entries(this.treatments).forEach(([t,r])=>{e.treatments[t]=r.toJson()}),e}fromTreatmentSubject(e){return this.name=e.name,this.index=e.index,this.treatments=new Map,e.treatments.forEach((t,r)=>{this.treatments.set(r,_e.fromTreatment(t))}),this}toString(){return JSON.stringify(this.toJson(),null,2)}}class Wm{bookingsTimes={};lastBookingTimeDate;duringPaymentBookingsTime={};listener;constructor(){}findLastBookingsTimesDate(){let e;return Object.entries(this.bookingsTimes).forEach(([t,r])=>{const i=new Date(t);Object.keys(r).length>0&&(!e||i>e)&&(e=i)}),e}setWorkerPublicData(e,t=!0){this.duringPaymentBookingsTime={},this.bookingsTimes={},dayLightSavingTimes.forEach(r=>{r=new Date(r.getTime()+60*60*1e3),this.bookingsTimes[Ue(r)]={[Ft(r)]:60}}),e.bookingsTimes!=null&&Object.entries(e.bookingsTimes).forEach(([r,i])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.keys(i).length!=0&&(this.bookingsTimes[r]={},Object.entries(i).forEach(([c,o])=>{c.includes("00:00v")?t&&(this.bookingsTimes[r]={"00:00":1439}):(c!=="00:00"||this.bookingsTimes[r]["00:00"]!=1439)&&(this.bookingsTimes[r][c]=o)}),Object.keys(i).length>0&&s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s))}),e.duringPaymentBookingsTime!==null&&Object.entries(e.duringPaymentBookingsTime).forEach(([r,i])=>{const s=new Date(r),a=new Date;a.setDate(a.getDate()-7),s>=a&&Object.entries(i).forEach(([c,o])=>{o.length===2&&o[0]instanceof lt&&o[0].toDate().getTime()>Date.now()&&typeof o[1]=="number"&&(r in this.bookingsTimes?this.bookingsTimes[r][c]=o[1]:this.bookingsTimes[r]={[c]:o[1]},s>(this.lastBookingTimeDate||new Date(0))&&(this.lastBookingTimeDate=s),r in this.duringPaymentBookingsTime?this.duringPaymentBookingsTime[r][c]=o:this.duringPaymentBookingsTime[r]={[c]:o})})})}emptyBookingTimesDatesInMonth(e){Object.entries(this.bookingsTimes).forEach(([t,r])=>{t.includes(e)&&(this.bookingsTimes[t]={})})}toWorkerPublicDataJson(){const e={};return e.bookingsTimes={},Object.entries(this.bookingsTimes).forEach(([t,r])=>{e.bookingsTimes[t]={},Object.entries(r).forEach(([i,s])=>{e.bookingsTimes[t][i]=s})}),e.duringPaymentBookingsTime={},Object.entries(this.duringPaymentBookingsTime).forEach(([t,r])=>{e.duringPaymentBookingsTime[t]={},Object.entries(r).forEach(([i,s])=>{e.duringPaymentBookingsTime[t][i]=s})}),e}}class Er{daysToAllowBookings=7;name="";phone="";id="";profileImg="";about="";maxTreatments=5;allowAppNotification=!0;religions=[];waitingListExceptionDays=new Set;closeScheduleOnHolidays=!1;weekendDays=[5,6];onHoldMinutes=0;cancelMinutes=0;minutesBeforeBookingToConfirm=1440;tempFcm;hasRecurrenceEvents=!1;windowSpaces=qr.shortestTreatment;customWindowMinute=30;showWaitingListWhenThereIsChoises=!0;isVerifiedPhone=!1;lastCleanDate=new Date;gender=z.anonymous;deleteNeerDedlineBookingMessage;orderNeerDedlineBookingMessage;generalBookingMessage;closeCalendarDate;minDateForShowinData=new Date(0);openCalendar=!0;maxFutureBookings=4;currentClientCount=0;showVacations=!0;mustVerifyPhone=!0;allowBookingConfirmations=!0;devices=new Map;storyImages=new Map;createdAt=new Date(0);workTime=new Map([["sunday",[]],["monday",[]],["tuesday",[]],["wednesday",[]],["thursday",[]],["friday",[]],["saturday",[]]]);isCustomersNeedRecurrence=!1;specificRangeChanges=new Map;treatmentsSubjects=new Map;workerPublicData=new Wm;publicCustomers=new ms;storylikesAmount=new Map;multiEventsTimes=new fs;generalBookingsCount=0;passedBookingsCount=0;shortBookingTime=999;longestBookingTime=0;recurrence=new Rm;notifications=new $t;workerDocListner;constructor({}){}static fromUserPublicData(e){const t=new Er({});return t.phone=e.phoneNumber||"",t.currentClientCount=e.currentClientCount||0,t.id=e.id||t.phone,t.name=e.name||"",e.devices!=null&&typeof e.devices=="object"?Object.entries(e.devices).forEach(([r,i])=>{t.devices.set(r,We.fromJson(i,r))}):e.currentFcm!=null&&e.currentFcm!==""&&(t.tempFcm=e.currentFcm),t.gender=et[e.gender]||z.anonymous,t.lastCleanDate=new Date,t.createdAt=new Date,t.notifications.remindersTypes=new Map([[pe.regular,60]]),t}static fromWorkerDocJson(e){const t=new Er({});return t.setFromWorkerDoc(e),t}get treatmentsLength(){let e=0;return Object.values(this.treatmentsSubjects).forEach(t=>{e+=Object.values(t.treatments).length}),e}shiftsFor({day:e}){const t=this.workTime.get(Oe(e,"EEEE").toLowerCase())||[];for(const r of Object.values(this.specificRangeChanges))if(Co(r.start,new Date(r.end.getTime()+23*60*60*1e3+59*60*1e3),e,e)==="STRIKE")return r.combineShifts(t);return Uo(jh(t))}get fcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm!=null)return new Set([this.tempFcm]);const e=new Set;for(const t of Object.values(this.devices))t.activeNotifications&&e.add(t.token);return e}isClosingDate(e){return!this.openCalendar||this.closeCalendarDate!=null&&ke(this.closeCalendarDate).getTime()===ke(e).getTime()}hasTreatemnt(e){for(const t of Object.values(this.treatmentsSubjects))if(t.containTreatment(e))return!0;return!1}get useWhatsApp(){return this.notifications.notificationOption===j.WhatsApp||this.notifications.notificationOption===j.PushOrWhatsApp}setFromWorkerDoc(e){if(this.daysToAllowBookings=e.daysToAllowBookings||7,this.profileImg=e.profileImg||"",this.about=e.about||"",e.lastCleanDate instanceof lt?this.lastCleanDate=e.lastCleanDate.toDate():typeof e.lastCleanDate=="string"&&(this.lastCleanDate=new Date(e.lastCleanDate)||new Date),e.religions&&(this.religions=e.religions.map(t=>Hc[t])),e.windowSpaces&&(this.windowSpaces=jc[e.windowSpaces]||qr.shortestTreatment),this.isCustomersNeedRecurrence=e.isCustomersNeedRecurrence||!1,this.showWaitingListWhenThereIsChoises=e.showWaitingListWhenThereIsChoises||!0,this.customWindowMinute=e.customWindowMinute||30,this.closeScheduleOnHolidays=e.closeScheduleOnHolidays||!1,this.weekendDays=e.weekendDays||[5,6],this.mustVerifyPhone=e.mustVerifyPhone||!0,this.showVacations=e.showVacations||!0,this.gender=et[e.gender]||z.anonymous,this.allowAppNotification=e.allowAppNotification||!0,this.name=e.name||"",this.maxTreatments=e.maxTreatments||3,this.phone=e.phone||"",this.hasRecurrenceEvents=e.hasRecurrenceEvents||!1,this.id=e.id||e.phone||"",this.minutesBeforeBookingToConfirm=e.minutesBeforeBookingToConfirm||1440,this.maxFutureBookings=e.maxFutureBookings||4,this.treatmentsSubjects=new Map,this.shortBookingTime=999,e.treatmentsSubjects){let t=[this.shortBookingTime],r=[this.longestBookingTime];Object.entries(e.treatmentsSubjects).forEach(([i,s])=>{const a=ln.fromJson(s,i,{pointerShortBookingTime:t,pointerLognestBookingTime:r});this.treatmentsSubjects.set(i,a)}),this.shortBookingTime=t[0],this.longestBookingTime=r[0]}else if(e.treatments){const t=new Map;let r=0;Object.entries(e.treatments).forEach(([i,s])=>{const a=_e.fromOldJson(s,r.toString(),i,r+4);t.set(r.toString(),a),a.totalMinutes<this.shortBookingTime&&(this.shortBookingTime=Math.max(a.times.get("0").workMinutes,5)),a.totalMinutes===this.shortBookingTime&&(this.shortBookingTime=Math.min(Math.max(a.times.get("0").workMinutes,5),this.shortBookingTime)),r+=1}),this.treatmentsSubjects=new Map([["0",new ln({name:q("general"),treatments:t,index:"0"})]])}this.onHoldMinutes=e.onHoldMinutes||0,this.cancelMinutes=e.cancelMinutes||0,e.devices!=null&&typeof e.devices=="object"&&Object.entries(e.devices).forEach(([t,r])=>{this.devices.set(t,We.fromJson(r,t))}),this.deleteNeerDedlineBookingMessage=e.deleteNeerDedlineBookingMessage,this.orderNeerDedlineBookingMessage=e.orderNeerDedlineBookingMessage,this.generalBookingMessage=e.generalBookingMessage,this.workTime=new Map,e.workTime&&Object.entries(e.workTime).forEach(([t,r])=>{this.workTime.set(t,r.map(i=>i))}),this.waitingListExceptionDays=new Set,e.waitingListExceptionDays&&e.waitingListExceptionDays.forEach(t=>{this.waitingListExceptionDays.add(t)}),e.notifications?this.notifications=$t.fromJson(e.notifications):(this.notifications=new $t,this.notifications.notifyOnWaitingListEvents=e.notifyOnWaitingListEvents||!0,this.notifications.showAdressAlert=e.showAdressAlert||!1,this.notifications.showAdressMessage=e.showAdressMessage||!1,this.notifications.showPhoneAlert=e.showPhoneAlert||!1,this.notifications.showPhoneMessage=e.showPhoneMessage||!1,this.notifications.remindersTypes=new Map([[pe.regular,e.minutesBeforeNotify||60]]),this.notifications.notifyOnPayments=e.notifyOnPayments||!0,this.notifications.notifyAboutCancelNearDeadline=e.notifyAboutCancelNearDeadline||!0,this.notifications.notifyAboutOrderNearDeadline=e.notifyAboutOrderNearDeadline||!0,this.notifications.notifyWhenGettingBooking=e.notifyWhenGettingBooking||!0,e.notificationOption&&(this.notifications.notificationOption=pn[e.notificationOption]||j.OnlyPush),e.recurrenceNotificationsLastDate?this.notifications.recurrenceNotificationsLastDate=new Date(e.recurrenceNotificationsLastDate):this.notifications.recurrenceNotificationsLastDate=new Date),this.specificRangeChanges=new Map,e.specificRangeChanges&&Object.entries(e.specificRangeChanges).forEach(([t,r])=>{const i=hn.fromJson(r,t);i.end>=ke(new Date)&&this.specificRangeChanges.set(t,i)}),this.storyImages=new Map,e.storyImages&&Object.entries(e.storyImages).forEach(([t,r])=>{this.storyImages.set(t,r)}),e.closeCalendarDate&&(this.closeCalendarDate=new Date(e.closeCalendarDate)),e.minDateForShowinData&&(this.minDateForShowinData=kn(e.minDateForShowinData)),this.openCalendar=e.openCalendar||!0,this.allowBookingConfirmations=e.allowBookingConfirmations||!0,e.createdAt?this.createdAt=new Date(e.createdAt):this.createdAt=new Date(2023,0,1),this.id===this.phone?this.isVerifiedPhone=!0:this.isVerifiedPhone=e.isVerifiedPhone||!1}getInvoiceWorkerInfo(){return new InvoiceWorkerInfo({workerId:this.id,workerName:this.name})}getFcmsTokens(){if(!this.allowAppNotification)return new Set;if(this.tempFcm!=null)return new Set([this.tempFcm]);const e=new Set;return Object.values(this.devices).forEach(t=>{t.activeNotifications&&e.add(t.token)}),e}toWorkerDocJson(){const e={};return e.workTime={},Object.entries(this.workTime).forEach(([t,r])=>{e.workTime[t]=r}),e.specificRangeChanges={},Object.entries(this.specificRangeChanges).forEach(([t,r])=>{e.specificRangeChanges[t]=r.toJson()}),e.religions=[],this.religions.forEach(t=>{e.religions.push(Wc[t])}),this.closeCalendarDate!=null&&(e.closeCalendarDate=new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}).format(this.closeCalendarDate)),this.minDateForShowinData.getFullYear()!=new Date(0).getFullYear()&&(e.minDateForShowinData=Ue(this.minDateForShowinData)),this.openCalendar||(e.openCalendar=this.openCalendar),e.allowBookingConfirmations=this.allowBookingConfirmations,this.mustVerifyPhone||(e.mustVerifyPhone=this.mustVerifyPhone),this.isCustomersNeedRecurrence&&(e.isCustomersNeedRecurrence=this.isCustomersNeedRecurrence),e.weekendDays=this.weekendDays,e.maxTreatments=this.maxTreatments,e.gender=Yt[this.gender],e.onHoldMinutes=this.onHoldMinutes,e.cancelMinutes=this.cancelMinutes,this.hasRecurrenceEvents&&(e.hasRecurrenceEvents=this.hasRecurrenceEvents),this.showVacations||(e.showVacations=this.showVacations),e.devices={},Object.entries(this.devices).forEach(([t,r])=>{e.devices[t]=r.toJson()}),e.deleteNeerDedlineBookingMessage=this.deleteNeerDedlineBookingMessage,e.orderNeerDedlineBookingMessage=this.orderNeerDedlineBookingMessage,e.generalBookingMessage=this.generalBookingMessage,e.closeScheduleOnHolidays=this.closeScheduleOnHolidays,this.customWindowMinute!=30&&(e.customWindowMinute=this.customWindowMinute),this.windowSpaces!=qr.shortestTreatment&&(e.windowSpaces=Zc[this.windowSpaces]),this.minutesBeforeBookingToConfirm!=1440&&(e.minutesBeforeBookingToConfirm=this.minutesBeforeBookingToConfirm),e.bookingDaysToDeleteLocal=[],e.notifications=this.notifications.toJson(),e.lastCleanDate=this.lastCleanDate.toString(),e.daysToAllowBookings=this.daysToAllowBookings,this.maxFutureBookings!=4&&(e.maxFutureBookings=this.maxFutureBookings),this.currentClientCount!=0&&(e.currentClientCount=this.currentClientCount),this.allowAppNotification||(e.allowAppNotification=this.allowAppNotification),this.waitingListExceptionDays.entries.length>0&&(e.waitingListExceptionDays=Array.from(this.waitingListExceptionDays)),e.treatmentsSubjects={},Object.entries(this.treatmentsSubjects).forEach(([t,r])=>{e.treatmentsSubjects[t]=r.toJson()}),this.showWaitingListWhenThereIsChoises||(e.showWaitingListWhenThereIsChoises=this.showWaitingListWhenThereIsChoises),this.isVerifiedPhone&&(e.isVerifiedPhone=this.isVerifiedPhone),e.profileImg=this.profileImg,e.about=this.about,e.name=name,e.phone=this.phone,e.id=this.id,e.storyImages={},Object.entries(this.storyImages).forEach(([t,r])=>{e.storyImages[t]=r}),e.createdAt=this.createdAt.toString(),e}toString(){return JSON.stringify(this.toWorkerDocJson())+this.workerPublicData.toWorkerPublicDataJson().toString()}}class Hm extends Wo{constructor(){super()}async getDocRepo({path:e,docId:t,insideEnviroments:r=!0}){return await super.getDocSRV({path:e,docId:t,insideEnviroments:r})}async createDocRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:i=!0,mergeIfExist:s=!1}){const a=this.getBatch;return super.createDoc({batch:a,path:e,docId:t,valueAsJson:r,insideEnviroments:i,mergeIfExist:s}),await this.commmitBatch(a)}async updateFieldInsideDocAsMapRepo({path:e,docId:t,fieldName:r,value:i,insideEnviroments:s=!0,command:a=null}){const c=this.getBatch;return this.updateFieldInsideDocAsMap({batch:c,path:e,docId:t,fieldName:r,value:i,command:a,insideEnviroments:s}),await this.commmitBatch(c)}async updateMultipleFieldsInsideDocAsMapRepo({path:e,docId:t,data:r,insideEnviroments:i=!0}){const s=this.getBatch;return super.updateMultipleFieldsInsideDocAsMap({batch:s,path:e,docId:t,data:r,insideEnviroments:i}),await this.commmitBatch(s)}async deleteDocRepo({path:e,docId:t}){const r=this.getBatch;return super.deleteDoc({batch:r,path:e,docId:t}),await this.commmitBatch(r)}async setDocRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:i=!0}){const s=this.getBatch;return super.setDoc({batch:s,path:e,docId:t,valueToSet:r,insideEnviroments:i}),await this.commmitBatch(s)}async setAsMapWithMergeRepo({path:e,docId:t,valueAsJson:r,insideEnviroments:i=!0}){const s=this.getBatch;return super.setAsMap({batch:s,path:e,docId:t,data:r,insideEnviroments:i}),await this.commmitBatch(s)}docListenerRepo({path:e,docId:t,onChanged:r}){return super.docListener({path:e,docId:t,onChanged:r})}async getWorkerFromTransactionRepo({transaction:e,workerId:t,businessModel:r,needMultiDoc:i=!1}){const s=`${$e}/${je.currentBusinesssId}/${Mt}`,a=await this.transactionGet(e,s,t);if(!a.exists())return null;const c=Er.fromWorkerDocJson(a.data());return await super.transactionGet(e,`${s}/${t}/${bt}`,pr).then(o=>{o.exists()&&c.workerPublicData.setWorkerPublicData(o.data())}),c.hasRecurrenceEvents&&c.isCustomersNeedRecurrence&&await super.transactionGet(e,`${s}/${t}/${bt}`,Nc).then(o=>{o.exists()&&o.data()!=null&&c.recurrence.setRecurrenceEvents(o.data(),t,r??Et.empty())}),i&&await super.transactionGet(e,`${s}/${t}/${bt}`,Mc).then(o=>{o.exists()&&c.multiEventsTimes.setData(o.data())}),c}toFormatedCustomerData({customerData:e,amountOfBookingsCommand:t,useUserFirstBookingsDate:r=!1,saveExtraData:i=!1}){const s=e.toJson();s.amoutOfBookings=t;const a={};return a[`data.${e.customerUuid}.amoutOfBookings`]=s.amoutOfBookings,s.lastBookingsDate!=null&&(a[`data.${e.customerUuid}.lastBookingsDate`]=s.lastBookingsDate),r?s.userFirstBookingsDate!=null&&(a[`data.${e.customerUuid}.userFirstBookingsDate`]=s.userFirstBookingsDate):s.firstBookingsDate!=null&&(a[`data.${e.customerUuid}.firstBookingsDate`]=s.firstBookingsDate),i&&(s.gender!=null&&(a[`data.${e.customerUuid}.gender`]=s.gender),s.name!=null&&(a[`data.${e.customerUuid}.name`]=s.name),s.workerNaming!=null&&(a[`data.${e.customerUuid}.name`]=s.workerNaming),s.email!=null&&(a[`data.${e.customerUuid}.email`]=s.email),s.id!=null&&(a[`data.${e.customerUuid}.id`]=s.id)),a}async realTimeEventsCounterHandler({businessId:e,workerId:t,types:r,increment:i}){if(r.size===0)return!0;const s=qt.GI().getWorkerCountersPath(e,t),a={};return r.forEach((c,o)=>{Ms[o]!==null&&c!==0&&(a[Ms[o]]=(i?1:-1)*c)}),Object.keys(a).length===0?!0:await this.incrementMultipleNumberChild({childPath:s,data:a})}}class dn{static _singleton=new dn;constructor(){}static GI(){return dn._singleton}defaultTheme="darkIos";currentKeyTheme=null;themeCauseMainBuilt=!1;currentThemes={...vo};currentBusinessTheme=null;async changeTheme(e,{needOverlayHandling:t=!0,ovveride:r=!1,needWaitOverlay:i=!1}={}){const s=this.currentThemes[e];if(s==null||this.currentBusinessTheme==null||!s.isEqual(this.currentBusinessTheme)||r){switch(this.currentThemes[e]?.brightness){case Pi.light:de.GI().businessIcon="darkShopIcon";break;case Pi.dark:de.GI().businessIcon="lightShopIcon";break;default:de.GI().businessIcon="lightShopIcon";break}return this.themeCauseMainBuilt=!0,this.currentKeyTheme=e,this.currentThemes.hasOwnProperty(e)&&(this.currentBusinessTheme=this.currentThemes[e]),!0}return!1}}function Vm(n,e){const t=e.split("--")[0];return je.developers.hasOwnProperty(t)&&(n=je.developers[t].businessProductId),n.includes("basic")?vt.basic:n.includes("landing")?vt.landingPage:n.includes("advanced")?vt.advanced:n.includes("golden")?vt.golden:vt.trial}class de{static instance;constructor(){}static GI(){return de.instance||(de.instance=new de),de.instance}generalRepo=new Hm;business=new Et({businessId:"",design:new Je});workers={};businessIcon="";businessSubtype=vt.trial;async initSettings(e,{fromLoading:t=!1}={}){try{this.workers={},je.currentBusinesssId=e,console.log("222222222222223333333333333");const r=await Promise.all([this._loadSettingsDoc(e),this._loadBusinessWorkers(e)]);return console.log("22222222222222222"),this.businessSubtype=Vm(this.business.productId,e),r.length>0&&r[0]===!1?!1:(this.makeBusinessDataListener(),!0)}catch(r){return oe.error(`Error while initializing settings --> ${r}`),!1}}async loadBusiness(e,t,{fromLoading:r=!1,fromSearch:i=!1}={}){console.log("1111111111111111111");try{const s=await this.initSettings(e,{fromLoading:r});return console.log("33333333333333333322222222222222222"),dn.GI().themeCauseMainBuilt,!0}catch{return!1}}async _loadSettingsDoc(e){try{console.log("eeeeeeedddddddddddddd");const t=await this.generalRepo.getDocRepo({path:$e,docId:e});return t===void 0||!t.exists||t.data()===null?(Q.GI().error=U.notFoundBusiness,!1):(this.business=Et.fromJson(t.data(),e),!0)}catch{return!1}}async _loadBusinessWorkers(e){try{const t=`${$e}/${e}/${Mt}`;console.log("eewwwwwwwww");const r=await this.generalRepo.getAllDocsInsideCollection(t);return r!==null&&r.forEach(i=>{const s=Er.fromWorkerDocJson(i);Be.GI().getPermission>1||(s.id,Be.GI().user.id),this.workers[s.id]=s}),!0}catch(t){return t instanceof Error&&(oe.error(`Error while loading the business workers docs --> ${t}`),oe.error(t.stack)),!0}}async makeBusinessDataListener(){const e=qt.GI().getBusinessDataPath(je.currentBusinesssId);this.business.businessData.listener=this.generalRepo.listenToChild({childPath:e,callback:t=>{t.exists()&&(this.business.businessData.setBusinessData(t),console.log(this.business.businessData))}})}}export{w0 as A,de as B,F as D,Bc as E,Hm as G,xf as L,dn as T,Be as U,wf as V,tp as a,Zm as b,ep as c,Ym as d,bt as e,pr as f,jm as g,yr as h,$e as i,je as j,Km as k,Jm as l,Gm as m,on as n,Xm as o,Q as p,oe as q,Qm as r,Vi as s,Qr as u};
